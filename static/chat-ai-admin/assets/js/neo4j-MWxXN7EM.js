const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/auto-track-C60o0fXr.js","assets/js/editor-cherry-CFIsbKoN.js","assets/css/editor-cherry-kWe5DEPq.css","assets/js/lodash-Bm5sK6rN.js","assets/js/elkjs-BN8GIjVH.js","assets/js/index-DpcRw7pP.js","assets/js/index-e1OJvpU4.js","assets/js/is-plan-event-enabled-DS1Agtkw.js","assets/js/index-BbJ932W9.js","assets/js/index-D5Lk4-cK.js","assets/js/index-DPaGinvI.js"])))=>i.map(i=>d[i]);
var rD=Object.defineProperty;var nD=(r,e,t)=>e in r?rD(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Bt=(r,e,t)=>nD(r,typeof e!="symbol"?e+"":e,t);import{g as sv,a as iD}from"./editor-cherry-CFIsbKoN.js";import{D as vi,E as yr,F as R2}from"./lodash-Bm5sK6rN.js";const oD="modulepreload",aD=function(r){return"/"+r},w1={},Ei=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let a=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=a(t.map(l=>{if(l=aD(l),l in w1)return;w1[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":oD,c||(h.as="script"),h.crossOrigin="",h.href=l,u&&h.setAttribute("nonce",u),document.head.appendChild(h),c)return new Promise((d,v)=>{h.addEventListener("load",d),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})};function v0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function sD(r){if(Array.isArray(r))return r}function uD(r){if(Array.isArray(r))return v0(r)}function xa(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function lD(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,I2(n.key),n)}}function Sa(r,e,t){return e&&lD(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Vn(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=Tb(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function k2(r,e,t){return(e=I2(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cD(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function fD(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function hD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kr(r,e){return sD(r)||fD(r,e)||Tb(r,e)||hD()}function Id(r){return uD(r)||cD(r)||Tb(r)||dD()}function vD(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function I2(r){var e=vD(r,"string");return typeof e=="symbol"?e:e+""}function Br(r){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(r)}function Tb(r,e){if(r){if(typeof r=="string")return v0(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v0(r,e):void 0}}var Lr=typeof window>"u"?null:window,E1=Lr?Lr.navigator:null;Lr&&Lr.document;var pD=Br(""),D2=Br({}),gD=Br(function(){}),yD=typeof HTMLElement>"u"?"undefined":Br(HTMLElement),Jc=function(e){return e&&e.instanceString&&wr(e.instanceString)?e.instanceString():null},it=function(e){return e!=null&&Br(e)==pD},wr=function(e){return e!=null&&Br(e)===gD},nr=function(e){return!Zn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Vt=function(e){return e!=null&&Br(e)===D2&&!nr(e)&&e.constructor===Object},mD=function(e){return e!=null&&Br(e)===D2},Fe=function(e){return e!=null&&Br(e)===Br(1)&&!isNaN(e)},bD=function(e){return Fe(e)&&Math.floor(e)===e},Dd=function(e){if(yD!=="undefined")return e!=null&&e instanceof HTMLElement},Zn=function(e){return ef(e)||M2(e)},ef=function(e){return Jc(e)==="collection"&&e._private.single},M2=function(e){return Jc(e)==="collection"&&!e._private.single},Cb=function(e){return Jc(e)==="core"},N2=function(e){return Jc(e)==="stylesheet"},_D=function(e){return Jc(e)==="event"},va=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},wD=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},ED=function(e){return Vt(e)&&Fe(e.x1)&&Fe(e.x2)&&Fe(e.y1)&&Fe(e.y2)},OD=function(e){return mD(e)&&wr(e.then)},xD=function(){return E1&&E1.userAgent.match(/msie|trident|edge/i)},Iu=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var n=function(){var o=this,a=arguments,s,u=t.apply(o,a),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return n.cache={},n},Pb=Iu(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),uv=Iu(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),L2=Iu(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),O1=function(e){return va(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},ea=function(e,t){return e.slice(-1*t.length)===t},jr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",SD="rgb[a]?\\(("+jr+"[%]?)\\s*,\\s*("+jr+"[%]?)\\s*,\\s*("+jr+"[%]?)(?:\\s*,\\s*("+jr+"))?\\)",TD="rgb[a]?\\((?:"+jr+"[%]?)\\s*,\\s*(?:"+jr+"[%]?)\\s*,\\s*(?:"+jr+"[%]?)(?:\\s*,\\s*(?:"+jr+"))?\\)",CD="hsl[a]?\\(("+jr+")\\s*,\\s*("+jr+"[%])\\s*,\\s*("+jr+"[%])(?:\\s*,\\s*("+jr+"))?\\)",PD="hsl[a]?\\((?:"+jr+")\\s*,\\s*(?:"+jr+"[%])\\s*,\\s*(?:"+jr+"[%])(?:\\s*,\\s*(?:"+jr+"))?\\)",AD="\\#[0-9a-fA-F]{3}",RD="\\#[0-9a-fA-F]{6}",j2=function(e,t){return e<t?-1:e>t?1:0},kD=function(e,t){return-1*j2(e,t)},ct=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o];r[a]=n[a]}}return r},ID=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,o,a=16;return t?(n=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(n=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[n,i,o]}},DD=function(e){var t,n,i,o,a,s,u,l;function c(v,p,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?v+(p-v)*6*m:m<1/2?p:m<2/3?v+(p-v)*(2/3-m)*6:v}var f=new RegExp("^"+CD+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,o=parseFloat(f[3]),o<0||o>100)||(o=o/100,a=f[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var h=o<.5?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*c(d,h,n+1/3)),u=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}t=[s,u,l,a]}return t},MD=function(e){var t,n=new RegExp("^"+SD+"$").exec(e);if(n){t=[];for(var i=[],o=1;o<=3;o++){var a=n[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},ND=function(e){return LD[e.toLowerCase()]},F2=function(e){return(nr(e)?e:null)||ND(e)||ID(e)||MD(e)||DD(e)},LD={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},B2=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(Vt(a))throw Error("Tried to set map with object key");o<n.length-1?(t[a]==null&&(t[a]={}),t=t[a]):t[a]=e.value}},U2=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(Vt(a))throw Error("Tried to get map with object key");if(t=t[a],t==null)return t}return t},gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Zp,x1;function rf(){if(x1)return Zp;x1=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Zp=r,Zp}var Qp,S1;function jD(){if(S1)return Qp;S1=1;var r=typeof gh=="object"&&gh&&gh.Object===Object&&gh;return Qp=r,Qp}var Jp,T1;function lv(){if(T1)return Jp;T1=1;var r=jD(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Jp=t,Jp}var eg,C1;function FD(){if(C1)return eg;C1=1;var r=lv(),e=function(){return r.Date.now()};return eg=e,eg}var tg,P1;function BD(){if(P1)return tg;P1=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return tg=e,tg}var rg,A1;function UD(){if(A1)return rg;A1=1;var r=BD(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return rg=t,rg}var ng,R1;function Ab(){if(R1)return ng;R1=1;var r=lv(),e=r.Symbol;return ng=e,ng}var ig,k1;function zD(){if(k1)return ig;k1=1;var r=Ab(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return ig=o,ig}var og,I1;function VD(){if(I1)return og;I1=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return og=t,og}var ag,D1;function z2(){if(D1)return ag;D1=1;var r=Ab(),e=zD(),t=VD(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return ag=a,ag}var sg,M1;function GD(){if(M1)return sg;M1=1;function r(e){return e!=null&&typeof e=="object"}return sg=r,sg}var ug,N1;function nf(){if(N1)return ug;N1=1;var r=z2(),e=GD(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return ug=n,ug}var lg,L1;function qD(){if(L1)return lg;L1=1;var r=UD(),e=rf(),t=nf(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=o.test(l);return f||a.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return lg=u,lg}var cg,j1;function WD(){if(j1)return cg;j1=1;var r=rf(),e=FD(),t=qD(),n="Expected a function",i=Math.max,o=Math.min;function a(s,u,l){var c,f,h,d,v,p,m=0,y=!1,b=!1,g=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(y=!!l.leading,b="maxWait"in l,h=b?i(t(l.maxWait)||0,u):h,g="trailing"in l?!!l.trailing:g);function _(k){var I=c,M=f;return c=f=void 0,m=k,d=s.apply(M,I),d}function w(k){return m=k,v=setTimeout(O,u),y?_(k):d}function x(k){var I=k-p,M=k-m,j=u-I;return b?o(j,h-M):j}function E(k){var I=k-p,M=k-m;return p===void 0||I>=u||I<0||b&&M>=h}function O(){var k=e();if(E(k))return T(k);v=setTimeout(O,x(k))}function T(k){return v=void 0,g&&c?_(k):(c=f=void 0,d)}function C(){v!==void 0&&clearTimeout(v),m=0,c=p=f=v=void 0}function P(){return v===void 0?d:T(e())}function R(){var k=e(),I=E(k);if(c=arguments,f=this,p=k,I){if(v===void 0)return w(p);if(b)return clearTimeout(v),v=setTimeout(O,u),_(p)}return v===void 0&&(v=setTimeout(O,u)),d}return R.cancel=C,R.flush=P,R}return cg=a,cg}var HD=WD(),of=tf(HD),fg=Lr?Lr.performance:null,V2=fg&&fg.now?function(){return fg.now()}:function(){return Date.now()},YD=(function(){if(Lr){if(Lr.requestAnimationFrame)return function(r){Lr.requestAnimationFrame(r)};if(Lr.mozRequestAnimationFrame)return function(r){Lr.mozRequestAnimationFrame(r)};if(Lr.webkitRequestAnimationFrame)return function(r){Lr.webkitRequestAnimationFrame(r)};if(Lr.msRequestAnimationFrame)return function(r){Lr.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(V2())},1e3/60)}})(),Md=function(e){return YD(e)},xo=V2,fs=9261,G2=65599,vu=5381,q2=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fs,n=t,i;i=e.next(),!i.done;)n=n*G2+i.value|0;return n},Ic=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fs;return t*G2+e|0},Dc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vu;return(t<<5)+t+e|0},XD=function(e,t){return e*2097152+t},Go=function(e){return e[0]*2097152+e[1]},yh=function(e,t){return[Ic(e[0],t[0]),Dc(e[1],t[1])]},F1=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e[i++]:n.done=!0,n}};return q2(a,t)},ms=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e.charCodeAt(i++):n.done=!0,n}};return q2(a,t)},W2=function(){return $D(arguments)},$D=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=ms(i):t=ms(i,t)}return t};function KD(r,e,t,n,i){var o=i*Math.PI/180,a=Math.cos(o)*(r-t)-Math.sin(o)*(e-n)+t,s=Math.sin(o)*(r-t)+Math.cos(o)*(e-n)+n;return{x:a,y:s}}var ZD=function(e,t,n,i,o,a){return{x:(e-n)*o+n,y:(t-i)*a+i}};function QD(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,i=(e.y1+e.y2)/2,o=e.w/e.h,a=1/o,s=KD(r.x,r.y,n,i,t),u=ZD(s.x,s.y,n,i,o,a);return{x:u.x,y:u.y}}var B1=!0,JD=console.warn!=null,eM=console.trace!=null,Rb=Number.MAX_SAFE_INTEGER||9007199254740991,H2=function(){return!0},Nd=function(){return!1},U1=function(){return 0},kb=function(){},gr=function(e){throw new Error(e)},Y2=function(e){if(e!==void 0)B1=!!e;else return B1},Zt=function(e){Y2()&&(JD?console.warn(e):eM&&console.trace())},tM=function(e){return ct({},e)},Xi=function(e){return e==null?e:nr(e)?e.slice():Vt(e)?tM(e):e},rM=function(e){return e.slice()},X2=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},nM={},$2=function(){return nM},rn=function(e){var t=Object.keys(e);return function(n){for(var i={},o=0;o<t.length;o++){var a=t[o],s=n==null?void 0:n[a];i[a]=s===void 0?e[a]:s}return i}},pa=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},Ib=function(e){e.splice(0,e.length)},iM=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},Bn=function(e,t,n){return n&&(t=L2(n,t)),e[t]},go=function(e,t,n,i){n&&(t=L2(n,t)),e[t]=i},oM=(function(){function r(){xa(this,r),this._obj={}}return Sa(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])})(),mo=typeof Map<"u"?Map:oM,aM="undefined",sM=(function(){function r(e){if(xa(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Sa(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])})(),zu=(typeof Set>"u"?"undefined":Br(Set))!==aM?Set:sM,cv=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Cb(e)){gr("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){gr("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new zu,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),t.renderedPosition){var a=t.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];nr(t.classes)?l=t.classes:it(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||o.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=t.style||t.css;d&&(Zt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},z1=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,o){var a;Vt(n)&&!Zn(n)&&(a=n,n=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!wr(i)?i:o,i=wr(i)?i:function(){};for(var s=this._private.cy,u=n=it(n)?this.filter(n):n,l=[],c=[],f={},h={},d={},v=0,p,m=this.byGroup(),y=m.nodes,b=m.edges,g=0;g<u.length;g++){var _=u[g],w=_.id();_.isNode()&&(l.unshift(_),e.bfs&&(d[w]=!0,c.push(_)),h[w]=0)}for(var x=function(){var k=e.bfs?l.shift():l.pop(),I=k.id();if(e.dfs){if(d[I])return 0;d[I]=!0,c.push(k)}var M=h[I],j=f[I],L=j!=null?j.source():null,F=j!=null?j.target():null,z=j==null?void 0:k.same(L)?F[0]:L[0],V;if(V=i(k,j,z,v++,M),V===!0)return p=k,1;if(V===!1)return 1;for(var G=k.connectedEdges().filter(function(Q){return(!o||Q.source().same(k))&&b.has(Q)}),Y=0;Y<G.length;Y++){var ie=G[Y],W=ie.connectedNodes().filter(function(Q){return!Q.same(k)&&y.has(Q)}),H=W.id();W.length!==0&&!d[H]&&(W=W[0],l.push(W),e.bfs&&(d[H]=!0,c.push(W)),f[H]=ie,h[H]=h[I]+1)}},E;l.length!==0&&(E=x(),!(E!==0&&E===1)););for(var O=s.collection(),T=0;T<c.length;T++){var C=c[T],P=f[C.id()];P!=null&&O.push(P),O.push(C)}return{path:s.collection(O),found:s.collection(p)}}},Mc={breadthFirstSearch:z1({bfs:!0}),depthFirstSearch:z1({dfs:!0})};Mc.bfs=Mc.breadthFirstSearch;Mc.dfs=Mc.depthFirstSearch;var ud={exports:{}},uM=ud.exports,V1;function lM(){return V1||(V1=1,(function(r,e){(function(){var t,n,i,o,a,s,u,l,c,f,h,d,v,p,m;i=Math.floor,f=Math.min,n=function(y,b){return y<b?-1:y>b?1:0},c=function(y,b,g,_,w){var x;if(g==null&&(g=0),w==null&&(w=n),g<0)throw new Error("lo must be non-negative");for(_==null&&(_=y.length);g<_;)x=i((g+_)/2),w(b,y[x])<0?_=x:g=x+1;return[].splice.apply(y,[g,g-g].concat(b)),b},s=function(y,b,g){return g==null&&(g=n),y.push(b),p(y,0,y.length-1,g)},a=function(y,b){var g,_;return b==null&&(b=n),g=y.pop(),y.length?(_=y[0],y[0]=g,m(y,0,b)):_=g,_},l=function(y,b,g){var _;return g==null&&(g=n),_=y[0],y[0]=b,m(y,0,g),_},u=function(y,b,g){var _;return g==null&&(g=n),y.length&&g(y[0],b)<0&&(_=[y[0],b],b=_[0],y[0]=_[1],m(y,0,g)),b},o=function(y,b){var g,_,w,x,E,O;for(b==null&&(b=n),x=(function(){O=[];for(var T=0,C=i(y.length/2);0<=C?T<C:T>C;0<=C?T++:T--)O.push(T);return O}).apply(this).reverse(),E=[],_=0,w=x.length;_<w;_++)g=x[_],E.push(m(y,g,b));return E},v=function(y,b,g){var _;if(g==null&&(g=n),_=y.indexOf(b),_!==-1)return p(y,0,_,g),m(y,_,g)},h=function(y,b,g){var _,w,x,E,O;if(g==null&&(g=n),w=y.slice(0,b),!w.length)return w;for(o(w,g),O=y.slice(b),x=0,E=O.length;x<E;x++)_=O[x],u(w,_,g);return w.sort(g).reverse()},d=function(y,b,g){var _,w,x,E,O,T,C,P,R;if(g==null&&(g=n),b*10<=y.length){if(x=y.slice(0,b).sort(g),!x.length)return x;for(w=x[x.length-1],C=y.slice(b),E=0,T=C.length;E<T;E++)_=C[E],g(_,w)<0&&(c(x,_,0,null,g),x.pop(),w=x[x.length-1]);return x}for(o(y,g),R=[],O=0,P=f(b,y.length);0<=P?O<P:O>P;0<=P?++O:--O)R.push(a(y,g));return R},p=function(y,b,g,_){var w,x,E;for(_==null&&(_=n),w=y[g];g>b;){if(E=g-1>>1,x=y[E],_(w,x)<0){y[g]=x,g=E;continue}break}return y[g]=w},m=function(y,b,g){var _,w,x,E,O;for(g==null&&(g=n),w=y.length,O=b,x=y[b],_=2*b+1;_<w;)E=_+1,E<w&&!(g(y[_],y[E])<0)&&(_=E),y[b]=y[_],b=_,_=2*b+1;return y[b]=x,p(y,O,b,g)},t=(function(){y.push=s,y.pop=a,y.replace=l,y.pushpop=u,y.heapify=o,y.updateItem=v,y.nlargest=h,y.nsmallest=d;function y(b){this.cmp=b??n,this.nodes=[]}return y.prototype.push=function(b){return s(this.nodes,b,this.cmp)},y.prototype.pop=function(){return a(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},y.prototype.replace=function(b){return l(this.nodes,b,this.cmp)},y.prototype.pushpop=function(b){return u(this.nodes,b,this.cmp)},y.prototype.heapify=function(){return o(this.nodes,this.cmp)},y.prototype.updateItem=function(b){return v(this.nodes,b,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var b;return b=new y,b.nodes=this.nodes.slice(0),b},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y})(),(function(y,b){return r.exports=b()})(this,function(){return t})}).call(uM)})(ud)),ud.exports}var hg,G1;function cM(){return G1||(G1=1,hg=lM()),hg}var fM=cM(),af=tf(fM),hM=rn({root:null,weight:function(e){return 1},directed:!1}),dM={dijkstra:function(e){if(!Vt(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=hM(e),i=n.root,o=n.weight,a=n.directed,s=this,u=o,l=it(i)?this.filter(i)[0]:i[0],c={},f={},h={},d=this.byGroup(),v=d.nodes,p=d.edges;p.unmergeBy(function(M){return M.isLoop()});for(var m=function(j){return c[j.id()]},y=function(j,L){c[j.id()]=L,b.updateItem(j)},b=new af(function(M,j){return m(M)-m(j)}),g=0;g<v.length;g++){var _=v[g];c[_.id()]=_.same(l)?0:1/0,b.push(_)}for(var w=function(j,L){for(var F=(a?j.edgesTo(L):j.edgesWith(L)).intersect(p),z=1/0,V,G=0;G<F.length;G++){var Y=F[G],ie=u(Y);(ie<z||!V)&&(z=ie,V=Y)}return{edge:V,dist:z}};b.size()>0;){var x=b.pop(),E=m(x),O=x.id();if(h[O]=E,E!==1/0)for(var T=x.neighborhood().intersect(v),C=0;C<T.length;C++){var P=T[C],R=P.id(),k=w(x,P),I=E+k.dist;I<m(P)&&(y(P,I),f[R]={node:x,edge:k.edge})}}return{distanceTo:function(j){var L=it(j)?v.filter(j)[0]:j[0];return h[L.id()]},pathTo:function(j){var L=it(j)?v.filter(j)[0]:j[0],F=[],z=L,V=z.id();if(L.length>0)for(F.unshift(L);f[V];){var G=f[V];F.unshift(G.edge),F.unshift(G.node),z=G.node,V=z.id()}return s.spawn(F)}}}},vM={kruskal:function(e){e=e||function(g){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,o=n.length,a=new Array(o),s=n,u=function(_){for(var w=0;w<a.length;w++){var x=a[w];if(x.has(_))return w}},l=0;l<o;l++)a[l]=this.spawn(n[l]);for(var c=i.sort(function(g,_){return e(g)-e(_)}),f=0;f<c.length;f++){var h=c[f],d=h.source()[0],v=h.target()[0],p=u(d),m=u(v),y=a[p],b=a[m];p!==m&&(s.merge(h),y.merge(b),a.splice(m,1))}return s}},pM=rn({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),gM={aStar:function(e){var t=this.cy(),n=pM(e),i=n.root,o=n.goal,a=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],o=t.collection(o)[0];var l=i.id(),c=o.id(),f={},h={},d={},v=new af(function(V,G){return h[V.id()]-h[G.id()]}),p=new zu,m={},y={},b=function(G,Y){v.push(G),p.add(Y)},g,_,w=function(){g=v.pop(),_=g.id(),p.delete(_)},x=function(G){return p.has(G)};b(i,l),f[l]=0,h[l]=a(i);for(var E=0;v.size()>0;){if(w(),E++,_===c){for(var O=[],T=o,C=c,P=y[C];O.unshift(T),P!=null&&O.unshift(P),T=m[C],T!=null;)C=T.id(),P=y[C];return{found:!0,distance:f[_],path:this.spawn(O),steps:E}}d[_]=!0;for(var R=g._private.edges,k=0;k<R.length;k++){var I=R[k];if(this.hasElementWithId(I.id())&&!(s&&I.data("source")!==_)){var M=I.source(),j=I.target(),L=M.id()!==_?M:j,F=L.id();if(this.hasElementWithId(F)&&!d[F]){var z=f[_]+u(I);if(!x(F)){f[F]=z,h[F]=z+a(L),b(L,F),m[F]=g,y[F]=I;continue}z<f[F]&&(f[F]=z,h[F]=z+a(L),m[F]=g,y[F]=I)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},yM=rn({weight:function(e){return 1},directed:!1}),mM={floydWarshall:function(e){for(var t=this.cy(),n=yM(e),i=n.weight,o=n.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,h=function(ie){return u.indexOf(ie)},d=function(ie){return u[ie]},v=new Array(f),p=0;p<f;p++){var m=p%c,y=(p-m)/c;y===m?v[p]=0:v[p]=1/0}for(var b=new Array(f),g=new Array(f),_=0;_<l.length;_++){var w=l[_],x=w.source()[0],E=w.target()[0];if(x!==E){var O=h(x),T=h(E),C=O*c+T,P=a(w);if(v[C]>P&&(v[C]=P,b[C]=T,g[C]=w),!o){var R=T*c+O;!o&&v[R]>P&&(v[R]=P,b[R]=O,g[R]=w)}}}for(var k=0;k<c;k++)for(var I=0;I<c;I++)for(var M=I*c+k,j=0;j<c;j++){var L=I*c+j,F=k*c+j;v[M]+v[F]<v[L]&&(v[L]=v[M]+v[F],b[L]=b[M])}var z=function(ie){return(it(ie)?t.filter(ie):ie)[0]},V=function(ie){return h(z(ie))},G={distance:function(ie,W){var H=V(ie),Q=V(W);return v[H*c+Q]},path:function(ie,W){var H=V(ie),Q=V(W),J=d(H);if(H===Q)return J.collection();if(b[H*c+Q]==null)return t.collection();var ne=t.collection(),K=H,$;for(ne.merge(J);H!==Q;)K=H,H=b[H*c+Q],$=g[K*c+H],ne.merge($),ne.merge(d(H));return ne}};return G}},bM=rn({weight:function(e){return 1},directed:!1,root:null}),_M={bellmanFord:function(e){var t=this,n=bM(e),i=n.weight,o=n.directed,a=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,d=h.length,v=new mo,p=!1,m=[];a=l.collection(a)[0],f.unmergeBy(function(pe){return pe.isLoop()});for(var y=f.length,b=function(N){var B=v.get(N.id());return B||(B={},v.set(N.id(),B)),B},g=function(N){return(it(N)?l.$(N):N)[0]},_=function(N){return b(g(N)).dist},w=function(N){for(var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,q=g(N),re=[],ue=q;;){if(ue==null)return t.spawn();var le=b(ue),de=le.edge,xe=le.pred;if(re.unshift(ue[0]),ue.same(B)&&re.length>0)break;de!=null&&re.unshift(de),ue=xe}return u.spawn(re)},x=0;x<d;x++){var E=h[x],O=b(E);E.same(a)?O.dist=0:O.dist=1/0,O.pred=null,O.edge=null}for(var T=!1,C=function(N,B,q,re,ue,le){var de=re.dist+le;de<ue.dist&&!q.same(re.edge)&&(ue.dist=de,ue.pred=N,ue.edge=q,T=!0)},P=1;P<d;P++){T=!1;for(var R=0;R<y;R++){var k=f[R],I=k.source(),M=k.target(),j=s(k),L=b(I),F=b(M);C(I,M,k,L,F,j),o||C(M,I,k,F,L,j)}if(!T)break}if(T)for(var z=[],V=0;V<y;V++){var G=f[V],Y=G.source(),ie=G.target(),W=s(G),H=b(Y).dist,Q=b(ie).dist;if(H+W<Q||!o&&Q+W<H)if(p||(Zt("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var J=[];H+W<Q&&J.push(Y),!o&&Q+W<H&&J.push(ie);for(var ne=J.length,K=0;K<ne;K++){var $=J[K],Z=[$];Z.push(b($).edge);for(var ae=b($).pred;Z.indexOf(ae)===-1;)Z.push(ae),Z.push(b(ae).edge),ae=b(ae).pred;Z=Z.slice(Z.indexOf(ae));for(var se=Z[0].id(),fe=0,ge=2;ge<Z.length;ge+=2)Z[ge].id()<se&&(se=Z[ge].id(),fe=ge);Z=Z.slice(fe).concat(Z.slice(0,fe)),Z.push(Z[0]);var ye=Z.map(function(pe){return pe.id()}).join(",");z.indexOf(ye)===-1&&(m.push(u.spawn(Z)),z.push(ye))}}else break}return{distanceTo:_,pathTo:w,hasNegativeWeightCycle:p,negativeWeightCycles:m}}},wM=Math.sqrt(2),EM=function(e,t,n){n.length===0&&gr("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],o=i[1],a=i[2],s=t[o],u=t[a],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],d=f[2];(t[h]===s&&t[d]===u||t[h]===u&&t[d]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var p=l[v];p[1]===u?(l[v]=p.slice(),l[v][1]=s):p[2]===u&&(l[v]=p.slice(),l[v][2]=s)}for(var m=0;m<t.length;m++)t[m]===u&&(t[m]=s);return l},dg=function(e,t,n,i){for(;n>i;){var o=Math.floor(Math.random()*t.length);t=EM(o,e,t),n--}return t},OM={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(F){return F.isLoop()});var o=n.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/wM);if(o<2){gr("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,d=[],v=new Array(o),p=new Array(o),m=new Array(o),y=function(z,V){for(var G=0;G<o;G++)V[G]=z[G]},b=0;b<=s;b++){for(var g=0;g<o;g++)p[g]=g;var _=dg(p,l.slice(),o,u),w=_.slice();y(p,m);var x=dg(p,_,u,2),E=dg(m,w,u,2);x.length<=E.length&&x.length<h?(h=x.length,d=x,y(p,v)):E.length<=x.length&&E.length<h&&(h=E.length,d=E,y(m,v))}for(var O=this.spawn(d.map(function(F){return i[F[0]]})),T=this.spawn(),C=this.spawn(),P=v[0],R=0;R<v.length;R++){var k=v[R],I=n[R];k===P?T.merge(I):C.merge(I)}var M=function(z){var V=e.spawn();return z.forEach(function(G){V.merge(G),G.connectedEdges().forEach(function(Y){e.contains(Y)&&!O.contains(Y)&&V.merge(Y)})}),V},j=[M(T),M(C)],L={cut:O,components:j,partition1:T,partition2:C};return L}},vg,xM=function(e){return{x:e.x,y:e.y}},fv=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},K2=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},yu=function(e){return{x:e[0],y:e[1]}},SM=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},TM=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},CM=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=t;a<n;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},PM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(h,d){return h-d});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},AM=function(e){return Math.PI*e/180},mh=function(e,t){return Math.atan2(t,e)-Math.PI/2},Db=Math.log2||function(r){return Math.log(r)/Math.log(2)},Mb=function(e){return e>0?1:e<0?-1:0},bs=function(e,t){return Math.sqrt(os(e,t))},os=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},RM=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var o=0;o<t;o++)e[o]=e[o]/n;return e},Wr=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},Eu=function(e,t,n,i){return{x:Wr(e.x,t.x,n.x,i),y:Wr(e.y,t.y,n.y,i)}},kM=function(e,t,n,i){var o={x:t.x-e.x,y:t.y-e.y},a=bs(e,t),s={x:o.x/a,y:o.y/a};return n=n??0,i=i??n*a,{x:e.x+s.x*i,y:e.y+s.y*i}},Nc=function(e,t,n){return Math.max(e,Math.min(n,t))},Rn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},IM=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},DM=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},MM=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},Z2=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},ld=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},cd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,o,a;if(t.length===1)n=i=o=a=t[0];else if(t.length===2)n=o=t[0],a=i=t[1];else if(t.length===4){var s=kr(t,4);n=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},q1=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Nb=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},ta=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},W1=function(e,t){return ta(e,t.x,t.y)},Q2=function(e,t){return ta(e,t.x1,t.y1)&&ta(e,t.x2,t.y2)},NM=(vg=Math.hypot)!==null&&vg!==void 0?vg:function(r,e){return Math.sqrt(r*r+e*e)};function LM(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(O,T){return{x:O.x+T.x,y:O.y+T.y}},n=function(O,T){return{x:O.x-T.x,y:O.y-T.y}},i=function(O,T){return{x:O.x*T,y:O.y*T}},o=function(O,T){return O.x*T.y-O.y*T.x},a=function(O){var T=NM(O.x,O.y);return T===0?{x:0,y:0}:{x:O.x/T,y:O.y/T}},s=function(O){for(var T=0,C=0;C<O.length;C++){var P=O[C],R=O[(C+1)%O.length];T+=P.x*R.y-R.x*P.y}return T/2},u=function(O,T,C,P){var R=n(T,O),k=n(P,C),I=o(R,k);if(Math.abs(I)<1e-9)return t(O,i(R,.5));var M=o(n(C,O),k)/I;return t(O,i(R,M))},l=r.map(function(E){return{x:E.x,y:E.y}});s(l)<0&&l.reverse();for(var c=l.length,f=[],h=0;h<c;h++){var d=l[h],v=l[(h+1)%c],p=n(v,d),m=a({x:p.y,y:-p.x});f.push(m)}for(var y=f.map(function(E,O){var T=t(l[O],i(E,e)),C=t(l[(O+1)%c],i(E,e));return{p1:T,p2:C}}),b=[],g=0;g<c;g++){var _=y[(g-1+c)%c],w=y[g],x=u(_.p1,_.p2,w.p1,w.p2);b.push(x)}return b}function jM(r,e,t,n,i,o){var a=HM(r,e,t,n,i),s=LM(a,o),u=Rn();return s.forEach(function(l){return Z2(u,l.x,l.y)}),u}var J2=function(e,t,n,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?ga(o,a):u,c=o/2,f=a/2;l=Math.min(l,c,f);var h=l!==c,d=l!==f,v;if(h){var p=n-c+l-s,m=i-f-s,y=n+c-l+s,b=m;if(v=ra(e,t,n,i,p,m,y,b,!1),v.length>0)return v}if(d){var g=n+c+s,_=i-f+l-s,w=g,x=i+f-l+s;if(v=ra(e,t,n,i,g,_,w,x,!1),v.length>0)return v}if(h){var E=n-c+l-s,O=i+f+s,T=n+c-l+s,C=O;if(v=ra(e,t,n,i,E,O,T,C,!1),v.length>0)return v}if(d){var P=n-c-s,R=i-f+l-s,k=P,I=i+f-l+s;if(v=ra(e,t,n,i,P,R,k,I,!1),v.length>0)return v}var M;{var j=n-c+l,L=i-f+l;if(M=jl(e,t,n,i,j,L,l+s),M.length>0&&M[0]<=j&&M[1]<=L)return[M[0],M[1]]}{var F=n+c-l,z=i-f+l;if(M=jl(e,t,n,i,F,z,l+s),M.length>0&&M[0]>=F&&M[1]<=z)return[M[0],M[1]]}{var V=n+c-l,G=i+f-l;if(M=jl(e,t,n,i,V,G,l+s),M.length>0&&M[0]>=V&&M[1]>=G)return[M[0],M[1]]}{var Y=n-c+l,ie=i+f-l;if(M=jl(e,t,n,i,Y,ie,l+s),M.length>0&&M[0]<=Y&&M[1]>=ie)return[M[0],M[1]]}return[]},FM=function(e,t,n,i,o,a,s){var u=s,l=Math.min(n,o),c=Math.max(n,o),f=Math.min(i,a),h=Math.max(i,a);return l-u<=e&&e<=c+u&&f-u<=t&&t<=h+u},BM=function(e,t,n,i,o,a,s,u,l){var c={x1:Math.min(n,s,o)-l,x2:Math.max(n,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},UM=function(e,t,n,i){n-=i;var o=t*t-4*e*n;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-t+a)/s,l=(-t-a)/s;return[u,l]},zM=function(e,t,n,i,o){var a=1e-5;e===0&&(e=a),t/=e,n/=e,i/=e;var s,u,l,c,f,h,d,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,o[1]=0,d=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),o[0]=-d+f+h,d+=(f+h)/2,o[4]=o[2]=-d,d=Math.sqrt(3)*(-h+f)/2,o[3]=d,o[5]=-d;return}if(o[5]=o[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-d+2*v,o[4]=o[2]=-(v+d);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),o[0]=-d+v*Math.cos(c/3),o[2]=-d+v*Math.cos((c+2*Math.PI)/3),o[4]=-d+v*Math.cos((c+4*Math.PI)/3)},VM=function(e,t,n,i,o,a,s,u){var l=1*n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=9*n*o-3*n*n-3*n*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,f=3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*t+2*a*a+2*a*t-u*t,h=1*n*o-n*n+n*e-o*e+i*a-i*i+i*t-a*t,d=[];zM(l,c,f,h,d);for(var v=1e-7,p=[],m=0;m<6;m+=2)Math.abs(d[m+1])<v&&d[m]>=0&&d[m]<=1&&p.push(d[m]);p.push(1),p.push(0);for(var y=-1,b,g,_,w=0;w<p.length;w++)b=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*o+p[w]*p[w]*s,g=Math.pow(1-p[w],2)*i+2*(1-p[w])*p[w]*a+p[w]*p[w]*u,_=Math.pow(b-e,2)+Math.pow(g-t,2),y>=0?_<y&&(y=_):y=_;return y},GM=function(e,t,n,i,o,a){var s=[e-n,t-i],u=[o-n,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-o)*(e-o)+(t-a)*(t-a):c-h},Un=function(e,t,n){for(var i,o,a,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],o=n[c*2+1],c+1<n.length/2?(a=n[(c+1)*2],s=n[(c+1)*2+1]):(a=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>t&&l++;else continue;return l%2!==0},So=function(e,t,n,i,o,a,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),d=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=a/2*(n[v*2]*h-n[v*2+1]*d),c[v*2+1]=s/2*(n[v*2+1]*h+n[v*2]*d),c[v*2]+=i,c[v*2+1]+=o;var p;if(l>0){var m=jd(c,-l);p=Ld(m)}else p=c;return Un(e,t,p)},qM=function(e,t,n,i,o,a,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var h=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(h<=Math.pow(f.radius,2))return!0}return Un(e,t,l)},Ld=function(e){for(var t=new Array(e.length/2),n,i,o,a,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],o=e[f*4+2],a=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var h=ra(n,i,o,a,s,u,l,c,!0);t[f*2]=h[0],t[f*2+1]=h[1]}return t},jd=function(e,t){for(var n=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),f=Math.sqrt(l*l+c*c),h=l/f,d=c/f;n[u*4]=i+h*t,n[u*4+1]=o+d*t,n[u*4+2]=a+h*t,n[u*4+3]=s+d*t}return n},WM=function(e,t,n,i,o,a){var s=n-e,u=i-t;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-t)*f+t]},ds=function(e,t,n,i,o,a,s){return e-=o,t-=a,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},jl=function(e,t,n,i,o,a,s){var u=[n-e,i-t],l=[e-o,t-a],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-s*s,d=f*f-4*c*h;if(d<0)return[];var v=(-f+Math.sqrt(d))/(2*c),p=(-f-Math.sqrt(d))/(2*c),m=Math.min(v,p),y=Math.max(v,p),b=[];if(m>=0&&m<=1&&b.push(m),y>=0&&y<=1&&b.push(y),b.length===0)return[];var g=b[0]*u[0]+e,_=b[0]*u[1]+t;if(b.length>1){if(b[0]==b[1])return[g,_];var w=b[1]*u[0]+e,x=b[1]*u[1]+t;return[g,_,w,x]}else return[g,_]},pg=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},ra=function(e,t,n,i,o,a,s,u,l){var c=e-o,f=n-e,h=s-o,d=t-a,v=i-t,p=u-a,m=h*d-p*c,y=f*d-v*c,b=p*f-h*v;if(b!==0){var g=m/b,_=y/b,w=.001,x=0-w,E=1+w;return x<=g&&g<=E&&x<=_&&_<=E?[e+g*f,t+g*v]:l?[e+g*f,t+g*v]:[]}else return m===0||y===0?pg(e,n,s)===s?[s,u]:pg(e,n,o)===o?[o,a]:pg(o,s,n)===n?[n,i]:[]:[]},HM=function(e,t,n,i,o){var a=[],s=i/2,u=o/2,l=t,c=n;a.push({x:l+s*e[0],y:c+u*e[1]});for(var f=1;f<e.length/2;f++)a.push({x:l+s*e[f*2],y:c+u*e[f*2+1]});return a},Lc=function(e,t,n,i,o,a,s,u){var l=[],c,f=new Array(n.length),h=!0;a==null&&(h=!1);var d;if(h){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*a+i,f[v*2+1]=n[v*2+1]*s+o;if(u>0){var p=jd(f,-u);d=Ld(p)}else d=f}else d=n;for(var m,y,b,g,_=0;_<d.length/2;_++)m=d[_*2],y=d[_*2+1],_<d.length/2-1?(b=d[(_+1)*2],g=d[(_+1)*2+1]):(b=d[0],g=d[1]),c=ra(e,t,i,o,m,y,b,g),c.length!==0&&l.push(c[0],c[1]);return l},YM=function(e,t,n,i,o,a,s,u,l){var c=[],f,h=new Array(n.length*2);l.forEach(function(b,g){g===0?(h[h.length-2]=b.startX,h[h.length-1]=b.startY):(h[g*4-2]=b.startX,h[g*4-1]=b.startY),h[g*4]=b.stopX,h[g*4+1]=b.stopY,f=jl(e,t,i,o,b.cx,b.cy,b.radius),f.length!==0&&c.push(f[0],f[1])});for(var d=0;d<h.length/4;d++)f=ra(e,t,i,o,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),m=1;m<c.length/2;m++){var y=Math.pow(c[m*2]-e,2)+Math.pow(c[m*2+1]-t,2);y<=p&&(v[0]=c[m*2],v[1]=c[m*2+1],p=y)}return v}return c},bh=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-n)/o;return a<0&&(a=1e-5),[t[0]+a*i[0],t[1]+a*i[1]]},Cn=function(e,t){var n=p0(e,t);return n=eC(n),n},eC=function(e){for(var t,n,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);for(var c=2/(s-o),f=2/(u-a),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);if(a<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-a);return e},p0=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*n+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},ga=function(e,t){return Math.min(e/4,t/4,8)},tC=function(e,t){return Math.min(e/10,t/10,8)},Lb=function(){return 8},XM=function(e,t,n){return[e-2*t+n,2*(t-e),e]},g0=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function gg(r,e){function t(f){for(var h=[],d=0;d<f.length;d++){var v=f[d],p=f[(d+1)%f.length],m={x:p.x-v.x,y:p.y-v.y},y={x:-m.y,y:m.x},b=Math.sqrt(y.x*y.x+y.y*y.y);h.push({x:y.x/b,y:y.y/b})}return h}function n(f,h){var d=1/0,v=-1/0,p=Vn(f),m;try{for(p.s();!(m=p.n()).done;){var y=m.value,b=y.x*h.x+y.y*h.y;d=Math.min(d,b),v=Math.max(v,b)}}catch(g){p.e(g)}finally{p.f()}return{min:d,max:v}}function i(f,h){return!(f.max<h.min||h.max<f.min)}var o=[].concat(Id(t(r)),Id(t(e))),a=Vn(o),s;try{for(a.s();!(s=a.n()).done;){var u=s.value,l=n(r,u),c=n(e,u);if(!i(l,c))return!1}}catch(f){a.e(f)}finally{a.f()}return!0}var $M=rn({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),KM={pageRank:function(e){for(var t=$M(e),n=t.dampingFactor,i=t.precision,o=t.iterations,a=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,d=c.length,v=new Array(h),p=new Array(f),m=(1-n)/f,y=0;y<f;y++){for(var b=0;b<f;b++){var g=y*f+b;v[g]=0}p[y]=0}for(var _=0;_<d;_++){var w=c[_],x=w.data("source"),E=w.data("target");if(x!==E){var O=l.indexOfId(x),T=l.indexOfId(E),C=a(w),P=T*f+O;v[P]+=C,p[O]+=C}}for(var R=1/f+m,k=0;k<f;k++)if(p[k]===0)for(var I=0;I<f;I++){var M=I*f+k;v[M]=R}else for(var j=0;j<f;j++){var L=j*f+k;v[L]=v[L]/p[k]+m}for(var F=new Array(f),z=new Array(f),V,G=0;G<f;G++)F[G]=1;for(var Y=0;Y<o;Y++){for(var ie=0;ie<f;ie++)z[ie]=0;for(var W=0;W<f;W++)for(var H=0;H<f;H++){var Q=W*f+H;z[W]+=v[Q]*F[H]}RM(z),V=F,F=z,z=V;for(var J=0,ne=0;ne<f;ne++){var K=V[ne]-F[ne];J+=K*K}if(J<i)break}var $={rank:function(ae){return ae=s.collection(ae)[0],F[l.indexOf(ae)]}};return $}},H1=rn({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Ou={degreeCentralityNormalized:function(e){e=H1(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},h=0,d=0,v=0;v<i;v++){var p=n[v],m=p.id();e.root=p;var y=this.degreeCentrality(e);h<y.indegree&&(h=y.indegree),d<y.outdegree&&(d=y.outdegree),c[m]=y.indegree,f[m]=y.outdegree}return{indegree:function(g){return h==0?0:(it(g)&&(g=t.filter(g)),c[g.id()]/h)},outdegree:function(g){return d===0?0:(it(g)&&(g=t.filter(g)),f[g.id()]/d)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(g){return a===0?0:(it(g)&&(g=t.filter(g)),o[g.id()]/a)}}}},degreeCentrality:function(e){e=H1(e);var t=this.cy(),n=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=t.collection(o)[0],s){for(var d=o.connectedEdges(),v=d.filter(function(x){return x.target().same(o)&&n.has(x)}),p=d.filter(function(x){return x.source().same(o)&&n.has(x)}),m=v.length,y=p.length,b=0,g=0,_=0;_<v.length;_++)b+=a(v[_]);for(var w=0;w<p.length;w++)g+=a(p[w]);return{indegree:Math.pow(m,1-u)*Math.pow(b,u),outdegree:Math.pow(y,1-u)*Math.pow(g,u)}}else{for(var l=o.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=a(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Ou.dc=Ou.degreeCentrality;Ou.dcn=Ou.degreeCentralityNormalised=Ou.degreeCentralityNormalized;var Y1=rn({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),xu={closenessCentralityNormalized:function(e){for(var t=Y1(e),n=t.harmonic,i=t.weight,o=t.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),f=0;f<l.length;f++){for(var h=0,d=l[f],v=0;v<l.length;v++)if(f!==v){var p=c.distance(d,l[v]);n?h+=1/p:h+=p}n||(h=1/h),u<h&&(u=h),s[d.id()]=h}return{closeness:function(y){return u==0?0:(it(y)?y=a.filter(y)[0].id():y=y.id(),s[y]/u)}}},closenessCentrality:function(e){var t=Y1(e),n=t.root,i=t.weight,o=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=s.distanceTo(f);a?u+=1/h:u+=h}}return a?u:1/u}};xu.cc=xu.closenessCentrality;xu.ccn=xu.closenessCentralityNormalised=xu.closenessCentralityNormalized;var ZM=rn({weight:null,directed:!1}),y0={betweennessCentrality:function(e){for(var t=ZM(e),n=t.directed,i=t.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(g,_){l[g]=_,_>c&&(c=_)},get:function(g){return l[g]}},h=0;h<s.length;h++){var d=s[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),f.set(v,0)}for(var p=function(){for(var g=s[m].id(),_=[],w={},x={},E={},O=new af(function(W,H){return E[W]-E[H]}),T=0;T<s.length;T++){var C=s[T].id();w[C]=[],x[C]=0,E[C]=1/0}for(x[g]=1,E[g]=0,O.push(g);!O.empty();){var P=O.pop();if(_.push(P),o)for(var R=0;R<u[P].length;R++){var k=u[P][R],I=a.getElementById(P),M=void 0;I.edgesTo(k).length>0?M=I.edgesTo(k)[0]:M=k.edgesTo(I)[0];var j=i(M);k=k.id(),E[k]>E[P]+j&&(E[k]=E[P]+j,O.nodes.indexOf(k)<0?O.push(k):O.updateItem(k),x[k]=0,w[k]=[]),E[k]==E[P]+j&&(x[k]=x[k]+x[P],w[k].push(P))}else for(var L=0;L<u[P].length;L++){var F=u[P][L].id();E[F]==1/0&&(O.push(F),E[F]=E[P]+1),E[F]==E[P]+1&&(x[F]=x[F]+x[P],w[F].push(P))}}for(var z={},V=0;V<s.length;V++)z[s[V].id()]=0;for(;_.length>0;){for(var G=_.pop(),Y=0;Y<w[G].length;Y++){var ie=w[G][Y];z[ie]=z[ie]+x[ie]/x[G]*(1+z[G])}G!=s[m].id()&&f.set(G,f.get(G)+z[G])}},m=0;m<s.length;m++)p();var y={betweenness:function(g){var _=a.collection(g).id();return f.get(_)},betweennessNormalized:function(g){if(c==0)return 0;var _=a.collection(g).id();return f.get(_)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};y0.bc=y0.betweennessCentrality;var QM=rn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),JM=function(e){return QM(e)},eN=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},tN=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},rC=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var o=0;o<t;o++)n+=e[o*t+i];for(var a=0;a<t;a++)e[a*t+i]=e[a*t+i]/n}},rN=function(e,t,n){for(var i=new Array(n*n),o=0;o<n;o++){for(var a=0;a<n;a++)i[o*n+a]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[o*n+u]+=e[o*n+s]*t[s*n+u]}return i},nN=function(e,t,n){for(var i=e.slice(0),o=1;o<n;o++)e=rN(e,i,t);return e},iN=function(e,t,n){for(var i=new Array(t*t),o=0;o<t*t;o++)i[o]=Math.pow(e[o],n);return rC(i,t),i},oN=function(e,t,n,i){for(var o=0;o<n;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},aN=function(e,t,n,i){for(var o=[],a=0;a<t;a++){for(var s=[],u=0;u<t;u++)Math.round(e[a*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&o.push(i.collection(s))}return o},sN=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},uN=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&sN(e[t],e[n])&&e.splice(n,1);return e},X1=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),o=JM(e),a={},s=0;s<t.length;s++)a[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var v=n[d],p=a[v.source().id()],m=a[v.target().id()],y=eN(v,o.attributes);c[p*u+m]+=y,c[m*u+p]+=y}tN(c,u,o.multFactor),rC(c,u);for(var b=!0,g=0;b&&g<o.maxIterations;)b=!1,f=nN(c,u,o.expandFactor),c=iN(f,u,o.inflateFactor),oN(c,f,l,4)||(b=!0),g++;var _=aN(c,u,t,i);return _=uN(_),_},lN={markovClustering:X1,mcl:X1},cN=function(e){return e},nC=function(e,t){return Math.abs(t-e)},$1=function(e,t,n){return e+nC(t,n)},K1=function(e,t,n){return e+Math.pow(n-t,2)},fN=function(e){return Math.sqrt(e)},hN=function(e,t,n){return Math.max(e,nC(t,n))},ml=function(e,t,n,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:cN,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=o(s,u,l);return a(s)},Du={euclidean:function(e,t,n){return e>=2?ml(e,t,n,0,K1,fN):ml(e,t,n,0,$1)},squaredEuclidean:function(e,t,n){return ml(e,t,n,0,K1)},manhattan:function(e,t,n){return ml(e,t,n,0,$1)},max:function(e,t,n){return ml(e,t,n,-1/0,hN)}};Du["squared-euclidean"]=Du.squaredEuclidean;Du.squaredeuclidean=Du.squaredEuclidean;function hv(r,e,t,n,i,o){var a;return wr(r)?a=r:a=Du[r]||Du.euclidean,e===0&&wr(r)?a(i,o):a(e,t,n,i,o)}var dN=rn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),jb=function(e){return dN(e)},Fd=function(e,t,n,i,o){var a=o!=="kMedoids",s=a?function(f){return n[f]}:function(f){return i[f](n)},u=function(h){return i[h](t)},l=n,c=t;return hv(e,i.length,s,u,l,c)},yg=function(e,t,n){for(var i=n.length,o=new Array(i),a=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)o[l]=e.min(n[l]).value,a[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(a[f]-o[f])+o[f];s[c]=u}return s},iC=function(e,t,n,i,o){for(var a=1/0,s=0,u=0;u<t.length;u++){var l=Fd(n,e,t[u],i,o);l<a&&(a=l,s=u)}return s},oC=function(e,t,n){for(var i=[],o=null,a=0;a<t.length;a++)o=t[a],n[o.id()]===e&&i.push(o);return i},vN=function(e,t,n){return Math.abs(t-e)<=n},pN=function(e,t,n){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-t[i][o]);if(a>n)return!1}return!0},gN=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},Z1=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var o=e[Math.floor(Math.random()*e.length)];gN(o,n,i);)o=e[Math.floor(Math.random()*e.length)];n[i]=o}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},Q1=function(e,t,n){for(var i=0,o=0;o<t.length;o++)i+=Fd("manhattan",t[o],e,n,"kMedoids");return i},yN=function(e){var t=this.cy(),n=this.nodes(),i=null,o=jb(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=yg(n,o.k,o.attributes)):Br(o.testCentroids)==="object"?u=o.testCentroids:u=yg(n,o.k,o.attributes):u=yg(n,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=iC(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var h=0;h<o.k;h++){var d=oC(h,n,s);if(d.length!==0){for(var v=o.attributes.length,p=u[h],m=new Array(v),y=new Array(v),b=0;b<v;b++){y[b]=0;for(var g=0;g<d.length;g++)i=d[g],y[b]+=o.attributes[b](i);m[b]=y[b]/d.length,vN(m[b],p[b],o.sensitivityThreshold)||(l=!0)}u[h]=m,a[h]=t.collection(d)}}c++}return a},mN=function(e){var t=this.cy(),n=this.nodes(),i=null,o=jb(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(Br(o.testCentroids)==="object"?s=o.testCentroids:s=Z1(n,o.k)):s=Z1(n,o.k);for(var f=!0,h=0;f&&h<o.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],u[i.id()]=iC(i,s,o.distance,o.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var p=oC(v,n,u);if(p.length!==0){c[v]=Q1(s[v],p,o.attributes);for(var m=0;m<p.length;m++)l=Q1(p[m],p,o.attributes),l<c[v]&&(c[v]=l,s[v]=p[m],f=!0);a[v]=t.collection(p)}}h++}return a},bN=function(e,t,n,i,o){for(var a,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],o.m);for(var c=0;c<e.length;c++)for(var f=0;f<o.attributes.length;f++){a=0,s=0;for(var h=0;h<t.length;h++)a+=i[h][c]*o.attributes[f](t[h]),s+=i[h][c];e[c][f]=a/s}},_N=function(e,t,n,i,o){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),f=0;f<n.length;f++)for(var h=0;h<i.length;h++){s=0;for(var d=0;d<n.length;d++)u=Fd(o.distance,i[h],n[f],o.attributes,"cmeans"),l=Fd(o.distance,i[h],n[d],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[h][f]=1/s}},wN=function(e,t,n,i){for(var o=new Array(n.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);o[u].push(e[l])}for(var f=0;f<o.length;f++)o[f]=i.collection(o[f]);return o},J1=function(e){var t=this.cy(),n=this.nodes(),i=jb(e),o,a,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<i.k;v++)s[h][v]=Math.random(),d+=s[h][v];for(var p=0;p<i.k;p++)s[h][p]=s[h][p]/d}a=new Array(i.k);for(var m=0;m<i.k;m++)a[m]=new Array(i.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(i.k);for(var b=!0,g=0;b&&g<i.maxIterations;)b=!1,bN(a,n,s,l,i),_N(s,u,a,n,i),pN(s,u,i.sensitivityThreshold)||(b=!0),g++;return o=wN(n,s,i,t),{clusters:o,degreeOfMembership:s}},EN={kMeans:yN,kMedoids:mN,fuzzyCMeans:J1,fcm:J1},ON=rn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),xN={single:"min",complete:"max"},SN=function(e){var t=ON(e),n=xN[t.linkage];return n!=null&&(t.linkage=n),t},eE=function(e,t,n,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(T,C){return hv(o.distance,l.length,function(P){return l[P](T)},function(P){return l[P](C)},T,C)},f=0;f<e.length;f++){var h=e[f].key,d=n[h][i[h]];d<s&&(a=h,s=d)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var v=t[a],p=t[i[a]],m;o.mode==="dendrogram"?m={left:v,right:p,key:v.key}:m={value:v.value.concat(p.value),key:v.key},e[v.index]=m,e.splice(p.index,1),t[v.key]=m;for(var y=0;y<e.length;y++){var b=e[y];v.key===b.key?u=1/0:o.linkage==="min"?(u=n[v.key][b.key],n[v.key][b.key]>n[p.key][b.key]&&(u=n[p.key][b.key])):o.linkage==="max"?(u=n[v.key][b.key],n[v.key][b.key]<n[p.key][b.key]&&(u=n[p.key][b.key])):o.linkage==="mean"?u=(n[v.key][b.key]*v.size+n[p.key][b.key]*p.size)/(v.size+p.size):o.mode==="dendrogram"?u=c(b.value,v.value):u=c(b.value[0],v.value[0]),n[v.key][b.key]=n[b.key][v.key]=u}for(var g=0;g<e.length;g++){var _=e[g].key;if(i[_]===v.key||i[_]===p.key){for(var w=_,x=0;x<e.length;x++){var E=e[x].key;n[_][E]<n[_][w]&&(w=E)}i[_]=w}e[g].index=g}return v.key=p.key=v.index=p.index=null,!0},mu=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&mu(e.left,t),e.right&&mu(e.right,t)))},m0=function(e,t){if(!e)return"";if(e.left&&e.right){var n=m0(e.left,t),i=m0(e.right,t),o=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:o.id()}}),t.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},b0=function(e,t,n){if(!e)return[];var i=[],o=[],a=[];return t===0?(e.left&&mu(e.left,i),e.right&&mu(e.right,o),a=i.concat(o),[n.collection(a)]):t===1?e.value?[n.collection(e.value)]:(e.left&&mu(e.left,i),e.right&&mu(e.right,o),[n.collection(i),n.collection(o)]):e.value?[n.collection(e.value)]:(e.left&&(i=b0(e.left,t-1,n)),e.right&&(o=b0(e.right,t-1,n)),i.concat(o))},tE=function(e){for(var t=this.cy(),n=this.nodes(),i=SN(e),o=i.attributes,a=function(g,_){return hv(i.distance,o.length,function(w){return o[w](g)},function(w){return o[w](_)},g,_)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var d=0;d<s.length;d++)for(var v=0;v<=d;v++){var p=void 0;i.mode==="dendrogram"?p=d===v?1/0:a(s[d].value,s[v].value):p=d===v?1/0:a(s[d].value[0],s[v].value[0]),u[d][v]=p,u[v][d]=p,p<u[d][l[d]]&&(l[d]=v)}for(var m=eE(s,c,u,l,i);m;)m=eE(s,c,u,l,i);var y;return i.mode==="dendrogram"?(y=b0(s[0],i.dendrogramDepth,t),i.addDendrogram&&m0(s[0],t)):(y=new Array(s.length),s.forEach(function(b,g){b.key=b.index=null,y[g]=t.collection(b.value)})),y},TN={hierarchicalClustering:tE,hca:tE},CN=rn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),PN=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||gr("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(o){return o===n})||Fe(n)||gr("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(n)),CN(e)},AN=function(e,t,n,i){var o=function(s,u){return i[u](s)};return-hv(e,i.length,function(a){return o(t,a)},function(a){return o(n,a)},t,n)},RN=function(e,t){var n=null;return t==="median"?n=PM(e):t==="mean"?n=CM(e):t==="min"?n=SM(e):t==="max"?n=TM(e):n=t,n},kN=function(e,t,n){for(var i=[],o=0;o<e;o++)t[o*e+o]+n[o*e+o]>0&&i.push(o);return i},rE=function(e,t,n){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[o*e+l]>s&&(a=l,s=t[o*e+l])}a>0&&i.push(a)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},IN=function(e,t,n){for(var i=rE(e,t,n),o=0;o<n.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===n[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var f=0,h=0;h<a.length;h++)f+=t[a[h]*e+a[c]];f>l&&(u=c,l=f)}n[o]=a[u]}return i=rE(e,t,n),i},nE=function(e){for(var t=this.cy(),n=this.nodes(),i=PN(e),o={},a=0;a<n.length;a++)o[n[a].id()]=a;var s,u,l,c,f,h;s=n.length,u=s*s,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<s;v++)for(var p=0;p<s;p++)v!==p&&(l[v*s+p]=AN(i.distance,n[v],n[p],i.attributes));c=RN(l,i.preference);for(var m=0;m<s;m++)l[m*s+m]=c;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;h=new Array(u);for(var b=0;b<u;b++)h[b]=0;for(var g=new Array(s),_=new Array(s),w=new Array(s),x=0;x<s;x++)g[x]=0,_[x]=0,w[x]=0;for(var E=new Array(s*i.minIterations),O=0;O<E.length;O++)E[O]=0;var T;for(T=0;T<i.maxIterations;T++){for(var C=0;C<s;C++){for(var P=-1/0,R=-1/0,k=-1,I=0,M=0;M<s;M++)g[M]=f[C*s+M],I=h[C*s+M]+l[C*s+M],I>=P?(R=P,P=I,k=M):I>R&&(R=I);for(var j=0;j<s;j++)f[C*s+j]=(1-i.damping)*(l[C*s+j]-P)+i.damping*g[j];f[C*s+k]=(1-i.damping)*(l[C*s+k]-R)+i.damping*g[k]}for(var L=0;L<s;L++){for(var F=0,z=0;z<s;z++)g[z]=h[z*s+L],_[z]=Math.max(0,f[z*s+L]),F+=_[z];F-=_[L],_[L]=f[L*s+L],F+=_[L];for(var V=0;V<s;V++)h[V*s+L]=(1-i.damping)*Math.min(0,F-_[V])+i.damping*g[V];h[L*s+L]=(1-i.damping)*(F-_[L])+i.damping*g[L]}for(var G=0,Y=0;Y<s;Y++){var ie=h[Y*s+Y]+f[Y*s+Y]>0?1:0;E[T%i.minIterations*s+Y]=ie,G+=ie}if(G>0&&(T>=i.minIterations-1||T==i.maxIterations-1)){for(var W=0,H=0;H<s;H++){w[H]=0;for(var Q=0;Q<i.minIterations;Q++)w[H]+=E[Q*s+H];(w[H]===0||w[H]===i.minIterations)&&W++}if(W===s)break}}for(var J=kN(s,f,h),ne=IN(s,l,J),K={},$=0;$<J.length;$++)K[J[$]]=[];for(var Z=0;Z<n.length;Z++){var ae=o[n[Z].id()],se=ne[ae];se!=null&&K[se].push(n[Z])}for(var fe=new Array(J.length),ge=0;ge<J.length;ge++)fe[ge]=t.collection(K[J[ge]]);return fe},DN={affinityPropagation:nE,ap:nE},MN=rn({root:void 0,directed:!1}),NN={hierholzer:function(e){if(!Vt(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=MN(e),i=n.root,o=n.directed,a=this,s=!1,u,l,c;i&&(c=it(i)?this.filter(i)[0].id():i[0].id());var f={},h={};o?a.forEach(function(b){var g=b.id();if(b.isNode()){var _=b.indegree(!0),w=b.outdegree(!0),x=_-w,E=w-_;x==1?u?s=!0:u=g:E==1?l?s=!0:l=g:(E>1||x>1)&&(s=!0),f[g]=[],b.outgoers().forEach(function(O){O.isEdge()&&f[g].push(O.id())})}else h[g]=[void 0,b.target().id()]}):a.forEach(function(b){var g=b.id();if(b.isNode()){var _=b.degree(!0);_%2&&(u?l?s=!0:l=g:u=g),f[g]=[],b.connectedEdges().forEach(function(w){return f[g].push(w.id())})}else h[g]=[b.source().id(),b.target().id()]});var d={found:!1,trail:void 0};if(s)return d;if(l&&u)if(o){if(c&&l!=c)return d;c=l}else{if(c&&l!=c&&u!=c)return d;c||(c=l)}else c||(c=a[0].id());var v=function(g){for(var _=g,w=[g],x,E,O;f[_].length;)x=f[_].shift(),E=h[x][0],O=h[x][1],_!=O?(f[O]=f[O].filter(function(T){return T!=x}),_=O):!o&&_!=E&&(f[E]=f[E].filter(function(T){return T!=x}),_=E),w.unshift(x),w.unshift(_);return w},p=[],m=[];for(m=v(c);m.length!=1;)f[m[0]].length==0?(p.unshift(a.getElementById(m.shift())),p.unshift(a.getElementById(m.shift()))):m=v(m.shift()).concat(m);p.unshift(a.getElementById(m.shift()));for(var y in f)if(f[y].length)return d;return d.found=!0,d.trail=this.spawn(p,!0),d}},_h=function(){var e=this,t={},n=0,i=0,o=[],a=[],s={},u=function(h,d){for(var v=a.length-1,p=[],m=e.spawn();a[v].x!=h||a[v].y!=d;)p.push(a.pop().edge),v--;p.push(a.pop().edge),p.forEach(function(y){var b=y.connectedNodes().intersection(e);m.merge(y),b.forEach(function(g){var _=g.id(),w=g.connectedEdges().intersection(e);m.merge(g),t[_].cutVertex?m.merge(w.filter(function(x){return x.isLoop()})):m.merge(w)})}),o.push(m)},l=function(h,d,v){h===v&&(i+=1),t[d]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(d).connectedEdges().intersection(e);if(p.size()===0)o.push(e.spawn(e.getElementById(d)));else{var m,y,b,g;p.forEach(function(_){m=_.source().id(),y=_.target().id(),b=m===d?y:m,b!==v&&(g=_.id(),s[g]||(s[g]=!0,a.push({x:d,y:b,edge:_})),b in t?t[d].low=Math.min(t[d].low,t[b].id):(l(h,b,d),t[d].low=Math.min(t[d].low,t[b].low),t[d].id<=t[b].low&&(t[d].cutVertex=!0,u(d,b))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in t||(i=0,l(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:o}},LN={hopcroftTarjanBiconnected:_h,htbc:_h,htb:_h,hopcroftTarjanBiconnectedComponents:_h},wh=function(){var e=this,t={},n=0,i=[],o=[],a=e.spawn(e),s=function(l){o.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(p){var m=p.target().id();m!==l&&(m in t||s(m),t[m].explored||(t[l].low=Math.min(t[l].low,t[m].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var h=o.pop();if(f.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var d=f.edgesWith(f),v=f.merge(d);i.push(v),a=a.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:a,components:i}},jN={tarjanStronglyConnected:wh,tsc:wh,tscc:wh,tarjanStronglyConnectedComponents:wh},aC={};[Mc,dM,vM,gM,mM,_M,OM,KM,Ou,xu,y0,lN,EN,TN,DN,NN,LN,jN].forEach(function(r){ct(aC,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var sC=0,uC=1,lC=2,Ai=function(e){if(!(this instanceof Ai))return new Ai(e);this.id="Thenable/1.0.7",this.state=sC,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ai.prototype={fulfill:function(e){return iE(this,uC,"fulfillValue",e)},reject:function(e){return iE(this,lC,"rejectReason",e)},then:function(e,t){var n=this,i=new Ai;return n.onFulfilled.push(aE(e,i,"fulfill")),n.onRejected.push(aE(t,i,"reject")),cC(n),i.proxy}};var iE=function(e,t,n,i){return e.state===sC&&(e.state=t,e[n]=i,cC(e)),e},cC=function(e){e.state===uC?oE(e,"onFulfilled",e.fulfillValue):e.state===lC&&oE(e,"onRejected",e.rejectReason)},oE=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},aE=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var o;try{o=e(i)}catch(a){t.reject(a);return}fC(t,o)}}},fC=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Br(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(o){e.reject(o);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(o){i||(i=!0,o===t?e.reject(new TypeError("circular thenable chain")):fC(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(t)};Ai.all=function(r){return new Ai(function(e,t){for(var n=new Array(r.length),i=0,o=function(u,l){n[u]=l,i++,i===r.length&&e(n)},a=0;a<r.length;a++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){o(s,f)},function(f){t(f)});else{var c=u;o(s,c)}})(a)})};Ai.resolve=function(r){return new Ai(function(e,t){e(r)})};Ai.reject=function(r){return new Ai(function(e,t){t(r)})};var Vu=typeof Promise<"u"?Promise:Ai,_0=function(e,t,n){var i=Cb(e),o=!i,a=this._private=ct({duration:1e3},t,n);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&wr(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},_s=_0.prototype;ct(_s,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Zn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Vu(function(i,o){n.push(function(){i()})})}});_s.complete=_s.completed;_s.run=_s.play;_s.running=_s.playing;var FN={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=ct({},t,n);var f=Object.keys(t).length===0;if(f)return new _0(a[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var h=t.renderedPosition,d=s.pan(),v=s.zoom();t.position=K2(h,v,d)}if(u&&t.panBy!=null){var p=t.panBy,m=s.pan();t.pan={x:m.x+p.x,y:m.y+p.y}}var y=t.center||t.centre;if(u&&y!=null){var b=s.getCenterPan(y.eles,t.zoom);b!=null&&(t.pan=b)}if(u&&t.fit!=null){var g=t.fit,_=s.getFitViewport(g.eles||g.boundingBox,g.padding);_!=null&&(t.pan=_.pan,t.zoom=_.zoom)}if(u&&Vt(t.zoom)){var w=s.getZoomedViewport(t.zoom);w!=null?(w.zoomed&&(t.zoom=w.zoom),w.panned&&(t.pan=w.pan)):t.zoom=null}return new _0(a[0],t)}},animate:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=ct({},t,n));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var d=f[h],v=d._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},mg,sE;function dv(){if(sE)return mg;sE=1;var r=Array.isArray;return mg=r,mg}var bg,uE;function BN(){if(uE)return bg;uE=1;var r=dv(),e=nf(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return bg=i,bg}var _g,lE;function UN(){if(lE)return _g;lE=1;var r=z2(),e=rf(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return _g=a,_g}var wg,cE;function zN(){if(cE)return wg;cE=1;var r=lv(),e=r["__core-js_shared__"];return wg=e,wg}var Eg,fE;function VN(){if(fE)return Eg;fE=1;var r=zN(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return Eg=t,Eg}var Og,hE;function GN(){if(hE)return Og;hE=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Og=t,Og}var xg,dE;function qN(){if(dE)return xg;dE=1;var r=UN(),e=VN(),t=rf(),n=GN(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return xg=f,xg}var Sg,vE;function WN(){if(vE)return Sg;vE=1;function r(e,t){return e==null?void 0:e[t]}return Sg=r,Sg}var Tg,pE;function Fb(){if(pE)return Tg;pE=1;var r=qN(),e=WN();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return Tg=t,Tg}var Cg,gE;function vv(){if(gE)return Cg;gE=1;var r=Fb(),e=r(Object,"create");return Cg=e,Cg}var Pg,yE;function HN(){if(yE)return Pg;yE=1;var r=vv();function e(){this.__data__=r?r(null):{},this.size=0}return Pg=e,Pg}var Ag,mE;function YN(){if(mE)return Ag;mE=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Ag=r,Ag}var Rg,bE;function XN(){if(bE)return Rg;bE=1;var r=vv(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return Rg=i,Rg}var kg,_E;function $N(){if(_E)return kg;_E=1;var r=vv(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return kg=n,kg}var Ig,wE;function KN(){if(wE)return Ig;wE=1;var r=vv(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return Ig=t,Ig}var Dg,EE;function ZN(){if(EE)return Dg;EE=1;var r=HN(),e=YN(),t=XN(),n=$N(),i=KN();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Dg=o,Dg}var Mg,OE;function QN(){if(OE)return Mg;OE=1;function r(){this.__data__=[],this.size=0}return Mg=r,Mg}var Ng,xE;function hC(){if(xE)return Ng;xE=1;function r(e,t){return e===t||e!==e&&t!==t}return Ng=r,Ng}var Lg,SE;function pv(){if(SE)return Lg;SE=1;var r=hC();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return Lg=e,Lg}var jg,TE;function JN(){if(TE)return jg;TE=1;var r=pv(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return jg=n,jg}var Fg,CE;function eL(){if(CE)return Fg;CE=1;var r=pv();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Fg=e,Fg}var Bg,PE;function tL(){if(PE)return Bg;PE=1;var r=pv();function e(t){return r(this.__data__,t)>-1}return Bg=e,Bg}var Ug,AE;function rL(){if(AE)return Ug;AE=1;var r=pv();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return Ug=e,Ug}var zg,RE;function nL(){if(RE)return zg;RE=1;var r=QN(),e=JN(),t=eL(),n=tL(),i=rL();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,zg=o,zg}var Vg,kE;function iL(){if(kE)return Vg;kE=1;var r=Fb(),e=lv(),t=r(e,"Map");return Vg=t,Vg}var Gg,IE;function oL(){if(IE)return Gg;IE=1;var r=ZN(),e=nL(),t=iL();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Gg=n,Gg}var qg,DE;function aL(){if(DE)return qg;DE=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return qg=r,qg}var Wg,ME;function gv(){if(ME)return Wg;ME=1;var r=aL();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Wg=e,Wg}var Hg,NE;function sL(){if(NE)return Hg;NE=1;var r=gv();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Hg=e,Hg}var Yg,LE;function uL(){if(LE)return Yg;LE=1;var r=gv();function e(t){return r(this,t).get(t)}return Yg=e,Yg}var Xg,jE;function lL(){if(jE)return Xg;jE=1;var r=gv();function e(t){return r(this,t).has(t)}return Xg=e,Xg}var $g,FE;function cL(){if(FE)return $g;FE=1;var r=gv();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return $g=e,$g}var Kg,BE;function fL(){if(BE)return Kg;BE=1;var r=oL(),e=sL(),t=uL(),n=lL(),i=cL();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Kg=o,Kg}var Zg,UE;function hL(){if(UE)return Zg;UE=1;var r=fL(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,Zg=t,Zg}var Qg,zE;function dL(){if(zE)return Qg;zE=1;var r=hL(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return Qg=t,Qg}var Jg,VE;function dC(){if(VE)return Jg;VE=1;var r=dL(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return Jg=n,Jg}var ey,GE;function vC(){if(GE)return ey;GE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return ey=r,ey}var ty,qE;function vL(){if(qE)return ty;qE=1;var r=Ab(),e=vC(),t=dv(),n=nf(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return ty=a,ty}var ry,WE;function pC(){if(WE)return ry;WE=1;var r=vL();function e(t){return t==null?"":r(t)}return ry=e,ry}var ny,HE;function gC(){if(HE)return ny;HE=1;var r=dv(),e=BN(),t=dC(),n=pC();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return ny=i,ny}var iy,YE;function Bb(){if(YE)return iy;YE=1;var r=nf();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return iy=e,iy}var oy,XE;function pL(){if(XE)return oy;XE=1;var r=gC(),e=Bb();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return oy=t,oy}var ay,$E;function gL(){if($E)return ay;$E=1;var r=pL();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return ay=e,ay}var yL=gL(),mL=tf(yL),sy,KE;function bL(){if(KE)return sy;KE=1;var r=Fb(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return sy=e,sy}var uy,ZE;function _L(){if(ZE)return uy;ZE=1;var r=bL();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return uy=e,uy}var ly,QE;function wL(){if(QE)return ly;QE=1;var r=_L(),e=hC(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return ly=i,ly}var cy,JE;function EL(){if(JE)return cy;JE=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return cy=t,cy}var fy,eO;function OL(){if(eO)return fy;eO=1;var r=wL(),e=gC(),t=EL(),n=rf(),i=Bb();function o(a,s,u,l){if(!n(a))return a;s=e(s,a);for(var c=-1,f=s.length,h=f-1,d=a;d!=null&&++c<f;){var v=i(s[c]),p=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return a;if(c!=h){var m=d[v];p=l?l(m,v,d):void 0,p===void 0&&(p=n(m)?m:t(s[c+1])?[]:{})}r(d,v,p),d=d[v]}return a}return fy=o,fy}var hy,tO;function xL(){if(tO)return hy;tO=1;var r=OL();function e(t,n,i){return t==null?t:r(t,n,i)}return hy=e,hy}var SL=xL(),TL=tf(SL),dy,rO;function CL(){if(rO)return dy;rO=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return dy=r,dy}var vy,nO;function PL(){if(nO)return vy;nO=1;var r=vC(),e=CL(),t=dv(),n=nf(),i=dC(),o=Bb(),a=pC();function s(u){return t(u)?r(u,o):n(u)?[u]:e(i(a(u)))}return vy=s,vy}var AL=PL(),RL=tf(AL),kL={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=ct({},t,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(it(i)){var f=i.indexOf(".")!==-1,h=f&&RL(i);if(a.allowGetting&&o===void 0){var d;return c&&(a.beforeGet(c),h&&c._private[a.field][i]===void 0?d=mL(c._private[a.field],h):d=c._private[a.field][i]),d}else if(a.allowSetting&&o!==void 0){var v=!a.immutableKeys[i];if(v){var p=k2({},i,o);a.beforeSet(s,p);for(var m=0,y=l.length;m<y;m++){var b=l[m];a.canSet(b)&&(h&&c._private[a.field][i]===void 0?TL(b._private[a.field],h,o):b._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&Vt(i)){var g=i,_,w,x=Object.keys(g);a.beforeSet(s,g);for(var E=0;E<x.length;E++){_=x[E],w=g[_];var O=!a.immutableKeys[_];if(O)for(var T=0;T<l.length;T++){var C=l[T];a.canSet(C)&&(C._private[a.field][_]=w)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&wr(i)){var P=i;s.on(a.bindingEvent,P)}else if(a.allowGetting&&i===void 0){var R;return c&&(a.beforeGet(c),R=c._private[a.field]),R}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ct({},t,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(it(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!va(h)){var d=!o.immutableKeys[h];if(d)for(var v=0,p=u.length;v<p;v++)u[v]._private[o.field][h]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var m=0,y=u.length;m<y;m++)for(var b=u[m]._private[o.field],g=Object.keys(b),_=0;_<g.length;_++){var w=g[_],x=!o.immutableKeys[w];x&&(b[w]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},IL={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new Vu(function(s,u){var l=function(d){o.off.apply(o,f),s(d)},c=a.concat([l]),f=c.concat([]);o.on.apply(o,c)})}}},Kt={};[FN,kL,IL].forEach(function(r){ct(Kt,r)});var DL={animate:Kt.animate(),animation:Kt.animation(),animated:Kt.animated(),clearQueue:Kt.clearQueue(),delay:Kt.delay(),delayAnimation:Kt.delayAnimation(),stop:Kt.stop()},fd={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else nr(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new zu(e),a=0;a<t.length;a++){for(var s=t[a],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h);if(!d){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){nr(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,o=[],a=0,s=n.length;a<s;a++)for(var u=n[a],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h),v=!1;t||i&&!d?(l.add(h),v=!0):(!t||i&&d)&&(l.delete(h),v=!0),!c&&v&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};fd.className=fd.classNames=fd.classes;var Ut={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:jr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ut.variable="(?:[\\w-.]|(?:\\\\"+Ut.metaChar+"))+";Ut.className="(?:[\\w-]|(?:\\\\"+Ut.metaChar+"))+";Ut.value=Ut.string+"|"+Ut.number;Ut.id=Ut.variable;(function(){var r,e,t;for(r=Ut.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Ut.comparatorOp+="|@"+e;for(r=Ut.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Ut.comparatorOp+="|\\!"+e)})();var tr=function(){return{checks:[]}},Ke={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},w0=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return kD(r.selector,e.selector)}),ML=(function(){for(var r={},e,t=0;t<w0.length;t++)e=w0[t],r[e.selector]=e.matches;return r})(),NL=function(e,t){return ML[e](t)},LL="("+w0.map(function(r){return r.selector}).join("|")+")",$s=function(e){return e.replace(new RegExp("\\\\("+Ut.metaChar+")","g"),function(t,n){return n})},qo=function(e,t,n){e[e.length-1]=n},E0=[{name:"group",query:!0,regex:"("+Ut.group+")",populate:function(e,t,n){var i=kr(n,1),o=i[0];t.checks.push({type:Ke.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:LL,populate:function(e,t,n){var i=kr(n,1),o=i[0];t.checks.push({type:Ke.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+Ut.id+")",populate:function(e,t,n){var i=kr(n,1),o=i[0];t.checks.push({type:Ke.ID,value:$s(o)})}},{name:"className",query:!0,regex:"\\.("+Ut.className+")",populate:function(e,t,n){var i=kr(n,1),o=i[0];t.checks.push({type:Ke.CLASS,value:$s(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ut.variable+")\\s*\\]",populate:function(e,t,n){var i=kr(n,1),o=i[0];t.checks.push({type:Ke.DATA_EXIST,field:$s(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ut.variable+")\\s*("+Ut.comparatorOp+")\\s*("+Ut.value+")\\s*\\]",populate:function(e,t,n){var i=kr(n,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+Ut.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Ke.DATA_COMPARE,field:$s(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ut.boolOp+")\\s*("+Ut.variable+")\\s*\\]",populate:function(e,t,n){var i=kr(n,2),o=i[0],a=i[1];t.checks.push({type:Ke.DATA_BOOL,field:$s(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ut.meta+")\\s*("+Ut.comparatorOp+")\\s*("+Ut.number+")\\s*\\]\\]",populate:function(e,t,n){var i=kr(n,3),o=i[0],a=i[1],s=i[2];t.checks.push({type:Ke.META_COMPARE,field:$s(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ut.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];n!=null&&(a.subject=n,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=tr();return s}},{name:"directedEdge",separator:!0,regex:Ut.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=tr(),i=t,o=tr();return n.checks.push({type:Ke.DIRECTED_EDGE,source:i,target:o}),qo(e,t,n),e.edgeCount++,o}else{var a=tr(),s=t,u=tr();return a.checks.push({type:Ke.NODE_SOURCE,source:s,target:u}),qo(e,t,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Ut.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=tr(),i=t,o=tr();return n.checks.push({type:Ke.UNDIRECTED_EDGE,nodes:[i,o]}),qo(e,t,n),e.edgeCount++,o}else{var a=tr(),s=t,u=tr();return a.checks.push({type:Ke.NODE_NEIGHBOR,node:s,neighbor:u}),qo(e,t,a),u}}},{name:"child",separator:!0,regex:Ut.child,populate:function(e,t){if(e.currentSubject==null){var n=tr(),i=tr(),o=e[e.length-1];return n.checks.push({type:Ke.CHILD,parent:o,child:i}),qo(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=tr(),s=e[e.length-1],u=tr(),l=tr(),c=tr(),f=tr();return a.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Ke.TRUE}],f.checks.push({type:Ke.TRUE}),u.checks.push({type:Ke.PARENT,parent:f,child:c}),qo(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=tr(),d=tr(),v=[{type:Ke.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:Ut.descendant,populate:function(e,t){if(e.currentSubject==null){var n=tr(),i=tr(),o=e[e.length-1];return n.checks.push({type:Ke.DESCENDANT,ancestor:o,descendant:i}),qo(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=tr(),s=e[e.length-1],u=tr(),l=tr(),c=tr(),f=tr();return a.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Ke.TRUE}],f.checks.push({type:Ke.TRUE}),u.checks.push({type:Ke.ANCESTOR,ancestor:f,descendant:c}),qo(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=tr(),d=tr(),v=[{type:Ke.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:Ut.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Zt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],o=i==null?null:i.type;o===Ke.DIRECTED_EDGE?i.type=Ke.NODE_TARGET:o===Ke.UNDIRECTED_EDGE&&(i.type=Ke.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];E0.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var jL=function(e){for(var t,n,i,o=0;o<E0.length;o++){var a=E0[o],s=a.name,u=e.match(a.regexObj);if(u!=null){n=u,t=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},FL=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},BL=function(e){var t=this,n=t.inputText=e,i=t[0]=tr();for(t.length=1,n=FL(n);;){var o=jL(n);if(o.expr==null)return Zt("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(t,i,a);if(s===!1)return!1;if(s!=null&&(i=s),n=o.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Zt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Zt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Zt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},UL=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return it(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var h=c.type,d=c.value;switch(h){case Ke.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case Ke.DATA_COMPARE:{var p=c.field,m=c.operator;return"["+p+n(e(m))+t(d)+"]"}case Ke.DATA_BOOL:{var y=c.operator,b=c.field;return"["+e(y)+b+"]"}case Ke.DATA_EXIST:{var g=c.field;return"["+g+"]"}case Ke.META_COMPARE:{var _=c.operator,w=c.field;return"[["+w+n(e(_))+t(d)+"]]"}case Ke.STATE:return d;case Ke.ID:return"#"+d;case Ke.CLASS:return"."+d;case Ke.PARENT:case Ke.CHILD:return o(c.parent,f)+n(">")+o(c.child,f);case Ke.ANCESTOR:case Ke.DESCENDANT:return o(c.ancestor,f)+" "+o(c.descendant,f);case Ke.COMPOUND_SPLIT:{var x=o(c.left,f),E=o(c.subject,f),O=o(c.right,f);return x+(x.length>0?" ":"")+E+O}case Ke.TRUE:return""}},o=function(c,f){return c.checks.reduce(function(h,d,v){return h+(f===c&&v===0?"$":"")+i(d,f)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},zL={parse:BL,toString:UL},yC=function(e,t,n){var i,o=it(e),a=Fe(e),s=it(n),u,l,c=!1,f=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!h)&&(i=!i),i},VL=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},GL=function(e){return e!==void 0},Ub=function(e,t){return e.data(t)},qL=function(e,t){return e[t]()},xr=[],fr=function(e,t){return e.checks.every(function(n){return xr[n.type](n,t)})};xr[Ke.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};xr[Ke.STATE]=function(r,e){var t=r.value;return NL(t,e)};xr[Ke.ID]=function(r,e){var t=r.value;return e.id()===t};xr[Ke.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};xr[Ke.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return yC(qL(e,t),n,i)};xr[Ke.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return yC(Ub(e,t),n,i)};xr[Ke.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return VL(Ub(e,t),n)};xr[Ke.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,GL(Ub(e,t))};xr[Ke.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),o=e.target();return fr(t,i)&&fr(n,o)||fr(n,i)&&fr(t,o)};xr[Ke.NODE_NEIGHBOR]=function(r,e){return fr(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&fr(r.neighbor,t)})};xr[Ke.DIRECTED_EDGE]=function(r,e){return fr(r.source,e.source())&&fr(r.target,e.target())};xr[Ke.NODE_SOURCE]=function(r,e){return fr(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&fr(r.target,t)})};xr[Ke.NODE_TARGET]=function(r,e){return fr(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&fr(r.source,t)})};xr[Ke.CHILD]=function(r,e){return fr(r.child,e)&&fr(r.parent,e.parent())};xr[Ke.PARENT]=function(r,e){return fr(r.parent,e)&&e.children().some(function(t){return fr(r.child,t)})};xr[Ke.DESCENDANT]=function(r,e){return fr(r.descendant,e)&&e.ancestors().some(function(t){return fr(r.ancestor,t)})};xr[Ke.ANCESTOR]=function(r,e){return fr(r.ancestor,e)&&e.descendants().some(function(t){return fr(r.descendant,t)})};xr[Ke.COMPOUND_SPLIT]=function(r,e){return fr(r.subject,e)&&fr(r.left,e)&&fr(r.right,e)};xr[Ke.TRUE]=function(){return!0};xr[Ke.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};xr[Ke.FILTER]=function(r,e){var t=r.value;return t(e)};var WL=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Ke.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(o){for(var a=0;a<t.length;a++){var s=t[a];if(fr(s,o))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},HL=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(fr(i,e))return!0}return!1},YL={matches:HL,filter:WL},ya=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||it(e)&&e.match(/^\s*$/)||(Zn(e)?this.addQuery({checks:[{type:Ke.COLLECTION,value:e.collection()}]}):wr(e)?this.addQuery({checks:[{type:Ke.FILTER,value:e}]}):it(e)?this.parse(e)||(this.invalid=!0):gr("A selector must be created from a string; found "))},ma=ya.prototype;[zL,YL].forEach(function(r){return ct(ma,r)});ma.text=function(){return this.inputText};ma.size=function(){return this.length};ma.eq=function(r){return this[r]};ma.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};ma.addQuery=function(r){this[this.length++]=r};ma.selector=ma.toString;var ua={allAre:function(e){var t=new ya(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new ya(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ua.allAreNeighbours=ua.allAreNeighbors;ua.has=ua.contains;ua.equal=ua.equals=ua.same;var fi=function(e,t){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":Zn(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},d=h[t]=h[t]||[],v=ms(c),p=d[v];return p||(d[v]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},Mu={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&t.push(a)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var o=n[i];t.push(o)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],o=i.parents();t=t||o,t=t.intersect(o)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:fi(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var o=0;o<i.length;o++){var a=i[o];t.push(a),a.children().nonempty()&&n(a.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function zb(r,e,t,n){for(var i=[],o=new zu,a=r.cy(),s=a.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&n(i,o,c)}return r}function mC(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var o=n[i];e.has(o.id())||r.push(o)}}Mu.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return zb(this,r,e,mC)};function bC(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Mu.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return zb(this,r,e,bC)};function XL(r,e,t){bC(r,e,t),mC(r,e,t)}Mu.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return zb(this,r,e,XL)};Mu.ancestors=Mu.parents;var jc,_C;jc=_C={data:Kt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Kt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Kt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Kt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Kt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Kt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};jc.attr=jc.data;jc.removeAttr=jc.removeData;var $L=_C,yv={};function py(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}ct(yv,{degree:py(function(r,e){return e.source().same(e.target())?2:1}),indegree:py(function(r,e){return e.target().same(r)?1:0}),outdegree:py(function(r,e){return e.source().same(r)?1:0})});function Ks(r,e){return function(t){for(var n,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}ct(yv,{minDegree:Ks("degree",function(r,e){return r<e}),maxDegree:Ks("degree",function(r,e){return r>e}),minIndegree:Ks("indegree",function(r,e){return r<e}),maxIndegree:Ks("indegree",function(r,e){return r>e}),minOutdegree:Ks("outdegree",function(r,e){return r<e}),maxOutdegree:Ks("outdegree",function(r,e){return r>e})});ct(yv,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var Ti,wC,EC=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:t.x!=null?t.x-a.x:0,y:t.y!=null?t.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,n),o.dirtyBoundingBoxCache()}}},iO={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){EC(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Ti=wC={position:Kt.data(iO),silentPosition:Kt.data(ct({},iO,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){EC(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Vt(e))t?this.silentPosition(e):this.position(e);else if(wr(e)){var n=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=n(a,o))&&(t?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(Vt(e)?(i={x:Fe(e.x)?e.x:0,y:Fe(e.y)?e.y:0},n=t):it(e)&&Fe(t)&&(i={x:0,y:0},i[e]=t),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,t){return Vt(e)?this.shift(e,!0):it(e)&&Fe(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=Vt(e)?e:void 0,u=s!==void 0||t!==void 0&&it(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-a[e])/o):s!==void 0&&c.position(K2(s,o,a))}else{var f=n.position();return s=fv(f,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),o=Vt(e)?e:void 0,a=o!==void 0||t!==void 0&&it(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var d=h?c.position():{x:0,y:0};t!==void 0?l.position(e,t+d[e]):o!==void 0&&l.position({x:o.x+d.x,y:o.y+d.y})}else{var v=n.position(),p=s?n.parent():null,m=p&&p.length>0,y=m;m&&(p=p[0]);var b=y?p.position():{x:0,y:0};return o={x:v.x-b.x,y:v.y-b.y},e===void 0?o:o[e]}else if(!a)return;return this}};Ti.modelPosition=Ti.point=Ti.position;Ti.modelPositions=Ti.points=Ti.positions;Ti.renderedPoint=Ti.renderedPosition;Ti.relativePoint=Ti.relativePosition;var KL=wC,Su,Ta;Su=Ta={};Ta.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),o=e.x1*n+i.x,a=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};Ta.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Ta.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=s.position;(f.w===0||f.h===0)&&(f={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function d(T,C,P){var R=0,k=0,I=C+P;return T>0&&I>0&&(R=C/I*T,k=P/I*T),{biasDiff:R,biasComplementDiff:k}}function v(T,C,P,R){if(P.units==="%")switch(R){case"width":return T>0?P.pfValue*T:0;case"height":return C>0?P.pfValue*C:0;case"average":return T>0&&C>0?P.pfValue*(T+C)/2:0;case"min":return T>0&&C>0?T>C?P.pfValue*C:P.pfValue*T:0;case"max":return T>0&&C>0?T>C?P.pfValue*T:P.pfValue*C:0;default:return 0}else return P.units==="px"?P.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var m=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var y=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var g=d(c.width.val-f.w,p,m),_=g.biasDiff,w=g.biasComplementDiff,x=d(c.height.val-f.h,y,b),E=x.biasDiff,O=x.biasComplementDiff;s.autoPadding=v(f.w,f.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),h.x=(-_+f.x1+f.x2+w)/2,s.autoHeight=Math.max(f.h,c.height.val),h.y=(-E+f.y1+f.y2+O)/2}for(var n=0;n<this.length;n++){var i=this[n],o=i._private;(!o.compoundBoundsClean||r)&&(t(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var li=function(e){return e===1/0||e===-1/0?0:e},wi=function(e,t,n,i,o){i-t===0||o-n===0||t==null||n==null||i==null||o==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Jo=function(e,t){return t==null?e:wi(e,t.x1,t.y1,t.x2,t.y2)},bl=function(e,t,n){return Bn(e,t,n)},Eh=function(e,t,n){if(!t.cy().headless()){var i=t._private,o=i.rstyle,a=o.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=o.srcX,l=o.srcY):n==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-a,f.y1=l-a,f.x2=u+a,f.y2=l+a,f.w=f.x2-f.x1,f.h=f.y2-f.y1,ld(f,1),wi(e,f.x1,f.y1,f.x2,f.y2)}}},gy=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var o=t._private,a=o.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=bl(a,"labelWidth",n),f=bl(a,"labelHeight",n),h=bl(a,"labelX",n),d=bl(a,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,p=t.pstyle(i+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle(i+"text-rotation"),b=t.pstyle("text-outline-width").pfValue,g=t.pstyle("text-border-width").pfValue,_=g/2,w=t.pstyle("text-background-padding").pfValue,x=2,E=f,O=c,T=O/2,C=E/2,P,R,k,I;if(m)P=h-T,R=h+T,k=d-C,I=d+C;else{switch(u.value){case"left":P=h-O,R=h;break;case"center":P=h-T,R=h+T;break;case"right":P=h,R=h+O;break}switch(l.value){case"top":k=d-E,I=d;break;case"center":k=d-C,I=d+C;break;case"bottom":k=d,I=d+E;break}}var M=v-Math.max(b,_)-w-x,j=v+Math.max(b,_)+w+x,L=p-Math.max(b,_)-w-x,F=p+Math.max(b,_)+w+x;P+=M,R+=j,k+=L,I+=F;var z=n||"main",V=o.labelBounds,G=V[z]=V[z]||{};G.x1=P,G.y1=k,G.x2=R,G.y2=I,G.w=R-P,G.h=I-k,G.leftPad=M,G.rightPad=j,G.topPad=L,G.botPad=F;var Y=m&&y.strValue==="autorotate",ie=y.pfValue!=null&&y.pfValue!==0;if(Y||ie){var W=Y?bl(o.rstyle,"labelAngle",n):y.pfValue,H=Math.cos(W),Q=Math.sin(W),J=(P+R)/2,ne=(k+I)/2;if(!m){switch(u.value){case"left":J=R;break;case"right":J=P;break}switch(l.value){case"top":ne=I;break;case"bottom":ne=k;break}}var K=function(pe,N){return pe=pe-J,N=N-ne,{x:pe*H-N*Q+J,y:pe*Q+N*H+ne}},$=K(P,k),Z=K(P,I),ae=K(R,k),se=K(R,I);P=Math.min($.x,Z.x,ae.x,se.x),R=Math.max($.x,Z.x,ae.x,se.x),k=Math.min($.y,Z.y,ae.y,se.y),I=Math.max($.y,Z.y,ae.y,se.y)}var fe=z+"Rot",ge=V[fe]=V[fe]||{};ge.x1=P,ge.y1=k,ge.x2=R,ge.y2=I,ge.w=R-P,ge.h=I-k,wi(e,P,k,R,I),wi(o.labelBounds.all,P,k,R,I)}return e}},oO=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value,o=t.pstyle("outline-offset").value,a=i+o;OC(e,t,n,a,"outside",a/2)}},OC=function(e,t,n,i,o,a){if(!(n===0||i<=0||o==="inside")){var s=t.cy(),u=t.pstyle("shape").value,l=s.renderer().nodeShapes[u],c=t.position(),f=c.x,h=c.y,d=t.width(),v=t.height();if(l.hasMiterBounds){o==="center"&&(i/=2);var p=l.miterBounds(f,h,d,v,i);Jo(e,p)}else a!=null&&a>0&&cd(e,[a,a,a,a])}},ZL=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,i=t.pstyle("border-width").pfValue,o=t.pstyle("border-position").value;OC(e,t,n,i,o)}},QL=function(e,t){var n=e._private.cy,i=n.styleEnabled(),o=n.headless(),a=Rn(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,d,v,p,m=s.rstyle,y=u&&i?e.pstyle("bounds-expansion").pfValue:[0],b=function(ye){return ye.pstyle("display").value!=="none"},g=!i||b(e)&&(!l||b(e.source())&&b(e.target()));if(g){var _=0,w=0;i&&t.includeOverlays&&(_=e.pstyle("overlay-opacity").value,_!==0&&(w=e.pstyle("overlay-padding").value));var x=0,E=0;i&&t.includeUnderlays&&(x=e.pstyle("underlay-opacity").value,x!==0&&(E=e.pstyle("underlay-padding").value));var O=Math.max(w,E),T=0,C=0;if(i&&(T=e.pstyle("width").pfValue,C=T/2),u&&t.includeNodes){var P=e.position();v=P.x,p=P.y;var R=e.outerWidth(),k=R/2,I=e.outerHeight(),M=I/2;c=v-k,f=v+k,h=p-M,d=p+M,wi(a,c,h,f,d),i&&oO(a,e),i&&t.includeOutlines&&!o&&oO(a,e),i&&ZL(a,e)}else if(l&&t.includeEdges)if(i&&!o){var j=e.pstyle("curve-style").strValue;if(c=Math.min(m.srcX,m.midX,m.tgtX),f=Math.max(m.srcX,m.midX,m.tgtX),h=Math.min(m.srcY,m.midY,m.tgtY),d=Math.max(m.srcY,m.midY,m.tgtY),c-=C,f+=C,h-=C,d+=C,wi(a,c,h,f,d),j==="haystack"){var L=m.haystackPts;if(L&&L.length===2){if(c=L[0].x,h=L[0].y,f=L[1].x,d=L[1].y,c>f){var F=c;c=f,f=F}if(h>d){var z=h;h=d,d=z}wi(a,c-C,h-C,f+C,d+C)}}else if(j==="bezier"||j==="unbundled-bezier"||ea(j,"segments")||ea(j,"taxi")){var V;switch(j){case"bezier":case"unbundled-bezier":V=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":V=m.linePts;break}if(V!=null)for(var G=0;G<V.length;G++){var Y=V[G];c=Y.x-C,f=Y.x+C,h=Y.y-C,d=Y.y+C,wi(a,c,h,f,d)}}}else{var ie=e.source(),W=ie.position(),H=e.target(),Q=H.position();if(c=W.x,f=Q.x,h=W.y,d=Q.y,c>f){var J=c;c=f,f=J}if(h>d){var ne=h;h=d,d=ne}c-=C,f+=C,h-=C,d+=C,wi(a,c,h,f,d)}if(i&&t.includeEdges&&l&&(Eh(a,e,"mid-source"),Eh(a,e,"mid-target"),Eh(a,e,"source"),Eh(a,e,"target")),i){var K=e.pstyle("ghost").value==="yes";if(K){var $=e.pstyle("ghost-offset-x").pfValue,Z=e.pstyle("ghost-offset-y").pfValue;wi(a,a.x1+$,a.y1+Z,a.x2+$,a.y2+Z)}}var ae=s.bodyBounds=s.bodyBounds||{};q1(ae,a),cd(ae,y),ld(ae,1),i&&(c=a.x1,f=a.x2,h=a.y1,d=a.y2,wi(a,c-O,h-O,f+O,d+O));var se=s.overlayBounds=s.overlayBounds||{};q1(se,a),cd(se,y),ld(se,1);var fe=s.labelBounds=s.labelBounds||{};fe.all!=null?DM(fe.all):fe.all=Rn(),i&&t.includeLabels&&(t.includeMainLabels&&gy(a,e,null),l&&(t.includeSourceLabels&&gy(a,e,"source"),t.includeTargetLabels&&gy(a,e,"target")))}return a.x1=li(a.x1),a.y1=li(a.y1),a.x2=li(a.x2),a.y2=li(a.y2),a.w=li(a.x2-a.x1),a.h=li(a.y2-a.y1),a.w>0&&a.h>0&&g&&(cd(a,y),ld(a,1)),a},xC=function(e){var t=0,n=function(a){return(a?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},SC=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return F1([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var o=e.position();return F1([t(o.x),t(o.y)])}},aO=function(e,t){var n=e._private,i,o=e.isEdge(),a=t==null?sO:xC(t),s=a===sO;if(n.bbCache==null?(i=QL(e,Fc),n.bbCache=i,n.bbCachePosKey=SC(e)):i=n.bbCache,!s){var u=e.isNode();i=Rn(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Jo(i,n.overlayBounds):Jo(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!o||t.includeSourceLabels&&t.includeTargetLabels)?Jo(i,n.labelBounds.all):(t.includeMainLabels&&Jo(i,n.labelBounds.mainRot),t.includeSourceLabels&&Jo(i,n.labelBounds.sourceRot),t.includeTargetLabels&&Jo(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Fc={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},sO=xC(Fc),uO=rn(Fc);Ta.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Iu(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==SC(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=Fc:r=uO(r),e=aO(this[0],r);else{e=Rn(),r=r||Fc;var i=uO(r),o=this,a=o.cy(),s=a.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<o.length;u++){var l=o[u];n(l)&&l.dirtyBoundingBoxCache(),Jo(e,aO(l,i))}}return e.x1=li(e.x1),e.y1=li(e.y1),e.x2=li(e.x2),e.y2=li(e.y2),e.w=li(e.x2-e.x1),e.h=li(e.y2-e.y1),e};Ta.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ta.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),Vt(r)){var o=r;r=function(){return o}}var a=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(a).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=IM(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};Su.boundingbox=Su.bb=Su.boundingBox;Su.renderedBoundingbox=Su.renderedBoundingBox;var JL=Ta,Fl,sf;Fl=sf={};var TC=function(e){e.uppercaseName=O1(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=O1(e.outerName),Fl[e.name]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Fl["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},Fl["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},Fl["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};TC({name:"width"});TC({name:"height"});sf.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};sf.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};sf.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var ej=sf,tj=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},rj=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return fv(t(e),n.zoom(),n.pan())}},nj=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),o=n.zoom();return t(e).map(function(a){return fv(a,o,i)})}},ij=function(e){return e.renderer().getControlPoints(e)},oj=function(e){return e.renderer().getSegmentPoints(e)},aj=function(e){return e.renderer().getSourceEndpoint(e)},sj=function(e){return e.renderer().getTargetEndpoint(e)},uj=function(e){return e.renderer().getEdgeMidpoint(e)},lO={controlPoints:{get:ij,mult:!0},segmentPoints:{get:oj,mult:!0},sourceEndpoint:{get:aj},targetEndpoint:{get:sj},midpoint:{get:uj}},lj=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},cj=Object.keys(lO).reduce(function(r,e){var t=lO[e],n=lj(e);return r[e]=function(){return tj(this,t.get)},t.mult?r[n]=function(){return nj(this,t.get)}:r[n]=function(){return rj(this,t.get)},r},{}),fj=ct({},KL,JL,ej,cj);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var CC=function(e,t){this.recycle(e,t)};function _l(){return!1}function Oh(){return!0}CC.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=_l,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Oh:_l):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*i+o.x,y:n.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Oh;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Oh;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Oh,this.stopPropagation()},isDefaultPrevented:_l,isPropagationStopped:_l,isImmediatePropagationStopped:_l};var PC=/^([^.]+)(\.(?:[^.]+))?$/,hj=".*",AC={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},cO=Object.keys(AC),dj={};function mv(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dj,e=arguments.length>1?arguments[1]:void 0,t=0;t<cO.length;t++){var n=cO[t];this[n]=r[n]||AC[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ba=mv.prototype,RC=function(e,t,n,i,o,a,s){wr(i)&&(o=i,i=null),s&&(a==null?a=s:a=ct({},a,s));for(var u=nr(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!va(c)){var f=c.match(PC);if(f){var h=f[1],d=f[2]?f[2]:null,v=t(e,c,h,d,i,o,a);if(v===!1)break}}}},fO=function(e,t){return e.addEventFields(e.context,t),new CC(t.type,t)},vj=function(e,t,n){if(_D(n)){t(e,n);return}else if(Vt(n)){t(e,fO(e,n));return}for(var i=nr(n)?n:n.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!va(a)){var s=a.match(PC);if(s){var u=s[1],l=s[2]?s[2]:null,c=fO(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};ba.on=ba.addListener=function(r,e,t,n,i){return RC(this,function(o,a,s,u,l,c,f){wr(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,i),this};ba.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};ba.removeListener=ba.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=rM(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];RC(i,function(f,h,d,v,p,m){if((c.type===d||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!m||c.callback===m))return o.splice(l,1),!1},r,e,t,n)},s=o.length-1;s>=0;s--)a(s);return this};ba.removeAllListeners=function(){return this.removeListener("*")};ba.emit=ba.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,nr(e)||(e=[e]),vj(this,function(o,a){t!=null&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===hj)&&o.eventMatches(o.context,c,a)){var f=[a];e!=null&&iM(f,e),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(v){return v!==c}));var h=o.callbackContext(o.context,c,a),d=c.callback.apply(h,f);o.afterEmit(o.context,c,a),d===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s();o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},r),this.emitting--,this};var pj={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&ef(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},xh=function(e){return it(e)?new ya(e):e},kC={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new mv(pj,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=xh(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=xh(t),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=xh(t),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=xh(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Kt.eventAliasesOn(kC);var IC={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(it(e)||Zn(e))return new ya(e).filter(this);if(wr(e)){for(var n=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s&&n.push(a)}return n}return this.spawn()},not:function(e){if(e){it(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],o=e.has(i);o||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(it(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;it(e)&&(e=t.$(e));var n=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,d=l.hasElementWithId(h);d||n.push(f)}};return a(i,o),a(o,i),n},diff:function(e){var t=this._private.cy;it(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,f,h){for(var d=0;d<c.length;d++){var v=c[d],p=v._private.data.id,m=f.hasElementWithId(p);m?o.merge(v):h.push(v)}};return u(a,s,n),u(s,a,i),{left:n,right:i,both:o}},add:function(e){var t=this._private.cy;if(!e)return this;if(it(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&it(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(n);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,o=i.get(n);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&it(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,o=0;o<i.length;o++)n=e(n,i[o],o,i);return n},max:function(e,t){for(var n=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Ht=IC;Ht.u=Ht["|"]=Ht["+"]=Ht.union=Ht.or=Ht.add;Ht["\\"]=Ht["!"]=Ht["-"]=Ht.difference=Ht.relativeComplement=Ht.subtract=Ht.not;Ht.n=Ht["&"]=Ht["."]=Ht.and=Ht.intersection=Ht.intersect;Ht["^"]=Ht["(+)"]=Ht["(-)"]=Ht.symmetricDifference=Ht.symdiff=Ht.xor;Ht.fnFilter=Ht.filterFn=Ht.stdFilter=Ht.filter;Ht.complement=Ht.abscomp=Ht.absoluteComplement;var gj={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},DC=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function o(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Rb:0}var a=o(e)-o(t);if(a!==0)return a;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},Bd={forEach:function(e,t){if(wr(e))for(var n=this.length,i=0;i<n;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var o=e;o>=0&&o<t&&o<i;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!wr(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(DC)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:Rb-1}else{var o=t.source,a=t.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};Bd.each=Bd.forEach;var yj=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Br(Symbol))!=e&&Br(Symbol.iterator)!=e;t&&(Bd[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},o=0,a=this.length;return k2({next:function(){return o<a?i.value=n[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};yj();var mj=rn({nodeDimensionsIncludeLabels:!1}),hd={layoutDimensions:function(e){e=mj(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(w){return!w.isParent()}),o=this.cy(),a=t.eles,s=function(x){return x.id()},u=Iu(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(x,E,O){var T={x:E.x1+E.w/2,y:E.y1+E.h/2},C={x:(O.x-T.x)*x,y:(O.y-T.y)*x};return{x:T.x+C.x,y:T.y+C.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var x=Rn(),E=0;E<i.length;E++){var O=i[E],T=u(O,E);Z2(x,T.x,T.y)}return x},h=f(),d=Iu(function(w,x){var E=u(w,x);if(c){var O=Math.abs(t.spacingFactor);E=l(O,h,E)}return t.transform!=null&&(E=t.transform(w,E)),E},s);if(t.animate){for(var v=0;v<i.length;v++){var p=i[v],m=d(p,v),y=t.animateFilter==null||t.animateFilter(p,v);if(y){var b=p.animation({position:m,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}else p.position(m)}if(t.fit){var g=o.animation({fit:{boundingBox:a.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(t.zoom!==void 0&&t.pan!==void 0){var _=o.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}e.animations.forEach(function(w){return w.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Vu.all(e.animations.map(function(w){return w.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),t.fit&&o.fit(t.eles,t.padding),t.zoom!=null&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(ct({},e,{eles:this}))}};hd.createLayout=hd.makeLayout=hd.layout;function MC(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],o;return(o=i[r])!=null||(o=i[r]=e(t)),o}function bv(r,e){return r=ms(r),function(n){return MC(r,e,n)}}function _v(r,e){r=ms(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return MC(r,t,i)}}var Qr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var o=n._private.style[e];return o??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style();if(Vt(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(it(e))if(t===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,o=n.pstyle("opacity").value;if(!t)return o;var a=i.data.parent?n.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function yy(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(!e(o))return!1}return!0}function Vb(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||yy(o,n);var u=s.source,l=s.target;return t(u)&&(!a||yy(u,t))&&(u===l||t(l)&&(!a||yy(l,t)))}}}var Gu=bv("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Qr.takesUpSpace=_v("takesUpSpace",Vb({ok:Gu}));var bj=bv("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Gu(r)}),_j=bv("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Gu(r)});Qr.interactive=_v("interactive",Vb({ok:bj,parentOk:_j,edgeOkViaNode:Gu}));Qr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var wj=bv("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Gu(r)}),Ej=Gu;Qr.visible=_v("visible",Vb({ok:wj,edgeOkViaNode:Ej}));Qr.hidden=function(){var r=this[0];if(r)return!r.visible()};Qr.isBundledBezier=_v("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Qr.bypass=Qr.css=Qr.style;Qr.renderedCss=Qr.renderedStyle;Qr.removeBypass=Qr.removeCss=Qr.removeStyle;Qr.pstyle=Qr.parsedStyle;var la={};function hO(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&wr(e[0])){var o=e[0];this.on(r.event,o)}else if(e.length===0||e.length===1&&nr(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),a&&h.emit(a)}return this}}function qu(r){la[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},la[r.on]=hO({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),la[r.off]=hO({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}qu({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});qu({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});qu({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});qu({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});la.deselect=la.unselect;la.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};qu({field:"active",on:"activate",off:"unactivate"});qu({field:"pannable",on:"panify",off:"unpanify"});la.inactive=function(){var r=this[0];if(r)return!r._private.active};var hn={},dO=function(e){return function(n){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),d=f.target();if(e.noIncomingEdges&&d===s&&h!==s||e.noOutgoingEdges&&h===s&&d!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(n)}},vO=function(e){return function(t){for(var n=this,i=[],o=0;o<n.length;o++){var a=n[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===a?(i.push(l),i.push(f)):e.incoming&&f===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},pO=function(e){return function(t){for(var n=this,i=[],o={};;){var a=e.outgoing?n.outgoers():n.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;n=a}return this.spawn(i,!0).filter(t)}};hn.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};ct(hn,{roots:dO({noIncomingEdges:!0}),leaves:dO({noOutgoingEdges:!0}),outgoers:fi(vO({outgoing:!0}),"outgoers"),successors:pO({outgoing:!0}),incomers:fi(vO({incoming:!0}),"incomers"),predecessors:pO({})});ct(hn,{neighborhood:fi(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});hn.neighbourhood=hn.neighborhood;hn.closedNeighbourhood=hn.closedNeighborhood;hn.openNeighbourhood=hn.openNeighborhood;ct(hn,{source:fi(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:fi(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:gO({attr:"source"}),targets:gO({attr:"target"})});function gO(r){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i],a=o._private[r.attr];a&&n.push(a)}return this.spawn(n,!0).filter(t)}}ct(hn,{edgesWith:fi(yO(),"edgesWith"),edgesTo:fi(yO({thisIsSrc:!0}),"edgesTo")});function yO(r){return function(t){var n=[],i=this._private.cy,o=r||{};it(t)&&(t=i.$(t));for(var a=0;a<t.length;a++)for(var s=t[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=f||h;d&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!f||o.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}ct(hn,{connectedEdges:fi(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:fi(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:fi(mO(),"parallelEdges"),codirectedEdges:fi(mO({codirected:!0}),"codirectedEdges")});function mO(r){var e={codirected:!1};return r=ct({},e,r),function(n){for(var i=[],o=this.edges(),a=r,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,d=c._private.edges,v=0;v<d.length;v++){var p=d[v],m=p._private.data,y=m.target,b=m.source,g=y===h&&b===f,_=f===y&&h===b;(a.codirected&&g||!a.codirected&&(g||_))&&i.push(p)}return this.spawn(i,!0).filter(n)}}ct(hn,{components:function(e){var t=this,n=t.cy(),i=n.collection(),o=e==null?t.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,f){i.merge(c),o.unmerge(c),f.merge(c)};if(o.empty())return t.spawn();var u=function(){var c=n.collection();a.push(c);var f=o[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(d){return s(d,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(d){t.has(d)&&c.has(d.source())&&c.has(d.target())&&c.merge(d)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});hn.componentsOf=hn.components;var Jr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){gr("A collection must have a reference to the core");return}var o=new mo,a=!1;if(!t)t=[];else if(t.length>0&&Vt(t[0])&&!ef(t[0])){a=!0;for(var s=[],u=new zu,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=X2();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new cv(e,f,!1);s.push(d),u.add(h.id)}t=s}this.length=0;for(var v=0,p=t.length;v<p;v++){var m=t[v][0];if(m!=null){var y=m._private.data.id;(!n||!o.has(y))&&(n&&o.set(y,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(b){this.lazyMap=b},rebuildMap:function(){for(var g=this.lazyMap=new mo,_=this.eles,w=0;w<_.length;w++){var x=_[w];g.set(x.id(),{index:w,ele:x})}}},n&&(this._private.map=o),a&&!i&&this.restore()},ur=cv.prototype=Jr.prototype=Object.create(Array.prototype);ur.instanceString=function(){return"collection"};ur.spawn=function(r,e){return new Jr(this.cy(),r,e)};ur.spawnSelf=function(){return this.spawn(this)};ur.cy=function(){return this._private.cy};ur.renderer=function(){return this._private.cy.renderer()};ur.element=function(){return this[0]};ur.collection=function(){return M2(this)?this:new Jr(this._private.cy,[this])};ur.unique=function(){return new Jr(this._private.cy,this,!0)};ur.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};ur.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Jr(e)};ur.$id=ur.getElementById;ur.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};ur.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};ur.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};ur.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Vt(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var o=!1,a={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(p,m,y){var b=r[p];b!=null&&b!==n[p]&&(b?e[m]():e[y]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:Xi(n.data),position:Xi(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};ur.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};ur.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),o=new cv(r,i,!1);e.push(o)}return new Jr(r,e)};ur.copy=ur.clone;ur.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,o=[],a=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var f,h=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var d=s[f],v=d._private,p=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=X2();else if(Fe(p.id))p.id=""+p.id;else if(va(p.id)||!it(p.id)){gr("Can not create element with invalid string ID `"+p.id+"`"),h();continue}else if(n.hasElementWithId(p.id)){gr("Can not create second element with ID `"+p.id+"`"),h();continue}}var m=p.id;if(d.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(d.isEdge()){for(var b=d,g=["source","target"],_=g.length,w=!1,x=0;x<_;x++){var E=g[x],O=p[E];Fe(O)&&(O=p[E]=""+p[E]),O==null||O===""?(gr("Can not create edge `"+m+"` with unspecified "+E),w=!0):n.hasElementWithId(O)||(gr("Can not create edge `"+m+"` with nonexistant "+E+" `"+O+"`"),w=!0)}if(w){h();continue}var T=n.getElementById(p.source),C=n.getElementById(p.target);T.same(C)?T._private.edges.push(b):(T._private.edges.push(b),C._private.edges.push(b)),b._private.source=T,b._private.target=C}v.map=new mo,v.map.set(m,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var P=0;P<o.length;P++){var R=o[P],k=R._private.data;Fe(k.parent)&&(k.parent=""+k.parent);var I=k.parent,M=I!=null;if(M||R._private.parent){var j=R._private.parent?n.collection().merge(R._private.parent):n.getElementById(I);if(j.empty())k.parent=void 0;else if(j[0].removed())Zt("Node added with missing parent, reference to parent removed"),k.parent=void 0,R._private.parent=null;else{for(var L=!1,F=j;!F.empty();){if(R.same(F)){L=!0,k.parent=void 0;break}F=F.parent()}L||(j[0]._private.children.push(R),R._private.parent=j[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var z=s.length===t.length?t:new Jr(n,s),V=0;V<z.length;V++){var G=z[V];G.isNode()||(G.parallelEdges().clearTraversalCache(),G.source().clearTraversalCache(),G.target().clearTraversalCache())}var Y;i.hasCompoundNodes?Y=n.collection().merge(z).merge(z.connectedNodes()).merge(z.parent()):Y=z,Y.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?z.emitAndNotify("add"):e&&z.emit("add")}return t};ur.removed=function(){var r=this[0];return r&&r._private.removed};ur.inside=function(){var r=this[0];return r&&!r._private.removed};ur.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},o=t._private.cy;function a(I){for(var M=I._private.edges,j=0;j<M.length;j++)u(M[j])}function s(I){for(var M=I._private.children,j=0;j<M.length;j++)u(M[j])}function u(I){var M=i[I.id()];e&&I.removed()||M||(i[I.id()]=!0,I.isNode()?(n.push(I),a(I),s(I)):n.unshift(I))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function h(I,M){var j=I._private.edges;pa(j,M),I.clearTraversalCache()}function d(I){I.clearTraversalCache()}var v=[];v.ids={};function p(I,M){M=M[0],I=I[0];var j=I._private.children,L=I.id();pa(j,M),M._private.parent=null,v.ids[L]||(v.ids[L]=!0,v.push(I))}t.dirtyCompoundBoundsCache(),e&&o.removeFromPool(n);for(var m=0;m<n.length;m++){var y=n[m];if(y.isEdge()){var b=y.source()[0],g=y.target()[0];h(b,y),h(g,y);for(var _=y.parallelEdges(),w=0;w<_.length;w++){var x=_[w];d(x),x.isBundledBezier()&&x.dirtyBoundingBoxCache()}}else{var E=y.parent();E.length!==0&&p(E,y)}e&&(y._private.removed=!0)}var O=o._private.elements;o._private.hasCompoundNodes=!1;for(var T=0;T<O.length;T++){var C=O[T];if(C.isParent()){o._private.hasCompoundNodes=!0;break}}var P=new Jr(this.cy(),n);P.size()>0&&(r?P.emitAndNotify("remove"):e&&P.emit("remove"));for(var R=0;R<v.length;R++){var k=v[R];(!e||!k.removed())&&k.updateStyle()}return P};ur.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,o=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var a=o(r.source),s=o(r.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var d=0;d<t.length;d++){var v=t[d],p=v._private.data;v.isEdge()&&(u&&(p.source=a),l&&(p.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=o(r.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var d=t.remove(n,i);d.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var p=t[v],m=p._private.data;p.isNode()&&(m.parent=h)}d.restore(n,i)}),t.emitAndNotify("move")}}return this};[aC,DL,fd,ua,Mu,$L,yv,fj,kC,IC,gj,Bd,hd,Qr,la,hn].forEach(function(r){ct(ur,r)});var Oj={add:function(e){var t,n=this;if(Zn(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}t=new Jr(n,o)}}else if(nr(e)){var u=e;t=new Jr(n,u)}else if(Vt(e)&&(nr(e.nodes)||nr(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,d=f.length;h<d;h++){var v=f[h],p=l[v];if(nr(p))for(var m=0,y=p.length;m<y;m++){var b=ct({group:v},p[m]);c.push(b)}}t=new Jr(n,c)}else{var g=e;t=new cv(n,g).collection()}return t},remove:function(e){if(!Zn(e)){if(it(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function xj(r,e,t,n){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(u):new Array(u);function d(C,P){return 1-3*P+3*C}function v(C,P){return 3*P-6*C}function p(C){return 3*C}function m(C,P,R){return((d(P,R)*C+v(P,R))*C+p(P))*C}function y(C,P,R){return 3*d(P,R)*C*C+2*v(P,R)*C+p(P)}function b(C,P){for(var R=0;R<i;++R){var k=y(P,r,t);if(k===0)return P;var I=m(P,r,t)-C;P-=I/k}return P}function g(){for(var C=0;C<u;++C)h[C]=m(C*l,r,t)}function _(C,P,R){var k,I,M=0;do I=P+(R-P)/2,k=m(I,r,t)-C,k>0?R=I:P=I;while(Math.abs(k)>a&&++M<s);return I}function w(C){for(var P=0,R=1,k=u-1;R!==k&&h[R]<=C;++R)P+=l;--R;var I=(C-h[R])/(h[R+1]-h[R]),M=P+I*l,j=y(M,r,t);return j>=o?b(C,M):j===0?M:_(C,P,P+l)}var x=!1;function E(){x=!0,(r!==e||t!==n)&&g()}var O=function(P){return x||E(),r===e&&t===n?P:P===0?0:P===1?1:m(w(P),e,n)};O.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var T="generateBezier("+[r,e,t,n]+")";return O.toString=function(){return T},O}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Sj=(function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,o){var a={x:n.x+o.dx*i,v:n.v+o.dv*i,tension:n.tension,friction:n.friction};return{dx:a.v,dv:r(a)}}function t(n,i){var o={dx:n.v,dv:r(n)},a=e(n,i*.5,o),s=e(n,i*.5,a),u=e(n,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,d,v;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,h=a!==null,h?(l=n(i,o),d=l/a*f):d=f;v=t(v||s,d),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(p){return u[p*(u.length-1)|0]}:l}})(),sr=function(e,t,n,i){var o=xj(e,t,n,i);return function(a,s,u){return a+(s-a)*o(u)}},dd={linear:function(e,t,n){return e+(t-e)*n},ease:sr(.25,.1,.25,1),"ease-in":sr(.42,0,1,1),"ease-out":sr(0,0,.58,1),"ease-in-out":sr(.42,0,.58,1),"ease-in-sine":sr(.47,0,.745,.715),"ease-out-sine":sr(.39,.575,.565,1),"ease-in-out-sine":sr(.445,.05,.55,.95),"ease-in-quad":sr(.55,.085,.68,.53),"ease-out-quad":sr(.25,.46,.45,.94),"ease-in-out-quad":sr(.455,.03,.515,.955),"ease-in-cubic":sr(.55,.055,.675,.19),"ease-out-cubic":sr(.215,.61,.355,1),"ease-in-out-cubic":sr(.645,.045,.355,1),"ease-in-quart":sr(.895,.03,.685,.22),"ease-out-quart":sr(.165,.84,.44,1),"ease-in-out-quart":sr(.77,0,.175,1),"ease-in-quint":sr(.755,.05,.855,.06),"ease-out-quint":sr(.23,1,.32,1),"ease-in-out-quint":sr(.86,0,.07,1),"ease-in-expo":sr(.95,.05,.795,.035),"ease-out-expo":sr(.19,1,.22,1),"ease-in-out-expo":sr(1,0,0,1),"ease-in-circ":sr(.6,.04,.98,.335),"ease-out-circ":sr(.075,.82,.165,1),"ease-in-out-circ":sr(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return dd.linear;var i=Sj(e,t,n);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":sr};function bO(r,e,t,n,i){if(n===1||e===t)return t;var o=i(e,t,n);return r==null||((r.roundValue||r.color)&&(o=Math.round(o)),r.min!==void 0&&(o=Math.max(o,r.min)),r.max!==void 0&&(o=Math.min(o,r.max))),o}function _O(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Zs(r,e,t,n,i){var o=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var a=_O(r,i),s=_O(e,i);if(Fe(a)&&Fe(s))return bO(o,a,s,t,n);if(nr(a)&&nr(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],f=s[l];if(c!=null&&f!=null){var h=bO(o,c,f,t,n);u.push(h)}else u.push(f)}return u}}function Tj(r,e,t,n){var i=!n,o=r._private,a=e._private,s=a.easing,u=a.startTime,l=n?r:r.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=dd.linear;else{var f;if(it(s)){var h=c.parse("transition-timing-function",s);f=h.value}else f=s;var d,v;it(f)?(d=f,v=[]):(d=f[1],v=f.slice(2).map(function(z){return+z})),v.length>0?(d==="spring"&&v.push(a.duration),a.easingImpl=dd[d].apply(null,v)):a.easingImpl=dd[d]}var p=a.easingImpl,m;if(a.duration===0?m=1:m=(t-u)/a.duration,a.applying&&(m=a.progress),m<0?m=0:m>1&&(m=1),a.delay==null){var y=a.startPosition,b=a.position;if(b&&i&&!r.locked()){var g={};wl(y.x,b.x)&&(g.x=Zs(y.x,b.x,m,p)),wl(y.y,b.y)&&(g.y=Zs(y.y,b.y,m,p)),r.position(g)}var _=a.startPan,w=a.pan,x=o.pan,E=w!=null&&n;E&&(wl(_.x,w.x)&&(x.x=Zs(_.x,w.x,m,p)),wl(_.y,w.y)&&(x.y=Zs(_.y,w.y,m,p)),r.emit("pan"));var O=a.startZoom,T=a.zoom,C=T!=null&&n;C&&(wl(O,T)&&(o.zoom=Nc(o.minZoom,Zs(O,T,m,p),o.maxZoom)),r.emit("zoom")),(E||C)&&r.emit("viewport");var P=a.style;if(P&&P.length>0&&i){for(var R=0;R<P.length;R++){var k=P[R],I=k.name,M=k,j=a.startStyle[I],L=c.properties[j.name],F=Zs(j,M,m,p,L);c.overrideBypass(r,I,F)}r.emit("style")}}return a.progress=m,m}function wl(r,e){return r==null||e==null?!1:Fe(r)&&Fe(e)?!0:!!(r&&e)}function Cj(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function wO(r,e){var t=e._private.aniEles,n=[];function i(c,f){var h=c._private,d=h.animation.current,v=h.animation.queue,p=!1;if(d.length===0){var m=v.shift();m&&d.push(m)}for(var y=function(x){for(var E=x.length-1;E>=0;E--){var O=x[E];O()}x.splice(0,x.length)},b=d.length-1;b>=0;b--){var g=d[b],_=g._private;if(_.stopped){d.splice(b,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.frames);continue}!_.playing&&!_.applying||(_.playing&&_.applying&&(_.applying=!1),_.started||Cj(c,g,r),Tj(c,g,r,f),_.applying&&(_.applying=!1),y(_.frames),_.step!=null&&_.step(r),g.completed()&&(d.splice(b,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.completes)),p=!0)}return!f&&d.length===0&&v.length===0&&n.push(c),p}for(var o=!1,a=0;a<t.length;a++){var s=t[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var Pj={animate:Kt.animate(),animation:Kt.animation(),animated:Kt.animated(),clearQueue:Kt.clearQueue(),delay:Kt.delay(),delayAnimation:Kt.delayAnimation(),stop:Kt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Md(function(o){wO(o,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(o,a){wO(a,e)},n.beforeRenderPriorities.animations):t()}},Aj={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&ef(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Sh=function(e){return it(e)?new ya(e):e},NC={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new mv(Aj,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Sh(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Sh(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Sh(t),n),this},once:function(e,t,n){return this.emitter().one(e,Sh(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Kt.eventAliasesOn(NC);var O0={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};O0.jpeg=O0.jpg;var vd={layout:function(e){var t=this;if(e==null){gr("Layout options must be specified to make a layout");return}if(e.name==null){gr("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){gr("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;it(e.eles)?o=t.$(e.eles):o=e.eles!=null?e.eles:t.$();var a=new i(ct({},e,{cy:t,eles:o}));return a}};vd.createLayout=vd.makeLayout=vd.layout;var Rj={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],a=e[o],s=t.getElementById(o);s.data(a)}})}},kj=rn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),x0={renderTo:function(e,t,n,i){var o=this._private.renderer;return o.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){gr("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Zt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=kj(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};x0.invalidateDimensions=x0.resize;var pd={collection:function(e,t){return it(e)?this.$(e):Zn(e)?e.collection():nr(e)?(t||(t={}),new Jr(this,e,t.unique,t.removed)):new Jr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};pd.elements=pd.filter=pd.$;var Yr={},$l="t",Ij="f";Yr.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),o=0;o<r.length;o++){var a=r[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};Yr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,o=n[i];if(o)return o;for(var a=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===$l,f=e[u]===$l,h=c!==f,d=l.mappedProperties.length>0;if(h||f&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var p=0;p<v.length;p++){for(var m=v[p],y=m.name,b=!1,g=u+1;g<t.length;g++){var _=t[g],w=e[g]===$l;if(w&&(b=_.properties[m.name]!=null,b))break}!s[y]&&!b&&(s[y]=!0,a.push(y))}}}return n[i]=a,a};Yr.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(r);s?t+=$l:t+=Ij}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};Yr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},o=0;o<t.length;o++){var a=t[o],s=e[o]===$l;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return n[e]=i,i};Yr.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,o={},a=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(t);if(h===f.prevFnValue)continue}var d=o[u]={prev:c};n.applyParsedProperty(t,l),d.next=t.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:o}};Yr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,o=function(ae,se,fe){return t.getPropertiesHash(ae,se,fe)},a=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[fs,vu]}for(var f=function(ae,se){return e.styleKeys[se][0]=Ic(ae,e.styleKeys[se][0])},h=function(ae,se){return e.styleKeys[se][1]=Dc(ae,e.styleKeys[se][1])},d=function(ae,se){f(ae,se),h(ae,se)},v=function(ae,se){for(var fe=0;fe<ae.length;fe++){var ge=ae.charCodeAt(fe);f(ge,se),h(ge,se)}},p=2e9,m=function(ae){return-128<ae&&ae<128&&Math.floor(ae)!==ae?p-(ae*1024|0):ae},y=0;y<n.length;y++){var b=n[y],g=u[b];if(g!=null){var _=this.properties[b],w=_.type,x=_.groupKey,E=void 0;_.hashOverride!=null?E=_.hashOverride(r,g):g.pfValue!=null&&(E=g.pfValue);var O=_.enums==null?g.value:null,T=E!=null,C=O!=null,P=T||C,R=g.units;if(w.number&&P&&!w.multiple){var k=T?E:O;d(m(k),x),!T&&R!=null&&v(R,x)}else v(g.strValue,x)}}for(var I=[fs,vu],M=0;M<i.length;M++){var j=i[M],L=e.styleKeys[j];I[0]=Ic(L[0],I[0]),I[1]=Dc(L[1],I[1])}e.styleKey=XD(I[0],I[1]);var F=e.styleKeys;e.labelDimsKey=Go(F.labelDimensions);var z=o(r,["label"],F.labelDimensions);if(e.labelKey=Go(z),e.labelStyleKey=Go(yh(F.commonLabel,z)),!s){var V=o(r,["source-label"],F.labelDimensions);e.sourceLabelKey=Go(V),e.sourceLabelStyleKey=Go(yh(F.commonLabel,V));var G=o(r,["target-label"],F.labelDimensions);e.targetLabelKey=Go(G),e.targetLabelStyleKey=Go(yh(F.commonLabel,G))}if(s){var Y=e.styleKeys,ie=Y.nodeBody,W=Y.nodeBorder,H=Y.nodeOutline,Q=Y.backgroundImage,J=Y.compound,ne=Y.pie,K=Y.stripe,$=[ie,W,H,Q,J,ne,K].filter(function(Z){return Z!=null}).reduce(yh,[fs,vu]);e.nodeKey=Go($),e.hasPie=ne!=null&&ne[0]!==fs&&ne[1]!==vu,e.hasStripe=K!=null&&K[0]!==fs&&K[1]!==vu}return a!==e.styleKey};Yr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};Yr.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,o,a=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=r._private,h="mapping",d=function(ie){return ie==null?null:ie.pfValue!=null?ie.pfValue:ie.value},v=function(){var ie=d(l),W=d(n);t.checkTriggers(r,n.name,ie,W)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var p=function(){Zt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case a.mapData:{for(var m=n.field.split("."),y=f.data,b=0;b<m.length&&y;b++){var g=m[b];y=y[g]}if(y==null)return p(),!1;var _;if(Fe(y)){var w=n.fieldMax-n.fieldMin;w===0?_=0:_=(y-n.fieldMin)/w}else return Zt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+r.id()+"` is non-numeric)"),!1;if(_<0?_=0:_>1&&(_=1),s.color){var x=n.valueMin[0],E=n.valueMax[0],O=n.valueMin[1],T=n.valueMax[1],C=n.valueMin[2],P=n.valueMax[2],R=n.valueMin[3]==null?1:n.valueMin[3],k=n.valueMax[3]==null?1:n.valueMax[3],I=[Math.round(x+(E-x)*_),Math.round(O+(T-O)*_),Math.round(C+(P-C)*_),Math.round(R+(k-R)*_)];o={bypass:n.bypass,name:n.name,value:I,strValue:"rgb("+I[0]+", "+I[1]+", "+I[2]+")"}}else if(s.number){var M=n.valueMin+(n.valueMax-n.valueMin)*_;o=this.parse(n.name,M,n.bypass,h)}else return!1;if(!o)return p(),!1;o.mapping=n,n=o;break}case a.data:{for(var j=n.field.split("."),L=f.data,F=0;F<j.length&&L;F++){var z=j[F];L=L[z]}if(L!=null&&(o=this.parse(n.name,L,n.bypass,h)),!o)return p(),!1;o.mapping=n,n=o;break}case a.fn:{var V=n.value,G=n.fnValue!=null?n.fnValue:V(r);if(n.prevFnValue=G,G==null)return Zt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(o=this.parse(n.name,G,n.bypass,h),!o)return Zt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;o.mapping=Xi(n),n=o;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};Yr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};Yr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};Yr.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,o=r.pstyle("transition-duration").pfValue,a=r.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=r.pstyle(c),h=e[c];if(h){var d=h.prev,v=d,p=h.next!=null?h.next:f,m=!1,y=void 0,b=1e-6;v&&(Fe(v.pfValue)&&Fe(p.pfValue)?(m=p.pfValue-v.pfValue,y=v.pfValue+b*m):Fe(v.value)&&Fe(p.value)?(m=p.value-v.value,y=v.value+b*m):nr(v.value)&&nr(p.value)&&(m=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],y=v.strValue),m&&(s[c]=p.strValue,this.applyBypass(r,c,y),u=!0))}}if(!u)return;n.transitioning=!0,new Vu(function(g){a>0?r.delayAnimation(a).play().promise().then(g):g()}).then(function(){return r.animation({style:s,duration:o,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};Yr.checkTrigger=function(r,e,t,n,i,o){var a=this.properties[e],s=i(a);r.removed()||s!=null&&s(t,n,r)&&o(a)};Yr.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};Yr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};Yr.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};Yr.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};Yr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var uf={};uf.applyBypass=function(r,e,t,n){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&o.push(c)}}else if(it(e)){var f=this.parse(e,t,!0);f&&o.push(f)}else if(Vt(e)){var h=e;n=t;for(var d=Object.keys(h),v=0;v<d.length;v++){var p=d[v],m=h[p];if(m===void 0&&(m=h[uv(p)]),m!==void 0){var y=this.parse(p,m,!0);y&&o.push(y)}}}else return!1;if(o.length===0)return!1;for(var b=!1,g=0;g<r.length;g++){for(var _=r[g],w={},x=void 0,E=0;E<o.length;E++){var O=o[E];if(n){var T=_.pstyle(O.name);x=w[O.name]={prev:T}}b=this.applyParsedProperty(_,Xi(O))||b,n&&(x.next=_.pstyle(O.name))}b&&this.updateStyleHints(_),n&&this.updateTransitions(_,w,a)}return b};uf.overrideBypass=function(r,e,t){e=Pb(e);for(var n=0;n<r.length;n++){var i=r[n],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,t):(o.value=t,o.pfValue!=null&&(o.pfValue=t),s?o.strValue="rgb("+t.join(",")+")":u?o.strValue=t.join(" "):o.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};uf.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};uf.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var o=r[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),d=a[l.name]={prev:c};this.applyParsedProperty(o,h),d.next=o.pstyle(l.name)}}this.updateStyleHints(o),t&&this.updateTransitions(o,a,n)}};var Gb={};Gb.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};Gb.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Ki={};Ki.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Ki.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var o=t.properties[i],a=t.getStylePropertyValue(r,o.name,e);a!=null&&(n[o.name]=a,n[uv(o.name)]=a)}return n}};Ki.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};Ki.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=r.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(t&&o.number&&s!=null&&Fe(s)){var c=r.cy().zoom(),f=function(m){return m*c},h=function(m,y){return f(m)+y},d=nr(s),v=d?u.every(function(p){return p!=null}):u!=null;return v?d?s.map(function(p,m){return h(p,u[m])}).join(" "):h(s,u):d?s.map(function(p){return it(p)?p:""+f(p)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};Ki.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=i.name,a=r.pstyle(o);a!==void 0&&(Vt(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(t[o]=a)}return t};Ki.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],u=n[s],l=i[s]||i[Pb(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};Ki.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=r.pstyle(i,!1),o!=null)if(o.pfValue!=null)n[0]=Ic(s,n[0]),n[1]=Dc(s,n[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),n[0]=Ic(s,n[0]),n[1]=Dc(s,n[1]);return n};Ki.getPropertiesHash=Ki.getNonDefaultPropertiesHash;var wv={};wv.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,o=n.style||n.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};wv.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};wv.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:o})}return r};var qb={};qb.appendFromString=function(r){var e=this,t=this,n=""+r,i,o,a;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Zt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var h=new ya(f);if(h.invalid){Zt("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var d=c[2],v=!1;o=d;for(var p=[];;){var m=o.match(/^\s*$/);if(m)break;var y=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Zt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}a=y[0];var b=y[1],g=y[2],_=e.properties[b];if(!_){Zt("Skipping property: Invalid property name in: "+a),u();continue}var w=t.parse(b,g);if(!w){Zt("Skipping property: Invalid property definition in: "+a),u();continue}p.push({name:b,val:g}),u()}if(v){s();break}t.selector(f);for(var x=0;x<p.length;x++){var E=p[x];t.css(E.name,E.val)}s()}return t};qb.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Rr={};(function(){var r=jr,e=TD,t=PD,n=AD,i=RD,o=function(Z){return"^"+Z+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(Z){var ae=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+Z+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+ae+")\\s*\\,\\s*("+ae+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Rr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Z,ae){switch(Z.length){case 2:return ae[0]!=="deg"&&ae[0]!=="rad"&&ae[1]!=="deg"&&ae[1]!=="rad";case 1:return it(Z[0])||ae[0]==="deg"||ae[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Z){var ae=Z.length;return ae===1||ae===2||ae===4}}};var u={zeroNonZero:function(Z,ae){return(Z==null||ae==null)&&Z!==ae||Z==0&&ae!=0?!0:Z!=0&&ae==0},any:function(Z,ae){return Z!=ae},emptyNonEmpty:function(Z,ae){var se=va(Z),fe=va(ae);return se&&!fe||!se&&fe}},l=Rr.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],m=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(Z,ae,se){return Z===ae?!1:se.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],b=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],g=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],_=function(Z,ae){return ae.value==="label"?-Z.poolIndex():ae.pfValue},w=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],x=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],E=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],O=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],T=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],C=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(Z,ae){return Z===ae?!1:Z==="bezier"||ae==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],P=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],R=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],k=[];Rr.pieBackgroundN=16,k.push({name:"pie-size",type:l.sizeMaybePercent}),k.push({name:"pie-hole",type:l.sizeMaybePercent}),k.push({name:"pie-start-angle",type:l.angle});for(var I=1;I<=Rr.pieBackgroundN;I++)k.push({name:"pie-"+I+"-background-color",type:l.color}),k.push({name:"pie-"+I+"-background-size",type:l.percent}),k.push({name:"pie-"+I+"-background-opacity",type:l.zeroOneNumber});var M=[];Rr.stripeBackgroundN=16,M.push({name:"stripe-size",type:l.sizeMaybePercent}),M.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var j=1;j<=Rr.stripeBackgroundN;j++)M.push({name:"stripe-"+j+"-background-color",type:l.color}),M.push({name:"stripe-"+j+"-background-size",type:l.percent}),M.push({name:"stripe-"+j+"-background-opacity",type:l.zeroOneNumber});var L=[],F=Rr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function($){F.forEach(function(Z){var ae=Z+"-"+$.name,se=$.type,fe=$.triggersBounds;L.push({name:ae,type:se,triggersBounds:fe})})},{});var z=Rr.properties=[].concat(p,g,m,y,b,P,v,d,c,f,h,w,x,E,O,k,M,T,C,L,R),V=Rr.propertyGroups={behavior:p,transition:g,visibility:m,overlay:y,underlay:b,ghost:P,commonLabel:v,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:w,nodeBorder:x,nodeOutline:E,backgroundImage:O,pie:k,stripe:M,compound:T,edgeLine:C,edgeArrow:L,core:R},G=Rr.propertyGroupNames={},Y=Rr.propertyGroupKeys=Object.keys(V);Y.forEach(function($){G[$]=V[$].map(function(Z){return Z.name}),V[$].forEach(function(Z){return Z.groupKey=$})});var ie=Rr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Rr.propertyNames=z.map(function($){return $.name});for(var W=0;W<z.length;W++){var H=z[W];z[H.name]=H}for(var Q=0;Q<ie.length;Q++){var J=ie[Q],ne=z[J.pointsTo],K={name:J.name,alias:!0,pointsTo:ne};z.push(K),z[J.name]=K}})();Rr.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Rr.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=ct({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Rr.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Rr.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Rr.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);t[o]=s}}return r.defaultProperties=t,r.defaultProperties};Rr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ev={};Ev.parse=function(r,e,t,n){var i=this;if(wr(e))return i.parseImplWarn(r,e,t,n);var o=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,a=t?"t":"f",s=""+e,u=W2(r,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=Xi(c),c&&(c.value=Xi(c.value))),c};Ev.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Zt("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Zt("The style value of `label` is deprecated for `"+i.name+"`"),i};Ev.parseImpl=function(r,e,t,n){var i=this;r=Pb(r);var o=i.properties[r],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,r=o.name);var u=it(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(wr(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var d=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var p=this.parse(r,f[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return Zt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var m=v.value,y=p.value,b=m[0]===y[0]&&m[1]===y[1]&&m[2]===y[2]&&(m[3]===y[3]||(m[3]==null||m[3]===1)&&(y[3]==null||y[3]===1));if(b)return!1}return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:p.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var g;if(u?g=e.split(/\s+/):nr(e)?g=e:g=[e],l.evenMultiple&&g.length%2!==0)return null;for(var _=[],w=[],x=[],E="",O=!1,T=0;T<g.length;T++){var C=i.parse(r,g[T],t,"multiple");O=O||it(C.value),_.push(C.value),x.push(C.pfValue!=null?C.pfValue:C.value),w.push(C.units),E+=(T>0?" ":"")+C.strValue}return l.validate&&!l.validate(_,w)?null:l.singleEnum&&O?_.length===1&&it(_[0])?{name:r,value:_[0],strValue:_[0],bypass:t}:null:{name:r,value:_,pfValue:x,strValue:E,bypass:t,units:w}}var P=function(){for(var K=0;K<l.enums.length;K++){var $=l.enums[K];if($===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var R,k="px";if(l.units&&(R=l.units),l.implicitUnits&&(k=l.implicitUnits),!l.unitless)if(u){var I="px|em"+(l.allowPercent?"|\\%":"");R&&(I=R);var M=e.match("^("+jr+")("+I+")?$");M&&(e=M[1],R=M[2]||k)}else(!R||l.implicitUnits)&&(R=k);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,P();if(l.integer&&!bD(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var j={name:r,value:e,strValue:""+e+(R||""),units:R,bypass:t};return l.unitless||R!=="px"&&R!=="em"?j.pfValue=e:j.pfValue=R==="px"||!R?e:this.getEmSizeInPixels()*e,(R==="ms"||R==="s")&&(j.pfValue=R==="ms"?e:1e3*e),(R==="deg"||R==="rad")&&(j.pfValue=R==="rad"?e:AM(e)),R==="%"&&(j.pfValue=e/100),j}else if(l.propList){var L=[],F=""+e;if(F!=="none"){for(var z=F.split(/\s*,\s*|\s+/),V=0;V<z.length;V++){var G=z[V].trim();i.properties[G]?L.push(G):Zt("`"+G+"` is not a valid property name")}if(L.length===0)return null}return{name:r,value:L,strValue:L.length===0?"none":L.join(" "),bypass:t}}else if(l.color){var Y=F2(e);return Y?{name:r,value:Y,pfValue:Y,strValue:"rgb("+Y[0]+","+Y[1]+","+Y[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var ie=P();if(ie)return ie}for(var W=l.regexes?l.regexes:[l.regex],H=0;H<W.length;H++){var Q=new RegExp(W[H]),J=Q.exec(e);if(J)return{name:r,value:l.singleRegexMatchValue?J[1]:J,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?P():null};var Hr=function(e){if(!(this instanceof Hr))return new Hr(e);if(!Cb(e)){gr("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},dn=Hr.prototype;dn.instanceString=function(){return"style"};dn.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};dn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};dn.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};dn.selector=function(r){var e=r==="core"?null:new ya(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};dn.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],o=t[i.name];o===void 0&&(o=t[uv(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};dn.style=dn.css;dn.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};dn.append=function(r){return N2(r)?r.appendToStyle(this):nr(r)?this.appendFromJson(r):it(r)&&this.appendFromString(r),this};Hr.fromJson=function(r,e){var t=new Hr(r);return t.fromJson(e),t};Hr.fromString=function(r,e){return new Hr(r).fromString(e)};[Yr,uf,Gb,Ki,wv,qb,Rr,Ev].forEach(function(r){ct(dn,r)});Hr.types=dn.types;Hr.properties=dn.properties;Hr.propertyGroups=dn.propertyGroups;Hr.propertyGroupNames=dn.propertyGroupNames;Hr.propertyGroupKeys=dn.propertyGroupKeys;var Dj={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return N2(e)?t.style=e.generateStyle(this):nr(e)?t.style=Hr.fromJson(this,e):it(e)?t.style=Hr.fromString(this,e):t.style=Hr(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},Mj="single",ws={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=Mj),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,o,a,s;switch(e.length){case 0:return t;case 1:if(it(e[0]))return n=e[0],t[n];if(Vt(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,Fe(a)&&(t.x=a),Fe(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&Fe(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Vt(e)&&(s=n[0],u=s.x,l=s.y,Fe(u)&&(i.x+=u),Fe(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=t,(o==="x"||o==="y")&&Fe(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Fe(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(it(e)){var i=e;e=this.$(i)}else if(ED(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Zn(e)||(e=this.mutableElements());if(!(Zn(e)&&e.empty())){n=n||e.boundingBox();var a=this.width(),s=this.height(),u;if(t=Fe(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((a-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return Fe(e)&&Fe(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Fe(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Fe(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,o,a,s=!1;if(t.zoomingEnabled||(s=!0),Fe(e)?a=e:Vt(e)&&(a=e.level,e.position!=null?o=fv(e.position,i,n):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!t.panningEnabled&&(s=!0)),a=a>t.maxZoom?t.maxZoom:a,a=a<t.minZoom?t.minZoom:a,s||!Fe(a)||a===i||o!=null&&(!Fe(o.x)||!Fe(o.y)))return null;if(o!=null){var u=n,l=i,c=a,f={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:a,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(Fe(e.zoom)||(n=!1),Vt(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Fe(l.x)&&(t.pan.x=l.x,s=!1),Fe(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(it(e)){var n=e;e=this.mutableElements().filter(n)}else Zn(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();t=t===void 0?this._private.zoom:t;var s={x:(o-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?(function(){var i=n.window().getComputedStyle(t),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-o("padding-left")-o("padding-right"),height:t.clientHeight-o("padding-top")-o("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};ws.centre=ws.center;ws.autolockNodes=ws.autolock;ws.autoungrabifyNodes=ws.autoungrabify;var Bc={data:Kt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Kt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Kt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Kt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Bc.attr=Bc.data;Bc.removeAttr=Bc.removeData;var Uc=function(e){var t=this;e=ct({},e);var n=e.container;n&&!Dd(n)&&Dd(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var a=Lr!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=ct({name:a?"grid":"null"},s.layout),s.renderer=ct({name:a?"canvas":"null"},s.renderer);var u=function(v,p,m){return p!==void 0?p:m!==void 0?m:v},l=this._private={container:n,ready:!1,options:s,elements:new Jr(this),listeners:[],aniEles:new Jr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:Fe(s.zoom)?s.zoom:1,pan:{x:Vt(s.pan)&&Fe(s.pan.x)?s.pan.x:0,y:Vt(s.pan)&&Fe(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,p){var m=v.some(OD);if(m)return Vu.all(v).then(p);p(v)};l.styleEnabled&&t.setStyle([]);var f=ct({},s,s.renderer);t.initRenderer(f);var h=function(v,p,m){t.notifications(!1);var y=t.mutableElements();y.length>0&&y.remove(),v!=null&&(Vt(v)||nr(v))&&t.add(v),t.one("layoutready",function(g){t.notifications(!0),t.emit(g),t.one("load",p),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",m),t.emit("done")});var b=ct({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()};c([s.style,s.elements],function(d){var v=d[0],p=d[1];l.styleEnabled&&t.style().append(v),h(p,function(){t.startAnimationLoop(),l.ready=!0,wr(s.ready)&&t.on("ready",s.ready);for(var m=0;m<o.length;m++){var y=o[m];t.on("ready",y)}i&&(i.readies=[]),t.emit("ready")},s.done)})},Ud=Uc.prototype;ct(Ud,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Lr;var t=this._private.container.ownerDocument;return t===void 0||t==null?Lr:t.defaultView||Lr},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!Dd(e)&&Dd(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(ct({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Xi(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),o=function(_){return t.getElementById(_.id())};if(Vt(e)){if(t.startBatch(),e.elements){var a={},s=function(_,w){for(var x=[],E=[],O=0;O<_.length;O++){var T=_[O];if(!T.data.id){Zt("cy.json() cannot handle elements without an ID attribute");continue}var C=""+T.data.id,P=t.getElementById(C);a[C]=!0,P.length!==0?E.push({ele:P,json:T}):(w&&(T.group=w),x.push(T))}t.add(x);for(var R=0;R<E.length;R++){var k=E[R],I=k.ele,M=k.json;I.json(M)}};if(nr(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];nr(f)&&s(f,c)}var h=t.collection();i.filter(function(g){return!a[g.id()]}).forEach(function(g){g.isParent()?h.merge(g):g.remove()}),h.forEach(function(g){return g.children().move({parent:null})}),h.forEach(function(g){return o(g).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var p=d[v];e[p]!=null&&t[p](e[p])}return t.endBatch(),this}else{var m=!!e,y={};m?y.elements=this.elements().map(function(g){return g.json()}):(y.elements={},i.forEach(function(g){var _=g.group();y.elements[_]||(y.elements[_]=[]),y.elements[_].push(g.json())})),this._private.styleEnabled&&(y.style=t.style().json()),y.data=Xi(t.data());var b=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=Xi(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=Xi(b.renderer),y.hideEdgesOnViewport=b.hideEdgesOnViewport,y.textureOnViewport=b.textureOnViewport,y.wheelSensitivity=b.wheelSensitivity,y.motionBlur=b.motionBlur,y.multiClickDebounceTime=b.multiClickDebounceTime,y}}});Ud.$id=Ud.getElementById;[Oj,Pj,NC,O0,vd,Rj,x0,pd,Dj,ws,Bc].forEach(function(r){ct(Ud,r)});var Nj={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},Lj={maximal:!1,acyclic:!1},Qs=function(e){return e.scratch("breadthfirst")},EO=function(e,t){return e.scratch("breadthfirst",t)};function LC(r){this.options=ct({},Nj,Lj,r)}LC.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(B){return B.isChildless()}),i=t,o=r.directed,a=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=Rn(s?r.boundingBox:structuredClone(e.extent())),l;if(Zn(r.roots))l=r.roots;else if(nr(r.roots)){for(var c=[],f=0;f<r.roots.length;f++){var h=r.roots[f],d=e.getElementById(h);c.push(d)}l=e.collection(c)}else if(it(r.roots))l=e.$(r.roots);else if(o)l=n.roots();else{var v=t.components();l=e.collection();for(var p=function(){var q=v[m],re=q.maxDegree(!1),ue=q.filter(function(le){return le.degree(!1)===re});l=l.add(ue)},m=0;m<v.length;m++)p()}var y=[],b={},g=function(q,re){y[re]==null&&(y[re]=[]);var ue=y[re].length;y[re].push(q),EO(q,{index:ue,depth:re})},_=function(q,re){var ue=Qs(q),le=ue.depth,de=ue.index;y[le][de]=null,q.isChildless()&&g(q,re)};i.bfs({roots:l,directed:r.directed,visit:function(q,re,ue,le,de){var xe=q[0],ke=xe.id();xe.isChildless()&&g(xe,de),b[ke]=!0}});for(var w=[],x=0;x<n.length;x++){var E=n[x];b[E.id()]||w.push(E)}var O=function(q){for(var re=y[q],ue=0;ue<re.length;ue++){var le=re[ue];if(le==null){re.splice(ue,1),ue--;continue}EO(le,{depth:q,index:ue})}},T=function(q,re){for(var ue=Qs(q),le=q.incomers().filter(function(Le){return Le.isNode()&&t.has(Le)}),de=-1,xe=q.id(),ke=0;ke<le.length;ke++){var Xe=le[ke],ze=Qs(Xe);de=Math.max(de,ze.depth)}if(ue.depth<=de){if(!r.acyclic&&re[xe])return null;var Ge=de+1;return _(q,Ge),re[xe]=Ge,!0}return!1};if(o&&a){var C=[],P={},R=function(q){return C.push(q)},k=function(){return C.shift()};for(n.forEach(function(B){return C.push(B)});C.length>0;){var I=k(),M=T(I,P);if(M)I.outgoers().filter(function(B){return B.isNode()&&t.has(B)}).forEach(R);else if(M===null){Zt("Detected double maximal shift for node `"+I.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var j=0;if(r.avoidOverlap)for(var L=0;L<n.length;L++){var F=n[L],z=F.layoutDimensions(r),V=z.w,G=z.h;j=Math.max(j,V,G)}var Y={},ie=function(q){if(Y[q.id()])return Y[q.id()];for(var re=Qs(q).depth,ue=q.neighborhood(),le=0,de=0,xe=0;xe<ue.length;xe++){var ke=ue[xe];if(!(ke.isEdge()||ke.isParent()||!n.has(ke))){var Xe=Qs(ke);if(Xe!=null){var ze=Xe.index,Ge=Xe.depth;if(!(ze==null||Ge==null)){var Le=y[Ge].length;Ge<re&&(le+=ze/Le,de++)}}}}return de=Math.max(1,de),le=le/de,de===0&&(le=0),Y[q.id()]=le,le},W=function(q,re){var ue=ie(q),le=ie(re),de=ue-le;return de===0?j2(q.id(),re.id()):de};r.depthSort!==void 0&&(W=r.depthSort);for(var H=y.length,Q=0;Q<H;Q++)y[Q].sort(W),O(Q);for(var J=[],ne=0;ne<w.length;ne++)J.push(w[ne]);var K=function(){for(var q=0;q<H;q++)O(q)};J.length&&(y.unshift(J),H=y.length,K());for(var $=0,Z=0;Z<H;Z++)$=Math.max(y[Z].length,$);var ae={x:u.x1+u.w/2,y:u.y1+u.h/2},se=n.reduce(function(B,q){return(function(re){return{w:B.w===-1?re.w:(B.w+re.w)/2,h:B.h===-1?re.h:(B.h+re.h)/2}})(q.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),fe=Math.max(H===1?0:s?(u.h-r.padding*2-se.h)/(H-1):(u.h-r.padding*2-se.h)/(H+1),j),ge=y.reduce(function(B,q){return Math.max(B,q.length)},0),ye=function(q){var re=Qs(q),ue=re.depth,le=re.index;if(r.circle){var de=Math.min(u.w/2/H,u.h/2/H);de=Math.max(de,j);var xe=de*ue+de-(H>0&&y[0].length<=3?de/2:0),ke=2*Math.PI/y[ue].length*le;return ue===0&&y[0].length===1&&(xe=1),{x:ae.x+xe*Math.cos(ke),y:ae.y+xe*Math.sin(ke)}}else{var Xe=y[ue].length,ze=Math.max(Xe===1?0:s?(u.w-r.padding*2-se.w)/((r.grid?ge:Xe)-1):(u.w-r.padding*2-se.w)/((r.grid?ge:Xe)+1),j),Ge={x:ae.x+(le+1-(Xe+1)/2)*ze,y:ae.y+(ue+1-(H+1)/2)*fe};return Ge}},pe={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(pe).indexOf(r.direction)===-1&&gr("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(pe).join(", ")));var N=function(q){return QD(ye(q),u,pe[r.direction])};return t.nodes().layoutPositions(this,r,N),this};var jj={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function jC(r){this.options=ct({},jj,r)}jC.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=Rn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,f=0,h=0;h<o.length;h++){var d=o[h],v=d.layoutDimensions(e),p=v.w,m=v.h;f=Math.max(f,p,m)}if(Fe(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-f,o.length>1&&e.avoidOverlap){f*=1.75;var y=Math.cos(l)-Math.cos(0),b=Math.sin(l)-Math.sin(0),g=Math.sqrt(f*f/(y*y+b*b));c=Math.max(g,c)}var _=function(x,E){var O=e.startAngle+E*l*(i?1:-1),T=c*Math.cos(O),C=c*Math.sin(O),P={x:s.x+T,y:s.y+C};return P};return n.nodes().layoutPositions(this,e,_),this};var Fj={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function FC(r){this.options=ct({},Fj,r)}FC.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,o=i.nodes().not(":parent"),a=Rn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var f=o[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}o.updateStyle();for(var d=0;d<o.length;d++){var v=o[d],p=v.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(fe,ge){return ge.value-fe.value});for(var m=e.levelWidth(o),y=[[]],b=y[0],g=0;g<u.length;g++){var _=u[g];if(b.length>0){var w=Math.abs(b[0].value-_.value);w>=m&&(b=[],y.push(b))}b.push(_)}var x=l+e.minNodeSpacing;if(!e.avoidOverlap){var E=y.length>0&&y[0].length>1,O=Math.min(a.w,a.h)/2-x,T=O/(y.length+E?1:0);x=Math.min(x,T)}for(var C=0,P=0;P<y.length;P++){var R=y[P],k=e.sweep===void 0?2*Math.PI-2*Math.PI/R.length:e.sweep,I=R.dTheta=k/Math.max(1,R.length-1);if(R.length>1&&e.avoidOverlap){var M=Math.cos(I)-Math.cos(0),j=Math.sin(I)-Math.sin(0),L=Math.sqrt(x*x/(M*M+j*j));C=Math.max(L,C)}R.r=C,C+=x}if(e.equidistant){for(var F=0,z=0,V=0;V<y.length;V++){var G=y[V],Y=G.r-z;F=Math.max(F,Y)}z=0;for(var ie=0;ie<y.length;ie++){var W=y[ie];ie===0&&(z=W.r),W.r=z,z+=F}}for(var H={},Q=0;Q<y.length;Q++)for(var J=y[Q],ne=J.dTheta,K=J.r,$=0;$<J.length;$++){var Z=J[$],ae=e.startAngle+(t?1:-1)*ne*$,se={x:s.x+K*Math.cos(ae),y:s.y+K*Math.sin(ae)};H[Z.node.id()]=se}return i.nodes().layoutPositions(this,e,function(fe){var ge=fe.id();return H[ge]}),this};var my,Bj={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ov(r){this.options=ct({},Bj,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(n)}Ov.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?my=!0:my=!1;var n=Uj(e,t,r);my&&Vj(n),r.randomize&&Gj(n);var i=xo(),o=function(){qj(n,e,r),r.fit===!0&&e.fit(r.padding)},a=function(h){return!(t.stopped||h>=r.numIter||(Wj(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)o(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),d=UC(n,r,h);h.layoutPositions(t,r,d)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var h=0;l&&h<r.refresh;)l=a(u),u++,h++;if(!l)xO(n,r),s();else{var d=xo();d-i>=r.animationThreshold&&o(),Md(c)}};c()}else{for(;l;)l=a(u),u++;xO(n,r),s()}return this};Ov.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Ov.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Uj=function(e,t,n){for(var i=n.eles.edges(),o=n.eles.nodes(),a=Rn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var d=f[h];l[d.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=o[c],p=v.layoutDimensions(n),m={};m.isLocked=v.locked(),m.id=v.data("id"),m.parentId=v.data("parent"),m.cmptId=l[v.id()],m.children=[],m.positionX=v.position("x"),m.positionY=v.position("y"),m.offsetX=0,m.offsetY=0,m.height=p.w,m.width=p.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(v.style("padding")),m.padRight=parseFloat(v.style("padding")),m.padTop=parseFloat(v.style("padding")),m.padBottom=parseFloat(v.style("padding")),m.nodeRepulsion=wr(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(m),s.idToIndex[m.id]=c}for(var y=[],b=0,g=-1,_=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],w=v.parentId;w!=null?s.layoutNodes[s.idToIndex[w]].children.push(v.id):(y[++g]=v.id,_.push(v.id))}for(s.graphSet.push(_);b<=g;){var x=y[b++],E=s.idToIndex[x],d=s.layoutNodes[E],O=d.children;if(O.length>0){s.graphSet.push(O);for(var c=0;c<O.length;c++)y[++g]=O[c]}}for(var c=0;c<s.graphSet.length;c++)for(var T=s.graphSet[c],h=0;h<T.length;h++){var C=s.idToIndex[T[h]];s.indexToGraph[C]=c}for(var c=0;c<s.edgeSize;c++){var P=i[c],R={};R.id=P.data("id"),R.sourceId=P.data("source"),R.targetId=P.data("target");var k=wr(n.idealEdgeLength)?n.idealEdgeLength(P):n.idealEdgeLength,I=wr(n.edgeElasticity)?n.edgeElasticity(P):n.edgeElasticity,M=s.idToIndex[R.sourceId],j=s.idToIndex[R.targetId],L=s.indexToGraph[M],F=s.indexToGraph[j];if(L!=F){for(var z=zj(R.sourceId,R.targetId,s),V=s.graphSet[z],G=0,m=s.layoutNodes[M];V.indexOf(m.id)===-1;)m=s.layoutNodes[s.idToIndex[m.parentId]],G++;for(m=s.layoutNodes[j];V.indexOf(m.id)===-1;)m=s.layoutNodes[s.idToIndex[m.parentId]],G++;k*=G*n.nestingFactor}R.idealLength=k,R.elasticity=I,s.layoutEdges.push(R)}return s},zj=function(e,t,n){var i=BC(e,t,0,n);return 2>i.count?0:i.graph},BC=function(e,t,n,i){var o=i.graphSet[n];if(-1<o.indexOf(e)&&-1<o.indexOf(t))return{count:2,graph:n};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],h=BC(e,t,f,i);if(h.count!==0)if(h.count===1){if(a++,a===2)break}else return h}}return{count:a,graph:n}},Vj,Gj=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*n,a.positionY=Math.random()*i)}},UC=function(e,t,n){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(t.boundingBox){var l=o.w===0?.5:(u.positionX-o.x1)/o.w,c=o.h===0?.5:(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},qj=function(e,t,n){var i=n.layout,o=n.eles.nodes(),a=UC(e,n,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},Wj=function(e,t,n){Hj(e,t),$j(e),Kj(e,t),Zj(e),Qj(e)},Hj=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];Yj(s,l,e,t)}},OO=function(e){return-1+2*e*Math.random()},Yj=function(e,t,n,i){var o=e.cmptId,a=t.cmptId;if(!(o!==a&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=OO(l),u=OO(l));var c=Xj(e,t,s,u);if(c>0)var f=i.nodeOverlap*c,h=Math.sqrt(s*s+u*u),d=f*s/h,v=f*u/h;else var p=zd(e,s,u),m=zd(t,-1*s,-1*u),y=m.x-p.x,b=m.y-p.y,g=y*y+b*b,h=Math.sqrt(g),f=(e.nodeRepulsion+t.nodeRepulsion)/g,d=f*y/h,v=f*b/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),t.isLocked||(t.offsetX+=d,t.offsetY+=v)}},Xj=function(e,t,n,i){if(n>0)var o=e.maxX-t.minX;else var o=t.maxX-e.minX;if(i>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},zd=function(e,t,n){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=n/t,l=a/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=o+a/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+a*t/2/n,c.y=o+a/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-a*t/2/n,c.y=o-a/2),c)},$j=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var f=zd(a,l,c),h=zd(u,-1*l,-1*c),d=h.x-f.x,v=h.y-f.y,p=Math.sqrt(d*d+v*v),m=Math.pow(i.idealLength-p,2)/i.elasticity;if(p!==0)var y=m*d/p,b=m*v/p;else var y=0,b=0;a.isLocked||(a.offsetX+=y,a.offsetY+=b),u.isLocked||(u.offsetX-=y,u.offsetY-=b)}}},Kj=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<a;f++){var h=e.layoutNodes[e.idToIndex[o[f]]];if(!h.isLocked){var d=s-h.positionX,v=u-h.positionY,p=Math.sqrt(d*d+v*v);if(p>n){var m=t.gravity*d/p,y=t.gravity*v/p;h.offsetX+=m,h.offsetY+=y}}}}},Zj=function(e,t){var n=[],i=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=n[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=f,n[++o]=l[h]}u.offsetX=0,u.offsetY=0}}},Qj=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var o=Jj(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,zC(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},Jj=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var o={x:n*e/i,y:n*t/i};else var o={x:e,y:t};return o},zC=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return zC(i,t)}},xO=function(e,t){for(var n=e.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(b,g){return g.w*g.h-b.w*b.h});for(var d=0,v=0,p=0,m=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d-c.x1,h.positionY+=v-c.y1)}d+=c.w+t.componentSpacing,p+=c.w+t.componentSpacing,m=Math.max(m,c.h),p>y&&(v+=m+t.componentSpacing,d=0,p=0,m=0)}}},e5={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function VC(r){this.options=ct({},e5,r)}VC.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=Rn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,e,function(ie){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(W){if(W==null)return Math.min(u,l);var H=Math.min(u,l);H==u?u=W:l=W},f=function(W){if(W==null)return Math.max(u,l);var H=Math.max(u,l);H==u?u=W:l=W},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(a/u);else if(h==null&&d!=null)l=d,u=Math.ceil(a/l);else if(l*u>a){var v=c(),p=f();(v-1)*p>=a?c(v-1):(p-1)*v>=a&&f(p-1)}else for(;l*u<a;){var m=c(),y=f();(y+1)*m>=a?f(y+1):c(m+1)}var b=o.w/l,g=o.h/u;if(e.condense&&(b=0,g=0),e.avoidOverlap)for(var _=0;_<i.length;_++){var w=i[_],x=w._private.position;(x.x==null||x.y==null)&&(x.x=0,x.y=0);var E=w.layoutDimensions(e),O=e.avoidOverlapPadding,T=E.w+O,C=E.h+O;b=Math.max(b,T),g=Math.max(g,C)}for(var P={},R=function(W,H){return!!P["c-"+W+"-"+H]},k=function(W,H){P["c-"+W+"-"+H]=!0},I=0,M=0,j=function(){M++,M>=l&&(M=0,I++)},L={},F=0;F<i.length;F++){var z=i[F],V=e.position(z);if(V&&(V.row!==void 0||V.col!==void 0)){var G={row:V.row,col:V.col};if(G.col===void 0)for(G.col=0;R(G.row,G.col);)G.col++;else if(G.row===void 0)for(G.row=0;R(G.row,G.col);)G.row++;L[z.id()]=G,k(G.row,G.col)}}var Y=function(W,H){var Q,J;if(W.locked()||W.isParent())return!1;var ne=L[W.id()];if(ne)Q=ne.col*b+b/2+o.x1,J=ne.row*g+g/2+o.y1;else{for(;R(I,M);)j();Q=M*b+b/2+o.x1,J=I*g+g/2+o.y1,k(I,M),j()}return{x:Q,y:J}};i.layoutPositions(this,e,Y)}return this};var t5={ready:function(){},stop:function(){}};function Wb(r){this.options=ct({},t5,r)}Wb.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};Wb.prototype.stop=function(){return this};var r5={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function GC(r){this.options=ct({},r5,r)}GC.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=wr(r.positions);function i(o){if(r.positions==null)return xM(o.position());if(n)return r.positions(o);var a=r.positions[o._private.data.id];return a??null}return t.layoutPositions(this,r,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var n5={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function qC(r){this.options=ct({},n5,r)}qC.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Rn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var i5=[{name:"breadthfirst",impl:LC},{name:"circle",impl:jC},{name:"concentric",impl:FC},{name:"cose",impl:Ov},{name:"grid",impl:VC},{name:"null",impl:Wb},{name:"preset",impl:GC},{name:"random",impl:qC}];function WC(r){this.options=r,this.notifications=0}var SO=function(){},TO=function(){throw new Error("A headless instance can not render images")};WC.prototype={recalculateRenderedStyle:SO,notify:function(){this.notifications++},init:SO,isHeadless:function(){return!0},png:TO,jpg:TO};var Hb={};Hb.arrowShapeWidth=.3;Hb.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,h,d,v,p){var m=d.x-f/2-p,y=d.x+f/2+p,b=d.y-f/2-p,g=d.y+f/2+p,_=m<=l&&l<=y&&b<=c&&c<=g;return _},n=function(l,c,f,h,d){var v=l*Math.cos(h)-c*Math.sin(h),p=l*Math.sin(h)+c*Math.cos(h),m=v*f,y=p*f,b=m+d.x,g=y+d.y;return{x:b,y:g}},i=function(l,c,f,h){for(var d=[],v=0;v<l.length;v+=2){var p=l[v],m=l[v+1];d.push(n(p,m,c,f,h))}return d},o=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){it(c)&&(c=r[c]),r[l]=ct({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,p,m,y){var b=o(i(this.points,v+2*y,p,m)),g=Un(h,d,b);return g},roughCollide:t,draw:function(h,d,v,p){var m=i(this.points,d,v,p);e.arrowShapeImpl("polygon")(h,m)},spacing:function(h){return 0},gap:a},c)};s("none",{collide:Nd,roughCollide:Nd,draw:kb,spacing:U1,gap:U1}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),p=this.controlPoint,m=n(p[0],p[1],c,f,h);e.arrowShapeImpl(this.name)(l,v,m)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,d,v,p){var m=o(i(this.points,f+2*p,h,d)),y=o(i(this.pointsTee,f+2*p,h,d)),b=Un(l,c,m)||Un(l,c,y);return b},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),p=i(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,v,p)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,d,v,p){var m=d,y=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2),b=o(i(this.points,f+2*p,h,d));return Un(l,c,b)||y},draw:function(l,c,f,h,d){var v=i(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,d=3,v=5;return f[d]=f[d]-h,f[v]=f[v]-h,f},collide:function(l,c,f,h,d,v,p){var m=o(i(this.points,f+2*p,h,d)),y=o(i(this.crossLinePts(f,v),f+2*p,h,d)),b=Un(l,c,m)||Un(l,c,y);return b},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),p=i(this.crossLinePts(c,d),c,f,h);e.arrowShapeImpl(this.name)(l,v,p)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,h,d,v,p){var m=d,y=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return y},draw:function(l,c,f,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Ps={};Ps.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],o=n[1],a=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};Ps.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(y){return parseFloat(t.getPropertyValue(y))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},o={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},a=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,f=e.width/(a+c),h=a-u,d=s-l,v=e.left+i.left+o.left,p=e.top+i.top+o.top;return this.containerBB=[v,p,h,d,f]};Ps.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ps.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Ps.findNearestElements=function(r,e,t,n){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,p;t&&(a=a.interactive);function m(E,O){if(E.isNode()){if(p)return;p=E,s.push(E)}if(E.isEdge()&&(O==null||O<d))if(v){if(v.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var T=0;T<s.length;T++)if(s[T].isEdge()){s[T]=E,v=E,d=O??d;break}}}else s.push(E),v=E,d=O??d}function y(E){var O=E.outerWidth()+2*f,T=E.outerHeight()+2*f,C=O/2,P=T/2,R=E.position(),k=E.pstyle("corner-radius").value==="auto"?"auto":E.pstyle("corner-radius").pfValue,I=E._private.rscratch;if(R.x-C<=r&&r<=R.x+C&&R.y-P<=e&&e<=R.y+P){var M=o.nodeShapes[i.getNodeShape(E)];if(M.checkPoint(r,e,0,O,T,R.x,R.y,k,I))return m(E,0),!0}}function b(E){var O=E._private,T=O.rscratch,C=E.pstyle("width").pfValue,P=E.pstyle("arrow-scale").value,R=C/2+c,k=R*R,I=R*2,F=O.source,z=O.target,M;if(T.edgeType==="segments"||T.edgeType==="straight"||T.edgeType==="haystack"){for(var j=T.allpts,L=0;L+3<j.length;L+=2)if(FM(r,e,j[L],j[L+1],j[L+2],j[L+3],I)&&k>(M=GM(r,e,j[L],j[L+1],j[L+2],j[L+3])))return m(E,M),!0}else if(T.edgeType==="bezier"||T.edgeType==="multibezier"||T.edgeType==="self"||T.edgeType==="compound"){for(var j=T.allpts,L=0;L+5<T.allpts.length;L+=4)if(BM(r,e,j[L],j[L+1],j[L+2],j[L+3],j[L+4],j[L+5],I)&&k>(M=VM(r,e,j[L],j[L+1],j[L+2],j[L+3],j[L+4],j[L+5])))return m(E,M),!0}for(var F=F||O.source,z=z||O.target,V=i.getArrowWidth(C,P),G=[{name:"source",x:T.arrowStartX,y:T.arrowStartY,angle:T.srcArrowAngle},{name:"target",x:T.arrowEndX,y:T.arrowEndY,angle:T.tgtArrowAngle},{name:"mid-source",x:T.midX,y:T.midY,angle:T.midsrcArrowAngle},{name:"mid-target",x:T.midX,y:T.midY,angle:T.midtgtArrowAngle}],L=0;L<G.length;L++){var Y=G[L],ie=o.arrowShapes[E.pstyle(Y.name+"-arrow-shape").value],W=E.pstyle("width").pfValue;if(ie.roughCollide(r,e,V,Y.angle,{x:Y.x,y:Y.y},W,c)&&ie.collide(r,e,V,Y.angle,{x:Y.x,y:Y.y},W,c))return m(E),!0}l&&s.length>0&&(y(F),y(z))}function g(E,O,T){return Bn(E,O,T)}function _(E,O){var T=E._private,C=h,P;O?P=O+"-":P="",E.boundingBox();var R=T.labelBounds[O||"main"],k=E.pstyle(P+"label").value,I=E.pstyle("text-events").strValue==="yes";if(!(!I||!k)){var M=g(T.rscratch,"labelX",O),j=g(T.rscratch,"labelY",O),L=g(T.rscratch,"labelAngle",O),F=E.pstyle(P+"text-margin-x").pfValue,z=E.pstyle(P+"text-margin-y").pfValue,V=R.x1-C-F,G=R.x2+C-F,Y=R.y1-C-z,ie=R.y2+C-z;if(L){var W=Math.cos(L),H=Math.sin(L),Q=function(se,fe){return se=se-M,fe=fe-j,{x:se*W-fe*H+M,y:se*H+fe*W+j}},J=Q(V,Y),ne=Q(V,ie),K=Q(G,Y),$=Q(G,ie),Z=[J.x+F,J.y+z,K.x+F,K.y+z,$.x+F,$.y+z,ne.x+F,ne.y+z];if(Un(r,e,Z))return m(E),!0}else if(ta(R,r,e))return m(E),!0}}for(var w=a.length-1;w>=0;w--){var x=a[w];x.isNode()?y(x)||_(x):b(x)||_(x)||_(x,"source")||_(x,"target")}return s};Ps.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,o=this.cy.zoom(),a=2/o,s=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),f=Math.max(e,n);r=u,t=l,e=c,n=f;var h=Rn({x1:r,y1:e,x2:t,y2:n}),d=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],v=[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]];function p(se,fe,ge){return Bn(se,fe,ge)}function m(se,fe){var ge=se._private,ye=a,pe="";se.boundingBox();var N=ge.labelBounds.main;if(!N)return null;var B=p(ge.rscratch,"labelX",fe),q=p(ge.rscratch,"labelY",fe),re=p(ge.rscratch,"labelAngle",fe),ue=se.pstyle(pe+"text-margin-x").pfValue,le=se.pstyle(pe+"text-margin-y").pfValue,de=N.x1-ye-ue,xe=N.x2+ye-ue,ke=N.y1-ye-le,Xe=N.y2+ye-le;if(re){var ze=Math.cos(re),Ge=Math.sin(re),Le=function(Ee,ee){return Ee=Ee-B,ee=ee-q,{x:Ee*ze-ee*Ge+B,y:Ee*Ge+ee*ze+q}};return[Le(de,ke),Le(xe,ke),Le(xe,Xe),Le(de,Xe)]}else return[{x:de,y:ke},{x:xe,y:ke},{x:xe,y:Xe},{x:de,y:Xe}]}function y(se,fe,ge,ye){function pe(N,B,q){return(q.y-N.y)*(B.x-N.x)>(B.y-N.y)*(q.x-N.x)}return pe(se,ge,ye)!==pe(fe,ge,ye)&&pe(se,fe,ge)!==pe(se,fe,ye)}for(var b=0;b<i.length;b++){var g=i[b];if(g.isNode()){var _=g,w=_.pstyle("text-events").strValue==="yes",x=_.pstyle("box-selection").strValue,E=_.pstyle("box-select-labels").strValue==="yes";if(x==="none")continue;var O=(x==="overlap"||E)&&w,T=_.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:O});if(x==="contain"){var C=!1;if(E&&w){var P=m(_);P&&gg(P,d)&&(s.push(_),C=!0)}!C&&Q2(h,T)&&s.push(_)}else if(x==="overlap"&&Nb(h,T)){var R=_.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),k=[{x:R.x1,y:R.y1},{x:R.x2,y:R.y1},{x:R.x2,y:R.y2},{x:R.x1,y:R.y2}];if(gg(k,d))s.push(_);else{var I=m(_);I&&gg(I,d)&&s.push(_)}}}else{var M=g,j=M._private,L=j.rscratch,F=M.pstyle("box-selection").strValue;if(F==="none")continue;if(F==="contain"){if(L.startX!=null&&L.startY!=null&&!ta(h,L.startX,L.startY)||L.endX!=null&&L.endY!=null&&!ta(h,L.endX,L.endY))continue;if(L.edgeType==="bezier"||L.edgeType==="multibezier"||L.edgeType==="self"||L.edgeType==="compound"||L.edgeType==="segments"||L.edgeType==="haystack"){for(var z=j.rstyle.bezierPts||j.rstyle.linePts||j.rstyle.haystackPts,V=!0,G=0;G<z.length;G++)if(!W1(h,z[G])){V=!1;break}V&&s.push(M)}else L.edgeType==="straight"&&s.push(M)}else if(F==="overlap"){var Y=!1;if(L.startX!=null&&L.startY!=null&&L.endX!=null&&L.endY!=null&&(ta(h,L.startX,L.startY)||ta(h,L.endX,L.endY)))s.push(M),Y=!0;else if(!Y&&L.edgeType==="haystack"){for(var ie=j.rstyle.haystackPts,W=0;W<ie.length;W++)if(W1(h,ie[W])){s.push(M),Y=!0;break}}if(!Y){var H=j.rstyle.bezierPts||j.rstyle.linePts||j.rstyle.haystackPts;if((!H||H.length<2)&&L.edgeType==="straight"&&L.startX!=null&&L.startY!=null&&L.endX!=null&&L.endY!=null&&(H=[{x:L.startX,y:L.startY},{x:L.endX,y:L.endY}]),!H||H.length<2)continue;for(var Q=0;Q<H.length-1;Q++){for(var J=H[Q],ne=H[Q+1],K=0;K<v.length;K++){var $=kr(v[K],2),Z=$[0],ae=$[1];if(y(J,ne,Z,ae)){s.push(M),Y=!0;break}}if(Y)break}}}}}return s};var Vd={};Vd.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,h,d,y,b;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),y=e.midX,b=e.midY,o)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||a||s||n){var v=e.allpts,p=Wr(v[0],v[2],v[4],.1),m=Wr(v[1],v[3],v[5],.1);u=c-p,l=f-m}else u=c-y,l=f-b;e.srcArrowAngle=mh(u,l);var y=e.midX,b=e.midY;if(t&&(y=(c+h)/2,b=(f+d)/2),u=h-c,l=d-f,o){var v=e.allpts;if(v.length/2%2===0){var g=v.length/2,_=g-2;u=v[g]-v[_],l=v[g+1]-v[_+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var g=v.length/2-1,_=g-2;u=v[g]-v[_],l=v[g+1]-v[_+1]}}else if(i||a||s){var v=e.allpts,w=e.ctrlpts,x,E,O,T;if(w.length/2%2===0){var C=v.length/2-1,P=C+2,R=P+2;x=Wr(v[C],v[P],v[R],0),E=Wr(v[C+1],v[P+1],v[R+1],0),O=Wr(v[C],v[P],v[R],1e-4),T=Wr(v[C+1],v[P+1],v[R+1],1e-4)}else{var P=v.length/2-1,C=P-2,R=P+2;x=Wr(v[C],v[P],v[R],.4999),E=Wr(v[C+1],v[P+1],v[R+1],.4999),O=Wr(v[C],v[P],v[R],.5),T=Wr(v[C+1],v[P+1],v[R+1],.5)}u=O-x,l=T-E}if(e.midtgtArrowAngle=mh(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var g=v.length/2-1,k=g+2;u=-(v[k]-v[g]),l=-(v[k+1]-v[g+1])}}}if(e.midsrcArrowAngle=mh(u,l),o)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(i||a||s||n){var v=e.allpts,I=v.length,p=Wr(v[I-6],v[I-4],v[I-2],.9),m=Wr(v[I-5],v[I-3],v[I-1],.9);u=h-p,l=d-m}else u=h-y,l=d-b;e.tgtArrowAngle=mh(u,l)};Vd.getArrowWidth=Vd.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var S0,T0,Yi={},ui={},CO,PO,hs,gd,ho,Ha,as,Bi,Js,Th,HC,YC,C0,P0,AO,RO=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},o5=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},a5=function(e,t,n,i,o){if(e!==AO?RO(t,e,Yi):o5(ui,Yi),RO(t,n,ui),CO=Yi.nx*ui.ny-Yi.ny*ui.nx,PO=Yi.nx*ui.nx-Yi.ny*-ui.ny,ho=Math.asin(Math.max(-1,Math.min(1,CO))),Math.abs(ho)<1e-6){S0=t.x,T0=t.y,as=Js=0;return}hs=1,gd=!1,PO<0?ho<0?ho=Math.PI+ho:(ho=Math.PI-ho,hs=-1,gd=!0):ho>0&&(hs=-1,gd=!0),t.radius!==void 0?Js=t.radius:Js=i,Ha=ho/2,Th=Math.min(Yi.len/2,ui.len/2),o?(Bi=Math.abs(Math.cos(Ha)*Js/Math.sin(Ha)),Bi>Th?(Bi=Th,as=Math.abs(Bi*Math.sin(Ha)/Math.cos(Ha))):as=Js):(Bi=Math.min(Th,Js),as=Math.abs(Bi*Math.sin(Ha)/Math.cos(Ha))),C0=t.x+ui.nx*Bi,P0=t.y+ui.ny*Bi,S0=C0-ui.ny*as*hs,T0=P0+ui.nx*as*hs,HC=t.x+Yi.nx*Bi,YC=t.y+Yi.ny*Bi,AO=t};function XC(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Yb(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(a5(r,e,t,n,i),{cx:S0,cy:T0,radius:as,startX:HC,startY:YC,stopX:C0,stopY:P0,startAngle:Yi.ang+Math.PI/2*hs,endAngle:ui.ang-Math.PI/2*hs,counterClockwise:gd})}var zc=.01,s5=Math.sqrt(2*zc),vn={};vn.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,o,a=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(w,x,E,O){var T=O-x,C=E-w,P=Math.sqrt(C*C+T*T);return{x:-T/P,y:C/P}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":o=t;break;case"intersection":o=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],a),h=kr(f,2),d=h[0],v=h[1],p=this.manualEndptToPx(r.target()[0],s),m=kr(p,2),y=m[0],b=m[1],g={x1:d,y1:v,x2:y,y2:b};i=l(d,v,y,b),o=g}else Zt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=n;break}}return{midptPts:o,vectorNormInverse:i}};vn.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=n.source,s=n.target,u=a.position(),l=s.position(),c=a.width(),f=s.width(),h=a.height(),d=s.height(),v=t.pstyle("haystack-radius").value,p=v/2;i.haystackPts=i.allpts=[i.source.x*c*p+u.x,i.source.y*h*p+u.y,i.target.x*f*p+l.x,i.target.y*d*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};vn.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),o=r.pstyle("segment-radii"),a=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],h=i.pfValue[c],d=1-f,v=f,p=this.findMidptPtsEtc(r,e),m=p.midptPts,y=p.vectorNormInverse,b={x:m.x1*d+m.x2*v,y:m.y1*d+m.y2*v};t.segpts.push(b.x+y.x*h,b.y+y.y*h),t.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),t.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};vn.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,o=e.dirCounts,a=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,d=f;n&&(h=0,d=u);var v=l-Math.PI/2,p=v-c/2,m=v+c/2,y=l+"_"+c;h=o[y]===void 0?o[y]=0:++o[y],i.ctrlpts=[a.x+Math.cos(p)*1.4*d*(h/3+1),a.y+Math.sin(p)*1.4*d*(h/3+1),a.x+Math.cos(m)*1.4*d*(h/3+1),a.y+Math.sin(m)*1.4*d*(h/3+1)]};vn.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=t,p=f;n&&(v=0,p=d);var m=50,y={x:o.x-s/2,y:o.y-u/2},b={x:a.x-l/2,y:a.y-c/2},g={x:Math.min(y.x,b.x),y:Math.min(y.y,b.y)},_=.5,w=Math.max(_,Math.log(s*zc)),x=Math.max(_,Math.log(l*zc));i.ctrlpts=[g.x,g.y-(1+Math.pow(m,1.12)/100)*p*(v/3+1)*w,g.x-(1+Math.pow(m,1.12)/100)*p*(v/3+1)*x,g.y]};vn.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};vn.findBezierPoints=function(r,e,t,n,i){var o=r._private.rscratch,a=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],h=n;o.edgeType=h?"multibezier":"bezier",o.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+t)*a*(i?-1:1),p=void 0,m=Mb(v);h&&(c=s?s.pfValue[d]:a,f=u.value[d]),n?p=c:p=c!==void 0?m*c:void 0;var y=p!==void 0?p:v,b=1-f,g=f,_=this.findMidptPtsEtc(r,e),w=_.midptPts,x=_.vectorNormInverse,E={x:w.x1*b+w.x2*g,y:w.y1*b+w.y2*g};o.ctrlpts.push(E.x+x.x*y,E.y+x.y*y)}};vn.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,p=r.pstyle("edge-distances").value,m=p!=="node-position",y=r.pstyle("taxi-direction").value,b=y,g=r.pstyle("taxi-turn"),_=g.units==="%",w=g.pfValue,x=w<0,E=r.pstyle("taxi-turn-min-distance").pfValue,O=m?(f+d)/2:0,T=m?(h+v)/2:0,C=c.x2-c.x1,P=c.y2-c.y1,R=function(ee,ve){return ee>0?Math.max(ee-ve,0):Math.min(ee+ve,0)},k=R(C,O),I=R(P,T),M=!1;b===l?y=Math.abs(k)>Math.abs(I)?i:n:b===u||b===s?(y=n,M=!0):(b===o||b===a)&&(y=i,M=!0);var j=y===n,L=j?I:k,F=j?P:C,z=Mb(F),V=!1;!(M&&(_||x))&&(b===s&&F<0||b===u&&F>0||b===o&&F>0||b===a&&F<0)&&(z*=-1,L=z*Math.abs(L),V=!0);var G;if(_){var Y=w<0?1+w:w;G=Y*L}else{var ie=w<0?L:0;G=ie+w*z}var W=function(ee){return Math.abs(ee)<E||Math.abs(ee)>=Math.abs(L)},H=W(G),Q=W(Math.abs(L)-Math.abs(G)),J=H||Q;if(J&&!V)if(j){var ne=Math.abs(F)<=h/2,K=Math.abs(C)<=d/2;if(ne){var $=(c.x1+c.x2)/2,Z=c.y1,ae=c.y2;t.segpts=[$,Z,$,ae]}else if(K){var se=(c.y1+c.y2)/2,fe=c.x1,ge=c.x2;t.segpts=[fe,se,ge,se]}else t.segpts=[c.x1,c.y2]}else{var ye=Math.abs(F)<=f/2,pe=Math.abs(P)<=v/2;if(ye){var N=(c.y1+c.y2)/2,B=c.x1,q=c.x2;t.segpts=[B,N,q,N]}else if(pe){var re=(c.x1+c.x2)/2,ue=c.y1,le=c.y2;t.segpts=[re,ue,re,le]}else t.segpts=[c.x2,c.y1]}else if(j){var de=c.y1+G+(m?h/2*z:0),xe=c.x1,ke=c.x2;t.segpts=[xe,de,ke,de]}else{var Xe=c.x1+G+(m?f/2*z:0),ze=c.y1,Ge=c.y2;t.segpts=[Xe,ze,Xe,Ge]}if(t.isRound){var Le=r.pstyle("taxi-radius").value,Ie=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Le),t.isArcRadius=new Array(t.segpts.length/2).fill(Ie)}};vn.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,p=!Fe(t.startX)||!Fe(t.startY),m=!Fe(t.arrowStartX)||!Fe(t.arrowStartY),y=!Fe(t.endX)||!Fe(t.endY),b=!Fe(t.arrowEndX)||!Fe(t.arrowEndY),g=3,_=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,w=g*_,x=bs({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),E=x<w,O=bs({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),T=O<w,C=!1;if(p||m||E){C=!0;var P={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},R=Math.sqrt(P.x*P.x+P.y*P.y),k={x:P.x/R,y:P.y/R},I=Math.max(o,a),M={x:t.ctrlpts[0]+k.x*2*I,y:t.ctrlpts[1]+k.y*2*I},j=l.intersectLine(n.x,n.y,o,a,M.x,M.y,0,f,d);E?(t.ctrlpts[0]=t.ctrlpts[0]+k.x*(w-x),t.ctrlpts[1]=t.ctrlpts[1]+k.y*(w-x)):(t.ctrlpts[0]=j[0]+k.x*w,t.ctrlpts[1]=j[1]+k.y*w)}if(y||b||T){C=!0;var L={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},F=Math.sqrt(L.x*L.x+L.y*L.y),z={x:L.x/F,y:L.y/F},V=Math.max(o,a),G={x:t.ctrlpts[0]+z.x*2*V,y:t.ctrlpts[1]+z.y*2*V},Y=c.intersectLine(i.x,i.y,s,u,G.x,G.y,0,h,v);T?(t.ctrlpts[0]=t.ctrlpts[0]+z.x*(w-O),t.ctrlpts[1]=t.ctrlpts[1]+z.y*(w-O)):(t.ctrlpts[0]=Y[0]+z.x*w,t.ctrlpts[1]=Y[1]+z.y*w)}C&&this.findEndpoints(r)}};vn.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=Wr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=Wr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(Yb({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2];if(h.radius===0){var d={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-d.y,d.x-f.x]}else{var v=[f.x-h.cx,f.y-h.cy],p=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(m){return m*p}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};vn.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Fe(e.startX)&&Fe(e.startY)&&Fe(e.endX)&&Fe(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Zt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};vn.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),o=new mo,a=function(T,C){return[].concat(Id(T),[C?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){u.push(c);continue}var d=h==="unbundled-bezier"||ea(h,"segments")||h==="straight"||h==="straight-triangle"||ea(h,"taxi"),v=h==="unbundled-bezier"||h==="bezier",p=f.source,m=f.target,y=p.poolIndex(),b=m.poolIndex(),g=[y,b].sort(),_=a(g,d),w=o.get(_);w==null&&(w={eles:[]},s.push({pairId:g,edgeIsUnbundled:d}),o.set(_,w)),w.eles.push(c),d&&(w.hasUnbundled=!0),v&&(w.hasBezier=!0)}}for(var x=function(){var T=s[E],C=T.pairId,P=T.edgeIsUnbundled,R=a(C,P),k=o.get(R),I;if(!k.hasUnbundled){var M=k.eles[0].parallelEdges().filter(function(Ie){return Ie.isBundledBezier()});Ib(k.eles),M.forEach(function(Ie){return k.eles.push(Ie)}),k.eles.sort(function(Ie,Ee){return Ie.poolIndex()-Ee.poolIndex()})}var j=k.eles[0],L=j.source(),F=j.target();if(L.poolIndex()>F.poolIndex()){var z=L;L=F,F=z}var V=k.srcPos=L.position(),G=k.tgtPos=F.position(),Y=k.srcW=L.outerWidth(),ie=k.srcH=L.outerHeight(),W=k.tgtW=F.outerWidth(),H=k.tgtH=F.outerHeight(),Q=k.srcShape=t.nodeShapes[e.getNodeShape(L)],J=k.tgtShape=t.nodeShapes[e.getNodeShape(F)],ne=k.srcCornerRadius=L.pstyle("corner-radius").value==="auto"?"auto":L.pstyle("corner-radius").pfValue,K=k.tgtCornerRadius=F.pstyle("corner-radius").value==="auto"?"auto":F.pstyle("corner-radius").pfValue,$=k.tgtRs=F._private.rscratch,Z=k.srcRs=L._private.rscratch;k.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var ae=0;ae<k.eles.length;ae++){var se=k.eles[ae],fe=se[0]._private.rscratch,ge=se.pstyle("curve-style").value,ye=ge==="unbundled-bezier"||ea(ge,"segments")||ea(ge,"taxi"),pe=!L.same(se.source());if(!k.calculatedIntersection&&L!==F&&(k.hasBezier||k.hasUnbundled)){k.calculatedIntersection=!0;var N=Q.intersectLine(V.x,V.y,Y,ie,G.x,G.y,0,ne,Z),B=k.srcIntn=N,q=J.intersectLine(G.x,G.y,W,H,V.x,V.y,0,K,$),re=k.tgtIntn=q,ue=k.intersectionPts={x1:N[0],x2:q[0],y1:N[1],y2:q[1]},le=k.posPts={x1:V.x,x2:G.x,y1:V.y,y2:G.y},de=q[1]-N[1],xe=q[0]-N[0],ke=Math.sqrt(xe*xe+de*de);Fe(ke)&&ke>=s5||(ke=Math.sqrt(Math.max(xe*xe,zc)+Math.max(de*de,zc)));var Xe=k.vector={x:xe,y:de},ze=k.vectorNorm={x:Xe.x/ke,y:Xe.y/ke},Ge={x:-ze.y,y:ze.x};k.nodesOverlap=!Fe(ke)||J.checkPoint(N[0],N[1],0,W,H,G.x,G.y,K,$)||Q.checkPoint(q[0],q[1],0,Y,ie,V.x,V.y,ne,Z),k.vectorNormInverse=Ge,I={nodesOverlap:k.nodesOverlap,dirCounts:k.dirCounts,calculatedIntersection:!0,hasBezier:k.hasBezier,hasUnbundled:k.hasUnbundled,eles:k.eles,srcPos:G,srcRs:$,tgtPos:V,tgtRs:Z,srcW:W,srcH:H,tgtW:Y,tgtH:ie,srcIntn:re,tgtIntn:B,srcShape:J,tgtShape:Q,posPts:{x1:le.x2,y1:le.y2,x2:le.x1,y2:le.y1},intersectionPts:{x1:ue.x2,y1:ue.y2,x2:ue.x1,y2:ue.y1},vector:{x:-Xe.x,y:-Xe.y},vectorNorm:{x:-ze.x,y:-ze.y},vectorNormInverse:{x:-Ge.x,y:-Ge.y}}}var Le=pe?I:k;fe.nodesOverlap=Le.nodesOverlap,fe.srcIntn=Le.srcIntn,fe.tgtIntn=Le.tgtIntn,fe.isRound=ge.startsWith("round"),i&&(L.isParent()||L.isChild()||F.isParent()||F.isChild())&&(L.parents().anySame(F)||F.parents().anySame(L)||L.same(F)&&L.isParent())?e.findCompoundLoopPoints(se,Le,ae,ye):L===F?e.findLoopPoints(se,Le,ae,ye):ge.endsWith("segments")?e.findSegmentsPoints(se,Le):ge.endsWith("taxi")?e.findTaxiPoints(se,Le):ge==="straight"||!ye&&k.eles.length%2===1&&ae===Math.floor(k.eles.length/2)?e.findStraightEdgePoints(se):e.findBezierPoints(se,Le,ae,ye,pe),e.findEndpoints(se),e.tryToCorrectInvalidPoints(se,Le),e.checkForInvalidEdgeWarning(se),e.storeAllpts(se),e.storeEdgeProjections(se),e.calculateArrowAngles(se),e.recalculateEdgeLabelProjections(se),e.calculateLabelAngles(se)}},E=0;E<s.length;E++)x();this.findHaystackPoints(u)}};function $C(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}vn.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return $C(e.segpts)};vn.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return $C(e.ctrlpts)};vn.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var lf={};lf.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),o=r.outerHeight(),a=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,o,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,a)}};lf.findEndpoints=function(r){var e,t,n,i,o=this,a,s=r.source()[0],u=r.target()[0],l=s.position(),c=u.position(),f=r.pstyle("target-arrow-shape").value,h=r.pstyle("source-arrow-shape").value,d=r.pstyle("target-distance-from-node").pfValue,v=r.pstyle("source-distance-from-node").pfValue,p=s._private.rscratch,m=u._private.rscratch,y=r.pstyle("curve-style").value,b=r._private.rscratch,g=b.edgeType,_=ea(y,"taxi"),w=g==="self"||g==="compound",x=g==="bezier"||g==="multibezier"||w,E=g!=="bezier",O=g==="straight"||g==="segments",T=g==="segments",C=x||E||O,P=w||_,R=r.pstyle("source-endpoint"),k=P?"outside-to-node":R.value,I=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue,M=r.pstyle("target-endpoint"),j=P?"outside-to-node":M.value,L=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;b.srcManEndpt=R,b.tgtManEndpt=M;var F,z,V,G,Y=(e=(M==null||(t=M.pfValue)===null||t===void 0?void 0:t.length)===2?M.pfValue:null)!==null&&e!==void 0?e:[0,0],ie=(n=(R==null||(i=R.pfValue)===null||i===void 0?void 0:i.length)===2?R.pfValue:null)!==null&&n!==void 0?n:[0,0];if(x){var W=[b.ctrlpts[0],b.ctrlpts[1]],H=E?[b.ctrlpts[b.ctrlpts.length-2],b.ctrlpts[b.ctrlpts.length-1]]:W;F=H,z=W}else if(O){var Q=T?b.segpts.slice(0,2):[c.x+Y[0],c.y+Y[1]],J=T?b.segpts.slice(b.segpts.length-2):[l.x+ie[0],l.y+ie[1]];F=J,z=Q}if(j==="inside-to-node")a=[c.x,c.y];else if(M.units)a=this.manualEndptToPx(u,M);else if(j==="outside-to-line")a=b.tgtIntn;else if(j==="outside-to-node"||j==="outside-to-node-or-label"?V=F:(j==="outside-to-line"||j==="outside-to-line-or-label")&&(V=[l.x,l.y]),a=o.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),V[0],V[1],0,L,m),j==="outside-to-node-or-label"||j==="outside-to-line-or-label"){var ne=u._private.rscratch,K=ne.labelWidth,$=ne.labelHeight,Z=ne.labelX,ae=ne.labelY,se=K/2,fe=$/2,ge=u.pstyle("text-valign").value;ge==="top"?ae-=fe:ge==="bottom"&&(ae+=fe);var ye=u.pstyle("text-halign").value;ye==="left"?Z-=se:ye==="right"&&(Z+=se);var pe=Lc(V[0],V[1],[Z-se,ae-fe,Z+se,ae-fe,Z+se,ae+fe,Z-se,ae+fe],c.x,c.y);if(pe.length>0){var N=l,B=os(N,yu(a)),q=os(N,yu(pe)),re=B;if(q<B&&(a=pe,re=q),pe.length>2){var ue=os(N,{x:pe[2],y:pe[3]});ue<re&&(a=[pe[2],pe[3]])}}}var le=bh(a,F,o.arrowShapes[f].spacing(r)+d),de=bh(a,F,o.arrowShapes[f].gap(r)+d);if(b.endX=de[0],b.endY=de[1],b.arrowEndX=le[0],b.arrowEndY=le[1],k==="inside-to-node")a=[l.x,l.y];else if(R.units)a=this.manualEndptToPx(s,R);else if(k==="outside-to-line")a=b.srcIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?G=z:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(G=[c.x,c.y]),a=o.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),G[0],G[1],0,I,p),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var xe=s._private.rscratch,ke=xe.labelWidth,Xe=xe.labelHeight,ze=xe.labelX,Ge=xe.labelY,Le=ke/2,Ie=Xe/2,Ee=s.pstyle("text-valign").value;Ee==="top"?Ge-=Ie:Ee==="bottom"&&(Ge+=Ie);var ee=s.pstyle("text-halign").value;ee==="left"?ze-=Le:ee==="right"&&(ze+=Le);var ve=Lc(G[0],G[1],[ze-Le,Ge-Ie,ze+Le,Ge-Ie,ze+Le,Ge+Ie,ze-Le,Ge+Ie],l.x,l.y);if(ve.length>0){var be=c,we=os(be,yu(a)),Oe=os(be,yu(ve)),Ve=we;if(Oe<we&&(a=[ve[0],ve[1]],Ve=Oe),ve.length>2){var Se=os(be,{x:ve[2],y:ve[3]});Se<Ve&&(a=[ve[2],ve[3]])}}}var We=bh(a,z,o.arrowShapes[h].spacing(r)+v),Be=bh(a,z,o.arrowShapes[h].gap(r)+v);b.startX=Be[0],b.startY=Be[1],b.arrowStartX=We[0],b.arrowStartY=We[1],C&&(!Fe(b.startX)||!Fe(b.startY)||!Fe(b.endX)||!Fe(b.endY)?b.badLine=!0:b.badLine=!1)};lf.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};lf.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Xb={};function u5(r,e,t){for(var n=function(l,c,f,h){return Wr(l,c,f,h)},i=e._private,o=i.rstyle.bezierPts,a=0;a<r.bezierProjPcts.length;a++){var s=r.bezierProjPcts[a];o.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}Xb.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)u5(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)o.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var a=t.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};Xb.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Ji={};Ji.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!va(e)){var t,n,i=r._private,o=r.width(),a=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":t=u.x-o/2-s;break;case"right":t=u.x+o/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-a/2-s;break;case"bottom":n=u.y+a/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var KC=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},ZC=function(e,t){var n=t.x-e.x,i=t.y-e.y;return KC(n,i)},l5=function(e,t,n,i){var o=Nc(0,i-.001,1),a=Nc(0,i+.001,1),s=Eu(e,t,n,o),u=Eu(e,t,n,a);return ZC(s,u)};Ji.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,o={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:n.midX,y:n.midY};var a=function(f,h,d){go(t.rscratch,f,h,d),go(t.rstyle,f,h,d)};a("labelX",null,e.x),a("labelY",null,e.y);var s=KC(n.midDispX,n.midDispY);a("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},p={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:d,p1:v,p2:p,startDist:0,length:0,segments:[]})}var m=t.rstyle.bezierPts,y=i.bezierProjPcts.length;function b(E,O,T,C,P){var R=bs(O,T),k=E.segments[E.segments.length-1],I={p0:O,p1:T,t0:C,t1:P,startDist:k?k.startDist+k.length:0,length:R};E.segments.push(I),E.length+=R}for(var g=0;g<f.length;g++){var _=f[g],w=f[g-1];w&&(_.startDist=w.startDist+w.length),b(_,_.p0,m[g*y],0,i.bezierProjPcts[0]);for(var x=0;x<y-1;x++)b(_,m[g*y+x],m[g*y+x+1],i.bezierProjPcts[x],i.bezierProjPcts[x+1]);b(_,m[g*y+y-1],_.p2,i.bezierProjPcts[y-1],1)}return u.cache=f},l=function(f){var h,d=f==="source";if(o[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),m,y=0,b=0,g=0;g<p.length;g++){for(var _=p[d?g:p.length-1-g],w=0;w<_.segments.length;w++){var x=_.segments[d?w:_.segments.length-1-w],E=g===p.length-1&&w===_.segments.length-1;if(y=b,b+=x.length,b>=v||E){m={cp:_,segment:x};break}}if(m)break}var O=m.cp,T=m.segment,C=(v-y)/T.length,P=T.t1-T.t0,R=d?T.t0+P*C:T.t1-P*C;R=Nc(0,R,1),e=Eu(O.p0,O.p1,O.p2,R),h=l5(O.p0,O.p1,O.p2,R);break}case"straight":case"segments":case"haystack":{for(var k=0,I,M,j,L,F=n.allpts.length,z=0;z+3<F&&(d?(j={x:n.allpts[z],y:n.allpts[z+1]},L={x:n.allpts[z+2],y:n.allpts[z+3]}):(j={x:n.allpts[F-2-z],y:n.allpts[F-1-z]},L={x:n.allpts[F-4-z],y:n.allpts[F-3-z]}),I=bs(j,L),M=k,k+=I,!(k>=v));z+=2);var V=v-M,G=V/I;G=Nc(0,G,1),e=kM(j,L,G),h=ZC(j,L);break}}a("labelX",f,e.x),a("labelY",f,e.y),a("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(r)}};Ji.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Ji.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=ms(n,r._private.labelDimsKey);if(Bn(t.rscratch,"prefixedLabelDimsKey",e)!==i){go(t.rscratch,"prefixedLabelDimsKey",e,i);var o=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=Bn(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=o.height/l,f=c*a,h=o.width,d=o.height+(l-1)*(a-1)*c;go(t.rstyle,"labelWidth",e,h),go(t.rscratch,"labelWidth",e,h),go(t.rstyle,"labelHeight",e,d),go(t.rscratch,"labelHeight",e,d),go(t.rscratch,"labelLineHeight",e,f)}};Ji.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,o=r.pstyle("text-transform").value,a=function(ie,W){return W?(go(t.rscratch,ie,e,W),W):Bn(t.rscratch,ie,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="",c=i.split(`
`),f=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],p=/[\s\u200b]+|$/g,m=0;m<c.length;m++){var y=c[m],b=this.calculateLabelDimensions(r,y),g=b.width;if(d){var _=y.split("").join(l);y=_}if(g>f){var w=y.matchAll(p),x="",E=0,O=Vn(w),T;try{for(O.s();!(T=O.n()).done;){var C=T.value,P=C[0],R=y.substring(E,C.index);E=C.index+P.length;var k=x.length===0?R:x+R+P,I=this.calculateLabelDimensions(r,k),M=I.width;M<=f?x+=R+P:(x&&v.push(x),x=R+P)}}catch(Y){O.e(Y)}finally{O.f()}x.match(/^[\s\u200b]+$/)||v.push(x)}else v.push(y)}a("labelWrapCachedLines",v),i=a("labelWrapCachedText",v.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var j=r.pstyle("text-max-width").pfValue,L="",F="",z=!1;if(this.calculateLabelDimensions(r,i).width<j)return i;for(var V=0;V<i.length;V++){var G=this.calculateLabelDimensions(r,L+i[V]+F).width;if(G>j)break;L+=i[V],V===i.length-1&&(z=!0)}return z||(L+=F),L}return i};Ji.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Ji.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,o=0,a=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}f.font="".concat(a," ").concat(l," ").concat(s,"px ").concat(u);for(var d=0,v=0,p=e.split(`
`),m=0;m<p.length;m++){var y=p[m],b=f.measureText(y),g=Math.ceil(b.width),_=s;d=Math.max(g,d),v+=_}return d+=o,v+=o,{width:d,height:v}};Ji.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),o=e?e+"-":"",a=r.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:a.pfValue};Ji.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var QC={},kO=28,IO=!1;QC.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<kO||r.height()<kO))return IO||(Zt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),IO=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var xv={};xv.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(a){var s=a.target;n(s)}).on("style.* background.*",function(a){var s=a.target;n(s,!1)});var i=function(a){if(a){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var h=s[f];h(a,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};xv.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};xv.recalculateRenderedStyle=function(r,e){var t=function(_){return _._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<r.length;o++){var a=r[o],s=a._private,u=s.rstyle;a.isEdge()&&(!t(a.source())||!t(a.target()))&&(u.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(g){return!g._private.rstyle.clean&&g.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):n.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,h=f.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],m=p._private,y=m.rstyle,b=m.rscratch;y.srcX=b.arrowStartX,y.srcY=b.arrowStartY,y.tgtX=b.arrowEndX,y.tgtY=b.arrowEndY,y.midX=b.midX,y.midY=b.midY,y.labelAngle=b.labelAngle,y.sourceLabelAngle=b.sourceLabelAngle,y.targetLabelAngle=b.targetLabelAngle}}}};var Sv={};Sv.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Sv.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Sv.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(DC),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var JC={};[Ps,Vd,vn,lf,Xb,Ji,QC,xv,Sv].forEach(function(r){ct(JC,r)});var eP={};eP.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},o=i[r];if(o)return o.image.complete||o.image.addEventListener("load",t),o.image;o=i[r]=i[r]||{};var a=o.image=new Image;a.addEventListener("load",t),a.addEventListener("error",function(){a.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=r,a};var Wu={};Wu.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(r);return u.on.apply(u,i)};Wu.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||wD(r);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:a,addEventListener:a,addListener:a,bind:a}};Wu.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Wu.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Wu.load=function(){var r=this,e=r.cy.window(),t=function(ee){return ee.selected()},n=function(ee){var ve=ee.getRootNode();if(ve&&ve.nodeType===11&&ve.host!==void 0)return ve},i=function(ee,ve,be,we){ee==null&&(ee=r.cy);for(var Oe=0;Oe<ve.length;Oe++){var Ve=ve[Oe];ee.emit({originalEvent:be,type:Ve,position:we})}},o=function(ee){return ee.shiftKey||ee.metaKey||ee.ctrlKey},a=function(ee,ve){var be=!0;if(r.cy.hasCompoundNodes()&&ee&&ee.pannable())for(var we=0;ve&&we<ve.length;we++){var ee=ve[we];if(ee.isNode()&&ee.isParent()&&!ee.pannable()){be=!1;break}}else be=!0;return be},s=function(ee){ee[0]._private.grabbed=!0},u=function(ee){ee[0]._private.grabbed=!1},l=function(ee){ee[0]._private.rscratch.inDragLayer=!0},c=function(ee){ee[0]._private.rscratch.inDragLayer=!1},f=function(ee){ee[0]._private.rscratch.isGrabTarget=!0},h=function(ee){ee[0]._private.rscratch.isGrabTarget=!1},d=function(ee,ve){var be=ve.addToList,we=be.has(ee);!we&&ee.grabbable()&&!ee.locked()&&(be.merge(ee),s(ee))},v=function(ee,ve){if(ee.cy().hasCompoundNodes()&&!(ve.inDragLayer==null&&ve.addToList==null)){var be=ee.descendants();ve.inDragLayer&&(be.forEach(l),be.connectedEdges().forEach(l)),ve.addToList&&d(be,ve)}},p=function(ee,ve){ve=ve||{};var be=ee.cy().hasCompoundNodes();ve.inDragLayer&&(ee.forEach(l),ee.neighborhood().stdFilter(function(we){return!be||we.isEdge()}).forEach(l)),ve.addToList&&ee.forEach(function(we){d(we,ve)}),v(ee,ve),b(ee,{inDragLayer:ve.inDragLayer}),r.updateCachedGrabbedEles()},m=p,y=function(ee){ee&&(r.getCachedZSortedEles().forEach(function(ve){u(ve),c(ve),h(ve)}),r.updateCachedGrabbedEles())},b=function(ee,ve){if(!(ve.inDragLayer==null&&ve.addToList==null)&&ee.cy().hasCompoundNodes()){var be=ee.ancestors().orphans();if(!be.same(ee)){var we=be.descendants().spawnSelf().merge(be).unmerge(ee).unmerge(ee.descendants()),Oe=we.connectedEdges();ve.inDragLayer&&(Oe.forEach(l),we.forEach(l)),ve.addToList&&we.forEach(function(Ve){d(Ve,ve)})}}},g=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},_=typeof MutationObserver<"u",w=typeof ResizeObserver<"u";_?(r.removeObserver=new MutationObserver(function(Ee){for(var ee=0;ee<Ee.length;ee++){var ve=Ee[ee],be=ve.removedNodes;if(be)for(var we=0;we<be.length;we++){var Oe=be[we];if(Oe===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(Ee){r.destroy()});var x=of(function(){r.cy.resize()},100);_&&(r.styleObserver=new MutationObserver(x),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",x),w&&(r.resizeObserver=new ResizeObserver(x),r.resizeObserver.observe(r.container));var E=function(ee,ve){for(;ee!=null;)ve(ee),ee=ee.parentNode},O=function(){r.invalidateContainerClientCoordsCache()};E(r.container,function(Ee){r.registerBinding(Ee,"transitionend",O),r.registerBinding(Ee,"animationend",O),r.registerBinding(Ee,"scroll",O)}),r.registerBinding(r.container,"contextmenu",function(Ee){Ee.preventDefault()});var T=function(){return r.selection[4]!==0},C=function(ee){for(var ve=r.findContainerClientCoords(),be=ve[0],we=ve[1],Oe=ve[2],Ve=ve[3],Se=ee.touches?ee.touches:[ee],We=!1,Be=0;Be<Se.length;Be++){var Ye=Se[Be];if(be<=Ye.clientX&&Ye.clientX<=be+Oe&&we<=Ye.clientY&&Ye.clientY<=we+Ve){We=!0;break}}if(!We)return!1;for(var ot=r.container,et=ee.target,Ue=et.parentNode,ft=!1;Ue;){if(Ue===ot){ft=!0;break}Ue=Ue.parentNode}return!!ft};r.registerBinding(r.container,"mousedown",function(ee){if(C(ee)&&!(r.hoverData.which===1&&ee.which!==1)){ee.preventDefault(),g(),r.hoverData.capture=!0,r.hoverData.which=ee.which;var ve=r.cy,be=[ee.clientX,ee.clientY],we=r.projectIntoViewport(be[0],be[1]),Oe=r.selection,Ve=r.findNearestElements(we[0],we[1],!0,!1),Se=Ve[0],We=r.dragData.possibleDragElements;r.hoverData.mdownPos=we,r.hoverData.mdownGPos=be;var Be=function(st){return{originalEvent:ee,type:st,position:{x:we[0],y:we[1]}}},Ye=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var st=r.hoverData.down;st?st.emit(Be("taphold")):ve.emit(Be("taphold"))}},r.tapholdDuration)};if(ee.which==3){r.hoverData.cxtStarted=!0;var ot={originalEvent:ee,type:"cxttapstart",position:{x:we[0],y:we[1]}};Se?(Se.activate(),Se.emit(ot),r.hoverData.down=Se):ve.emit(ot),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(ee.which==1){Se&&Se.activate();{if(Se!=null&&r.nodeIsGrabbable(Se)){var et=function(st){st.emit(Be("grab"))};if(f(Se),!Se.selected())We=r.dragData.possibleDragElements=ve.collection(),m(Se,{addToList:We}),Se.emit(Be("grabon")).emit(Be("grab"));else{We=r.dragData.possibleDragElements=ve.collection();var Ue=ve.$(function(ft){return ft.isNode()&&ft.selected()&&r.nodeIsGrabbable(ft)});p(Ue,{addToList:We}),Se.emit(Be("grabon")),Ue.forEach(et)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Se,r.hoverData.downs=Ve,r.hoverData.downTime=new Date().getTime()}i(Se,["mousedown","tapstart","vmousedown"],ee,{x:we[0],y:we[1]}),Se==null?(Oe[4]=1,r.data.bgActivePosistion={x:we[0],y:we[1]},r.redrawHint("select",!0),r.redraw()):Se.pannable()&&(Oe[4]=1),Ye()}Oe[0]=Oe[2]=we[0],Oe[1]=Oe[3]=we[1]}},!1);var P=n(r.container);r.registerBinding([e,P],"mousemove",function(ee){var ve=r.hoverData.capture;if(!(!ve&&!C(ee))){var be=!1,we=r.cy,Oe=we.zoom(),Ve=[ee.clientX,ee.clientY],Se=r.projectIntoViewport(Ve[0],Ve[1]),We=r.hoverData.mdownPos,Be=r.hoverData.mdownGPos,Ye=r.selection,ot=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(ot=r.findNearestElement(Se[0],Se[1],!0,!1));var et=r.hoverData.last,Ue=r.hoverData.down,ft=[Se[0]-Ye[2],Se[1]-Ye[3]],st=r.dragData.possibleDragElements,Pt;if(Be){var Ct=Ve[0]-Be[0],bt=Ct*Ct,vt=Ve[1]-Be[1],It=vt*vt,Dt=bt+It;r.hoverData.isOverThresholdDrag=Pt=Dt>=r.desktopTapThreshold2}var er=o(ee);Pt&&(r.hoverData.tapholdCancelled=!0);var mr=function(){var zr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];zr.length===0?(zr.push(ft[0]),zr.push(ft[1])):(zr[0]+=ft[0],zr[1]+=ft[1])};be=!0,i(ot,["mousemove","vmousemove","tapdrag"],ee,{x:Se[0],y:Se[1]});var pt=function(zr){return{originalEvent:ee,type:zr,position:{x:Se[0],y:Se[1]}}},Nt=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||we.emit(pt("boxstart")),Ye[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Pt){var or=pt("cxtdrag");Ue?Ue.emit(or):we.emit(or),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||ot!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(pt("cxtdragout")),r.hoverData.cxtOver=ot,ot&&ot.emit(pt("cxtdragover")))}}else if(r.hoverData.dragging){if(be=!0,we.panningEnabled()&&we.userPanningEnabled()){var hr;if(r.hoverData.justStartedPan){var Ar=r.hoverData.mdownPos;hr={x:(Se[0]-Ar[0])*Oe,y:(Se[1]-Ar[1])*Oe},r.hoverData.justStartedPan=!1}else hr={x:ft[0]*Oe,y:ft[1]*Oe};we.panBy(hr),we.emit(pt("dragpan")),r.hoverData.dragged=!0}Se=r.projectIntoViewport(ee.clientX,ee.clientY)}else if(Ye[4]==1&&(Ue==null||Ue.pannable())){if(Pt){if(!r.hoverData.dragging&&we.boxSelectionEnabled()&&(er||!we.panningEnabled()||!we.userPanningEnabled()))Nt();else if(!r.hoverData.selecting&&we.panningEnabled()&&we.userPanningEnabled()){var Sr=a(Ue,r.hoverData.downs);Sr&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Ye[4]=0,r.data.bgActivePosistion=yu(We),r.redrawHint("select",!0),r.redraw())}Ue&&Ue.pannable()&&Ue.active()&&Ue.unactivate()}}else{if(Ue&&Ue.pannable()&&Ue.active()&&Ue.unactivate(),(!Ue||!Ue.grabbed())&&ot!=et&&(et&&i(et,["mouseout","tapdragout"],ee,{x:Se[0],y:Se[1]}),ot&&i(ot,["mouseover","tapdragover"],ee,{x:Se[0],y:Se[1]}),r.hoverData.last=ot),Ue)if(Pt){if(we.boxSelectionEnabled()&&er)Ue&&Ue.grabbed()&&(y(st),Ue.emit(pt("freeon")),st.emit(pt("free")),r.dragData.didDrag&&(Ue.emit(pt("dragfreeon")),st.emit(pt("dragfree")))),Nt();else if(Ue&&Ue.grabbed()&&r.nodeIsDraggable(Ue)){var Yt=!r.dragData.didDrag;Yt&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||p(st,{inDragLayer:!0});var Xt={x:0,y:0};if(Fe(ft[0])&&Fe(ft[1])&&(Xt.x+=ft[0],Xt.y+=ft[1],Yt)){var jt=r.hoverData.dragDelta;jt&&Fe(jt[0])&&Fe(jt[1])&&(Xt.x+=jt[0],Xt.y+=jt[1])}r.hoverData.draggingEles=!0,st.silentShift(Xt).emit(pt("position")).emit(pt("drag")),r.redrawHint("drag",!0),r.redraw()}}else mr();be=!0}if(Ye[2]=Se[0],Ye[3]=Se[1],be)return ee.stopPropagation&&ee.stopPropagation(),ee.preventDefault&&ee.preventDefault(),!1}},!1);var R,k,I;r.registerBinding(e,"mouseup",function(ee){if(!(r.hoverData.which===1&&ee.which!==1&&r.hoverData.capture)){var ve=r.hoverData.capture;if(ve){r.hoverData.capture=!1;var be=r.cy,we=r.projectIntoViewport(ee.clientX,ee.clientY),Oe=r.selection,Ve=r.findNearestElement(we[0],we[1],!0,!1),Se=r.dragData.possibleDragElements,We=r.hoverData.down,Be=o(ee);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,We&&We.unactivate();var Ye=function(Ct){return{originalEvent:ee,type:Ct,position:{x:we[0],y:we[1]}}};if(r.hoverData.which===3){var ot=Ye("cxttapend");if(We?We.emit(ot):be.emit(ot),!r.hoverData.cxtDragged){var et=Ye("cxttap");We?We.emit(et):be.emit(et)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(Ve,["mouseup","tapend","vmouseup"],ee,{x:we[0],y:we[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(We,["click","tap","vclick"],ee,{x:we[0],y:we[1]}),k=!1,ee.timeStamp-I<=be.multiClickDebounceTime()?(R&&clearTimeout(R),k=!0,I=null,i(We,["dblclick","dbltap","vdblclick"],ee,{x:we[0],y:we[1]})):(R=setTimeout(function(){k||i(We,["oneclick","onetap","voneclick"],ee,{x:we[0],y:we[1]})},be.multiClickDebounceTime()),I=ee.timeStamp)),We==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!o(ee)&&(be.$(t).unselect(["tapunselect"]),Se.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Se=be.collection()),Ve==We&&!r.dragData.didDrag&&!r.hoverData.selecting&&Ve!=null&&Ve._private.selectable&&(r.hoverData.dragging||(be.selectionType()==="additive"||Be?Ve.selected()?Ve.unselect(["tapunselect"]):Ve.select(["tapselect"]):Be||(be.$(t).unmerge(Ve).unselect(["tapunselect"]),Ve.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Ue=be.collection(r.getAllInBox(Oe[0],Oe[1],Oe[2],Oe[3]));r.redrawHint("select",!0),Ue.length>0&&r.redrawHint("eles",!0),be.emit(Ye("boxend"));var ft=function(Ct){return Ct.selectable()&&!Ct.selected()};be.selectionType()==="additive"||Be||be.$(t).unmerge(Ue).unselect(),Ue.emit(Ye("box")).stdFilter(ft).select().emit(Ye("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!Oe[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var st=We&&We.grabbed();y(Se),st&&(We.emit(Ye("freeon")),Se.emit(Ye("free")),r.dragData.didDrag&&(We.emit(Ye("dragfreeon")),Se.emit(Ye("dragfree"))))}}Oe[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var M=[],j=4,L,F=1e5,z=function(ee,ve){for(var be=0;be<ee.length;be++)if(ee[be]%ve!==0)return!1;return!0},V=function(ee){for(var ve=Math.abs(ee[0]),be=1;be<ee.length;be++)if(Math.abs(ee[be])!==ve)return!1;return!0},G=function(ee){var ve=!1,be=ee.deltaY;if(be==null&&(ee.wheelDeltaY!=null?be=ee.wheelDeltaY/4:ee.wheelDelta!=null&&(be=ee.wheelDelta/4)),be!==0){if(L==null)if(M.length>=j){var we=M;if(L=z(we,5),!L){var Oe=Math.abs(we[0]);L=V(we)&&Oe>5}if(L)for(var Ve=0;Ve<we.length;Ve++)F=Math.min(Math.abs(we[Ve]),F)}else M.push(be),ve=!0;else L&&(F=Math.min(Math.abs(be),F));if(!r.scrollingPage){var Se=r.cy,We=Se.zoom(),Be=Se.pan(),Ye=r.projectIntoViewport(ee.clientX,ee.clientY),ot=[Ye[0]*We+Be.x,Ye[1]*We+Be.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||T()){ee.preventDefault();return}if(Se.panningEnabled()&&Se.userPanningEnabled()&&Se.zoomingEnabled()&&Se.userZoomingEnabled()){ee.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var et;ve&&Math.abs(be)>5&&(be=Mb(be)*5),et=be/-250,L&&(et/=F,et*=3),et=et*r.wheelSensitivity;var Ue=ee.deltaMode===1;Ue&&(et*=33);var ft=Se.zoom()*Math.pow(10,et);ee.type==="gesturechange"&&(ft=r.gestureStartZoom*ee.scale),Se.zoom({level:ft,renderedPosition:{x:ot[0],y:ot[1]}}),Se.emit({type:ee.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:ee,position:{x:Ye[0],y:Ye[1]}})}}}};r.registerBinding(r.container,"wheel",G,!0),r.registerBinding(e,"scroll",function(ee){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(ee){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||ee.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(Ee){r.hasTouchStarted||G(Ee)},!0),r.registerBinding(r.container,"mouseout",function(ee){var ve=r.projectIntoViewport(ee.clientX,ee.clientY);r.cy.emit({originalEvent:ee,type:"mouseout",position:{x:ve[0],y:ve[1]}})},!1),r.registerBinding(r.container,"mouseover",function(ee){var ve=r.projectIntoViewport(ee.clientX,ee.clientY);r.cy.emit({originalEvent:ee,type:"mouseover",position:{x:ve[0],y:ve[1]}})},!1);var Y,ie,W,H,Q,J,ne,K,$,Z,ae,se,fe,ge=function(ee,ve,be,we){return Math.sqrt((be-ee)*(be-ee)+(we-ve)*(we-ve))},ye=function(ee,ve,be,we){return(be-ee)*(be-ee)+(we-ve)*(we-ve)},pe;r.registerBinding(r.container,"touchstart",pe=function(ee){if(r.hasTouchStarted=!0,!!C(ee)){g(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var ve=r.cy,be=r.touchData.now,we=r.touchData.earlier;if(ee.touches[0]){var Oe=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);be[0]=Oe[0],be[1]=Oe[1]}if(ee.touches[1]){var Oe=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);be[2]=Oe[0],be[3]=Oe[1]}if(ee.touches[2]){var Oe=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);be[4]=Oe[0],be[5]=Oe[1]}var Ve=function(er){return{originalEvent:ee,type:er,position:{x:be[0],y:be[1]}}};if(ee.touches[1]){r.touchData.singleTouchMoved=!0,y(r.dragData.touchDragEles);var Se=r.findContainerClientCoords();$=Se[0],Z=Se[1],ae=Se[2],se=Se[3],Y=ee.touches[0].clientX-$,ie=ee.touches[0].clientY-Z,W=ee.touches[1].clientX-$,H=ee.touches[1].clientY-Z,fe=0<=Y&&Y<=ae&&0<=W&&W<=ae&&0<=ie&&ie<=se&&0<=H&&H<=se;var We=ve.pan(),Be=ve.zoom();Q=ge(Y,ie,W,H),J=ye(Y,ie,W,H),ne=[(Y+W)/2,(ie+H)/2],K=[(ne[0]-We.x)/Be,(ne[1]-We.y)/Be];var Ye=200,ot=Ye*Ye;if(J<ot&&!ee.touches[2]){var et=r.findNearestElement(be[0],be[1],!0,!0),Ue=r.findNearestElement(be[2],be[3],!0,!0);et&&et.isNode()?(et.activate().emit(Ve("cxttapstart")),r.touchData.start=et):Ue&&Ue.isNode()?(Ue.activate().emit(Ve("cxttapstart")),r.touchData.start=Ue):ve.emit(Ve("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(ee.touches[2])ve.boxSelectionEnabled()&&ee.preventDefault();else if(!ee.touches[1]){if(ee.touches[0]){var ft=r.findNearestElements(be[0],be[1],!0,!0),st=ft[0];if(st!=null&&(st.activate(),r.touchData.start=st,r.touchData.starts=ft,r.nodeIsGrabbable(st))){var Pt=r.dragData.touchDragEles=ve.collection(),Ct=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),st.selected()?(Ct=ve.$(function(Dt){return Dt.selected()&&r.nodeIsGrabbable(Dt)}),p(Ct,{addToList:Pt})):m(st,{addToList:Pt}),f(st),st.emit(Ve("grabon")),Ct?Ct.forEach(function(Dt){Dt.emit(Ve("grab"))}):st.emit(Ve("grab"))}i(st,["touchstart","tapstart","vmousedown"],ee,{x:be[0],y:be[1]}),st==null&&(r.data.bgActivePosistion={x:Oe[0],y:Oe[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],ee,{x:be[0],y:be[1]})},r.tapholdDuration)}}if(ee.touches.length>=1){for(var bt=r.touchData.startPosition=[null,null,null,null,null,null],vt=0;vt<be.length;vt++)bt[vt]=we[vt]=be[vt];var It=ee.touches[0];r.touchData.startGPosition=[It.clientX,It.clientY]}}},!1);var N;r.registerBinding(e,"touchmove",N=function(ee){var ve=r.touchData.capture;if(!(!ve&&!C(ee))){var be=r.selection,we=r.cy,Oe=r.touchData.now,Ve=r.touchData.earlier,Se=we.zoom();if(ee.touches[0]){var We=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Oe[0]=We[0],Oe[1]=We[1]}if(ee.touches[1]){var We=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Oe[2]=We[0],Oe[3]=We[1]}if(ee.touches[2]){var We=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Oe[4]=We[0],Oe[5]=We[1]}var Be=function(an){return{originalEvent:ee,type:an,position:{x:Oe[0],y:Oe[1]}}},Ye=r.touchData.startGPosition,ot;if(ve&&ee.touches[0]&&Ye){for(var et=[],Ue=0;Ue<Oe.length;Ue++)et[Ue]=Oe[Ue]-Ve[Ue];var ft=ee.touches[0].clientX-Ye[0],st=ft*ft,Pt=ee.touches[0].clientY-Ye[1],Ct=Pt*Pt,bt=st+Ct;ot=bt>=r.touchTapThreshold2}if(ve&&r.touchData.cxt){ee.preventDefault();var vt=ee.touches[0].clientX-$,It=ee.touches[0].clientY-Z,Dt=ee.touches[1].clientX-$,er=ee.touches[1].clientY-Z,mr=ye(vt,It,Dt,er),pt=mr/J,Nt=150,or=Nt*Nt,hr=1.5,Ar=hr*hr;if(pt>=Ar||mr>=or){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Sr=Be("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(Sr),r.touchData.start=null):we.emit(Sr)}}if(ve&&r.touchData.cxt){var Sr=Be("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Sr):we.emit(Sr),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Yt=r.findNearestElement(Oe[0],Oe[1],!0,!0);(!r.touchData.cxtOver||Yt!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit(Be("cxtdragout")),r.touchData.cxtOver=Yt,Yt&&Yt.emit(Be("cxtdragover")))}else if(ve&&ee.touches[2]&&we.boxSelectionEnabled())ee.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||we.emit(Be("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,be[4]=1,!be||be.length===0||be[0]===void 0?(be[0]=(Oe[0]+Oe[2]+Oe[4])/3,be[1]=(Oe[1]+Oe[3]+Oe[5])/3,be[2]=(Oe[0]+Oe[2]+Oe[4])/3+1,be[3]=(Oe[1]+Oe[3]+Oe[5])/3+1):(be[2]=(Oe[0]+Oe[2]+Oe[4])/3,be[3]=(Oe[1]+Oe[3]+Oe[5])/3),r.redrawHint("select",!0),r.redraw();else if(ve&&ee.touches[1]&&!r.touchData.didSelect&&we.zoomingEnabled()&&we.panningEnabled()&&we.userZoomingEnabled()&&we.userPanningEnabled()){ee.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Xt=r.dragData.touchDragEles;if(Xt){r.redrawHint("drag",!0);for(var jt=0;jt<Xt.length;jt++){var In=Xt[jt]._private;In.grabbed=!1,In.rscratch.inDragLayer=!1}}var zr=r.touchData.start,vt=ee.touches[0].clientX-$,It=ee.touches[0].clientY-Z,Dt=ee.touches[1].clientX-$,er=ee.touches[1].clientY-Z,Ro=ge(vt,It,Dt,er),Aa=Ro/Q;if(fe){var Ra=vt-Y,to=It-ie,ka=Dt-W,Ia=er-H,Da=(Ra+ka)/2,Ma=(to+Ia)/2,pi=we.zoom(),Ft=pi*Aa,Mt=we.pan(),ko=K[0]*pi+Mt.x,Io=K[1]*pi+Mt.y,Xu={x:-Ft/pi*(ko-Mt.x-Da)+ko,y:-Ft/pi*(Io-Mt.y-Ma)+Io};if(zr&&zr.active()){var Xt=r.dragData.touchDragEles;y(Xt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),zr.unactivate().emit(Be("freeon")),Xt.emit(Be("free")),r.dragData.didDrag&&(zr.emit(Be("dragfreeon")),Xt.emit(Be("dragfree")))}we.viewport({zoom:Ft,pan:Xu,cancelOnFailedZoom:!0}),we.emit(Be("pinchzoom")),Q=Ro,Y=vt,ie=It,W=Dt,H=er,r.pinching=!0}if(ee.touches[0]){var We=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Oe[0]=We[0],Oe[1]=We[1]}if(ee.touches[1]){var We=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Oe[2]=We[0],Oe[3]=We[1]}if(ee.touches[2]){var We=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Oe[4]=We[0],Oe[5]=We[1]}}else if(ee.touches[0]&&!r.touchData.didSelect){var on=r.touchData.start,Na=r.touchData.last,Yt;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Yt=r.findNearestElement(Oe[0],Oe[1],!0,!0)),ve&&on!=null&&ee.preventDefault(),ve&&on!=null&&r.nodeIsDraggable(on))if(ot){var Xt=r.dragData.touchDragEles,Er=!r.dragData.didDrag;Er&&p(Xt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Ri={x:0,y:0};if(Fe(et[0])&&Fe(et[1])&&(Ri.x+=et[0],Ri.y+=et[1],Er)){r.redrawHint("eles",!0);var Ir=r.touchData.dragDelta;Ir&&Fe(Ir[0])&&Fe(Ir[1])&&(Ri.x+=Ir[0],Ri.y+=Ir[1])}r.hoverData.draggingEles=!0,Xt.silentShift(Ri).emit(Be("position")).emit(Be("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Ve[0]&&r.touchData.startPosition[1]==Ve[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Ir=r.touchData.dragDelta=r.touchData.dragDelta||[];Ir.length===0?(Ir.push(et[0]),Ir.push(et[1])):(Ir[0]+=et[0],Ir[1]+=et[1])}if(i(on||Yt,["touchmove","tapdrag","vmousemove"],ee,{x:Oe[0],y:Oe[1]}),(!on||!on.grabbed())&&Yt!=Na&&(Na&&Na.emit(Be("tapdragout")),Yt&&Yt.emit(Be("tapdragover"))),r.touchData.last=Yt,ve)for(var jt=0;jt<Oe.length;jt++)Oe[jt]&&r.touchData.startPosition[jt]&&ot&&(r.touchData.singleTouchMoved=!0);if(ve&&(on==null||on.pannable())&&we.panningEnabled()&&we.userPanningEnabled()){var Ns=a(on,r.touchData.starts);Ns&&(ee.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=yu(r.touchData.startPosition)),r.swipePanning?(we.panBy({x:et[0]*Se,y:et[1]*Se}),we.emit(Be("dragpan"))):ot&&(r.swipePanning=!0,we.panBy({x:ft*Se,y:Pt*Se}),we.emit(Be("dragpan")),on&&(on.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var We=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Oe[0]=We[0],Oe[1]=We[1]}}for(var Ue=0;Ue<Oe.length;Ue++)Ve[Ue]=Oe[Ue];ve&&ee.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var B;r.registerBinding(e,"touchcancel",B=function(ee){var ve=r.touchData.start;r.touchData.capture=!1,ve&&ve.unactivate()});var q,re,ue,le;if(r.registerBinding(e,"touchend",q=function(ee){var ve=r.touchData.start,be=r.touchData.capture;if(be)ee.touches.length===0&&(r.touchData.capture=!1),ee.preventDefault();else return;var we=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var Oe=r.cy,Ve=Oe.zoom(),Se=r.touchData.now,We=r.touchData.earlier;if(ee.touches[0]){var Be=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Se[0]=Be[0],Se[1]=Be[1]}if(ee.touches[1]){var Be=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Se[2]=Be[0],Se[3]=Be[1]}if(ee.touches[2]){var Be=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Se[4]=Be[0],Se[5]=Be[1]}var Ye=function(or){return{originalEvent:ee,type:or,position:{x:Se[0],y:Se[1]}}};ve&&ve.unactivate();var ot;if(r.touchData.cxt){if(ot=Ye("cxttapend"),ve?ve.emit(ot):Oe.emit(ot),!r.touchData.cxtDragged){var et=Ye("cxttap");ve?ve.emit(et):Oe.emit(et)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!ee.touches[2]&&Oe.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Ue=Oe.collection(r.getAllInBox(we[0],we[1],we[2],we[3]));we[0]=void 0,we[1]=void 0,we[2]=void 0,we[3]=void 0,we[4]=0,r.redrawHint("select",!0),Oe.emit(Ye("boxend"));var ft=function(or){return or.selectable()&&!or.selected()};Ue.emit(Ye("box")).stdFilter(ft).select().emit(Ye("boxselect")),Ue.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(ve!=null&&ve.unactivate(),ee.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!ee.touches[1]){if(!ee.touches[0]){if(!ee.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var st=r.dragData.touchDragEles;if(ve!=null){var Pt=ve._private.grabbed;y(st),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Pt&&(ve.emit(Ye("freeon")),st.emit(Ye("free")),r.dragData.didDrag&&(ve.emit(Ye("dragfreeon")),st.emit(Ye("dragfree")))),i(ve,["touchend","tapend","vmouseup","tapdragout"],ee,{x:Se[0],y:Se[1]}),ve.unactivate(),r.touchData.start=null}else{var Ct=r.findNearestElement(Se[0],Se[1],!0,!0);i(Ct,["touchend","tapend","vmouseup","tapdragout"],ee,{x:Se[0],y:Se[1]})}var bt=r.touchData.startPosition[0]-Se[0],vt=bt*bt,It=r.touchData.startPosition[1]-Se[1],Dt=It*It,er=vt+Dt,mr=er*Ve*Ve;r.touchData.singleTouchMoved||(ve||Oe.$(":selected").unselect(["tapunselect"]),i(ve,["tap","vclick"],ee,{x:Se[0],y:Se[1]}),re=!1,ee.timeStamp-le<=Oe.multiClickDebounceTime()?(ue&&clearTimeout(ue),re=!0,le=null,i(ve,["dbltap","vdblclick"],ee,{x:Se[0],y:Se[1]})):(ue=setTimeout(function(){re||i(ve,["onetap","voneclick"],ee,{x:Se[0],y:Se[1]})},Oe.multiClickDebounceTime()),le=ee.timeStamp)),ve!=null&&!r.dragData.didDrag&&ve._private.selectable&&mr<r.touchTapThreshold2&&!r.pinching&&(Oe.selectionType()==="single"?(Oe.$(t).unmerge(ve).unselect(["tapunselect"]),ve.select(["tapselect"])):ve.selected()?ve.unselect(["tapunselect"]):ve.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var pt=0;pt<Se.length;pt++)We[pt]=Se[pt];r.dragData.didDrag=!1,ee.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),ee.touches.length<2&&(ee.touches.length===1&&(r.touchData.startGPosition=[ee.touches[0].clientX,ee.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var de=[],xe=function(ee){return{clientX:ee.clientX,clientY:ee.clientY,force:1,identifier:ee.pointerId,pageX:ee.pageX,pageY:ee.pageY,radiusX:ee.width/2,radiusY:ee.height/2,screenX:ee.screenX,screenY:ee.screenY,target:ee.target}},ke=function(ee){return{event:ee,touch:xe(ee)}},Xe=function(ee){de.push(ke(ee))},ze=function(ee){for(var ve=0;ve<de.length;ve++){var be=de[ve];if(be.event.pointerId===ee.pointerId){de.splice(ve,1);return}}},Ge=function(ee){var ve=de.filter(function(be){return be.event.pointerId===ee.pointerId})[0];ve.event=ee,ve.touch=xe(ee)},Le=function(ee){ee.touches=de.map(function(ve){return ve.touch})},Ie=function(ee){return ee.pointerType==="mouse"||ee.pointerType===4};r.registerBinding(r.container,"pointerdown",function(Ee){Ie(Ee)||(Ee.preventDefault(),Xe(Ee),Le(Ee),pe(Ee))}),r.registerBinding(r.container,"pointerup",function(Ee){Ie(Ee)||(ze(Ee),Le(Ee),q(Ee))}),r.registerBinding(r.container,"pointercancel",function(Ee){Ie(Ee)||(ze(Ee),Le(Ee),B(Ee))}),r.registerBinding(r.container,"pointermove",function(Ee){Ie(Ee)||(Ee.preventDefault(),Ge(Ee),Le(Ee),N(Ee))})}};var Po={};Po.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",n,i,o,a,s,this.points)},intersectLine:function(n,i,o,a,s,u,l,c){return Lc(s,u,this.points,n,i,o/2,a/2,l)},checkPoint:function(n,i,o,a,s,u,l,c){return So(n,i,this.points,u,l,a,s,[0,-1],o)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,i,o,a,s,u){return jM(this.points,n,i,o,a,s)}}};Po.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){return WM(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,a,s,u){return ds(e,t,i,o,a,s,n)}}};Po.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=o/2,f=a/2;s=s==="auto"?tC(o,a):s;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+c*e[d*2],y:i+f*e[d*2+1]};var v,p,m,y,b=h.length;for(p=h[b-1],v=0;v<b;v++)m=h[v%b],y=h[(v+1)%b],u[l][v]=Yb(p,m,y,s),p=m,m=y;return u[l]},draw:function(n,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(n,i,o,a,s,u,l,c,f){return YM(s,u,this.points,n,i,o,a,l,this.getOrCreateCorners(n,i,o,a,c,f,"corners"))},checkPoint:function(n,i,o,a,s,u,l,c,f){return qM(n,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,f,"corners"))}}};Po.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Cn(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){return J2(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?ga(i,o):u,u=Math.min(l,c,u);var f=u*2;return!!(So(e,t,this.points,a,s,i,o-f,[0,-1],n)||So(e,t,this.points,a,s,i-f,o,[0,-1],n)||ds(e,t,f,f,a-l+u,s-c+u,n)||ds(e,t,f,f,a+l-u,s-c+u,n)||ds(e,t,f,f,a+l-u,s+c-u,n)||ds(e,t,f,f,a-l+u,s+c-u,n))}}};Po.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Lb(),points:Cn(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,null,a)},generateCutTrianglePts:function(e,t,n,i,o){var a=o==="auto"?this.cornerLength:o,s=t/2,u=e/2,l=n-u,c=n+u,f=i-s,h=i+s;return{topLeft:[l,f+a,l+a,f,l+a,f+a],topRight:[c-a,f,c,f+a,c-a,f+a],bottomRight:[c,h-a,c-a,h,c-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}},intersectLine:function(e,t,n,i,o,a,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Lc(o,a,c,e,t)},checkPoint:function(e,t,n,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(So(e,t,this.points,a,s,i,o-2*l,[0,-1],n)||So(e,t,this.points,a,s,i-2*l,o,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return Un(e,t,c.topLeft)||Un(e,t,c.topRight)||Un(e,t,c.bottomRight)||Un(e,t,c.bottomLeft)}}};Po.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Cn(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){var l=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),d=function(m){var y=Eu({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},l),b=Eu({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},c),g=Eu({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},f);return[m[0],m[1],y.x,y.y,b.x,b.y,g.x,g.y,m[4],m[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return Lc(o,a,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,a=e/2,s=n-a,u=n+a,l=i-o,c=i+o,f=g0(e,t),h=f.heightOffset,d=f.widthOffset,v=f.ctrlPtOffsetPct*e,p={topLeft:[s,l+h,s+v,l,s+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-d,c],bottomLeft:[s+d,c,s+v,c,s,c-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,i,o,a,s,u){var l=g0(i,o),c=l.heightOffset,f=l.widthOffset;if(So(e,t,this.points,a,s,i,o-2*c,[0,-1],n)||So(e,t,this.points,a,s,i-2*f,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,o,a,s),d=function(O,T,C){var P=C[4],R=C[2],k=C[0],I=C[5],M=C[1],j=Math.min(P,k),L=Math.max(P,k),F=Math.min(I,M),z=Math.max(I,M);if(j<=O&&O<=L&&F<=T&&T<=z){var V=XM(P,R,k),G=UM(V[0],V[1],V[2],O),Y=G.filter(function(ie){return 0<=ie&&ie<=1});if(Y.length>0)return Y[0]}return null},v=Object.keys(h),p=0;p<v.length;p++){var m=v[p],y=h[m],b=d(e,t,y);if(b!=null){var g=y[5],_=y[3],w=y[1],x=Wr(g,_,w,b);if(y.isTop&&x<=t||y.isBottom&&t<=x)return!0}}return!1}}};Po.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Cn(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){var l=e-(n/2+s),c=t-(i/2+s),f=c,h=e+(n/2+s),d=ra(o,a,e,t,l,c,h,f,!1);return d.length>0?d:J2(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){u=u==="auto"?ga(i,o):u;var l=2*u;if(So(e,t,this.points,a,s,i,o-l,[0,-1],n)||So(e,t,this.points,a,s,i-l,o,[0,-1],n))return!0;var c=i/2+2*n,f=o/2+2*n,h=[a-c,s-f,a-c,s,a+c,s,a+c,s-f];return!!(Un(e,t,h)||ds(e,t,l,l,a+i/2-u,s+o/2-u,n)||ds(e,t,l,l,a-i/2+u,s+o/2-u,n))}}};Po.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Cn(3,0)),this.generateRoundPolygon("round-triangle",Cn(3,0)),this.generatePolygon("rectangle",Cn(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Cn(5,0)),this.generateRoundPolygon("round-pentagon",Cn(5,0)),this.generatePolygon("hexagon",Cn(6,0)),this.generateRoundPolygon("round-hexagon",Cn(6,0)),this.generatePolygon("heptagon",Cn(7,0)),this.generateRoundPolygon("round-heptagon",Cn(7,0)),this.generatePolygon("octagon",Cn(8,0)),this.generateRoundPolygon("round-octagon",Cn(8,0));var n=new Array(20);{var i=p0(5,0),o=p0(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=o[s*2],n[s*4+3]=o[s*2+1]}n=eC(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var cf={};cf.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};cf.redraw=function(r){r=r||$2();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};cf.beforeRender=function(r,e){if(!this.destroyed){e==null&&gr("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var DO=function(e,t,n){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(t,n)};cf.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){DO(r,!0,i);var o=xo();r.render(r.renderOptions);var a=r.lastDrawTime=xo();r.averageRedrawTime===void 0&&(r.averageRedrawTime=a-o),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=a-o;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else DO(r,!1,i);r.skipFrame=!1,Md(t)}};Md(t)}};var c5=function(e){this.init(e)},tP=c5,Hu=tP.prototype;Hu.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Hu.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Zt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Fe(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Hu.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Hu.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};Hu.isHeadless=function(){return!1};[Hb,JC,eP,Wu,Po,cf].forEach(function(r){ct(Hu,r)});var by=1e3/60,rP={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=of(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var f=xo(),h=i.averageRedrawTime,d=i.lastRedrawTime,v=[],p=i.cy.extent(),m=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var y=xo(),b=y-f,g=y-c;if(d<by){var _=by-(l?h:0);if(g>=e.deqFastCost*_)break}else if(l){if(b>=e.deqCost*d||b>=e.deqAvgCost*h)break}else if(g>=e.deqNoDrawCost*by)break;var w=e.deq(n,m,p);if(w.length>0)for(var x=0;x<w.length;x++)v.push(w[x]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,m,p)&&o())},s=e.priority||kb;i.beforeRender(a,s(n))}}}},f5=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nd;xa(this,r),this.idsByKey=new mo,this.keyForId=new mo,this.cachesByLvl=new mo,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Sa(r,[{key:"getIdsFor",value:function(t){t==null&&gr("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new zu,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(o,n),this.keyForId.set(n,o)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);return i!==o}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,o=n.get(t);return o||(o=new mo,n.set(t,o),i.push(t)),o}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),o=this.getCache(i,n);return o!=null&&this.updateKeyMappingFor(t),o}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),o=this.getCache(i,n);return o}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var o=this.getKey(t);this.setCache(o,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var o=this.doesEleInvalidateKey(t);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}])})(),MO=25,Ch=50,yd=-4,A0=3,nP=7.99,h5=8,d5=1024,v5=1024,p5=1024,g5=.2,y5=.8,m5=10,b5=.15,_5=.1,w5=.9,E5=.9,O5=100,x5=1,bu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},S5=rn({getKey:null,doesEleInvalidateKey:Nd,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:H2,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Bl=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=S5(t);ct(n,i),n.lookup=new f5(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Ur=Bl.prototype;Ur.reasons=bu;Ur.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Ur.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Ur.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new af(function(t,n){return n.reqs-t.reqs});return e};Ur.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Ur.getElement=function(r,e,t,n,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!o.allowEdgeTxrCaching&&r.isEdge()||!o.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Db(s*t))),n<yd)n=yd;else if(s>=nP||n>A0)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=a.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,h))return null;var d=u.get(r,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(c<=MO?v=MO:c<=Ch?v=Ch:v=Math.ceil(c/Ch)*Ch,c>p5||f>v5)return null;var p=o.getTextureQueue(v),m=p[p.length-2],y=function(){return o.recycleTexture(v,f)||o.addTexture(v,f)};m||(m=p[p.length-1]),m||(m=y()),m.width-m.usedWidth<f&&(m=y());for(var b=function(j){return j&&j.scaledLabelShown===h},g=i&&i===bu.dequeue,_=i&&i===bu.highQuality,w=i&&i===bu.downscale,x,E=n+1;E<=A0;E++){var O=u.get(r,E);if(O){x=O;break}}var T=x&&x.level===n+1?x:null,C=function(){m.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,m.usedWidth,0,f,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,v),b(T))C();else if(b(x))if(_){for(var P=x.level;P>n;P--)T=o.getElement(r,e,t,P,bu.downscale);C()}else return o.queueElement(r,x.level-1),x;else{var R;if(!g&&!_&&!w)for(var k=n-1;k>=yd;k--){var I=u.get(r,k);if(I){R=I;break}}if(b(R))return o.queueElement(r,n),R;m.context.translate(m.usedWidth,0),m.context.scale(l,l),this.drawElement(m.context,r,e,h,!1),m.context.scale(1/l,1/l),m.context.translate(-m.usedWidth,0)}return d={x:m.usedWidth,texture:m,level:n,scale:l,width:f,height:c,scaledLabelShown:h},m.usedWidth+=Math.ceil(f+h5),m.eleCaches.push(d),u.set(r,n,d),o.checkTextureFullness(m),d};Ur.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Ur.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var o=yd;o<=A0;o++){var a=t.getForCachedKey(r,o);a&&n.push(a)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};Ur.checkTextureUtility=function(r){r.invalidatedWidth>=g5*r.width&&this.retireTexture(r)};Ur.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>y5&&r.fullnessChecks>=m5?pa(t,r):r.fullnessChecks++};Ur.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;pa(n,r),r.retired=!0;for(var o=r.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}Ib(o);var u=e.getRetiredTextureQueue(t);u.push(r)};Ur.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(d5,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Ur.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Ib(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),pa(i,a),n.push(a),a}};Ur.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),o=this.getKey(r),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(r),a.reqs++,n.updateItem(a);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:o};n.push(s),i[o]=s}};Ur.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<x5&&t.size()>0;a++){var s=t.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,bu.dequeue)}return i};Ur.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),o=n[i];o!=null&&(o.eles.length===1?(o.reqs=Rb,t.updateItem(o),t.pop(),n[i]=null):o.eles.unmerge(r))};Ur.onDequeue=function(r){this.onDequeues.push(r)};Ur.offDequeue=function(r){pa(this.onDequeues,r)};Ur.setupDequeueing=rP.setupDequeueing({deqRedrawThreshold:O5,deqCost:b5,deqAvgCost:_5,deqNoDrawCost:w5,deqFastCost:E5,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++)for(var a=t[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(Nb(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var T5=1,Kl=-4,Gd=2,C5=3.99,P5=50,A5=50,R5=.15,k5=.1,I5=.9,D5=.9,M5=1,NO=250,N5=4e3*4e3,LO=32767,L5=!0,iP=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=xo()-2*NO,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=of(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},A5),n.beforeRender(function(a,s){s-t.lastInvalidationTime<=NO?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};t.layersQueue=new af(o),t.setupDequeueing()},nn=iP.prototype,jO=0,j5=Math.pow(2,53)-1;nn.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),o=this.renderer.makeOffscreenCanvas(n,i),a={id:jO=++jO%j5,bb:r,level:e,width:n,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(t,t),s.translate(u,l),a};nn.getLayers=function(r,e,t){var n=this,i=n.renderer,o=i.cy,a=o.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Db(a*e)),t<Kl)t=Kl;else if(a>=C5||t>Gd)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,h=n.levelIsComplete(t,r),d,v=function(){var C=function(M){if(n.validateLayersElesOrdering(M,r),n.levelIsComplete(M,r))return d=u[M],!0},P=function(M){if(!d)for(var j=t+M;Kl<=j&&j<=Gd&&!C(j);j+=M);};P(1),P(-1);for(var R=c.length-1;R>=0;R--){var k=c[R];k.invalid&&pa(c,k)}};if(!h)v();else return c;var p=function(){if(!f){f=Rn();for(var C=0;C<r.length;C++)MM(f,r[C].boundingBox())}return f},m=function(C){C=C||{};var P=C.after;p();var R=Math.ceil(f.w*l),k=Math.ceil(f.h*l);if(R>LO||k>LO)return null;var I=R*k;if(I>N5)return null;var M=n.makeLayer(f,t);if(P!=null){var j=c.indexOf(P)+1;c.splice(j,0,M)}else(C.insert===void 0||C.insert)&&c.unshift(M);return M};if(n.skipping&&!s)return null;for(var y=null,b=r.length/T5,g=!s,_=0;_<r.length;_++){var w=r[_],x=w._private.rscratch,E=x.imgLayerCaches=x.imgLayerCaches||{},O=E[t];if(O){y=O;continue}if((!y||y.eles.length>=b||!Q2(y.bb,w.boundingBox()))&&(y=m({insert:!0,after:y}),!y))return null;d||g?n.queueLayer(y,w):n.drawEleInLayer(y,w,t,e),y.eles.push(w),E[t]=y}return d||(g?null:c)};nn.getEleLevelForLayerLevel=function(r,e){return r};nn.drawEleInLayer=function(r,e,t,n){var i=this,o=this.renderer,a=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,t,L5),o.setImgSmoothing(a,!0))};nn.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,o=0;o<n.length;o++){var a=n[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};nn.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};nn.updateElementsInLayers=function(r,e){for(var t=this,n=ef(r[0]),i=0;i<r.length;i++)for(var o=n?null:r[i],a=n?r[i]:r[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Kl;l<=Gd;l++){var c=u[l];c&&(o&&t.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};nn.haveLayers=function(){for(var r=this,e=!1,t=Kl;t<=Gd;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};nn.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=xo(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,o){e.invalidateLayer(n)}))};nn.invalidateLayer=function(r){if(this.lastInvalidationTime=xo(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];pa(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var o=t[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};nn.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,o){var a=n.replacement;if(a||(a=n.replacement=e.makeLayer(n.bb,n.level),a.replaces=n,a.eles=n.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};nn.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};nn.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,o=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};nn.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<M5&&t.size()!==0;){var o=t.peek();if(o.replacement){t.pop();continue}if(o.replaces&&o!==o.replaces.replacement){t.pop();continue}if(o.invalid){t.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,r),i++),n.length===0&&n.push(!0),o.elesQueue.length===0&&(t.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return n};nn.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var o=0;o<r.eles.length;o++){var a=r.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};nn.requestRedraw=of(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);nn.setupDequeueing=rP.setupDequeueing({deqRedrawThreshold:P5,deqCost:R5,deqAvgCost:k5,deqNoDrawCost:I5,deqFastCost:D5,deq:function(e,t){return e.dequeue(t)},onDeqd:kb,shouldRedraw:H2,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var oP={},FO;function F5(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function B5(r,e,t){for(var n,i=0;i<e.length;i++){var o=e[i];i===0&&(n=o),r.lineTo(o.x,o.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function BO(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var o=n[i];r.lineTo(o.x,o.y)}var a=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];r.lineTo(o.x,o.y)}r.closePath&&r.closePath()}function U5(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var o=e,a=o[0];r.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function z5(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}oP.arrowShapeImpl=function(r){return(FO||(FO={polygon:F5,"triangle-backcurve":B5,"triangle-tee":BO,"circle-triangle":U5,"triangle-cross":BO,circle:z5}))[r]};var eo={};eo.drawElement=function(r,e,t,n,i,o){var a=this;e.isNode()?a.drawNode(r,e,t,n,i,o):a.drawEdge(r,e,t,n,i,o)};eo.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};eo.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};eo.drawCachedElementPortion=function(r,e,t,n,i,o,a,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,o);if(c!=null){var f=s(u,e);if(f===0)return;var h=a(u,e),d=l.x1,v=l.y1,p=l.w,m=l.h,y,b,g,_,w;if(h!==0){var x=t.getRotationPoint(e);g=x.x,_=x.y,r.translate(g,_),r.rotate(h),w=u.getImgSmoothing(r),w||u.setImgSmoothing(r,!0);var E=t.getRotationOffset(e);y=E.x,b=E.y}else y=d,b=v;var O;f!==1&&(O=r.globalAlpha,r.globalAlpha=O*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,b,p,m),f!==1&&(r.globalAlpha=O),h!==0&&(r.rotate(-h),r.translate(-g,-_),w||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var V5=function(){return 0},G5=function(e,t){return e.getTextAngle(t,null)},q5=function(e,t){return e.getTextAngle(t,"source")},W5=function(e,t){return e.getTextAngle(t,"target")},H5=function(e,t){return t.effectiveOpacity()},_y=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};eo.drawCachedElement=function(r,e,t,n,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=e.boundingBox(),d=o===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||Nb(h,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;a.drawElementUnderlay(r,e),a.drawCachedElementPortion(r,e,u,t,i,d,V5,H5),(!v||!p)&&a.drawCachedElementPortion(r,e,l,t,i,d,G5,_y),v&&!p&&(a.drawCachedElementPortion(r,e,c,t,i,d,q5,_y),a.drawCachedElementPortion(r,e,f,t,i,d,W5,_y)),a.drawElementOverlay(r,e)}};eo.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};eo.drawCachedElements=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(r,a,t,n)}};eo.drawCachedNodes=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(r,a,t,n)}};eo.drawLayeredElements=function(r,e,t,n){var i=this,o=i.data.lyrTxrCache.getLayers(e,t);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var Ao={};Ao.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,m=e.pstyle("line-outline-color").value,y=l*c,b=l*c,g=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;f==="straight-triangle"?(a.eleStrokeStyle(r,e,M),a.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=d,r.lineCap=v,a.eleStrokeStyle(r,e,M),a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},_=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(r.lineWidth=d+p,r.lineCap=v,p>0)a.colorStrokeStyle(r,m[0],m[1],m[2],M);else{r.lineCap="butt";return}f==="straight-triangle"?a.drawEdgeTrianglePath(e,r,s.allpts):(a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},w=function(){i&&a.drawEdgeOverlay(r,e)},x=function(){i&&a.drawEdgeUnderlay(r,e)},E=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;a.drawArrowheads(r,e,M)},O=function(){a.drawElementText(r,e,null,n)};r.lineJoin="round";var T=e.pstyle("ghost").value==="yes";if(T){var C=e.pstyle("ghost-offset-x").pfValue,P=e.pstyle("ghost-offset-y").pfValue,R=e.pstyle("ghost-opacity").value,k=y*R;r.translate(C,P),g(k),E(k),r.translate(-C,-P)}else _();x(),g(),E(),w(),O(),t&&r.translate(u.x1,u.y1)}};var aP=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!a?t.lineCap="butt":t.lineCap="round",o.colorStrokeStyle(t,c[0],c[1],c[2],i),o.drawEdgePath(n,t,s.allpts,"solid")}}}};Ao.drawEdgeOverlay=aP("overlay");Ao.drawEdgeUnderlay=aP("underlay");Ao.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===f;h?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=f,i.pathCache=a)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<t.length;d+=4)e.quadraticCurveTo(t[d],t[d+1],t[d+2],t[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var p=Vn(i.roundCorners),m;try{for(p.s();!(m=p.n()).done;){var y=m.value;XC(e,y)}}catch(g){p.e(g)}finally{p.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var b=2;b+1<t.length;b+=2)e.lineTo(t[b],t[b+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};Ao.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var o=[t[i+2]-t[i],t[i+3]-t[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};Ao.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Ao.drawArrowhead=function(r,e,t,n,i,o,a){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),d=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(d*=f);var v=e.pstyle("opacity").value;a===void 0&&(a=v);var p=r.globalCompositeOperation;(a!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,d,n,i,o),r.globalCompositeOperation=p);var m=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,m[0],m[1],m[2],a),s.colorStrokeStyle(r,m[0],m[1],m[2],a),s.drawArrowShape(e,r,c,f,u,d,n,i,o)}}};Ao.drawArrowShape=function(r,e,t,n,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,h,d=e,v={x:a,y:s},p=r.pstyle("arrow-scale").value,m=this.getArrowWidth(n,p),y=l.arrowShapes[i];if(c){var b=l.arrowPathCache=l.arrowPathCache||[],g=ms(i),_=b[g];_!=null?(h=e=_,f=!0):(h=e=new Path2D,b[g]=h)}f||(e.beginPath&&e.beginPath(),c?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,m,u,v,n),e.closePath&&e.closePath()),e=d,c&&(e.translate(a,s),e.rotate(u),e.scale(m,m)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=o/(c?m:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/m,1/m),e.rotate(-u),e.translate(-a,-s))};var $b={};$b.safeDrawImage=function(r,e,t,n,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,o,a,s,u,l)}catch(c){Zt(c)}};$b.drawInscribedImage=function(r,e,t,n,i){var o=this,a=t.position(),s=a.x,u=a.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),d=t.width(),v=t.height(),p=t.padding()*2,m=d+(c(t,"background-width-relative-to","value",n)==="inner"?0:p),y=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:p),b=t._private.rscratch,g=c(t,"background-clip","value",n),_=g==="node",w=c(t,"background-image-opacity","value",n)*i,x=c(t,"background-image-smoothing","value",n),E=t.pstyle("corner-radius").value;E!=="auto"&&(E=t.pstyle("corner-radius").pfValue);var O=e.width||e.cachedW,T=e.height||e.cachedH;(O==null||T==null)&&(document.body.appendChild(e),O=e.cachedW=e.width||e.offsetWidth,T=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var C=O,P=T;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?C=c(t,"background-width","pfValue",n)*m:C=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?P=c(t,"background-height","pfValue",n)*y:P=c(t,"background-height","pfValue",n)),!(C===0||P===0)){if(f==="contain"){var R=Math.min(m/C,y/P);C*=R,P*=R}else if(f==="cover"){var R=Math.max(m/C,y/P);C*=R,P*=R}var k=s-m/2,I=c(t,"background-position-x","units",n),M=c(t,"background-position-x","pfValue",n);I==="%"?k+=(m-C)*M:k+=M;var j=c(t,"background-offset-x","units",n),L=c(t,"background-offset-x","pfValue",n);j==="%"?k+=(m-C)*L:k+=L;var F=u-y/2,z=c(t,"background-position-y","units",n),V=c(t,"background-position-y","pfValue",n);z==="%"?F+=(y-P)*V:F+=V;var G=c(t,"background-offset-y","units",n),Y=c(t,"background-offset-y","pfValue",n);G==="%"?F+=(y-P)*Y:F+=Y,b.pathCache&&(k-=s,F-=u,s=0,u=0);var ie=r.globalAlpha;r.globalAlpha=w;var W=o.getImgSmoothing(r),H=!1;if(x==="no"&&W?(o.setImgSmoothing(r,!1),H=!0):x==="yes"&&!W&&(o.setImgSmoothing(r,!0),H=!0),h==="no-repeat")_&&(r.save(),b.pathCache?r.clip(b.pathCache):(o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,m,y,E,b),r.clip())),o.safeDrawImage(r,e,0,0,O,T,k,F,C,P),_&&r.restore();else{var Q=r.createPattern(e,h);r.fillStyle=Q,o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,m,y,E,b),r.translate(k,F),r.fill(),r.translate(-k,-F)}r.globalAlpha=ie,H&&o.setImgSmoothing(r,W)}};var As={};As.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(Db(t*n));e=Math.pow(2,i)}var o=r.pstyle("font-size").pfValue*e,a=r.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};As.drawElementText=function(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(n==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var d=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(a.drawText(r,e,null,d,o),e.isEdge()&&(a.drawText(r,e,"source",d,o),a.drawText(r,e,"target",d,o))):a.drawText(r,e,i,d,o),t&&r.translate(v.x1,v.y1)};As.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};As.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+a+" "+i+" "+o,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function Y5(r,e,t,n,i){var o=Math.min(n,i),a=o/2,s=e+n/2,u=t+i/2;r.beginPath(),r.arc(s,u,a,0,Math.PI*2),r.closePath()}function UO(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=Math.min(o,n/2,i/2);r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.quadraticCurveTo(e+n,t,e+n,t+a),r.lineTo(e+n,t+i-a),r.quadraticCurveTo(e+n,t+i,e+n-a,t+i),r.lineTo(e+a,t+i),r.quadraticCurveTo(e,t+i,e,t+i-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath()}As.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,o=e?e+"-":"",a=r.pstyle(o+"text-rotation");if(a.strValue==="autorotate"){var s=Bn(i,"labelAngle",e);t=r.isEdge()?s:0}else a.strValue==="none"?t=0:t=a.pfValue;return t};As.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=Bn(a,"labelX",t),l=Bn(a,"labelY",t),c,f,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var d=t?t+"-":"",v=Bn(a,"labelWidth",t),p=Bn(a,"labelHeight",t),m=e.pstyle(d+"text-margin-x").pfValue,y=e.pstyle(d+"text-margin-y").pfValue,b=e.isEdge(),g=e.pstyle("text-halign").value,_=e.pstyle("text-valign").value;b&&(g="center",_="center"),u+=m,l+=y;var w;switch(n?w=this.getTextAngle(e,t):w=0,w!==0&&(c=u,f=l,r.translate(c,f),r.rotate(w),u=0,l=0),_){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var x=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,O=e.pstyle("text-border-width").pfValue,T=e.pstyle("text-background-padding").pfValue,C=e.pstyle("text-background-shape").strValue,P=C==="round-rectangle"||C==="roundrectangle",R=C==="circle",k=2;if(x>0||O>0&&E>0){var I=r.fillStyle,M=r.strokeStyle,j=r.lineWidth,L=e.pstyle("text-background-color").value,F=e.pstyle("text-border-color").value,z=e.pstyle("text-border-style").value,V=x>0,G=O>0&&E>0,Y=u-T;switch(g){case"left":Y-=v;break;case"center":Y-=v/2;break}var ie=l-p-T,W=v+2*T,H=p+2*T;if(V&&(r.fillStyle="rgba(".concat(L[0],",").concat(L[1],",").concat(L[2],",").concat(x*s,")")),G&&(r.strokeStyle="rgba(".concat(F[0],",").concat(F[1],",").concat(F[2],",").concat(E*s,")"),r.lineWidth=O,r.setLineDash))switch(z){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=O/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(P?(r.beginPath(),UO(r,Y,ie,W,H,k)):R?(r.beginPath(),Y5(r,Y,ie,W,H)):(r.beginPath(),r.rect(Y,ie,W,H)),V&&r.fill(),G&&r.stroke(),G&&z==="double"){var Q=O/2;r.beginPath(),P?UO(r,Y+Q,ie+Q,W-2*Q,H-2*Q,k):r.rect(Y+Q,ie+Q,W-2*Q,H-2*Q),r.stroke()}r.fillStyle=I,r.strokeStyle=M,r.lineWidth=j,r.setLineDash&&r.setLineDash([])}var J=2*e.pstyle("text-outline-width").pfValue;if(J>0&&(r.lineWidth=J),e.pstyle("text-wrap").value==="wrap"){var ne=Bn(a,"labelWrapCachedLines",t),K=Bn(a,"labelLineHeight",t),$=v/2,Z=this.getLabelJustification(e);switch(Z==="auto"||(g==="left"?Z==="left"?u+=-v:Z==="center"&&(u+=-$):g==="center"?Z==="left"?u+=-$:Z==="right"&&(u+=$):g==="right"&&(Z==="center"?u+=$:Z==="right"&&(u+=v))),_){case"top":l-=(ne.length-1)*K;break;case"center":case"bottom":l-=(ne.length-1)*K;break}for(var ae=0;ae<ne.length;ae++)J>0&&r.strokeText(ne[ae],u,l),r.fillText(ne[ae],u,l),l+=K}else J>0&&r.strokeText(h,u,l),r.fillText(h,u,l);w!==0&&(r.rotate(-w),r.translate(-c,-f))}}};var Ca={};Ca.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!Fe(f.x)||!Fe(f.y))&&!(o&&!e.visible())){var h=o?e.effectiveOpacity():1,d=a.usePaths(),v,p=!1,m=e.padding();s=e.width()+2*m,u=e.height()+2*m;var y;t&&(y=t,r.translate(-y.x1,-y.y1));for(var b=e.pstyle("background-image"),g=b.value,_=new Array(g.length),w=new Array(g.length),x=0,E=0;E<g.length;E++){var O=g[E],T=_[E]=O!=null&&O!=="none";if(T){var C=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);x++,w[E]=a.getCachedImage(O,C,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var P=e.pstyle("background-blacken").value,R=e.pstyle("border-width").pfValue,k=e.pstyle("background-opacity").value*h,I=e.pstyle("border-color").value,M=e.pstyle("border-style").value,j=e.pstyle("border-join").value,L=e.pstyle("border-cap").value,F=e.pstyle("border-position").value,z=e.pstyle("border-dash-pattern").pfValue,V=e.pstyle("border-dash-offset").pfValue,G=e.pstyle("border-opacity").value*h,Y=e.pstyle("outline-width").pfValue,ie=e.pstyle("outline-color").value,W=e.pstyle("outline-style").value,H=e.pstyle("outline-opacity").value*h,Q=e.pstyle("outline-offset").value,J=e.pstyle("corner-radius").value;J!=="auto"&&(J=e.pstyle("corner-radius").pfValue);var ne=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k;a.eleFillStyle(r,e,Ie)},K=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G;a.colorStrokeStyle(r,I[0],I[1],I[2],Ie)},$=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H;a.colorStrokeStyle(r,ie[0],ie[1],ie[2],Ie)},Z=function(Ie,Ee,ee,ve){var be=a.nodePathCache=a.nodePathCache||[],we=W2(ee==="polygon"?ee+","+ve.join(","):ee,""+Ee,""+Ie,""+J),Oe=be[we],Ve,Se=!1;return Oe!=null?(Ve=Oe,Se=!0,c.pathCache=Ve):(Ve=new Path2D,be[we]=c.pathCache=Ve),{path:Ve,cacheHit:Se}},ae=e.pstyle("shape").strValue,se=e.pstyle("shape-polygon-points").pfValue;if(d){r.translate(f.x,f.y);var fe=Z(s,u,ae,se);v=fe.path,p=fe.cacheHit}var ge=function(){if(!p){var Ie=f;d&&(Ie={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(v||r,Ie.x,Ie.y,s,u,J,c)}d?r.fill(v):r.fill()},ye=function(){for(var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ee=l.backgrounding,ve=0,be=0;be<w.length;be++){var we=e.cy().style().getIndexedStyle(e,"background-image-containment","value",be);if(Ee&&we==="over"||!Ee&&we==="inside"){ve++;continue}_[be]&&w[be].complete&&!w[be].error&&(ve++,a.drawInscribedImage(r,w[be],e,be,Ie))}l.backgrounding=ve!==x,ee!==l.backgrounding&&e.updateStyle(!1)},pe=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasPie(e)&&(a.drawPie(r,e,Ee),Ie&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,J,c)))},N=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasStripe(e)&&(r.save(),d?r.clip(c.pathCache):(a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,J,c),r.clip()),a.drawStripe(r,e,Ee),r.restore(),Ie&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,J,c)))},B=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,Ee=(P>0?P:-P)*Ie,ee=P>0?0:255;P!==0&&(a.colorFillStyle(r,ee,ee,ee,Ee),d?r.fill(v):r.fill())},q=function(){if(R>0){if(r.lineWidth=R,r.lineCap=L,r.lineJoin=j,r.setLineDash)switch(M){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(z),r.lineDashOffset=V;break;case"solid":case"double":r.setLineDash([]);break}if(F!=="center"){if(r.save(),r.lineWidth*=2,F==="inside")d?r.clip(v):r.clip();else{var Ie=new Path2D;Ie.rect(-s/2-R,-u/2-R,s+2*R,u+2*R),Ie.addPath(v),r.clip(Ie,"evenodd")}d?r.stroke(v):r.stroke(),r.restore()}else d?r.stroke(v):r.stroke();if(M==="double"){r.lineWidth=R/3;var Ee=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(v):r.stroke(),r.globalCompositeOperation=Ee}r.setLineDash&&r.setLineDash([])}},re=function(){if(Y>0){if(r.lineWidth=Y,r.lineCap="butt",r.setLineDash)switch(W){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var Ie=f;d&&(Ie={x:0,y:0});var Ee=a.getNodeShape(e),ee=R;F==="inside"&&(ee=0),F==="outside"&&(ee*=2);var ve=(s+ee+(Y+Q))/s,be=(u+ee+(Y+Q))/u,we=s*ve,Oe=u*be,Ve=a.nodeShapes[Ee].points,Se;if(d){var We=Z(we,Oe,Ee,Ve);Se=We.path}if(Ee==="ellipse")a.drawEllipsePath(Se||r,Ie.x,Ie.y,we,Oe);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(Ee)){var Be=0,Ye=0,ot=0;Ee==="round-diamond"?Be=(ee+Q+Y)*1.4:Ee==="round-heptagon"?(Be=(ee+Q+Y)*1.075,ot=-(ee/2+Q+Y)/35):Ee==="round-hexagon"?Be=(ee+Q+Y)*1.12:Ee==="round-pentagon"?(Be=(ee+Q+Y)*1.13,ot=-(ee/2+Q+Y)/15):Ee==="round-tag"?(Be=(ee+Q+Y)*1.12,Ye=(ee/2+Y+Q)*.07):Ee==="round-triangle"&&(Be=(ee+Q+Y)*(Math.PI/2),ot=-(ee+Q/2+Y)/Math.PI),Be!==0&&(ve=(s+Be)/s,we=s*ve,["round-hexagon","round-tag"].includes(Ee)||(be=(u+Be)/u,Oe=u*be)),J=J==="auto"?tC(we,Oe):J;for(var et=we/2,Ue=Oe/2,ft=J+(ee+Y+Q)/2,st=new Array(Ve.length/2),Pt=new Array(Ve.length/2),Ct=0;Ct<Ve.length/2;Ct++)st[Ct]={x:Ie.x+Ye+et*Ve[Ct*2],y:Ie.y+ot+Ue*Ve[Ct*2+1]};var bt,vt,It,Dt,er=st.length;for(vt=st[er-1],bt=0;bt<er;bt++)It=st[bt%er],Dt=st[(bt+1)%er],Pt[bt]=Yb(vt,It,Dt,ft),vt=It,It=Dt;a.drawRoundPolygonPath(Se||r,Ie.x+Ye,Ie.y+ot,s*ve,u*be,Ve,Pt)}else if(["roundrectangle","round-rectangle"].includes(Ee))J=J==="auto"?ga(we,Oe):J,a.drawRoundRectanglePath(Se||r,Ie.x,Ie.y,we,Oe,J+(ee+Y+Q)/2);else if(["cutrectangle","cut-rectangle"].includes(Ee))J=J==="auto"?Lb():J,a.drawCutRectanglePath(Se||r,Ie.x,Ie.y,we,Oe,null,J+(ee+Y+Q)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(Ee))J=J==="auto"?ga(we,Oe):J,a.drawBottomRoundRectanglePath(Se||r,Ie.x,Ie.y,we,Oe,J+(ee+Y+Q)/2);else if(Ee==="barrel")a.drawBarrelPath(Se||r,Ie.x,Ie.y,we,Oe);else if(Ee.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(Ee)){var mr=(ee+Y+Q)/s;Ve=Ld(jd(Ve,mr)),a.drawPolygonPath(Se||r,Ie.x,Ie.y,s,u,Ve)}else{var pt=(ee+Y+Q)/s;Ve=Ld(jd(Ve,-pt)),a.drawPolygonPath(Se||r,Ie.x,Ie.y,s,u,Ve)}if(d?r.stroke(Se):r.stroke(),W==="double"){r.lineWidth=ee/3;var Nt=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(Se):r.stroke(),r.globalCompositeOperation=Nt}r.setLineDash&&r.setLineDash([])}},ue=function(){i&&a.drawNodeOverlay(r,e,f,s,u)},le=function(){i&&a.drawNodeUnderlay(r,e,f,s,u)},de=function(){a.drawElementText(r,e,null,n)},xe=e.pstyle("ghost").value==="yes";if(xe){var ke=e.pstyle("ghost-offset-x").pfValue,Xe=e.pstyle("ghost-offset-y").pfValue,ze=e.pstyle("ghost-opacity").value,Ge=ze*h;r.translate(ke,Xe),$(),re(),ne(ze*k),ge(),ye(Ge,!0),K(ze*G),q(),pe(P!==0||R!==0),N(P!==0||R!==0),ye(Ge,!1),B(Ge),r.translate(-ke,-Xe)}d&&r.translate(-f.x,-f.y),le(),d&&r.translate(f.x,f.y),$(),re(),ne(),ge(),ye(h,!0),K(),q(),pe(P!==0||R!==0),N(P!==0||R!==0),ye(h,!1),B(),d&&r.translate(-f.x,-f.y),de(),ue(),t&&r.translate(y.x1,y.y1)}};var sP=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,o,a){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),o==null||a==null){var d=n.padding();o=n.width()+2*d,a=n.height()+2*d}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,i.x,i.y,o+u*2,a+u*2,h),t.fill()}}}};Ca.drawNodeOverlay=sP("overlay");Ca.drawNodeUnderlay=sP("underlay");Ca.hasPie=function(r){return r=r[0],r._private.hasPie};Ca.hasStripe=function(r){return r=r[0],r._private.hasStripe};Ca.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),h=Math.min(c,f)/2,d,v=0,p=this.usePaths();if(p&&(u=0,l=0),o.units==="%"?h=h*o.pfValue:o.pfValue!==void 0&&(h=o.pfValue/2),a.units==="%"?d=h*a.pfValue:a.pfValue!==void 0&&(d=a.pfValue/2),!(d>=h))for(var m=1;m<=i.pieBackgroundN;m++){var y=e.pstyle("pie-"+m+"-background-size").value,b=e.pstyle("pie-"+m+"-background-color").value,g=e.pstyle("pie-"+m+"-background-opacity").value*t,_=y/100;_+v>1&&(_=1-v);var w=1.5*Math.PI+2*Math.PI*v;w+=s;var x=2*Math.PI*_,E=w+x;y===0||v>=1||v+_>1||(d===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,h,w,E),r.closePath()):(r.beginPath(),r.arc(u,l,h,w,E),r.arc(u,l,d,E,w,!0),r.closePath()),this.colorFillStyle(r,b[0],b[1],b[2],g),r.fill(),v+=_)}};Ca.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=n.x,a=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var f=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var d=s,v=u;h.units==="%"?(d=d*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(d=h.pfValue,v=h.pfValue),c&&(o=0,a=0),a-=d/2,o-=v/2;for(var p=1;p<=i.stripeBackgroundN;p++){var m=e.pstyle("stripe-"+p+"-background-size").value,y=e.pstyle("stripe-"+p+"-background-color").value,b=e.pstyle("stripe-"+p+"-background-opacity").value*t,g=m/100;g+l>1&&(g=1-l),!(m===0||l>=1||l+g>1)&&(r.beginPath(),r.rect(o,a+v*l,d,v*g),r.closePath(),this.colorFillStyle(r,y[0],y[1],y[2],b),r.fill(),l+=g)}r.restore()};var kn={},X5=100;kn.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};kn.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};kn.createGradientStyleFor=function(r,e,t,n,i){var o,a=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),h=bs(l,f),d=bs(c,f);o=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var v=a?{x:0,y:0}:t.position(),p=t.paddedWidth(),m=t.paddedHeight();o=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,m))}else if(t.isEdge()){var y=t.sourceEndpoint(),b=t.targetEndpoint();o=r.createLinearGradient(y.x,y.y,b.x,b.y)}else{var g=a?{x:0,y:0}:t.position(),_=t.paddedWidth(),w=t.paddedHeight(),x=_/2,E=w/2,O=t.pstyle("background-gradient-direction").value;switch(O){case"to-bottom":o=r.createLinearGradient(g.x,g.y-E,g.x,g.y+E);break;case"to-top":o=r.createLinearGradient(g.x,g.y+E,g.x,g.y-E);break;case"to-left":o=r.createLinearGradient(g.x+x,g.y,g.x-x,g.y);break;case"to-right":o=r.createLinearGradient(g.x-x,g.y,g.x+x,g.y);break;case"to-bottom-right":case"to-right-bottom":o=r.createLinearGradient(g.x-x,g.y-E,g.x+x,g.y+E);break;case"to-top-right":case"to-right-top":o=r.createLinearGradient(g.x-x,g.y+E,g.x+x,g.y-E);break;case"to-bottom-left":case"to-left-bottom":o=r.createLinearGradient(g.x+x,g.y-E,g.x-x,g.y+E);break;case"to-top-left":case"to-left-top":o=r.createLinearGradient(g.x+x,g.y+E,g.x-x,g.y-E);break}}if(!o)return null;for(var T=u.length===s.length,C=s.length,P=0;P<C;P++)o.addColorStop(T?u[P]:P/(C-1),"rgba("+s[P][0]+","+s[P][1]+","+s[P][2]+","+i+")");return o};kn.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};kn.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};kn.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};kn.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};kn.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};kn.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};kn.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],o=n[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=i+"px",f.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=a}};kn.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};kn.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};kn.render=function(r){var e=this;r=r||$2();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,o=r.drawOnlyNodeLayer,a=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=t.hasCompoundNodes(),p=e.hoverData.draggingEles,m=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!m;var y=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var b=t.style(),g=t.zoom(),_=a!==void 0?a:g,w=t.pan(),x={x:w.x,y:w.y},E={zoom:g,pan:{x:w.x,y:w.y}},O=e.prevViewport,T=O===void 0||E.zoom!==O.zoom||E.pan.x!==O.pan.x||E.pan.y!==O.pan.y;!T&&!(p&&!v)&&(e.motionBlurPxRatio=1),s&&(x=s),_*=u,x.x*=u,x.y*=u;var C=e.getCachedZSortedEles();function P(K,$,Z,ae,se){var fe=K.globalCompositeOperation;K.globalCompositeOperation="destination-out",e.colorFillStyle(K,255,255,255,e.motionBlurTransparency),K.fillRect($,Z,ae,se),K.globalCompositeOperation=fe}function R(K,$){var Z,ae,se,fe;!e.clearingMotionBlur&&(K===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||K===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(Z={x:w.x*d,y:w.y*d},ae=g*d,se=e.canvasWidth*d,fe=e.canvasHeight*d):(Z=x,ae=_,se=e.canvasWidth,fe=e.canvasHeight),K.setTransform(1,0,0,1,0,0),$==="motionBlur"?P(K,0,0,se,fe):!n&&($===void 0||$)&&K.clearRect(0,0,se,fe),i||(K.translate(Z.x,Z.y),K.scale(ae,ae)),s&&K.translate(s.x,s.y),a&&K.scale(a,a)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var k=e.data.bufferContexts[e.TEXTURE_BUFFER];k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:k,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var E=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var I=l.contexts[e.NODE],M=e.textureCache.texture,E=e.textureCache.viewport;I.setTransform(1,0,0,1,0,0),h?P(I,0,0,E.width,E.height):I.clearRect(0,0,E.width,E.height);var j=b.core("outside-texture-bg-color").value,L=b.core("outside-texture-bg-opacity").value;e.colorFillStyle(I,j[0],j[1],j[2],L),I.fillRect(0,0,E.width,E.height);var g=t.zoom();R(I,!1),I.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/u,E.height/E.zoom/u),I.drawImage(M,E.mpan.x,E.mpan.y,E.width/E.zoom/u,E.height/E.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var F=t.extent(),z=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),V=e.hideEdgesOnViewport&&z,G=[];if(G[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,G[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),G[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,G[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||o||G[e.NODE]){var Y=h&&!G[e.NODE]&&d!==1,I=n||(Y?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),ie=h&&!Y?"motionBlur":void 0;R(I,ie),V?e.drawCachedNodes(I,C.nondrag,u,F):e.drawLayeredElements(I,C.nondrag,u,F),e.debug&&e.drawDebugPoints(I,C.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!o&&(c[e.DRAG]||i||G[e.DRAG])){var Y=h&&!G[e.DRAG]&&d!==1,I=n||(Y?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);R(I,h&&!Y?"motionBlur":void 0),V?e.drawCachedNodes(I,C.drag,u,F):e.drawCachedElements(I,C.drag,u,F),e.debug&&e.drawDebugPoints(I,C.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,R),h&&d!==1){var W=l.contexts[e.NODE],H=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Q=l.contexts[e.DRAG],J=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ne=function($,Z,ae){$.setTransform(1,0,0,1,0,0),ae||!y?$.clearRect(0,0,e.canvasWidth,e.canvasHeight):P($,0,0,e.canvasWidth,e.canvasHeight);var se=d;$.drawImage(Z,0,0,e.canvasWidth*se,e.canvasHeight*se,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||G[e.NODE])&&(ne(W,H,G[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||G[e.DRAG])&&(ne(Q,J,G[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=E,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},X5)),n||t.emit("render")};var El;kn.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,o=n.style(),a=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!a&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),h=o.core("selection-box-border-width").value/f;c.lineWidth=h,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),d=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(d.x,d.y,o.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),m="1 frame = "+v+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!El){var y=c.measureText(m);El=y.actualBoundingBoxAscent}c.fillText(m,0,El);var b=60;c.strokeRect(0,El+10,250,20),c.fillRect(0,El+10,250*Math.min(p/b,1),20)}s||(u[t.SELECT_BOX]=!1)}};function zO(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function $5(r,e,t){var n=zO(r,r.VERTEX_SHADER,e),i=zO(r,r.FRAGMENT_SHADER,t),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error("Could not initialize shaders");return o}function K5(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function Kb(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function Z5(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function Q5(r,e,t,n,i){var o=n*t+e.x,a=i*t+e.y;return a=Math.round(r.canvasHeight-a),[o,a]}function J5(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function e3(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ya(r,e,t){var n=r[0]/255,i=r[1]/255,o=r[2]/255,a=e,s=t||new Array(4);return s[0]=n*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function eu(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function t3(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function r3(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function uP(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function lP(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function n3(r,e,t,n,i,o){switch(e){case r.FLOAT:return new Float32Array(t.buffer,o*n,i);case r.INT:return new Int32Array(t.buffer,o*n,i)}}function i3(r,e,t,n){var i=uP(r,e),o=kr(i,2),a=o[0],s=o[1],u=lP(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,a,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,a,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function Ui(r,e,t,n){var i=uP(r,t),o=kr(i,3),a=o[0],s=o[1],u=o[2],l=lP(r,s,e*a),c=a*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,a,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,a,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=n3(r,s,l,c,a,d);return f.dataArray=l,f.stride=c,f.size=a,f.getView=function(v){return h[v]},f.setPoint=function(v,p,m){var y=h[v];y[0]=p,y[1]=m},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*a):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function o3(r,e,t){for(var n=9,i=new Float32Array(e*n),o=new Array(e),a=0;a<e;a++){var s=a*n*4;o[a]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,36,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return o[f]},u.setData=function(f,h){o[h].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function a3(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var VO=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function wy(){var r=new VO(9);return VO!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function GO(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function s3(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],p=t[3],m=t[4],y=t[5],b=t[6],g=t[7],_=t[8];return r[0]=h*n+d*a+v*l,r[1]=h*i+d*s+v*c,r[2]=h*o+d*u+v*f,r[3]=p*n+m*a+y*l,r[4]=p*i+m*s+y*c,r[5]=p*o+m*u+y*f,r[6]=b*n+g*a+_*l,r[7]=b*i+g*s+_*c,r[8]=b*o+g*u+_*f,r}function md(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=h*n+d*a+l,r[7]=h*i+d*s+c,r[8]=h*o+d*u+f,r}function qO(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*a,r[1]=d*i+h*s,r[2]=d*o+h*u,r[3]=d*a-h*n,r[4]=d*s-h*i,r[5]=d*u-h*o,r[6]=l,r[7]=c,r[8]=f,r}function R0(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function u3(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var l3=(function(){function r(e,t,n,i){xa(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return Sa(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,o=this.texHeight,a=this.texSize,s=o/i,u=n*s,l=i*s;return u>a&&(s=a/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var o=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,h=l.texH,d=function(g,_){if(i&&_){var w=_.context,x=g.x,E=g.row,O=x,T=u*E;w.save(),w.translate(O,T),w.scale(c,c),i(w,n),w.restore()}},v=[null,null],p=function(){d(o.freePointer,o.canvas),v[0]={x:o.freePointer.x,y:o.freePointer.row*u,w:f,h},v[1]={x:o.freePointer.x+f,y:o.freePointer.row*u,w:0,h},o.freePointer.x+=f,o.freePointer.x==a&&(o.freePointer.x=0,o.freePointer.row++)},m=function(){var g=o.scratch,_=o.canvas;g.clear(),d({x:0,row:0},g);var w=a-o.freePointer.x,x=f-w,E=u;{var O=o.freePointer.x,T=o.freePointer.row*u,C=w;_.context.drawImage(g,0,0,C,E,O,T,C,E),v[0]={x:O,y:T,w:C,h}}{var P=w,R=(o.freePointer.row+1)*u,k=x;_&&_.context.drawImage(g,P,0,k,E,0,R,k,E),v[1]={x:0,y:R,w:k,h}}o.freePointer.x=x,o.freePointer.row++},y=function(){o.freePointer.x=0,o.freePointer.row++};if(this.freePointer.x+f<=a)p();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(y(),p()):this.enableWrapping?m():(y(),p())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,o=this.getScale(t),a=o.texW;return this.freePointer.x+a>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=r3(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),c3=(function(){function r(e,t,n,i){xa(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Sa(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas;return new l3(t,n,i,o)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas,a=Math.floor(n/i);this.scratch=o(t,n,a,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var o=this.styleKeyToAtlas.get(t);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(n))&&(o&&o.lock(),o=this._createAtlas(),this.atlases.push(o)),o.draw(t,n,i),this.styleKeyToAtlas.set(t,o)),o}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size!==0){var i=[],o=new Map,a=null,s=Vn(this.atlases),u;try{var l=function(){var f=u.value,h=f.getKeys(),d=f3(n,h);if(d.size===0)return i.push(f),h.forEach(function(w){return o.set(w,f)}),1;a||(a=t._createAtlas(),i.push(a));var v=Vn(h),p;try{for(v.s();!(p=v.n()).done;){var m=p.value;if(!d.has(m)){var y=f.getOffsets(m),b=kr(y,2),g=b[0],_=b[1];a.canFit({w:g.w+_.w,h:g.h})||(a.lock(),a=t._createAtlas(),i.push(a)),f.canvas&&(t._copyTextureToNewAtlas(m,f,a),o.set(m,a))}}}catch(w){v.e(w)}finally{v.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=o,this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var o=n.getOffsets(t),a=kr(o,2),s=a[0],u=a[1];if(u.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(t,{w:c,h:f},function(h){h.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function f3(r,e){return r.intersection?r.intersection(e):new Set(Id(r).filter(function(t){return e.has(t)}))}var h3=(function(){function r(e,t){xa(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Sa(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,o=i.webglTexSize,a=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(a),l=new c3(this.r,o,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var o=this.collections.get(i),a=ct({type:t,atlasCollection:o},n);this.renderTypes.set(t,a)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,o=null;return function(a,s,u,l){return l?((!o||s!=n||u!=i)&&(n=s,i=u,o=t(a,s,u)),o):t(a,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.forceRedraw,a=o===void 0?!1:o,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,f=!1,h=!1,d=Vn(t),v;try{for(d.s();!(v=d.n()).done;){var p=v.value;if(u(p)){var m=Vn(this.renderTypes.values()),y;try{var b=function(){var _=y.value,w=_.type;if(c(w)){var x=n.collections.get(_.collection),E=_.getKey(p),O=Array.isArray(E)?E:[E];if(a)O.forEach(function(R){return x.markKeyForGC(R)}),h=!0;else{var T=_.getID?_.getID(p):p.id(),C=n._key(w,T),P=n.typeAndIdToKey.get(C);P!==void 0&&!e3(O,P)&&(f=!0,n.typeAndIdToKey.delete(C),P.forEach(function(R){return x.markKeyForGC(R)}))}}};for(m.s();!(y=m.n()).done;)b()}catch(g){m.e(g)}finally{m.f()}}}}catch(g){d.e(g)}finally{d.f()}return h&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var t=Vn(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(o){t.e(o)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i,o){var a=this.renderTypes.get(n),s=this.collections.get(a.collection),u=!1,l=s.draw(o,i,function(h){a.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,i.w,i.h),h.clip(),a.drawElement(h,t,i,!0,!0),h.restore()):a.drawElement(h,t,i,!0,!0),u=!0});if(u){var c=a.getID?a.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(o):this.typeAndIdToKey.set(f,[o])}return l}},{key:"getAtlasInfo",value:function(t,n){var i=this,o=this.renderTypes.get(n),a=o.getKey(t),s=Array.isArray(a)?a:[a];return s.map(function(u){var l=o.getBoundingBox(t,u),c=i.getOrCreateAtlas(t,n,l,u),f=c.getOffsets(u),h=kr(f,2),d=h[0],v=h[1];return{atlas:c,tex:d,tex1:d,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=Vn(this.collections),i;try{for(n.s();!(i=n.n()).done;){var o=kr(i.value,2),a=o[0],s=o[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:a,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])})(),d3=(function(){function r(e){xa(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Sa(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])})(),v3=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,p3=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,g3=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,y3=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Zl={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},qd={IGNORE:1,USE_BB:2},Ey=0,WO=1,HO=2,Oy=3,tu=4,Ph=5,Ol=6,xl=7,m3=(function(){function r(e,t,n){xa(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=K5,this.atlasManager=new h3(e,n),this.batchManager=new d3(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Zl.SCREEN),this.pickingProgram=this._createShaderProgram(Zl.PICKING),this.vao=this._createVAO()}return Sa(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,o=this.atlasManager;return i?o.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):o.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Ey,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(tu," || aVertType == ").concat(xl,` 
             || aVertType == `).concat(Ph," || aVertType == ").concat(Ol,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(WO,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(HO,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Oy,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),o=this.batchManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(o.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(v3,`
      `).concat(p3,`
      `).concat(g3,`
      `).concat(y3,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Ey,`) {
          // look up the texel from the texture unit
          `).concat(o.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Oy,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(tu,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(tu," || vVertType == ").concat(xl,` 
          || vVertType == `).concat(Ph," || vVertType == ").concat(Ol,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(tu,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(xl,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(xl,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=$5(n,i,a);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,o=this.program,a=i.createVertexArray();return i.bindVertexArray(a),i3(i,"vec2",o.aPosition,t),this.transformBuffer=o3(i,n,o.aTransform),this.indexBuffer=Ui(i,n,"vec4",o.aIndex),this.vertTypeBuffer=Ui(i,n,"int",o.aVertType),this.atlasIdBuffer=Ui(i,n,"int",o.aAtlasId),this.texBuffer=Ui(i,n,"vec4",o.aTex),this.pointAPointBBuffer=Ui(i,n,"vec4",o.aPointAPointB),this.pointCPointDBuffer=Ui(i,n,"vec4",o.aPointCPointD),this.lineWidthBuffer=Ui(i,n,"vec2",o.aLineWidth),this.colorBuffer=Ui(i,n,"vec4",o.aColor),this.cornerRadiusBuffer=Ui(i,n,"vec4",o.aCornerRadius),this.borderColorBuffer=Ui(i,n,"vec4",o.aBorderColor),i.bindVertexArray(null),a}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return ea(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zl.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,i){var o=this.atlasManager,a=this.batchManager,s=o.getRenderTypeOpts(i);if(this._isVisible(t,s)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(t);if(u===qd.IGNORE)return;if(u==qd.USE_BB){this.drawPickingRectangle(t,n,i);return}}var l=o.getAtlasInfo(t,i),c=Vn(l),f;try{for(c.s();!(f=c.n()).done;){var h=f.value,d=h.atlas,v=h.tex1,p=h.tex2;a.canAddToCurrentBatch(d)||this.endBatch();for(var m=a.getAtlasIndexForBatch(d),y=0,b=[[v,!0],[p,!1]];y<b.length;y++){var g=kr(b[y],2),_=g[0],w=g[1];if(_.w!=0){var x=this.instanceCount;this.vertTypeBuffer.getView(x)[0]=Ey;var E=this.indexBuffer.getView(x);eu(n,E);var O=this.atlasIdBuffer.getView(x);O[0]=m;var T=this.texBuffer.getView(x);T[0]=_.x,T[1]=_.y,T[2]=_.w,T[3]=_.h;var C=this.transformBuffer.getMatrixView(x);this.setTransformMatrix(t,C,s,h,w),this.instanceCount++,w||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(P){c.e(P)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=t.pstyle(i.shapeProps.padding).pfValue),o){var u=o.bb,l=o.tex1,c=o.tex2,f=l.w/(l.w+c.w);a||(f=1-f);var h=this._getAdjustedBB(u,s,a,f);this._applyTransformMatrix(n,h,i,t)}else{var d=i.getBoundingBox(t),v=this._getAdjustedBB(d,s,!0,1);this._applyTransformMatrix(n,v,i,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,o){var a,s;GO(t);var u=i.getRotation?i.getRotation(o):0;if(u!==0){var l=i.getRotationPoint(o),c=l.x,f=l.y;md(t,t,[c,f]),qO(t,t,u);var h=i.getRotationOffset(o);a=h.x+(n.xOffset||0),s=h.y+(n.yOffset||0)}else a=n.x1,s=n.y1;md(t,t,[a,s]),R0(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,i,o){var a=t.x1,s=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(a-=n,s-=n,u+=2*n,l+=2*n);var f=0,h=u*o;return i&&o<1?u=h:!i&&o<1&&(f=u-h,a+=f,u=h),{x1:a,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,i){var o=this.atlasManager.getRenderTypeOpts(i),a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=tu;var s=this.indexBuffer.getView(a);eu(n,s);var u=this.colorBuffer.getView(a);Ya([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(t,l,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,i){var o=this.simpleShapeOptions.get(i);if(this._isVisible(t,o)){var a=o.shapeProps,s=this._getVertTypeForShape(t,a.shape);if(s===void 0||o.isSimple&&!o.isSimple(t)){this.drawTexture(t,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===Ph||s===Ol){var l=o.getBoundingBox(t),c=this._getCornerRadius(t,a.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===Ol&&(f[0]=0,f[2]=0)}var h=this.indexBuffer.getView(u);eu(n,h);var d=t.pstyle(a.color).value,v=t.pstyle(a.opacity).value,p=this.colorBuffer.getView(u);Ya(d,v,p);var m=this.lineWidthBuffer.getView(u);if(m[0]=0,m[1]=0,a.border){var y=t.pstyle("border-width").value;if(y>0){var b=t.pstyle("border-color").value,g=t.pstyle("border-opacity").value,_=this.borderColorBuffer.getView(u);Ya(b,g,_);var w=t.pstyle("border-position").value;if(w==="inside")m[0]=0,m[1]=-y;else if(w==="outside")m[0]=y,m[1]=0;else{var x=y/2;m[0]=x,m[1]=-x}}}var E=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,E,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var i=t.pstyle(n).value;switch(i){case"rectangle":return tu;case"ellipse":return xl;case"roundrectangle":case"round-rectangle":return Ph;case"bottom-round-rectangle":return Ol;default:return}}},{key:"_getCornerRadius",value:function(t,n,i){var o=i.w,a=i.h;if(t.pstyle(n).value==="auto")return ga(o,a);var s=t.pstyle(n).pfValue,u=o/2,l=a/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var o=t._private.rscratch,a,s,u;if(i==="source"?(a=o.arrowStartX,s=o.arrowStartY,u=o.srcArrowAngle):(a=o.arrowEndX,s=o.arrowEndY,u=o.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,f=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,d=f*h,v=t.pstyle("width").pfValue,p=t.pstyle("arrow-scale").value,m=this.r.getArrowWidth(v,p),y=this.instanceCount,b=this.transformBuffer.getMatrixView(y);GO(b),md(b,b,[a,s]),R0(b,b,[m,m]),qO(b,b,u),this.vertTypeBuffer.getView(y)[0]=Oy;var g=this.indexBuffer.getView(y);eu(n,g);var _=this.colorBuffer.getView(y);Ya(c,d,_),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this._getEdgePoints(t);if(i){var o=t.pstyle("opacity").value,a=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=o*a;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=WO;var f=this.indexBuffer.getView(c);eu(n,f);var h=this.colorBuffer.getView(c);Ya(u,l,h);var d=this.lineWidthBuffer.getView(c);d[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<i.length-2;p+=2){var m=this.instanceCount;this.vertTypeBuffer.getView(m)[0]=HO;var y=this.indexBuffer.getView(m);eu(n,y);var b=this.colorBuffer.getView(m);Ya(u,l,b);var g=this.lineWidthBuffer.getView(m);g[0]=s;var _=i[p-2],w=i[p-1],x=i[p],E=i[p+1],O=i[p+2],T=i[p+3],C=i[p+4],P=i[p+5];p==0&&(_=2*x-O+.001,w=2*E-T+.001),p==i.length-4&&(C=2*O-x+.001,P=2*T-E+.001);var R=this.pointAPointBBuffer.getView(m);R[0]=_,R[1]=w,R[2]=x,R[3]=E;var k=this.pointCPointDBuffer.getView(m);k[0]=O,k[1]=T,k[2]=C,k[3]=P,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var i=n.allpts;if(i.length==4)return i;var o=this._getNumSegments(t);return this._getCurveSegmentPoints(i,o)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),o=0;o<=n;o++)if(o==0)i[0]=t[0],i[1]=t[1];else if(o==n)i[o*2]=t[t.length-2],i[o*2+1]=t[t.length-1];else{var a=o/n;this._setCurvePoint(t,a,i,o*2)}return i}},{key:"_setCurvePoint",value:function(t,n,i,o){if(t.length<=2)i[o]=t[0],i[o+1]=t[1];else{for(var a=Array(t.length-2),s=0;s<a.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];a[s]=u,a[s+1]=l}return this._setCurvePoint(a,n,i,o)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,o=this.instanceCount;if(o!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(a),t.bindVertexArray(n);var s=Vn(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(o)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(a.uTextures[h],h);t.uniform1f(a.uZoom,Z5(this.r)),t.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(a.uAtlasSize,this.batchManager.getAtlasSize());var d=Ya(this.bgColor,1);t.uniform4fv(a.uBGColor,d),t.drawArraysInstanced(t.TRIANGLES,0,i,o),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:o,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(a,s){return a+s.atlasCount},0),i=this.batchDebugInfo,o=i.reduce(function(a,s){return a+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:o}}}])})(),cP={};cP.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=b3(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=a3(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new m3(t,n,r);var i=function(f){return function(h){return t.getTextAngle(h,f)}},o=function(f){return function(h){var d=h.pstyle(f);return d&&d.value}},a=function(f){return function(h){return h.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var h=f.pstyle("text-events").strValue==="yes";return h?qd.USE_BB:qd.IGNORE},u=function(f){var h=f.position(),d=h.x,v=h.y,p=f.outerWidth(),m=f.outerHeight();return{w:p,h:m,x1:d-p/2,y1:v-m/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:J5,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:a("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:a("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:xy(e.getLabelKey,null),getBoundingBox:Sy(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:xy(e.getSourceLabelKey,"source"),getBoundingBox:Sy(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:o("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:xy(e.getTargetLabelKey,"target"),getBoundingBox:Sy(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:o("target-label")});var l=of(function(){t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,f){var h=!1;f&&f.length>0&&(h|=t.drawing.invalidate(f)),h&&l()}),_3(t)};function b3(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return F2(t)}function fP(r,e){var t=r._private.rscratch;return Bn(t,"labelWrapCachedLines",e)||[]}var xy=function(e,t){return function(n){var i=e(n),o=fP(n,t);return o.length>1?o.map(function(a,s){return"".concat(i,"_").concat(s)}):i}},Sy=function(e,t){return function(n,i){var o=e(n);if(typeof i=="string"){var a=i.indexOf("_");if(a>0){var s=Number(i.substring(a+1)),u=fP(n,t),l=o.h/u.length,c=l*s,f=o.y1+c;return{x1:o.x1,w:o.w,y1:f,h:l,yOffset:c}}}return o}};function _3(r){{var e=r.render;r.render=function(o){o=o||{};var a=r.cy;r.webgl&&(a.zoom()>nP?(w3(r),e.call(r,o)):(E3(r),dP(r,o,Zl.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(o){t.call(r,o),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(o,a,s,u){return P3(r,o,a)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(o,a){i.call(r,o,a),o==="viewport"||o==="bounds"?r.pickingFrameBuffer.needsDraw=!0:o==="background"&&r.drawing.invalidate(a,{type:"node-body"})}}}function w3(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function E3(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function O3(r){var e=r.canvasWidth,t=r.canvasHeight,n=Kb(r),i=n.pan,o=n.zoom,a=wy();md(a,a,[i.x,i.y]),R0(a,a,[o,o]);var s=wy();u3(s,e,t);var u=wy();return s3(u,s,a),u}function hP(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=Kb(r),o=i.pan,a=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(o.x,o.y),e.scale(a,a)}function x3(r,e){r.drawSelectionRectangle(e,function(t){return hP(r,t)})}function S3(r){var e=r.data.contexts[r.NODE];e.save(),hP(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function T3(r){var e=function(i,o,a){for(var s=i.atlasManager.getAtlasCollection(o),u=r.data.contexts[r.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],h=f.canvas;if(h){var d=h.width,v=h.height,p=d*c,m=h.height*a,y=.4;u.save(),u.scale(y,y),u.drawImage(h,p,m),u.strokeStyle="black",u.rect(p,m,d,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function C3(r,e,t,n,i){var o,a,s,u,l=Kb(r),c=l.pan,f=l.zoom;{var h=Q5(r,c,f,e,t),d=kr(h,2),v=d[0],p=d[1],m=6;o=v-m/2,a=p-m/2,s=m,u=m}if(s===0||u===0)return[];var y=r.data.contexts[r.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),dP(r,null,Zl.PICKING),r.pickingFrameBuffer.needsDraw=!1);var b=s*u,g=new Uint8Array(b*4);y.readPixels(o,a,s,u,y.RGBA,y.UNSIGNED_BYTE,g),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var _=new Set,w=0;w<b;w++){var x=g.slice(w*4,w*4+4),E=t3(x)-1;E>=0&&_.add(E)}return _}function P3(r,e,t){var n=C3(r,e,t),i=r.getCachedZSortedEles(),o,a,s=Vn(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!o&&c.isNode()&&(o=c),!a&&c.isEdge()&&(a=c),o&&a)break}}catch(f){s.e(f)}finally{s.f()}return[o,a].filter(Boolean)}function Ty(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function dP(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,o=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&x3(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var a=r.data.contexts[r.WEBGL];t.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=O3(r),u=r.getCachedZSortedEles();if(o=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)Ty(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)Ty(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)Ty(r,f,u[f]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(S3(r),T3(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),p=i.getDebugInfo(),m=["".concat(o," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(d)"WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(m);else{"WebGL (".concat(t.name,") - frame time ").concat(v,"ms"),"  ".concat(m);var y=p.atlasInfo,b=Vn(y),g;try{for(b.s();!(g=b.n()).done;){var _=g.value;"  ".concat(_.type,": ").concat(_.keyCount," keys, ").concat(_.atlasCount," atlases")}}catch(w){b.e(w)}finally{b.f()}}}r.data.gc&&(r.data.gc=!1,i.gc())}var Pa={};Pa.drawPolygonPath=function(r,e,t,n,i,o){var a=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+a*o[0],t+s*o[1]);for(var u=1;u<o.length/2;u++)r.lineTo(e+a*o[u*2],t+s*o[u*2+1]);r.closePath()};Pa.drawRoundPolygonPath=function(r,e,t,n,i,o,a){a.forEach(function(s){return XC(r,s)}),r.closePath()};Pa.drawRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?ga(n,i):Math.min(o,s,a);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+a,t-s,e+a,t,u),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.arcTo(e-a,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};Pa.drawBottomRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?ga(n,i):o;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+a,t-s),r.lineTo(e+a,t),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.lineTo(e-a,t-s),r.lineTo(e,t-s),r.closePath()};Pa.drawCutRectanglePath=function(r,e,t,n,i,o,a){var s=n/2,u=i/2,l=a==="auto"?Lb():a;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};Pa.drawBarrelPath=function(r,e,t,n,i){var o=n/2,a=i/2,s=e-o,u=e+o,l=t-a,c=t+a,f=g0(n,i),h=f.widthOffset,d=f.heightOffset,v=f.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,l+d),r.lineTo(s,c-d),r.quadraticCurveTo(s+v,c,s+h,c),r.lineTo(u-h,c),r.quadraticCurveTo(u-v,c,u,c-d),r.lineTo(u,l+d),r.quadraticCurveTo(u-v,l,u-h,l),r.lineTo(s+h,l),r.quadraticCurveTo(s+v,l,s,l+d),r.closePath()};var YO=Math.sin(0),XO=Math.cos(0),k0={},I0={},vP=Math.PI/40;for(var ru=0*Math.PI;ru<2*Math.PI;ru+=vP)k0[ru]=Math.sin(ru),I0[ru]=Math.cos(ru);Pa.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var o,a,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=vP)o=e-s*k0[l]*YO+s*I0[l]*XO,a=t+u*I0[l]*YO+u*k0[l]*XO,l===0?r.moveTo(o,a):r.lineTo(o,a);r.closePath()};var ff={};ff.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};ff.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),o=r.full?Math.ceil(n.w):i[2],a=r.full?Math.ceil(n.h):i[3],s=Fe(r.maxWidth)||Fe(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)o*=r.scale,a*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;Fe(r.maxWidth)&&(c=l*r.maxWidth/o),Fe(r.maxHeight)&&(f=l*r.maxHeight/a),l=Math.min(c,f),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var h=document.createElement("canvas");h.width=o,h.height=a,h.style.width=o+"px",h.style.height=a+"px";var d=h.getContext("2d");if(o>0&&a>0){d.clearRect(0,0,o,a),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=e.pan(),m={x:p.x*l,y:p.y*l};l*=e.zoom(),d.translate(m.x,m.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-m.x,-m.y)}r.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=r.bg,d.rect(0,0,o,a),d.fill())}return h};function A3(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([n],{type:e})}function $O(r){var e=r.indexOf(",");return r.substr(e+1)}function pP(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Vu(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(a){o(a)}});case"blob":return A3($O(n()),t);case"base64":return $O(n());case"base64uri":default:return n()}}ff.png=function(r){return pP(r,this.bufferCanvasImage(r),"image/png")};ff.jpg=function(r){return pP(r,this.bufferCanvasImage(r),"image/jpeg")};var gP={};gP.nodeShapeImpl=function(r,e,t,n,i,o,a,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,o);case"polygon":return this.drawPolygonPath(e,t,n,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,o,s);case"barrel":return this.drawBarrelPath(e,t,n,i,o)}};var R3=yP,Tt=yP.prototype;Tt.CANVAS_LAYERS=3;Tt.SELECT_BOX=0;Tt.DRAG=1;Tt.NODE=2;Tt.WEBGL=3;Tt.CANVAS_TYPES=["2d","2d","2d","webgl2"];Tt.BUFFER_COUNT=3;Tt.TEXTURE_BUFFER=0;Tt.MOTIONBLUR_BUFFER_NODE=1;Tt.MOTIONBLUR_BUFFER_DRAG=2;function yP(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(Tt.CANVAS_LAYERS=e.CANVAS_LAYERS=4),e.data={canvases:new Array(Tt.CANVAS_LAYERS),contexts:new Array(Tt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Tt.CANVAS_LAYERS),bufferCanvases:new Array(Tt.BUFFER_COUNT),bufferContexts:new Array(Tt.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};xD()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Tt.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=Tt.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||gr("Could not create canvas of type "+f),Object.keys(u).forEach(function(K){c.style[K]=u[K]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Tt.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Tt.NODE].setAttribute("data-id","layer"+Tt.NODE+"-node"),e.data.canvases[Tt.SELECT_BOX].setAttribute("data-id","layer"+Tt.SELECT_BOX+"-selectbox"),e.data.canvases[Tt.DRAG].setAttribute("data-id","layer"+Tt.DRAG+"-drag"),e.data.canvases[Tt.WEBGL]&&e.data.canvases[Tt.WEBGL].setAttribute("data-id","layer"+Tt.WEBGL+"-webgl");for(var l=0;l<Tt.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=Rn(),d=function($){return{x:($.x1+$.x2)/2,y:($.y1+$.y2)/2}},v=function($){return{x:-$.w/2,y:-$.h/2}},p=function($){var Z=$[0]._private,ae=Z.oldBackgroundTimestamp===Z.backgroundTimestamp;return!ae},m=function($){return $[0]._private.nodeKey},y=function($){return $[0]._private.labelStyleKey},b=function($){return $[0]._private.sourceLabelStyleKey},g=function($){return $[0]._private.targetLabelStyleKey},_=function($,Z,ae,se,fe){return e.drawElement($,Z,ae,!1,!1,fe)},w=function($,Z,ae,se,fe){return e.drawElementText($,Z,ae,se,"main",fe)},x=function($,Z,ae,se,fe){return e.drawElementText($,Z,ae,se,"source",fe)},E=function($,Z,ae,se,fe){return e.drawElementText($,Z,ae,se,"target",fe)},O=function($){return $.boundingBox(),$[0]._private.bodyBounds},T=function($){return $.boundingBox(),$[0]._private.labelBounds.main||h},C=function($){return $.boundingBox(),$[0]._private.labelBounds.source||h},P=function($){return $.boundingBox(),$[0]._private.labelBounds.target||h},R=function($,Z){return Z},k=function($){return d(O($))},I=function($,Z,ae){var se=$?$+"-":"";return{x:Z.x+ae.pstyle(se+"text-margin-x").pfValue,y:Z.y+ae.pstyle(se+"text-margin-y").pfValue}},M=function($,Z,ae){var se=$[0]._private.rscratch;return{x:se[Z],y:se[ae]}},j=function($){return I("",M($,"labelX","labelY"),$)},L=function($){return I("source",M($,"sourceLabelX","sourceLabelY"),$)},F=function($){return I("target",M($,"targetLabelX","targetLabelY"),$)},z=function($){return v(O($))},V=function($){return v(C($))},G=function($){return v(P($))},Y=function($){var Z=T($),ae=v(T($));if($.isNode()){switch($.pstyle("text-halign").value){case"left":ae.x=-Z.w-(Z.leftPad||0);break;case"right":ae.x=-(Z.rightPad||0);break}switch($.pstyle("text-valign").value){case"top":ae.y=-Z.h-(Z.topPad||0);break;case"bottom":ae.y=-(Z.botPad||0);break}}return ae},ie=e.data.eleTxrCache=new Bl(e,{getKey:m,doesEleInvalidateKey:p,drawElement:_,getBoundingBox:O,getRotationPoint:k,getRotationOffset:z,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),W=e.data.lblTxrCache=new Bl(e,{getKey:y,drawElement:w,getBoundingBox:T,getRotationPoint:j,getRotationOffset:Y,isVisible:R}),H=e.data.slbTxrCache=new Bl(e,{getKey:b,drawElement:x,getBoundingBox:C,getRotationPoint:L,getRotationOffset:V,isVisible:R}),Q=e.data.tlbTxrCache=new Bl(e,{getKey:g,drawElement:E,getBoundingBox:P,getRotationPoint:F,getRotationOffset:G,isVisible:R}),J=e.data.lyrTxrCache=new iP(e);e.onUpdateEleCalcs(function($,Z){ie.invalidateElements(Z),W.invalidateElements(Z),H.invalidateElements(Z),Q.invalidateElements(Z),J.invalidateElements(Z);for(var ae=0;ae<Z.length;ae++){var se=Z[ae]._private;se.oldBackgroundTimestamp=se.backgroundTimestamp}});var ne=function($){for(var Z=0;Z<$.length;Z++)J.enqueueElementRefinement($[Z].ele)};ie.onDequeue(ne),W.onDequeue(ne),H.onDequeue(ne),Q.onDequeue(ne),r.webgl&&e.initWebgl(r,{getStyleKey:m,getLabelKey:y,getSourceLabelKey:b,getTargetLabelKey:g,drawElement:_,drawLabel:w,drawSourceLabel:x,drawTargetLabel:E,getElementBox:O,getLabelBox:T,getSourceLabelBox:C,getTargetLabelBox:P,getElementRotationPoint:k,getElementRotationOffset:z,getLabelRotationPoint:j,getSourceLabelRotationPoint:L,getTargetLabelRotationPoint:F,getLabelRotationOffset:Y,getSourceLabelRotationOffset:V,getTargetLabelRotationOffset:G})}Tt.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Tt.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Tt.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Tt.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var k3=typeof Path2D<"u";Tt.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Tt.usePaths=function(){return k3&&this.pathsEnabled};Tt.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Tt.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Tt.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Br(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[oP,eo,Ao,$b,As,Ca,kn,cP,Pa,ff,gP].forEach(function(r){ct(Tt,r)});var I3=[{name:"null",impl:WC},{name:"base",impl:tP},{name:"canvas",impl:R3}],D3=[{type:"layout",extensions:i5},{type:"renderer",extensions:I3}],mP={},bP={};function _P(r,e,t){var n=t,i=function(O){Zt("Can not register `"+e+"` for `"+r+"` since `"+O+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Uc.prototype[e])return i(e);Uc.prototype[e]=t}else if(r==="collection"){if(Jr.prototype[e])return i(e);Jr.prototype[e]=t}else if(r==="layout"){for(var o=function(O){this.options=O,t.call(this,O),Vt(this._private)||(this._private={}),this._private.cy=O.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=t.prototype.stop;a.stop=function(){var E=this.options;if(E&&E.animate){var O=this.animations;if(O)for(var T=0;T<O.length;T++)O[T].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var f=function(O){return O._private.cy},h={addEventFields:function(O,T){T.layout=O,T.cy=f(O),T.target=O},bubble:function(){return!0},parent:function(O){return f(O)}};ct(a,{createEmitter:function(){return this._private.emitter=new mv(h,this),this},emitter:function(){return this._private.emitter},on:function(O,T){return this.emitter().on(O,T),this},one:function(O,T){return this.emitter().one(O,T),this},once:function(O,T){return this.emitter().one(O,T),this},removeListener:function(O,T){return this.emitter().removeListener(O,T),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(O,T){return this.emitter().emit(O,T),this}}),Kt.eventAliasesOn(a),n=o}else if(r==="renderer"&&e!=="null"&&e!=="base"){var d=wP("renderer","base"),v=d.prototype,p=t,m=t.prototype,y=function(){d.apply(this,arguments),p.apply(this,arguments)},b=y.prototype;for(var g in v){var _=v[g],w=m[g]!=null;if(w)return i(g);b[g]=_}for(var x in m)b[x]=m[x];v.clientFunctions.forEach(function(E){b[E]=b[E]||function(){gr("Renderer does not implement `renderer."+E+"()` on its prototype")}}),n=y}else if(r==="__proto__"||r==="constructor"||r==="prototype")return gr(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return B2({map:mP,keys:[r,e],value:n})}function wP(r,e){return U2({map:mP,keys:[r,e]})}function M3(r,e,t,n,i){return B2({map:bP,keys:[r,e,t,n],value:i})}function N3(r,e,t,n){return U2({map:bP,keys:[r,e,t,n]})}var D0=function(){if(arguments.length===2)return wP.apply(null,arguments);if(arguments.length===3)return _P.apply(null,arguments);if(arguments.length===4)return N3.apply(null,arguments);if(arguments.length===5)return M3.apply(null,arguments);gr("Invalid extension access syntax")};Uc.prototype.extension=D0;D3.forEach(function(r){r.extensions.forEach(function(e){_P(r.type,e.name,e.impl)})});var Wd=function(){if(!(this instanceof Wd))return new Wd;this.length=0},Es=Wd.prototype;Es.instanceString=function(){return"stylesheet"};Es.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Es.css=function(r,e){var t=this.length-1;if(it(r))this[t].properties.push({name:r,value:e});else if(Vt(r))for(var n=r,i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a];if(s!=null){var u=Hr.properties[a]||Hr.properties[uv(a)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};Es.style=Es.css;Es.generateStyle=function(r){var e=new Hr(r);return this.appendToStyle(e)};Es.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var o=0;o<i.length;o++){var a=i[o];r.css(a.name,a.value)}}return r};var L3="3.33.1",_a=function(e){if(e===void 0&&(e={}),Vt(e))return new Uc(e);if(it(e))return D0.apply(D0,arguments)};_a.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(_a),r.apply(null,e),this};_a.warnings=function(r){return Y2(r)};_a.version=L3;_a.stylesheet=_a.Stylesheet=Wd;var bd={exports:{}},_d={exports:{}},wd={exports:{}},j3=wd.exports,KO;function F3(){return KO||(KO=1,(function(r,e){(function(n,i){r.exports=i()})(j3,function(){return(function(t){var n={};function i(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=n,i.i=function(o){return o},i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:s})},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=26)})([(function(t,n,i){function o(){}o.QUALITY=1,o.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,o.DEFAULT_INCREMENTAL=!1,o.DEFAULT_ANIMATION_ON_LAYOUT=!0,o.DEFAULT_ANIMATION_DURING_LAYOUT=!1,o.DEFAULT_ANIMATION_PERIOD=50,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,o.DEFAULT_GRAPH_MARGIN=15,o.NODE_DIMENSIONS_INCLUDE_LABELS=!1,o.SIMPLE_NODE_SIZE=40,o.SIMPLE_NODE_HALF_SIZE=o.SIMPLE_NODE_SIZE/2,o.EMPTY_COMPOUND_NODE_SIZE=40,o.MIN_EDGE_LENGTH=1,o.WORLD_BOUNDARY=1e6,o.INITIAL_WORLD_BOUNDARY=o.WORLD_BOUNDARY/1e3,o.WORLD_CENTER_X=1200,o.WORLD_CENTER_Y=900,t.exports=o}),(function(t,n,i){var o=i(2),a=i(8),s=i(9);function u(c,f,h){o.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=c,this.target=f}u.prototype=Object.create(o.prototype);for(var l in o)u[l]=o[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,f){for(var h=this.getOtherEnd(c),d=f.getGraphManager().getRoot();;){if(h.getOwner()==f)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u}),(function(t,n,i){function o(a){this.vGraphObject=a}t.exports=o}),(function(t,n,i){var o=i(2),a=i(10),s=i(13),u=i(0),l=i(16),c=i(4);function f(d,v,p,m){p==null&&m==null&&(m=v),o.call(this,m),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=d,p!=null&&v!=null?this.rect=new s(v.x,v.y,p.width,p.height):this.rect=new s}f.prototype=Object.create(o.prototype);for(var h in o)f[h]=o[h];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},f.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},f.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},f.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},f.prototype.getEdgeListToNode=function(d){var v=[],p=this;return p.edges.forEach(function(m){if(m.target==d){if(m.source!=p)throw"Incorrect edge source!";v.push(m)}}),v},f.prototype.getEdgesBetween=function(d){var v=[],p=this;return p.edges.forEach(function(m){if(!(m.source==p||m.target==p))throw"Incorrect edge source and/or target";(m.target==d||m.source==d)&&v.push(m)}),v},f.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(p){if(p.source==v)d.add(p.target);else{if(p.target!=v)throw"Incorrect incidency!";d.add(p.source)}}),d},f.prototype.withChildren=function(){var d=new Set,v,p;if(d.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)v=m[y],p=v.withChildren(),p.forEach(function(b){d.add(b)});return d},f.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var p=this.child.getNodes(),m=0;m<p.length;m++)v=p[m],d+=v.getNoOfChildren();return d==0&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,v,p=-u.INITIAL_WORLD_BOUNDARY,m=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(m-p)+p;var y=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(b-y)+y,this.rect.x=d,this.rect.y=v},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),p=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>p&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-p)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-p),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var p=this.rect.y;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var m=new c(v,p),y=d.inverseTransformPoint(m);this.setLocation(y.x,y.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=f}),(function(t,n,i){function o(a,s){a==null&&s==null?(this.x=0,this.y=0):(this.x=a,this.y=s)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.setX=function(a){this.x=a},o.prototype.setY=function(a){this.y=a},o.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},o.prototype.getCopy=function(){return new o(this.x,this.y)},o.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},t.exports=o}),(function(t,n,i){var o=i(2),a=i(10),s=i(0),u=i(6),l=i(3),c=i(1),f=i(13),h=i(12),d=i(11);function v(m,y,b){o.call(this,b),this.estimatedSize=a.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}v.prototype=Object.create(o.prototype);for(var p in o)v[p]=o[p];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(m,y,b){if(y==null&&b==null){var g=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(g)>-1)throw"Node already in graph!";return g.owner=this,this.getNodes().push(g),g}else{var _=m;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(_.source=y,_.target=b,_.isInterGraph=!1,this.getEdges().push(_),y.edges.push(_),b!=y&&b.edges.push(_),_)}},v.prototype.remove=function(m){var y=m;if(m instanceof l){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),g,_=b.length,w=0;w<_;w++)g=b[w],g.isInterGraph?this.graphManager.remove(g):g.source.owner.remove(g);var x=this.nodes.indexOf(y);if(x==-1)throw"Node not in owner node list!";this.nodes.splice(x,1)}else if(m instanceof c){var g=m;if(g==null)throw"Edge is null!";if(!(g.source!=null&&g.target!=null))throw"Source and/or target is null!";if(!(g.source.owner!=null&&g.target.owner!=null&&g.source.owner==this&&g.target.owner==this))throw"Source and/or target owner is invalid!";var E=g.source.edges.indexOf(g),O=g.target.edges.indexOf(g);if(!(E>-1&&O>-1))throw"Source and/or target doesn't know this edge!";g.source.edges.splice(E,1),g.target!=g.source&&g.target.edges.splice(O,1);var x=g.source.owner.getEdges().indexOf(g);if(x==-1)throw"Not in owner's edge list!";g.source.owner.getEdges().splice(x,1)}},v.prototype.updateLeftTop=function(){for(var m=a.MAX_VALUE,y=a.MAX_VALUE,b,g,_,w=this.getNodes(),x=w.length,E=0;E<x;E++){var O=w[E];b=O.getTop(),g=O.getLeft(),m>b&&(m=b),y>g&&(y=g)}return m==a.MAX_VALUE?null:(w[0].getParent().paddingLeft!=null?_=w[0].getParent().paddingLeft:_=this.margin,this.left=y-_,this.top=m-_,new h(this.left,this.top))},v.prototype.updateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,g=a.MAX_VALUE,_=-a.MAX_VALUE,w,x,E,O,T,C=this.nodes,P=C.length,R=0;R<P;R++){var k=C[R];m&&k.child!=null&&k.updateBounds(),w=k.getLeft(),x=k.getRight(),E=k.getTop(),O=k.getBottom(),y>w&&(y=w),b<x&&(b=x),g>E&&(g=E),_<O&&(_=O)}var I=new f(y,g,b-y,_-g);y==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),C[0].getParent().paddingLeft!=null?T=C[0].getParent().paddingLeft:T=this.margin,this.left=I.x-T,this.right=I.x+I.width+T,this.top=I.y-T,this.bottom=I.y+I.height+T},v.calculateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,g=a.MAX_VALUE,_=-a.MAX_VALUE,w,x,E,O,T=m.length,C=0;C<T;C++){var P=m[C];w=P.getLeft(),x=P.getRight(),E=P.getTop(),O=P.getBottom(),y>w&&(y=w),b<x&&(b=x),g>E&&(g=E),_<O&&(_=O)}var R=new f(y,g,b-y,_-g);return R},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var m=0,y=this.nodes,b=y.length,g=0;g<b;g++){var _=y[g];m+=_.calcEstimatedSize()}return m==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new d,b=new Set,g=this.nodes[0],_,w,x=g.withChildren();for(x.forEach(function(R){y.push(R),b.add(R)});y.length!==0;){g=y.shift(),_=g.getEdges();for(var E=_.length,O=0;O<E;O++){var T=_[O];if(w=T.getOtherEndInGraph(g,this),w!=null&&!b.has(w)){var C=w.withChildren();C.forEach(function(R){y.push(R),b.add(R)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var P=0;b.forEach(function(R){R.owner==m&&P++}),P==this.nodes.length&&(this.isConnected=!0)}},t.exports=v}),(function(t,n,i){var o,a=i(1);function s(u){o=i(5),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),c=this.add(u,l);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,l,c,f,h){if(c==null&&f==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=c,f=l,c=u;var d=f.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return c.isInterGraph=!1,d.add(c,f,h);if(c.isInterGraph=!0,c.source=f,c.target=h,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof o){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(l.getEdges());for(var f,h=c.length,d=0;d<h;d++)f=c[d],l.remove(f);var v=[];v=v.concat(l.getNodes());var p;h=v.length;for(var d=0;d<h;d++)p=v[d],l.remove(p);l==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(l);this.graphs.splice(m,1),l.parent=null}else if(u instanceof a){if(f=u,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var m=f.source.edges.indexOf(f);if(f.source.edges.splice(m,1),m=f.target.edges.indexOf(f),f.target.edges.splice(m,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var m=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(m,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),c=l.length,f=0;f<c;f++)u=u.concat(l[f].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var c=0;c<l.length;c++)u=u.concat(l[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var c=u.getOwner(),f;do{if(f=c.getParent(),f==null)break;if(f==l)return!0;if(c=f.getOwner(),c==null)break}while(!0);c=l.getOwner();do{if(f=c.getParent(),f==null)break;if(f==u)return!0;if(c=f.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,c,f,h,d=this.getAllEdges(),v=d.length,p=0;p<v;p++){if(u=d[p],l=u.source,c=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=c,l==c){u.lca=l.getOwner();continue}for(f=l.getOwner();u.lca==null;){for(u.targetInLca=c,h=c.getOwner();u.lca==null;){if(h==f){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(f==this.rootGraph)break;u.lca==null&&(u.sourceInLca=f.getParent(),f=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var f=l.getOwner();do{if(f==null)break;if(f==c)return f;f=f.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var c,f=u.getNodes(),h=f.length,d=0;d<h;d++)c=f[d],c.inclusionTreeDepth=l,c.child!=null&&this.calcInclusionTreeDepths(c.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,c=0;c<l;c++)if(u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},t.exports=s}),(function(t,n,i){var o=i(0);function a(){}for(var s in o)a[s]=o[s];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=a}),(function(t,n,i){var o=i(12);function a(){}a.calcSeparationAmount=function(s,u,l,c){if(!s.intersects(u))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,f),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var h=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*f[0]*(v/2+c),l[1]=-1*f[1]*(d/2+c)},a.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},a.getIntersection2=function(s,u,l){var c=s.getCenterX(),f=s.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(s.intersects(u))return l[0]=c,l[1]=f,l[2]=h,l[3]=d,!0;var v=s.getX(),p=s.getY(),m=s.getRight(),y=s.getX(),b=s.getBottom(),g=s.getRight(),_=s.getWidthHalf(),w=s.getHeightHalf(),x=u.getX(),E=u.getY(),O=u.getRight(),T=u.getX(),C=u.getBottom(),P=u.getRight(),R=u.getWidthHalf(),k=u.getHeightHalf(),I=!1,M=!1;if(c===h){if(f>d)return l[0]=c,l[1]=p,l[2]=h,l[3]=C,!1;if(f<d)return l[0]=c,l[1]=b,l[2]=h,l[3]=E,!1}else if(f===d){if(c>h)return l[0]=v,l[1]=f,l[2]=O,l[3]=d,!1;if(c<h)return l[0]=m,l[1]=f,l[2]=x,l[3]=d,!1}else{var j=s.height/s.width,L=u.height/u.width,F=(d-f)/(h-c),z=void 0,V=void 0,G=void 0,Y=void 0,ie=void 0,W=void 0;if(-j===F?c>h?(l[0]=y,l[1]=b,I=!0):(l[0]=m,l[1]=p,I=!0):j===F&&(c>h?(l[0]=v,l[1]=p,I=!0):(l[0]=g,l[1]=b,I=!0)),-L===F?h>c?(l[2]=T,l[3]=C,M=!0):(l[2]=O,l[3]=E,M=!0):L===F&&(h>c?(l[2]=x,l[3]=E,M=!0):(l[2]=P,l[3]=C,M=!0)),I&&M)return!1;if(c>h?f>d?(z=this.getCardinalDirection(j,F,4),V=this.getCardinalDirection(L,F,2)):(z=this.getCardinalDirection(-j,F,3),V=this.getCardinalDirection(-L,F,1)):f>d?(z=this.getCardinalDirection(-j,F,1),V=this.getCardinalDirection(-L,F,3)):(z=this.getCardinalDirection(j,F,2),V=this.getCardinalDirection(L,F,4)),!I)switch(z){case 1:Y=p,G=c+-w/F,l[0]=G,l[1]=Y;break;case 2:G=g,Y=f+_*F,l[0]=G,l[1]=Y;break;case 3:Y=b,G=c+w/F,l[0]=G,l[1]=Y;break;case 4:G=y,Y=f+-_*F,l[0]=G,l[1]=Y;break}if(!M)switch(V){case 1:W=E,ie=h+-k/F,l[2]=ie,l[3]=W;break;case 2:ie=P,W=d+R*F,l[2]=ie,l[3]=W;break;case 3:W=C,ie=h+k/F,l[2]=ie,l[3]=W;break;case 4:ie=T,W=d+-R*F,l[2]=ie,l[3]=W;break}}return!1},a.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},a.getIntersection=function(s,u,l,c){if(c==null)return this.getIntersection2(s,u,l);var f=s.x,h=s.y,d=u.x,v=u.y,p=l.x,m=l.y,y=c.x,b=c.y,g=void 0,_=void 0,w=void 0,x=void 0,E=void 0,O=void 0,T=void 0,C=void 0,P=void 0;return w=v-h,E=f-d,T=d*h-f*v,x=b-m,O=p-y,C=y*m-p*b,P=w*O-x*E,P===0?null:(g=(E*C-O*T)/P,_=(x*T-w*C)/P,new o(g,_))},a.angleOfVector=function(s,u,l,c){var f=void 0;return s!==l?(f=Math.atan((c-u)/(l-s)),l<s?f+=Math.PI:c<u&&(f+=this.TWO_PI)):c<u?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},a.doIntersect=function(s,u,l,c){var f=s.x,h=s.y,d=u.x,v=u.y,p=l.x,m=l.y,y=c.x,b=c.y,g=(d-f)*(b-m)-(y-p)*(v-h);if(g===0)return!1;var _=((b-m)*(y-f)+(p-y)*(b-h))/g,w=((h-v)*(y-f)+(d-f)*(b-h))/g;return 0<_&&_<1&&0<w&&w<1},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,t.exports=a}),(function(t,n,i){function o(){}o.sign=function(a){return a>0?1:a<0?-1:0},o.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},o.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},t.exports=o}),(function(t,n,i){function o(){}o.MAX_VALUE=2147483647,o.MIN_VALUE=-2147483648,t.exports=o}),(function(t,n,i){var o=(function(){function f(h,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,d,v){return d&&f(h.prototype,d),v&&f(h,v),h}})();function a(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,p){return h!==null?h.next=d:p.head=d,v!==null?v.prev=d:p.tail=d,d.prev=h,d.next=v,p.length++,d},l=function(h,d){var v=h.prev,p=h.next;return v!==null?v.next=p:d.head=p,p!==null?p.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},c=(function(){function f(h){var d=this;a(this,f),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return o(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,s(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,s(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,s(d),null,this)}},{key:"unshift",value:function(d){return u(null,s(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,p=this.head;v<d;)p=p.next,v++;return p.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var p=1,m=this.head;p<d;)m=m.next,p++;m.value=v}}}]),f})();t.exports=c}),(function(t,n,i){function o(a,s,u){this.x=null,this.y=null,a==null&&s==null&&u==null?(this.x=0,this.y=0):typeof a=="number"&&typeof s=="number"&&u==null?(this.x=a,this.y=s):a.constructor.name=="Point"&&s==null&&u==null&&(u=a,this.x=u.x,this.y=u.y)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.getLocation=function(){return new o(this.x,this.y)},o.prototype.setLocation=function(a,s,u){a.constructor.name=="Point"&&s==null&&u==null?(u=a,this.setLocation(u.x,u.y)):typeof a=="number"&&typeof s=="number"&&u==null&&(parseInt(a)==a&&parseInt(s)==s?this.move(a,s):(this.x=Math.floor(a+.5),this.y=Math.floor(s+.5)))},o.prototype.move=function(a,s){this.x=a,this.y=s},o.prototype.translate=function(a,s){this.x+=a,this.y+=s},o.prototype.equals=function(a){if(a.constructor.name=="Point"){var s=a;return this.x==s.x&&this.y==s.y}return this==a},o.prototype.toString=function(){return new o().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=o}),(function(t,n,i){function o(a,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&s!=null&&u!=null&&l!=null&&(this.x=a,this.y=s,this.width=u,this.height=l)}o.prototype.getX=function(){return this.x},o.prototype.setX=function(a){this.x=a},o.prototype.getY=function(){return this.y},o.prototype.setY=function(a){this.y=a},o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},o.prototype.getRight=function(){return this.x+this.width},o.prototype.getBottom=function(){return this.y+this.height},o.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},o.prototype.getCenterX=function(){return this.x+this.width/2},o.prototype.getMinX=function(){return this.getX()},o.prototype.getMaxX=function(){return this.getX()+this.width},o.prototype.getCenterY=function(){return this.y+this.height/2},o.prototype.getMinY=function(){return this.getY()},o.prototype.getMaxY=function(){return this.getY()+this.height},o.prototype.getWidthHalf=function(){return this.width/2},o.prototype.getHeightHalf=function(){return this.height/2},t.exports=o}),(function(t,n,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function a(){}a.lastID=0,a.createID=function(s){return a.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=a.getString(),a.lastID++),s.uniqueID)},a.getString=function(s){return s==null&&(s=a.lastID),"Object#"+s},a.isPrimitive=function(s){var u=typeof s>"u"?"undefined":o(s);return s==null||u!="object"&&u!="function"},t.exports=a}),(function(t,n,i){function o(p){if(Array.isArray(p)){for(var m=0,y=Array(p.length);m<p.length;m++)y[m]=p[m];return y}else return Array.from(p)}var a=i(0),s=i(6),u=i(3),l=i(1),c=i(5),f=i(4),h=i(17),d=i(27);function v(p){d.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,p!=null&&(this.isRemoteUse=p)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var p=new s(this);return this.graphManager=p,p},v.prototype.newGraph=function(p){return new c(null,this.graphManager,p)},v.prototype.newNode=function(p){return new u(this.graphManager,p)},v.prototype.newEdge=function(p){return new l(null,null,p)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var p;return this.checkLayoutSuccess()?p=!1:p=this.layout(),a.ANIMATE==="during"?!1:(p&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,p)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var p=this.graphManager.getAllEdges(),m=0;m<p.length;m++)p[m];for(var y=this.graphManager.getRoot().getNodes(),m=0;m<y.length;m++)y[m];this.update(this.graphManager.getRoot())}},v.prototype.update=function(p){if(p==null)this.update2();else if(p instanceof u){var m=p;if(m.getChild()!=null)for(var y=m.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(m.vGraphObject!=null){var g=m.vGraphObject;g.update(m)}}else if(p instanceof l){var _=p;if(_.vGraphObject!=null){var w=_.vGraphObject;w.update(_)}}else if(p instanceof c){var x=p;if(x.vGraphObject!=null){var E=x.vGraphObject;E.update(x)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(p){if(p==null)this.transform(new f(0,0));else{var m=new h,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){m.setWorldOrgX(p.x),m.setWorldOrgY(p.y),m.setDeviceOrgX(y.x),m.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),g,_=0;_<b.length;_++)g=b[_],g.transform(m)}}},v.prototype.positionNodesRandomly=function(p){if(p==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,y,b=p.getNodes(),g=0;g<b.length;g++)m=b[g],y=m.getChild(),y==null||y.getNodes().length==0?m.scatter():(this.positionNodesRandomly(y),m.updateBounds())},v.prototype.getFlatForest=function(){for(var p=[],m=!0,y=this.graphManager.getRoot().getNodes(),b=!0,g=0;g<y.length;g++)y[g].getChild()!=null&&(b=!1);if(!b)return p;var _=new Set,w=[],x=new Map,E=[];for(E=E.concat(y);E.length>0&&m;){for(w.push(E[0]);w.length>0&&m;){var O=w[0];w.splice(0,1),_.add(O);for(var T=O.getEdges(),g=0;g<T.length;g++){var C=T[g].getOtherEnd(O);if(x.get(O)!=C)if(!_.has(C))w.push(C),x.set(C,O);else{m=!1;break}}}if(!m)p=[];else{var P=[].concat(o(_));p.push(P);for(var g=0;g<P.length;g++){var R=P[g],k=E.indexOf(R);k>-1&&E.splice(k,1)}_=new Set,x=new Map}}return p},v.prototype.createDummyNodesForBendpoints=function(p){for(var m=[],y=p.source,b=this.graphManager.calcLowestCommonAncestor(p.source,p.target),g=0;g<p.bendpoints.length;g++){var _=this.newNode(null);_.setRect(new Point(0,0),new Dimension(1,1)),b.add(_);var w=this.newEdge(null);this.graphManager.add(w,y,_),m.add(_),y=_}var w=this.newEdge(null);return this.graphManager.add(w,y,p.target),this.edgeToDummyNodes.set(p,m),p.isInterGraph()?this.graphManager.remove(p):b.remove(p),m},v.prototype.createBendpointsFromDummyNodes=function(){var p=[];p=p.concat(this.graphManager.getAllEdges()),p=[].concat(o(this.edgeToDummyNodes.keys())).concat(p);for(var m=0;m<p.length;m++){var y=p[m];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),g=0;g<b.length;g++){var _=b[g],w=new f(_.getCenterX(),_.getCenterY()),x=y.bendpoints.get(g);x.x=w.x,x.y=w.y,_.getOwner().remove(_)}this.graphManager.add(y,y.source,y.target)}}},v.transform=function(p,m,y,b){if(y!=null&&b!=null){var g=m;if(p<=50){var _=m/y;g-=(m-_)/50*(50-p)}else{var w=m*b;g+=(w-m)/50*(p-50)}return g}else{var x,E;return p<=50?(x=9*m/500,E=m/10):(x=9*m/50,E=-8*m),x*p+E}},v.findCenterOfTree=function(p){var m=[];m=m.concat(p);var y=[],b=new Map,g=!1,_=null;(m.length==1||m.length==2)&&(g=!0,_=m[0]);for(var w=0;w<m.length;w++){var x=m[w],E=x.getNeighborsList().size;b.set(x,x.getNeighborsList().size),E==1&&y.push(x)}var O=[];for(O=O.concat(y);!g;){var T=[];T=T.concat(O),O=[];for(var w=0;w<m.length;w++){var x=m[w],C=m.indexOf(x);C>=0&&m.splice(C,1);var P=x.getNeighborsList();P.forEach(function(I){if(y.indexOf(I)<0){var M=b.get(I),j=M-1;j==1&&O.push(I),b.set(I,j)}})}y=y.concat(O),(m.length==1||m.length==2)&&(g=!0,_=m[0])}return _},v.prototype.setGraphManager=function(p){this.graphManager=p},t.exports=v}),(function(t,n,i){function o(){}o.seed=1,o.x=0,o.nextDouble=function(){return o.x=Math.sin(o.seed++)*1e4,o.x-Math.floor(o.x)},t.exports=o}),(function(t,n,i){var o=i(4);function a(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(s){this.lworldExtX=s},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(s){this.lworldExtY=s},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},a.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},a.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},a.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},a.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},a.prototype.inverseTransformPoint=function(s){var u=new o(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=a}),(function(t,n,i){function o(d){if(Array.isArray(d)){for(var v=0,p=Array(d.length);v<d.length;v++)p[v]=d[v];return p}else return Array.from(d)}var a=i(15),s=i(7),u=i(0),l=i(8),c=i(9);function f(){a.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.springConstant=s.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=s.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}f.prototype=Object.create(a.prototype);for(var h in a)f[h]=a[h];f.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,v,p,m,y,b,g=this.getGraphManager().getAllEdges(),_=0;_<g.length;_++)d=g[_],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(p=d.getSource(),m=d.getTarget(),y=d.getSourceInLca().getEstimatedSize(),b=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=y+b-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=s.DEFAULT_EDGE_LENGTH*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(p.getInclusionTreeDepth()+m.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,p=0;p<d.length;p++)v=d[p],this.calcSpringForce(v,v.idealLength)},f.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p,m,y,b,g=this.getAllNodes(),_;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),_=new Set,p=0;p<g.length;p++)y=g[p],this.calculateRepulsionForceOfANode(y,_,d,v),_.add(y);else for(p=0;p<g.length;p++)for(y=g[p],m=p+1;m<g.length;m++)b=g[m],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},f.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),p=0;p<v.length;p++)d=v[p],this.calcGravitationalForce(d)},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,p=0;p<d.length;p++)v=d[p],v.move()},f.prototype.calcSpringForce=function(d,v){var p=d.getSource(),m=d.getTarget(),y,b,g,_;if(this.uniformLeafNodeSizes&&p.getChild()==null&&m.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;y=d.getLength(),y!=0&&(b=this.springConstant*(y-v),g=b*(d.lengthX/y),_=b*(d.lengthY/y),p.springForceX+=g,p.springForceY+=_,m.springForceX-=g,m.springForceY-=_)},f.prototype.calcRepulsionForce=function(d,v){var p=d.getRect(),m=v.getRect(),y=new Array(2),b=new Array(4),g,_,w,x,E,O,T;if(p.intersects(m)){l.calcSeparationAmount(p,m,y,s.DEFAULT_EDGE_LENGTH/2),O=2*y[0],T=2*y[1];var C=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=C*O,d.repulsionForceY-=C*T,v.repulsionForceX+=C*O,v.repulsionForceY+=C*T}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(g=m.getCenterX()-p.getCenterX(),_=m.getCenterY()-p.getCenterY()):(l.getIntersection(p,m,b),g=b[2]-b[0],_=b[3]-b[1]),Math.abs(g)<s.MIN_REPULSION_DIST&&(g=c.sign(g)*s.MIN_REPULSION_DIST),Math.abs(_)<s.MIN_REPULSION_DIST&&(_=c.sign(_)*s.MIN_REPULSION_DIST),w=g*g+_*_,x=Math.sqrt(w),E=this.repulsionConstant*d.noOfChildren*v.noOfChildren/w,O=E*g/x,T=E*_/x,d.repulsionForceX-=O,d.repulsionForceY-=T,v.repulsionForceX+=O,v.repulsionForceY+=T},f.prototype.calcGravitationalForce=function(d){var v,p,m,y,b,g,_,w;v=d.getOwner(),p=(v.getRight()+v.getLeft())/2,m=(v.getTop()+v.getBottom())/2,y=d.getCenterX()-p,b=d.getCenterY()-m,g=Math.abs(y)+d.getWidth()/2,_=Math.abs(b)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(w=v.getEstimatedSize()*this.gravityRangeFactor,(g>w||_>w)&&(d.gravitationForceX=-this.gravityConstant*y,d.gravitationForceY=-this.gravityConstant*b)):(w=v.getEstimatedSize()*this.compoundGravityRangeFactor,(g>w||_>w)&&(d.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},f.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),p=0;p<v.length;p++)d=v[p],d.noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var v=0,p=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),p=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var m=new Array(v),y=0;y<v;y++)m[y]=new Array(p);for(var y=0;y<v;y++)for(var b=0;b<p;b++)m[y][b]=new Array;return m},f.prototype.addNodeToGrid=function(d,v,p){var m=0,y=0,b=0,g=0;m=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),y=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),b=parseInt(Math.floor((d.getRect().y-p)/this.repulsionRange)),g=parseInt(Math.floor((d.getRect().height+d.getRect().y-p)/this.repulsionRange));for(var _=m;_<=y;_++)for(var w=b;w<=g;w++)this.grid[_][w].push(d),d.setGridCoordinates(m,y,b,g)},f.prototype.updateGrid=function(){var d,v,p=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<p.length;d++)v=p[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,v,p,m){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&p||m){var y=new Set;d.surrounding=new Array;for(var b,g=this.grid,_=d.startX-1;_<d.finishX+2;_++)for(var w=d.startY-1;w<d.finishY+2;w++)if(!(_<0||w<0||_>=g.length||w>=g[0].length)){for(var x=0;x<g[_][w].length;x++)if(b=g[_][w][x],!(d.getOwner()!=b.getOwner()||d==b)&&!v.has(b)&&!y.has(b)){var E=Math.abs(d.getCenterX()-b.getCenterX())-(d.getWidth()/2+b.getWidth()/2),O=Math.abs(d.getCenterY()-b.getCenterY())-(d.getHeight()/2+b.getHeight()/2);E<=this.repulsionRange&&O<=this.repulsionRange&&y.add(b)}}d.surrounding=[].concat(o(y))}for(_=0;_<d.surrounding.length;_++)this.calcRepulsionForce(d,d.surrounding[_])},f.prototype.calcRepulsionRange=function(){return 0},t.exports=f}),(function(t,n,i){var o=i(1),a=i(7);function s(l,c,f){o.call(this,l,c,f),this.idealLength=a.DEFAULT_EDGE_LENGTH}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];t.exports=s}),(function(t,n,i){var o=i(3);function a(u,l,c,f){o.call(this,u,l,c,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(o.prototype);for(var s in o)a[s]=o[s];a.prototype.setGridCoordinates=function(u,l,c,f){this.startX=u,this.finishX=l,this.startY=c,this.finishY=f},t.exports=a}),(function(t,n,i){function o(a,s){this.width=0,this.height=0,a!==null&&s!==null&&(this.height=s,this.width=a)}o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},t.exports=o}),(function(t,n,i){var o=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(s,u){var l=o.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},a.prototype.contains=function(s){return o.createID(s),this.map[s]!=null},a.prototype.get=function(s){var u=o.createID(s);return this.map[u]},a.prototype.keySet=function(){return this.keys},t.exports=a}),(function(t,n,i){var o=i(14);function a(){this.set={}}a.prototype.add=function(s){var u=o.createID(s);this.contains(u)||(this.set[u]=s)},a.prototype.remove=function(s){delete this.set[o.createID(s)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(s){return this.set[o.createID(s)]==s},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,c=0;c<l;c++)s.push(this.set[u[c]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var c=s[l];this.add(c)}},t.exports=a}),(function(t,n,i){var o=(function(){function l(c,f){for(var h=0;h<f.length;h++){var d=f[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,f,h){return f&&l(c.prototype,f),h&&l(c,h),c}})();function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=(function(){function l(c,f){a(this,l),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;c instanceof s?h=c.size():h=c.length,this._quicksort(c,0,h-1)}return o(l,[{key:"_quicksort",value:function(f,h,d){if(h<d){var v=this._partition(f,h,d);this._quicksort(f,h,v),this._quicksort(f,v+1,d)}}},{key:"_partition",value:function(f,h,d){for(var v=this._get(f,h),p=h,m=d;;){for(;this.compareFunction(v,this._get(f,m));)m--;for(;this.compareFunction(this._get(f,p),v);)p++;if(p<m)this._swap(f,p,m),p++,m--;else return m}}},{key:"_get",value:function(f,h){return f instanceof s?f.get_object_at(h):f[h]}},{key:"_set",value:function(f,h,d){f instanceof s?f.set_object_at(h,d):f[h]=d}},{key:"_swap",value:function(f,h,d){var v=this._get(f,h);this._set(f,h,this._get(f,d)),this._set(f,d,v)}},{key:"_defaultCompareFunction",value:function(f,h){return h>f}}]),l})();t.exports=u}),(function(t,n,i){var o=(function(){function u(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}})();function a(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=(function(){function u(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,u),this.sequence1=l,this.sequence2=c,this.match_score=f,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.grid[v][p]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[m][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return o(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var p=this.grid[h-1][d]+this.gap_penalty,m=this.grid[h][d-1]+this.gap_penalty,y=[v,p,m],b=this.arrayAllMaxIndexes(y);this.grid[h][d]=y[b[0]],this.tracebackGrid[h][d]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var f=c[0],h=this.tracebackGrid[f.pos[0]][f.pos[1]];h[0]&&c.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),h[1]&&c.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),h[2]&&c.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,f){for(var h=[],d=-1;(d=c.indexOf(f,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u})();t.exports=s}),(function(t,n,i){var o=function(){};o.FDLayout=i(18),o.FDLayoutConstants=i(7),o.FDLayoutEdge=i(19),o.FDLayoutNode=i(20),o.DimensionD=i(21),o.HashMap=i(22),o.HashSet=i(23),o.IGeometry=i(8),o.IMath=i(9),o.Integer=i(10),o.Point=i(12),o.PointD=i(4),o.RandomSeed=i(16),o.RectangleD=i(13),o.Transform=i(17),o.UniqueIDGeneretor=i(14),o.Quicksort=i(24),o.LinkedList=i(11),o.LGraphObject=i(2),o.LGraph=i(5),o.LEdge=i(1),o.LGraphManager=i(6),o.LNode=i(3),o.Layout=i(15),o.LayoutConstants=i(0),o.NeedlemanWunsch=i(25),t.exports=o}),(function(t,n,i){function o(){this.listeners=[]}var a=o.prototype;a.addListener=function(s,u){this.listeners.push({event:s,callback:u})},a.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var c=this.listeners[l];c.event===s&&c.callback===u&&this.listeners.splice(l,1)}},a.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var c=this.listeners[l];s===c.event&&c.callback(u)}},t.exports=o})])})})(wd)),wd.exports}var B3=_d.exports,ZO;function U3(){return ZO||(ZO=1,(function(r,e){(function(n,i){r.exports=i(F3())})(B3,function(t){return(function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=7)})([(function(n,i){n.exports=t}),(function(n,i,o){var a=o(0).FDLayoutConstants;function s(){}for(var u in a)s[u]=a[u];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=s}),(function(n,i,o){var a=o(0).FDLayoutEdge;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s}),(function(n,i,o){var a=o(0).LGraph;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s}),(function(n,i,o){var a=o(0).LGraphManager;function s(l){a.call(this,l)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s}),(function(n,i,o){var a=o(0).FDLayoutNode,s=o(0).IMath;function u(c,f,h,d){a.call(this,c,f,h,d)}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(c,f){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(c,f),d.displacementX+=c,d.displacementY+=f):d.propogateDisplacementToChildren(c,f)},u.prototype.setPred1=function(c){this.pred1=c},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(c){this.next=c},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(c){this.processed=c},u.prototype.isProcessed=function(){return processed},n.exports=u}),(function(n,i,o){var a=o(0).FDLayout,s=o(4),u=o(3),l=o(5),c=o(2),f=o(1),h=o(0).FDLayoutConstants,d=o(0).LayoutConstants,v=o(0).Point,p=o(0).PointD,m=o(0).Layout,y=o(0).Integer,b=o(0).IGeometry,g=o(0).LGraph,_=o(0).Transform;function w(){a.call(this),this.toBeTiled={}}w.prototype=Object.create(a.prototype);for(var x in a)w[x]=a[x];w.prototype.newGraphManager=function(){var E=new s(this);return this.graphManager=E,E},w.prototype.newGraph=function(E){return new u(null,this.graphManager,E)},w.prototype.newNode=function(E){return new l(this.graphManager,E)},w.prototype.newEdge=function(E){return new c(null,null,E)},w.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},w.prototype.layout=function(){var E=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return E&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},w.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),T=this.nodesWithGravity.filter(function(R){return O.has(R)});this.graphManager.setAllNodesToApplyGravitation(T)}}else{var E=this.getFlatForest();if(E.length>0)this.positionNodesRadially(E);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),T=this.nodesWithGravity.filter(function(C){return O.has(C)});this.graphManager.setAllNodesToApplyGravitation(T),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},w.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),O=this.nodesWithGravity.filter(function(P){return E.has(P)});this.graphManager.setAllNodesToApplyGravitation(O),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var T=!this.isTreeGrowing&&!this.isGrowthFinished,C=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(T,C),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},w.prototype.getPositionsData=function(){for(var E=this.graphManager.getAllNodes(),O={},T=0;T<E.length;T++){var C=E[T].rect,P=E[T].id;O[P]={id:P,x:C.getCenterX(),y:C.getCenterY(),w:C.width,h:C.height}}return O},w.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var E=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!E;)E=this.tick();this.graphManager.updateBounds()}},w.prototype.calculateNodesToApplyGravitationTo=function(){var E=[],O,T=this.graphManager.getGraphs(),C=T.length,P;for(P=0;P<C;P++)O=T[P],O.updateConnected(),O.isConnected||(E=E.concat(O.getNodes()));return E},w.prototype.createBendpoints=function(){var E=[];E=E.concat(this.graphManager.getAllEdges());var O=new Set,T;for(T=0;T<E.length;T++){var C=E[T];if(!O.has(C)){var P=C.getSource(),R=C.getTarget();if(P==R)C.getBendpoints().push(new p),C.getBendpoints().push(new p),this.createDummyNodesForBendpoints(C),O.add(C);else{var k=[];if(k=k.concat(P.getEdgeListToNode(R)),k=k.concat(R.getEdgeListToNode(P)),!O.has(k[0])){if(k.length>1){var I;for(I=0;I<k.length;I++){var M=k[I];M.getBendpoints().push(new p),this.createDummyNodesForBendpoints(M)}}k.forEach(function(j){O.add(j)})}}}if(O.size==E.length)break}},w.prototype.positionNodesRadially=function(E){for(var O=new v(0,0),T=Math.ceil(Math.sqrt(E.length)),C=0,P=0,R=0,k=new p(0,0),I=0;I<E.length;I++){I%T==0&&(R=0,P=C,I!=0&&(P+=f.DEFAULT_COMPONENT_SEPERATION),C=0);var M=E[I],j=m.findCenterOfTree(M);O.x=R,O.y=P,k=w.radialLayout(M,j,O),k.y>C&&(C=Math.floor(k.y)),R=Math.floor(k.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(d.WORLD_CENTER_X-k.x/2,d.WORLD_CENTER_Y-k.y/2))},w.radialLayout=function(E,O,T){var C=Math.max(this.maxDiagonalInTree(E),f.DEFAULT_RADIAL_SEPARATION);w.branchRadialLayout(O,null,0,359,0,C);var P=g.calculateBounds(E),R=new _;R.setDeviceOrgX(P.getMinX()),R.setDeviceOrgY(P.getMinY()),R.setWorldOrgX(T.x),R.setWorldOrgY(T.y);for(var k=0;k<E.length;k++){var I=E[k];I.transform(R)}var M=new p(P.getMaxX(),P.getMaxY());return R.inverseTransformPoint(M)},w.branchRadialLayout=function(E,O,T,C,P,R){var k=(C-T+1)/2;k<0&&(k+=180);var I=(k+T)%360,M=I*b.TWO_PI/360,j=P*Math.cos(M),L=P*Math.sin(M);E.setCenter(j,L);var F=[];F=F.concat(E.getEdges());var z=F.length;O!=null&&z--;for(var V=0,G=F.length,Y,ie=E.getEdgesBetween(O);ie.length>1;){var W=ie[0];ie.splice(0,1);var H=F.indexOf(W);H>=0&&F.splice(H,1),G--,z--}O!=null?Y=(F.indexOf(ie[0])+1)%G:Y=0;for(var Q=Math.abs(C-T)/z,J=Y;V!=z;J=++J%G){var ne=F[J].getOtherEnd(E);if(ne!=O){var K=(T+V*Q)%360,$=(K+Q)%360;w.branchRadialLayout(ne,E,K,$,P+R,R),V++}}},w.maxDiagonalInTree=function(E){for(var O=y.MIN_VALUE,T=0;T<E.length;T++){var C=E[T],P=C.getDiagonal();P>O&&(O=P)}return O},w.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},w.prototype.groupZeroDegreeMembers=function(){var E=this,O={};this.memberGroups={},this.idToDummyNode={};for(var T=[],C=this.graphManager.getAllNodes(),P=0;P<C.length;P++){var R=C[P],k=R.getParent();this.getNodeDegreeWithChildren(R)===0&&(k.id==null||!this.getToBeTiled(k))&&T.push(R)}for(var P=0;P<T.length;P++){var R=T[P],I=R.getParent().id;typeof O[I]>"u"&&(O[I]=[]),O[I]=O[I].concat(R)}Object.keys(O).forEach(function(M){if(O[M].length>1){var j="DummyCompound_"+M;E.memberGroups[j]=O[M];var L=O[M][0].getParent(),F=new l(E.graphManager);F.id=j,F.paddingLeft=L.paddingLeft||0,F.paddingRight=L.paddingRight||0,F.paddingBottom=L.paddingBottom||0,F.paddingTop=L.paddingTop||0,E.idToDummyNode[j]=F;var z=E.getGraphManager().add(E.newGraph(),F),V=L.getChild();V.add(F);for(var G=0;G<O[M].length;G++){var Y=O[M][G];V.remove(Y),z.add(Y)}}})},w.prototype.clearCompounds=function(){var E={},O={};this.performDFSOnCompounds();for(var T=0;T<this.compoundOrder.length;T++)O[this.compoundOrder[T].id]=this.compoundOrder[T],E[this.compoundOrder[T].id]=[].concat(this.compoundOrder[T].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[T].getChild()),this.compoundOrder[T].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(E,O)},w.prototype.clearZeroDegreeMembers=function(){var E=this,O=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(T){var C=E.idToDummyNode[T];O[T]=E.tileNodes(E.memberGroups[T],C.paddingLeft+C.paddingRight),C.rect.width=O[T].width,C.rect.height=O[T].height})},w.prototype.repopulateCompounds=function(){for(var E=this.compoundOrder.length-1;E>=0;E--){var O=this.compoundOrder[E],T=O.id,C=O.paddingLeft,P=O.paddingTop;this.adjustLocations(this.tiledMemberPack[T],O.rect.x,O.rect.y,C,P)}},w.prototype.repopulateZeroDegreeMembers=function(){var E=this,O=this.tiledZeroDegreePack;Object.keys(O).forEach(function(T){var C=E.idToDummyNode[T],P=C.paddingLeft,R=C.paddingTop;E.adjustLocations(O[T],C.rect.x,C.rect.y,P,R)})},w.prototype.getToBeTiled=function(E){var O=E.id;if(this.toBeTiled[O]!=null)return this.toBeTiled[O];var T=E.getChild();if(T==null)return this.toBeTiled[O]=!1,!1;for(var C=T.getNodes(),P=0;P<C.length;P++){var R=C[P];if(this.getNodeDegree(R)>0)return this.toBeTiled[O]=!1,!1;if(R.getChild()==null){this.toBeTiled[R.id]=!1;continue}if(!this.getToBeTiled(R))return this.toBeTiled[O]=!1,!1}return this.toBeTiled[O]=!0,!0},w.prototype.getNodeDegree=function(E){E.id;for(var O=E.getEdges(),T=0,C=0;C<O.length;C++){var P=O[C];P.getSource().id!==P.getTarget().id&&(T=T+1)}return T},w.prototype.getNodeDegreeWithChildren=function(E){var O=this.getNodeDegree(E);if(E.getChild()==null)return O;for(var T=E.getChild().getNodes(),C=0;C<T.length;C++){var P=T[C];O+=this.getNodeDegreeWithChildren(P)}return O},w.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},w.prototype.fillCompexOrderByDFS=function(E){for(var O=0;O<E.length;O++){var T=E[O];T.getChild()!=null&&this.fillCompexOrderByDFS(T.getChild().getNodes()),this.getToBeTiled(T)&&this.compoundOrder.push(T)}},w.prototype.adjustLocations=function(E,O,T,C,P){O+=C,T+=P;for(var R=O,k=0;k<E.rows.length;k++){var I=E.rows[k];O=R;for(var M=0,j=0;j<I.length;j++){var L=I[j];L.rect.x=O,L.rect.y=T,O+=L.rect.width+E.horizontalPadding,L.rect.height>M&&(M=L.rect.height)}T+=M+E.verticalPadding}},w.prototype.tileCompoundMembers=function(E,O){var T=this;this.tiledMemberPack=[],Object.keys(E).forEach(function(C){var P=O[C];T.tiledMemberPack[C]=T.tileNodes(E[C],P.paddingLeft+P.paddingRight),P.rect.width=T.tiledMemberPack[C].width,P.rect.height=T.tiledMemberPack[C].height})},w.prototype.tileNodes=function(E,O){var T=f.TILING_PADDING_VERTICAL,C=f.TILING_PADDING_HORIZONTAL,P={rows:[],rowWidth:[],rowHeight:[],width:0,height:O,verticalPadding:T,horizontalPadding:C};E.sort(function(I,M){return I.rect.width*I.rect.height>M.rect.width*M.rect.height?-1:I.rect.width*I.rect.height<M.rect.width*M.rect.height?1:0});for(var R=0;R<E.length;R++){var k=E[R];P.rows.length==0?this.insertNodeToRow(P,k,0,O):this.canAddHorizontal(P,k.rect.width,k.rect.height)?this.insertNodeToRow(P,k,this.getShortestRowIndex(P),O):this.insertNodeToRow(P,k,P.rows.length,O),this.shiftToLastRow(P)}return P},w.prototype.insertNodeToRow=function(E,O,T,C){var P=C;if(T==E.rows.length){var R=[];E.rows.push(R),E.rowWidth.push(P),E.rowHeight.push(0)}var k=E.rowWidth[T]+O.rect.width;E.rows[T].length>0&&(k+=E.horizontalPadding),E.rowWidth[T]=k,E.width<k&&(E.width=k);var I=O.rect.height;T>0&&(I+=E.verticalPadding);var M=0;I>E.rowHeight[T]&&(M=E.rowHeight[T],E.rowHeight[T]=I,M=E.rowHeight[T]-M),E.height+=M,E.rows[T].push(O)},w.prototype.getShortestRowIndex=function(E){for(var O=-1,T=Number.MAX_VALUE,C=0;C<E.rows.length;C++)E.rowWidth[C]<T&&(O=C,T=E.rowWidth[C]);return O},w.prototype.getLongestRowIndex=function(E){for(var O=-1,T=Number.MIN_VALUE,C=0;C<E.rows.length;C++)E.rowWidth[C]>T&&(O=C,T=E.rowWidth[C]);return O},w.prototype.canAddHorizontal=function(E,O,T){var C=this.getShortestRowIndex(E);if(C<0)return!0;var P=E.rowWidth[C];if(P+E.horizontalPadding+O<=E.width)return!0;var R=0;E.rowHeight[C]<T&&C>0&&(R=T+E.verticalPadding-E.rowHeight[C]);var k;E.width-P>=O+E.horizontalPadding?k=(E.height+R)/(P+O+E.horizontalPadding):k=(E.height+R)/E.width,R=T+E.verticalPadding;var I;return E.width<O?I=(E.height+R)/O:I=(E.height+R)/E.width,I<1&&(I=1/I),k<1&&(k=1/k),k<I},w.prototype.shiftToLastRow=function(E){var O=this.getLongestRowIndex(E),T=E.rowWidth.length-1,C=E.rows[O],P=C[C.length-1],R=P.width+E.horizontalPadding;if(E.width-E.rowWidth[T]>R&&O!=T){C.splice(-1,1),E.rows[T].push(P),E.rowWidth[O]=E.rowWidth[O]-R,E.rowWidth[T]=E.rowWidth[T]+R,E.width=E.rowWidth[instance.getLongestRowIndex(E)];for(var k=Number.MIN_VALUE,I=0;I<C.length;I++)C[I].height>k&&(k=C[I].height);O>0&&(k+=E.verticalPadding);var M=E.rowHeight[O]+E.rowHeight[T];E.rowHeight[O]=k,E.rowHeight[T]<P.height+E.verticalPadding&&(E.rowHeight[T]=P.height+E.verticalPadding);var j=E.rowHeight[O]+E.rowHeight[T];E.height+=j-M,this.shiftToLastRow(E)}},w.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},w.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},w.prototype.reduceTrees=function(){for(var E=[],O=!0,T;O;){var C=this.graphManager.getAllNodes(),P=[];O=!1;for(var R=0;R<C.length;R++)T=C[R],T.getEdges().length==1&&!T.getEdges()[0].isInterGraph&&T.getChild()==null&&(P.push([T,T.getEdges()[0],T.getOwner()]),O=!0);if(O==!0){for(var k=[],I=0;I<P.length;I++)P[I][0].getEdges().length==1&&(k.push(P[I]),P[I][0].getOwner().remove(P[I][0]));E.push(k),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=E},w.prototype.growTree=function(E){for(var O=E.length,T=E[O-1],C,P=0;P<T.length;P++)C=T[P],this.findPlaceforPrunedNode(C),C[2].add(C[0]),C[2].add(C[1],C[1].source,C[1].target);E.splice(E.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},w.prototype.findPlaceforPrunedNode=function(E){var O,T,C=E[0];C==E[1].source?T=E[1].target:T=E[1].source;var P=T.startX,R=T.finishX,k=T.startY,I=T.finishY,M=0,j=0,L=0,F=0,z=[M,L,j,F];if(k>0)for(var V=P;V<=R;V++)z[0]+=this.grid[V][k-1].length+this.grid[V][k].length-1;if(R<this.grid.length-1)for(var V=k;V<=I;V++)z[1]+=this.grid[R+1][V].length+this.grid[R][V].length-1;if(I<this.grid[0].length-1)for(var V=P;V<=R;V++)z[2]+=this.grid[V][I+1].length+this.grid[V][I].length-1;if(P>0)for(var V=k;V<=I;V++)z[3]+=this.grid[P-1][V].length+this.grid[P][V].length-1;for(var G=y.MAX_VALUE,Y,ie,W=0;W<z.length;W++)z[W]<G?(G=z[W],Y=1,ie=W):z[W]==G&&Y++;if(Y==3&&G==0)z[0]==0&&z[1]==0&&z[2]==0?O=1:z[0]==0&&z[1]==0&&z[3]==0?O=0:z[0]==0&&z[2]==0&&z[3]==0?O=3:z[1]==0&&z[2]==0&&z[3]==0&&(O=2);else if(Y==2&&G==0){var H=Math.floor(Math.random()*2);z[0]==0&&z[1]==0?H==0?O=0:O=1:z[0]==0&&z[2]==0?H==0?O=0:O=2:z[0]==0&&z[3]==0?H==0?O=0:O=3:z[1]==0&&z[2]==0?H==0?O=1:O=2:z[1]==0&&z[3]==0?H==0?O=1:O=3:H==0?O=2:O=3}else if(Y==4&&G==0){var H=Math.floor(Math.random()*4);O=H}else O=ie;O==0?C.setCenter(T.getCenterX(),T.getCenterY()-T.getHeight()/2-h.DEFAULT_EDGE_LENGTH-C.getHeight()/2):O==1?C.setCenter(T.getCenterX()+T.getWidth()/2+h.DEFAULT_EDGE_LENGTH+C.getWidth()/2,T.getCenterY()):O==2?C.setCenter(T.getCenterX(),T.getCenterY()+T.getHeight()/2+h.DEFAULT_EDGE_LENGTH+C.getHeight()/2):C.setCenter(T.getCenterX()-T.getWidth()/2-h.DEFAULT_EDGE_LENGTH-C.getWidth()/2,T.getCenterY())},n.exports=w}),(function(n,i,o){var a={};a.layoutBase=o(0),a.CoSEConstants=o(1),a.CoSEEdge=o(2),a.CoSEGraph=o(3),a.CoSEGraphManager=o(4),a.CoSELayout=o(6),a.CoSENode=o(5),n.exports=a})])})})(_d)),_d.exports}var z3=bd.exports,QO;function V3(){return QO||(QO=1,(function(r,e){(function(n,i){r.exports=i(U3())})(z3,function(t){return(function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=1)})([(function(n,i){n.exports=t}),(function(n,i,o){var a=o(0).layoutBase.LayoutConstants,s=o(0).layoutBase.FDLayoutConstants,u=o(0).CoSEConstants,l=o(0).CoSELayout,c=o(0).CoSENode,f=o(0).layoutBase.PointD,h=o(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(b,g){var _={};for(var w in b)_[w]=b[w];for(var w in g)_[w]=g[w];return _}function p(b){this.options=v(d,b),m(this.options)}var m=function(g){g.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=g.nodeRepulsion),g.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=g.idealEdgeLength),g.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=g.edgeElasticity),g.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=g.nestingFactor),g.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=g.gravity),g.numIter!=null&&(u.MAX_ITERATIONS=s.MAX_ITERATIONS=g.numIter),g.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=g.gravityRange),g.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=g.gravityCompound),g.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=g.gravityRangeCompound),g.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=g.initialEnergyOnIncremental),g.quality=="draft"?a.QUALITY=0:g.quality=="proof"?a.QUALITY=2:a.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=g.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=!g.randomize,u.ANIMATE=s.ANIMATE=a.ANIMATE=g.animate,u.TILE=g.tile,u.TILING_PADDING_VERTICAL=typeof g.tilingPaddingVertical=="function"?g.tilingPaddingVertical.call():g.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof g.tilingPaddingHorizontal=="function"?g.tilingPaddingHorizontal.call():g.tilingPaddingHorizontal};p.prototype.run=function(){var b,g,_=this.options;this.idToLNode={};var w=this.layout=new l,x=this;x.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var E=w.newGraphManager();this.gm=E;var O=this.options.eles.nodes(),T=this.options.eles.edges();this.root=E.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(O),w);for(var C=0;C<T.length;C++){var P=T[C],R=this.idToLNode[P.data("source")],k=this.idToLNode[P.data("target")];if(R!==k&&R.getEdgesBetween(k).length==0){var I=E.add(w.newEdge(),R,k);I.id=P.id()}}var M=function(F,z){typeof F=="number"&&(F=z);var V=F.data("id"),G=x.idToLNode[V];return{x:G.getRect().getCenterX(),y:G.getRect().getCenterY()}},j=function L(){for(var F=function(){_.fit&&_.cy.fit(_.eles,_.padding),b||(b=!0,x.cy.one("layoutready",_.ready),x.cy.trigger({type:"layoutready",layout:x}))},z=x.options.refresh,V,G=0;G<z&&!V;G++)V=x.stopped||x.layout.tick();if(V){w.checkLayoutSuccess()&&!w.isSubLayout&&w.doPostLayout(),w.tilingPostLayout&&w.tilingPostLayout(),w.isLayoutFinished=!0,x.options.eles.nodes().positions(M),F(),x.cy.one("layoutstop",x.options.stop),x.cy.trigger({type:"layoutstop",layout:x}),g&&cancelAnimationFrame(g),b=!1;return}var Y=x.layout.getPositionsData();_.eles.nodes().positions(function(ie,W){if(typeof ie=="number"&&(ie=W),!ie.isParent()){for(var H=ie.id(),Q=Y[H],J=ie;Q==null&&(Q=Y[J.data("parent")]||Y["DummyCompound_"+J.data("parent")],Y[H]=Q,J=J.parent()[0],J!=null););return Q!=null?{x:Q.x,y:Q.y}:{x:ie.position("x"),y:ie.position("y")}}}),F(),g=requestAnimationFrame(L)};return w.addListener("layoutstarted",function(){x.options.animate==="during"&&(g=requestAnimationFrame(j))}),w.runLayout(),this.options.animate!=="during"&&(x.options.eles.nodes().not(":parent").layoutPositions(x,x.options,M),b=!1),this},p.prototype.getTopMostNodes=function(b){for(var g={},_=0;_<b.length;_++)g[b[_].id()]=!0;var w=b.filter(function(x,E){typeof x=="number"&&(x=E);for(var O=x.parent()[0];O!=null;){if(g[O.id()])return!1;O=O.parent()[0]}return!0});return w},p.prototype.processChildrenList=function(b,g,_){for(var w=g.length,x=0;x<w;x++){var E=g[x],O=E.children(),T,C=E.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(E.outerWidth()!=null&&E.outerHeight()!=null?T=b.add(new c(_.graphManager,new f(E.position("x")-C.w/2,E.position("y")-C.h/2),new h(parseFloat(C.w),parseFloat(C.h)))):T=b.add(new c(this.graphManager)),T.id=E.data("id"),T.paddingLeft=parseInt(E.css("padding")),T.paddingTop=parseInt(E.css("padding")),T.paddingRight=parseInt(E.css("padding")),T.paddingBottom=parseInt(E.css("padding")),this.options.nodeDimensionsIncludeLabels&&E.isParent()){var P=E.boundingBox({includeLabels:!0,includeNodes:!1}).w,R=E.boundingBox({includeLabels:!0,includeNodes:!1}).h,k=E.css("text-halign");T.labelWidth=P,T.labelHeight=R,T.labelPos=k}if(this.idToLNode[E.data("id")]=T,isNaN(T.rect.x)&&(T.rect.x=0),isNaN(T.rect.y)&&(T.rect.y=0),O!=null&&O.length>0){var I;I=_.getGraphManager().add(_.newGraph(),T),this.processChildrenList(I,O,_)}}},p.prototype.stop=function(){return this.stopped=!0,this};var y=function(g){g("layout","cose-bilkent",p)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y})])})})(bd)),bd.exports}var G3=V3();const q3=sv(G3);_a.use(q3);const W3="cose-bilkent",H3=(r,e)=>{const t=_a({headless:!0,styleEnabled:!1});t.add(r);const n={};return t.layout({name:W3,animate:!1,spacingFactor:e,quality:"default",tile:!1,randomize:!0,stop:()=>{t.nodes().forEach(o=>{n[o.id()]={...o.position()}})}}).run(),{positions:n}};class Y3{start(){}postMessage(e){const{elements:t,spacingFactor:n}=e,i=H3(t,n);this.onmessage({data:i})}onmessage(){}close(){}}const X3={port:new Y3},$3=()=>new SharedWorker(new URL("/assets/CoseBilkentLayout.worker-NF9rjvUb.js",import.meta.url),{type:"module",name:"CoseBilkentLayout"});var Cy,JO;function Zb(){if(JO)return Cy;JO=1;var r=vi();Cy=i;var e="\0",t="\0",n="";function i(c){this._isDirected=r.has(c,"directed")?c.directed:!0,this._isMultigraph=r.has(c,"multigraph")?c.multigraph:!1,this._isCompound=r.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var h=arguments,d=this;return r.each(c,function(v){h.length>1?d.setNode(v,f):d.setNode(v)}),this},i.prototype.setNode=function(c,f){return r.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return r.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(r.has(this._nodes,c)){var h=function(d){f.removeEdge(f._edgeObjs[d])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],r.each(this.children(c),function(d){f.setParent(d)}),delete this._children[c]),r.each(r.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],r.each(r.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(f))f=t;else{f+="";for(var h=f;!r.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==t)return f}},i.prototype.children=function(c){if(r.isUndefined(c)&&(c=t),this._isCompound){var f=this._children[c];if(f)return r.keys(f)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return r.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return r.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return r.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;r.each(this._nodes,function(p,m){c(m)&&f.setNode(m,p)}),r.each(this._edgeObjs,function(p){f.hasNode(p.v)&&f.hasNode(p.w)&&f.setEdge(p,h.edge(p))});var d={};function v(p){var m=h.parent(p);return m===void 0||f.hasNode(m)?(d[p]=m,m):m in d?d[m]:v(m)}return this._isCompound&&r.each(f.nodes(),function(p){f.setParent(p,v(p))}),f},i.prototype.setDefaultEdgeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var h=this,d=arguments;return r.reduce(c,function(v,p){return d.length>1?h.setEdge(v,p,f):h.setEdge(v,p),p}),this},i.prototype.setEdge=function(){var c,f,h,d,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,f=p.w,h=p.name,arguments.length===2&&(d=arguments[1],v=!0)):(c=p,f=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],v=!0)),c=""+c,f=""+f,r.isUndefined(h)||(h=""+h);var m=s(this._isDirected,c,f,h);if(r.has(this._edgeLabels,m))return v&&(this._edgeLabels[m]=d),this;if(!r.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[m]=v?d:this._defaultEdgeLabelFn(c,f,h);var y=u(this._isDirected,c,f,h);return c=y.v,f=y.w,Object.freeze(y),this._edgeObjs[m]=y,o(this._preds[f],c),o(this._sucs[c],f),this._in[f][m]=y,this._out[c][m]=y,this._edgeCount++,this},i.prototype.edge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h);return r.has(this._edgeLabels,d)},i.prototype.removeEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h),v=this._edgeObjs[d];return v&&(c=v.v,f=v.w,delete this._edgeLabels[d],delete this._edgeObjs[d],a(this._preds[f],c),a(this._sucs[c],f),delete this._in[f][d],delete this._out[c][d],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var h=this._in[c];if(h){var d=r.values(h);return f?r.filter(d,function(v){return v.v===f}):d}},i.prototype.outEdges=function(c,f){var h=this._out[c];if(h){var d=r.values(h);return f?r.filter(d,function(v){return v.w===f}):d}},i.prototype.nodeEdges=function(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))};function o(c,f){c[f]?c[f]++:c[f]=1}function a(c,f){--c[f]||delete c[f]}function s(c,f,h,d){var v=""+f,p=""+h;if(!c&&v>p){var m=v;v=p,p=m}return v+n+p+n+(r.isUndefined(d)?e:d)}function u(c,f,h,d){var v=""+f,p=""+h;if(!c&&v>p){var m=v;v=p,p=m}var y={v,w:p};return d&&(y.name=d),y}function l(c,f){return s(c,f.v,f.w,f.name)}return Cy}var Py,ex;function K3(){return ex||(ex=1,Py="2.1.8"),Py}var Ay,tx;function Z3(){return tx||(tx=1,Ay={Graph:Zb(),version:K3()}),Ay}var Ry,rx;function Q3(){if(rx)return Ry;rx=1;var r=vi(),e=Zb();Ry={write:t,read:o};function t(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:i(a)};return r.isUndefined(a.graph())||(s.value=r.clone(a.graph())),s}function n(a){return r.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return r.isUndefined(u)||(c.value=u),r.isUndefined(l)||(c.parent=l),c})}function i(a){return r.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return r.isUndefined(s.name)||(l.name=s.name),r.isUndefined(u)||(l.value=u),l})}function o(a){var s=new e(a.options).setGraph(a.value);return r.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),r.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Ry}var ky,nx;function J3(){if(nx)return ky;nx=1;var r=vi();ky=e;function e(t){var n={},i=[],o;function a(s){r.has(n,s)||(n[s]=!0,o.push(s),r.each(t.successors(s),a),r.each(t.predecessors(s),a))}return r.each(t.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return ky}var Iy,ix;function EP(){if(ix)return Iy;ix=1;var r=vi();Iy=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var o=this._arr,a=o.length;return i[t]=a,o.push({key:t,priority:n}),this._decrease(a),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var i=this._keyIndices[t];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(t){var n=this._arr,i=2*t,o=i+1,a=t;i<n.length&&(a=n[i].priority<n[a].priority?i:a,o<n.length&&(a=n[o].priority<n[a].priority?o:a),a!==t&&(this._swap(t,a),this._heapify(a)))},e.prototype._decrease=function(t){for(var n=this._arr,i=n[t].priority,o;t!==0&&(o=t>>1,!(n[o].priority<i));)this._swap(t,o),t=o},e.prototype._swap=function(t,n){var i=this._arr,o=this._keyIndices,a=i[t],s=i[n];i[t]=s,i[n]=a,o[s.key]=t,o[a.key]=n},Iy}var Dy,ox;function OP(){if(ox)return Dy;ox=1;var r=vi(),e=EP();Dy=n;var t=r.constant(1);function n(o,a,s,u){return i(o,String(a),s||t,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new e,f,h,d=function(v){var p=v.v!==f?v.v:v.w,m=l[p],y=s(v),b=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);b<m.distance&&(m.distance=b,m.predecessor=f,c.decrease(p,b))};for(o.nodes().forEach(function(v){var p=v===a?0:Number.POSITIVE_INFINITY;l[v]={distance:p},c.add(v,p)});c.size()>0&&(f=c.removeMin(),h=l[f],h.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(d);return l}return Dy}var My,ax;function e4(){if(ax)return My;ax=1;var r=OP(),e=vi();My=t;function t(n,i,o){return e.transform(n.nodes(),function(a,s){a[s]=r(n,s,i,o)},{})}return My}var Ny,sx;function xP(){if(sx)return Ny;sx=1;var r=vi();Ny=e;function e(t){var n=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),t.successors(u).forEach(function(h){r.has(o,h)?o[h].onStack&&(l.lowlink=Math.min(l.lowlink,o[h].index)):(s(h),l.lowlink=Math.min(l.lowlink,o[h].lowlink))}),l.lowlink===l.index){var c=[],f;do f=i.pop(),o[f].onStack=!1,c.push(f);while(u!==f);a.push(c)}}return t.nodes().forEach(function(u){r.has(o,u)||s(u)}),a}return Ny}var Ly,ux;function t4(){if(ux)return Ly;ux=1;var r=vi(),e=xP();Ly=t;function t(n){return r.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return Ly}var jy,lx;function r4(){if(lx)return jy;lx=1;var r=vi();jy=t;var e=r.constant(1);function t(i,o,a){return n(i,o||e,a||function(s){return i.outEdges(s)})}function n(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var f=c.v===l?c.w:c.v,h=o(c);s[l][f]={distance:h,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(f){var h=s[f];u.forEach(function(d){var v=h[l],p=c[d],m=h[d],y=v.distance+p.distance;y<m.distance&&(m.distance=y,m.predecessor=p.predecessor)})})}),s}return jy}var Fy,cx;function SP(){if(cx)return Fy;cx=1;var r=vi();Fy=e,e.CycleException=t;function e(n){var i={},o={},a=[];function s(u){if(r.has(o,u))throw new t;r.has(i,u)||(o[u]=!0,i[u]=!0,r.each(n.predecessors(u),s),delete o[u],a.push(u))}if(r.each(n.sinks(),s),r.size(i)!==n.nodeCount())throw new t;return a}function t(){}return t.prototype=new Error,Fy}var By,fx;function n4(){if(fx)return By;fx=1;var r=SP();By=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return By}var Uy,hx;function TP(){if(hx)return Uy;hx=1;var r=vi();Uy=e;function e(n,i,o){r.isArray(i)||(i=[i]);var a=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return r.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,o==="post",u,a,s)}),s}function t(n,i,o,a,s,u){r.has(a,i)||(a[i]=!0,o||u.push(i),r.each(s(i),function(l){t(n,l,o,a,s,u)}),o&&u.push(i))}return Uy}var zy,dx;function i4(){if(dx)return zy;dx=1;var r=TP();zy=e;function e(t,n){return r(t,n,"post")}return zy}var Vy,vx;function o4(){if(vx)return Vy;vx=1;var r=TP();Vy=e;function e(t,n){return r(t,n,"pre")}return Vy}var Gy,px;function a4(){if(px)return Gy;px=1;var r=vi(),e=Zb(),t=EP();Gy=n;function n(i,o){var a=new e,s={},u=new t,l;function c(h){var d=h.v===l?h.w:h.v,v=u.priority(d);if(v!==void 0){var p=o(h);p<v&&(s[d]=l,u.decrease(d,p))}}if(i.nodeCount()===0)return a;r.each(i.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),u.decrease(i.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),r.has(s,l))a.setEdge(l,s[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(c)}return a}return Gy}var qy,gx;function s4(){return gx||(gx=1,qy={components:J3(),dijkstra:OP(),dijkstraAll:e4(),findCycles:t4(),floydWarshall:r4(),isAcyclic:n4(),postorder:i4(),preorder:o4(),prim:a4(),tarjan:xP(),topsort:SP()}),qy}var Wy,yx;function hi(){if(yx)return Wy;yx=1;var r=Z3();return Wy={Graph:r.Graph,json:Q3(),alg:s4(),version:r.version},Wy}var Hy,mx;function u4(){if(mx)return Hy;mx=1,Hy=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},r.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},r.prototype.toString=function(){for(var n=[],i=this._sentinel,o=i._prev;o!==i;)n.push(JSON.stringify(o,t)),o=o._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,i){if(n!=="_next"&&n!=="_prev")return i}return Hy}var Yy,bx;function l4(){if(bx)return Yy;bx=1;var r=yr(),e=hi().Graph,t=u4();Yy=i;var n=r.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var f=s(l,c||n),h=o(f.graph,f.buckets,f.zeroIdx);return r.flatten(r.map(h,function(d){return l.outEdges(d.v,d.w)}),!0)}function o(l,c,f){for(var h=[],d=c[c.length-1],v=c[0],p;l.nodeCount();){for(;p=v.dequeue();)a(l,c,f,p);for(;p=d.dequeue();)a(l,c,f,p);if(l.nodeCount()){for(var m=c.length-2;m>0;--m)if(p=c[m].dequeue(),p){h=h.concat(a(l,c,f,p,!0));break}}}return h}function a(l,c,f,h,d){var v=d?[]:void 0;return r.forEach(l.inEdges(h.v),function(p){var m=l.edge(p),y=l.node(p.v);d&&v.push({v:p.v,w:p.w}),y.out-=m,u(c,f,y)}),r.forEach(l.outEdges(h.v),function(p){var m=l.edge(p),y=p.w,b=l.node(y);b.in-=m,u(c,f,b)}),l.removeNode(h.v),v}function s(l,c){var f=new e,h=0,d=0;r.forEach(l.nodes(),function(m){f.setNode(m,{v:m,in:0,out:0})}),r.forEach(l.edges(),function(m){var y=f.edge(m.v,m.w)||0,b=c(m),g=y+b;f.setEdge(m.v,m.w,g),d=Math.max(d,f.node(m.v).out+=b),h=Math.max(h,f.node(m.w).in+=b)});var v=r.range(d+h+3).map(function(){return new t}),p=h+1;return r.forEach(f.nodes(),function(m){u(v,p,f.node(m))}),{graph:f,buckets:v,zeroIdx:p}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return Yy}var Xy,_x;function c4(){if(_x)return Xy;_x=1;var r=yr(),e=l4();Xy={run:t,undo:i};function t(o){var a=o.graph().acyclicer==="greedy"?e(o,s(o)):n(o);r.forEach(a,function(u){var l=o.edge(u);o.removeEdge(u),l.forwardName=u.name,l.reversed=!0,o.setEdge(u.w,u.v,l,r.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function n(o){var a=[],s={},u={};function l(c){r.has(u,c)||(u[c]=!0,s[c]=!0,r.forEach(o.outEdges(c),function(f){r.has(s,f.w)?a.push(f):l(f.w)}),delete s[c])}return r.forEach(o.nodes(),l),a}function i(o){r.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var u=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,u)}})}return Xy}var $y,wx;function Gn(){if(wx)return $y;wx=1;var r=yr(),e=hi().Graph;$y={addDummyNode:t,simplify:n,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:h,partition:d,time:v,notime:p};function t(m,y,b,g){var _;do _=r.uniqueId(g);while(m.hasNode(_));return b.dummy=y,m.setNode(_,b),_}function n(m){var y=new e().setGraph(m.graph());return r.forEach(m.nodes(),function(b){y.setNode(b,m.node(b))}),r.forEach(m.edges(),function(b){var g=y.edge(b.v,b.w)||{weight:0,minlen:1},_=m.edge(b);y.setEdge(b.v,b.w,{weight:g.weight+_.weight,minlen:Math.max(g.minlen,_.minlen)})}),y}function i(m){var y=new e({multigraph:m.isMultigraph()}).setGraph(m.graph());return r.forEach(m.nodes(),function(b){m.children(b).length||y.setNode(b,m.node(b))}),r.forEach(m.edges(),function(b){y.setEdge(b,m.edge(b))}),y}function o(m){var y=r.map(m.nodes(),function(b){var g={};return r.forEach(m.outEdges(b),function(_){g[_.w]=(g[_.w]||0)+m.edge(_).weight}),g});return r.zipObject(m.nodes(),y)}function a(m){var y=r.map(m.nodes(),function(b){var g={};return r.forEach(m.inEdges(b),function(_){g[_.v]=(g[_.v]||0)+m.edge(_).weight}),g});return r.zipObject(m.nodes(),y)}function s(m,y){var b=m.x,g=m.y,_=y.x-b,w=y.y-g,x=m.width/2,E=m.height/2;if(!_&&!w)throw new Error("Not possible to find intersection inside of the rectangle");var O,T;return Math.abs(w)*x>Math.abs(_)*E?(w<0&&(E=-E),O=E*_/w,T=E):(_<0&&(x=-x),O=x,T=x*w/_),{x:b+O,y:g+T}}function u(m){var y=r.map(r.range(h(m)+1),function(){return[]});return r.forEach(m.nodes(),function(b){var g=m.node(b),_=g.rank;r.isUndefined(_)||(y[_][g.order]=b)}),y}function l(m){var y=r.min(r.map(m.nodes(),function(b){return m.node(b).rank}));r.forEach(m.nodes(),function(b){var g=m.node(b);r.has(g,"rank")&&(g.rank-=y)})}function c(m){var y=r.min(r.map(m.nodes(),function(w){return m.node(w).rank})),b=[];r.forEach(m.nodes(),function(w){var x=m.node(w).rank-y;b[x]||(b[x]=[]),b[x].push(w)});var g=0,_=m.graph().nodeRankFactor;r.forEach(b,function(w,x){r.isUndefined(w)&&x%_!==0?--g:g&&r.forEach(w,function(E){m.node(E).rank+=g})})}function f(m,y,b,g){var _={width:0,height:0};return arguments.length>=4&&(_.rank=b,_.order=g),t(m,"border",_,y)}function h(m){return r.max(r.map(m.nodes(),function(y){var b=m.node(y).rank;if(!r.isUndefined(b))return b}))}function d(m,y){var b={lhs:[],rhs:[]};return r.forEach(m,function(g){y(g)?b.lhs.push(g):b.rhs.push(g)}),b}function v(m,y){var b=r.now();try{return y()}finally{m+""+(r.now()-b)}}function p(m,y){return y()}return $y}var Ky,Ex;function f4(){if(Ex)return Ky;Ex=1;var r=yr(),e=Gn();Ky={run:t,undo:i};function t(o){o.graph().dummyChains=[],r.forEach(o.edges(),function(a){n(o,a)})}function n(o,a){var s=a.v,u=o.node(s).rank,l=a.w,c=o.node(l).rank,f=a.name,h=o.edge(a),d=h.labelRank;if(c!==u+1){o.removeEdge(a);var v,p,m;for(m=0,++u;u<c;++m,++u)h.points=[],p={width:0,height:0,edgeLabel:h,edgeObj:a,rank:u},v=e.addDummyNode(o,"edge",p,"_d"),u===d&&(p.width=h.width,p.height=h.height,p.dummy="edge-label",p.labelpos=h.labelpos),o.setEdge(s,v,{weight:h.weight},f),m===0&&o.graph().dummyChains.push(v),s=v;o.setEdge(s,l,{weight:h.weight},f)}}function i(o){r.forEach(o.graph().dummyChains,function(a){var s=o.node(a),u=s.edgeLabel,l;for(o.setEdge(s.edgeObj,u);s.dummy;)l=o.successors(a)[0],o.removeNode(a),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),a=l,s=o.node(a)})}return Ky}var Zy,Ox;function Hd(){if(Ox)return Zy;Ox=1;var r=yr();Zy={longestPath:e,slack:t};function e(n){var i={};function o(a){var s=n.node(a);if(r.has(i,a))return s.rank;i[a]=!0;var u=r.min(r.map(n.outEdges(a),function(l){return o(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}r.forEach(n.sources(),o)}function t(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return Zy}var Qy,xx;function CP(){if(xx)return Qy;xx=1;var r=yr(),e=hi().Graph,t=Hd().slack;Qy=n;function n(s){var u=new e({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var f,h;i(u,s)<c;)f=o(u,s),h=u.hasNode(f.v)?t(s,f):-t(s,f),a(u,s,h);return u}function i(s,u){function l(c){r.forEach(u.nodeEdges(c),function(f){var h=f.v,d=c===h?f.w:h;!s.hasNode(d)&&!t(u,f)&&(s.setNode(d,{}),s.setEdge(c,d,{}),l(d))})}return r.forEach(s.nodes(),l),s.nodeCount()}function o(s,u){return r.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return t(u,l)})}function a(s,u,l){r.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return Qy}var Jy,Sx;function h4(){if(Sx)return Jy;Sx=1;var r=yr(),e=CP(),t=Hd().slack,n=Hd().longestPath,i=hi().alg.preorder,o=hi().alg.postorder,a=Gn().simplify;Jy=s,s.initLowLimValues=f,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=d,s.enterEdge=v,s.exchangeEdges=p;function s(g){g=a(g),n(g);var _=e(g);f(_),u(_,g);for(var w,x;w=d(_);)x=v(_,g,w),p(_,g,w,x)}function u(g,_){var w=o(g,g.nodes());w=w.slice(0,w.length-1),r.forEach(w,function(x){l(g,_,x)})}function l(g,_,w){var x=g.node(w),E=x.parent;g.edge(w,E).cutvalue=c(g,_,w)}function c(g,_,w){var x=g.node(w),E=x.parent,O=!0,T=_.edge(w,E),C=0;return T||(O=!1,T=_.edge(E,w)),C=T.weight,r.forEach(_.nodeEdges(w),function(P){var R=P.v===w,k=R?P.w:P.v;if(k!==E){var I=R===O,M=_.edge(P).weight;if(C+=I?M:-M,y(g,w,k)){var j=g.edge(w,k).cutvalue;C+=I?-j:j}}}),C}function f(g,_){arguments.length<2&&(_=g.nodes()[0]),h(g,{},1,_)}function h(g,_,w,x,E){var O=w,T=g.node(x);return _[x]=!0,r.forEach(g.neighbors(x),function(C){r.has(_,C)||(w=h(g,_,w,C,x))}),T.low=O,T.lim=w++,E?T.parent=E:delete T.parent,w}function d(g){return r.find(g.edges(),function(_){return g.edge(_).cutvalue<0})}function v(g,_,w){var x=w.v,E=w.w;_.hasEdge(x,E)||(x=w.w,E=w.v);var O=g.node(x),T=g.node(E),C=O,P=!1;O.lim>T.lim&&(C=T,P=!0);var R=r.filter(_.edges(),function(k){return P===b(g,g.node(k.v),C)&&P!==b(g,g.node(k.w),C)});return r.minBy(R,function(k){return t(_,k)})}function p(g,_,w,x){var E=w.v,O=w.w;g.removeEdge(E,O),g.setEdge(x.v,x.w,{}),f(g),u(g,_),m(g,_)}function m(g,_){var w=r.find(g.nodes(),function(E){return!_.node(E).parent}),x=i(g,w);x=x.slice(1),r.forEach(x,function(E){var O=g.node(E).parent,T=_.edge(E,O),C=!1;T||(T=_.edge(O,E),C=!0),_.node(E).rank=_.node(O).rank+(C?T.minlen:-T.minlen)})}function y(g,_,w){return g.hasEdge(_,w)}function b(g,_,w){return w.low<=_.lim&&_.lim<=w.lim}return Jy}var em,Tx;function d4(){if(Tx)return em;Tx=1;var r=Hd(),e=r.longestPath,t=CP(),n=h4();em=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":a(u);break;case"longest-path":o(u);break;default:s(u)}}var o=e;function a(u){e(u),t(u)}function s(u){n(u)}return em}var tm,Cx;function v4(){if(Cx)return tm;Cx=1;var r=yr();tm=e;function e(i){var o=n(i);r.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),u=s.edgeObj,l=t(i,o,u.v,u.w),c=l.path,f=l.lca,h=0,d=c[h],v=!0;a!==u.w;){if(s=i.node(a),v){for(;(d=c[h])!==f&&i.node(d).maxRank<s.rank;)h++;d===f&&(v=!1)}if(!v){for(;h<c.length-1&&i.node(d=c[h+1]).minRank<=s.rank;)h++;d=c[h]}i.setParent(a,d),a=i.successors(a)[0]}})}function t(i,o,a,s){var u=[],l=[],c=Math.min(o[a].low,o[s].low),f=Math.max(o[a].lim,o[s].lim),h,d;h=a;do h=i.parent(h),u.push(h);while(h&&(o[h].low>c||f>o[h].lim));for(d=h,h=s;(h=i.parent(h))!==d;)l.push(h);return{path:u.concat(l.reverse()),lca:d}}function n(i){var o={},a=0;function s(u){var l=a;r.forEach(i.children(u),s),o[u]={low:l,lim:a++}}return r.forEach(i.children(),s),o}return tm}var rm,Px;function p4(){if(Px)return rm;Px=1;var r=yr(),e=Gn();rm={run:t,cleanup:a};function t(s){var u=e.addDummyNode(s,"root",{},"_root"),l=i(s),c=r.max(r.values(l))-1,f=2*c+1;s.graph().nestingRoot=u,r.forEach(s.edges(),function(d){s.edge(d).minlen*=f});var h=o(s)+1;r.forEach(s.children(),function(d){n(s,u,f,h,c,l,d)}),s.graph().nodeRankFactor=f}function n(s,u,l,c,f,h,d){var v=s.children(d);if(!v.length){d!==u&&s.setEdge(u,d,{weight:0,minlen:l});return}var p=e.addBorderNode(s,"_bt"),m=e.addBorderNode(s,"_bb"),y=s.node(d);s.setParent(p,d),y.borderTop=p,s.setParent(m,d),y.borderBottom=m,r.forEach(v,function(b){n(s,u,l,c,f,h,b);var g=s.node(b),_=g.borderTop?g.borderTop:b,w=g.borderBottom?g.borderBottom:b,x=g.borderTop?c:2*c,E=_!==w?1:f-h[d]+1;s.setEdge(p,_,{weight:x,minlen:E,nestingEdge:!0}),s.setEdge(w,m,{weight:x,minlen:E,nestingEdge:!0})}),s.parent(d)||s.setEdge(u,p,{weight:0,minlen:f+h[d]})}function i(s){var u={};function l(c,f){var h=s.children(c);h&&h.length&&r.forEach(h,function(d){l(d,f+1)}),u[c]=f}return r.forEach(s.children(),function(c){l(c,1)}),u}function o(s){return r.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function a(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,r.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return rm}var nm,Ax;function g4(){if(Ax)return nm;Ax=1;var r=yr(),e=Gn();nm=t;function t(i){function o(a){var s=i.children(a),u=i.node(a);if(s.length&&r.forEach(s,o),r.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",a,u,l),n(i,"borderRight","_br",a,u,l)}}r.forEach(i.children(),o)}function n(i,o,a,s,u,l){var c={width:0,height:0,rank:l,borderType:o},f=u[o][l-1],h=e.addDummyNode(i,"border",c,a);u[o][l]=h,i.setParent(h,s),f&&i.setEdge(f,h,{weight:1})}return nm}var im,Rx;function y4(){if(Rx)return im;Rx=1;var r=yr();im={adjust:e,undo:t};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function t(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&o(l),(c==="lr"||c==="rl")&&(s(l),n(l))}function n(l){r.forEach(l.nodes(),function(c){i(l.node(c))}),r.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function o(l){r.forEach(l.nodes(),function(c){a(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,a),r.has(f,"y")&&a(f)})}function a(l){l.y=-l.y}function s(l){r.forEach(l.nodes(),function(c){u(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,u),r.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return im}var om,kx;function m4(){if(kx)return om;kx=1;var r=yr();om=e;function e(t){var n={},i=r.filter(t.nodes(),function(l){return!t.children(l).length}),o=r.max(r.map(i,function(l){return t.node(l).rank})),a=r.map(r.range(o+1),function(){return[]});function s(l){if(!r.has(n,l)){n[l]=!0;var c=t.node(l);a[c.rank].push(l),r.forEach(t.successors(l),s)}}var u=r.sortBy(i,function(l){return t.node(l).rank});return r.forEach(u,s),a}return om}var am,Ix;function b4(){if(Ix)return am;Ix=1;var r=yr();am=e;function e(n,i){for(var o=0,a=1;a<i.length;++a)o+=t(n,i[a-1],i[a]);return o}function t(n,i,o){for(var a=r.zipObject(o,r.map(o,function(h,d){return d})),s=r.flatten(r.map(i,function(h){return r.sortBy(r.map(n.outEdges(h),function(d){return{pos:a[d.w],weight:n.edge(d).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var l=2*u-1;u-=1;var c=r.map(new Array(l),function(){return 0}),f=0;return r.forEach(s.forEach(function(h){var d=h.pos+u;c[d]+=h.weight;for(var v=0;d>0;)d%2&&(v+=c[d+1]),d=d-1>>1,c[d]+=h.weight;f+=h.weight*v})),f}return am}var sm,Dx;function _4(){if(Dx)return sm;Dx=1;var r=yr();sm=e;function e(t,n){return r.map(n,function(i){var o=t.inEdges(i);if(o.length){var a=r.reduce(o,function(s,u){var l=t.edge(u),c=t.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return sm}var um,Mx;function w4(){if(Mx)return um;Mx=1;var r=yr();um=e;function e(i,o){var a={};r.forEach(i,function(u,l){var c=a[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};r.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),r.forEach(o.edges(),function(u){var l=a[u.v],c=a[u.w];!r.isUndefined(l)&&!r.isUndefined(c)&&(c.indegree++,l.out.push(a[u.w]))});var s=r.filter(a,function(u){return!u.indegree});return t(s)}function t(i){var o=[];function a(l){return function(c){c.merged||(r.isUndefined(c.barycenter)||r.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();o.push(u),r.forEach(u.in.reverse(),a(u)),r.forEach(u.out,s(u))}return r.map(r.filter(o,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return um}var lm,Nx;function E4(){if(Nx)return lm;Nx=1;var r=yr(),e=Gn();lm=t;function t(o,a){var s=e.partition(o,function(p){return r.has(p,"barycenter")}),u=s.lhs,l=r.sortBy(s.rhs,function(p){return-p.i}),c=[],f=0,h=0,d=0;u.sort(i(!!a)),d=n(c,l,d),r.forEach(u,function(p){d+=p.vs.length,c.push(p.vs),f+=p.barycenter*p.weight,h+=p.weight,d=n(c,l,d)});var v={vs:r.flatten(c,!0)};return h&&(v.barycenter=f/h,v.weight=h),v}function n(o,a,s){for(var u;a.length&&(u=r.last(a)).i<=s;)a.pop(),o.push(u.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return lm}var cm,Lx;function O4(){if(Lx)return cm;Lx=1;var r=yr(),e=_4(),t=w4(),n=E4();cm=i;function i(s,u,l,c){var f=s.children(u),h=s.node(u),d=h?h.borderLeft:void 0,v=h?h.borderRight:void 0,p={};d&&(f=r.filter(f,function(w){return w!==d&&w!==v}));var m=e(s,f);r.forEach(m,function(w){if(s.children(w.v).length){var x=i(s,w.v,l,c);p[w.v]=x,r.has(x,"barycenter")&&a(w,x)}});var y=t(m,l);o(y,p);var b=n(y,c);if(d&&(b.vs=r.flatten([d,b.vs,v],!0),s.predecessors(d).length)){var g=s.node(s.predecessors(d)[0]),_=s.node(s.predecessors(v)[0]);r.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+g.order+_.order)/(b.weight+2),b.weight+=2}return b}function o(s,u){r.forEach(s,function(l){l.vs=r.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function a(s,u){r.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return cm}var fm,jx;function x4(){if(jx)return fm;jx=1;var r=yr(),e=hi().Graph;fm=t;function t(i,o,a){var s=n(i),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return r.forEach(i.nodes(),function(l){var c=i.node(l),f=i.parent(l);(c.rank===o||c.minRank<=o&&o<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||s),r.forEach(i[a](l),function(h){var d=h.v===l?h.w:h.v,v=u.edge(d,l),p=r.isUndefined(v)?0:v.weight;u.setEdge(d,l,{weight:i.edge(h).weight+p})}),r.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[o],borderRight:c.borderRight[o]}))}),u}function n(i){for(var o;i.hasNode(o=r.uniqueId("_root")););return o}return fm}var hm,Fx;function S4(){if(Fx)return hm;Fx=1;var r=yr();hm=e;function e(t,n,i){var o={},a;r.forEach(i,function(s){for(var u=t.parent(s),l,c;u;){if(l=t.parent(u),l?(c=o[l],o[l]=u):(c=a,a=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return hm}var dm,Bx;function T4(){if(Bx)return dm;Bx=1;var r=yr(),e=m4(),t=b4(),n=O4(),i=x4(),o=S4(),a=hi().Graph,s=Gn();dm=u;function u(h){var d=s.maxRank(h),v=l(h,r.range(1,d+1),"inEdges"),p=l(h,r.range(d-1,-1,-1),"outEdges"),m=e(h);f(h,m);for(var y=Number.POSITIVE_INFINITY,b,g=0,_=0;_<4;++g,++_){c(g%2?v:p,g%4>=2),m=s.buildLayerMatrix(h);var w=t(h,m);w<y&&(_=0,b=r.cloneDeep(m),y=w)}f(h,b)}function l(h,d,v){return r.map(d,function(p){return i(h,p,v)})}function c(h,d){var v=new a;r.forEach(h,function(p){var m=p.graph().root,y=n(p,m,v,d);r.forEach(y.vs,function(b,g){p.node(b).order=g}),o(p,v,y.vs)})}function f(h,d){r.forEach(d,function(v){r.forEach(v,function(p,m){h.node(p).order=m})})}return dm}var vm,Ux;function C4(){if(Ux)return vm;Ux=1;var r=yr(),e=hi().Graph,t=Gn();vm={positionX:v,findType1Conflicts:n,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d};function n(y,b){var g={};function _(w,x){var E=0,O=0,T=w.length,C=r.last(x);return r.forEach(x,function(P,R){var k=o(y,P),I=k?y.node(k).order:T;(k||P===C)&&(r.forEach(x.slice(O,R+1),function(M){r.forEach(y.predecessors(M),function(j){var L=y.node(j),F=L.order;(F<E||I<F)&&!(L.dummy&&y.node(M).dummy)&&a(g,j,M)})}),O=R+1,E=I)}),x}return r.reduce(b,_),g}function i(y,b){var g={};if(y.nodeCount()>1e3)return g;function _(x,E,O,T,C){var P;r.forEach(r.range(E,O),function(R){P=x[R],y.node(P).dummy&&r.forEach(y.predecessors(P),function(k){var I=y.node(k);I.dummy&&(I.order<T||I.order>C)&&a(g,k,P)})})}function w(x,E){var O=-1,T,C=0;return r.forEach(E,function(P,R){if(y.node(P).dummy==="border"){var k=y.predecessors(P);k.length&&(T=y.node(k[0]).order,_(E,C,R,O,T),C=R,O=T)}_(E,C,E.length,T,x.length)}),E}return r.reduce(b,w),g}function o(y,b){if(y.node(b).dummy)return r.find(y.predecessors(b),function(g){return y.node(g).dummy})}function a(y,b,g){if(b>g){var _=b;b=g,g=_}var w=y[b];w||(y[b]=w={}),w[g]=!0}function s(y,b,g){if(b>g){var _=b;b=g,g=_}return r.has(y[b],g)}function u(y,b,g,_){var w={},x={},E={};return r.forEach(b,function(O){r.forEach(O,function(T,C){w[T]=T,x[T]=T,E[T]=C})}),r.forEach(b,function(O){var T=-1;r.forEach(O,function(C){var P=_(C);if(P.length){P=r.sortBy(P,function(j){return E[j]});for(var R=(P.length-1)/2,k=Math.floor(R),I=Math.ceil(R);k<=I;++k){var M=P[k];x[C]===C&&T<E[M]&&!s(g,C,M)&&(x[M]=C,x[C]=w[C]=w[M],T=E[M])}}})}),{root:w,align:x}}function l(y,b,g,_,w){var x={},E=c(y,b,g,w),O=w?"borderLeft":"borderRight";function T(R,k){for(var I=E.nodes(),M=I.pop(),j={};M;)j[M]?R(M):(j[M]=!0,I.push(M),I=I.concat(k(M))),M=I.pop()}function C(R){x[R]=E.inEdges(R).reduce(function(k,I){return Math.max(k,x[I.v]+E.edge(I))},0)}function P(R){var k=E.outEdges(R).reduce(function(M,j){return Math.min(M,x[j.w]-E.edge(j))},Number.POSITIVE_INFINITY),I=y.node(R);k!==Number.POSITIVE_INFINITY&&I.borderType!==O&&(x[R]=Math.max(x[R],k))}return T(C,E.predecessors.bind(E)),T(P,E.successors.bind(E)),r.forEach(_,function(R){x[R]=x[g[R]]}),x}function c(y,b,g,_){var w=new e,x=y.graph(),E=p(x.nodesep,x.edgesep,_);return r.forEach(b,function(O){var T;r.forEach(O,function(C){var P=g[C];if(w.setNode(P),T){var R=g[T],k=w.edge(R,P);w.setEdge(R,P,Math.max(E(y,C,T),k||0))}T=C})}),w}function f(y,b){return r.minBy(r.values(b),function(g){var _=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY;return r.forIn(g,function(x,E){var O=m(y,E)/2;_=Math.max(x+O,_),w=Math.min(x-O,w)}),_-w})}function h(y,b){var g=r.values(b),_=r.min(g),w=r.max(g);r.forEach(["u","d"],function(x){r.forEach(["l","r"],function(E){var O=x+E,T=y[O],C;if(T!==b){var P=r.values(T);C=E==="l"?_-r.min(P):w-r.max(P),C&&(y[O]=r.mapValues(T,function(R){return R+C}))}})})}function d(y,b){return r.mapValues(y.ul,function(g,_){if(b)return y[b.toLowerCase()][_];var w=r.sortBy(r.map(y,_));return(w[1]+w[2])/2})}function v(y){var b=t.buildLayerMatrix(y),g=r.merge(n(y,b),i(y,b)),_={},w;r.forEach(["u","d"],function(E){w=E==="u"?b:r.values(b).reverse(),r.forEach(["l","r"],function(O){O==="r"&&(w=r.map(w,function(R){return r.values(R).reverse()}));var T=(E==="u"?y.predecessors:y.successors).bind(y),C=u(y,w,g,T),P=l(y,w,C.root,C.align,O==="r");O==="r"&&(P=r.mapValues(P,function(R){return-R})),_[E+O]=P})});var x=f(y,_);return h(_,x),d(_,y.graph().align)}function p(y,b,g){return function(_,w,x){var E=_.node(w),O=_.node(x),T=0,C;if(T+=E.width/2,r.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":C=-E.width/2;break;case"r":C=E.width/2;break}if(C&&(T+=g?C:-C),C=0,T+=(E.dummy?b:y)/2,T+=(O.dummy?b:y)/2,T+=O.width/2,r.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":C=O.width/2;break;case"r":C=-O.width/2;break}return C&&(T+=g?C:-C),C=0,T}}function m(y,b){return y.node(b).width}return vm}var pm,zx;function P4(){if(zx)return pm;zx=1;var r=yr(),e=Gn(),t=C4().positionX;pm=n;function n(o){o=e.asNonCompoundGraph(o),i(o),r.forEach(t(o),function(a,s){o.node(s).x=a})}function i(o){var a=e.buildLayerMatrix(o),s=o.graph().ranksep,u=0;r.forEach(a,function(l){var c=r.max(r.map(l,function(f){return o.node(f).height}));r.forEach(l,function(f){o.node(f).y=u+c/2}),u+=c+s})}return pm}var gm,Vx;function A4(){if(Vx)return gm;Vx=1;var r=yr(),e=c4(),t=f4(),n=d4(),i=Gn().normalizeRanks,o=v4(),a=Gn().removeEmptyRanks,s=p4(),u=g4(),l=y4(),c=T4(),f=P4(),h=Gn(),d=hi().Graph;gm=v;function v(W,H){var Q=H&&H.debugTiming?h.time:h.notime,J=Q("layout",function(){return J=Q("  buildLayoutGraph",function(){return T(W)}),Q("  runLayout",function(){p(J,Q)}),Q("  updateInputGraph",function(){m(W,J)}),J});return J}function p(W,H){H("    makeSpaceForEdgeLabels",function(){C(W)}),H("    removeSelfEdges",function(){z(W)}),H("    acyclic",function(){e.run(W)}),H("    nestingGraph.run",function(){s.run(W)}),H("    rank",function(){n(h.asNonCompoundGraph(W))}),H("    injectEdgeLabelProxies",function(){P(W)}),H("    removeEmptyRanks",function(){a(W)}),H("    nestingGraph.cleanup",function(){s.cleanup(W)}),H("    normalizeRanks",function(){i(W)}),H("    assignRankMinMax",function(){R(W)}),H("    removeEdgeLabelProxies",function(){k(W)}),H("    normalize.run",function(){t.run(W)}),H("    parentDummyChains",function(){o(W)}),H("    addBorderSegments",function(){u(W)}),H("    order",function(){c(W)}),H("    insertSelfEdges",function(){V(W)}),H("    adjustCoordinateSystem",function(){l.adjust(W)}),H("    position",function(){f(W)}),H("    positionSelfEdges",function(){G(W)}),H("    removeBorderNodes",function(){F(W)}),H("    normalize.undo",function(){t.undo(W)}),H("    fixupEdgeLabelCoords",function(){j(W)}),H("    undoCoordinateSystem",function(){l.undo(W)}),H("    translateGraph",function(){I(W)}),H("    assignNodeIntersects",function(){M(W)}),H("    reversePoints",function(){L(W)}),H("    acyclic.undo",function(){e.undo(W)})}function m(W,H){r.forEach(W.nodes(),function(Q){var J=W.node(Q),ne=H.node(Q);J&&(J.x=ne.x,J.y=ne.y,H.children(Q).length&&(J.width=ne.width,J.height=ne.height))}),r.forEach(W.edges(),function(Q){var J=W.edge(Q),ne=H.edge(Q);J.points=ne.points,r.has(ne,"x")&&(J.x=ne.x,J.y=ne.y)}),W.graph().width=H.graph().width,W.graph().height=H.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],_=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function T(W){var H=new d({multigraph:!0,compound:!0}),Q=ie(W.graph());return H.setGraph(r.merge({},b,Y(Q,y),r.pick(Q,g))),r.forEach(W.nodes(),function(J){var ne=ie(W.node(J));H.setNode(J,r.defaults(Y(ne,_),w)),H.setParent(J,W.parent(J))}),r.forEach(W.edges(),function(J){var ne=ie(W.edge(J));H.setEdge(J,r.merge({},E,Y(ne,x),r.pick(ne,O)))}),H}function C(W){var H=W.graph();H.ranksep/=2,r.forEach(W.edges(),function(Q){var J=W.edge(Q);J.minlen*=2,J.labelpos.toLowerCase()!=="c"&&(H.rankdir==="TB"||H.rankdir==="BT"?J.width+=J.labeloffset:J.height+=J.labeloffset)})}function P(W){r.forEach(W.edges(),function(H){var Q=W.edge(H);if(Q.width&&Q.height){var J=W.node(H.v),ne=W.node(H.w),K={rank:(ne.rank-J.rank)/2+J.rank,e:H};h.addDummyNode(W,"edge-proxy",K,"_ep")}})}function R(W){var H=0;r.forEach(W.nodes(),function(Q){var J=W.node(Q);J.borderTop&&(J.minRank=W.node(J.borderTop).rank,J.maxRank=W.node(J.borderBottom).rank,H=r.max(H,J.maxRank))}),W.graph().maxRank=H}function k(W){r.forEach(W.nodes(),function(H){var Q=W.node(H);Q.dummy==="edge-proxy"&&(W.edge(Q.e).labelRank=Q.rank,W.removeNode(H))})}function I(W){var H=Number.POSITIVE_INFINITY,Q=0,J=Number.POSITIVE_INFINITY,ne=0,K=W.graph(),$=K.marginx||0,Z=K.marginy||0;function ae(se){var fe=se.x,ge=se.y,ye=se.width,pe=se.height;H=Math.min(H,fe-ye/2),Q=Math.max(Q,fe+ye/2),J=Math.min(J,ge-pe/2),ne=Math.max(ne,ge+pe/2)}r.forEach(W.nodes(),function(se){ae(W.node(se))}),r.forEach(W.edges(),function(se){var fe=W.edge(se);r.has(fe,"x")&&ae(fe)}),H-=$,J-=Z,r.forEach(W.nodes(),function(se){var fe=W.node(se);fe.x-=H,fe.y-=J}),r.forEach(W.edges(),function(se){var fe=W.edge(se);r.forEach(fe.points,function(ge){ge.x-=H,ge.y-=J}),r.has(fe,"x")&&(fe.x-=H),r.has(fe,"y")&&(fe.y-=J)}),K.width=Q-H+$,K.height=ne-J+Z}function M(W){r.forEach(W.edges(),function(H){var Q=W.edge(H),J=W.node(H.v),ne=W.node(H.w),K,$;Q.points?(K=Q.points[0],$=Q.points[Q.points.length-1]):(Q.points=[],K=ne,$=J),Q.points.unshift(h.intersectRect(J,K)),Q.points.push(h.intersectRect(ne,$))})}function j(W){r.forEach(W.edges(),function(H){var Q=W.edge(H);if(r.has(Q,"x"))switch((Q.labelpos==="l"||Q.labelpos==="r")&&(Q.width-=Q.labeloffset),Q.labelpos){case"l":Q.x-=Q.width/2+Q.labeloffset;break;case"r":Q.x+=Q.width/2+Q.labeloffset;break}})}function L(W){r.forEach(W.edges(),function(H){var Q=W.edge(H);Q.reversed&&Q.points.reverse()})}function F(W){r.forEach(W.nodes(),function(H){if(W.children(H).length){var Q=W.node(H),J=W.node(Q.borderTop),ne=W.node(Q.borderBottom),K=W.node(r.last(Q.borderLeft)),$=W.node(r.last(Q.borderRight));Q.width=Math.abs($.x-K.x),Q.height=Math.abs(ne.y-J.y),Q.x=K.x+Q.width/2,Q.y=J.y+Q.height/2}}),r.forEach(W.nodes(),function(H){W.node(H).dummy==="border"&&W.removeNode(H)})}function z(W){r.forEach(W.edges(),function(H){if(H.v===H.w){var Q=W.node(H.v);Q.selfEdges||(Q.selfEdges=[]),Q.selfEdges.push({e:H,label:W.edge(H)}),W.removeEdge(H)}})}function V(W){var H=h.buildLayerMatrix(W);r.forEach(H,function(Q){var J=0;r.forEach(Q,function(ne,K){var $=W.node(ne);$.order=K+J,r.forEach($.selfEdges,function(Z){h.addDummyNode(W,"selfedge",{width:Z.label.width,height:Z.label.height,rank:$.rank,order:K+ ++J,e:Z.e,label:Z.label},"_se")}),delete $.selfEdges})})}function G(W){r.forEach(W.nodes(),function(H){var Q=W.node(H);if(Q.dummy==="selfedge"){var J=W.node(Q.e.v),ne=J.x+J.width/2,K=J.y,$=Q.x-ne,Z=J.height/2;W.setEdge(Q.e,Q.label),W.removeNode(H),Q.label.points=[{x:ne+2*$/3,y:K-Z},{x:ne+5*$/6,y:K-Z},{x:ne+$,y:K},{x:ne+5*$/6,y:K+Z},{x:ne+2*$/3,y:K+Z}],Q.label.x=Q.x,Q.label.y=Q.y}})}function Y(W,H){return r.mapValues(r.pick(W,H),Number)}function ie(W){var H={};return r.forEach(W,function(Q,J){H[J.toLowerCase()]=Q}),H}return gm}var ym,Gx;function R4(){if(Gx)return ym;Gx=1;var r=yr(),e=Gn(),t=hi().Graph;ym={debugOrdering:n};function n(i){var o=e.buildLayerMatrix(i),a=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),r.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),r.forEach(o,function(s,u){var l="layer"+u;a.setNode(l,{rank:"same"}),r.reduce(s,function(c,f){return a.setEdge(c,f,{style:"invis"}),f})}),a}return ym}var mm,qx;function k4(){return qx||(qx=1,mm="0.8.14"),mm}var bm,Wx;function I4(){return Wx||(Wx=1,bm={graphlib:hi(),layout:A4(),debug:R4(),util:{time:Gn().time,notime:Gn().notime},version:k4()}),bm}var D4=I4();const PP=sv(D4);var _m,Hx;function M4(){if(Hx)return _m;Hx=1;var r=function(){};return r.prototype={fit:function(e){var t,n,i,o=e.length,a,s=o>0?e[0].width:0,u=o>0?e[0].height:0;for(this.root={x:0,y:0,width:s,height:u},t=0;t<o;t++)i=e[t],(n=this.findNode(this.root,i.width,i.height))?(a=this.splitNode(n,i.width,i.height),i.x=a.x,i.y=a.y):(a=this.growNode(i.width,i.height),i.x=a.x,i.y=a.y)},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.width&&n<=e.height?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,width:e.width,height:e.height-n},e.right={x:e.x+t,y:e.y,width:e.width-t,height:n},e},growNode:function(e,t){var n=e<=this.root.width,i=t<=this.root.height,o=i&&this.root.height>=this.root.width+e,a=n&&this.root.width>=this.root.height+t;return o?this.growRight(e,t):a?this.growDown(e,t):i?this.growRight(e,t):n?this.growDown(e,t):null},growRight:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null},growDown:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+t,down:{x:0,y:this.root.height,width:this.root.width,height:t},right:this.root};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null}},_m=r,_m}var wm,Yx;function N4(){if(Yx)return wm;Yx=1;var r=M4();return wm=function(e,t){t=t||{};var n=new r,i=t.inPlace||!1,o=e.map(function(l){return i?l:{width:l.width,height:l.height,item:l}});o=o.sort(function(l,c){return c.width*c.height-l.width*l.height}),n.fit(o);var a=o.reduce(function(l,c){return Math.max(l,c.x+c.width)},0),s=o.reduce(function(l,c){return Math.max(l,c.y+c.height)},0),u={width:a,height:s};return i||(u.items=o),u},wm}var L4=N4();const j4=sv(L4);var F4=hi();const B4=sv(F4),U4="tight-tree",vo=100,AP="up",Qb="down",z4="left",RP="right",V4={[AP]:"BT",[Qb]:"TB",[z4]:"RL",[RP]:"LR"},G4="bin",q4=25,W4=1/.38,H4=r=>r===AP||r===Qb,Y4=r=>r===Qb||r===RP,Em=r=>{let e=null,t=null,n=null,i=null,o=null,a=null,s=null,u=null;for(const l of r.nodes()){const c=r.node(l);(o===null||c.x<o)&&(o=c.x),(a===null||c.y<a)&&(a=c.y),(s===null||c.x>s)&&(s=c.x),(u===null||c.y>u)&&(u=c.y);const f=Math.ceil(c.width/2);(e===null||c.x-f<e)&&(e=c.x-f),(t===null||c.y-f<t)&&(t=c.y-f),(n===null||c.x+f>n)&&(n=c.x+f),(i===null||c.y+f>i)&&(i=c.y+f)}return{minX:e,minY:t,maxX:n,maxY:i,minCenterX:o,minCenterY:a,maxCenterX:s,maxCenterY:u,width:n-e,height:i-t,xOffset:o-e,yOffset:a-t}},kP=r=>{const e=new PP.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel(()=>({})),e.graph().nodesep=75*r,e.graph().ranksep=75*r,e},Xx=(r,e,t)=>{const{rank:n}=t.node(r);let i=null,o=null;for(const a of e){const{rank:s}=t.node(a);if(!(a===r||s>=n))if(s===n-1){i=s,o=a;break}else(i===null&&o===null||s>i)&&(i=s,o=a)}return o},X4=(r,e)=>{let t=Xx(r,e.predecessors(r),e);return t===null&&(t=Xx(r,e.successors(r),e)),t},$4=(r,e)=>{const t=[],n=B4.alg.components(r);if(n.length>1)for(const i of n){const o=kP(e);for(const a of i){const s=r.node(a);o.setNode(a,{width:s.width,height:s.height});const u=r.outEdges(a);if(u)for(const l of u)o.setEdge(l.v,l.w)}t.push(o)}else t.push(r);return t},$x=(r,e,t)=>{r.graph().ranker=U4,r.graph().rankdir=V4[e];const n=PP.layout(r);for(const i of n.nodes()){const o=X4(i,n);o!==null&&(t[i]=o)}},Om=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),K4=r=>{const e=[r[0]];let t={p1:r[0],p2:r[1]},n=Om(t.p1,t.p2);for(let i=2;i<r.length;i++){let o={p1:r[i-1],p2:r[i]},a=Om(o.p1,o.p2);const s={p1:t.p1,p2:o.p2},u=Om(s.p1,s.p2);a+n-u<.1&&(e.pop(),o=s,a=u),e.push(o.p1),t=o,n=a}return e.push(r[r.length-1]),e},Z4=(r,e,t,n,i,o,a=1)=>{const s=kP(a),u={},l={x:0,y:0},c=r.length;for(const g of r){const _=t[g.id];l.x+=(_==null?void 0:_.x)||0,l.y+=(_==null?void 0:_.y)||0;const w=(g.size||q4)*W4*a;s.setNode(g.id,{width:w,height:w})}const f=c?[l.x/c,l.y/c]:[0,0],h={};for(const g of n)if(e[g.from]&&e[g.to]&&g.from!==g.to){const _=g.from<g.to?`${g.from}-${g.to}`:`${g.to}-${g.from}`;h[_]||(h[_]=1,s.setEdge(g.from,g.to))}const d=$4(s,a);if(d.length>1){d.forEach(E=>$x(E,i,u));const g=H4(i),_=Y4(i),w=d.filter(E=>E.nodeCount()===1),x=d.filter(E=>E.nodeCount()!==1);if(o===G4){x.sort((L,F)=>F.nodeCount()-L.nodeCount());const T=g?({width:L,height:F,...z})=>({...z,width:L+vo,height:F+vo}):({width:L,height:F,...z})=>({...z,width:F+vo,height:L+vo}),C=x.map(Em).map(T),P=w.map(Em).map(T),R=C.concat(P);j4(R,{inPlace:!0});const k=Math.floor(vo/2),I=g?"x":"y",M=g?"y":"x";if(!_){const L=g?"y":"x",F=g?"height":"width",z=R.reduce((G,Y)=>G===null?Y[L]:Math.min(Y[L],G[F]||0),null),V=R.reduce((G,Y)=>G===null?Y[L]+Y[F]:Math.max(Y[L]+Y[F],G[F]||0),null);R.forEach(G=>{G[L]=z+(V-(G[L]+G[F]))})}const j=(L,F)=>{for(const z of L.nodes()){const V=L.node(z),G=s.node(z);G.x=V.x-F.xOffset+F[I]+k,G.y=V.y-F.yOffset+F[M]+k}};for(let L=0;L<x.length;L++){const F=x[L],z=C[L];j(F,z)}for(let L=0;L<w.length;L++){const F=w[L],z=P[L];j(F,z)}}else{x.sort(_?(F,z)=>z.nodeCount()-F.nodeCount():(F,z)=>F.nodeCount()-z.nodeCount());const E=x.map(Em),O=w.reduce((F,z)=>F+s.node(z.nodes()[0]).width,0),T=w.reduce((F,z)=>Math.max(F,s.node(z.nodes()[0]).width),0),C=w.length>0?O+(w.length-1)*vo:0,P=E.reduce((F,{width:z})=>Math.max(F,z),0),R=Math.max(P,C),k=E.reduce((F,{height:z})=>Math.max(F,z),0),I=Math.max(k,C);let M=0;const j=()=>{for(let F=0;F<x.length;F++){const z=x[F],V=E[F],G=Math.floor(g?(R-V.width)/2:(I-V.height)/2);for(const Y of z.nodes()){const ie=z.node(Y),W=s.node(Y);g?(W.x=ie.x-V.minX+G,W.y=ie.y-V.minY+M):(W.x=ie.x-V.minX+M,W.y=ie.y-V.minY+G)}for(const Y of z.edges()){const ie=z.edge(Y),W=s.edge(Y);ie.points&&ie.points.length>3&&(W.points=ie.points.map(({x:H,y:Q})=>({x:H-V.minX+(g?G:M),y:Q-V.minY+(g?M:G)})))}M+=(g?V.height:V.width)+vo}},L=()=>{const F=Math.floor(((g?R:I)-C)/2);M+=Math.floor(T/2);let z=F;for(const V of w){const G=V.nodes()[0],Y=s.node(G);g?(Y.x=z+Math.floor(Y.width/2),Y.y=M):(Y.x=M,Y.y=z+Math.floor(Y.width/2)),z+=vo+Y.width}M=T+vo};_?(j(),L()):(L(),j())}}else $x(s,i,u);l.x=0,l.y=0;const v={};for(const g of s.nodes()){const _=s.node(g);l.x+=_.x||0,l.y+=_.y||0,v[g]={x:_.x,y:_.y}}const p=c?[l.x/c,l.y/c]:[0,0],m=f[0]-p[0],y=f[1]-p[1];for(const g in v)v[g].x+=m,v[g].y+=y;const b={};for(const g of s.edges()){const _=s.edge(g);if(_.points&&_.points.length>3){const w=K4(_.points);for(const x of w)x.x+=m,x.y+=y;b[`${g.v}-${g.w}`]={points:[...w],from:{x:v[g.v].x,y:v[g.v].y},to:{x:v[g.w].x,y:v[g.w].y}},b[`${g.w}-${g.v}`]={points:w.reverse(),from:{x:v[g.w].x,y:v[g.w].y},to:{x:v[g.v].x,y:v[g.v].y}}}}return{positions:v,parents:u,waypoints:b}};class Q4{start(){}postMessage(e){const{nodes:t,nodeIds:n,idToPosition:i,rels:o,direction:a,packing:s,pixelRatio:u,forcedDelay:l=0}=e,c=Z4(t,n,i,o,a,s,u);l?setTimeout(()=>{this.onmessage({data:c})},l):this.onmessage({data:c})}onmessage(){}close(){}}const J4={port:new Q4},eF=()=>new SharedWorker(new URL("/assets/HierarchicalLayout.worker-Cgg-5Z3q.js",import.meta.url),{type:"module",name:"HierarchicalLayout"}),tF=Object.freeze(Object.defineProperty({__proto__:null,coseBilkentLayoutFallbackWorker:X3,createCoseBilkentLayoutWorker:$3,createHierarchicalLayoutWorker:eF,hierarchicalLayoutFallbackWorker:J4},Symbol.toStringTag,{value:"Module"}));var M0=function(r,e){return M0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},M0(r,e)};function qn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M0(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Me=function(){return Me=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Me.apply(this,arguments)};function IP(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Qe(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function Je(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Fr(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}function N0(r,e,t){e.split&&(e=e.split("."));for(var n=0,i=e.length,o=r,a,s;n<i&&(s=""+e[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)o=o[s]=n===i?t:typeof(a=o[s])==typeof e?a:e[n]*0!==0||~(""+e[n]).indexOf(".")?{}:[]}var rF=function(r,e){return Object.keys(r).filter(function(t){return e(t,r[t])}).reduce(function(t,n){return t[n]=r[n],t},{})},Os=(function(r){qn(e,r);function e(t,n){var i=r.call(this,"".concat(t," ").concat(n))||this;return i.field=t,i}return e})(Error);function wa(r){return typeof r=="string"}function L0(r){return typeof r=="number"}function Tu(r){return typeof r=="function"}function nF(r){return r!=null}function Oi(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var Jb="is not a string",e_="is not an object",iF="is nil";function oF(r){if(!nF(r))throw new Os("Event",iF);if(typeof r!="object")throw new Os("Event",e_)}function aF(r){if(!wa(r.type))throw new Os(".type",Jb)}function sF(r){if(!wa(r.event))throw new Os(".event",Jb)}function uF(r){if(!Oi(r.properties))throw new Os(".properties",e_)}function lF(r){if(!Oi(r.traits))throw new Os(".traits",e_)}function cF(r){if(!wa(r.messageId))throw new Os(".messageId",Jb)}function fF(r){oF(r),aF(r),cF(r),r.type==="track"&&(sF(r),uF(r)),["group","identify"].includes(r.type)&&lF(r)}var hF=(function(){function r(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:(function(){}),this.onFinishedEvent=(n=e.onFinishedEvent)!==null&&n!==void 0?n:(function(){})}return r})(),dF=(function(){function r(e){this.settings=new hF(e)}return r.prototype.track=function(e,t,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(Me(Me({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:Me({},n),integrations:Me({},i)}))},r.prototype.page=function(e,t,n,i,o){var a;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:Me({},n),options:Me({},i),integrations:Me({},o)};return e!==null&&(s.category=e,s.properties=(a=s.properties)!==null&&a!==void 0?a:{},s.properties.category=e),t!==null&&(s.name=t),this.normalize(Me(Me({},this.baseEvent()),s))},r.prototype.screen=function(e,t,n,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var a={type:"screen",properties:Me({},n),options:Me({},i),integrations:Me({},o)};return e!==null&&(a.category=e),t!==null&&(a.name=t),this.normalize(Me(Me({},this.baseEvent()),a))},r.prototype.identify=function(e,t,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(Me(Me({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:Me({},n),integrations:i}))},r.prototype.group=function(e,t,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(Me(Me({},this.baseEvent()),{type:"group",traits:t??{},options:Me({},n),integrations:Me({},i),groupId:e}))},r.prototype.alias=function(e,t,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var o={userId:e,type:"alias",options:Me({},n),integrations:Me({},i)};return t!==null&&(o.previousId=t),e===void 0?this.normalize(Me(Me({},o),this.baseEvent())):this.normalize(Me(Me({},this.baseEvent()),o))},r.prototype.baseEvent=function(){return{integrations:{},options:{}}},r.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),o=(t=e.context)!==null&&t!==void 0?t:{},a={};return i.forEach(function(s){s!=="context"&&(n.includes(s)?N0(a,s,e[s]):N0(o,s,e[s]))}),[o,a]},r.prototype.normalize=function(e){var t,n,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(h,d){var v,p;return Me(Me({},h),(v={},v[d]=!!(!((p=e.integrations)===null||p===void 0)&&p[d]),v))},{});e.options=rF(e.options||{},function(h,d){return d!==void 0});var o=Me(Me({},i),(n=e.options)===null||n===void 0?void 0:n.integrations),a=e.options?this.context(e.options):[],s=a[0],u=a[1],l=e.options,c=IP(e,["options"]),f=Me(Me(Me(Me({timestamp:new Date},c),{context:s,integrations:o}),u),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),fF(f),f},r})();function vF(r,e){return new Promise(function(t,n){var i=setTimeout(function(){n(Error("Promise timed out"))},e);r.then(function(o){return clearTimeout(i),t(o)}).catch(n)})}function pF(r){return new Promise(function(e){return setTimeout(e,r)})}function gF(r,e,t){var n=function(){try{return Promise.resolve(e(r))}catch(i){return Promise.reject(i)}};return pF(t).then(function(){return vF(n(),1e3)}).catch(function(i){r==null||r.log("warn","Callback Error",{error:i}),r==null||r.stats.increment("callback_error")}).then(function(){return r})}var DP=function(){var r,e,t=!1,n=new Promise(function(i,o){r=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,i.apply(void 0,a)},e=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,o.apply(void 0,a)}});return{resolve:r,reject:e,promise:n,isSettled:function(){return t}}},t_=(function(){function r(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e==null?void 0:e.maxListeners)!==null&&t!==void 0?t:10}return r.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},r.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},r.prototype.once=function(e,t){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(e,i),t.apply(n,o)};return this.on(e,i),this},r.prototype.off=function(e,t){var n,i=(n=this.callbacks[e])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==t});return this.callbacks[e]=o,this},r.prototype.emit=function(e){for(var t=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[e])!==null&&n!==void 0?n:[];return a.forEach(function(s){s.apply(t,i)}),this},r})();function yF(r){var e=Math.random()+1,t=r.minTimeout,n=t===void 0?500:t,i=r.factor,o=i===void 0?2:i,a=r.attempt,s=r.maxTimeout,u=s===void 0?1/0:s;return Math.min(e*n*Math.pow(o,a),u)}var MP="onRemoveFromFuture",r_=(function(r){qn(e,r);function e(t,n,i){var o=r.call(this)||this;return o.future=[],o.maxAttempts=t,o.queue=n,o.seen=i??{},o}return e.prototype.push=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var s=t.updateAttempts(a);return s>t.maxAttempts||t.includes(a)?!1:(t.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,s){return t.getAttempts(a)-t.getAttempts(s)}),o},e.prototype.pushWithBackoff=function(t,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(t)===0)return this.push(t)[0];var o=this.updateAttempts(t);if(o>this.maxAttempts||this.includes(t))return!1;var a=yF({attempt:o-1});return n>0&&a<n&&(a=n),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(s){return s.id!==t.id}),i.emit(MP)},a),this.future.push(t),!0},e.prototype.getAttempts=function(t){var n;return(n=this.seen[t.id])!==null&&n!==void 0?n:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(n){return n.id===t.id})||!!this.future.find(function(n){return n.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e})(t_),vs=256,Ed=[],Ah;for(;vs--;)Ed[vs]=(vs+256).toString(16).substring(1);function n_(){var r=0,e,t="";if(!Ah||vs+16>256){for(Ah=Array(r=256);r--;)Ah[r]=256*Math.random()|0;r=vs=0}for(;r<16;r++)e=Ah[vs+r],r==6?t+=Ed[e&15|64]:r==8?t+=Ed[e&63|128]:t+=Ed[e],r&1&&r>1&&r<11&&(t+="-");return vs++,t}var mF=(function(){function r(){this._logs=[]}return r.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(r.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),r.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,n){var i,o,a,s=Me(Me({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var u=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return t[u]&&(u="".concat(u,"-").concat(Math.random())),Me(Me({},t),(i={},i[u]=s,i))},{});console.table&&console.table(e)}else this.logs.forEach(function(t){var n=t.level,i=t.message,o=t.extras;n==="info"||n==="debug"||console[n](i,o??"")});this._logs=[]},r})(),bF=function(r){var e={gauge:"g",counter:"c"};return e[r]},NP=(function(){function r(){this.metrics=[]}return r.prototype.increment=function(e,t,n){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:n??[],type:"counter",timestamp:Date.now()})},r.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:n??[],type:"gauge",timestamp:Date.now()})},r.prototype.flush=function(){var e=this.metrics.map(function(t){return Me(Me({},t),{tags:t.tags.join(",")})});console.table&&console.table(e),this.metrics=[]},r.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:bF(e.type),e:e.timestamp}})},r})(),_F=(function(r){qn(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e})(NP),Nu=(function(){function r(e){var t,n,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(n=e.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return r})(),Yd=(function(){function r(e,t,n,i){t===void 0&&(t=n_()),n===void 0&&(n=new _F),i===void 0&&(i=new mF),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=n}return r.system=function(){},r.prototype.isSame=function(e){return e.id===this.id},r.prototype.cancel=function(e){throw e||new Nu({reason:"Context Cancel"})},r.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.updateEvent=function(e,t){var n;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return N0(this.event,e,t),this.event},r.prototype.failedDelivery=function(){return this._failedDelivery},r.prototype.setFailedDelivery=function(e){this._failedDelivery=e},r.prototype.logs=function(){return this.logger.logs},r.prototype.flush=function(){this.logger.flush(),this.stats.flush()},r.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},r})();function wF(r,e){var t={};return r.forEach(function(n){var i,o=void 0;{var a=n[e];o=typeof a!="string"?JSON.stringify(a):a}o!==void 0&&(t[o]=Fr(Fr([],(i=t[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),t}var EF=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},OF=function(){var r,e,t=0;return{done:function(){return r},run:function(n){var i=n();return EF(i)&&(++t===1&&(r=new Promise(function(o){return e=o})),i.finally(function(){return--t===0&&e()})),i}}};function xF(r){return Qe(this,void 0,void 0,function(){var e;return Je(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function Ql(r,e){r.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),n=e[r.event.type];if(n===void 0)return Promise.resolve(r);var i=xF(function(){return n.apply(e,[r])}).then(function(o){var a=new Date().getTime()-t;return o.stats.gauge("plugin_time",a,["plugin:".concat(e.name)]),o}).catch(function(o){if(o instanceof Nu&&o.type==="middleware_cancellation")throw o;return o instanceof Nu?(r.log("warn",o.type,{plugin:e.name,error:o}),o):(r.log("error","plugin Error",{plugin:e.name,error:o}),r.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),o)});return i}function SF(r,e){return Ql(r,e).then(function(t){if(t instanceof Yd)return t;r.log("debug","Context canceled"),r.stats.increment("context_canceled"),r.cancel(t)})}var TF=(function(r){qn(e,r);function e(t){var n=r.call(this)||this;return n.criticalTasks=OF(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=t,n.queue.on(MP,function(){n.scheduleFlush(0)}),n}return e.prototype.register=function(t,n,i){return Qe(this,void 0,void 0,function(){var o,a,s=this;return Je(this,function(u){switch(u.label){case 0:return this.plugins.push(n),o=function(l){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,l),t.log("warn","Failed to load destination",{plugin:n.name,error:l}),s.plugins=s.plugins.filter(function(c){return c!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(t,i).catch(o),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return u.sent(),[3,4];case 3:return a=u.sent(),o(a),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,n,i){return Qe(this,void 0,void 0,function(){var o;return Je(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return o=a.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return Qe(this,void 0,void 0,function(){var n;return Je(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]})})},e.prototype.subscribeToDelivery=function(t){return Qe(this,void 0,void 0,function(){var n=this;return Je(this,function(i){return[2,new Promise(function(o){var a=function(s,u){s.isSame(t)&&(n.off("flush",a),o(s))};n.on("flush",a)})]})})},e.prototype.dispatchSingle=function(t){return Qe(this,void 0,void 0,function(){var n=this;return Je(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(o){var a=n.enqueuRetry(o,t);return a?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:o}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var n=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return Qe(this,void 0,void 0,function(){var n,i,o,a;return Je(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=s.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw o=s.sent(),a=o,t.log("error","Failed to deliver",a),this.emit("delivery_failure",t,a),t.stats.increment("delivery_failed"),o;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,n){var i=!(t instanceof Nu)||t.retry;return i?this.queue.pushWithBackoff(n):!1},e.prototype.flush=function(){return Qe(this,void 0,void 0,function(){var t,n,i;return Je(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=o.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,t),i||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var n=this.plugins.filter(function(d){var v,p,m;if(d.type!=="destination"&&d.name!=="Segment.io")return!0;var y=void 0;return(v=d.alternativeNames)===null||v===void 0||v.forEach(function(b){t[b]!==void 0&&(y=t[b])}),(m=(p=t[d.name])!==null&&p!==void 0?p:y)!==null&&m!==void 0?m:(d.name==="Segment.io"?!0:t.All)!==!1}),i=wF(n,"type"),o=i.before,a=o===void 0?[]:o,s=i.enrichment,u=s===void 0?[]:s,l=i.destination,c=l===void 0?[]:l,f=i.after,h=f===void 0?[]:f;return{before:a,enrichment:u,destinations:c,after:h}},e.prototype.flushOne=function(t){var n,i;return Qe(this,void 0,void 0,function(){var o,a,s,u,l,c,v,f,h,d,v,p,m,y,b;return Je(this,function(g){switch(g.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),o=this.availableExtensions((n=t.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,s=o.enrichment,u=0,l=a,g.label=1;case 1:return u<l.length?(c=l[u],[4,SF(t,c)]):[3,4];case 2:v=g.sent(),v instanceof Yd&&(t=v),this.emit("message_enriched",t,c),g.label=3;case 3:return u++,[3,1];case 4:f=0,h=s,g.label=5;case 5:return f<h.length?(d=h[f],[4,Ql(t,d)]):[3,8];case 6:v=g.sent(),v instanceof Yd&&(t=v),this.emit("message_enriched",t,d),g.label=7;case 7:return f++,[3,5];case 8:return p=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),m=p.destinations,y=p.after,[4,new Promise(function(_,w){setTimeout(function(){var x=m.map(function(E){return Ql(t,E)});Promise.all(x).then(_).catch(w)},0)})];case 9:return g.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),b=y.map(function(_){return Ql(t,_)}),[4,Promise.all(b)];case 10:return g.sent(),[2,t]}})})},e})(t_),CF=function(r,e){var t=Date.now()-r;return Math.max((e??300)-t,0)};function PF(r,e,t,n){return Qe(this,void 0,void 0,function(){var i,o;return Je(this,function(a){switch(a.label){case 0:return t.emit("dispatch_start",r),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(r)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(r)];case 3:o=a.sent(),a.label=4;case 4:return n!=null&&n.callback?[4,gF(o,n.callback,CF(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n!=null&&n.debug&&o.flush(),[2,o]}})})}function AF(r,e,t,n){var i,o=[r,e,t,n],a=Oi(r)?r.event:r;if(!a||!wa(a))throw new Error("Event missing");var s=Oi(r)?(i=r.properties)!==null&&i!==void 0?i:{}:Oi(e)?e:{},u={};Tu(t)||(u=t??{}),Oi(r)&&!Tu(e)&&(u=e??{});var l=o.find(Tu);return[a,s,u,l]}function Kx(r,e,t,n,i){var o,a,s=null,u=null,l=[r,e,t,n,i],c=l.filter(wa);c.length===1?wa(l[1])?(u=l[1],s=null):(u=c[0],s=null):c.length===2&&(typeof l[0]=="string"&&(s=l[0]),typeof l[1]=="string"&&(u=l[1]));var f=l.find(Tu),h=l.filter(Oi);return h.length===1?Oi(l[2])?(a={},o=l[2]):Oi(l[3])?(o={},a=l[3]):(o=h[0],a={}):h.length===2&&(o=h[0],a=h[1]),[s,u,o??(o={}),a??(a={}),f]}var Zx=function(r){return function(){for(var e,t,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],u=0,l=i;u<l.length;u++){var c=l[u],f=s.pop();if(f==="id"){if(wa(c)||L0(c)){a.id=c.toString();continue}if(c==null)continue;f=s.pop()}if((f==="traits"||f==="options")&&(c==null||Oi(c))&&(a[f]=c),Tu(c)){a.callback=c;break}}return[(e=a.id)!==null&&e!==void 0?e:r.id(),(t=a.traits)!==null&&t!==void 0?t:{},(n=a.options)!==null&&n!==void 0?n:{},a.callback]}};function RF(r,e,t,n){L0(r)&&(r=r.toString()),L0(e)&&(e=e.toString());var i=[r,e,t,n],o=i.filter(wa),a=o[0],s=a===void 0?r:a,u=o[1],l=u===void 0?null:u,c=i.filter(Oi)[0],f=c===void 0?{}:c,h=i.find(Tu);return[s,l,f,h]}function i_(){return typeof window<"u"}function Zz(){return!i_()}function kF(){return i_()?window.navigator.onLine:!0}function Vc(){return!kF()}function IF(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,o=[],a=[],s={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return a},get:function(c){return s[c.toLowerCase()]},has:function(c){return c.toLowerCase()in s}}}};for(var l in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,f,h){o.push(f=f.toLowerCase()),a.push([f,h]),s[f]=s[f]?s[f]+","+h:h}),t(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}var o_=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},Tv=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=o_();return(t&&t.fetch||IF).apply(void 0,r)},Cv="1.81.1",LP="api.segment.io/v1",DF=function(r,e,t){var n=e.reduce(function(i,o){var a=o.split(":"),s=a[0],u=a[1];return i[s]=u,i},{});return{type:"Counter",metric:r,value:1,tags:Me(Me({},n),{library:"analytics.js",library_version:"npm:next-".concat(Cv)})}};function xm(r){console.error("Error sending segment performance metrics",r)}var MF=(function(){function r(e){var t=this,n,i,o,a,s;if(this.host=(n=e==null?void 0:e.host)!==null&&n!==void 0?n:LP,this.sampleRate=(i=e==null?void 0:e.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=e==null?void 0:e.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=e==null?void 0:e.maxQueueSize)!==null&&a!==void 0?a:20,this.protocol=(s=e==null?void 0:e.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var u=!1,l=function(){u||(u=!0,t.flush().catch(xm),u=!1,setTimeout(l,t.flushTimer))};l()}}return r.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=DF(e,t);this.queue.push(n),e.includes("error")&&this.flush().catch(xm)}},r.prototype.flush=function(){return Qe(this,void 0,void 0,function(){var e=this;return Je(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){xm(n),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},r.prototype.send=function(){return Qe(this,void 0,void 0,function(){var e,t,n;return Je(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,Tv(n,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},r})(),Rh,jP=(function(r){qn(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){Rh=new MF(t)},e.prototype.increment=function(t,n,i){r.prototype.increment.call(this,t,n,i),Rh==null||Rh.increment(t,i??[])},e})(NP),wo=(function(r){qn(e,r);function e(t,n){return r.call(this,t,n,new jP)||this}return e.system=function(){return new this({type:"track",event:"system"})},e})(Yd);function NF(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var FP="bpc",BP=function(r,e,t,n,i,o){return{__t:FP,c:e,p:n,u:r,s:t,t:i,r:o}},LF=Object.keys(BP("","","","","",""));function jF(r){if(!NF(r)||r.__t!==FP)return!1;for(var e in r)if(!LF.includes(e))return!1;return!0}var FF=function(r,e){return r.indexOf("?")>-1?r:r+e},BF=function(r){var e=r.indexOf("#");return e===-1?r:r.slice(0,e)},UF=function(r){try{return new URL(r).pathname}catch{return r[0]==="/"?r:"/"+r}},UP=function(r){var e=r.c,t=r.p,n=r.s,i=r.u,o=r.r,a=r.t,s=e?UF(e):t,u=e?FF(e,n):BF(i);return{path:s,referrer:o,search:n,title:a,url:u}},zP=function(){var r=document.querySelector("link[rel='canonical']");return BP(location.href,r&&r.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},zF=function(){return UP(zP())};function VF(r,e){return Object.assign.apply(Object,Fr([{}],e.map(function(t){var n;if(r&&Object.prototype.hasOwnProperty.call(r,t))return n={},n[t]=r[t],n}),!1))}var nu=function(r,e){e===void 0&&(e=zF());var t=r.context,n;r.type==="page"&&(n=r.properties&&VF(r.properties,Object.keys(e)),r.properties=Me(Me(Me({},e),r.properties),r.name?{name:r.name}:{})),t.page=Me(Me(Me({},e),n),t.page)},GF=(function(r){qn(e,r);function e(t){var n=r.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(n_())},onEventMethodCall:function(i){var o=i.options;n.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=t,n}return e.prototype.maybeUpdateAnonId=function(t){t!=null&&t.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,n,i,o,a){var s=r.prototype.track.call(this,t,n,i,o);return nu(s,a),s},e.prototype.page=function(t,n,i,o,a,s){var u=r.prototype.page.call(this,t,n,i,o,a);return nu(u,s),u},e.prototype.screen=function(t,n,i,o,a,s){var u=r.prototype.screen.call(this,t,n,i,o,a);return nu(u,s),u},e.prototype.identify=function(t,n,i,o,a){var s=r.prototype.identify.call(this,t,n,i,o);return nu(s,a),s},e.prototype.group=function(t,n,i,o,a){var s=r.prototype.group.call(this,t,n,i,o);return nu(s,a),s},e.prototype.alias=function(t,n,i,o,a){var s=r.prototype.alias.call(this,t,n,i,o);return nu(s,a),s},e})(dF),qF=function(r){return"addMiddleware"in r&&r.type==="destination"},$i={getItem:function(){},setItem:function(){},removeItem:function(){}};try{$i=i_()&&window.localStorage?window.localStorage:$i}catch(r){console.warn("Unable to access localStorage",r)}function VP(r){var e=$i.getItem(r);return(e?JSON.parse(e):[]).map(function(t){return new wo(t.event,t.id)})}function WF(r,e){var t=VP(r),n=Fr(Fr([],e,!0),t,!0),i=n.reduce(function(o,a){var s;return Me(Me({},o),(s={},s[a.id]=a,s))},{});$i.setItem(r,JSON.stringify(Object.values(i)))}function GP(r){var e=$i.getItem(r);return e?JSON.parse(e):{}}function HF(r,e){var t=GP(r);$i.setItem(r,JSON.stringify(Me(Me({},t),e)))}function Qx(r){$i.removeItem(r)}var YF=function(){return new Date().getTime()};function j0(r,e,t){t===void 0&&(t=0);var n=50,i="persisted-queue:v1:".concat(r,":lock"),o=function(l){return new Date().getTime()>l},a=$i.getItem(i),s=a?JSON.parse(a):null,u=s===null||o(s);if(u){$i.setItem(i,JSON.stringify(YF()+n)),e(),$i.removeItem(i);return}!u&&t<3?setTimeout(function(){j0(r,e,t+1)},n):console.error("Unable to retrieve lock")}var a_=(function(r){qn(e,r);function e(t,n){var i=r.call(this,t,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),s=[],u={};return j0(n,function(){try{s=VP(o),u=GP(a),Qx(o),Qx(a),i.queue=Fr(Fr([],s,!0),i.queue,!0),i.seen=Me(Me({},u),i.seen)}catch(l){console.error(l)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var l=Fr(Fr([],i.queue,!0),i.future,!0);try{j0(n,function(){WF(o,l),HF(a,i.seen)})}catch(c){console.error(c)}}}),i}return e})(r_),XF=(function(r){qn(e,r);function e(t){return r.call(this,typeof t=="string"?new a_(4,t):t)||this}return e.prototype.flush=function(){return Qe(this,void 0,void 0,function(){return Je(this,function(t){return Vc()?[2,[]]:[2,r.prototype.flush.call(this)]})})},e})(TF);function s_(r){for(var e=r.constructor.prototype,t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++){var i=n[t];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);o&&typeof o.value=="function"&&(r[i]=r[i].bind(r))}}return r}/*! js-cookie v3.0.1 | MIT */function kh(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var $F={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function F0(r,e){function t(i,o,a){if(!(typeof document>"u")){a=kh({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,a[u]!==!0&&(s+="="+a[u].split(";")[0]));return document.cookie=i+"="+r.write(o,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var u=o[s].split("="),l=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(a[c]=r.read(l,c),i===c)break}catch{}}return i?a[i]:a}}return Object.create({set:t,get:n,remove:function(i,o){t(i,"",kh({},o,{expires:-1}))},withAttributes:function(i){return F0(this.converter,kh({},this.attributes,i))},withConverter:function(i){return F0(kh({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var yo=F0($F,{path:"/"});function KF(r){var e=r.hostname,t=e.split("."),n=t[t.length-1],i=[];if(t.length===4&&parseInt(n,10)>0||t.length<=1)return i;for(var o=t.length-2;o>=0;--o)i.push(t.slice(o).join("."));return i}function ZF(r){try{return new URL(r)}catch{return}}function qP(r){var e=ZF(r);if(e)for(var t=KF(e),n=0;n<t.length;++n){var i="__tld__",o=t[n],a={domain:"."+o};try{if(yo.set(i,"1",a),yo.get(i))return yo.remove(i,a),o}catch{return}}}var QF=365,WP=(function(){function r(e){e===void 0&&(e=r.defaults),this.options=Me(Me({},r.defaults),e)}return Object.defineProperty(r,"defaults",{get:function(){return{maxage:QF,domain:qP(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),r.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},r.prototype.get=function(e){var t;try{var n=yo.get(e);if(n==null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return null}},r.prototype.set=function(e,t){typeof t=="string"?yo.set(e,t,this.opts()):t===null?yo.remove(e,this.opts()):yo.set(e,JSON.stringify(t),this.opts())},r.prototype.remove=function(e){return yo.remove(e,this.opts())},r})(),JF=(function(){function r(){}return r.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},r.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(n===null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},r.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},r.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},r})(),u_=(function(){function r(){this.cache={}}return r.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},r.prototype.set=function(e,t){this.cache[e]=t},r.prototype.remove=function(e){delete this.cache[e]},r})(),zn={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function HP(r){return r&&r.stores&&Array.isArray(r.stores)&&r.stores.every(function(e){return Object.values(zn).includes(e)})}function eB(r){return typeof r=="object"&&r.name!==void 0}var Sm=function(r,e,t,n){console.warn("".concat(r.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(n))},ps=(function(){function r(e){this.stores=e}return r.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var o=i[n];try{if(t=o.get(e),t!=null)return t}catch(a){Sm(o,"get",e,a)}}return null},r.prototype.set=function(e,t){this.stores.forEach(function(n){try{n.set(e,t)}catch(i){Sm(n,"set",e,i)}})},r.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(n){Sm(t,"remove",e,n)}})},r.prototype.getAndSync=function(e){var t=this.get(e),n=typeof t=="number"?t.toString():t;return this.set(e,n),n},r})();function B0(r){var e=r.map(function(t){var n,i;switch(eB(t)?(n=t.name,i=t.settings):n=t,n){case zn.Cookie:return new WP(i);case zn.LocalStorage:return new JF;case zn.Memory:return new u_;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function YP(r,e){return r.map(function(t){return e&&t===zn.Cookie?{name:t,settings:e}:t})}var Xa={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},XP=(function(){function r(e,t){e===void 0&&(e=Xa);var n=this,i,o,a,s;this.options={},this.id=function(l){if(n.options.disable)return null;var c=n.identityStore.getAndSync(n.idKey);if(l!==void 0){n.identityStore.set(n.idKey,l);var f=l!==c&&c!==null&&l!==null;f&&n.anonymousId(null)}var h=n.identityStore.getAndSync(n.idKey);if(h)return h;var d=n.legacyUserStore.get(Xa.cookie.oldKey);return d?typeof d=="object"?d.id:d:null},this.anonymousId=function(l){var c,f;if(n.options.disable)return null;if(l===void 0){var h=(c=n.identityStore.getAndSync(n.anonKey))!==null&&c!==void 0?c:(f=n.legacySIO())===null||f===void 0?void 0:f[0];if(h)return h}return l===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,l??n_()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(l){var c;if(!n.options.disable)return l===null&&(l={}),l&&n.traitsStore.set(n.traitsKey,l??{}),(c=n.traitsStore.get(n.traitsKey))!==null&&c!==void 0?c:{}},this.options=Me(Me({},Xa),e),this.cookieOptions=t,this.idKey=(o=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:Xa.cookie.key,this.traitsKey=(s=(a=e.localStorage)===null||a===void 0?void 0:a.key)!==null&&s!==void 0?s:Xa.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(l){return l===zn.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(l){return l!==zn.Cookie});var u=this.legacyUserStore.get(Xa.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),s_(this)}return r.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),n=t[0],i=t[1];return[n,i]},r.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var n=this.id();(n===null||n===e)&&(t=Me(Me({},this.traits()),t)),e&&this.id(e),this.traits(t)}},r.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},r.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},r.prototype.load=function(){return new r(this.options,this.cookieOptions)},r.prototype.save=function(){return!0},r.prototype.createStorage=function(e,t,n){var i=[zn.LocalStorage,zn.Cookie,zn.Memory];return e.disable?new ps([]):e.persist?(e.storage!==void 0&&e.storage!==null&&HP(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==zn.LocalStorage})),n&&(i=i.filter(n)),new ps(B0(YP(i,t)))):new ps([new u_])},r.defaults=Xa,r})(),Jx={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},tB=(function(r){qn(e,r);function e(t,n){t===void 0&&(t=Jx);var i=r.call(this,Me(Me({},Jx),t),n)||this;return i.anonymousId=function(o){},s_(i),i}return e})(XP),l_="analytics";function $P(){return window[l_]}function rB(r){l_=r}function nB(r){window[l_]=r}var iB=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},KP=function(r,e,t){t.getAndRemove(r).forEach(function(n){Pv(e,n).catch(console.error)})},oB=function(r,e){return Qe(void 0,void 0,void 0,function(){var t,n,i;return Je(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Pv(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},aB=function(r,e){return Qe(void 0,void 0,void 0,function(){var t,n,i;return Je(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("register"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Pv(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},sB=KP.bind(void 0,"on"),uB=KP.bind(void 0,"setAnonymousId"),lB=function(r,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(n){setTimeout(function(){Pv(r,n).catch(console.error)},0)})})},iu=function(r){if(ZP(r)){var e=r.pop();return UP(e)}},ZP=function(r){var e=r[r.length-1];return jF(e)},U0=(function(){function r(e,t,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t}return r})(),cB=(function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(r.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),r.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},r.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},r.prototype.add=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!ZP(i.args)&&(i.args=Fr(Fr([],i.args,!0),[zP()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},r.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},r.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},r.prototype._pushSnippetWindowBuffer=function(){},r})();function Pv(r,e){return Qe(this,void 0,void 0,function(){var t,n;return Je(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=r[e.method].apply(r,e.args),iB(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return n=i.sent(),e.reject(n),[3,4];case 4:return[2]}})})}var fB=(function(){function r(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=Cv,this._preInitBuffer=new cB,this._promise=e(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];t.instance=i,t.ctx=o}).catch(function(){})}return r.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},r.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},r.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},r.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t.instance){var a=(n=t.instance)[e].apply(n,i);return Promise.resolve(a)}return new Promise(function(s,u){t._preInitBuffer.add(new U0(e,i,s,u))})}},r.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new U0(e,i)),t)}},r})(),Sl={},$a={},ou={},Tm={exports:{}},eS;function Av(){return eS||(eS=1,(function(r){r.exports=e(t),r.exports.find=r.exports,r.exports.replace=function(s,u,l,c){return e(i).call(this,s,u,l,c),s},r.exports.del=function(s,u,l){return e(n).call(this,s,u,null,l),s};function e(s){return function(u,l,c,f){var h=f&&a(f.normalizer)?f.normalizer:o;l=h(l);for(var d,v=!1;!v;)p();function p(){for(d in u){var m=h(d);if(l.indexOf(m)===0){var y=l.substr(m.length);if(y.charAt(0)==="."||y.length===0){l=y.substr(1);var b=u[d];if(b==null){v=!0;return}if(!l.length){v=!0;return}u=b;return}}}d=void 0,v=!0}if(d)return u==null?u:s(u,d,c)}}function t(s,u){if(s.hasOwnProperty(u))return s[u]}function n(s,u){return s.hasOwnProperty(u)&&delete s[u],s}function i(s,u,l){return s.hasOwnProperty(u)&&(s[u]=l),s}function o(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(s){return typeof s=="function"}})(Tm)),Tm.exports}var tS;function hB(){if(tS)return ou;tS=1;var r=ou&&ou.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ou,"__esModule",{value:!0});var e=r(Av());function t(i,o){return function(){var a=this.traits(),s=this.properties?this.properties():{};return e.default(a,"address."+i)||e.default(a,i)||(o?e.default(a,"address."+o):null)||(o?e.default(a,o):null)||e.default(s,"address."+i)||e.default(s,i)||(o?e.default(s,"address."+o):null)||(o?e.default(s,o):null)}}function n(i){i.zip=t("postalCode","zip"),i.country=t("country"),i.street=t("street"),i.state=t("state"),i.city=t("city"),i.region=t("region")}return ou.default=n,ou}var Tl={},rS;function dB(){if(rS)return Tl;rS=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.clone=void 0;function r(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r(e[n]));return t}else return Array.isArray(e)?e.map(r):e}return Tl.clone=r,Tl}var Ih={},nS;function vB(){if(nS)return Ih;nS=1,Object.defineProperty(Ih,"__esModule",{value:!0});var r={Salesforce:!0};function e(t){return!r[t]}return Ih.default=e,Ih}var Dh={},iS;function QP(){if(iS)return Dh;iS=1;var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;return Dh.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),i=0;if(!n)return new Date(e);for(var o=0,a;a=t[o];o++)n[a]=parseInt(n[a],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0,n[4]===" "?i=new Date().getTimezoneOffset():n[9]!=="Z"&&n[10]&&(i=n[11]*60+n[12],n[10]==="+"&&(i=0-i));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+i,n[7],n[8]);return new Date(s)},Dh.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:r.test(e)},Dh}var Mh={},oS;function pB(){if(oS)return Mh;oS=1;var r=/\d{13}/;return Mh.is=function(e){return r.test(e)},Mh.parse=function(e){return e=parseInt(e,10),new Date(e)},Mh}var Nh={},aS;function gB(){if(aS)return Nh;aS=1;var r=/\d{10}/;return Nh.is=function(e){return r.test(e)},Nh.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)},Nh}var Cm,sS;function c_(){if(sS)return Cm;sS=1;var r=QP(),e=pB(),t=gB(),n=Object.prototype,i=n.toString;function o(u){return i.call(u)==="[object Date]"}function a(u){return i.call(u)==="[object Number]"}Cm=function(l){return o(l)?l:a(l)?new Date(s(l)):r.is(l)?r.parse(l):e.is(l)?e.parse(l):t.is(l)?t.parse(l):new Date(l)};function s(u){return u<315576e5?u*1e3:u}return Cm}var Pm,uS;function yB(){if(uS)return Pm;uS=1;var r=QP();Pm=e;function e(i,o){return o===void 0&&(o=!0),i&&typeof i=="object"?t(i,o):Array.isArray(i)?n(i,o):r.is(i,o)?r.parse(i):i}function t(i,o){return Object.keys(i).forEach(function(a){i[a]=e(i[a],o)}),i}function n(i,o){return i.forEach(function(a,s){i[s]=e(a,o)}),i}return Pm}var lS;function Rs(){if(lS)return $a;lS=1;var r=$a&&$a.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty($a,"__esModule",{value:!0}),$a.Facade=void 0;var e=r(hB()),t=dB(),n=r(vB()),i=r(c_()),o=r(Av()),a=r(yB());function s(c,f){f=f||{},this.raw=t.clone(c),"clone"in f||(f.clone=!0),f.clone&&(c=t.clone(c)),"traverse"in f||(f.traverse=!0),"timestamp"in c?c.timestamp=i.default(c.timestamp):c.timestamp=new Date,f.traverse&&a.default(c),this.opts=f,this.obj=c}$a.Facade=s;var u=s.prototype;u.proxy=function(c){var f=c.split(".");c=f.shift();var h=this[c]||this.obj[c];return h&&(typeof h=="function"&&(h=h.call(this)||{}),f.length===0?this.opts.clone?l(h):h:(h=o.default(h,f.join(".")),this.opts.clone?l(h):h))},u.field=function(c){var f=this.obj[c];return this.opts.clone?l(f):f},s.proxy=function(c){return function(){return this.proxy(c)}},s.field=function(c){return function(){return this.field(c)}},s.multi=function(c){return function(){var f=this.proxy(c+"s");if(Array.isArray(f))return f;var h=this.proxy(c);return h&&(h=[this.opts.clone?t.clone(h):h]),h||[]}},s.one=function(c){return function(){var f=this.proxy(c);if(f)return f;var h=this.proxy(c+"s");if(Array.isArray(h))return h[0]}},u.json=function(){var c=this.opts.clone?t.clone(this.obj):this.obj;return this.type&&(c.type=this.type()),c},u.rawEvent=function(){return this.raw},u.options=function(c){var f=this.obj.options||this.obj.context||{},h=this.opts.clone?t.clone(f):f;if(!c)return h;if(this.enabled(c)){var d=this.integrations(),v=d[c]||o.default(d,c);return typeof v!="object"&&(v=o.default(this.options(),c)),typeof v=="object"?v:{}}},u.context=u.options,u.enabled=function(c){var f=this.proxy("options.providers.all");typeof f!="boolean"&&(f=this.proxy("options.all")),typeof f!="boolean"&&(f=this.proxy("integrations.all")),typeof f!="boolean"&&(f=!0);var h=f&&n.default(c),d=this.integrations();if(d.providers&&d.providers.hasOwnProperty(c)&&(h=d.providers[c]),d.hasOwnProperty(c)){var v=d[c];typeof v=="boolean"?h=v:h=!0}return!!h},u.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},u.active=function(){var c=this.proxy("options.active");return c==null&&(c=!0),c},u.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},u.sessionId=u.anonymousId,u.groupId=s.proxy("options.groupId"),u.traits=function(c){var f=this.proxy("options.traits")||{},h=this.userId();c=c||{},h&&(f.id=h);for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var v=this[d]==null?this.proxy("options.traits."+d):this[d]();if(v==null)continue;f[c[d]]=v,delete f[d]}return f},u.library=function(){var c=this.proxy("options.library");return c?typeof c=="string"?{name:c,version:null}:c:{name:"unknown",version:null}},u.device=function(){var c=this.proxy("context.device");(typeof c!="object"||c===null)&&(c={});var f=this.library().name;return c.type||(f.indexOf("ios")>-1&&(c.type="ios"),f.indexOf("android")>-1&&(c.type="android")),c},u.userAgent=s.proxy("context.userAgent"),u.timezone=s.proxy("context.timezone"),u.timestamp=s.field("timestamp"),u.channel=s.field("channel"),u.ip=s.proxy("context.ip"),u.userId=s.field("userId"),e.default(u);function l(c){return t.clone(c)}return $a}var Ka={},Lh={exports:{}},cS;function ks(){return cS||(cS=1,typeof Object.create=="function"?Lh.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Lh.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Lh.exports}var fS;function mB(){if(fS)return Ka;fS=1;var r=Ka&&Ka.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.Alias=void 0;var e=r(ks()),t=Rs();function n(i,o){t.Facade.call(this,i,o)}return Ka.Alias=n,e.default(n,t.Facade),n.prototype.action=function(){return"alias"},n.prototype.type=n.prototype.action,n.prototype.previousId=function(){return this.field("previousId")||this.field("from")},n.prototype.from=n.prototype.previousId,n.prototype.userId=function(){return this.field("userId")||this.field("to")},n.prototype.to=n.prototype.userId,Ka}var Za={},jh={},hS;function Rv(){if(hS)return jh;hS=1,Object.defineProperty(jh,"__esModule",{value:!0});var r=/.+\@.+\..+/;function e(t){return r.test(t)}return jh.default=e,jh}var dS;function bB(){if(dS)return Za;dS=1;var r=Za&&Za.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Za,"__esModule",{value:!0}),Za.Group=void 0;var e=r(ks()),t=r(Rv()),n=r(c_()),i=Rs();function o(s,u){i.Facade.call(this,s,u)}Za.Group=o,e.default(o,i.Facade);var a=o.prototype;return a.action=function(){return"group"},a.type=a.action,a.groupId=i.Facade.field("groupId"),a.created=function(){var s=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(s)return n.default(s)},a.email=function(){var s=this.proxy("traits.email");if(s)return s;var u=this.groupId();if(t.default(u))return u},a.traits=function(s){var u=this.properties(),l=this.groupId();s=s||{},l&&(u.id=l);for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var f=this[c]==null?this.proxy("traits."+c):this[c]();if(f==null)continue;u[s[c]]=f,delete u[c]}return u},a.name=i.Facade.proxy("traits.name"),a.industry=i.Facade.proxy("traits.industry"),a.employees=i.Facade.proxy("traits.employees"),a.properties=function(){return this.field("traits")||this.field("properties")||{}},Za}var Qa={},vS;function JP(){if(vS)return Qa;vS=1;var r=Qa&&Qa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.Identify=void 0;var e=Rs(),t=r(Av()),n=r(ks()),i=r(Rv()),o=r(c_()),a=function(l){return l.trim()};function s(l,c){e.Facade.call(this,l,c)}Qa.Identify=s,n.default(s,e.Facade);var u=s.prototype;return u.action=function(){return"identify"},u.type=u.action,u.traits=function(l){var c=this.field("traits")||{},f=this.userId();l=l||{},f&&(c.id=f);for(var h in l){var d=this[h]==null?this.proxy("traits."+h):this[h]();d!=null&&(c[l[h]]=d,h!==l[h]&&delete c[h])}return c},u.email=function(){var l=this.proxy("traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},u.created=function(){var l=this.proxy("traits.created")||this.proxy("traits.createdAt");if(l)return o.default(l)},u.companyCreated=function(){var l=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(l)return o.default(l)},u.companyName=function(){return this.proxy("traits.company.name")},u.name=function(){var l=this.proxy("traits.name");if(typeof l=="string")return a(l);var c=this.firstName(),f=this.lastName();if(c&&f)return a(c+" "+f)},u.firstName=function(){var l=this.proxy("traits.firstName");if(typeof l=="string")return a(l);var c=this.proxy("traits.name");if(typeof c=="string")return a(c).split(" ")[0]},u.lastName=function(){var l=this.proxy("traits.lastName");if(typeof l=="string")return a(l);var c=this.proxy("traits.name");if(typeof c=="string"){var f=a(c).indexOf(" ");if(f!==-1)return a(c.substr(f+1))}},u.uid=function(){return this.userId()||this.username()||this.email()},u.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},u.age=function(){var l=this.birthday(),c=t.default(this.traits(),"age");if(c!=null)return c;if(l instanceof Date){var f=new Date;return f.getFullYear()-l.getFullYear()}},u.avatar=function(){var l=this.traits();return t.default(l,"avatar")||t.default(l,"photoUrl")||t.default(l,"avatarUrl")},u.position=function(){var l=this.traits();return t.default(l,"position")||t.default(l,"jobTitle")},u.username=e.Facade.proxy("traits.username"),u.website=e.Facade.one("traits.website"),u.websites=e.Facade.multi("traits.website"),u.phone=e.Facade.one("traits.phone"),u.phones=e.Facade.multi("traits.phone"),u.address=e.Facade.proxy("traits.address"),u.gender=e.Facade.proxy("traits.gender"),u.birthday=e.Facade.proxy("traits.birthday"),Qa}var Ja={},pS;function f_(){if(pS)return Ja;pS=1;var r=Ja&&Ja.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Track=void 0;var e=r(ks()),t=Rs(),n=JP(),i=r(Rv()),o=r(Av());function a(l,c){t.Facade.call(this,l,c)}Ja.Track=a,e.default(a,t.Facade);var s=a.prototype;s.action=function(){return"track"},s.type=s.action,s.event=t.Facade.field("event"),s.value=t.Facade.proxy("properties.value"),s.category=t.Facade.proxy("properties.category"),s.id=t.Facade.proxy("properties.id"),s.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},s.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},s.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},s.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},s.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},s.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},s.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},s.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},s.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},s.sku=t.Facade.proxy("properties.sku"),s.tax=t.Facade.proxy("properties.tax"),s.name=t.Facade.proxy("properties.name"),s.price=t.Facade.proxy("properties.price"),s.total=t.Facade.proxy("properties.total"),s.repeat=t.Facade.proxy("properties.repeat"),s.coupon=t.Facade.proxy("properties.coupon"),s.shipping=t.Facade.proxy("properties.shipping"),s.discount=t.Facade.proxy("properties.discount"),s.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},s.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},s.description=t.Facade.proxy("properties.description"),s.plan=t.Facade.proxy("properties.plan"),s.subtotal=function(){var l=o.default(this.properties(),"subtotal"),c=this.total()||this.revenue();if(l)return l;if(!c)return 0;if(this.total()){var f=this.tax();f&&(c-=f),f=this.shipping(),f&&(c-=f),f=this.discount(),f&&(c+=f)}return c},s.products=function(){var l=this.properties(),c=o.default(l,"products");return Array.isArray(c)?c.filter(function(f){return f!==null}):[]},s.quantity=function(){var l=this.obj.properties||{};return l.quantity||1},s.currency=function(){var l=this.obj.properties||{};return l.currency||"USD"},s.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},s.query=t.Facade.proxy("options.query"),s.properties=function(l){var c=this.field("properties")||{};l=l||{};for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;c[l[f]]=h,delete c[f]}return c},s.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},s.email=function(){var l=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},s.revenue=function(){var l=this.proxy("properties.revenue"),c=this.event(),f=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!l&&c&&c.match(f)&&(l=this.proxy("properties.total")),u(l)},s.cents=function(){var l=this.revenue();return typeof l!="number"?this.value()||0:l*100},s.identify=function(){var l=this.json();return l.traits=this.traits(),new n.Identify(l,this.opts)};function u(l){if(l){if(typeof l=="number")return l;if(typeof l=="string"&&(l=l.replace(/\$/g,""),l=parseFloat(l),!isNaN(l)))return l}}return Ja}var es={},gS;function eA(){if(gS)return es;gS=1;var r=es&&es.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(es,"__esModule",{value:!0}),es.Page=void 0;var e=r(ks()),t=Rs(),n=f_(),i=r(Rv());function o(s,u){t.Facade.call(this,s,u)}es.Page=o,e.default(o,t.Facade);var a=o.prototype;return a.action=function(){return"page"},a.type=a.action,a.category=t.Facade.field("category"),a.name=t.Facade.field("name"),a.title=t.Facade.proxy("properties.title"),a.path=t.Facade.proxy("properties.path"),a.url=t.Facade.proxy("properties.url"),a.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},a.properties=function(s){var u=this.field("properties")||{},l=this.category(),c=this.name();s=s||{},l&&(u.category=l),c&&(u.name=c);for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;u[s[f]]=h,f!==s[f]&&delete u[f]}return u},a.email=function(){var s=this.proxy("context.traits.email")||this.proxy("properties.email");if(s)return s;var u=this.userId();if(i.default(u))return u},a.fullName=function(){var s=this.category(),u=this.name();return u&&s?s+" "+u:u},a.event=function(s){return s?"Viewed "+s+" Page":"Loaded a Page"},a.track=function(s){var u=this.json();return u.event=this.event(s),u.timestamp=this.timestamp(),u.properties=this.properties(),new n.Track(u,this.opts)},es}var ts={},yS;function _B(){if(yS)return ts;yS=1;var r=ts&&ts.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ts,"__esModule",{value:!0}),ts.Screen=void 0;var e=r(ks()),t=eA(),n=f_();function i(o,a){t.Page.call(this,o,a)}return ts.Screen=i,e.default(i,t.Page),i.prototype.action=function(){return"screen"},i.prototype.type=i.prototype.action,i.prototype.event=function(o){return o?"Viewed "+o+" Screen":"Loaded a Screen"},i.prototype.track=function(o){var a=this.json();return a.event=this.event(o),a.timestamp=this.timestamp(),a.properties=this.properties(),new n.Track(a,this.opts)},ts}var rs={},mS;function wB(){if(mS)return rs;mS=1;var r=rs&&rs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(rs,"__esModule",{value:!0}),rs.Delete=void 0;var e=r(ks()),t=Rs();function n(i,o){t.Facade.call(this,i,o)}return rs.Delete=n,e.default(n,t.Facade),n.prototype.type=function(){return"delete"},rs}var bS;function EB(){return bS||(bS=1,(function(r){var e=Sl&&Sl.__assign||function(){return e=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++){f=arguments[h];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.Delete=r.Screen=r.Page=r.Track=r.Identify=r.Group=r.Alias=r.Facade=void 0;var t=Rs();Object.defineProperty(r,"Facade",{enumerable:!0,get:function(){return t.Facade}});var n=mB();Object.defineProperty(r,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=bB();Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.Group}});var o=JP();Object.defineProperty(r,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=f_();Object.defineProperty(r,"Track",{enumerable:!0,get:function(){return a.Track}});var s=eA();Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return s.Page}});var u=_B();Object.defineProperty(r,"Screen",{enumerable:!0,get:function(){return u.Screen}});var l=wB();Object.defineProperty(r,"Delete",{enumerable:!0,get:function(){return l.Delete}}),r.default=e(e({},t.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:s.Page,Screen:u.Screen,Delete:l.Delete})})(Sl)),Sl}var ns=EB();function Xd(r,e){var t=new ns.Facade(r,e);return r.type==="track"&&(t=new ns.Track(r,e)),r.type==="identify"&&(t=new ns.Identify(r,e)),r.type==="page"&&(t=new ns.Page(r,e)),r.type==="alias"&&(t=new ns.Alias(r,e)),r.type==="group"&&(t=new ns.Group(r,e)),r.type==="screen"&&(t=new ns.Screen(r,e)),Object.defineProperty(t,"obj",{value:r,writable:!0}),t}var OB=function(r){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,r(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;r(e)})},tA=(function(r){qn(e,r);function e(t,n){var i=r.call(this,t)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return e})(Error),rA=function(r){return Me({"Content-Type":"text/plain"},typeof r=="function"?r():r)},xB=500,SB=64;function h_(r){var e=encodeURI(JSON.stringify(r)).split(/%..|./).length-1;return e/1024}function TB(r){return h_(r)>=xB-50}function CB(r){return h_(r)>=SB-10}function PB(r){var e=[],t=0;return r.forEach(function(n){var i=h_(e[t]);i>=64&&t++,e[t]?e[t].push(n):e[t]=[n]}),e}function AB(r,e){var t,n,i=[],o=!1,a=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:10,s=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:5e3,u=0;function l(v){var p;if(v.length!==0){var m=(p=v[0])===null||p===void 0?void 0:p.writeKey,y=v.map(function(b){var g=b;g.sentAt;var _=IP(g,["sentAt"]);return _});return Tv("https://".concat(r,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||o,headers:rA(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:m,batch:y,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(b){var g;if(b.status>=500)throw new Error("Bad response from server: ".concat(b.status));if(b.status===429){var _=(g=b.headers)===null||g===void 0?void 0:g.get("x-ratelimit-reset"),w=typeof _=="string"?parseInt(_)*1e3:s;throw new tA("Rate limit exceeded: ".concat(b.status),w)}})}}function c(v){var p;return v===void 0&&(v=1),Qe(this,void 0,void 0,function(){var m;return Je(this,function(y){return i.length?(m=i,i=[],[2,(p=l(m))===null||p===void 0?void 0:p.catch(function(b){var g,_=wo.system();_.log("error","Error sending batch",b),v<=((g=e==null?void 0:e.maxRetries)!==null&&g!==void 0?g:10)&&(b.name==="RateLimitError"&&(u=b.retryTimeout),i.push.apply(i,m),i.map(function(w){if("_metadata"in w){var x=w;x._metadata=Me(Me({},x._metadata),{retryCount:v})}}),h(v+1))})]):[2]})})}var f;function h(v){v===void 0&&(v=1),!f&&(f=setTimeout(function(){f=void 0,c(v).catch(console.error)},u||s),u=0)}OB(function(v){if(o=v,o&&i.length){var p=PB(i).map(l);Promise.all(p).catch(console.error)}});function d(v,p){return Qe(this,void 0,void 0,function(){var m;return Je(this,function(y){return i.push(p),m=i.length>=a||TB(i)||(e==null?void 0:e.keepalive)&&CB(i),[2,m||o?c():h()]})})}return{dispatch:d}}function RB(r){function e(t,n){return Tv(t,{credentials:r==null?void 0:r.credentials,keepalive:r==null?void 0:r.keepalive,headers:rA(r==null?void 0:r.headers),method:"post",body:JSON.stringify(n),priority:r==null?void 0:r.priority}).then(function(i){var o;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var a=(o=i.headers)===null||o===void 0?void 0:o.get("x-ratelimit-reset"),s=a?parseInt(a)*1e3:5e3;throw new tA("Rate limit exceeded: ".concat(i.status),s)}})}return{dispatch:e}}function kB(r,e,t,n,i){var o,a=r.user();delete e.options,e.writeKey=t==null?void 0:t.apiKey,e.userId=e.userId||a.id(),e.anonymousId=e.anonymousId||a.anonymousId(),e.sentAt=new Date;var s=r.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(e._metadata=Me(Me({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],l=[];for(var c in n){var f=n[c];c==="Segment.io"&&u.push(c),f.bundlingStatus==="bundled"&&u.push(c),f.bundlingStatus==="unbundled"&&l.push(c)}for(var h=0,d=(t==null?void 0:t.unbundledIntegrations)||[];h<d.length;h++){var v=d[h];l.includes(v)||l.push(v)}var p=(o=t==null?void 0:t.maybeBundledConfigIds)!==null&&o!==void 0?o:{},m=[];return u.sort().forEach(function(y){var b;((b=p[y])!==null&&b!==void 0?b:[]).forEach(function(g){m.push(g)})}),(t==null?void 0:t.addBundledMetadata)!==!1&&(e._metadata=Me(Me({},e._metadata),{bundled:u.sort(),unbundled:l.sort(),bundledIds:m})),e}var IB=function(r,e){return Qe(void 0,void 0,void 0,function(){var t;return Je(this,function(n){return t=function(i){return Qe(void 0,void 0,void 0,function(){var o;return Je(this,function(a){switch(a.label){case 0:return r(i)?(o=t,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function DB(r,e){return Qe(this,void 0,void 0,function(){var t,n=this;return Je(this,function(i){switch(i.label){case 0:return t=[],Vc()?[2,e]:[4,IB(function(){return e.length>0&&!Vc()},function(){return Qe(n,void 0,void 0,function(){var o,a,s;return Je(this,function(u){switch(u.label){case 0:return o=e.pop(),o?[4,Ql(o,r)]:[2];case 1:return a=u.sent(),s=a instanceof wo,s||t.push(o),[2]}})})})];case 1:return i.sent(),t.map(function(o){return e.pushWithBackoff(o)}),[2,e]}})})}function au(r,e,t,n){var i=this;r||setTimeout(function(){return Qe(i,void 0,void 0,function(){var o,a;return Je(this,function(s){switch(s.label){case 0:return o=!0,[4,DB(t,e)];case 1:return a=s.sent(),o=!1,e.todo>0&&n(o,a,t,n),[2]}})})},Math.random()*5e3)}function MB(r,e){var t,n,i,o,a=r.user();return e.previousId=(i=(n=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),e.userId=(o=e.userId)!==null&&o!==void 0?o:e.to,delete e.from,delete e.to,e}var NB=function(r){return r.name==="Segment.io"};function LB(r,e,t){var n,i,o;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(u)),u.clear()});var a=(n=e==null?void 0:e.apiKey)!==null&&n!==void 0?n:"",s=r.options.disableClientPersistence?new r_(r.queue.queue.maxAttempts,[]):new a_(r.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),u=new Set,l=!1,c=(i=e==null?void 0:e.apiHost)!==null&&i!==void 0?i:LP,f=(o=e==null?void 0:e.protocol)!==null&&o!==void 0?o:"https",h="".concat(f,"://").concat(c),d=e==null?void 0:e.deliveryStrategy,v=d&&"strategy"in d&&d.strategy==="batching"?AB(c,d.config):RB(d==null?void 0:d.config);function p(y){return Qe(this,void 0,void 0,function(){var b,g;return Je(this,function(_){return Vc()?(s.push(y),au(l,s,m,au),[2,y]):(u.add(y),b=y.event.type.charAt(0),g=Xd(y.event).json(),y.event.type==="track"&&delete g.traits,y.event.type==="alias"&&(g=MB(r,g)),s.getAttempts(y)>=s.maxAttempts?(u.delete(y),[2,y]):[2,v.dispatch("".concat(h,"/").concat(b),kB(r,g,e,t,y)).then(function(){return y}).catch(function(w){if(y.log("error","Error sending event",w),w.name==="RateLimitError"){var x=w.retryTimeout;s.pushWithBackoff(y,x)}else s.pushWithBackoff(y);return au(l,s,m,au),y}).finally(function(){u.delete(y)})])})})}var m={metadata:{writeKey:a,apiHost:c,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:p,identify:p,page:p,alias:p,group:p,screen:p};return s.todo&&au(l,s,m,au),m}var Qo="This is being deprecated and will be not be available in future releases of Analytics JS",Am=o_(),Rm=Am==null?void 0:Am.analytics;function jB(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=e?10:1,i=t?new r_(n,[]):new a_(n,r);return new XF(i)}var FB=(function(){function r(e,t){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var o;return(o=t.plugins.find(NB))===null||o===void 0?void 0:o.metadata},this.writeKey=e.writeKey;var i={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(n=e.cdnSettings)!==null&&n!==void 0?n:i,this.cdnURL=e.cdnURL}return Object.defineProperty(r.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),r})();function zi(){console.warn(Qo)}var nA=(function(r){qn(e,r);function e(t,n,i,o,a){var s=this,u,l;s=r.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=zi,s.addIntegrationMiddleware=zi,s.listeners=zi,s.addEventListener=zi,s.removeAllListeners=zi,s.removeListener=zi,s.removeEventListener=zi,s.hasListeners=zi,s.add=zi,s.addIntegration=zi;var c=n==null?void 0:n.cookie,f=(u=n==null?void 0:n.disableClientPersistence)!==null&&u!==void 0?u:!1;s.queue=i??jB("".concat(t.writeKey,":event-queue"),n==null?void 0:n.retryQueue,f),s.settings=new FB(t,s.queue);var h=n==null?void 0:n.storage;return s._universalStorage=s.createStore(f,h,c),s._user=o??new XP(Me({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.user),c).load(),s._group=a??new tB(Me({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.group),c).load(),s.eventFactory=new GF(s._user),s.integrations=(l=n==null?void 0:n.integrations)!==null&&l!==void 0?l:{},s.options=n??{},s_(s),s}return e.prototype.createStore=function(t,n,i){return t?new ps([new u_]):n&&HP(n)?new ps(B0(YP(n.stores,i))):new ps(B0([zn.LocalStorage,{name:zn.Cookie,settings:i},zn.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return Je(this,function(h){return i=iu(t),o=AF.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.track(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("track",a,d.event.properties,d.event.options),d})]})})},e.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return Je(this,function(d){return i=iu(t),o=Kx.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.page(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("page",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return Je(this,function(h){return i=iu(t),o=Zx(this._user).apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],this._user.identify(a,s),c=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("identify",d.event.userId,d.event.traits,d.event.options),d})]})})},e.prototype.group=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=iu(n);if(n.length===0)return this._group;var a=Zx(this._group).apply(void 0,n),s=a[0],u=a[1],l=a[2],c=a[3];this._group.identify(s,u);var f=this._group.id(),h=this._group.traits(),d=this.eventFactory.group(f,h,l,this.integrations,o);return this._dispatch(d,c).then(function(v){return t.emit("group",v.event.groupId,v.event.traits,v.event.options),v})},e.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return Je(this,function(h){return i=iu(t),o=RF.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.alias(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("alias",a,s,d.event.options),d})]})})},e.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return Je(this,function(d){return i=iu(t),o=Kx.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.screen(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("screen",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o;return Je(this,function(a){switch(a.label){case 0:return[4,Ei(()=>import("./auto-track-C60o0fXr.js"),__vite__mapDeps([0,1,2,3,4]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,Fr([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o;return Je(this,function(a){switch(a.label){case 0:return[4,Ei(()=>import("./auto-track-C60o0fXr.js"),__vite__mapDeps([0,1,2,3,4]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,Fr([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o;return Je(this,function(a){switch(a.label){case 0:return[4,Ei(()=>import("./auto-track-C60o0fXr.js"),__vite__mapDeps([0,1,2,3,4]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,Fr([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o;return Je(this,function(a){switch(a.label){case 0:return[4,Ei(()=>import("./auto-track-C60o0fXr.js"),__vite__mapDeps([0,1,2,3,4]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,Fr([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a=this;return Je(this,function(s){switch(s.label){case 0:return i=wo.system(),o=t.map(function(u){return a.queue.register(i,u,a)}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qe(this,void 0,void 0,function(){var i,o,a=this;return Je(this,function(s){switch(s.label){case 0:return i=wo.system(),o=t.map(function(u){var l=a.queue.plugins.find(function(c){return c.name===u});if(l)return a.queue.deregister(i,l,a);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,n){return Qe(this,void 0,void 0,function(){var i;return Je(this,function(o){return i=new wo(t),i.stats.increment("analytics_js.invoke",1,[t.type]),Vc()&&!this.options.retryQueue?[2,i]:[2,PF(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return Qe(this,void 0,void 0,function(){var n=this;return Je(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return Qe(n,void 0,void 0,function(){var o,a,s;return Je(this,function(u){switch(u.label){case 0:return[4,Ei(()=>Promise.resolve().then(()=>tU),void 0)];case 1:return o=u.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(l){if(l.type==="destination")return a[l.name]=!0}),s=o(t,a),[4,this.register(s)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(qF).forEach(function(o){(t==="*"||o.name.toLowerCase()===t.toLowerCase())&&o.addMiddleware.apply(o,n)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return Qe(this,void 0,void 0,function(){var n;return Je(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,Ei(()=>import("./index-DpcRw7pP.js"),__vite__mapDeps([5,1,2,3,4]))];case 1:return n=i.sent().queryString,[2,n(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(n){return n}),Qe(this,void 0,void 0,function(){return Je(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(Qo),nB(Rm??this),this},e.prototype.normalize=function(t){return console.warn(Qo),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(Qo),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return Cv},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,n){return Qe(this,void 0,void 0,function(){return Je(this,function(i){return console.warn(Qo),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return Qe(this,void 0,void 0,function(){return Je(this,function(n){switch(n.label){case 0:return console.warn(Qo),[4,this.page({path:t})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(Qo),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(Qo);var t=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var s=a.Integration;return s?(n[i.name]=s,n):(n[i.name]=a,n)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var n=this,i=t.shift();i&&!n[i]||n[i].apply(this,t)},e})(t_),_S=(function(r){qn(e,r);function e(){var t=r.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e})(nA),wS={};function iA(){return typeof process>"u"||!wS?{}:wS}var BB=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,UB=function(){var r,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var n,i=(n=t.getAttribute("src"))!==null&&n!==void 0?n:"",o=BB.exec(i);o&&o[1]&&(r=o[1])}),r},Od,zB=function(){var r,e=Od??((r=$P())===null||r===void 0?void 0:r._cdn);return e},VB=function(r){var e=$P();e&&(e._cdn=r),Od=r},d_=function(){var r=zB();if(r)return r;var e=UB();return e||"https://cdn.segment.com"},Qz=function(){var r=d_();return"".concat(r,"/next-integrations")};function GB(r,e){var t,n=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,o){var a,s,u=o[0],l=o[1];return typeof l=="object"?Me(Me({},i),(a={},a[u]=l,a)):Me(Me({},i),(s={},s[u]={},s))},{});return Object.entries(r.integrations).reduce(function(i,o){var a,s=o[0],u=o[1];return Me(Me({},i),(a={},a[s]=Me(Me({},u),n[s]),a))},{})}function qB(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return r}}function WB(r){return Qe(this,void 0,void 0,function(){var e;return Je(this,function(t){return e=navigator.userAgentData,e?r?[2,e.getHighEntropyValues(r).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var Cl;function HB(){if(Cl)return Cl;var r=qP(window.location.href);return Cl={expires:31536e6,secure:!1,path:"/"},r&&(Cl.domain=r),Cl}function YB(r){var e={btid:"dataxu",urid:"millennial-media"};r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&");for(var t=r.split("&"),n=0,i=t;n<i.length;n++){var o=i[n],a=o.split("="),s=a[0],u=a[1];if(e[s])return{id:u,type:e[s]}}}function XB(r){return r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&"),r.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),e[s]=qB(a)}return e},{})}function $B(){var r=yo.get("_ga");if(r&&r.startsWith("amp"))return r}function KB(r,e,t){var n,i=new ps(t?[]:[new WP(HB())]),o=i.get("s:context.referrer"),a=(n=YB(r))!==null&&n!==void 0?n:o;a&&(e&&(e.referrer=Me(Me({},e.referrer),a)),i.set("s:context.referrer",a))}var ZB=function(r){try{var e=new URLSearchParams;return Object.entries(r).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(o){return e.append(n,o)}):e.append(n,i)}),e.toString()}catch{return""}},QB=(function(){function r(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,n){return Qe(e,void 0,void 0,function(){var i;return Je(this,function(o){switch(o.label){case 0:this.instance=n,o.label=1;case 1:return o.trys.push([1,3,,4]),i=this,[4,WB(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var n,i,o=t.event.context,a=o.page.search||"",s=typeof a=="object"?ZB(a):a;o.userAgent=navigator.userAgent,o.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof o.locale>"u"&&typeof u<"u"&&(o.locale=u),(n=o.library)!==null&&n!==void 0||(o.library={name:"analytics.js",version:"".concat("npm:next","-").concat(Cv)}),s&&!o.campaign&&(o.campaign=XB(s));var l=$B();l&&(o.amp={id:l}),KB(s,o,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return r})(),JB=new QB;function oA(r){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===r})}function km(r,e){var t=oA(r);if(t!==void 0){var n=t==null?void 0:t.getAttribute("status");if(n==="loaded")return Promise.resolve(t);if(n==="loading")return new Promise(function(i,o){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,s=window.document.createElement("script");s.type="text/javascript",s.src=r,s.async=!0,s.setAttribute("status","loading");for(var u=0,l=Object.entries({});u<l.length;u++){var c=l[u],f=c[0],h=c[1];s.setAttribute(f,h)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),o(new Error("Failed to load ".concat(r)))};var d=window.document.querySelector("script");d?(a=d.parentElement)===null||a===void 0||a.insertBefore(s,d):window.document.head.appendChild(s)})}function Jz(r){var e=oA(r);return e!==void 0&&e.remove(),Promise.resolve()}function aA(r,e,t){return Qe(this,void 0,void 0,function(){function n(l,c){return Qe(this,void 0,void 0,function(){var f,h,d;return Je(this,function(v){switch(v.label){case 0:return f=!1,h=null,[4,c({payload:Xd(l,{clone:!0,traverse:!1}),integration:r,next:function(p){f=!0,p===null&&(h=null),p&&(h=p.obj)}})];case 1:return v.sent(),!f&&h!==null&&(h=h,h.integrations=Me(Me({},l.integrations),(d={},d[r]=!1,d))),[2,h]}})})}var i,o,a,s,u;return Je(this,function(l){switch(l.label){case 0:i=Xd(e,{clone:!0,traverse:!1}).rawEvent(),o=0,a=t,l.label=1;case 1:return o<a.length?(s=a[o],[4,n(i,s)]):[3,4];case 2:if(u=l.sent(),u===null)return[2,null];i=u,l.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function eU(r,e){function t(n){return Qe(this,void 0,void 0,function(){var i;return Je(this,function(o){switch(o.label){case 0:return i=!1,[4,r({payload:Xd(n.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new Nu({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(r.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:t,page:t,screen:t,identify:t,alias:t,group:t}}const tU=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:aA,sourceMiddlewarePlugin:eU},Symbol.toStringTag,{value:"Module"}));function Fh(r,e){var t=e.methodName,n=e.integrationName,i=e.type,o=e.didError,a=o===void 0?!1:o;r.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(t),"integration_name:".concat(n),"type:".concat(i)])}var rU=(function(){function r(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=DP(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return r.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},r.prototype.transform=function(e){return Qe(this,void 0,void 0,function(){var t;return Je(this,function(n){switch(n.label){case 0:return[4,aA(this.name,e.event,this.middleware)];case 1:return t=n.sent(),t===null&&e.cancel(new Nu({retry:!1,reason:"dropped by destination middleware"})),[2,new wo(t)]}})})},r.prototype._createMethod=function(e){var t=this;return function(n){return Qe(t,void 0,void 0,function(){var i,o;return Je(this,function(a){switch(a.label){case 0:return this.action[e]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!a.sent())throw new Error("Something prevented the destination from getting ready");return Fh(n,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return a.sent(),[3,6];case 5:throw o=a.sent(),Fh(n,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),o;case 6:return[2,n]}})})}},r.prototype.isLoaded=function(){return this.action.isLoaded()},r.prototype.ready=function(){return Qe(this,void 0,void 0,function(){return Je(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},r.prototype.load=function(e,t){return Qe(this,void 0,void 0,function(){var n,i,o,a;return Je(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),Fh(e,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(e,t),o=(i=this.loadPromise).resolve,[4,n];case 2:return o.apply(i,[s.sent()]),[2,n];case 3:throw a=s.sent(),Fh(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(a),a;case 4:return[2]}})})},r.prototype.unload=function(e,t){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,e,t)},r})();function nU(r){if(!Array.isArray(r))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return r.forEach(function(t){e.forEach(function(n){var i;if(t[n]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function iU(r,e){var t=r[e.creationName],n=r[e.name];return r.All===!1&&!t&&!n||t===!1||n===!1}function oU(r,e){return Qe(this,void 0,void 0,function(){var t,n,i,o,a,s;return Je(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),n=d_(),!e)return[3,6];i=r.url.split("/"),o=i[i.length-2],a=r.url.replace(o,btoa(o).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,km(a.replace(t,n))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,km(r.url.replace(t,n))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,km(r.url.replace(t,n))];case 7:u.sent(),u.label=8;case 8:return typeof window[r.libraryName]=="function"?[2,window[r.libraryName]]:[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",r),s;case 10:return[2]}})})}function aU(r,e,t,n,i,o){var a,s,u;return Qe(this,void 0,void 0,function(){var l,c,f,h=this;return Je(this,function(d){switch(d.label){case 0:return l=[],c=(s=(a=r.middlewareSettings)===null||a===void 0?void 0:a.routingRules)!==null&&s!==void 0?s:[],f=((u=r.remotePlugins)!==null&&u!==void 0?u:[]).map(function(v){return Qe(h,void 0,void 0,function(){var p,m,y,b,g,_,w;return Je(this,function(x){switch(x.label){case 0:if(iU(e,v))return[2];x.label=1;case 1:return x.trys.push([1,6,,7]),m=o==null?void 0:o.find(function(E){var O=E.pluginName;return O===v.name}),m?[3,3]:[4,oU(v,n==null?void 0:n.obfuscate)];case 2:m=x.sent(),x.label=3;case 3:return p=m,p?(y=t[v.name],[4,p(Me(Me({},v.settings),y))]):[3,5];case 4:b=x.sent(),g=Array.isArray(b)?b:[b],nU(g),_=c.filter(function(E){return E.destinationName===v.creationName}),g.forEach(function(E){var O=new rU(v.creationName,E);_.length&&i&&O.addMiddleware(i),l.push(O)}),x.label=5;case 5:return[3,7];case 6:return w=x.sent(),console.warn("Failed to load Remote Plugin",w),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return d.sent(),[2,l.filter(Boolean)]}})})}var Im,ES,sU=o_(),OS=(Im=(ES=sU).__SEGMENT_INSPECTOR__)!==null&&Im!==void 0?Im:ES.__SEGMENT_INSPECTOR__={},uU=function(r){var e;return(e=OS.attach)===null||e===void 0?void 0:e.call(OS,r)};function lU(r,e){return Tv("".concat(e,"/v1/projects/").concat(r,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(n){throw new Error(n)})}).catch(function(t){throw console.error(t.message),t})}function cU(r){return iA().NODE_ENV!=="test"&&Object.keys(r.integrations).length>1}function fU(r){var e,t,n;return iA().NODE_ENV!=="test"&&((n=(t=(e=r.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)>0}function hU(r,e){uB(r,e),sB(r,e)}function dU(r,e,t){return Qe(this,void 0,void 0,function(){return Je(this,function(n){switch(n.label){case 0:return[4,pU(r,e)];case 1:return n.sent(),lB(r,t),[2]}})})}var vU=function(){var r,e,t=(r=window.location.hash)!==null&&r!==void 0?r:"",n=(e=window.location.search)!==null&&e!==void 0?e:"",i=n.length?n:t.replace(/(?=#).*(?=\?)/,"");return i},pU=function(r,e){return Qe(void 0,void 0,void 0,function(){return Je(this,function(t){switch(t.label){case 0:return e.includes("ajs_")?[4,r.queryString(e).catch(console.error)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};function gU(r,e,t,n,i,o,a){var s,u,l;return i===void 0&&(i=[]),Qe(this,void 0,void 0,function(){var c,f,h,d,v,p,m,y,b,g,_,w,x,E,O,T=this;return Je(this,function(C){switch(C.label){case 0:return hU(t,a),c=i==null?void 0:i.filter(function(P){return typeof P=="object"}),f=i==null?void 0:i.filter(function(P){return typeof P=="function"&&typeof P.pluginName=="string"}),fU(e)?[4,Ei(()=>import("./index-CtQ5SWOa.js"),[]).then(function(P){return P.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return d=C.sent(),[3,3];case 2:d=void 0,C.label=3;case 3:return h=d,cU(e)||o.length>0?[4,Ei(()=>import("./index-e1OJvpU4.js"),__vite__mapDeps([6,7,1,2,3,4])).then(function(P){return P.ajsDestinations(r,e,t.integrations,n,h,o)})]:[3,5];case 4:return p=C.sent(),[3,6];case 5:p=[],C.label=6;case 6:return v=p,e.legacyVideoPluginsEnabled?[4,Ei(()=>import("./index-BbJ932W9.js"),__vite__mapDeps([8,1,2,3,4])).then(function(P){return P.loadLegacyVideoPlugins(t)})]:[3,8];case 7:C.sent(),C.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,Ei(()=>import("./index-D5Lk4-cK.js"),__vite__mapDeps([9,7,1,2,3,4])).then(function(P){var R;return P.schemaFilter((R=n.plan)===null||R===void 0?void 0:R.track,e)})]:[3,10];case 9:return y=C.sent(),[3,11];case 10:y=void 0,C.label=11;case 11:return m=y,b=GB(e,n),[4,aU(e,t.integrations,b,n,h,f).catch(function(){return[]})];case 12:return g=C.sent(),_=Fr(Fr([JB],v,!0),g,!0),m&&_.push(m),w=((u=n.integrations)===null||u===void 0?void 0:u.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,w?[3,14]:(E=(x=_).push,[4,LB(t,b["Segment.io"],e.integrations)]);case 13:E.apply(x,[C.sent()]),C.label=14;case 14:return[4,t.register.apply(t,Fr(Fr([],_,!1),c,!1))];case 15:return O=C.sent(),[4,aB(t,a)];case 16:return C.sent(),Object.entries((l=e.enabledMiddleware)!==null&&l!==void 0?l:{}).some(function(P){var R=P[1];return R})?[4,Ei(()=>import("./index-DPaGinvI.js"),__vite__mapDeps([10,1,2,3,4])).then(function(P){var R=P.remoteMiddlewares;return Qe(T,void 0,void 0,function(){var k,I;return Je(this,function(M){switch(M.label){case 0:return[4,R(O,e,n.obfuscate)];case 1:return k=M.sent(),I=k.map(function(j){return t.addSourceMiddleware(j)}),[2,Promise.all(I)]}})})})]:[3,18];case 17:C.sent(),C.label=18;case 18:return[4,oB(t,a)];case 19:return C.sent(),[2,O]}})})}function yU(r,e,t){var n,i,o,a,s,u,l,c,f;return e===void 0&&(e={}),Qe(this,void 0,void 0,function(){var h,d,v,p,m,y,b,g,_,w,x;return Je(this,function(E){switch(E.label){case 0:return e.disable===!0?[2,[new _S,wo.system()]]:(e.globalAnalyticsKey&&rB(e.globalAnalyticsKey),r.cdnURL&&VB(r.cdnURL),e.initialPageview&&t.add(new U0("page",[])),h=vU(),d=(n=r.cdnURL)!==null&&n!==void 0?n:d_(),(i=r.cdnSettings)!==null&&i!==void 0?(p=i,[3,3]):[3,1]);case 1:return[4,lU(r.writeKey,d)];case 2:p=E.sent(),E.label=3;case 3:return v=p,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),typeof e.disable!="function"?[3,5]:[4,e.disable(v)];case 4:if(m=E.sent(),m)return[2,[new _S,wo.system()]];E.label=5;case 5:return y=(a=(o=v.integrations["Segment.io"])===null||o===void 0?void 0:o.retryQueue)!==null&&a!==void 0?a:!0,e=Me({retryQueue:y},e),b=new nA(Me(Me({},r),{cdnSettings:v,cdnURL:d}),e),uU(b),g=(s=r.plugins)!==null&&s!==void 0?s:[],_=(u=r.classicIntegrations)!==null&&u!==void 0?u:[],w=(l=e.integrations)===null||l===void 0?void 0:l["Segment.io"],jP.initRemoteMetrics(Me(Me({},v.metrics),{host:(c=w==null?void 0:w.apiHost)!==null&&c!==void 0?c:(f=v.metrics)===null||f===void 0?void 0:f.host,protocol:w==null?void 0:w.protocol})),[4,gU(r.writeKey,v,b,e,g,_,t)];case 6:return x=E.sent(),b.initialized=!0,b.emit("initialize",r,e),[4,dU(b,h,t)];case 7:return E.sent(),[2,[b,x]]}})})}var mU=(function(r){qn(e,r);function e(){var t=this,n=DP(),i=n.promise,o=n.resolve;return t=r.call(this,function(a){return i.then(function(s){var u=s[0],l=s[1];return yU(u,l,a)})})||this,t._resolveLoadStart=function(a,s){return o([a,s])},t}return e.prototype.load=function(t,n){return n===void 0&&(n={}),this._resolveLoadStart(t,n),this},e.load=function(t,n){return n===void 0&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(i){return i[0]})},e})(fB);/*! For license information please see base.mjs.LICENSE.txt */var bU={5:function(r,e,t){var n=this&&this.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(x[O]=E[O])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=_}g(_,w),_.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var i=t(1018),o=t(8014),a=t(3413),s=t(7315),u=t(1342),l=t(9052),c=t(9155),f=t(9223),h=(function(g){function _(w){var x=g.call(this)||this;return x.isStopped=!1,w?(x.destination=w,o.isSubscription(w)&&w.add(x)):x.destination=e.EMPTY_OBSERVER,x}return n(_,g),_.create=function(w,x,E){return new m(w,x,E)},_.prototype.next=function(w){this.isStopped?b(l.nextNotification(w),this):this._next(w)},_.prototype.error=function(w){this.isStopped?b(l.errorNotification(w),this):(this.isStopped=!0,this._error(w))},_.prototype.complete=function(){this.isStopped?b(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,g.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(w){this.destination.next(w)},_.prototype._error=function(w){try{this.destination.error(w)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_})(o.Subscription);e.Subscriber=h;var d=Function.prototype.bind;function v(g,_){return d.call(g,_)}var p=(function(){function g(_){this.partialObserver=_}return g.prototype.next=function(_){var w=this.partialObserver;if(w.next)try{w.next(_)}catch(x){y(x)}},g.prototype.error=function(_){var w=this.partialObserver;if(w.error)try{w.error(_)}catch(x){y(x)}else y(_)},g.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(w){y(w)}},g})(),m=(function(g){function _(w,x,E){var O,T,C=g.call(this)||this;return i.isFunction(w)||!w?O={next:w??void 0,error:x??void 0,complete:E??void 0}:C&&a.config.useDeprecatedNextContext?((T=Object.create(w)).unsubscribe=function(){return C.unsubscribe()},O={next:w.next&&v(w.next,T),error:w.error&&v(w.error,T),complete:w.complete&&v(w.complete,T)}):O=w,C.destination=new p(O),C}return n(_,g),_})(h);function y(g){a.config.useDeprecatedSynchronousErrorHandling?f.captureError(g):s.reportUnhandledError(g)}function b(g,_){var w=a.config.onStoppedNotification;w&&c.timeoutProvider.setTimeout(function(){return w(g,_)})}e.SafeSubscriber=m,e.EMPTY_OBSERVER={closed:!0,next:u.noop,error:function(g){throw g},complete:u.noop}},45:function(r,e){var t=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0});var n=(function(){function o(a){this.position=0,this.length=a}return o.prototype.getUInt8=function(a){throw new Error("Not implemented")},o.prototype.getInt8=function(a){throw new Error("Not implemented")},o.prototype.getFloat64=function(a){throw new Error("Not implemented")},o.prototype.getVarInt=function(a){throw new Error("Not implemented")},o.prototype.putUInt8=function(a,s){throw new Error("Not implemented")},o.prototype.putInt8=function(a,s){throw new Error("Not implemented")},o.prototype.putFloat64=function(a,s){throw new Error("Not implemented")},o.prototype.getInt16=function(a){return this.getInt8(a)<<8|this.getUInt8(a+1)},o.prototype.getUInt16=function(a){return this.getUInt8(a)<<8|this.getUInt8(a+1)},o.prototype.getInt32=function(a){return this.getInt8(a)<<24|this.getUInt8(a+1)<<16|this.getUInt8(a+2)<<8|this.getUInt8(a+3)},o.prototype.getUInt32=function(a){return this.getUInt8(a)<<24|this.getUInt8(a+1)<<16|this.getUInt8(a+2)<<8|this.getUInt8(a+3)},o.prototype.getInt64=function(a){return this.getInt8(a)<<56|this.getUInt8(a+1)<<48|this.getUInt8(a+2)<<40|this.getUInt8(a+3)<<32|this.getUInt8(a+4)<<24|this.getUInt8(a+5)<<16|this.getUInt8(a+6)<<8|this.getUInt8(a+7)},o.prototype.getSlice=function(a,s){return new i(a,s,this)},o.prototype.putInt16=function(a,s){this.putInt8(a,s>>8),this.putUInt8(a+1,255&s)},o.prototype.putUInt16=function(a,s){this.putUInt8(a,s>>8&255),this.putUInt8(a+1,255&s)},o.prototype.putInt32=function(a,s){this.putInt8(a,s>>24),this.putUInt8(a+1,s>>16&255),this.putUInt8(a+2,s>>8&255),this.putUInt8(a+3,255&s)},o.prototype.putUInt32=function(a,s){this.putUInt8(a,s>>24&255),this.putUInt8(a+1,s>>16&255),this.putUInt8(a+2,s>>8&255),this.putUInt8(a+3,255&s)},o.prototype.putInt64=function(a,s){this.putInt8(a,s>>48),this.putUInt8(a+1,s>>42&255),this.putUInt8(a+2,s>>36&255),this.putUInt8(a+3,s>>30&255),this.putUInt8(a+4,s>>24&255),this.putUInt8(a+5,s>>16&255),this.putUInt8(a+6,s>>8&255),this.putUInt8(a+7,255&s)},o.prototype.putVarInt=function(a,s){for(var u=0;s>1;){var l=s%128;s>=128&&(l+=128),s/=128,this.putUInt8(a+u,l),u+=1}return u},o.prototype.putBytes=function(a,s){for(var u=0,l=s.remaining();u<l;u++)this.putUInt8(a+u,s.readUInt8())},o.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},o.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},o.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},o.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},o.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},o.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},o.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},o.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},o.prototype.readVarInt=function(){var a=this.getVarInt(this.position);return this._updatePos(a.length),a.value},o.prototype.writeUInt8=function(a){this.putUInt8(this._updatePos(1),a)},o.prototype.writeInt8=function(a){this.putInt8(this._updatePos(1),a)},o.prototype.writeInt16=function(a){this.putInt16(this._updatePos(2),a)},o.prototype.writeInt32=function(a){this.putInt32(this._updatePos(4),a)},o.prototype.writeUInt32=function(a){this.putUInt32(this._updatePos(4),a)},o.prototype.writeInt64=function(a){this.putInt64(this._updatePos(8),a)},o.prototype.writeFloat64=function(a){this.putFloat64(this._updatePos(8),a)},o.prototype.writeVarInt=function(a){var s=this.putVarInt(this.position,a);this._updatePos(s)},o.prototype.writeBytes=function(a){this.putBytes(this._updatePos(a.remaining()),a)},o.prototype.readSlice=function(a){return this.getSlice(this._updatePos(a),a)},o.prototype._updatePos=function(a){var s=this.position;return this.position+=a,s},o.prototype.remaining=function(){return this.length-this.position},o.prototype.hasRemaining=function(){return this.remaining()>0},o.prototype.reset=function(){this.position=0},o.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},o.prototype.toHex=function(){for(var a="",s=0;s<this.length;s++){var u=this.getUInt8(s).toString(16);u.length===1&&(u="0"+u),a+=u,s!==this.length-1&&(a+=" ")}return a},o})();e.default=n;var i=(function(o){function a(s,u,l){var c=o.call(this,u)||this;return c._start=s,c._inner=l,c}return t(a,o),a.prototype.putUInt8=function(s,u){this._inner.putUInt8(this._start+s,u)},a.prototype.getUInt8=function(s){return this._inner.getUInt8(this._start+s)},a.prototype.putInt8=function(s,u){this._inner.putInt8(this._start+s,u)},a.prototype.putFloat64=function(s,u){this._inner.putFloat64(this._start+s,u)},a.prototype.getInt8=function(s){return this._inner.getInt8(this._start+s)},a.prototype.getFloat64=function(s){return this._inner.getFloat64(this._start+s)},a})(n)},93:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var t="__isBrokenObject__",n="__reason__";e.createBrokenObject=function(i,o){o===void 0&&(o={});var a=function(){throw i};return new Proxy(o,{get:function(s,u){return u===t||(u===n?i:void(u!=="toJSON"&&a()))},set:a,apply:a,construct:a,defineProperty:a,deleteProperty:a,getOwnPropertyDescriptor:a,getPrototypeOf:a,has:a,isExtensible:a,ownKeys:a,preventExtensions:a,setPrototypeOf:a})},e.isBrokenObject=function(i){return i!==null&&typeof i=="object"&&i[t]===!0},e.getBrokenObjectReason=function(i){return i[n]}},95:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSubject=void 0;var i=(function(o){function a(){var s=o!==null&&o.apply(this,arguments)||this;return s._value=null,s._hasValue=!1,s._isComplete=!1,s}return n(a,o),a.prototype._checkFinalizedStatuses=function(s){var u=this,l=u.hasError,c=u._hasValue,f=u._value,h=u.thrownError,d=u.isStopped,v=u._isComplete;l?s.error(h):(d||v)&&(c&&s.next(f),s.complete())},a.prototype.next=function(s){this.isStopped||(this._value=s,this._hasValue=!0)},a.prototype.complete=function(){var s=this,u=s._hasValue,l=s._value;s._isComplete||(this._isComplete=!0,u&&o.prototype.next.call(this,l),o.prototype.complete.call(this))},a})(t(2483).Subject);e.AsyncSubject=i},137:r=>{r.exports=class{constructor(e,t,n,i){let o;if(typeof e=="object"){let a=e;e=a.k_p,t=a.k_i,n=a.k_d,i=a.dt,o=a.i_max}this.k_p=typeof e=="number"?e:1,this.k_i=t||0,this.k_d=n||0,this.dt=i||0,this.i_max=o||0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}setTarget(e){this.target=e}update(e){this.currentValue=e;let t=this.dt;if(!t){let o=Date.now();t=this.lastTime===0?0:(o-this.lastTime)/1e3,this.lastTime=o}typeof t=="number"&&t!==0||(t=1);let n=this.target-this.currentValue;if(this.sumError=this.sumError+n*t,this.i_max>0&&Math.abs(this.sumError)>this.i_max){let o=this.sumError>0?1:-1;this.sumError=o*this.i_max}let i=(n-this.lastError)/t;return this.lastError=n,this.k_p*n+this.k_i*this.sumError+this.k_d*i}reset(){this.sumError=0,this.lastError=0,this.lastTime=0}}},182:function(r,e,t){var n=this&&this.__extends||(function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualAction=e.VirtualTimeScheduler=void 0;var i=t(5267),o=t(8014),a=(function(u){function l(c,f){c===void 0&&(c=s),f===void 0&&(f=1/0);var h=u.call(this,c,function(){return h.frame})||this;return h.maxFrames=f,h.frame=0,h.index=-1,h}return n(l,u),l.prototype.flush=function(){for(var c,f,h=this.actions,d=this.maxFrames;(f=h[0])&&f.delay<=d&&(h.shift(),this.frame=f.delay,!(c=f.execute(f.state,f.delay))););if(c){for(;f=h.shift();)f.unsubscribe();throw c}},l.frameTimeFactor=10,l})(t(5648).AsyncScheduler);e.VirtualTimeScheduler=a;var s=(function(u){function l(c,f,h){h===void 0&&(h=c.index+=1);var d=u.call(this,c,f)||this;return d.scheduler=c,d.work=f,d.index=h,d.active=!0,d.index=c.index=h,d}return n(l,u),l.prototype.schedule=function(c,f){if(f===void 0&&(f=0),Number.isFinite(f)){if(!this.id)return u.prototype.schedule.call(this,c,f);this.active=!1;var h=new l(this.scheduler,this.work);return this.add(h),h.schedule(c,f)}return o.Subscription.EMPTY},l.prototype.requestAsyncId=function(c,f,h){h===void 0&&(h=0),this.delay=c.frame+h;var d=c.actions;return d.push(this),d.sort(l.sortActions),1},l.prototype.recycleAsyncId=function(c,f,h){},l.prototype._execute=function(c,f){if(this.active===!0)return u.prototype._execute.call(this,c,f)},l.sortActions=function(c,f){return c.delay===f.delay?c.index===f.index?0:c.index>f.index?1:-1:c.delay>f.delay?1:-1},l})(i.AsyncAction);e.VirtualAction=s},187:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=void 0;var n=t(7286),i=t(3638);e.zipAll=function(o){return i.joinAllInternals(n.zip,o)}},206:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=n(t(4151));e.Rediscovery=i.default;var o=n(t(9018));e.RoutingTable=o.default,e.default=i.default},245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.not=void 0,e.not=function(t,n){return function(i,o){return!t.call(n,i,o)}}},269:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=void 0;var n=t(3865),i=t(1107),o=t(7843);e.startWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=i.popScheduler(a);return o.operate(function(l,c){(u?n.concat(a,l,u):n.concat(a,l)).subscribe(c)})}},326:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_8=e.BOLT_PROTOCOL_V5_7=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0,e.FETCH_ALL=-1,e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,e.DEFAULT_POOL_MAX_SIZE=100,e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,e.ACCESS_MODE_READ="READ",e.ACCESS_MODE_WRITE="WRITE",e.BOLT_PROTOCOL_V1=1,e.BOLT_PROTOCOL_V2=2,e.BOLT_PROTOCOL_V3=3,e.BOLT_PROTOCOL_V4_0=4,e.BOLT_PROTOCOL_V4_1=4.1,e.BOLT_PROTOCOL_V4_2=4.2,e.BOLT_PROTOCOL_V4_3=4.3,e.BOLT_PROTOCOL_V4_4=4.4,e.BOLT_PROTOCOL_V5_0=5,e.BOLT_PROTOCOL_V5_1=5.1,e.BOLT_PROTOCOL_V5_2=5.2,e.BOLT_PROTOCOL_V5_3=5.3,e.BOLT_PROTOCOL_V5_4=5.4,e.BOLT_PROTOCOL_V5_5=5.5,e.BOLT_PROTOCOL_V5_6=5.6,e.BOLT_PROTOCOL_V5_7=5.7,e.BOLT_PROTOCOL_V5_8=5.8,e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},347:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromEventPattern=void 0;var n=t(4662),i=t(1018),o=t(1251);e.fromEventPattern=function a(s,u,l){return l?a(s,u).pipe(o.mapOneOrManyArgs(l)):new n.Observable(function(c){var f=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return c.next(d.length===1?d[0]:d)},h=s(f);return i.isFunction(u)?function(){return u(f,h)}:void 0})}},361:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)p.push(h.value)}catch(m){d={error:m}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return p},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var o=t(7843),a=t(7302),s=t(1107),u=t(4917);e.merge=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l),h=s.popNumber(l,1/0);return o.operate(function(d,v){a.mergeAll(h)(u.from(i([d],n(l)),f)).subscribe(v)})}},373:function(r,e,t){var n=this&&this.__extends||(function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}c(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})(),i=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var o=i(t(45)),a=t(5319),s=i(t(5553)),u=(function(c){function f(h,d){var v=c.call(this,0)||this;return v._bufferSize=d||1400,v._ch=h,v._buffer=(0,a.alloc)(v._bufferSize),v._currentChunkStart=0,v._chunkOpen=!1,v}return n(f,c),f.prototype.putUInt8=function(h,d){this._ensure(1),this._buffer.writeUInt8(d)},f.prototype.putInt8=function(h,d){this._ensure(1),this._buffer.writeInt8(d)},f.prototype.putFloat64=function(h,d){this._ensure(8),this._buffer.writeFloat64(d)},f.prototype.putBytes=function(h,d){for(;d.remaining()>0;)this._ensure(1),this._buffer.remaining()>d.remaining()?this._buffer.writeBytes(d):this._buffer.writeBytes(d.readSlice(this._buffer.remaining()));return this},f.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var h=this._buffer;this._buffer=null,this._ch.write(h.getSlice(0,h.position)),this._buffer=(0,a.alloc)(this._bufferSize),this._chunkOpen=!1}return this},f.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},f.prototype._ensure=function(h){var d=this._chunkOpen?h:h+2;this._buffer.remaining()<d&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},f.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var h=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,h),this._chunkOpen=!1}},f})(o.default);e.Chunker=u;var l=(function(){function c(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return c.prototype.AWAITING_CHUNK=function(f){return f.remaining()>=2?this._onHeader(f.readUInt16()):(this._partialChunkHeader=f.readUInt8()<<8,this.IN_HEADER)},c.prototype.IN_HEADER=function(f){return this._onHeader(65535&(this._partialChunkHeader|f.readUInt8()))},c.prototype.IN_CHUNK=function(f){return this._chunkSize<=f.remaining()?(this._currentMessage.push(f.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=f.remaining(),this._currentMessage.push(f.readSlice(f.remaining())),this.IN_CHUNK)},c.prototype.CLOSED=function(f){},c.prototype._onHeader=function(f){if(f===0){var h=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:h=this._currentMessage[0];break;default:h=new s.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(h),this.AWAITING_CHUNK}return this._chunkSize=f,this.IN_CHUNK},c.prototype.write=function(f){for(;f.hasRemaining();)this._state=this._state(f)},c})();e.Dechunker=l},378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=void 0;var n=t(7843),i=t(3111);e.defaultIfEmpty=function(o){return n.operate(function(a,s){var u=!1;a.subscribe(i.createOperatorSubscriber(s,function(l){u=!0,s.next(l)},function(){u||s.next(o),s.complete()}))})}},397:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var n=t(9305);t(9014),e.assertTxConfigIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i&&!i.isEmpty()){var s=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertDatabaseIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertImpersonatedUserIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(i,"."));throw o(s.message),a.onError(s),s}},e.assertNotificationFilterIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i!==void 0){var s=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(i),"."));throw o(s.message),a.onError(s),s}}},407:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,p=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(d=p.next()).done;)m.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(v)throw v.error}}return m};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var o=t(6587),a=function(c,f,h,d,v){this.scheme=c,this.host=f,this.port=h,this.hostAndPort=d,this.query=v};function s(c,f,h){if((c=(c??"").trim())==="")throw new Error("Illegal empty ".concat(f," in URL query '").concat(h,"'"));return c}function u(c){var f=c.charAt(0)==="[",h=c.charAt(c.length-1)==="]";if(f||h){if(f&&h)return c;throw new Error("Illegal IPv6 address ".concat(c))}return"[".concat(c,"]")}function l(c){return c==="http"?7474:c==="https"?7473:7687}e.Url=a,e.parseDatabaseUrl=function(c){var f;(0,o.assertString)(c,"URL");var h,d=(function(w){return(w=w.trim()).includes("://")?{schemeMissing:!1,url:w}:{schemeMissing:!0,url:"none://".concat(w)}})(c),v=(function(w){function x(T,C){var P=T.indexOf(C);return P>=0?[T.substring(0,P),T[P],T.substring(P+1)]:[T,"",""]}var E,O={};return(E=x(w,":"))[1]===":"&&(O.scheme=decodeURIComponent(E[0]),w=E[2]),(E=x(w,"#"))[1]==="#"&&(O.fragment=decodeURIComponent(E[2]),w=E[0]),(E=x(w,"?"))[1]==="?"&&(O.query=E[2],w=E[0]),w.startsWith("//")?(E=x(w.substr(2),"/"),(O=n(n({},O),(function(T){var C,P={};(C=(function(M,j){var L=M.lastIndexOf(j);return L>=0?[M.substring(0,L),M[L],M.substring(L+1)]:["","",M]})(T,"@"))[1]==="@"&&(P.userInfo=decodeURIComponent(C[0]),T=C[2]);var R=i((function(M,j,L){var F=x(M,j),z=x(F[2],L);return[z[0],z[2]]})(T,"[","]"),2),k=R[0],I=R[1];return k!==""?(P.host=k,C=x(I,":")):(C=x(T,":"),P.host=C[0]),C[1]===":"&&(P.port=C[2]),P})(E[0]))).path=E[1]+E[2]):O.path=w,O})(d.url),p=d.schemeMissing?null:(function(w){return w!=null?((w=w.trim()).charAt(w.length-1)===":"&&(w=w.substring(0,w.length-1)),w):null})(v.scheme),m=(function(w){if(w==null)throw new Error("Unable to extract host from null or undefined URL");return w.trim()})(v.host),y=(function(w){if(w===""||w==null)throw new Error("Illegal host ".concat(w));return w.includes(":")?u(w):w})(m),b=(function(w,x){var E=typeof w=="string"?parseInt(w,10):w;return E==null||isNaN(E)?l(x):E})(v.port,p),g="".concat(y,":").concat(b),_=(function(w,x){var E=w!=null?(function(T){return((T=(T??"").trim())==null?void 0:T.charAt(0))==="?"&&(T=T.substring(1,T.length)),T})(w):null,O={};return E!=null&&E.split("&").forEach(function(T){var C=T.split("=");if(C.length!==2)throw new Error("Invalid parameters: '".concat(C.toString(),"' in URL '").concat(x,"'."));var P=s(C[0],"key",x),R=s(C[1],"value",x);if(O[P]!==void 0)throw new Error("Duplicated query parameters with key '".concat(P,"' in URL '").concat(x,"'"));O[P]=R}),O})((f=v.query)!==null&&f!==void 0?f:typeof(h=v.resourceName)!="string"?null:i(h.split("?"),2)[1],c);return new a(p,m,b,g,_)},e.formatIPv4Address=function(c,f){return"".concat(c,":").concat(f)},e.formatIPv6Address=function(c,f){var h=u(c);return"".concat(h,":").concat(f)},e.defaultPortForScheme=l},481:(r,e,t)=>{r.exports=t(137)},489:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeInterval=e.timeInterval=void 0;var n=t(7961),i=t(7843),o=t(3111);e.timeInterval=function(s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=s.now();u.subscribe(o.createOperatorSubscriber(l,function(f){var h=s.now(),d=h-c;c=h,l.next(new a(f,d))}))})};var a=function(s,u){this.value=s,this.interval=u};e.TimeInterval=a},490:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=void 0;var n=t(7843),i=t(3111),o=t(1342);e.ignoreElements=function(){return n.operate(function(a,s){a.subscribe(i.createOperatorSubscriber(s,o.noop))})}},582:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=void 0;var n=t(7843),i=t(3111),o=t(9445);e.sequenceEqual=function(a,s){return s===void 0&&(s=function(u,l){return u===l}),n.operate(function(u,l){var c={buffer:[],complete:!1},f={buffer:[],complete:!1},h=function(v){l.next(v),l.complete()},d=function(v,p){var m=i.createOperatorSubscriber(l,function(y){var b=p.buffer,g=p.complete;b.length===0?g?h(!1):v.buffer.push(y):!s(y,b.shift())&&h(!1)},function(){v.complete=!0;var y=p.complete,b=p.buffer;y&&h(b.length===0),m==null||m.unsubscribe()});return m};u.subscribe(d(c,f)),o.innerFrom(a).subscribe(d(f,c))})}},614:function(r,e){var t=this&&this.__awaiter||function(i,o,a,s){return new(a||(a=Promise))(function(u,l){function c(d){try{h(s.next(d))}catch(v){l(v)}}function f(d){try{h(s.throw(d))}catch(v){l(v)}}function h(d){var v;d.done?u(d.value):(v=d.value,v instanceof a?v:new a(function(p){p(v)})).then(c,f)}h((s=s.apply(i,o||[])).next())})},n=this&&this.__generator||function(i,o){var a,s,u,l,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(d){return(function(v){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,v[0]&&(c=0)),c;)try{if(a=1,s&&(u=2&v[0]?s.return:v[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,v[1])).done)return u;switch(s=0,u&&(v=[2&v[0],u.value]),v[0]){case 0:case 1:u=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,s=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(!((u=(u=c.trys).length>0&&u[u.length-1])||v[0]!==6&&v[0]!==2)){c=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){c.label=v[1];break}if(v[0]===6&&c.label<u[1]){c.label=u[1],u=v;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(v);break}u[2]&&c.ops.pop(),c.trys.pop();continue}v=o.call(i,c)}catch(p){v=[6,p],s=0}finally{a=u=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}})([h,d])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(i){return t(this,void 0,void 0,function(){return n(this,function(o){return[2,i]})})}}},715:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(i){this._offset=i||0}return n.prototype.next=function(i){if(i===0)return-1;var o=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),o%i},n})();e.default=t},754:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var p=Object.getOwnPropertyDescriptor(h,d);p&&!("get"in p?!h.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,p)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var a=o(t(6587)),s=t(9691),u=t(3371),l=(function(){function f(h,d){(function(v){v!=null&&a.assertObject(v,"Transaction config")})(h),this.timeout=(function(v,p){if(a.isObject(v)&&v.timeout!=null){a.assertNumberOrInteger(v.timeout,"Transaction timeout"),(function(y){return typeof y.timeout=="number"&&!Number.isInteger(y.timeout)})(v)&&(p==null?void 0:p.isInfoEnabled())===!0&&(p==null||p.info("Transaction timeout expected to be an integer, got: ".concat(v.timeout,". The value will be rounded up.")));var m=(0,u.int)(v.timeout,{ceilFloat:!0});if(m.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return m}return null})(h,d),this.metadata=(function(v){if(a.isObject(v)&&v.metadata!=null){var p=v.metadata;if(a.assertObject(p,"config.metadata"),Object.keys(p).length!==0)return p}return null})(h)}return f.empty=function(){return c},f.prototype.isEmpty=function(){return Object.values(this).every(function(h){return h==null})},f})();e.TxConfig=l;var c=new l({})},766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publish=void 0;var n=t(2483),i=t(9247),o=t(1483);e.publish=function(a){return a?function(s){return o.connect(a)(s)}:function(s){return i.multicast(new n.Subject)(s)}}},783:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;var n=t(7843),i=t(3111);e.filter=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){return o.call(a,c,l++)&&u.next(c)}))})}},827:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsapScheduler=void 0;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a.prototype.flush=function(s){this._active=!0;var u=this._scheduled;this._scheduled=void 0;var l,c=this.actions;s=s||c.shift();do if(l=s.execute(s.state,s.delay))break;while((s=c[0])&&s.id===u&&c.shift());if(this._active=!1,l){for(;(s=c[0])&&s.id===u&&c.shift();)s.unsubscribe();throw l}},a})(t(5648).AsyncScheduler);e.AsapScheduler=i},844:function(r,e,t){var n=this&&this.__extends||(function(){var d=function(v,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},d(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=v}d(v,p),v.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(1711)),a=t(397),s=i(t(7449)),u=i(t(3321)),l=i(t(7021)),c=t(9014),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_0,h=(function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return n(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(m){return m(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.initialize=function(p){var m=this,y=p===void 0?{}:p,b=y.userAgent,g=(y.boltAgent,y.authToken),_=y.notificationFilter,w=y.onError,x=y.onComplete,E=new c.LoginObserver({onError:function(O){return m._onLoginError(O,w)},onCompleted:function(O){return m._onLoginCompleted(O,g,x)}});return(0,a.assertNotificationFilterIsEmpty)(_,this._onProtocolError,E),this.write(l.default.hello(b,g,this._serversideRouting),E,!0),E},v})(o.default);e.default=h},846:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.take=void 0;var n=t(8616),i=t(7843),o=t(3111);e.take=function(a){return a<=0?function(){return n.EMPTY}:i.operate(function(s,u){var l=0;s.subscribe(o.createOperatorSubscriber(u,function(c){++l<=a&&(u.next(c),a<=l&&u.complete())}))})}},854:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAsyncIterable=void 0;var n=t(4662),i=t(7110);e.scheduleAsyncIterable=function(o,a){if(!o)throw new Error("Iterable cannot be null");return new n.Observable(function(s){i.executeSchedule(s,a,function(){var u=o[Symbol.asyncIterator]();i.executeSchedule(s,a,function(){u.next().then(function(l){l.done?s.complete():s.next(l.value)})},0,!0)})})}},914:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0;var n=t(7961),i=t(8766),o=t(4092);e.delay=function(a,s){s===void 0&&(s=n.asyncScheduler);var u=o.timer(a,s);return i.delayWhen(function(){return u})}},934:function(r,e,t){var n=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(p){for(var m,y=1,b=arguments.length;y<b;y++)for(var g in m=arguments[y])Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g]);return p},i.apply(this,arguments)},o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(6345)),s=o(t(3019)),u=o(t(3321)),l=o(t(7021)),c=t(9014),f=t(9305).internal.constants,h=f.BOLT_PROTOCOL_V5_2,d=f.FETCH_ALL,v=(function(p){function m(){return p!==null&&p.apply(this,arguments)||this}return n(m,p),Object.defineProperty(m.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(b){return b(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),m.prototype.initialize=function(y){var b=this,g=y===void 0?{}:y,_=g.userAgent,w=(g.boltAgent,g.authToken),x=g.notificationFilter,E=g.onError,O=g.onComplete,T={},C=new c.LoginObserver({onError:function(P){return b._onLoginError(P,E)},onCompleted:function(P){return T.metadata=P,b._onLoginCompleted(P)}});return this.write(l.default.hello5x2(_,x,this._serversideRouting),C,!1),this.logon({authToken:w,onComplete:function(P){return O(i(i({},P),T.metadata))},onError:E,flush:!0})},m.prototype.beginTransaction=function(y){var b=y===void 0?{}:y,g=b.bookmarks,_=b.txConfig,w=b.database,x=b.mode,E=b.impersonatedUser,O=b.notificationFilter,T=b.beforeError,C=b.afterError,P=b.beforeComplete,R=b.afterComplete,k=new c.ResultStreamObserver({server:this._server,beforeError:T,afterError:C,beforeComplete:P,afterComplete:R});return k.prepareToHandleSingleResponse(),this.write(l.default.begin({bookmarks:g,txConfig:_,database:w,mode:x,impersonatedUser:E,notificationFilter:O}),k,!0),k},m.prototype.run=function(y,b,g){var _=g===void 0?{}:g,w=_.bookmarks,x=_.txConfig,E=_.database,O=_.mode,T=_.impersonatedUser,C=_.notificationFilter,P=_.beforeKeys,R=_.afterKeys,k=_.beforeError,I=_.afterError,M=_.beforeComplete,j=_.afterComplete,L=_.flush,F=L===void 0||L,z=_.reactive,V=z!==void 0&&z,G=_.fetchSize,Y=G===void 0?d:G,ie=_.highRecordWatermark,W=ie===void 0?Number.MAX_VALUE:ie,H=_.lowRecordWatermark,Q=H===void 0?Number.MAX_VALUE:H,J=new c.ResultStreamObserver({server:this._server,reactive:V,fetchSize:Y,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:P,afterKeys:R,beforeError:k,afterError:I,beforeComplete:M,afterComplete:j,highRecordWatermark:W,lowRecordWatermark:Q}),ne=V;return this.write(l.default.runWithMetadata(y,b,{bookmarks:w,txConfig:x,database:E,mode:O,impersonatedUser:T,notificationFilter:C}),J,ne&&F),V||this.write(l.default.pull({n:Y}),J,F),J},m})(a.default);e.default=v},983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(1983),s=t(1018);e.mergeMap=function u(l,c,f){return f===void 0&&(f=1/0),s.isFunction(c)?u(function(h,d){return n.map(function(v,p){return c(h,v,d,p)})(i.innerFrom(l(h,d)))},f):(typeof c=="number"&&(f=c),o.operate(function(h,d){return a.mergeInternals(h,d,l,f)}))}},1004:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.of=void 0;var n=t(1107),i=t(4917);e.of=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n.popScheduler(o);return i.from(o,s)}},1018:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=function(t){return typeof t=="function"}},1038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.count=void 0;var n=t(9139);e.count=function(i){return n.reduce(function(o,a,s){return!i||i(a,s)?o+1:o},0)}},1048:(r,e,t)=>{const n=t(7991),i=t(9318),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(N){return+N!=N&&(N=0),u.alloc(+N)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(N){if(N>a)throw new RangeError('The value "'+N+'" is invalid for option "size"');const B=new Uint8Array(N);return Object.setPrototypeOf(B,u.prototype),B}function u(N,B,q){if(typeof N=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(N)}return l(N,B,q)}function l(N,B,q){if(typeof N=="string")return(function(le,de){if(typeof de=="string"&&de!==""||(de="utf8"),!u.isEncoding(de))throw new TypeError("Unknown encoding: "+de);const xe=0|p(le,de);let ke=s(xe);const Xe=ke.write(le,de);return Xe!==xe&&(ke=ke.slice(0,Xe)),ke})(N,B);if(ArrayBuffer.isView(N))return(function(le){if(se(le,Uint8Array)){const de=new Uint8Array(le);return d(de.buffer,de.byteOffset,de.byteLength)}return h(le)})(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(se(N,ArrayBuffer)||N&&se(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(N,SharedArrayBuffer)||N&&se(N.buffer,SharedArrayBuffer)))return d(N,B,q);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const re=N.valueOf&&N.valueOf();if(re!=null&&re!==N)return u.from(re,B,q);const ue=(function(le){if(u.isBuffer(le)){const de=0|v(le.length),xe=s(de);return xe.length===0||le.copy(xe,0,0,de),xe}return le.length!==void 0?typeof le.length!="number"||fe(le.length)?s(0):h(le):le.type==="Buffer"&&Array.isArray(le.data)?h(le.data):void 0})(N);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return u.from(N[Symbol.toPrimitive]("string"),B,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function c(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function f(N){return c(N),s(N<0?0:0|v(N))}function h(N){const B=N.length<0?0:0|v(N.length),q=s(B);for(let re=0;re<B;re+=1)q[re]=255&N[re];return q}function d(N,B,q){if(B<0||N.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<B+(q||0))throw new RangeError('"length" is outside of buffer bounds');let re;return re=B===void 0&&q===void 0?new Uint8Array(N):q===void 0?new Uint8Array(N,B):new Uint8Array(N,B,q),Object.setPrototypeOf(re,u.prototype),re}function v(N){if(N>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|N}function p(N,B){if(u.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||se(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const q=N.length,re=arguments.length>2&&arguments[2]===!0;if(!re&&q===0)return 0;let ue=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return $(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return Z(N).length;default:if(ue)return re?-1:$(N).length;B=(""+B).toLowerCase(),ue=!0}}function m(N,B,q){let re=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(B>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return I(this,B,q);case"utf8":case"utf-8":return C(this,B,q);case"ascii":return R(this,B,q);case"latin1":case"binary":return k(this,B,q);case"base64":return T(this,B,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,B,q);default:if(re)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),re=!0}}function y(N,B,q){const re=N[B];N[B]=N[q],N[q]=re}function b(N,B,q,re,ue){if(N.length===0)return-1;if(typeof q=="string"?(re=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),fe(q=+q)&&(q=ue?0:N.length-1),q<0&&(q=N.length+q),q>=N.length){if(ue)return-1;q=N.length-1}else if(q<0){if(!ue)return-1;q=0}if(typeof B=="string"&&(B=u.from(B,re)),u.isBuffer(B))return B.length===0?-1:g(N,B,q,re,ue);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(N,B,q):Uint8Array.prototype.lastIndexOf.call(N,B,q):g(N,[B],q,re,ue);throw new TypeError("val must be string, number or Buffer")}function g(N,B,q,re,ue){let le,de=1,xe=N.length,ke=B.length;if(re!==void 0&&((re=String(re).toLowerCase())==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if(N.length<2||B.length<2)return-1;de=2,xe/=2,ke/=2,q/=2}function Xe(ze,Ge){return de===1?ze[Ge]:ze.readUInt16BE(Ge*de)}if(ue){let ze=-1;for(le=q;le<xe;le++)if(Xe(N,le)===Xe(B,ze===-1?0:le-ze)){if(ze===-1&&(ze=le),le-ze+1===ke)return ze*de}else ze!==-1&&(le-=le-ze),ze=-1}else for(q+ke>xe&&(q=xe-ke),le=q;le>=0;le--){let ze=!0;for(let Ge=0;Ge<ke;Ge++)if(Xe(N,le+Ge)!==Xe(B,Ge)){ze=!1;break}if(ze)return le}return-1}function _(N,B,q,re){q=Number(q)||0;const ue=N.length-q;re?(re=Number(re))>ue&&(re=ue):re=ue;const le=B.length;let de;for(re>le/2&&(re=le/2),de=0;de<re;++de){const xe=parseInt(B.substr(2*de,2),16);if(fe(xe))return de;N[q+de]=xe}return de}function w(N,B,q,re){return ae($(B,N.length-q),N,q,re)}function x(N,B,q,re){return ae((function(ue){const le=[];for(let de=0;de<ue.length;++de)le.push(255&ue.charCodeAt(de));return le})(B),N,q,re)}function E(N,B,q,re){return ae(Z(B),N,q,re)}function O(N,B,q,re){return ae((function(ue,le){let de,xe,ke;const Xe=[];for(let ze=0;ze<ue.length&&!((le-=2)<0);++ze)de=ue.charCodeAt(ze),xe=de>>8,ke=de%256,Xe.push(ke),Xe.push(xe);return Xe})(B,N.length-q),N,q,re)}function T(N,B,q){return B===0&&q===N.length?n.fromByteArray(N):n.fromByteArray(N.slice(B,q))}function C(N,B,q){q=Math.min(N.length,q);const re=[];let ue=B;for(;ue<q;){const le=N[ue];let de=null,xe=le>239?4:le>223?3:le>191?2:1;if(ue+xe<=q){let ke,Xe,ze,Ge;switch(xe){case 1:le<128&&(de=le);break;case 2:ke=N[ue+1],(192&ke)==128&&(Ge=(31&le)<<6|63&ke,Ge>127&&(de=Ge));break;case 3:ke=N[ue+1],Xe=N[ue+2],(192&ke)==128&&(192&Xe)==128&&(Ge=(15&le)<<12|(63&ke)<<6|63&Xe,Ge>2047&&(Ge<55296||Ge>57343)&&(de=Ge));break;case 4:ke=N[ue+1],Xe=N[ue+2],ze=N[ue+3],(192&ke)==128&&(192&Xe)==128&&(192&ze)==128&&(Ge=(15&le)<<18|(63&ke)<<12|(63&Xe)<<6|63&ze,Ge>65535&&Ge<1114112&&(de=Ge))}}de===null?(de=65533,xe=1):de>65535&&(de-=65536,re.push(de>>>10&1023|55296),de=56320|1023&de),re.push(de),ue+=xe}return(function(le){const de=le.length;if(de<=P)return String.fromCharCode.apply(String,le);let xe="",ke=0;for(;ke<de;)xe+=String.fromCharCode.apply(String,le.slice(ke,ke+=P));return xe})(re)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=(function(){try{const N=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(N,B),N.foo()===42}catch{return!1}})(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(N,B,q){return l(N,B,q)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(N,B,q){return(function(re,ue,le){return c(re),re<=0?s(re):ue!==void 0?typeof le=="string"?s(re).fill(ue,le):s(re).fill(ue):s(re)})(N,B,q)},u.allocUnsafe=function(N){return f(N)},u.allocUnsafeSlow=function(N){return f(N)},u.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==u.prototype},u.compare=function(N,B){if(se(N,Uint8Array)&&(N=u.from(N,N.offset,N.byteLength)),se(B,Uint8Array)&&(B=u.from(B,B.offset,B.byteLength)),!u.isBuffer(N)||!u.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===B)return 0;let q=N.length,re=B.length;for(let ue=0,le=Math.min(q,re);ue<le;++ue)if(N[ue]!==B[ue]){q=N[ue],re=B[ue];break}return q<re?-1:re<q?1:0},u.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(N,B){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return u.alloc(0);let q;if(B===void 0)for(B=0,q=0;q<N.length;++q)B+=N[q].length;const re=u.allocUnsafe(B);let ue=0;for(q=0;q<N.length;++q){let le=N[q];if(se(le,Uint8Array))ue+le.length>re.length?(u.isBuffer(le)||(le=u.from(le)),le.copy(re,ue)):Uint8Array.prototype.set.call(re,le,ue);else{if(!u.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(re,ue)}ue+=le.length}return re},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<N;B+=2)y(this,B,B+1);return this},u.prototype.swap32=function(){const N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<N;B+=4)y(this,B,B+3),y(this,B+1,B+2);return this},u.prototype.swap64=function(){const N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<N;B+=8)y(this,B,B+7),y(this,B+1,B+6),y(this,B+2,B+5),y(this,B+3,B+4);return this},u.prototype.toString=function(){const N=this.length;return N===0?"":arguments.length===0?C(this,0,N):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(N){if(!u.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||u.compare(this,N)===0},u.prototype.inspect=function(){let N="";const B=e.INSPECT_MAX_BYTES;return N=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(N+=" ... "),"<Buffer "+N+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(N,B,q,re,ue){if(se(N,Uint8Array)&&(N=u.from(N,N.offset,N.byteLength)),!u.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(B===void 0&&(B=0),q===void 0&&(q=N?N.length:0),re===void 0&&(re=0),ue===void 0&&(ue=this.length),B<0||q>N.length||re<0||ue>this.length)throw new RangeError("out of range index");if(re>=ue&&B>=q)return 0;if(re>=ue)return-1;if(B>=q)return 1;if(this===N)return 0;let le=(ue>>>=0)-(re>>>=0),de=(q>>>=0)-(B>>>=0);const xe=Math.min(le,de),ke=this.slice(re,ue),Xe=N.slice(B,q);for(let ze=0;ze<xe;++ze)if(ke[ze]!==Xe[ze]){le=ke[ze],de=Xe[ze];break}return le<de?-1:de<le?1:0},u.prototype.includes=function(N,B,q){return this.indexOf(N,B,q)!==-1},u.prototype.indexOf=function(N,B,q){return b(this,N,B,q,!0)},u.prototype.lastIndexOf=function(N,B,q){return b(this,N,B,q,!1)},u.prototype.write=function(N,B,q,re){if(B===void 0)re="utf8",q=this.length,B=0;else if(q===void 0&&typeof B=="string")re=B,q=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(q)?(q>>>=0,re===void 0&&(re="utf8")):(re=q,q=void 0)}const ue=this.length-B;if((q===void 0||q>ue)&&(q=ue),N.length>0&&(q<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let le=!1;for(;;)switch(re){case"hex":return _(this,N,B,q);case"utf8":case"utf-8":return w(this,N,B,q);case"ascii":case"latin1":case"binary":return x(this,N,B,q);case"base64":return E(this,N,B,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,N,B,q);default:if(le)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),le=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function R(N,B,q){let re="";q=Math.min(N.length,q);for(let ue=B;ue<q;++ue)re+=String.fromCharCode(127&N[ue]);return re}function k(N,B,q){let re="";q=Math.min(N.length,q);for(let ue=B;ue<q;++ue)re+=String.fromCharCode(N[ue]);return re}function I(N,B,q){const re=N.length;(!B||B<0)&&(B=0),(!q||q<0||q>re)&&(q=re);let ue="";for(let le=B;le<q;++le)ue+=ge[N[le]];return ue}function M(N,B,q){const re=N.slice(B,q);let ue="";for(let le=0;le<re.length-1;le+=2)ue+=String.fromCharCode(re[le]+256*re[le+1]);return ue}function j(N,B,q){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+B>q)throw new RangeError("Trying to access beyond buffer length")}function L(N,B,q,re,ue,le){if(!u.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>ue||B<le)throw new RangeError('"value" argument is out of bounds');if(q+re>N.length)throw new RangeError("Index out of range")}function F(N,B,q,re,ue){Q(B,re,ue,N,q,7);let le=Number(B&BigInt(4294967295));N[q++]=le,le>>=8,N[q++]=le,le>>=8,N[q++]=le,le>>=8,N[q++]=le;let de=Number(B>>BigInt(32)&BigInt(4294967295));return N[q++]=de,de>>=8,N[q++]=de,de>>=8,N[q++]=de,de>>=8,N[q++]=de,q}function z(N,B,q,re,ue){Q(B,re,ue,N,q,7);let le=Number(B&BigInt(4294967295));N[q+7]=le,le>>=8,N[q+6]=le,le>>=8,N[q+5]=le,le>>=8,N[q+4]=le;let de=Number(B>>BigInt(32)&BigInt(4294967295));return N[q+3]=de,de>>=8,N[q+2]=de,de>>=8,N[q+1]=de,de>>=8,N[q]=de,q+8}function V(N,B,q,re,ue,le){if(q+re>N.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function G(N,B,q,re,ue){return B=+B,q>>>=0,ue||V(N,0,q,4),i.write(N,B,q,re,23,4),q+4}function Y(N,B,q,re,ue){return B=+B,q>>>=0,ue||V(N,0,q,8),i.write(N,B,q,re,52,8),q+8}u.prototype.slice=function(N,B){const q=this.length;(N=~~N)<0?(N+=q)<0&&(N=0):N>q&&(N=q),(B=B===void 0?q:~~B)<0?(B+=q)<0&&(B=0):B>q&&(B=q),B<N&&(B=N);const re=this.subarray(N,B);return Object.setPrototypeOf(re,u.prototype),re},u.prototype.readUintLE=u.prototype.readUIntLE=function(N,B,q){N>>>=0,B>>>=0,q||j(N,B,this.length);let re=this[N],ue=1,le=0;for(;++le<B&&(ue*=256);)re+=this[N+le]*ue;return re},u.prototype.readUintBE=u.prototype.readUIntBE=function(N,B,q){N>>>=0,B>>>=0,q||j(N,B,this.length);let re=this[N+--B],ue=1;for(;B>0&&(ue*=256);)re+=this[N+--B]*ue;return re},u.prototype.readUint8=u.prototype.readUInt8=function(N,B){return N>>>=0,B||j(N,1,this.length),this[N]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(N,B){return N>>>=0,B||j(N,2,this.length),this[N]|this[N+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(N,B){return N>>>=0,B||j(N,2,this.length),this[N]<<8|this[N+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(N,B){return N>>>=0,B||j(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(N,B){return N>>>=0,B||j(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},u.prototype.readBigUInt64LE=ye(function(N){J(N>>>=0,"offset");const B=this[N],q=this[N+7];B!==void 0&&q!==void 0||ne(N,this.length-8);const re=B+256*this[++N]+65536*this[++N]+this[++N]*2**24,ue=this[++N]+256*this[++N]+65536*this[++N]+q*2**24;return BigInt(re)+(BigInt(ue)<<BigInt(32))}),u.prototype.readBigUInt64BE=ye(function(N){J(N>>>=0,"offset");const B=this[N],q=this[N+7];B!==void 0&&q!==void 0||ne(N,this.length-8);const re=B*2**24+65536*this[++N]+256*this[++N]+this[++N],ue=this[++N]*2**24+65536*this[++N]+256*this[++N]+q;return(BigInt(re)<<BigInt(32))+BigInt(ue)}),u.prototype.readIntLE=function(N,B,q){N>>>=0,B>>>=0,q||j(N,B,this.length);let re=this[N],ue=1,le=0;for(;++le<B&&(ue*=256);)re+=this[N+le]*ue;return ue*=128,re>=ue&&(re-=Math.pow(2,8*B)),re},u.prototype.readIntBE=function(N,B,q){N>>>=0,B>>>=0,q||j(N,B,this.length);let re=B,ue=1,le=this[N+--re];for(;re>0&&(ue*=256);)le+=this[N+--re]*ue;return ue*=128,le>=ue&&(le-=Math.pow(2,8*B)),le},u.prototype.readInt8=function(N,B){return N>>>=0,B||j(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},u.prototype.readInt16LE=function(N,B){N>>>=0,B||j(N,2,this.length);const q=this[N]|this[N+1]<<8;return 32768&q?4294901760|q:q},u.prototype.readInt16BE=function(N,B){N>>>=0,B||j(N,2,this.length);const q=this[N+1]|this[N]<<8;return 32768&q?4294901760|q:q},u.prototype.readInt32LE=function(N,B){return N>>>=0,B||j(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},u.prototype.readInt32BE=function(N,B){return N>>>=0,B||j(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},u.prototype.readBigInt64LE=ye(function(N){J(N>>>=0,"offset");const B=this[N],q=this[N+7];B!==void 0&&q!==void 0||ne(N,this.length-8);const re=this[N+4]+256*this[N+5]+65536*this[N+6]+(q<<24);return(BigInt(re)<<BigInt(32))+BigInt(B+256*this[++N]+65536*this[++N]+this[++N]*2**24)}),u.prototype.readBigInt64BE=ye(function(N){J(N>>>=0,"offset");const B=this[N],q=this[N+7];B!==void 0&&q!==void 0||ne(N,this.length-8);const re=(B<<24)+65536*this[++N]+256*this[++N]+this[++N];return(BigInt(re)<<BigInt(32))+BigInt(this[++N]*2**24+65536*this[++N]+256*this[++N]+q)}),u.prototype.readFloatLE=function(N,B){return N>>>=0,B||j(N,4,this.length),i.read(this,N,!0,23,4)},u.prototype.readFloatBE=function(N,B){return N>>>=0,B||j(N,4,this.length),i.read(this,N,!1,23,4)},u.prototype.readDoubleLE=function(N,B){return N>>>=0,B||j(N,8,this.length),i.read(this,N,!0,52,8)},u.prototype.readDoubleBE=function(N,B){return N>>>=0,B||j(N,8,this.length),i.read(this,N,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(N,B,q,re){N=+N,B>>>=0,q>>>=0,re||L(this,N,B,q,Math.pow(2,8*q)-1,0);let ue=1,le=0;for(this[B]=255&N;++le<q&&(ue*=256);)this[B+le]=N/ue&255;return B+q},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(N,B,q,re){N=+N,B>>>=0,q>>>=0,re||L(this,N,B,q,Math.pow(2,8*q)-1,0);let ue=q-1,le=1;for(this[B+ue]=255&N;--ue>=0&&(le*=256);)this[B+ue]=N/le&255;return B+q},u.prototype.writeUint8=u.prototype.writeUInt8=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,1,255,0),this[B]=255&N,B+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,2,65535,0),this[B]=255&N,this[B+1]=N>>>8,B+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,2,65535,0),this[B]=N>>>8,this[B+1]=255&N,B+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,4,4294967295,0),this[B+3]=N>>>24,this[B+2]=N>>>16,this[B+1]=N>>>8,this[B]=255&N,B+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,4,4294967295,0),this[B]=N>>>24,this[B+1]=N>>>16,this[B+2]=N>>>8,this[B+3]=255&N,B+4},u.prototype.writeBigUInt64LE=ye(function(N,B=0){return F(this,N,B,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ye(function(N,B=0){return z(this,N,B,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(N,B,q,re){if(N=+N,B>>>=0,!re){const xe=Math.pow(2,8*q-1);L(this,N,B,q,xe-1,-xe)}let ue=0,le=1,de=0;for(this[B]=255&N;++ue<q&&(le*=256);)N<0&&de===0&&this[B+ue-1]!==0&&(de=1),this[B+ue]=(N/le|0)-de&255;return B+q},u.prototype.writeIntBE=function(N,B,q,re){if(N=+N,B>>>=0,!re){const xe=Math.pow(2,8*q-1);L(this,N,B,q,xe-1,-xe)}let ue=q-1,le=1,de=0;for(this[B+ue]=255&N;--ue>=0&&(le*=256);)N<0&&de===0&&this[B+ue+1]!==0&&(de=1),this[B+ue]=(N/le|0)-de&255;return B+q},u.prototype.writeInt8=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,1,127,-128),N<0&&(N=255+N+1),this[B]=255&N,B+1},u.prototype.writeInt16LE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,2,32767,-32768),this[B]=255&N,this[B+1]=N>>>8,B+2},u.prototype.writeInt16BE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,2,32767,-32768),this[B]=N>>>8,this[B+1]=255&N,B+2},u.prototype.writeInt32LE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,4,2147483647,-2147483648),this[B]=255&N,this[B+1]=N>>>8,this[B+2]=N>>>16,this[B+3]=N>>>24,B+4},u.prototype.writeInt32BE=function(N,B,q){return N=+N,B>>>=0,q||L(this,N,B,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[B]=N>>>24,this[B+1]=N>>>16,this[B+2]=N>>>8,this[B+3]=255&N,B+4},u.prototype.writeBigInt64LE=ye(function(N,B=0){return F(this,N,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ye(function(N,B=0){return z(this,N,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(N,B,q){return G(this,N,B,!0,q)},u.prototype.writeFloatBE=function(N,B,q){return G(this,N,B,!1,q)},u.prototype.writeDoubleLE=function(N,B,q){return Y(this,N,B,!0,q)},u.prototype.writeDoubleBE=function(N,B,q){return Y(this,N,B,!1,q)},u.prototype.copy=function(N,B,q,re){if(!u.isBuffer(N))throw new TypeError("argument should be a Buffer");if(q||(q=0),re||re===0||(re=this.length),B>=N.length&&(B=N.length),B||(B=0),re>0&&re<q&&(re=q),re===q||N.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),N.length-B<re-q&&(re=N.length-B+q);const ue=re-q;return this===N&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,q,re):Uint8Array.prototype.set.call(N,this.subarray(q,re),B),ue},u.prototype.fill=function(N,B,q,re){if(typeof N=="string"){if(typeof B=="string"?(re=B,B=0,q=this.length):typeof q=="string"&&(re=q,q=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!u.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(N.length===1){const le=N.charCodeAt(0);(re==="utf8"&&le<128||re==="latin1")&&(N=le)}}else typeof N=="number"?N&=255:typeof N=="boolean"&&(N=Number(N));if(B<0||this.length<B||this.length<q)throw new RangeError("Out of range index");if(q<=B)return this;let ue;if(B>>>=0,q=q===void 0?this.length:q>>>0,N||(N=0),typeof N=="number")for(ue=B;ue<q;++ue)this[ue]=N;else{const le=u.isBuffer(N)?N:u.from(N,re),de=le.length;if(de===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ue=0;ue<q-B;++ue)this[ue+B]=le[ue%de]}return this};const ie={};function W(N,B,q){ie[N]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}function H(N){let B="",q=N.length;const re=N[0]==="-"?1:0;for(;q>=re+4;q-=3)B=`_${N.slice(q-3,q)}${B}`;return`${N.slice(0,q)}${B}`}function Q(N,B,q,re,ue,le){if(N>q||N<B){const de=typeof B=="bigint"?"n":"";let xe;throw xe=B===0||B===BigInt(0)?`>= 0${de} and < 2${de} ** ${8*(le+1)}${de}`:`>= -(2${de} ** ${8*(le+1)-1}${de}) and < 2 ** ${8*(le+1)-1}${de}`,new ie.ERR_OUT_OF_RANGE("value",xe,N)}(function(de,xe,ke){J(xe,"offset"),de[xe]!==void 0&&de[xe+ke]!==void 0||ne(xe,de.length-(ke+1))})(re,ue,le)}function J(N,B){if(typeof N!="number")throw new ie.ERR_INVALID_ARG_TYPE(B,"number",N)}function ne(N,B,q){throw Math.floor(N)!==N?(J(N,q),new ie.ERR_OUT_OF_RANGE("offset","an integer",N)):B<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${B}`,N)}W("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(N,B){return`The "${N}" argument must be of type number. Received type ${typeof B}`},TypeError),W("ERR_OUT_OF_RANGE",function(N,B,q){let re=`The value of "${N}" is out of range.`,ue=q;return Number.isInteger(q)&&Math.abs(q)>2**32?ue=H(String(q)):typeof q=="bigint"&&(ue=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(ue=H(ue)),ue+="n"),re+=` It must be ${B}. Received ${ue}`,re},RangeError);const K=/[^+/0-9A-Za-z-_]/g;function $(N,B){let q;B=B||1/0;const re=N.length;let ue=null;const le=[];for(let de=0;de<re;++de){if(q=N.charCodeAt(de),q>55295&&q<57344){if(!ue){if(q>56319){(B-=3)>-1&&le.push(239,191,189);continue}if(de+1===re){(B-=3)>-1&&le.push(239,191,189);continue}ue=q;continue}if(q<56320){(B-=3)>-1&&le.push(239,191,189),ue=q;continue}q=65536+(ue-55296<<10|q-56320)}else ue&&(B-=3)>-1&&le.push(239,191,189);if(ue=null,q<128){if((B-=1)<0)break;le.push(q)}else if(q<2048){if((B-=2)<0)break;le.push(q>>6|192,63&q|128)}else if(q<65536){if((B-=3)<0)break;le.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;le.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return le}function Z(N){return n.toByteArray((function(B){if((B=(B=B.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B})(N))}function ae(N,B,q,re){let ue;for(ue=0;ue<re&&!(ue+q>=B.length||ue>=N.length);++ue)B[ue+q]=N[ue];return ue}function se(N,B){return N instanceof B||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===B.name}function fe(N){return N!=N}const ge=(function(){const N="0123456789abcdef",B=new Array(256);for(let q=0;q<16;++q){const re=16*q;for(let ue=0;ue<16;++ue)B[re+ue]=N[q]+N[ue]}return B})();function ye(N){return typeof BigInt>"u"?pe:N}function pe(){throw new Error("BigInt not supported")}},1053:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)},1074:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isValidDate=void 0,e.isValidDate=function(t){return t instanceof Date&&!isNaN(t)}},1092:function(r,e,t){var n=this&&this.__extends||(function(){var v=function(p,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(y[g]=b[g])},v(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=p}v(p,m),p.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(6377)),a=i(t(6161)),s=i(t(3321)),u=i(t(7021)),l=t(9014),c=t(9305).internal.constants,f=c.BOLT_PROTOCOL_V5_8,h=c.FETCH_ALL,d=(function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new s.default(Object.values(a.default).map(function(y){return y(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.run=function(m,y,b){var g=b===void 0?{}:b,_=g.bookmarks,w=g.txConfig,x=g.database,E=g.mode,O=g.impersonatedUser,T=g.notificationFilter,C=g.beforeKeys,P=g.afterKeys,R=g.beforeError,k=g.afterError,I=g.beforeComplete,M=g.afterComplete,j=g.flush,L=j===void 0||j,F=g.reactive,z=F!==void 0&&F,V=g.fetchSize,G=V===void 0?h:V,Y=g.highRecordWatermark,ie=Y===void 0?Number.MAX_VALUE:Y,W=g.lowRecordWatermark,H=W===void 0?Number.MAX_VALUE:W,Q=g.onDb,J=new l.ResultStreamObserver({server:this._server,reactive:z,fetchSize:G,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:C,afterKeys:P,beforeError:R,afterError:k,beforeComplete:I,afterComplete:M,highRecordWatermark:ie,lowRecordWatermark:H,enrichMetadata:this._enrichMetadata,onDb:Q}),ne=z;return this.write(u.default.runWithMetadata5x5(m,y,{bookmarks:_,txConfig:w,database:x,mode:E,impersonatedUser:O,notificationFilter:T}),J,ne&&L),z||this.write(u.default.pull({n:G}),J,L),J},p})(o.default);e.default=d},1103:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;var n=t(4662),i=t(1018);e.throwError=function(o,a){var s=i.isFunction(o)?o:function(){return o},u=function(l){return l.error(s())};return new n.Observable(a?function(l){return a.schedule(u,0,l)}:u)}},1107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popNumber=e.popScheduler=e.popResultSelector=void 0;var n=t(1018),i=t(8613);function o(a){return a[a.length-1]}e.popResultSelector=function(a){return n.isFunction(o(a))?a.pop():void 0},e.popScheduler=function(a){return i.isScheduler(o(a))?a.pop():void 0},e.popNumber=function(a,s){return typeof o(a)=="number"?a.pop():s}},1116:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=void 0;var n=t(3327),i=t(1018);e.isInteropObservable=function(o){return i.isFunction(o[n.observable])}},1141:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(9445);e.windowWhen=function(s){return i.operate(function(u,l){var c,f,h=function(v){c.error(v),l.error(v)},d=function(){var v;f==null||f.unsubscribe(),c==null||c.complete(),c=new n.Subject,l.next(c.asObservable());try{v=a.innerFrom(s())}catch(p){return void h(p)}v.subscribe(f=o.createOperatorSubscriber(l,d,d,h))};d(),u.subscribe(o.createOperatorSubscriber(l,function(v){return c.next(v)},function(){c.complete(),l.complete()},h,function(){f==null||f.unsubscribe(),c=null}))})}},1175:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3448));e.default=n({},o.default)},1187:function(r,e,t){var n=this&&this.__awaiter||function(M,j,L,F){return new(L||(L=Promise))(function(z,V){function G(W){try{ie(F.next(W))}catch(H){V(H)}}function Y(W){try{ie(F.throw(W))}catch(H){V(H)}}function ie(W){var H;W.done?z(W.value):(H=W.value,H instanceof L?H:new L(function(Q){Q(H)})).then(G,Y)}ie((F=F.apply(M,j||[])).next())})},i=this&&this.__generator||function(M,j){var L,F,z,V,G={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return V={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function Y(ie){return function(W){return(function(H){if(L)throw new TypeError("Generator is already executing.");for(;V&&(V=0,H[0]&&(G=0)),G;)try{if(L=1,F&&(z=2&H[0]?F.return:H[0]?F.throw||((z=F.return)&&z.call(F),0):F.next)&&!(z=z.call(F,H[1])).done)return z;switch(F=0,z&&(H=[2&H[0],z.value]),H[0]){case 0:case 1:z=H;break;case 4:return G.label++,{value:H[1],done:!1};case 5:G.label++,F=H[1],H=[0];continue;case 7:H=G.ops.pop(),G.trys.pop();continue;default:if(!((z=(z=G.trys).length>0&&z[z.length-1])||H[0]!==6&&H[0]!==2)){G=0;continue}if(H[0]===3&&(!z||H[1]>z[0]&&H[1]<z[3])){G.label=H[1];break}if(H[0]===6&&G.label<z[1]){G.label=z[1],z=H;break}if(z&&G.label<z[2]){G.label=z[2],G.ops.push(H);break}z[2]&&G.ops.pop(),G.trys.pop();continue}H=j.call(M,G)}catch(Q){H=[6,Q],F=0}finally{L=z=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}})([ie,W])}}},o=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var a=t(7857);Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return a.Driver}});var s=o(t(3659)),u=t(9305);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return u.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return u.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return u.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return u.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return u.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return u.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return u.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return u.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return u.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return u.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return u.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return u.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return u.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return u.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return u.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return u.clientCertificateProviders}});var l=t(6672),c=o(t(3466));e.RxSession=c.default;var f=o(t(5742));e.RxTransaction=f.default;var h=o(t(1530));e.RxManagedTransaction=h.default;var d=o(t(3057));e.RxResult=d.default;var v=u.internal.util,p=v.ENCRYPTION_ON,m=v.assertString,y=v.isEmptyObjectOrNull,b=u.internal.serverAddress.ServerAddress,g=u.internal.urlUtil,_="neo4j-javascript/"+s.default;function w(M,j,L){L===void 0&&(L={}),m(M,"Bolt URL");var F,z=g.parseDatabaseUrl(M),V=!1,G=!1;switch(z.scheme){case"bolt":break;case"bolt+s":G=!0,F="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":G=!0,F="TRUST_ALL_CERTIFICATES";break;case"neo4j":V=!0;break;case"neo4j+s":G=!0,F="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",V=!0;break;case"neo4j+ssc":G=!0,F="TRUST_ALL_CERTIFICATES",V=!0;break;default:throw new Error("Unknown scheme: ".concat(z.scheme))}if(G){if("encrypted"in L||"trust"in L)throw new Error("Encryption/trust can only be configured either through URL or config, not both");L.encrypted=p,L.trust=F,L.clientCertificate=(0,u.resolveCertificateProvider)(L.clientCertificate)}var Y=(function(H){if(typeof(Q=H)=="object"&&Q!=null&&"getToken"in Q&&"handleSecurityException"in Q&&typeof Q.getToken=="function"&&typeof Q.handleSecurityException=="function")return H;var Q,J=H;return(J=J||{}).scheme=J.scheme||"none",(0,u.staticAuthTokenManager)({authToken:J})})(j);L.userAgent=L.userAgent||_,L.boltAgent=u.internal.boltAgent.fromVersion(s.default);var ie=b.fromUrl(z.hostAndPort),W={address:ie,typename:V?"Routing":"Direct",routing:V};return new a.Driver(W,L,(function(){if(V)return function(H,Q,J,ne){return new l.RoutingConnectionProvider({id:H,config:Q,log:J,hostNameResolver:ne,authTokenManager:Y,address:ie,userAgent:Q.userAgent,boltAgent:Q.boltAgent,routingContext:z.query})};if(!y(z.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(M,"'"));return function(H,Q,J){return new l.DirectConnectionProvider({id:H,config:Q,log:J,authTokenManager:Y,address:ie,userAgent:Q.userAgent,boltAgent:Q.boltAgent})}})())}function x(M,j){return n(this,void 0,void 0,function(){var L;return i(this,function(F){switch(F.label){case 0:L=w(M,{scheme:"none",principal:"",credentials:""},j),F.label=1;case 1:return F.trys.push([1,,3,5]),[4,L.getNegotiatedProtocolVersion()];case 2:return F.sent(),[2,!0];case 3:return[4,L.close()];case 4:return F.sent(),[7];case 5:return[2]}})})}e.driver=w,e.hasReachableServer=x;var E={console:function(M){return{level:M,logger:function(j,L){return console.log("".concat(t.g.Date.now()," ").concat(j.toUpperCase()," ").concat(L))}}}};e.logging=E;var O={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,EagerResult:u.EagerResult,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};e.types=O;var T={READ:a.READ,WRITE:a.WRITE};e.session=T;var C={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};e.integer=C;var P={isPoint:u.isPoint};e.spatial=P;var R={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};e.temporal=R;var k={isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship};e.graph=k;var I={authTokenManagers:u.authTokenManagers,driver:w,hasReachableServer:x,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship,integer:C,Neo4jError:u.Neo4jError,isRetryableError:u.isRetryableError,auth:u.auth,logging:E,types:O,session:T,routing:u.routing,error:u.error,graph:k,spatial:P,temporal:R,Driver:a.Driver,Session:u.Session,Transaction:u.Transaction,ManagedTransaction:u.ManagedTransaction,Result:u.Result,EagerResult:u.EagerResult,RxSession:c.default,RxTransaction:f.default,RxManagedTransaction:h.default,RxResult:d.default,ResultSummary:u.ResultSummary,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,GqlStatusObject:u.GqlStatusObject,ServerInfo:u.ServerInfo,Record:u.Record,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,Path:u.Path,PathSegment:u.PathSegment,Point:u.Point,Integer:u.Integer,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,bookmarkManager:u.bookmarkManager,resultTransformers:u.resultTransformers,notificationCategory:u.notificationCategory,notificationSeverityLevel:u.notificationSeverityLevel,notificationFilterDisabledCategory:u.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:u.notificationFilterMinimumSeverityLevel,clientCertificateProviders:u.clientCertificateProviders};e.default=I},1226:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=e.onErrorResumeNextWith=void 0;var o=t(8535),a=t(6102);function s(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=o.argsOrArgArray(u);return function(f){return a.onErrorResumeNext.apply(void 0,i([f],n(c)))}}e.onErrorResumeNextWith=s,e.onErrorResumeNext=s},1242:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaySubject=void 0;var i=t(2483),o=t(9568),a=(function(s){function u(l,c,f){l===void 0&&(l=1/0),c===void 0&&(c=1/0),f===void 0&&(f=o.dateTimestampProvider);var h=s.call(this)||this;return h._bufferSize=l,h._windowTime=c,h._timestampProvider=f,h._buffer=[],h._infiniteTimeWindow=!0,h._infiniteTimeWindow=c===1/0,h._bufferSize=Math.max(1,l),h._windowTime=Math.max(1,c),h}return n(u,s),u.prototype.next=function(l){var c=this,f=c.isStopped,h=c._buffer,d=c._infiniteTimeWindow,v=c._timestampProvider,p=c._windowTime;f||(h.push(l),!d&&h.push(v.now()+p)),this._trimBuffer(),s.prototype.next.call(this,l)},u.prototype._subscribe=function(l){this._throwIfClosed(),this._trimBuffer();for(var c=this._innerSubscribe(l),f=this._infiniteTimeWindow,h=this._buffer.slice(),d=0;d<h.length&&!l.closed;d+=f?1:2)l.next(h[d]);return this._checkFinalizedStatuses(l),c},u.prototype._trimBuffer=function(){var l=this,c=l._bufferSize,f=l._timestampProvider,h=l._buffer,d=l._infiniteTimeWindow,v=(d?1:2)*c;if(c<1/0&&v<h.length&&h.splice(0,h.length-v),!d){for(var p=f.now(),m=0,y=1;y<h.length&&h[y]<=p;y+=2)m=y;m&&h.splice(0,m+1)}},u})(i.Subject);e.ReplaySubject=a},1251:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.mapOneOrManyArgs=void 0;var o=t(5471),a=Array.isArray;e.mapOneOrManyArgs=function(s){return o.map(function(u){return(function(l,c){return a(c)?l.apply(void 0,i([],n(c))):l(c)})(s,u)})}},1293:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.QueueScheduler=void 0;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a})(t(5648).AsyncScheduler);e.QueueScheduler=i},1342:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=function(){}},1358:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=void 0;var n=t(1018);e.isAsyncIterable=function(i){return Symbol.asyncIterator&&n.isFunction(i==null?void 0:i[Symbol.asyncIterator])}},1409:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(){}return n.prototype.beginTransaction=function(i){throw new Error("Not implemented")},n.prototype.run=function(i,o,a){throw new Error("Not implemented")},n.prototype.commitTransaction=function(i){throw new Error("Not implemented")},n.prototype.rollbackTransaction=function(i){throw new Error("Not implemented")},n.prototype.resetAndFlush=function(){throw new Error("Not implemented")},n.prototype.isOpen=function(){throw new Error("Not implemented")},n.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n})();e.default=t},1415:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.max=void 0;var n=t(9139),i=t(1018);e.max=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)>0?a:s}:function(a,s){return a>s?a:s})}},1439:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallbackInternals=void 0;var o=t(8613),a=t(4662),s=t(8960),u=t(1251),l=t(5184),c=t(95);e.bindCallbackInternals=function f(h,d,v,p){if(v){if(!o.isScheduler(v))return function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];return f(h,d,p).apply(this,m).pipe(u.mapOneOrManyArgs(v))};p=v}return p?function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];return f(h,d).apply(this,m).pipe(s.subscribeOn(p),l.observeOn(p))}:function(){for(var m=this,y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var g=new c.AsyncSubject,_=!0;return new a.Observable(function(w){var x=g.subscribe(w);if(_){_=!1;var E=!1,O=!1;d.apply(m,i(i([],n(y)),[function(){for(var T=[],C=0;C<arguments.length;C++)T[C]=arguments[C];if(h){var P=T.shift();if(P!=null)return void g.error(P)}g.next(1<T.length?T:T[0]),O=!0,E&&g.complete()}])),O&&g.complete(),E=!0}return x})}}},1483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var n=t(2483),i=t(9445),o=t(7843),a=t(6824),s={connector:function(){return new n.Subject}};e.connect=function(u,l){l===void 0&&(l=s);var c=l.connector;return o.operate(function(f,h){var d=c();i.innerFrom(u(a.fromSubscribable(d))).subscribe(h),h.add(f.subscribe(d))})}},1505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceError=void 0;var n=t(5568);e.SequenceError=n.createErrorClass(function(i){return function(o){i(this),this.name="SequenceError",this.message=o}})},1517:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var n=t(4027),i={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",a="__isRelationship__",s="__isUnboundRelationship__",u="__isPath__",l="__isPathSegment__";function c(y,b){return y!=null&&y[b]===!0}var f=(function(){function y(b,g,_,w){this.identity=b,this.labels=g,this.properties=_,this.elementId=m(w,function(){return b.toString()})}return y.prototype.toString=function(){for(var b="("+this.elementId,g=0;g<this.labels.length;g++)b+=":"+this.labels[g];var _=Object.keys(this.properties);if(_.length>0){for(b+=" {",g=0;g<_.length;g++)g>0&&(b+=","),b+=_[g]+":"+(0,n.stringify)(this.properties[_[g]]);b+="}"}return b+")"},y})();e.Node=f,Object.defineProperty(f.prototype,o,i),e.isNode=function(y){return c(y,o)};var h=(function(){function y(b,g,_,w,x,E,O,T){this.identity=b,this.start=g,this.end=_,this.type=w,this.properties=x,this.elementId=m(E,function(){return b.toString()}),this.startNodeElementId=m(O,function(){return g.toString()}),this.endNodeElementId=m(T,function(){return _.toString()})}return y.prototype.toString=function(){var b="("+this.startNodeElementId+")-[:"+this.type,g=Object.keys(this.properties);if(g.length>0){b+=" {";for(var _=0;_<g.length;_++)_>0&&(b+=","),b+=g[_]+":"+(0,n.stringify)(this.properties[g[_]]);b+="}"}return b+"]->("+this.endNodeElementId+")"},y})();e.Relationship=h,Object.defineProperty(h.prototype,a,i),e.isRelationship=function(y){return c(y,a)};var d=(function(){function y(b,g,_,w){this.identity=b,this.type=g,this.properties=_,this.elementId=m(w,function(){return b.toString()})}return y.prototype.bind=function(b,g){return new h(this.identity,b,g,this.type,this.properties,this.elementId)},y.prototype.bindTo=function(b,g){return new h(this.identity,b.identity,g.identity,this.type,this.properties,this.elementId,b.elementId,g.elementId)},y.prototype.toString=function(){var b="-[:"+this.type,g=Object.keys(this.properties);if(g.length>0){b+=" {";for(var _=0;_<g.length;_++)_>0&&(b+=","),b+=g[_]+":"+(0,n.stringify)(this.properties[g[_]]);b+="}"}return b+"]->"},y})();e.UnboundRelationship=d,Object.defineProperty(d.prototype,s,i),e.isUnboundRelationship=function(y){return c(y,s)};var v=function(y,b,g){this.start=y,this.relationship=b,this.end=g};e.PathSegment=v,Object.defineProperty(v.prototype,l,i),e.isPathSegment=function(y){return c(y,l)};var p=function(y,b,g){this.start=y,this.end=b,this.segments=g,this.length=g.length};function m(y,b){return y??b()}e.Path=p,Object.defineProperty(p.prototype,u,i),e.isPath=function(y){return c(y,u)}},1518:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=void 0;var n=t(7843),i=t(3111);e.pairwise=function(){return n.operate(function(o,a){var s,u=!1;o.subscribe(i.createOperatorSubscriber(a,function(l){var c=s;s=l,u&&a.next([c,l]),u=!0}))})}},1530:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),n(t(3057)),n(t(5742));var i=(function(){function o(a){var s=a.run;this._run=s}return o.fromTransaction=function(a){return new o({run:a.run.bind(a)})},o.prototype.run=function(a,s){return this._run(a,s)},o})();e.default=i},1551:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=void 0;var n=t(2752);e.exhaust=n.exhaustAll},1554:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var n=t(7961),i=t(1074),o=t(7843),a=t(9445),s=t(5568),u=t(3111),l=t(7110);function c(f){throw new e.TimeoutError(f)}e.TimeoutError=s.createErrorClass(function(f){return function(h){h===void 0&&(h=null),f(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}}),e.timeout=function(f,h){var d=i.isValidDate(f)?{first:f}:typeof f=="number"?{each:f}:f,v=d.first,p=d.each,m=d.with,y=m===void 0?c:m,b=d.scheduler,g=b===void 0?h??n.asyncScheduler:b,_=d.meta,w=_===void 0?null:_;if(v==null&&p==null)throw new TypeError("No timeout provided.");return o.operate(function(x,E){var O,T,C=null,P=0,R=function(k){T=l.executeSchedule(E,g,function(){try{O.unsubscribe(),a.innerFrom(y({meta:w,lastValue:C,seen:P})).subscribe(E)}catch(I){E.error(I)}},k)};O=x.subscribe(u.createOperatorSubscriber(E,function(k){T==null||T.unsubscribe(),P++,E.next(C=k),p>0&&R(p)},void 0,void 0,function(){T!=null&&T.closed||T==null||T.unsubscribe(),C=null})),!P&&R(v!=null?typeof v=="number"?v:+v-g.now():p)})}},1573:function(r,e,t){var n=this&&this.__awaiter||function(d,v,p,m){return new(p||(p=Promise))(function(y,b){function g(x){try{w(m.next(x))}catch(E){b(E)}}function _(x){try{w(m.throw(x))}catch(E){b(E)}}function w(x){var E;x.done?y(x.value):(E=x.value,E instanceof p?E:new p(function(O){O(E)})).then(g,_)}w((m=m.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var p,m,y,b,g={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(w){return function(x){return(function(E){if(p)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(g=0)),g;)try{if(p=1,m&&(y=2&E[0]?m.return:E[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,E[1])).done)return y;switch(m=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return g.label++,{value:E[1],done:!1};case 5:g.label++,m=E[1],E=[0];continue;case 7:E=g.ops.pop(),g.trys.pop();continue;default:if(!((y=(y=g.trys).length>0&&y[y.length-1])||E[0]!==6&&E[0]!==2)){g=0;continue}if(E[0]===3&&(!y||E[1]>y[0]&&E[1]<y[3])){g.label=E[1];break}if(E[0]===6&&g.label<y[1]){g.label=y[1],y=E;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(E);break}y[2]&&g.ops.pop(),g.trys.pop();continue}E=v.call(d,g)}catch(O){E=[6,O],m=0}finally{p=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}})([w,x])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(8917)),s=t(9691),u=new((function(){function d(){}return d.prototype.eagerResultTransformer=function(){return l},d.prototype.eager=function(){return l},d.prototype.mappedResultTransformer=function(v){return c(v)},d.prototype.mapped=function(v){return c(v)},d.prototype.first=function(){return f},d.prototype.summary=function(){return h},d})());function l(d){return n(this,void 0,void 0,function(){var v,p,m,y;return i(this,function(b){switch(b.label){case 0:return[4,d];case 1:return v=b.sent(),p=v.summary,m=v.records,[4,d.keys()];case 2:return y=b.sent(),[2,new a.default(y,m,p)]}})})}function c(d){var v=this;if(d==null||d.collect==null&&d.map==null)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(p){return n(v,void 0,void 0,function(){return i(this,function(m){switch(m.label){case 0:return[4,new Promise(function(y,b){var g={records:[],keys:[]};p.subscribe({onKeys:function(_){g.keys=_},onNext:function(_){if(d.map!=null){var w=d.map(_);w!==void 0&&g.records.push(w)}else g.records.push(_)},onCompleted:function(_){if(d.collect!=null)y(d.collect(g.records,_,g.keys));else{var w={records:g.records,summary:_,keys:g.keys};y(w)}},onError:function(_){b(_)}})})];case 1:return[2,m.sent()]}})})}}function f(d){return n(this,void 0,void 0,function(){var v,p,m,y;return i(this,function(b){switch(b.label){case 0:return[4,(v=d[Symbol.asyncIterator]()).next()];case 1:p=b.sent(),m=p.value,y=p.done,b.label=2;case 2:return b.trys.push([2,,3,6]),y===!0?[2,void 0]:[2,m];case 3:return v.return==null?[3,5]:[4,v.return()];case 4:b.sent(),b.label=5;case 5:return[7];case 6:return[2]}})})}function h(d){return n(this,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,d.summary()];case 1:return[2,v.sent()]}})})}Object.freeze(u),e.default=u},1637:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviorSubject=void 0;var i=(function(o){function a(s){var u=o.call(this)||this;return u._value=s,u}return n(a,o),Object.defineProperty(a.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),a.prototype._subscribe=function(s){var u=o.prototype._subscribe.call(this,s);return!u.closed&&s.next(this._value),u},a.prototype.getValue=function(){var s=this,u=s.hasError,l=s.thrownError,c=s._value;if(u)throw l;return this._throwIfClosed(),c},a.prototype.next=function(s){o.prototype.next.call(this,this._value=s)},a})(t(2483).Subject);e.BehaviorSubject=i},1656:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduled=void 0;var n=t(9567),i=t(9589),o=t(6985),a=t(8808),s=t(854),u=t(1116),l=t(7629),c=t(8046),f=t(6368),h=t(1358),d=t(7614),v=t(9137),p=t(4953);e.scheduled=function(m,y){if(m!=null){if(u.isInteropObservable(m))return n.scheduleObservable(m,y);if(c.isArrayLike(m))return o.scheduleArray(m,y);if(l.isPromise(m))return i.schedulePromise(m,y);if(h.isAsyncIterable(m))return s.scheduleAsyncIterable(m,y);if(f.isIterable(m))return a.scheduleIterable(m,y);if(v.isReadableStreamLike(m))return p.scheduleReadableStreamLike(m,y)}throw d.createInvalidObservableTypeError(m)}},1699:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783),o=t(9445);e.partition=function(a,s,u){return[i.filter(s,u)(o.innerFrom(a)),i.filter(n.not(s,u))(o.innerFrom(a))]}},1711:function(r,e,t){var n=this&&this.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(x[O]=E[O])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=_}g(_,w),_.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(g){for(var _,w=1,x=arguments.length;w<x;w++)for(var E in _=arguments[w])Object.prototype.hasOwnProperty.call(_,E)&&(g[E]=_[E]);return g},i.apply(this,arguments)},o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(9054)),s=t(9305),u=o(t(7021)),l=t(9014),c=t(397),f=o(t(7518)),h=o(t(5045)),d=o(t(3321)),v=s.internal.constants,p=v.BOLT_PROTOCOL_V4_4,m=v.FETCH_ALL,y=s.internal.bookmarks.Bookmarks,b=(function(g){function _(){return g!==null&&g.apply(this,arguments)||this}return n(_,g),Object.defineProperty(_.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(f.default).map(function(x){return x(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.requestRoutingInformation=function(w){var x=w.routingContext,E=x===void 0?{}:x,O=w.databaseName,T=O===void 0?null:O,C=w.impersonatedUser,P=C===void 0?null:C,R=w.sessionContext,k=R===void 0?{}:R,I=w.onError,M=w.onCompleted,j=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:I,onCompleted:M}),L=k.bookmarks||y.empty();return this.write(u.default.routeV4x4(E,L.values(),{databaseName:T,impersonatedUser:P}),j,!0),j},_.prototype.run=function(w,x,E){var O=E===void 0?{}:E,T=O.bookmarks,C=O.txConfig,P=O.database,R=O.mode,k=O.impersonatedUser,I=O.notificationFilter,M=O.beforeKeys,j=O.afterKeys,L=O.beforeError,F=O.afterError,z=O.beforeComplete,V=O.afterComplete,G=O.flush,Y=G===void 0||G,ie=O.reactive,W=ie!==void 0&&ie,H=O.fetchSize,Q=H===void 0?m:H,J=O.highRecordWatermark,ne=J===void 0?Number.MAX_VALUE:J,K=O.lowRecordWatermark,$=K===void 0?Number.MAX_VALUE:K,Z=new l.ResultStreamObserver({server:this._server,reactive:W,fetchSize:Q,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:M,afterKeys:j,beforeError:L,afterError:F,beforeComplete:z,afterComplete:V,highRecordWatermark:ne,lowRecordWatermark:$});(0,c.assertNotificationFilterIsEmpty)(I,this._onProtocolError,Z);var ae=W;return this.write(u.default.runWithMetadata(w,x,{bookmarks:T,txConfig:C,database:P,mode:R,impersonatedUser:k}),Z,ae&&Y),W||this.write(u.default.pull({n:Q}),Z,Y),Z},_.prototype.beginTransaction=function(w){var x=w===void 0?{}:w,E=x.bookmarks,O=x.txConfig,T=x.database,C=x.mode,P=x.impersonatedUser,R=x.notificationFilter,k=x.beforeError,I=x.afterError,M=x.beforeComplete,j=x.afterComplete,L=new l.ResultStreamObserver({server:this._server,beforeError:k,afterError:I,beforeComplete:M,afterComplete:j});return L.prepareToHandleSingleResponse(),(0,c.assertNotificationFilterIsEmpty)(R,this._onProtocolError,L),this.write(u.default.begin({bookmarks:E,txConfig:O,database:T,mode:C,impersonatedUser:P}),L,!0),L},_.prototype._applyUtcPatch=function(){var w=this;this._transformer=new d.default(Object.values(i(i({},f.default),h.default)).map(function(x){return x(w._config,w._log)}))},_})(a.default);e.default=b},1731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sample=void 0;var n=t(9445),i=t(7843),o=t(1342),a=t(3111);e.sample=function(s){return i.operate(function(u,l){var c=!1,f=null;u.subscribe(a.createOperatorSubscriber(l,function(h){c=!0,f=h})),n.innerFrom(s).subscribe(a.createOperatorSubscriber(l,function(){if(c){c=!1;var h=f;f=null,l.next(h)}},o.noop))})}},1751:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=void 0;var n=t(4662),i=t(1018);e.isObservable=function(o){return!!o&&(o instanceof n.Observable||i.isFunction(o.lift)&&i.isFunction(o.subscribe))}},1759:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotFoundError=void 0;var n=t(5568);e.NotFoundError=n.createErrorClass(function(i){return function(o){i(this),this.name="NotFoundError",this.message=o}})},1776:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.endWith=void 0;var o=t(3865),a=t(1004);e.endWith=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return function(l){return o.concat(l,a.of.apply(void 0,i([],n(s))))}}},1803:r=>{var e,t,n=document.attachEvent,i=!1;function o(g){var _=g.__resizeTriggers__,w=_.firstElementChild,x=_.lastElementChild,E=w.firstElementChild;x.scrollLeft=x.scrollWidth,x.scrollTop=x.scrollHeight,E.style.width=w.offsetWidth+1+"px",E.style.height=w.offsetHeight+1+"px",w.scrollLeft=w.scrollWidth,w.scrollTop=w.scrollHeight}function a(g){var _=this;o(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=s(function(){(function(w){return w.offsetWidth!=w.__resizeLast__.width||w.offsetHeight!=w.__resizeLast__.height})(_)&&(_.__resizeLast__.width=_.offsetWidth,_.__resizeLast__.height=_.offsetHeight,_.__resizeListeners__.forEach(function(w){w.call(_,g)}))})}if(!n){var s=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(g){return window.setTimeout(g,20)},function(g){return t(g)}),u=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(g){return e(g)}),l=!1,c="",f="animationstart",h="Webkit Moz O ms".split(" "),d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(v.style.animationName!==void 0&&(l=!0),l===!1){for(var p=0;p<h.length;p++)if(v.style[h[p]+"AnimationName"]!==void 0){c="-"+h[p].toLowerCase()+"-",f=d[p],l=!0;break}}var m="resizeanim",y="@"+c+"keyframes "+m+" { from { opacity: 0; } to { opacity: 0; } } ",b=c+"animation: 1ms "+m+"; "}r.exports=function(g,_){return n?g.attachEvent("onresize",_):(g.__resizeTriggers__||(getComputedStyle(g).position=="static"&&(g.style.position="relative"),(function(){if(!i){var w=(y||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=document.head||document.getElementsByTagName("head")[0],E=document.createElement("style");E.type="text/css",E.styleSheet?E.styleSheet.cssText=w:E.appendChild(document.createTextNode(w)),x.appendChild(E),i=!0}})(),g.__resizeLast__={},g.__resizeListeners__=[],(g.__resizeTriggers__=document.createElement("div")).className="resize-triggers",g.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',g.appendChild(g.__resizeTriggers__),o(g),g.addEventListener("scroll",a,!0),f&&g.__resizeTriggers__.addEventListener(f,function(w){w.animationName==m&&o(g)})),g.__resizeListeners__.push(_)),function(){n?g.detachEvent("onresize",_):(g.__resizeListeners__.splice(g.__resizeListeners__.indexOf(_),1),g.__resizeListeners__.length||(g.removeEventListener("scroll",a),g.__resizeTriggers__=!g.removeChild(g.__resizeTriggers__)))}}},1839:function(r,e,t){var n=this&&this.__awaiter||function(u,l,c,f){return new(c||(c=Promise))(function(h,d){function v(y){try{m(f.next(y))}catch(b){d(b)}}function p(y){try{m(f.throw(y))}catch(b){d(b)}}function m(y){var b;y.done?h(y.value):(b=y.value,b instanceof c?b:new c(function(g){g(b)})).then(v,p)}m((f=f.apply(u,l||[])).next())})},i=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(y){return(function(b){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,b[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){v.label=b[1];break}if(b[0]===6&&v.label<h[1]){v.label=h[1],h=b;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(b);break}h[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(g){b=[6,g],f=0}finally{c=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([m,y])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(6781),s=(function(){function u(l){var c=l.authTokenManager,f=l.userAgent,h=l.boltAgent;this._authTokenManager=c||(0,o.staticAuthTokenManager)({}),this._userAgent=f,this._boltAgent=h}return u.prototype.authenticate=function(l){var c=l.connection,f=l.auth,h=l.skipReAuth,d=l.waitReAuth,v=l.forceReAuth;return n(this,void 0,void 0,function(){var p,m;return i(this,function(y){switch(y.label){case 0:return f==null?[3,3]:(p=c.supportsReAuth===!0&&(!a.object.equals(c.authToken,f)&&h!==!0||v===!0),c.authToken==null||p?[4,c.connect(this._userAgent,this._boltAgent,f,d||!1)]:[3,2]);case 1:case 5:return[2,y.sent()];case 2:case 6:return[2,c];case 3:return[4,this._authTokenManager.getToken()];case 4:return m=y.sent(),a.object.equals(m,c.authToken)?[3,6]:[4,c.connect(this._userAgent,this._boltAgent,m,!1)]}})})},u.prototype.handleError=function(l){var c=l.connection,f=l.code;return!(!c||!f.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(c.authToken,f)},u})();e.default=s},1866:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(R){for(var k,I=1,M=arguments.length;I<M;I++)for(var j in k=arguments[I])Object.prototype.hasOwnProperty.call(k,j)&&(R[j]=k[j]);return R},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(R,k,I,M){M===void 0&&(M=I);var j=Object.getOwnPropertyDescriptor(k,I);j&&!("get"in j?!k.__esModule:j.writable||j.configurable)||(j={enumerable:!0,get:function(){return k[I]}}),Object.defineProperty(R,M,j)}:function(R,k,I,M){M===void 0&&(M=I),R[M]=k[I]}),o=this&&this.__setModuleDefault||(Object.create?function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}:function(R,k){R.default=k}),a=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var I in R)I!=="default"&&Object.prototype.hasOwnProperty.call(R,I)&&i(k,R,I);return o(k,R),k},s=this&&this.__read||function(R,k){var I=typeof Symbol=="function"&&R[Symbol.iterator];if(!I)return R;var M,j,L=I.call(R),F=[];try{for(;(k===void 0||k-- >0)&&!(M=L.next()).done;)F.push(M.value)}catch(z){j={error:z}}finally{try{M&&!M.done&&(I=L.return)&&I.call(L)}finally{if(j)throw j.error}}return F},u=this&&this.__spreadArray||function(R,k,I){if(I||arguments.length===2)for(var M,j=0,L=k.length;j<L;j++)!M&&j in k||(M||(M=Array.prototype.slice.call(k,0,j)),M[j]=k[j]);return R.concat(M||Array.prototype.slice.call(k))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var l=a(t(4027)),c=t(6995),f=t(1053),h={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=d,Object.freeze(d);var v=Object.values(d),p={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=p,Object.freeze(p);var m=Object.values(p),y=p;e.notificationClassification=y;var b=function(R){this.code=R.code,this.title=R.title,this.description=R.description,this.severity=R.severity,this.position=T(R.position),this.severityLevel=C(R.severity),this.rawSeverityLevel=R.severity,this.category=P(R.category),this.rawCategory=R.category};e.Notification=b;var g=(function(){function R(k){var I;this.gqlStatus=k.gql_status,this.statusDescription=k.status_description,this.diagnosticRecord=(I=k.diagnostic_record)!==null&&I!==void 0?I:{},this.position=this.diagnosticRecord._position!=null?T(this.diagnosticRecord._position):void 0,this.severity=C(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=P(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=k.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(R.prototype,"diagnosticRecordAsJsonString",{get:function(){return l.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),R})();function _(R){var k,I,M;if(R.neo4j_code!=null)return new b({code:R.neo4j_code,title:R.title,description:R.description,severity:(k=R.diagnostic_record)===null||k===void 0?void 0:k._severity,category:(I=R.diagnostic_record)===null||I===void 0?void 0:I._classification,position:(M=R.diagnostic_record)===null||M===void 0?void 0:M._position})}function w(R){var k,I=R.severity===d.WARNING?h.WARNING:h.INFORMATION,M={gql_status:I.gql_status,status_description:(k=R.description)!==null&&k!==void 0?k:I.status_description,neo4j_code:R.code,title:R.title,diagnostic_record:n({},f.rawPolyfilledDiagnosticRecord)};return R.severity!=null&&(M.diagnostic_record._severity=R.severity),R.category!=null&&(M.diagnostic_record._classification=R.category),R.position!=null&&(M.diagnostic_record._position=R.position),new g(M)}e.GqlStatusObject=g,e.polyfillNotification=_,e.polyfillGqlStatusObject=w;var x={SUCCESS:new g({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA:new g({gql_status:"02000",status_description:"note: no data",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new g(n(n({},h.NO_DATA),{diagnostic_record:f.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new g({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:f.rawPolyfilledDiagnosticRecord})};Object.freeze(x),e.buildGqlStatusObjectFromMetadata=function(R){var k,I;if(R.statuses!=null)return R.statuses.map(function(L){return new g(L)});var M,j=((M=R.stream_summary)==null?void 0:M.have_records_streamed)===!0?x.SUCCESS:(M==null?void 0:M.has_keys)===!1?x.OMITTED_RESULT:(M==null?void 0:M.pulled)===!0?x.NO_DATA:x.NO_DATA_UNKNOWN_SUBCONDITION;return u([j],s((I=(k=R.notifications)===null||k===void 0?void 0:k.map(w))!==null&&I!==void 0?I:[]),!1).sort(function(L,F){return O(L)-O(F)})};var E=Object.freeze({"02":0,"01":1,"00":2});function O(R){var k,I,M=(k=R.gqlStatus)===null||k===void 0?void 0:k.slice(0,2);return(I=E[M])!==null&&I!==void 0?I:9999}function T(R){return R==null?{}:{offset:c.util.toNumber(R.offset),line:c.util.toNumber(R.line),column:c.util.toNumber(R.column)}}function C(R){return v.includes(R)?R:d.UNKNOWN}function P(R){return m.includes(R)?R:y.UNKNOWN}e.buildNotificationsFromMetadata=function(R){return R.notifications!=null?R.notifications.map(function(k){return new b(k)}):R.statuses!=null?R.statuses.map(_).filter(function(k){return k!=null}):[]},e.default=b},1964:(r,e)=>{function t(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=e.getSymbolIterator=void 0,e.getSymbolIterator=t,e.iterator=t()},1967:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9691),i=t(4027),o={basic:function(s,u,l){return l!=null?{scheme:"basic",principal:s,credentials:u,realm:l}:{scheme:"basic",principal:s,credentials:u}},kerberos:function(s){return{scheme:"kerberos",principal:"",credentials:s}},bearer:function(s){return{scheme:"bearer",credentials:s}},none:function(){return{scheme:"none"}},custom:function(s,u,l,c,f){var h={scheme:c,principal:s};if(a(u)&&(h.credentials=u),a(l)&&(h.realm=l),a(f)){try{(0,i.stringify)(f)}catch(d){throw(0,n.newError)("Circular references in custom auth token parameters",void 0,d)}h.parameters=f}return h}};function a(s){return!(s==null||s===""||Object.getPrototypeOf(s)===Object.prototype&&Object.keys(s).length===0)}e.default=o},1983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeInternals=void 0;var n=t(9445),i=t(7110),o=t(3111);e.mergeInternals=function(a,s,u,l,c,f,h,d){var v=[],p=0,m=0,y=!1,b=function(){!y||v.length||p||s.complete()},g=function(w){return p<l?_(w):v.push(w)},_=function(w){f&&s.next(w),p++;var x=!1;n.innerFrom(u(w,m++)).subscribe(o.createOperatorSubscriber(s,function(E){c==null||c(E),f?g(E):s.next(E)},function(){x=!0},void 0,function(){if(x)try{p--;for(var E=function(){var O=v.shift();h?i.executeSchedule(s,h,function(){return _(O)}):_(O)};v.length&&p<l;)E();b()}catch(O){s.error(O)}}))};return a.subscribe(o.createOperatorSubscriber(s,g,function(){y=!0,b()})),function(){d==null||d()}}},1985:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var t={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=t,Object.freeze(t);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=n,Object.freeze(n);var i=n;e.notificationFilterDisabledClassification=i,e.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}},2007:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var t=(function(){function i(){}return i.prototype.release=function(){throw new Error("Not implemented")},i})();e.Releasable=t;var n=(function(){function i(){}return i.prototype.acquireConnection=function(o){throw Error("Not implemented")},i.prototype.supportsMultiDb=function(){throw Error("Not implemented")},i.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},i.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},i.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},i.prototype.SSREnabled=function(){return!1},i.prototype.verifyConnectivityAndGetServerInfo=function(o){throw Error("Not implemented")},i.prototype.verifyAuthentication=function(o){throw Error("Not implemented")},i.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},i.prototype.close=function(){throw Error("Not implemented")},i})();e.default=n},2063:r=>{r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},2066:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(1175));e.default=n({},o.default)},2069:function(r,e,t){var n=this&&this.__awaiter||function(d,v,p,m){return new(p||(p=Promise))(function(y,b){function g(x){try{w(m.next(x))}catch(E){b(E)}}function _(x){try{w(m.throw(x))}catch(E){b(E)}}function w(x){var E;x.done?y(x.value):(E=x.value,E instanceof p?E:new p(function(O){O(E)})).then(g,_)}w((m=m.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var p,m,y,b,g={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(w){return function(x){return(function(E){if(p)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(g=0)),g;)try{if(p=1,m&&(y=2&E[0]?m.return:E[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,E[1])).done)return y;switch(m=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return g.label++,{value:E[1],done:!1};case 5:g.label++,m=E[1],E=[0];continue;case 7:E=g.ops.pop(),g.trys.pop();continue;default:if(!((y=(y=g.trys).length>0&&y[y.length-1])||E[0]!==6&&E[0]!==2)){g=0;continue}if(E[0]===3&&(!y||E[1]>y[0]&&E[1]<y[3])){g.label=E[1];break}if(E[0]===6&&g.label<y[1]){g.label=y[1],y=E;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(E);break}y[2]&&g.ops.pop(),g.trys.pop();continue}E=v.call(d,g)}catch(O){E=[6,O],m=0}finally{p=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}})([w,x])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var a=o(t(1967)),s=t(6995),u=(function(){function d(){}return d.prototype.getToken=function(){throw new Error("Not Implemented")},d.prototype.handleSecurityException=function(v,p){throw new Error("Not implemented")},d})();e.default=u,e.AuthTokenAndExpiration=function(){this.token=a.default.none(),this.expiration=void 0};var l=new((function(){function d(){}return d.prototype.bearer=function(v){var p=v.tokenProvider;if(typeof p!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof p));return new f(p,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},d.prototype.basic=function(v){var p=this,m=v.tokenProvider;if(typeof m!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof m));return new f(function(){return n(p,void 0,void 0,function(){var y;return i(this,function(b){switch(b.label){case 0:return y={},[4,m()];case 1:return[2,(y.token=b.sent(),y)]}})})},["Neo.ClientError.Security.Unauthorized"])},d})());e.authTokenManagers=l,Object.freeze(l),e.staticAuthTokenManager=function(d){var v=d.authToken;return new h(v)};var c=(function(){function d(v){v===void 0&&(v=[]),this._subscribers=v}return d.prototype.subscribe=function(v){this._subscribers.push(v)},d.prototype.onCompleted=function(v){this._subscribers.forEach(function(p){return p.onCompleted(v)})},d.prototype.onError=function(v){this._subscribers.forEach(function(p){return p.onError(v)})},d})(),f=(function(){function d(v,p,m,y){this._tokenProvider=v,this._handledSecurityCodes=p,this._currentAuthData=m,this._refreshObservable=y}return d.prototype.getToken=function(){var v;return n(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2,(v=this._currentAuthData)===null||v===void 0?void 0:v.token]}})})},d.prototype.handleSecurityException=function(v,p){var m;return!!this._handledSecurityCodes.includes(p)&&(s.util.equals(v,(m=this._currentAuthData)===null||m===void 0?void 0:m.token)&&this._scheduleRefreshAuthToken(),!0)},d.prototype._scheduleRefreshAuthToken=function(v){var p=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(m){var y;p._currentAuthData=m,(y=p._refreshObservable)===null||y===void 0||y.onCompleted(m)}).catch(function(m){var y;(y=p._refreshObservable)===null||y===void 0||y.onError(m)}).finally(function(){p._refreshObservable=void 0})),v!==void 0&&this._refreshObservable.subscribe(v)},d.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var v=this;return i(this,function(p){switch(p.label){case 0:return[4,new Promise(function(m,y){v._scheduleRefreshAuthToken({onCompleted:m,onError:y})})];case 1:return[2,p.sent()]}})})},d})(),h=(function(){function d(v){this._authToken=v}return d.prototype.getToken=function(){return this._authToken},d.prototype.handleSecurityException=function(v,p){return!1},d})()},2072:function(r,e,t){var n=this&&this.__extends||(function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}c(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})(),i=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),o=this&&this.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),a=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&i(f,c,h);return o(f,c),f};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var s=a(t(5361)),u=(function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return n(f,c),f.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},f})(s.Packer);e.Packer=u;var l=(function(c){function f(h,d){return h===void 0&&(h=!1),d===void 0&&(d=!1),c.call(this,h,d)||this}return n(f,c),f})(s.Unpacker);e.Unpacker=l},2129:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=void 0;var n=t(7843),i=t(3111);e.takeWhile=function(o,a){return a===void 0&&(a=!1),n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){var f=o(c,l++);(f||a)&&u.next(c),!f&&u.complete()}))})}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783);e.partition=function(o,a){return function(s){return[i.filter(o,a)(s),i.filter(n.not(o,a))(s)]}}},2199:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0});var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a.prototype.resolve=function(s){return this._resolveToItself(s)},a})(t(9305).internal.resolver.BaseHostNameResolver);e.default=i},2204:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3019));e.default=n({},o.default)},2343:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=void 0;var n=t(9139),i=t(7843),o=function(a,s){return a.push(s),a};e.toArray=function(){return i.operate(function(a,s){n.reduce(o,[])(a).subscribe(s)})}},2360:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.materialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){s.next(n.Notification.createNext(u))},function(){s.next(n.Notification.createComplete()),s.complete()},function(u){s.next(n.Notification.createError(u)),s.complete()}))})}},2363:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.error.SERVICE_UNAVAILABLE,o=n.error.SESSION_EXPIRED,a=(function(){function u(l,c,f,h){this._errorCode=l,this._handleUnavailability=c||s,this._handleWriteFailure=f||s,this._handleSecurityError=h||s}return u.create=function(l){return new u(l.errorCode,l.handleUnavailability,l.handleWriteFailure,l.handleSecurityError)},u.prototype.errorCode=function(){return this._errorCode},u.prototype.handleAndTransformError=function(l,c,f){return(function(h){return h!=null&&h.code!=null&&h.code.startsWith("Neo.ClientError.Security.")})(l)?this._handleSecurityError(l,c,f):(function(h){return!!h&&(h.code===o||h.code===i||h.code==="Neo.TransientError.General.DatabaseUnavailable")})(l)?this._handleUnavailability(l,c,f):(function(h){return!!h&&(h.code==="Neo.ClientError.Cluster.NotALeader"||h.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase")})(l)?this._handleWriteFailure(l,c,f):l},u})();function s(u){return u}e.default=a},2481:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.internal.util,o=i.ENCRYPTION_OFF,a=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,u=[null,void 0,!0,!1,a,o],l=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function(c,f,h,d){this.address=c,this.encrypted=(function(v){var p=v.encrypted;if(u.indexOf(p)===-1)throw(0,n.newError)("Illegal value of the encrypted setting ".concat(p,". Expected one of ").concat(u));return p})(f),this.trust=(function(v){var p=v.trust;if(l.indexOf(p)===-1)throw(0,n.newError)("Illegal value of the trust setting ".concat(p,". Expected one of ").concat(l));return p})(f),this.trustedCertificates=(function(v){return v.trustedCertificates||[]})(f),this.knownHostsPath=(function(v){return v.knownHosts||null})(f),this.connectionErrorCode=h||s,this.connectionTimeout=f.connectionTimeout,this.clientCertificate=d}},2483:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],p=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&p>=h.length&&(h=void 0),{value:h&&h[p++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AnonymousSubject=e.Subject=void 0;var o=t(4662),a=t(8014),s=t(9686),u=t(7479),l=t(9223),c=(function(h){function d(){var v=h.call(this)||this;return v.closed=!1,v.currentObservers=null,v.observers=[],v.isStopped=!1,v.hasError=!1,v.thrownError=null,v}return n(d,h),d.prototype.lift=function(v){var p=new f(this,this);return p.operator=v,p},d.prototype._throwIfClosed=function(){if(this.closed)throw new s.ObjectUnsubscribedError},d.prototype.next=function(v){var p=this;l.errorContext(function(){var m,y;if(p._throwIfClosed(),!p.isStopped){p.currentObservers||(p.currentObservers=Array.from(p.observers));try{for(var b=i(p.currentObservers),g=b.next();!g.done;g=b.next())g.value.next(v)}catch(_){m={error:_}}finally{try{g&&!g.done&&(y=b.return)&&y.call(b)}finally{if(m)throw m.error}}}})},d.prototype.error=function(v){var p=this;l.errorContext(function(){if(p._throwIfClosed(),!p.isStopped){p.hasError=p.isStopped=!0,p.thrownError=v;for(var m=p.observers;m.length;)m.shift().error(v)}})},d.prototype.complete=function(){var v=this;l.errorContext(function(){if(v._throwIfClosed(),!v.isStopped){v.isStopped=!0;for(var p=v.observers;p.length;)p.shift().complete()}})},d.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(d.prototype,"observed",{get:function(){var v;return((v=this.observers)===null||v===void 0?void 0:v.length)>0},enumerable:!1,configurable:!0}),d.prototype._trySubscribe=function(v){return this._throwIfClosed(),h.prototype._trySubscribe.call(this,v)},d.prototype._subscribe=function(v){return this._throwIfClosed(),this._checkFinalizedStatuses(v),this._innerSubscribe(v)},d.prototype._innerSubscribe=function(v){var p=this,m=this,y=m.hasError,b=m.isStopped,g=m.observers;return y||b?a.EMPTY_SUBSCRIPTION:(this.currentObservers=null,g.push(v),new a.Subscription(function(){p.currentObservers=null,u.arrRemove(g,v)}))},d.prototype._checkFinalizedStatuses=function(v){var p=this,m=p.hasError,y=p.thrownError,b=p.isStopped;m?v.error(y):b&&v.complete()},d.prototype.asObservable=function(){var v=new o.Observable;return v.source=this,v},d.create=function(v,p){return new f(v,p)},d})(o.Observable);e.Subject=c;var f=(function(h){function d(v,p){var m=h.call(this)||this;return m.destination=v,m.source=p,m}return n(d,h),d.prototype.next=function(v){var p,m;(m=(p=this.destination)===null||p===void 0?void 0:p.next)===null||m===void 0||m.call(p,v)},d.prototype.error=function(v){var p,m;(m=(p=this.destination)===null||p===void 0?void 0:p.error)===null||m===void 0||m.call(p,v)},d.prototype.complete=function(){var v,p;(p=(v=this.destination)===null||v===void 0?void 0:v.complete)===null||p===void 0||p.call(v)},d.prototype._subscribe=function(v){var p,m;return(m=(p=this.source)===null||p===void 0?void 0:p.subscribe(v))!==null&&m!==void 0?m:a.EMPTY_SUBSCRIPTION},d})(c);e.AnonymousSubject=f},2533:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})(),i=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(715)),a=(function(s){function u(l){var c=s.call(this)||this;return c._readersIndex=new o.default,c._writersIndex=new o.default,c._connectionPool=l,c}return n(u,s),u.prototype.selectReader=function(l){return this._select(l,this._readersIndex)},u.prototype.selectWriter=function(l){return this._select(l,this._writersIndex)},u.prototype._select=function(l,c){var f=l.length;if(f===0)return null;var h=c.next(f),d=h,v=null,p=Number.MAX_SAFE_INTEGER;do{var m=l[d],y=this._connectionPool.activeResourceCount(m);y<p&&(v=m,p=y),d===f-1?d=0:d++}while(d!==h);return v},u})(i(t(4311)).default);e.default=a},2539:function(r,e,t){var n=this&&this.__extends||(function(){var w=function(x,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,T){O.__proto__=T}||function(O,T){for(var C in T)Object.prototype.hasOwnProperty.call(T,C)&&(O[C]=T[C])},w(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=x}w(x,E),x.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(w){for(var x,E=1,O=arguments.length;E<O;E++)for(var T in x=arguments[E])Object.prototype.hasOwnProperty.call(x,T)&&(w[T]=x[T]);return w},i.apply(this,arguments)},o=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(5642)),s=o(t(7021)),u=t(397),l=t(9014),c=o(t(2066)),f=o(t(3321)),h=t(9305),d=(h.internal.bookmarks.Bookmarks,h.internal.constants),v=d.BOLT_PROTOCOL_V4_0,p=d.FETCH_ALL,m=h.internal.txConfig.TxConfig,y="context",b="database",g="CALL dbms.routing.getRoutingTable($".concat(y,", $").concat(b,")"),_=(function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return n(x,w),Object.defineProperty(x.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"transformer",{get:function(){var E=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(O){return O(E._config,E._log)}))),this._transformer},enumerable:!1,configurable:!0}),x.prototype.beginTransaction=function(E){var O=E===void 0?{}:E,T=O.bookmarks,C=O.txConfig,P=O.database,R=O.impersonatedUser,k=O.notificationFilter,I=O.mode,M=O.beforeError,j=O.afterError,L=O.beforeComplete,F=O.afterComplete,z=new l.ResultStreamObserver({server:this._server,beforeError:M,afterError:j,beforeComplete:L,afterComplete:F});return z.prepareToHandleSingleResponse(),(0,u.assertImpersonatedUserIsEmpty)(R,this._onProtocolError,z),(0,u.assertNotificationFilterIsEmpty)(k,this._onProtocolError,z),this.write(s.default.begin({bookmarks:T,txConfig:C,database:P,mode:I}),z,!0),z},x.prototype.run=function(E,O,T){var C=T===void 0?{}:T,P=C.bookmarks,R=C.txConfig,k=C.database,I=C.impersonatedUser,M=C.notificationFilter,j=C.mode,L=C.beforeKeys,F=C.afterKeys,z=C.beforeError,V=C.afterError,G=C.beforeComplete,Y=C.afterComplete,ie=C.flush,W=ie===void 0||ie,H=C.reactive,Q=H!==void 0&&H,J=C.fetchSize,ne=J===void 0?p:J,K=C.highRecordWatermark,$=K===void 0?Number.MAX_VALUE:K,Z=C.lowRecordWatermark,ae=Z===void 0?Number.MAX_VALUE:Z,se=new l.ResultStreamObserver({server:this._server,reactive:Q,fetchSize:ne,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:L,afterKeys:F,beforeError:z,afterError:V,beforeComplete:G,afterComplete:Y,highRecordWatermark:$,lowRecordWatermark:ae});(0,u.assertImpersonatedUserIsEmpty)(I,this._onProtocolError,se),(0,u.assertNotificationFilterIsEmpty)(M,this._onProtocolError,se);var fe=Q;return this.write(s.default.runWithMetadata(E,O,{bookmarks:P,txConfig:R,database:k,mode:j}),se,fe&&W),Q||this.write(s.default.pull({n:ne}),se,W),se},x.prototype._requestMore=function(E,O,T){this.write(s.default.pull({stmtId:E,n:O}),T,!0)},x.prototype._requestDiscard=function(E,O){this.write(s.default.discard({stmtId:E}),O,!0)},x.prototype._noOp=function(){},x.prototype.requestRoutingInformation=function(E){var O,T=E.routingContext,C=T===void 0?{}:T,P=E.databaseName,R=P===void 0?null:P,k=E.sessionContext,I=k===void 0?{}:k,M=E.onError,j=E.onCompleted,L=this.run(g,((O={})[y]=C,O[b]=R,O),i(i({},I),{txConfig:m.empty()}));return new l.ProcedureRouteObserver({resultObserver:L,onProtocolError:this._onProtocolError,onError:M,onCompleted:j})},x})(a.default);e.default=_},2551:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=void 0;var o=t(3247),a=t(7843),s=t(8535),u=t(1251),l=t(2706),c=t(1107);e.combineLatest=function f(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var v=c.popResultSelector(h);return v?l.pipe(f.apply(void 0,i([],n(h))),u.mapOneOrManyArgs(v)):a.operate(function(p,m){o.combineLatestInit(i([p],n(s.argsOrArgArray(h))))(m)})}},2578:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305);function i(){}function o(u){return u}var a={onNext:i,onCompleted:i,onError:i},s=(function(){function u(l){var c=l===void 0?{}:l,f=c.transformMetadata,h=c.enrichErrorMetadata,d=c.log,v=c.observer;this._pendingObservers=[],this._log=d,this._transformMetadata=f||o,this._enrichErrorMetadata=h||o,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:o},v)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(l){var c=l.fields[0];switch(l.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(l))),this._currentObserver.onNext(c);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(l)));try{var f=this._transformMetadata(c);this._currentObserver.onCompleted(f)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(l)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(c)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(l)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+l))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(u.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),u.prototype._queueObserver=function(l){return(l=l||a).onCompleted=l.onCompleted||i,l.onError=l.onError||i,l.onNext=l.onNext||i,this._currentObserver===void 0?this._currentObserver=l:this._pendingObservers.push(l),this._observer.onObserversCountChange(this._observersCount),!0},u.prototype._notifyErrorToObservers=function(l){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(l);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(l)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u.prototype._handleErrorPayload=function(l){var c,f=(c=l.code)==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":c==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":c,h=l.cause!=null?this._handleErrorCause(l.cause):void 0,d=(0,n.newError)(l.message,f,h,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(d)},u.prototype._handleErrorCause=function(l){var c=l.cause!=null?this._handleErrorCause(l.cause):void 0,f=(0,n.newGQLError)(l.message,c,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(f)},u})();e.default=s},2628:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameAction=void 0;var i=t(5267),o=t(9507),a=(function(s){function u(l,c){var f=s.call(this,l,c)||this;return f.scheduler=l,f.work=c,f}return n(u,s),u.prototype.requestAsyncId=function(l,c,f){return f===void 0&&(f=0),f!==null&&f>0?s.prototype.requestAsyncId.call(this,l,c,f):(l.actions.push(this),l._scheduled||(l._scheduled=o.animationFrameProvider.requestAnimationFrame(function(){return l.flush(void 0)})))},u.prototype.recycleAsyncId=function(l,c,f){var h;if(f===void 0&&(f=0),f!=null?f>0:this.delay>0)return s.prototype.recycleAsyncId.call(this,l,c,f);var d=l.actions;c!=null&&c===l._scheduled&&((h=d[d.length-1])===null||h===void 0?void 0:h.id)!==c&&(o.animationFrameProvider.cancelAnimationFrame(c),l._scheduled=void 0)},u})(i.AsyncAction);e.AnimationFrameAction=a},2669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.min=void 0;var n=t(9139),i=t(1018);e.min=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)<0?a:s}:function(a,s){return a<s?a:s})}},2696:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var t=(function(){function o(){}return o.prototype.subscribe=function(a){i(a,a.onKeys,[]),i(a,a.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(a){throw new Error("CompletedObserver not supposed to call onError",{cause:a})},o})();e.CompletedObserver=t;var n=(function(){function o(a){var s=a.error,u=a.onError;this._error=s,this._beforeError=u,this._observers=[],this.onError(s)}return o.prototype.subscribe=function(a){i(a,a.onError,this._error),this._observers.push(a)},o.prototype.onError=function(a){i(this,this._beforeError,a),this._observers.forEach(function(s){return i(s,s.onError,a)})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.markCompleted=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o})();function i(o,a,s){a!=null&&a.bind(o)(s)}e.FailedObserver=n},2706:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipeFromArray=e.pipe=void 0;var n=t(6640);function i(o){return o.length===0?n.identity:o.length===1?o[0]:function(a){return o.reduce(function(s,u){return u(s)},a)}}e.pipe=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i(o)},e.pipeFromArray=i},2713:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallback=void 0;var n=t(1439);e.bindCallback=function(i,o,a){return n.bindCallbackInternals(!1,i,o,a)}},2752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustAll=void 0;var n=t(4753),i=t(6640);e.exhaustAll=function(){return n.exhaustMap(i.identity)}},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyError=void 0;var n=t(5568);e.EmptyError=n.createErrorClass(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}})},2833:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var n=t(7302),i=t(9445),o=t(8616),a=t(1107),s=t(4917);e.merge=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=a.popScheduler(u),f=a.popNumber(u,1/0),h=u;return h.length?h.length===1?i.innerFrom(h[0]):n.mergeAll(f)(s.from(h,c)):o.EMPTY}},2857:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(8320)),a=i(t(7168)),s=t(9305),u=i(t(3448)),l=i(t(3321)),c=s.internal.constants.BOLT_PROTOCOL_V2,f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),d.prototype._createPacker=function(v){return new a.default.Packer(v)},d.prototype._createUnpacker=function(v,p){return new a.default.Unpacker(v,p)},Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),d})(o.default);e.default=f},2886:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var n=t(4212),i=t(1293);e.queueScheduler=new i.QueueScheduler(n.QueueAction),e.queue=e.queueScheduler},2906:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c},a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var s=o(t(7589));e.PoolConfig=s.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var u=a(t(6842));e.Pool=u.default,e.default=u.default},3001:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(i){this.maxSize=i,this.pruneCount=Math.max(Math.round(.01*i*Math.log(i)),1),this.map=new Map}return n.prototype.set=function(i,o){this.map.set(i,{database:o,lastUsed:Date.now()}),this._pruneCache()},n.prototype.get=function(i){var o=this.map.get(i);if(o!==void 0)return o.lastUsed=Date.now(),o.database},n.prototype.delete=function(i){this.map.delete(i)},n.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var i=Array.from(this.map.entries()).sort(function(a,s){return a[1].lastUsed-s[1].lastUsed}),o=0;o<this.pruneCount;o++)this.map.delete(i[o][0])},n})();e.default=t},3019:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9994));e.default=n({},o.default)},3057:function(r,e,t){var n=this&&this.__awaiter||function(c,f,h,d){return new(h||(h=Promise))(function(v,p){function m(g){try{b(d.next(g))}catch(_){p(_)}}function y(g){try{b(d.throw(g))}catch(_){p(_)}}function b(g){var _;g.done?v(g.value):(_=g.value,_ instanceof h?_:new h(function(w){w(_)})).then(m,y)}b((d=d.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var h,d,v,p,m={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(b){return function(g){return(function(_){if(h)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(m=0)),m;)try{if(h=1,d&&(v=2&_[0]?d.return:_[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,_[1])).done)return v;switch(d=0,v&&(_=[2&_[0],v.value]),_[0]){case 0:case 1:v=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,d=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!((v=(v=m.trys).length>0&&v[v.length-1])||_[0]!==6&&_[0]!==2)){m=0;continue}if(_[0]===3&&(!v||_[1]>v[0]&&_[1]<v[3])){m.label=_[1];break}if(_[0]===6&&m.label<v[1]){m.label=v[1],v=_;break}if(v&&m.label<v[2]){m.label=v[2],m.ops.push(_);break}v[2]&&m.ops.pop(),m.trys.pop();continue}_=f.call(c,m)}catch(w){_=[6,w],d=0}finally{h=v=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}})([b,g])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(8813),s=t(9419),u=(function(){function c(f,h){var d=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=d,this._keys=d.pipe((0,s.mergeMap)(function(v){return(0,a.from)(v.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new l,this._summary=new a.ReplaySubject,this._state=h||0}return c.prototype.keys=function(){return this._keys},c.prototype.records=function(){var f=this,h=this._result.pipe((0,s.mergeMap)(function(d){return new a.Observable(function(v){return f._startStreaming({result:d,recordsObserver:v})})}));return h.push=function(){return f._push()},h},c.prototype.consume=function(){var f=this;return this._result.pipe((0,s.mergeMap)(function(h){return new a.Observable(function(d){return f._startStreaming({result:h,summaryObserver:d})})}))},c.prototype.pause=function(){this._controls.pause()},c.prototype.resume=function(){return this._controls.resume()},c.prototype.push=function(){return this._controls.push()},c.prototype._startStreaming=function(f){var h=f===void 0?{}:f,d=h.result,v=h.recordsObserver,p=v===void 0?null:v,m=h.summaryObserver,y=m===void 0?null:m,b=[];return y&&b.push(this._summary.subscribe(y)),this._state<1?(this._state=1,this._setupRecordsStream(d),p?b.push(this._records.subscribe(p)):d._cancel(),b.push({unsubscribe:function(){d._cancel&&d._cancel()}})):p&&p.error((0,o.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){b.forEach(function(g){return g.unsubscribe()})}},c.prototype._toObservable=function(){var f=this;return new a.Observable(function(h){f._result.subscribe({complete:function(){return h.complete()},next:function(d){return h.next(new c((function(v){return new a.Observable(function(p){p.next(v),p.complete()})})(d)),f._state)},error:function(d){return h.error(d)}})})},c.prototype._setupRecordsStream=function(f){var h=this;return this._records||(this._records=(function(d,v,p){var m=this;p===void 0&&(p=new l);var y=new a.Subject,b=function(_){return n(m,void 0,void 0,function(){var w,x,E,O;return i(this,function(T){switch(T.label){case 0:return T.trys.push([0,2,3,4]),p.pushing=!0,[4,_];case 1:return w=T.sent(),x=w.done,E=w.value,x?(y.complete(),v.complete()):(y.next(E),p.paused||b(d.next()).catch(function(){})),[3,4];case 2:return O=T.sent(),y.error(O),v.error(O),[3,4];case 3:return p.pushing=!1,[7];case 4:return[2]}})})};function g(_){return n(this,void 0,void 0,function(){return i(this,function(w){switch(w.label){case 0:return[4,b(d.next(_))];case 1:return w.sent(),[2]}})})}return p.pusher=g,g(),y})(f[Symbol.asyncIterator](),{complete:function(){return n(h,void 0,void 0,function(){var d,v;return i(this,function(p){switch(p.label){case 0:return this._state=2,v=(d=this._summary).next,[4,f.summary()];case 1:return v.apply(d,[p.sent()]),this._summary.complete(),[2]}})})},error:function(d){h._state=2,h._summary.error(d)}},this._controls)),this._records},c})();e.default=u;var l=(function(){function c(f){f===void 0&&(f=function(){return n(h,void 0,void 0,function(){return i(this,function(d){return[2]})})});var h=this;this._paused=!1,this._pushing=!1,this._push=f}return c.prototype.pause=function(){this._paused=!0},Object.defineProperty(c.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pushing",{get:function(){return this._pushing},set:function(f){this._pushing=f},enumerable:!1,configurable:!0}),c.prototype.resume=function(){return n(this,void 0,void 0,function(){var f;return i(this,function(h){switch(h.label){case 0:return f=this._paused,this._paused=!1,!f||this._pushing?[3,2]:[4,this._push()];case 1:h.sent(),h.label=2;case 2:return[2]}})})},c.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(f){switch(f.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,f.sent()]}})})},Object.defineProperty(c.prototype,"pusher",{get:function(){return this._push},set:function(f){this._push=f},enumerable:!1,configurable:!0}),c})()},3110:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrames=void 0;var n=t(4662),i=t(4746),o=t(9507);function a(u){return new n.Observable(function(l){var c=u||i.performanceTimestampProvider,f=c.now(),h=0,d=function(){l.closed||(h=o.animationFrameProvider.requestAnimationFrame(function(v){h=0;var p=c.now();l.next({timestamp:u?p:v,elapsed:p-f}),d()}))};return d(),function(){h&&o.animationFrameProvider.cancelAnimationFrame(h)}})}e.animationFrames=function(u){return u?a(u):s};var s=a()},3111:function(r,e,t){var n=this&&this.__extends||(function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorSubscriber=e.createOperatorSubscriber=void 0;var i=t(5);e.createOperatorSubscriber=function(a,s,u,l,c){return new o(a,s,u,l,c)};var o=(function(a){function s(u,l,c,f,h,d){var v=a.call(this,u)||this;return v.onFinalize=h,v.shouldUnsubscribe=d,v._next=l?function(p){try{l(p)}catch(m){u.error(m)}}:a.prototype._next,v._error=f?function(p){try{f(p)}catch(m){u.error(m)}finally{this.unsubscribe()}}:a.prototype._error,v._complete=c?function(){try{c()}catch(p){u.error(p)}finally{this.unsubscribe()}}:a.prototype._complete,v}return n(s,a),s.prototype.unsubscribe=function(){var u;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var l=this.closed;a.prototype.unsubscribe.call(this),!l&&((u=this.onFinalize)===null||u===void 0||u.call(this))}},s})(i.Subscriber);e.OperatorSubscriber=o},3133:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=void 0;var n=t(1242),i=t(8977);e.shareReplay=function(o,a,s){var u,l,c,f,h=!1;return o&&typeof o=="object"?(u=o.bufferSize,f=u===void 0?1/0:u,l=o.windowTime,a=l===void 0?1/0:l,h=(c=o.refCount)!==void 0&&c,s=o.scheduler):f=o??1/0,i.share({connector:function(){return new n.ReplaySubject(f,a,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}},3146:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.audit=void 0;var n=t(7843),i=t(9445),o=t(3111);e.audit=function(a){return n.operate(function(s,u){var l=!1,c=null,f=null,h=!1,d=function(){if(f==null||f.unsubscribe(),f=null,l){l=!1;var p=c;c=null,u.next(p)}h&&u.complete()},v=function(){f=null,h&&u.complete()};s.subscribe(o.createOperatorSubscriber(u,function(p){l=!0,c=p,f||i.innerFrom(a(p)).subscribe(f=o.createOperatorSubscriber(u,d,v))},function(){h=!0,(!l||!f||f.closed)&&u.complete()}))})}},3206:(r,e,t)=>{r.exports=function(E){var O,T,C,P=0,R=0,k=u,I=[],M=[],j=1,L=0,F=0,z=!1,V=!1,G="",Y=o,ie=n;(E=E||{}).version==="300 es"&&(Y=s,ie=a);var W={},H={};for(P=0;P<Y.length;P++)W[Y[P]]=!0;for(P=0;P<ie.length;P++)H[ie[P]]=!0;return function(N){return M=[],N!==null?(function(B){var q;for(P=0,B.toString&&(B=B.toString()),G+=B.replace(/\r\n/g,`
`),C=G.length;O=G[P],P<C;){switch(q=P,k){case c:P=Z();break;case f:P=$();break;case h:P=K();break;case d:P=ae();break;case v:P=ge();break;case w:P=fe();break;case p:P=ye();break;case l:P=pe();break;case g:P=ne();break;case u:P=J()}q!==P&&(G[q]===`
`?(L=0,++j):++L)}return R+=P,G=G.slice(P),M})(N):(I.length&&Q(I.join("")),k=_,Q("(eof)"),M)};function Q(N){N.length&&M.push({type:x[k],data:N,position:F,line:j,column:L})}function J(){return I=I.length?[]:I,T==="/"&&O==="*"?(F=R+P-1,k=c,T=O,P+1):T==="/"&&O==="/"?(F=R+P-1,k=f,T=O,P+1):O==="#"?(k=h,F=R+P,P):/\s/.test(O)?(k=g,F=R+P,P):(z=/\d/.test(O),V=/[^\w_]/.test(O),F=R+P,k=z?v:V?d:l,P)}function ne(){return/[^\s]/g.test(O)?(Q(I.join("")),k=u,P):(I.push(O),T=O,P+1)}function K(){return O!=="\r"&&O!==`
`||T==="\\"?(I.push(O),T=O,P+1):(Q(I.join("")),k=u,P)}function $(){return K()}function Z(){return O==="/"&&T==="*"?(I.push(O),Q(I.join("")),k=u,P+1):(I.push(O),T=O,P+1)}function ae(){if(T==="."&&/\d/.test(O))return k=p,P;if(T==="/"&&O==="*")return k=c,P;if(T==="/"&&O==="/")return k=f,P;if(O==="."&&I.length){for(;se(I););return k=p,P}if(O===";"||O===")"||O==="("){if(I.length)for(;se(I););return Q(O),k=u,P+1}var N=I.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||N){for(;se(I););return k=u,P}return I.push(O),T=O,P+1}function se(N){for(var B,q,re=0;;){if(B=i.indexOf(N.slice(0,N.length+re).join("")),q=i[B],B===-1){if(re--+N.length>0)continue;q=N.slice(0,1).join("")}return Q(q),F+=q.length,(I=I.slice(q.length)).length}}function fe(){return/[^a-fA-F0-9]/.test(O)?(Q(I.join("")),k=u,P):(I.push(O),T=O,P+1)}function ge(){return O==="."||/[eE]/.test(O)?(I.push(O),k=p,T=O,P+1):O==="x"&&I.length===1&&I[0]==="0"?(k=w,I.push(O),T=O,P+1):/[^\d]/.test(O)?(Q(I.join("")),k=u,P):(I.push(O),T=O,P+1)}function ye(){return O==="f"&&(I.push(O),T=O,P+=1),/[eE]/.test(O)?(I.push(O),T=O,P+1):(O!=="-"&&O!=="+"||!/[eE]/.test(T))&&/[^\d]/.test(O)?(Q(I.join("")),k=u,P):(I.push(O),T=O,P+1)}function pe(){if(/[^\d\w_]/.test(O)){var N=I.join("");return k=H[N]?b:W[N]?y:m,Q(I.join("")),k=u,P}return I.push(O),T=O,P+1}};var n=t(4704),i=t(2063),o=t(7192),a=t(8784),s=t(5592),u=999,l=9999,c=0,f=1,h=2,d=3,v=4,p=5,m=6,y=7,b=8,g=9,_=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3218:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=void 0;var n=t(5471);e.mapTo=function(i){return n.map(function(){return i})}},3229:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameScheduler=void 0;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a.prototype.flush=function(s){var u;this._active=!0,s?u=s.id:(u=this._scheduled,this._scheduled=void 0);var l,c=this.actions;s=s||c.shift();do if(l=s.execute(s.state,s.delay))break;while((s=c[0])&&s.id===u&&c.shift());if(this._active=!1,l){for(;(s=c[0])&&s.id===u&&c.shift();)s.unsubscribe();throw l}},a})(t(5648).AsyncScheduler);e.AnimationFrameScheduler=i},3231:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=void 0;var n=t(7961),i=t(3146),o=t(4092);e.auditTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.audit(function(){return o.timer(a,s)})}},3247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestInit=e.combineLatest=void 0;var n=t(4662),i=t(7360),o=t(4917),a=t(6640),s=t(1251),u=t(1107),l=t(6013),c=t(3111),f=t(7110);function h(v,p,m){return m===void 0&&(m=a.identity),function(y){d(p,function(){for(var b=v.length,g=new Array(b),_=b,w=b,x=function(O){d(p,function(){var T=o.from(v[O],p),C=!1;T.subscribe(c.createOperatorSubscriber(y,function(P){g[O]=P,C||(C=!0,w--),w||y.next(m(g.slice()))},function(){--_||y.complete()}))},y)},E=0;E<b;E++)x(E)},y)}}function d(v,p,m){v?f.executeSchedule(m,v,p):p()}e.combineLatest=function(){for(var v=[],p=0;p<arguments.length;p++)v[p]=arguments[p];var m=u.popScheduler(v),y=u.popResultSelector(v),b=i.argsArgArrayOrObject(v),g=b.args,_=b.keys;if(g.length===0)return o.from([],m);var w=new n.Observable(h(g,m,_?function(x){return l.createObject(_,x)}:a.identity));return y?w.pipe(s.mapOneOrManyArgs(y)):w},e.combineLatestInit=h},3269:(r,e,t)=>{var n=t(6931),i=t(9975),o=Object.hasOwnProperty,a=Object.create(null);for(var s in n)o.call(n,s)&&(a[n[s]]=s);var u=r.exports={to:{},get:{}};function l(f,h,d){return Math.min(Math.max(h,f),d)}function c(f){var h=Math.round(f).toString(16).toUpperCase();return h.length<2?"0"+h:h}u.get=function(f){var h,d;switch(f.substring(0,3).toLowerCase()){case"hsl":h=u.get.hsl(f),d="hsl";break;case"hwb":h=u.get.hwb(f),d="hwb";break;default:h=u.get.rgb(f),d="rgb"}return h?{model:d,value:h}:null},u.get.rgb=function(f){if(!f)return null;var h,d,v,p=[0,0,0,1];if(h=f.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=h[2],h=h[1],d=0;d<3;d++){var m=2*d;p[d]=parseInt(h.slice(m,m+2),16)}v&&(p[3]=parseInt(v,16)/255)}else if(h=f.match(/^#([a-f0-9]{3,4})$/i)){for(v=(h=h[1])[3],d=0;d<3;d++)p[d]=parseInt(h[d]+h[d],16);v&&(p[3]=parseInt(v+v,16)/255)}else if(h=f.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(d=0;d<3;d++)p[d]=parseInt(h[d+1],0);h[4]&&(h[5]?p[3]=.01*parseFloat(h[4]):p[3]=parseFloat(h[4]))}else{if(!(h=f.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(h=f.match(/^(\w+)$/))?h[1]==="transparent"?[0,0,0,0]:o.call(n,h[1])?((p=n[h[1]])[3]=1,p):null:null;for(d=0;d<3;d++)p[d]=Math.round(2.55*parseFloat(h[d+1]));h[4]&&(h[5]?p[3]=.01*parseFloat(h[4]):p[3]=parseFloat(h[4]))}for(d=0;d<3;d++)p[d]=l(p[d],0,255);return p[3]=l(p[3],0,1),p},u.get.hsl=function(f){if(!f)return null;var h=f.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.get.hwb=function(f){if(!f)return null;var h=f.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.to.hex=function(){var f=i(arguments);return"#"+c(f[0])+c(f[1])+c(f[2])+(f[3]<1?c(Math.round(255*f[3])):"")},u.to.rgb=function(){var f=i(arguments);return f.length<4||f[3]===1?"rgb("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+")":"rgba("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+", "+f[3]+")"},u.to.rgb.percent=function(){var f=i(arguments),h=Math.round(f[0]/255*100),d=Math.round(f[1]/255*100),v=Math.round(f[2]/255*100);return f.length<4||f[3]===1?"rgb("+h+"%, "+d+"%, "+v+"%)":"rgba("+h+"%, "+d+"%, "+v+"%, "+f[3]+")"},u.to.hsl=function(){var f=i(arguments);return f.length<4||f[3]===1?"hsl("+f[0]+", "+f[1]+"%, "+f[2]+"%)":"hsla("+f[0]+", "+f[1]+"%, "+f[2]+"%, "+f[3]+")"},u.to.hwb=function(){var f=i(arguments),h="";return f.length>=4&&f[3]!==1&&(h=", "+f[3]),"hwb("+f[0]+", "+f[1]+"%, "+f[2]+"%"+h+")"},u.to.keyword=function(f){return a[f.slice(0,3)]}},3274:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=void 0;var n=t(3879),i=t(1018);e.switchMapTo=function(o,a){return i.isFunction(a)?n.switchMap(function(){return o},a):n.switchMap(function(){return o})}},3321:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var n=t(7168),i=t(9305).internal.objectUtil,o=(function(){function s(u){this._transformers=u,this._transformersPerSignature=new Map(u.map(function(l){return[l.signature,l]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return s.prototype.fromStructure=function(u){try{return u instanceof n.structure.Structure&&this._transformersPerSignature.has(u.signature)?(0,this._transformersPerSignature.get(u.signature).fromStructure)(u):u}catch(l){return i.createBrokenObject(l)}},s.prototype.toStructure=function(u){var l=this._transformers.find(function(c){return(0,c.isTypeInstance)(u)});return l!==void 0?l.toStructure(u):u},s})();e.default=o;var a=(function(){function s(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;this.signature=l,this.isTypeInstance=h,this.fromStructure=c,this.toStructure=f,Object.freeze(this)}return s.prototype.extendsWith=function(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;return new s({signature:l||this.signature,fromStructure:c||this.fromStructure,toStructure:f||this.toStructure,isTypeInstance:h||this.isTypeInstance})},s})();e.TypeTransformer=a},3327:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observable=void 0,e.observable=typeof Symbol=="function"&&Symbol.observable||"@@observable"},3371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=t(9691),i=new Map,o=(function(){function p(m,y){this.low=m??0,this.high=y??0}return p.prototype.inSafeRange=function(){return this.greaterThanOrEqual(p.MIN_SAFE_VALUE)&&this.lessThanOrEqual(p.MAX_SAFE_VALUE)},p.prototype.toInt=function(){return this.low},p.prototype.toNumber=function(){return this.high*s+(this.low>>>0)},p.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(s)+BigInt(this.low>>>0);var m=this.negate();return BigInt(-1)*(BigInt(m.high>>>0)*BigInt(s)+BigInt(m.low>>>0))},p.prototype.toNumberOrInfinity=function(){return this.lessThan(p.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(p.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},p.prototype.toString=function(m){if((m=m??10)<2||m>36)throw RangeError("radix out of range: "+m.toString());if(this.isZero())return"0";var y;if(this.isNegative()){if(this.equals(p.MIN_VALUE)){var b=p.fromNumber(m),g=this.div(b);return y=g.multiply(b).subtract(this),g.toString(m)+y.toInt().toString(m)}return"-"+this.negate().toString(m)}var _=p.fromNumber(Math.pow(m,6));y=this;for(var w="";;){var x=y.div(_),E=(y.subtract(x.multiply(_)).toInt()>>>0).toString(m);if((y=x).isZero())return E+w;for(;E.length<6;)E="0"+E;w=""+E+w}},p.prototype.valueOf=function(){return this.toBigInt()},p.prototype.getHighBits=function(){return this.high},p.prototype.getLowBits=function(){return this.low},p.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(p.MIN_VALUE)?64:this.negate().getNumBitsAbs();var m=this.high!==0?this.high:this.low,y=0;for(y=31;y>0&&!(m&1<<y);y--);return this.high!==0?y+33:y+1},p.prototype.isZero=function(){return this.high===0&&this.low===0},p.prototype.isNegative=function(){return this.high<0},p.prototype.isPositive=function(){return this.high>=0},p.prototype.isOdd=function(){return!(1&~this.low)},p.prototype.isEven=function(){return!(1&this.low)},p.prototype.equals=function(m){var y=p.fromValue(m);return this.high===y.high&&this.low===y.low},p.prototype.notEquals=function(m){return!this.equals(m)},p.prototype.lessThan=function(m){return this.compare(m)<0},p.prototype.lessThanOrEqual=function(m){return this.compare(m)<=0},p.prototype.greaterThan=function(m){return this.compare(m)>0},p.prototype.greaterThanOrEqual=function(m){return this.compare(m)>=0},p.prototype.compare=function(m){var y=p.fromValue(m);if(this.equals(y))return 0;var b=this.isNegative(),g=y.isNegative();return b&&!g?-1:!b&&g?1:this.subtract(y).isNegative()?-1:1},p.prototype.negate=function(){return this.equals(p.MIN_VALUE)?p.MIN_VALUE:this.not().add(p.ONE)},p.prototype.add=function(m){var y=p.fromValue(m),b=this.high>>>16,g=65535&this.high,_=this.low>>>16,w=65535&this.low,x=y.high>>>16,E=65535&y.high,O=y.low>>>16,T=0,C=0,P=0,R=0;return P+=(R+=w+(65535&y.low))>>>16,R&=65535,C+=(P+=_+O)>>>16,P&=65535,T+=(C+=g+E)>>>16,C&=65535,T+=b+x,T&=65535,p.fromBits(P<<16|R,T<<16|C)},p.prototype.subtract=function(m){var y=p.fromValue(m);return this.add(y.negate())},p.prototype.multiply=function(m){if(this.isZero())return p.ZERO;var y=p.fromValue(m);if(y.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return y.isOdd()?p.MIN_VALUE:p.ZERO;if(y.equals(p.MIN_VALUE))return this.isOdd()?p.MIN_VALUE:p.ZERO;if(this.isNegative())return y.isNegative()?this.negate().multiply(y.negate()):this.negate().multiply(y).negate();if(y.isNegative())return this.multiply(y.negate()).negate();if(this.lessThan(l)&&y.lessThan(l))return p.fromNumber(this.toNumber()*y.toNumber());var b=this.high>>>16,g=65535&this.high,_=this.low>>>16,w=65535&this.low,x=y.high>>>16,E=65535&y.high,O=y.low>>>16,T=65535&y.low,C=0,P=0,R=0,k=0;return R+=(k+=w*T)>>>16,k&=65535,P+=(R+=_*T)>>>16,R&=65535,P+=(R+=w*O)>>>16,R&=65535,C+=(P+=g*T)>>>16,P&=65535,C+=(P+=_*O)>>>16,P&=65535,C+=(P+=w*E)>>>16,P&=65535,C+=b*T+g*O+_*E+w*x,C&=65535,p.fromBits(R<<16|k,C<<16|P)},p.prototype.div=function(m){var y,b,g,_=p.fromValue(m);if(_.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return _.equals(p.ONE)||_.equals(p.NEG_ONE)?p.MIN_VALUE:_.equals(p.MIN_VALUE)?p.ONE:(y=this.shiftRight(1).div(_).shiftLeft(1)).equals(p.ZERO)?_.isNegative()?p.ONE:p.NEG_ONE:(b=this.subtract(_.multiply(y)),g=y.add(b.div(_)));if(_.equals(p.MIN_VALUE))return p.ZERO;if(this.isNegative())return _.isNegative()?this.negate().div(_.negate()):this.negate().div(_).negate();if(_.isNegative())return this.div(_.negate()).negate();for(g=p.ZERO,b=this;b.greaterThanOrEqual(_);){y=Math.max(1,Math.floor(b.toNumber()/_.toNumber()));for(var w=Math.ceil(Math.log(y)/Math.LN2),x=w<=48?1:Math.pow(2,w-48),E=p.fromNumber(y),O=E.multiply(_);O.isNegative()||O.greaterThan(b);)y-=x,O=(E=p.fromNumber(y)).multiply(_);E.isZero()&&(E=p.ONE),g=g.add(E),b=b.subtract(O)}return g},p.prototype.modulo=function(m){var y=p.fromValue(m);return this.subtract(this.div(y).multiply(y))},p.prototype.not=function(){return p.fromBits(~this.low,~this.high)},p.prototype.and=function(m){var y=p.fromValue(m);return p.fromBits(this.low&y.low,this.high&y.high)},p.prototype.or=function(m){var y=p.fromValue(m);return p.fromBits(this.low|y.low,this.high|y.high)},p.prototype.xor=function(m){var y=p.fromValue(m);return p.fromBits(this.low^y.low,this.high^y.high)},p.prototype.shiftLeft=function(m){var y=p.toNumber(m);return(y&=63)==0?p.ZERO:y<32?p.fromBits(this.low<<y,this.high<<y|this.low>>>32-y):p.fromBits(0,this.low<<y-32)},p.prototype.shiftRight=function(m){var y=p.toNumber(m),b=p.toNumber(m);return(y&=63)==0?p.ZERO:b<32?p.fromBits(this.low>>>y|this.high<<32-y,this.high>>y):p.fromBits(this.high>>y-32,this.high>=0?0:-1)},p.isInteger=function(m){return(m==null?void 0:m.__isInteger__)===!0},p.fromInt=function(m){var y;if((m|=0)>=-128&&m<128&&(y=i.get(m))!=null)return y;var b=new p(m,m<0?-1:0);return m>=-128&&m<128&&i.set(m,b),b},p.fromBits=function(m,y){return new p(m,y)},p.fromNumber=function(m){return isNaN(m)||!isFinite(m)?p.ZERO:m<=-u?p.MIN_VALUE:m+1>=u?p.MAX_VALUE:m<0?p.fromNumber(-m).negate():new p(m%s|0,m/s|0)},p.fromString=function(m,y,b){var g,_=(b===void 0?{}:b).strictStringValidation;if(m.length===0)throw(0,n.newError)("number format error: empty string");if(m==="NaN"||m==="Infinity"||m==="+Infinity"||m==="-Infinity")return p.ZERO;if((y=y??10)<2||y>36)throw(0,n.newError)("radix out of range: "+y.toString());if((g=m.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+m);if(g===0)return p.fromString(m.substring(1),y).negate();for(var w=p.fromNumber(Math.pow(y,8)),x=p.ZERO,E=0;E<m.length;E+=8){var O=Math.min(8,m.length-E),T=m.substring(E,E+O),C=parseInt(T,y);if(_===!0&&!a(T,C,y))throw(0,n.newError)('number format error: "'.concat(T,'" is NaN in radix ').concat(y,": ").concat(m));if(O<8){var P=p.fromNumber(Math.pow(y,O));x=x.multiply(P).add(p.fromNumber(C))}else x=(x=x.multiply(w)).add(p.fromNumber(C))}return x},p.fromValue=function(m,y){return y===void 0&&(y={}),m instanceof p?m:typeof m=="number"?(y.ceilFloat===!0&&(m=Math.ceil(m)),p.fromNumber(m)):typeof m=="string"?p.fromString(m,void 0,y):typeof m=="bigint"?p.fromString(m.toString()):new p(m.low,m.high)},p.toNumber=function(m){switch(typeof m){case"number":return m;case"bigint":return Number(m);default:return p.fromValue(m).toNumber()}},p.toString=function(m,y){return p.fromValue(m).toString(y)},p.inSafeRange=function(m){return p.fromValue(m).inSafeRange()},p.ZERO=p.fromInt(0),p.ONE=p.fromInt(1),p.NEG_ONE=p.fromInt(-1),p.MAX_VALUE=p.fromBits(-1,2147483647),p.MIN_VALUE=p.fromBits(0,-2147483648),p.MIN_SAFE_VALUE=p.fromBits(1,-2097152),p.MAX_SAFE_VALUE=p.fromBits(-1,2097151),p.__isInteger__=!0,p})();function a(p,m,y){return!Number.isNaN(p)&&!Number.isNaN(m)&&(function(b,g,_){var w=b.toString(g),x=Math.max(_-w.length,0),E="0".repeat(x);return"".concat(E).concat(w)})(m,y,p.length)===p.toLowerCase()}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var s=4294967296,u=s*s/2,l=o.fromInt(1<<24),c=o.fromValue;e.int=c;var f=o.isInteger;e.isInt=f;var h=o.inSafeRange;e.inSafeRange=h;var d=o.toNumber;e.toNumber=d;var v=o.toString;e.toString=v,e.default=o},3389:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(){}return n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(i){return Promise.resolve([i])},n})();e.default=t},3399:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9238));e.default=n({},o.default)},3413:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3448:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(m){for(var y,b=1,g=arguments.length;b<g;b++)for(var _ in y=arguments[b])Object.prototype.hasOwnProperty.call(y,_)&&(m[_]=y[_]);return m},n.apply(this,arguments)},i=this&&this.__read||function(m,y){var b=typeof Symbol=="function"&&m[Symbol.iterator];if(!b)return m;var g,_,w=b.call(m),x=[];try{for(;(y===void 0||y-- >0)&&!(g=w.next()).done;)x.push(g.value)}catch(E){_={error:E}}finally{try{g&&!g.done&&(b=w.return)&&b.call(w)}finally{if(_)throw _.error}}return x},o=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),s=t(7168),u=t(3321),l=t(5973),c=o(t(6661)),f=a.internal.temporalUtil,h=f.dateToEpochDay,d=f.localDateTimeToEpochSecond,v=f.localTimeToNanoOfDay;function p(m,y,b){if(!y&&!b)return m;var g=function(E){return b?E.toBigInt():E.toNumberOrInfinity()},_=Object.create(Object.getPrototypeOf(m));for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)===!0){var x=m[w];_[w]=(0,a.isInt)(x)?g(x):x}return Object.freeze(_),_}e.default=n(n({},c.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:88,isTypeInstance:function(m){return(0,a.isPoint)(m)&&(m.z===null||m.z===void 0)},toStructure:function(m){return new s.structure.Structure(88,[(0,a.int)(m.srid),m.x,m.y])},fromStructure:function(m){s.structure.verifyStructSize("Point2D",3,m.size);var y=i(m.fields,3),b=y[0],g=y[1],_=y[2];return new a.Point(b,g,_,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:89,isTypeInstance:function(m){return(0,a.isPoint)(m)&&m.z!==null&&m.z!==void 0},toStructure:function(m){return new s.structure.Structure(89,[(0,a.int)(m.srid),m.x,m.y,m.z])},fromStructure:function(m){s.structure.verifyStructSize("Point3D",4,m.size);var y=i(m.fields,4),b=y[0],g=y[1],_=y[2],w=y[3];return new a.Point(b,g,_,w)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:69,isTypeInstance:a.isDuration,toStructure:function(m){var y=(0,a.int)(m.months),b=(0,a.int)(m.days),g=(0,a.int)(m.seconds),_=(0,a.int)(m.nanoseconds);return new s.structure.Structure(69,[y,b,g,_])},fromStructure:function(m){s.structure.verifyStructSize("Duration",4,m.size);var y=i(m.fields,4),b=y[0],g=y[1],_=y[2],w=y[3];return new a.Duration(b,g,_,w)}})},createLocalTimeTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:116,isTypeInstance:a.isLocalTime,toStructure:function(g){var _=v(g.hour,g.minute,g.second,g.nanosecond);return new s.structure.Structure(116,[_])},fromStructure:function(g){s.structure.verifyStructSize("LocalTime",1,g.size);var _=i(g.fields,1)[0];return p((0,l.nanoOfDayToLocalTime)(_),y,b)}})},createTimeTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:84,isTypeInstance:a.isTime,toStructure:function(g){var _=v(g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.timeZoneOffsetSeconds);return new s.structure.Structure(84,[_,w])},fromStructure:function(g){s.structure.verifyStructSize("Time",2,g.size);var _=i(g.fields,2),w=_[0],x=_[1],E=(0,l.nanoOfDayToLocalTime)(w);return p(new a.Time(E.hour,E.minute,E.second,E.nanosecond,x),y,b)}})},createDateTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:68,isTypeInstance:a.isDate,toStructure:function(g){var _=h(g.year,g.month,g.day);return new s.structure.Structure(68,[_])},fromStructure:function(g){s.structure.verifyStructSize("Date",1,g.size);var _=i(g.fields,1)[0];return p((0,l.epochDayToDate)(_),y,b)}})},createLocalDateTimeTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:100,isTypeInstance:a.isLocalDateTime,toStructure:function(g){var _=d(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.nanosecond);return new s.structure.Structure(100,[_,w])},fromStructure:function(g){s.structure.verifyStructSize("LocalDateTime",2,g.size);var _=i(g.fields,2),w=_[0],x=_[1];return p((0,l.epochSecondAndNanoToLocalDateTime)(w,x),y,b)}})},createDateTimeWithZoneIdTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:102,isTypeInstance:function(g){return(0,a.isDateTime)(g)&&g.timeZoneId!=null},toStructure:function(g){var _=d(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.nanosecond),x=g.timeZoneId;return new s.structure.Structure(102,[_,w,x])},fromStructure:function(g){s.structure.verifyStructSize("DateTimeWithZoneId",3,g.size);var _=i(g.fields,3),w=_[0],x=_[1],E=_[2],O=(0,l.epochSecondAndNanoToLocalDateTime)(w,x);return p(new a.DateTime(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond,null,E),y,b)}})},createDateTimeWithOffsetTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:70,isTypeInstance:function(g){return(0,a.isDateTime)(g)&&g.timeZoneId==null},toStructure:function(g){var _=d(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.nanosecond),x=(0,a.int)(g.timeZoneOffsetSeconds);return new s.structure.Structure(70,[_,w,x])},fromStructure:function(g){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,g.size);var _=i(g.fields,3),w=_[0],x=_[1],E=_[2],O=(0,l.epochSecondAndNanoToLocalDateTime)(w,x);return p(new a.DateTime(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond,E,null),y,b)}})}})},3466:function(r,e,t){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=t(9419),a=n(t(3057)),s=t(9305),u=n(t(5742)),l=n(t(1530)),c=n(t(9823)),f=s.internal.constants,h=f.ACCESS_MODE_READ,d=f.ACCESS_MODE_WRITE,v=f.TELEMETRY_APIS,p=s.internal.txConfig.TxConfig,m=(function(){function y(b){var g=b===void 0?{}:b,_=g.session,w=g.config,x=g.log;this._session=_,this._retryLogic=(function(E){var O=E&&E.maxTransactionRetryTime?E.maxTransactionRetryTime:null;return new c.default({maxRetryTimeout:O})})(w),this._log=x}return y.prototype.run=function(b,g,_){var w=this;return new a.default(new i.Observable(function(x){try{x.next(w._session.run(b,g,_)),x.complete()}catch(E){x.error(E)}return function(){}}))},y.prototype.beginTransaction=function(b){return this._beginTransaction(this._session._mode,b,{api:v.UNMANAGED_TRANSACTION})},y.prototype.readTransaction=function(b,g){return this._runTransaction(h,b,g)},y.prototype.writeTransaction=function(b,g){return this._runTransaction(d,b,g)},y.prototype.executeRead=function(b,g){return this._executeInTransaction(h,b,g)},y.prototype.executeWrite=function(b,g){return this._executeInTransaction(d,b,g)},y.prototype._executeInTransaction=function(b,g,_){return this._runTransaction(b,g,_,function(w){return new l.default({run:w.run.bind(w)})})},y.prototype.close=function(){var b=this;return new i.Observable(function(g){b._session.close().then(function(){g.complete()}).catch(function(_){return g.error(_)})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype.lastBookmark=function(){return this.lastBookmarks()},y.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},y.prototype._beginTransaction=function(b,g,_){var w=this,x=p.empty();return g&&(x=new p(g,this._log)),new i.Observable(function(E){try{w._session._beginTransaction(b,x,_).then(function(O){E.next(new u.default(O)),E.complete()}).catch(function(O){return E.error(O)})}catch(O){E.error(O)}return function(){}})},y.prototype._runTransaction=function(b,g,_,w){var x=this;w===void 0&&(w=function(T){return T});var E=p.empty();_&&(E=new p(_));var O={apiTelemetryConfig:{api:v.MANAGED_TRANSACTION,onTelemetrySuccess:function(){O.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,o.mergeMap)(function(){return x._beginTransaction(b,E,O.apiTelemetryConfig)}),(0,o.mergeMap)(function(T){return(0,i.defer)(function(){try{return g(w(T))}catch(C){return(0,i.throwError)(function(){return C})}}).pipe((0,o.catchError)(function(C){return T.rollback().pipe((0,o.concatWith)((0,i.throwError)(function(){return C})))}),(0,o.concatWith)(T.commit()))})))},y})();e.default=m},3473:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=n(t(1048)),s=new(t(8888)).StringDecoder("utf8");e.default={encode:function(u){return new i.default((function(l){return typeof a.default.Buffer.from=="function"?a.default.Buffer.from(l,"utf8"):new a.default.Buffer(l,"utf8")})(u))},decode:function(u,l){if(Object.prototype.hasOwnProperty.call(u,"_buffer"))return(function(c,f){var h=c.position,d=h+f;return c.position=Math.min(d,c.length),c._buffer.toString("utf8",h,d)})(u,l);if(Object.prototype.hasOwnProperty.call(u,"_buffers"))return(function(c,f){return(function(h,d){var v=d,p=h.position;return h._updatePos(Math.min(d,h.length-p)),h._buffers.reduce(function(m,y){if(v<=0)return m;if(p>=y.length)return p-=y.length,"";y._updatePos(p-y.position);var b=Math.min(y.length-p,v),g=y.readSlice(b);return y._updatePos(b),v=Math.max(v-g.length,0),p=0,m+(function(_){return s.write(_._buffer)})(g)},"")+s.end()})(c,f)})(u,l);throw(0,o.newError)("Don't know how to decode strings from '".concat(u,"'"))}}},3488:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(o,a,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(a,s);l&&!("get"in l?!a.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(o,u,l)}:function(o,a,s,u){u===void 0&&(u=s),o[u]=a[s]}),i=this&&this.__exportStar||function(o,a){for(var s in o)s==="default"||Object.prototype.hasOwnProperty.call(a,s)||n(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(t(5837),e)},3545:function(r,e,t){var n=this&&this.__extends||(function(){var y=function(b,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(_[x]=w[x])},y(b,g)};return function(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=b}y(b,g),b.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),i=this&&this.__awaiter||function(y,b,g,_){return new(g||(g=Promise))(function(w,x){function E(C){try{T(_.next(C))}catch(P){x(P)}}function O(C){try{T(_.throw(C))}catch(P){x(P)}}function T(C){var P;C.done?w(C.value):(P=C.value,P instanceof g?P:new g(function(R){R(P)})).then(E,O)}T((_=_.apply(y,b||[])).next())})},o=this&&this.__generator||function(y,b){var g,_,w,x,E={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function O(T){return function(C){return(function(P){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,P[0]&&(E=0)),E;)try{if(g=1,_&&(w=2&P[0]?_.return:P[0]?_.throw||((w=_.return)&&w.call(_),0):_.next)&&!(w=w.call(_,P[1])).done)return w;switch(_=0,w&&(P=[2&P[0],w.value]),P[0]){case 0:case 1:w=P;break;case 4:return E.label++,{value:P[1],done:!1};case 5:E.label++,_=P[1],P=[0];continue;case 7:P=E.ops.pop(),E.trys.pop();continue;default:if(!((w=(w=E.trys).length>0&&w[w.length-1])||P[0]!==6&&P[0]!==2)){E=0;continue}if(P[0]===3&&(!w||P[1]>w[0]&&P[1]<w[3])){E.label=P[1];break}if(P[0]===6&&E.label<w[1]){E.label=w[1],w=P;break}if(w&&E.label<w[2]){E.label=w[2],E.ops.push(P);break}w[2]&&E.ops.pop(),E.trys.pop();continue}P=b.call(y,E)}catch(R){P=[6,R],_=0}finally{g=w=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}})([T,C])}}},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(8987)),u=t(7721),l=t(9305),c=l.internal.constants,f=c.BOLT_PROTOCOL_V3,h=c.BOLT_PROTOCOL_V4_0,d=c.BOLT_PROTOCOL_V4_4,v=c.BOLT_PROTOCOL_V5_1,p=l.error.SERVICE_UNAVAILABLE,m=(function(y){function b(g){var _=g.id,w=g.config,x=g.log,E=g.address,O=g.userAgent,T=g.boltAgent,C=g.authTokenManager,P=g.newPool,R=y.call(this,{id:_,config:w,log:x,userAgent:O,boltAgent:T,authTokenManager:C,newPool:P})||this;return R._address=E,R}return n(b,y),b.prototype.acquireConnection=function(g){var _=g===void 0?{}:g,w=(_.accessMode,_.database),x=(_.bookmarks,_.auth),E=_.forceReAuth;return i(this,void 0,void 0,function(){var O,T,C=this;return o(this,function(P){switch(P.label){case 0:return O=u.ConnectionErrorHandler.create({errorCode:p,handleSecurityError:function(R,k,I){return C._handleSecurityError(R,k,I,w)}}),[4,this._connectionPool.acquire({auth:x,forceReAuth:E},this._address)];case 1:return T=P.sent(),x?[4,this._verifyStickyConnection({auth:x,connection:T,address:this._address})]:[3,3];case 2:return P.sent(),[2,T];case 3:return[2,new u.DelegateConnection(T,O)]}})})},b.prototype._handleSecurityError=function(g,_,w,x){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(_," for database '").concat(x,"' because of an error ").concat(g.code," '").concat(g.message,"'")),y.prototype._handleSecurityError.call(this,g,_,w)},b.prototype._hasProtocolVersion=function(g){return i(this,void 0,void 0,function(){var _,w;return o(this,function(x){switch(x.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return _=x.sent(),w=_.protocol()?_.protocol().version:null,[4,_.close()];case 2:return x.sent(),w?[2,g(w)]:[2,!1]}})})},b.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=h})];case 1:return[2,g.sent()]}})})},b.prototype.getNegotiatedProtocolVersion=function(){var g=this;return new Promise(function(_,w){g._hasProtocolVersion(_).catch(w)})},b.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=f})];case 1:return[2,g.sent()]}})})},b.prototype.supportsUserImpersonation=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=d})];case 1:return[2,g.sent()]}})})},b.prototype.supportsSessionAuth=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=v})];case 1:return[2,g.sent()]}})})},b.prototype.verifyAuthentication=function(g){var _=g.auth;return i(this,void 0,void 0,function(){var w=this;return o(this,function(x){return[2,this._verifyAuthentication({auth:_,getAddress:function(){return w._address}})]})})},b.prototype.verifyConnectivityAndGetServerInfo=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,g.sent()]}})})},b})(s.default);e.default=m},3555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=void 0;var n=t(7843);e.finalize=function(i){return n.operate(function(o,a){try{o.subscribe(a)}finally{a.add(i)}})}},3618:function(r,e,t){var n=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),i=this&&this.__awaiter||function(p,m,y,b){return new(y||(y=Promise))(function(g,_){function w(O){try{E(b.next(O))}catch(T){_(T)}}function x(O){try{E(b.throw(O))}catch(T){_(T)}}function E(O){var T;O.done?g(O.value):(T=O.value,T instanceof y?T:new y(function(C){C(T)})).then(w,x)}E((b=b.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var y,b,g,_,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(E){return function(O){return(function(T){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(w=0)),w;)try{if(y=1,b&&(g=2&T[0]?b.return:T[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,T[1])).done)return g;switch(b=0,g&&(T=[2&T[0],g.value]),T[0]){case 0:case 1:g=T;break;case 4:return w.label++,{value:T[1],done:!1};case 5:w.label++,b=T[1],T=[0];continue;case 7:T=w.ops.pop(),w.trys.pop();continue;default:if(!((g=(g=w.trys).length>0&&g[g.length-1])||T[0]!==6&&T[0]!==2)){w=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){w.label=T[1];break}if(T[0]===6&&w.label<g[1]){w.label=g[1],g=T;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(T);break}g[2]&&w.ops.pop(),w.trys.pop();continue}T=m.call(p,w)}catch(C){T=[6,C],b=0}finally{y=g=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}})([E,O])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var a=t(9691),s=t(6587),u=t(326),l=t(9730),c=t(4883),f=(function(){function p(m){var y=m.mode,b=m.database,g=b===void 0?"":b,_=m.bookmarks,w=m.connectionProvider,x=m.impersonatedUser,E=m.onDatabaseNameResolved,O=m.getConnectionAcquistionBookmarks,T=m.auth,C=m.log;this._mode=y??u.ACCESS_MODE_WRITE,this._closed=!1,this._database=g!=null?(0,s.assertString)(g,"database"):"",this._bookmarks=_??l.Bookmarks.empty(),this._connectionProvider=w,this._impersonatedUser=x,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=E,this._auth=T,this._log=C,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=O??function(){return Promise.resolve(l.Bookmarks.empty())}}return p.prototype.mode=function(){return this._mode},p.prototype.database=function(){return this._database},p.prototype.setDatabase=function(m){this._database=m},p.prototype.bookmarks=function(){return this._bookmarks},p.prototype.connectionProvider=function(){return this._connectionProvider},p.prototype.referenceCount=function(){return this._referenceCount},p.prototype.initializeConnection=function(m){return this._referenceCount!==0||this._connectionProvider==null?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider,m),this._referenceCount++,!0)},p.prototype._createConnectionPromise=function(m,y){return i(this,void 0,void 0,function(){var b,g,_;return o(this,function(w){switch(w.label){case 0:return g=(b=m).acquireConnection,_={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,g.apply(b,[(_.bookmarks=w.sent(),_.impersonatedUser=this._impersonatedUser,_.onDatabaseNameResolved=this._onDatabaseNameResolved,_.auth=this._auth,_.homeDb=y,_)])];case 2:return[2,w.sent()]}})})},p.prototype._getBookmarks=function(){return i(this,void 0,void 0,function(){return o(this,function(m){switch(m.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,m.sent()]}})})},p.prototype.getConnection=function(){return this._connectionPromise},p.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},p.prototype.close=function(m){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(m))},p.prototype.log=function(){return this._log},p.prototype._releaseConnection=function(m){return this._connectionPromise=this._connectionPromise.then(function(y){return y!=null?y.isOpen()&&(y.hasOngoingObservableRequests()||m===!0)?y.resetAndFlush().catch(v).then(function(){return y.release().then(function(){return null})}):y.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},p.prototype._logError=function(m){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(m,". Stacktrace: ").concat(m.stack)),null},p})();e.ConnectionHolder=f;var h=(function(p){function m(y){var b=p.call(this,{mode:y.mode(),database:y.database(),bookmarks:y.bookmarks(),getConnectionAcquistionBookmarks:y._getConnectionAcquistionBookmarks,connectionProvider:y.connectionProvider(),log:y.log()})||this;return b._connectionHolder=y,b}return n(m,p),m.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},m.prototype.getConnection=function(){return this._connectionHolder.getConnection()},m.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},m.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},m})(f);e.ReadOnlyConnectionHolder=h,e.default=h;var d=new((function(p){function m(){return p.call(this,{log:c.Logger.create({})})||this}return n(m,p),m.prototype.mode=function(){},m.prototype.database=function(){},m.prototype.initializeConnection=function(){return!0},m.prototype.getConnection=function(){return i(this,void 0,void 0,function(){return o(this,function(y){switch(y.label){case 0:return[4,Promise.reject((0,a.newError)("This connection holder does not serve connections"))];case 1:return[2,y.sent()]}})})},m.prototype.releaseConnection=function(){return i(this,void 0,void 0,function(){return o(this,function(y){switch(y.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,y.sent()]}})})},m.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(y){switch(y.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,y.sent()]}})})},m})(f));function v(p){return null}e.EMPTY_CONNECTION_HOLDER=d},3638:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinAllInternals=void 0;var n=t(6640),i=t(1251),o=t(2706),a=t(983),s=t(2343);e.joinAllInternals=function(u,l){return o.pipe(s.toArray(),a.mergeMap(function(c){return u(c)}),l?i.mapOneOrManyArgs(l):n.identity)}},3659:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.28.1"},3692:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var n=t(5006),i=t(827);e.asapScheduler=new i.AsapScheduler(n.AsapAction),e.asap=e.asapScheduler},3862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var n=t(2628),i=t(3229);e.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler},3865:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var n=t(8158),i=t(1107),o=t(4917);e.concat=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.concatAll()(o.from(a,i.popScheduler(a)))}},3879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=void 0;var n=t(9445),i=t(7843),o=t(3111);e.switchMap=function(a,s){return i.operate(function(u,l){var c=null,f=0,h=!1,d=function(){return h&&!c&&l.complete()};u.subscribe(o.createOperatorSubscriber(l,function(v){c==null||c.unsubscribe();var p=0,m=f++;n.innerFrom(a(v,m)).subscribe(c=o.createOperatorSubscriber(l,function(y){return l.next(s?s(v,y,m,p++):y)},function(){c=null,d()}))},function(){h=!0,d()}))})}},3951:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=n(t(6245)),o=n(t(2199)),a=n(t(614));e.Channel=i.default,e.HostNameResolver=o.default,e.ClientCertificatesLoader=a.default},3964:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tap=void 0;var n=t(1018),i=t(7843),o=t(3111),a=t(6640);e.tap=function(s,u,l){var c=n.isFunction(s)||u||l?{next:s,error:u,complete:l}:s;return c?i.operate(function(f,h){var d;(d=c.subscribe)===null||d===void 0||d.call(c);var v=!0;f.subscribe(o.createOperatorSubscriber(h,function(p){var m;(m=c.next)===null||m===void 0||m.call(c,p),h.next(p)},function(){var p;v=!1,(p=c.complete)===null||p===void 0||p.call(c),h.complete()},function(p){var m;v=!1,(m=c.error)===null||m===void 0||m.call(c,p),h.error(p)},function(){var p,m;v&&((p=c.unsubscribe)===null||p===void 0||p.call(c)),(m=c.finalize)===null||m===void 0||m.call(c)}))}):a.identity}},3982:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip=void 0;var n=t(783);e.skip=function(i){return n.filter(function(o,a){return i<=a})}},4027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var n=t(93);e.stringify=function(i,o){return JSON.stringify(i,function(a,s){return(0,n.isBrokenObject)(s)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(s)}:typeof s=="bigint"?"".concat(s,"n"):(o==null?void 0:o.sortedElements)!==!0||typeof s!="object"||Array.isArray(s)?(o==null?void 0:o.useCustomToString)!==!0||typeof s!="object"||Array.isArray(s)||typeof s.toString!="function"||s.toString===Object.prototype.toString?s:s==null?void 0:s.toString():Object.keys(s).sort().reduce(function(u,l){return u[l]=s[l],u},{})})}},4092:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timer=void 0;var n=t(4662),i=t(7961),o=t(8613),a=t(1074);e.timer=function(s,u,l){s===void 0&&(s=0),l===void 0&&(l=i.async);var c=-1;return u!=null&&(o.isScheduler(u)?l=u:c=u),new n.Observable(function(f){var h=a.isValidDate(s)?+s-l.now():s;h<0&&(h=0);var d=0;return l.schedule(function(){f.closed||(f.next(d++),0<=c?this.schedule(void 0,c):f.complete())},h)})}},4132:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0});var i=(function(o){function a(s){var u=o.call(this)||this;return u._connection=s,u}return n(a,o),a.prototype.acquireConnection=function(s){var u=s===void 0?{}:s,l=(u.accessMode,u.database,u.bookmarks,this._connection);return this._connection=null,Promise.resolve(l)},a})(t(9305).ConnectionProvider);e.default=i},4151:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(9018)),o=(t(9305),(function(){function a(s){this._routingContext=s}return a.prototype.lookupRoutingTableOnRouter=function(s,u,l,c){var f=this;return s._acquireConnection(function(h){return f._requestRawRoutingTable(h,s,u,l,c).then(function(d){return d.isNull?null:i.default.fromRawRoutingTable(u,l,d)})})},a.prototype._requestRawRoutingTable=function(s,u,l,c,f){var h=this;return new Promise(function(d,v){s.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:l,impersonatedUser:f,sessionContext:{bookmarks:u._lastBookmarks,mode:u._mode,database:u._database,afterComplete:u._onComplete},onCompleted:d,onError:v})})},a})());e.default=o},4209:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iif=void 0;var n=t(9353);e.iif=function(i,o,a){return n.defer(function(){return i()?o:a})}},4212:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.QueueAction=void 0;var i=(function(o){function a(s,u){var l=o.call(this,s,u)||this;return l.scheduler=s,l.work=u,l}return n(a,o),a.prototype.schedule=function(s,u){return u===void 0&&(u=0),u>0?o.prototype.schedule.call(this,s,u):(this.delay=u,this.state=s,this.scheduler.flush(this),this)},a.prototype.execute=function(s,u){return u>0||this.closed?o.prototype.execute.call(this,s,u):this._execute(s,u)},a.prototype.requestAsyncId=function(s,u,l){return l===void 0&&(l=0),l!=null&&l>0||l==null&&this.delay>0?o.prototype.requestAsyncId.call(this,s,u,l):(s.flush(this),0)},a})(t(5267).AsyncAction);e.QueueAction=i},4271:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(m){try{p(c.next(m))}catch(y){h(y)}}function v(m){try{p(c.throw(m))}catch(y){h(y)}}function p(m){var y;m.done?f(m.value):(y=m.value,y instanceof l?y:new l(function(b){b(y)})).then(d,v)}p((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(p){return function(m){return(function(y){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}})([p,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7452),a=(function(){function s(u){var l=u.clientCertificateProvider,c=u.loader;this._clientCertificateProvider=l,this._loader=c||o.ClientCertificatesLoader,this._clientCertificate=null}return s.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var u,l,c=this;return i(this,function(f){switch(f.label){case 0:return(u=this._clientCertificateProvider!=null)?(l=this._clientCertificate==null)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:l=f.sent(),f.label=2;case 2:u=l,f.label=3;case 3:return u&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(h){return c._clientCertificate=h,c._clientCertificate}).catch(function(h){throw c._clientCertificate=null,h})),[2,this._clientCertificate]}})})},s})();e.default=a},4311:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(){}return n.prototype.selectReader=function(i){throw new Error("Abstract function")},n.prototype.selectWriter=function(i){throw new Error("Abstract function")},n})();e.default=t},4325:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2204));e.default=n({},o.default)},4360:r=>{r.exports=function(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}},4408:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=void 0;var n=t(7843),i=t(1983);e.mergeScan=function(o,a,s){return s===void 0&&(s=1/0),n.operate(function(u,l){var c=a;return i.mergeInternals(u,l,function(f,h){return o(c,f,h)},s,function(f){c=f},!1,void 0,function(){return c=null})})}},4440:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.race=void 0;var o=t(8535),a=t(5600);e.race=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.raceWith.apply(void 0,i([],n(o.argsOrArgArray(s))))}},4455:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=n(t(4311));e.LoadBalancingStrategy=i.default;var o=n(t(2533));e.LeastConnectedLoadBalancingStrategy=o.default,e.default=o.default},4461:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.debounce=function(s){return n.operate(function(u,l){var c=!1,f=null,h=null,d=function(){if(h==null||h.unsubscribe(),h=null,c){c=!1;var v=f;f=null,l.next(v)}};u.subscribe(o.createOperatorSubscriber(l,function(v){h==null||h.unsubscribe(),c=!0,f=v,h=o.createOperatorSubscriber(l,d,i.noop),a.innerFrom(s(v)).subscribe(h)},function(){d(),l.complete()},void 0,function(){f=h=null}))})}},4520:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=void 0;var n=t(7057),i=t(783),o=t(4869),a=t(378),s=t(846);e.elementAt=function(u,l){if(u<0)throw new n.ArgumentOutOfRangeError;var c=arguments.length>=2;return function(f){return f.pipe(i.filter(function(h,d){return d===u}),s.take(1),c?a.defaultIfEmpty(l):o.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},4531:function(r,e){var t=this&&this.__awaiter||function(o,a,s,u){return new(s||(s=Promise))(function(l,c){function f(v){try{d(u.next(v))}catch(p){c(p)}}function h(v){try{d(u.throw(v))}catch(p){c(p)}}function d(v){var p;v.done?l(v.value):(p=v.value,p instanceof s?p:new s(function(m){m(p)})).then(f,h)}d((u=u.apply(o,a||[])).next())})},n=this&&this.__generator||function(o,a){var s,u,l,c,f={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(d){return function(v){return(function(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(f=0)),f;)try{if(s=1,u&&(l=2&p[0]?u.return:p[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,p[1])).done)return l;switch(u=0,l&&(p=[2&p[0],l.value]),p[0]){case 0:case 1:l=p;break;case 4:return f.label++,{value:p[1],done:!1};case 5:f.label++,u=p[1],p=[0];continue;case 7:p=f.ops.pop(),f.trys.pop();continue;default:if(!((l=(l=f.trys).length>0&&l[l.length-1])||p[0]!==6&&p[0]!==2)){f=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){f.label=p[1];break}if(p[0]===6&&f.label<l[1]){f.label=l[1],l=p;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(p);break}l[2]&&f.ops.pop(),f.trys.pop();continue}p=a.call(o,f)}catch(m){p=[6,m],u=0}finally{s=l=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}})([d,v])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=(function(){function o(a){var s=a.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=s}return o.prototype.check=function(a){return t(this,void 0,void 0,function(){var s;return n(this,function(u){switch(u.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(a)?[2,!0]:(s=Date.now()-a.idleTimestamp,this._connectionLivenessCheckTimeout===0||s>this._connectionLivenessCheckTimeout?[4,a.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,!0]}})})},Object.defineProperty(o.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),o.prototype._isNewlyCreatedConnection=function(a){return a.authToken==null},o})();e.default=i},4569:function(r,e,t){var n,i=this&&this.__extends||(function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}})(),o=this&&this.__assign||function(){return o=Object.assign||function(u){for(var l,c=1,f=arguments.length;c<f;c++)for(var h in l=arguments[c])Object.prototype.hasOwnProperty.call(l,h)&&(u[h]=l[h]);return u},o.apply(this,arguments)},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var s=(function(u){function l(c){var f=c.connectionHolder,h=c.onClose,d=c.onBookmarks,v=c.onConnection,p=c.reactive,m=c.fetchSize,y=c.impersonatedUser,b=c.highRecordWatermark,g=c.lowRecordWatermark,_=c.notificationFilter,w=c.apiTelemetryConfig,x=c.onDbCallback,E=u.call(this,{connectionHolder:f,onClose:h,onBookmarks:d,onConnection:v,reactive:p,fetchSize:m,impersonatedUser:y,highRecordWatermark:b,lowRecordWatermark:g,notificationFilter:_,apiTelemetryConfig:w})||this;return E[n]="TransactionPromise",E._onDbCallback=x,E}return i(l,u),l.prototype.then=function(c,f){return this._getOrCreateBeginPromise().then(c,f)},l.prototype.catch=function(c){return this._getOrCreateBeginPromise().catch(c)},l.prototype.finally=function(c){return this._getOrCreateBeginPromise().finally(c)},l.prototype._getOrCreateBeginPromise=function(){var c=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(f,h){c._resolve=f,c._reject=h,c._beginError!=null&&h(c._beginError),c._beginMetadata!=null&&f(c._toTransaction())})),this._beginPromise},l.prototype._toTransaction=function(){return o(o({},this),{run:u.prototype.run.bind(this),commit:u.prototype.commit.bind(this),rollback:u.prototype.rollback.bind(this),close:u.prototype.close.bind(this),isOpen:u.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},l.prototype._begin=function(c,f){return u.prototype._begin.call(this,c,f,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},l.prototype._onBeginError=function(c){this._beginError=c,this._reject!=null&&this._reject(c)},l.prototype._onBeginMetadata=function(c){this._beginMetadata=c??{},this._resolve!=null&&this._resolve(this._toTransaction())},l})(a(t(9473)).default);n=Symbol.toStringTag,e.default=s},4596:function(r,e,t){var n=this&&this.__extends||(function(){var v=function(p,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(y[g]=b[g])},v(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=p}v(p,m),p.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2539)),a=i(t(7021)),s=t(9014),u=t(9305),l=t(397),c=i(t(7521)),f=i(t(3321)),h=u.internal.constants.BOLT_PROTOCOL_V4_1,d=(function(v){function p(m,y,b,g,_,w,x){g===void 0&&(g=function(){return null});var E=v.call(this,m,y,b,g,_,w)||this;return E._serversideRouting=x,E}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(y){return y(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(m){var y=this,b=m===void 0?{}:m,g=b.userAgent,_=(b.boltAgent,b.authToken),w=b.notificationFilter,x=b.onError,E=b.onComplete,O=new s.LoginObserver({onError:function(T){return y._onLoginError(T,x)},onCompleted:function(T){return y._onLoginCompleted(T,_,E)}});return(0,l.assertNotificationFilterIsEmpty)(w,this._onProtocolError,O),this.write(a.default.hello(g,_,this._serversideRouting),O,!0),O},p})(o.default);e.default=d},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var n=t(5),i=t(8014),o=t(3327),a=t(2706),s=t(3413),u=t(1018),l=t(9223),c=(function(){function h(d){d&&(this._subscribe=d)}return h.prototype.lift=function(d){var v=new h;return v.source=this,v.operator=d,v},h.prototype.subscribe=function(d,v,p){var m,y=this,b=(m=d)&&m instanceof n.Subscriber||(function(g){return g&&u.isFunction(g.next)&&u.isFunction(g.error)&&u.isFunction(g.complete)})(m)&&i.isSubscription(m)?d:new n.SafeSubscriber(d,v,p);return l.errorContext(function(){var g=y,_=g.operator,w=g.source;b.add(_?_.call(b,w):w?y._subscribe(b):y._trySubscribe(b))}),b},h.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(v){d.error(v)}},h.prototype.forEach=function(d,v){var p=this;return new(v=f(v))(function(m,y){var b=new n.SafeSubscriber({next:function(g){try{d(g)}catch(_){y(_),b.unsubscribe()}},error:y,complete:m});p.subscribe(b)})},h.prototype._subscribe=function(d){var v;return(v=this.source)===null||v===void 0?void 0:v.subscribe(d)},h.prototype[o.observable]=function(){return this},h.prototype.pipe=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return a.pipeFromArray(d)(this)},h.prototype.toPromise=function(d){var v=this;return new(d=f(d))(function(p,m){var y;v.subscribe(function(b){return y=b},function(b){return m(b)},function(){return p(y)})})},h.create=function(d){return new h(d)},h})();function f(h){var d;return(d=h??s.config.Promise)!==null&&d!==void 0?d:Promise}e.Observable=c},4671:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var i=(function(o){function a(s,u){return o.call(this)||this}return n(a,o),a.prototype.schedule=function(s,u){return this},a})(t(8014).Subscription);e.Action=i},4704:r=>{r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},4721:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=void 0;var n=t(7843),i=t(3111);e.skipWhile=function(o){return n.operate(function(a,s){var u=!1,l=0;a.subscribe(i.createOperatorSubscriber(s,function(c){return(u||(u=!o(c,l++)))&&s.next(c)}))})}},4746:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},4753:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(3111);e.exhaustMap=function s(u,l){return l?function(c){return c.pipe(s(function(f,h){return i.innerFrom(u(f,h)).pipe(n.map(function(d,v){return l(f,d,h,v)}))}))}:o.operate(function(c,f){var h=0,d=null,v=!1;c.subscribe(a.createOperatorSubscriber(f,function(p){d||(d=a.createOperatorSubscriber(f,void 0,function(){d=null,v&&f.complete()}),i.innerFrom(u(p,h++)).subscribe(d))},function(){v=!0,!d&&f.complete()}))})}},4780:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.takeUntil=function(s){return n.operate(function(u,l){o.innerFrom(s).subscribe(i.createOperatorSubscriber(l,function(){return l.complete()},a.noop)),!l.closed&&u.subscribe(l)})}},4820:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(y){return(function(b){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,b[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){v.label=b[1];break}if(b[0]===6&&v.label<h[1]){v.label=h[1],h=b;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(b);break}h[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(g){b=[6,g],f=0}finally{c=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([m,y])}}},i=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],f=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9691),s=(function(){function u(l,c,f){this.keys=l,this.length=l.length,this._fields=c,this._fieldLookup=f??(function(h){var d={};return h.forEach(function(v,p){d[v]=p}),d})(l)}return u.prototype.forEach=function(l){var c,f;try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),p=v[0];l(v[1],p,this)}}catch(m){c={error:m}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}},u.prototype.map=function(l){var c,f,h=[];try{for(var d=i(this.entries()),v=d.next();!v.done;v=d.next()){var p=o(v.value,2),m=p[0],y=p[1];h.push(l(y,m,this))}}catch(b){c={error:b}}finally{try{v&&!v.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}return h},u.prototype.entries=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,[this.keys[l],this._fields[l]]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.values=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype[Symbol.iterator]=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.toObject=function(){var l,c,f={};try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),p=v[0],m=v[1];f[p]=m}}catch(y){l={error:y}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}return f},u.prototype.get=function(l){var c;if(typeof l!="number"){if((c=this._fieldLookup[l])===void 0)throw(0,a.newError)("This record has no field with key '".concat(l.toString(),"', available keys are: [")+this.keys.toString()+"].")}else c=l;if(c>this._fields.length-1||c<0)throw(0,a.newError)("This record has no field with index '"+c.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[c]},u.prototype.has=function(l){return typeof l=="number"?l>=0&&l<this._fields.length:this._fieldLookup[l]!==void 0},u})();e.default=s},4862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=void 0;var n=t(7961),i=t(1074),o=t(1554);e.timeoutWith=function(a,s,u){var l,c,f;if(u=u??n.async,i.isValidDate(a)?l=a:typeof a=="number"&&(c=a),!s)throw new TypeError("No observable provided to switch to");if(f=function(){return s},l==null&&c==null)throw new TypeError("No timeout provided.");return o.timeout({first:l,each:c,scheduler:u,with:f})}},4869:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=void 0;var n=t(2823),i=t(7843),o=t(3111);function a(){return new n.EmptyError}e.throwIfEmpty=function(s){return s===void 0&&(s=a),i.operate(function(u,l){var c=!1;u.subscribe(o.createOperatorSubscriber(l,function(f){c=!0,l.next(f)},function(){return c?l.complete():l.error(s())}))})}},4883:function(r,e,t){var n,i=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=t(9691),a="error",s="warn",u="info",l="debug",c=u,f=((n={})[a]=0,n[s]=1,n[u]=2,n[l]=3,n),h=(function(){function p(m,y){this._level=m,this._loggerFunction=y}return p.create=function(m){if((m==null?void 0:m.logging)!=null){var y=m.logging,b=(function(_){if((_==null?void 0:_.level)!=null){var w=_.level,x=f[w];if(x==null&&x!==0)throw(0,o.newError)("Illegal logging level: ".concat(w,". Supported levels are: ").concat(Object.keys(f).toString()));return w}return c})(y),g=(function(_){var w,x;if((_==null?void 0:_.logger)!=null){var E=_.logger;if(E!=null&&typeof E=="function")return E}throw(0,o.newError)("Illegal logger function: ".concat((x=(w=_==null?void 0:_.logger)===null||w===void 0?void 0:w.toString())!==null&&x!==void 0?x:"undefined"))})(y);return new p(b,g)}return this.noOp()},p.noOp=function(){return d},p.prototype.isErrorEnabled=function(){return v(this._level,a)},p.prototype.error=function(m){this.isErrorEnabled()&&this._loggerFunction(a,m)},p.prototype.isWarnEnabled=function(){return v(this._level,s)},p.prototype.warn=function(m){this.isWarnEnabled()&&this._loggerFunction(s,m)},p.prototype.isInfoEnabled=function(){return v(this._level,u)},p.prototype.info=function(m){this.isInfoEnabled()&&this._loggerFunction(u,m)},p.prototype.isDebugEnabled=function(){return v(this._level,l)},p.prototype.debug=function(m){this.isDebugEnabled()&&this._loggerFunction(l,m)},p})();e.Logger=h;var d=new((function(p){function m(){return p.call(this,u,function(y,b){})||this}return i(m,p),m.prototype.isErrorEnabled=function(){return!1},m.prototype.error=function(y){},m.prototype.isWarnEnabled=function(){return!1},m.prototype.warn=function(y){},m.prototype.isInfoEnabled=function(){return!1},m.prototype.info=function(y){},m.prototype.isDebugEnabled=function(){return!1},m.prototype.debug=function(y){},m})(h));function v(p,m){return f[p]>=f[m]}},4912:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=void 0;var n=t(5471);e.pluck=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=i.length;if(a===0)throw new Error("list of properties cannot be empty.");return n.map(function(s){for(var u=s,l=0;l<a;l++){var c=u==null?void 0:u[i[l]];if(c===void 0)return;u=c}return u})}},4917:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.from=void 0;var n=t(1656),i=t(9445);e.from=function(o,a){return a?n.scheduled(o,a):i.innerFrom(o)}},4953:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleReadableStreamLike=void 0;var n=t(854),i=t(9137);e.scheduleReadableStreamLike=function(o,a){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(o),a)}},5006:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsapAction=void 0;var i=t(5267),o=t(6293),a=(function(s){function u(l,c){var f=s.call(this,l,c)||this;return f.scheduler=l,f.work=c,f}return n(u,s),u.prototype.requestAsyncId=function(l,c,f){return f===void 0&&(f=0),f!==null&&f>0?s.prototype.requestAsyncId.call(this,l,c,f):(l.actions.push(this),l._scheduled||(l._scheduled=o.immediateProvider.setImmediate(l.flush.bind(l,void 0))))},u.prototype.recycleAsyncId=function(l,c,f){var h;if(f===void 0&&(f=0),f!=null?f>0:this.delay>0)return s.prototype.recycleAsyncId.call(this,l,c,f);var d=l.actions;c!=null&&((h=d[d.length-1])===null||h===void 0?void 0:h.id)!==c&&(o.immediateProvider.clearImmediate(c),l._scheduled===c&&(l._scheduled=void 0))},u})(i.AsyncAction);e.AsapAction=a},5022:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(g,_,w,x){x===void 0&&(x=w);var E=Object.getOwnPropertyDescriptor(_,w);E&&!("get"in E?!_.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(g,x,E)}:function(g,_,w,x){x===void 0&&(x=w),g[x]=_[w]}),i=this&&this.__setModuleDefault||(Object.create?function(g,_){Object.defineProperty(g,"default",{enumerable:!0,value:_})}:function(g,_){g.default=_}),o=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var _={};if(g!=null)for(var w in g)w!=="default"&&Object.prototype.hasOwnProperty.call(g,w)&&n(_,g,w);return i(_,g),_};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var a=o(t(3371)),s=t(9691),u=t(6587),l=(function(){function g(_,w){this._minNumber=_,this._maxNumber=w,this._minInteger=(0,a.int)(_),this._maxInteger=(0,a.int)(w)}return g.prototype.contains=function(_){if((0,a.isInt)(_)&&_ instanceof a.default)return _.greaterThanOrEqual(this._minInteger)&&_.lessThanOrEqual(this._maxInteger);if(typeof _=="bigint"){var w=(0,a.int)(_);return w.greaterThanOrEqual(this._minInteger)&&w.lessThanOrEqual(this._maxInteger)}return _>=this._minNumber&&_<=this._maxNumber},g.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},g})();function c(g,_,w){g=(0,a.int)(g),_=(0,a.int)(_),w=(0,a.int)(w);var x=g.multiply(365);return x=(x=(x=g.greaterThanOrEqual(0)?x.add(g.add(3).div(4).subtract(g.add(99).div(100)).add(g.add(399).div(400))):x.subtract(g.div(-4).subtract(g.div(-100)).add(g.div(-400)))).add(_.multiply(367).subtract(362).div(12))).add(w.subtract(1)),_.greaterThan(2)&&(x=x.subtract(1),(function(E){return!(!(E=(0,a.int)(E)).modulo(4).equals(0)||E.modulo(100).equals(0)&&!E.modulo(400).equals(0))})(g)||(x=x.subtract(1))),x.subtract(e.DAYS_0000_TO_1970)}function f(g,_){return g===1?_%400==0||_%4==0&&_%100!=0?29:28:[0,2,4,6,7,9,11].includes(g)?31:30}e.YEAR_RANGE=new l(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new l(1,12),e.DAY_OF_MONTH_RANGE=new l(1,31),e.HOUR_OF_DAY_RANGE=new l(0,23),e.MINUTE_OF_HOUR_RANGE=new l(0,59),e.SECOND_OF_MINUTE_RANGE=new l(0,59),e.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(g,_){return(0,a.int)(g).add(p(_,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(g){return m(g,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(g,_,w,x){g=(0,a.int)(g),_=(0,a.int)(_),w=(0,a.int)(w),x=(0,a.int)(x);var E=g.multiply(e.NANOS_PER_HOUR);return(E=(E=E.add(_.multiply(e.NANOS_PER_MINUTE))).add(w.multiply(e.NANOS_PER_SECOND))).add(x)},e.localDateTimeToEpochSecond=function(g,_,w,x,E,O,T){var C=c(g,_,w),P=(function(R,k,I){R=(0,a.int)(R),k=(0,a.int)(k),I=(0,a.int)(I);var M=R.multiply(e.SECONDS_PER_HOUR);return(M=M.add(k.multiply(e.SECONDS_PER_MINUTE))).add(I)})(x,E,O);return C.multiply(e.SECONDS_PER_DAY).add(P)},e.dateToEpochDay=c,e.durationToIsoString=function(g,_,w,x){var E=b(g),O=b(_),T=(function(C,P){var R,k;C=(0,a.int)(C),P=(0,a.int)(P);var I=C.isNegative(),M=P.greaterThan(0);return R=I&&M?C.equals(-1)?"-0":C.add(1).toString():C.toString(),M&&(k=y(I?P.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):P.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),k!=null?R+k:R})(w,x);return"P".concat(E,"M").concat(O,"DT").concat(T,"S")},e.timeToIsoString=function(g,_,w,x){var E=b(g,2),O=b(_,2),T=b(w,2),C=y(x);return"".concat(E,":").concat(O,":").concat(T).concat(C)},e.timeZoneOffsetToIsoString=function(g){if((g=(0,a.int)(g)).equals(0))return"Z";var _=g.isNegative();_&&(g=g.multiply(-1));var w=_?"-":"+",x=b(g.div(e.SECONDS_PER_HOUR),2),E=b(g.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),O=g.modulo(e.SECONDS_PER_MINUTE),T=O.equals(0)?null:b(O,2);return T!=null?"".concat(w).concat(x,":").concat(E,":").concat(T):"".concat(w).concat(x,":").concat(E)},e.dateToIsoString=function(g,_,w){var x=(function(T){var C=(0,a.int)(T);return C.isNegative()||C.greaterThan(9999)?b(C,6,{usePositiveSign:!0}):b(C,4)})(g),E=b(_,2),O=b(w,2);return"".concat(x,"-").concat(E,"-").concat(O)},e.isoStringToStandardDate=function(g){return new Date(g)},e.toStandardDate=function(g){return new Date(g)},e.newDate=function(g){return new Date(g)},e.totalNanoseconds=function(g,_){return(function(w,x){return w instanceof a.default?w.add(x):typeof w=="bigint"?w+BigInt(x):w+x})(_=_??0,g.getMilliseconds()*e.NANOS_PER_MILLISECOND)},e.timeZoneOffsetInSeconds=function(g){var _=g.getSeconds()-g.getUTCSeconds(),w=g.getMinutes()-g.getUTCMinutes(),x=g.getHours()-g.getUTCHours(),E=(function(O){return O.getMonth()===O.getUTCMonth()?O.getDate()-O.getUTCDate():O.getFullYear()>O.getUTCFullYear()||O.getMonth()>O.getUTCMonth()&&O.getFullYear()===O.getUTCFullYear()?O.getDate()+f(O.getUTCMonth(),O.getUTCFullYear())-O.getUTCDate():O.getDate()-(O.getUTCDate()+f(O.getMonth(),O.getFullYear()))})(g);return x*e.SECONDS_PER_HOUR+w*e.SECONDS_PER_MINUTE+_+E*e.SECONDS_PER_DAY},e.assertValidYear=function(g){return v(g,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(g){return v(g,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(g){return v(g,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(g){return v(g,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(g){return v(g,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(g){return v(g,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(g){return v(g,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var h=new Map,d=function(g,_){return(0,s.newError)("".concat(_,' is expected to be a valid ZoneId but was: "').concat(g,'"'))};function v(g,_,w){if((0,u.assertNumberOrInteger)(g,w),!_.contains(g))throw(0,s.newError)("".concat(w," is expected to be in range ").concat(_.toString()," but was: ").concat(g.toString()));return g}function p(g,_){g=(0,a.int)(g),_=(0,a.int)(_);var w=g.div(_);return g.isPositive()!==_.isPositive()&&w.multiply(_).notEquals(g)&&(w=w.subtract(1)),w}function m(g,_){return g=(0,a.int)(g),_=(0,a.int)(_),g.subtract(p(g,_).multiply(_))}function y(g){return(g=(0,a.int)(g)).equals(0)?"":"."+b(g,9)}function b(g,_,w){var x=(g=(0,a.int)(g)).isNegative();x&&(g=g.negate());var E=g.toString();if(_!=null)for(;E.length<_;)E="0"+E;return x?"-"+E:(w==null?void 0:w.usePositiveSign)===!0?"+"+E:E}e.assertValidZoneId=function(g,_){var w=h.get(_);if(w!==!0){if(w===!1)throw d(_,g);try{Intl.DateTimeFormat(void 0,{timeZone:_}),h.set(_,!0)}catch{throw h.set(_,!1),d(_,g)}}},e.floorDiv=p,e.floorMod=m},5045:function(r,e,t){var n=this&&this.__read||function(v,p){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var y,b,g=m.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=g.next()).done;)_.push(y.value)}catch(w){b={error:w}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(b)throw b.error}}return _},i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7168),a=t(9305),s=i(t(7518)),u=t(5973),l=t(6492),c=a.internal.temporalUtil.localDateTimeToEpochSecond,f=new Map;function h(v,p,m){var y=(function(w){if(!f.has(w)){var x=new Intl.DateTimeFormat("en-US",{timeZone:w,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});f.set(w,x)}return f.get(w)})(v),b=(0,a.int)(p).multiply(1e3).add((0,a.int)(m).div(1e6)).toNumber(),g=y.formatToParts(b).reduce(function(w,x){return x.type==="era"?w.adjustEra=x.value.toUpperCase()==="B"?function(E){return E.subtract(1).negate()}:l.identity:x.type==="hour"?w.hour=(0,a.int)(x.value).modulo(24):x.type!=="literal"&&(w[x.type]=(0,a.int)(x.value)),w},{});g.year=g.adjustEra(g.year);var _=c(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond);return g.timeZoneOffsetSeconds=_.subtract(p),g.hour=g.hour.modulo(24),g}function d(v,p,m){if(!p&&!m)return v;var y=function(w){return m?w.toBigInt():w.toNumberOrInfinity()},b=Object.create(Object.getPrototypeOf(v));for(var g in v)if(Object.prototype.hasOwnProperty.call(v,g)===!0){var _=v[g];b[g]=(0,a.isInt)(_)?y(_):_}return Object.freeze(b),b}e.default={createDateTimeWithZoneIdTransformer:function(v,p){var m=v.disableLosslessIntegers,y=v.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(v).extendsWith({signature:105,fromStructure:function(b){o.structure.verifyStructSize("DateTimeWithZoneId",3,b.size);var g=n(b.fields,3),_=g[0],w=g[1],x=g[2],E=h(x,_,w);return d(new a.DateTime(E.year,E.month,E.day,E.hour,E.minute,E.second,(0,a.int)(w),E.timeZoneOffsetSeconds,x),m,y)},toStructure:function(b){var g=c(b.year,b.month,b.day,b.hour,b.minute,b.second,b.nanosecond),_=b.timeZoneOffsetSeconds!=null?b.timeZoneOffsetSeconds:(function(O,T,C){var P=h(O,T,C),R=c(P.year,P.month,P.day,P.hour,P.minute,P.second,C).subtract(T),k=T.subtract(R),I=h(O,k,C);return c(I.year,I.month,I.day,I.hour,I.minute,I.second,C).subtract(k)})(b.timeZoneId,g,b.nanosecond);b.timeZoneOffsetSeconds==null&&p.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var w=g.subtract(_),x=(0,a.int)(b.nanosecond),E=b.timeZoneId;return new o.structure.Structure(105,[w,x,E])}})},createDateTimeWithOffsetTransformer:function(v){var p=v.disableLosslessIntegers,m=v.useBigInt;return s.default.createDateTimeWithOffsetTransformer(v).extendsWith({signature:73,toStructure:function(y){var b=c(y.year,y.month,y.day,y.hour,y.minute,y.second,y.nanosecond),g=(0,a.int)(y.nanosecond),_=(0,a.int)(y.timeZoneOffsetSeconds),w=b.subtract(_);return new o.structure.Structure(73,[w,g,_])},fromStructure:function(y){o.structure.verifyStructSize("DateTimeWithZoneOffset",3,y.size);var b=n(y.fields,3),g=b[0],_=b[1],w=b[2],x=(0,a.int)(g).add(w),E=(0,u.epochSecondAndNanoToLocalDateTime)(x,_);return d(new a.DateTime(E.year,E.month,E.day,E.hour,E.minute,E.second,E.nanosecond,w,null),p,m)}})}}},5184:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=void 0;var n=t(7110),i=t(7843),o=t(3111);e.observeOn=function(a,s){return s===void 0&&(s=0),i.operate(function(u,l){u.subscribe(o.createOperatorSubscriber(l,function(c){return n.executeSchedule(l,a,function(){return l.next(c)},s)},function(){return n.executeSchedule(l,a,function(){return l.complete()},s)},function(c){return n.executeSchedule(l,a,function(){return l.error(c)},s)}))})}},5250:function(r,e,t){var n;r=t.nmd(r),(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,f=9007199254740991,h=NaN,d=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],p="[object Arguments]",m="[object Array]",y="[object Boolean]",b="[object Date]",g="[object Error]",_="[object Function]",w="[object GeneratorFunction]",x="[object Map]",E="[object Number]",O="[object Object]",T="[object Promise]",C="[object RegExp]",P="[object Set]",R="[object String]",k="[object Symbol]",I="[object WeakMap]",M="[object ArrayBuffer]",j="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",z="[object Int8Array]",V="[object Int16Array]",G="[object Int32Array]",Y="[object Uint8Array]",ie="[object Uint8ClampedArray]",W="[object Uint16Array]",H="[object Uint32Array]",Q=/\b__p \+= '';/g,J=/\b(__p \+=) '' \+/g,ne=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,Z=RegExp(K.source),ae=RegExp($.source),se=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,ge=/<%=([\s\S]+?)%>/g,ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,N=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B=/[\\^$.*+?()[\]{}|]/g,q=RegExp(B.source),re=/^\s+/,ue=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,de=/\{\n\/\* \[wrapped with (.+)\] \*/,xe=/,? & /,ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xe=/[()=,{}\[\]\/\s]/,ze=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Le=/\w*$/,Ie=/^[-+]0x[0-9a-f]+$/i,Ee=/^0b[01]+$/i,ee=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oe=/($^)/,Ve=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",We="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Be="\\u2700-\\u27bf",Ye="a-z\\xdf-\\xf6\\xf8-\\xff",ot="A-Z\\xc0-\\xd6\\xd8-\\xde",et="\\ufe0e\\ufe0f",Ue="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ft="["+Se+"]",st="["+Ue+"]",Pt="["+We+"]",Ct="\\d+",bt="["+Be+"]",vt="["+Ye+"]",It="[^"+Se+Ue+Ct+Be+Ye+ot+"]",Dt="\\ud83c[\\udffb-\\udfff]",er="[^"+Se+"]",mr="(?:\\ud83c[\\udde6-\\uddff]){2}",pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Nt="["+ot+"]",or="\\u200d",hr="(?:"+vt+"|"+It+")",Ar="(?:"+Nt+"|"+It+")",Sr="(?:['](?:d|ll|m|re|s|t|ve))?",Yt="(?:['](?:D|LL|M|RE|S|T|VE))?",Xt="(?:"+Pt+"|"+Dt+")?",jt="["+et+"]?",In=jt+Xt+"(?:"+or+"(?:"+[er,mr,pt].join("|")+")"+jt+Xt+")*",zr="(?:"+[bt,mr,pt].join("|")+")"+In,Ro="(?:"+[er+Pt+"?",Pt,mr,pt,ft].join("|")+")",Aa=RegExp("[']","g"),Ra=RegExp(Pt,"g"),to=RegExp(Dt+"(?="+Dt+")|"+Ro+In,"g"),ka=RegExp([Nt+"?"+vt+"+"+Sr+"(?="+[st,Nt,"$"].join("|")+")",Ar+"+"+Yt+"(?="+[st,Nt+hr,"$"].join("|")+")",Nt+"?"+hr+"+"+Sr,Nt+"+"+Yt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ct,zr].join("|"),"g"),Ia=RegExp("["+or+Se+We+et+"]"),Da=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ma=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pi=-1,Ft={};Ft[L]=Ft[F]=Ft[z]=Ft[V]=Ft[G]=Ft[Y]=Ft[ie]=Ft[W]=Ft[H]=!0,Ft[p]=Ft[m]=Ft[M]=Ft[y]=Ft[j]=Ft[b]=Ft[g]=Ft[_]=Ft[x]=Ft[E]=Ft[O]=Ft[C]=Ft[P]=Ft[R]=Ft[I]=!1;var Mt={};Mt[p]=Mt[m]=Mt[M]=Mt[j]=Mt[y]=Mt[b]=Mt[L]=Mt[F]=Mt[z]=Mt[V]=Mt[G]=Mt[x]=Mt[E]=Mt[O]=Mt[C]=Mt[P]=Mt[R]=Mt[k]=Mt[Y]=Mt[ie]=Mt[W]=Mt[H]=!0,Mt[g]=Mt[_]=Mt[I]=!1;var ko={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Io=parseFloat,Xu=parseInt,on=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,Na=typeof self=="object"&&self&&self.Object===Object&&self,Er=on||Na||Function("return this")(),Ri=e&&!e.nodeType&&e,Ir=Ri&&r&&!r.nodeType&&r,Ns=Ir&&Ir.exports===Ri,Ls=Ns&&on.process,an=(function(){try{return Ir&&Ir.require&&Ir.require("util").types||Ls&&Ls.binding&&Ls.binding("util")}catch{}})(),vf=an&&an.isArrayBuffer,pf=an&&an.isDate,gf=an&&an.isMap,yf=an&&an.isRegExp,mf=an&&an.isSet,bf=an&&an.isTypedArray;function pn(_e,Pe,Re){switch(Re.length){case 0:return _e.call(Pe);case 1:return _e.call(Pe,Re[0]);case 2:return _e.call(Pe,Re[0],Re[1]);case 3:return _e.call(Pe,Re[0],Re[1],Re[2])}return _e.apply(Pe,Re)}function qv(_e,Pe,Re,He){for(var _t=-1,Lt=_e==null?0:_e.length;++_t<Lt;){var Dr=_e[_t];Pe(He,Dr,Re(Dr),_e)}return He}function Dn(_e,Pe){for(var Re=-1,He=_e==null?0:_e.length;++Re<He&&Pe(_e[Re],Re,_e)!==!1;);return _e}function Wv(_e,Pe){for(var Re=_e==null?0:_e.length;Re--&&Pe(_e[Re],Re,_e)!==!1;);return _e}function _f(_e,Pe){for(var Re=-1,He=_e==null?0:_e.length;++Re<He;)if(!Pe(_e[Re],Re,_e))return!1;return!0}function ki(_e,Pe){for(var Re=-1,He=_e==null?0:_e.length,_t=0,Lt=[];++Re<He;){var Dr=_e[Re];Pe(Dr,Re,_e)&&(Lt[_t++]=Dr)}return Lt}function js(_e,Pe){return!(_e==null||!_e.length)&&Do(_e,Pe,0)>-1}function $u(_e,Pe,Re){for(var He=-1,_t=_e==null?0:_e.length;++He<_t;)if(Re(Pe,_e[He]))return!0;return!1}function ar(_e,Pe){for(var Re=-1,He=_e==null?0:_e.length,_t=Array(He);++Re<He;)_t[Re]=Pe(_e[Re],Re,_e);return _t}function Ii(_e,Pe){for(var Re=-1,He=Pe.length,_t=_e.length;++Re<He;)_e[_t+Re]=Pe[Re];return _e}function Ku(_e,Pe,Re,He){var _t=-1,Lt=_e==null?0:_e.length;for(He&&Lt&&(Re=_e[++_t]);++_t<Lt;)Re=Pe(Re,_e[_t],_t,_e);return Re}function Hv(_e,Pe,Re,He){var _t=_e==null?0:_e.length;for(He&&_t&&(Re=_e[--_t]);_t--;)Re=Pe(Re,_e[_t],_t,_e);return Re}function Zu(_e,Pe){for(var Re=-1,He=_e==null?0:_e.length;++Re<He;)if(Pe(_e[Re],Re,_e))return!0;return!1}var Yv=Qu("length");function wf(_e,Pe,Re){var He;return Re(_e,function(_t,Lt,Dr){if(Pe(_t,Lt,Dr))return He=Lt,!1}),He}function Fs(_e,Pe,Re,He){for(var _t=_e.length,Lt=Re+(He?1:-1);He?Lt--:++Lt<_t;)if(Pe(_e[Lt],Lt,_e))return Lt;return-1}function Do(_e,Pe,Re){return Pe==Pe?(function(He,_t,Lt){for(var Dr=Lt-1,Mi=He.length;++Dr<Mi;)if(He[Dr]===_t)return Dr;return-1})(_e,Pe,Re):Fs(_e,Ef,Re)}function Xv(_e,Pe,Re,He){for(var _t=Re-1,Lt=_e.length;++_t<Lt;)if(He(_e[_t],Pe))return _t;return-1}function Ef(_e){return _e!=_e}function Of(_e,Pe){var Re=_e==null?0:_e.length;return Re?el(_e,Pe)/Re:h}function Qu(_e){return function(Pe){return Pe==null?i:Pe[_e]}}function Ju(_e){return function(Pe){return _e==null?i:_e[Pe]}}function xf(_e,Pe,Re,He,_t){return _t(_e,function(Lt,Dr,Mi){Re=He?(He=!1,Lt):Pe(Re,Lt,Dr,Mi)}),Re}function el(_e,Pe){for(var Re,He=-1,_t=_e.length;++He<_t;){var Lt=Pe(_e[He]);Lt!==i&&(Re=Re===i?Lt:Re+Lt)}return Re}function tl(_e,Pe){for(var Re=-1,He=Array(_e);++Re<_e;)He[Re]=Pe(Re);return He}function Sf(_e){return _e&&_e.slice(0,ro(_e)+1).replace(re,"")}function gn(_e){return function(Pe){return _e(Pe)}}function rl(_e,Pe){return ar(Pe,function(Re){return _e[Re]})}function La(_e,Pe){return _e.has(Pe)}function Tf(_e,Pe){for(var Re=-1,He=_e.length;++Re<He&&Do(Pe,_e[Re],0)>-1;);return Re}function Cf(_e,Pe){for(var Re=_e.length;Re--&&Do(Pe,_e[Re],0)>-1;);return Re}var $v=Ju({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Kv=Ju({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zv(_e){return"\\"+ko[_e]}function Mo(_e){return Ia.test(_e)}function nl(_e){var Pe=-1,Re=Array(_e.size);return _e.forEach(function(He,_t){Re[++Pe]=[_t,He]}),Re}function Pf(_e,Pe){return function(Re){return _e(Pe(Re))}}function Di(_e,Pe){for(var Re=-1,He=_e.length,_t=0,Lt=[];++Re<He;){var Dr=_e[Re];Dr!==Pe&&Dr!==s||(_e[Re]=s,Lt[_t++]=Re)}return Lt}function Bs(_e){var Pe=-1,Re=Array(_e.size);return _e.forEach(function(He){Re[++Pe]=He}),Re}function Qv(_e){var Pe=-1,Re=Array(_e.size);return _e.forEach(function(He){Re[++Pe]=[He,He]}),Re}function No(_e){return Mo(_e)?(function(Pe){for(var Re=to.lastIndex=0;to.test(Pe);)++Re;return Re})(_e):Yv(_e)}function Vr(_e){return Mo(_e)?(function(Pe){return Pe.match(to)||[]})(_e):(function(Pe){return Pe.split("")})(_e)}function ro(_e){for(var Pe=_e.length;Pe--&&ue.test(_e.charAt(Pe)););return Pe}var gi=Ju({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Qn=(function _e(Pe){var Re,He=(Pe=Pe==null?Er:Qn.defaults(Er.Object(),Pe,Qn.pick(Er,Ma))).Array,_t=Pe.Date,Lt=Pe.Error,Dr=Pe.Function,Mi=Pe.Math,lr=Pe.Object,Jv=Pe.RegExp,nk=Pe.String,Jn=Pe.TypeError,Af=He.prototype,ik=Dr.prototype,Us=lr.prototype,Rf=Pe["__core-js_shared__"],kf=ik.toString,Jt=Us.hasOwnProperty,ok=0,I_=(Re=/[^.]+$/.exec(Rf&&Rf.keys&&Rf.keys.IE_PROTO||""))?"Symbol(src)_1."+Re:"",If=Us.toString,ak=kf.call(lr),sk=Er._,uk=Jv("^"+kf.call(Jt).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Df=Ns?Pe.Buffer:i,Lo=Pe.Symbol,Mf=Pe.Uint8Array,D_=Df?Df.allocUnsafe:i,Nf=Pf(lr.getPrototypeOf,lr),M_=lr.create,N_=Us.propertyIsEnumerable,Lf=Af.splice,L_=Lo?Lo.isConcatSpreadable:i,il=Lo?Lo.iterator:i,ja=Lo?Lo.toStringTag:i,jf=(function(){try{var S=Va(lr,"defineProperty");return S({},"",{}),S}catch{}})(),lk=Pe.clearTimeout!==Er.clearTimeout&&Pe.clearTimeout,ck=_t&&_t.now!==Er.Date.now&&_t.now,fk=Pe.setTimeout!==Er.setTimeout&&Pe.setTimeout,Ff=Mi.ceil,Bf=Mi.floor,ep=lr.getOwnPropertySymbols,hk=Df?Df.isBuffer:i,j_=Pe.isFinite,dk=Af.join,vk=Pf(lr.keys,lr),Mr=Mi.max,sn=Mi.min,pk=_t.now,gk=Pe.parseInt,F_=Mi.random,yk=Af.reverse,tp=Va(Pe,"DataView"),ol=Va(Pe,"Map"),rp=Va(Pe,"Promise"),zs=Va(Pe,"Set"),al=Va(Pe,"WeakMap"),sl=Va(lr,"create"),Uf=al&&new al,Vs={},mk=Ga(tp),bk=Ga(ol),_k=Ga(rp),wk=Ga(zs),Ek=Ga(al),zf=Lo?Lo.prototype:i,ul=zf?zf.valueOf:i,B_=zf?zf.toString:i;function te(S){if(Or(S)&&!Et(S)&&!(S instanceof At)){if(S instanceof ei)return S;if(Jt.call(S,"__wrapped__"))return Uw(S)}return new ei(S)}var Gs=(function(){function S(){}return function(A){if(!br(A))return{};if(M_)return M_(A);S.prototype=A;var D=new S;return S.prototype=i,D}})();function Vf(){}function ei(S,A){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=i}function At(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Fa(S){var A=-1,D=S==null?0:S.length;for(this.clear();++A<D;){var U=S[A];this.set(U[0],U[1])}}function no(S){var A=-1,D=S==null?0:S.length;for(this.clear();++A<D;){var U=S[A];this.set(U[0],U[1])}}function io(S){var A=-1,D=S==null?0:S.length;for(this.clear();++A<D;){var U=S[A];this.set(U[0],U[1])}}function Ba(S){var A=-1,D=S==null?0:S.length;for(this.__data__=new io;++A<D;)this.add(S[A])}function yi(S){var A=this.__data__=new no(S);this.size=A.size}function U_(S,A){var D=Et(S),U=!D&&qa(S),X=!D&&!U&&zo(S),oe=!D&&!U&&!X&&Ys(S),ce=D||U||X||oe,he=ce?tl(S.length,nk):[],me=he.length;for(var Te in S)!A&&!Jt.call(S,Te)||ce&&(Te=="length"||X&&(Te=="offset"||Te=="parent")||oe&&(Te=="buffer"||Te=="byteLength"||Te=="byteOffset")||uo(Te,me))||he.push(Te);return he}function z_(S){var A=S.length;return A?S[dp(0,A-1)]:i}function Ok(S,A){return rh(Mn(S),Ua(A,0,S.length))}function xk(S){return rh(Mn(S))}function np(S,A,D){(D!==i&&!mi(S[A],D)||D===i&&!(A in S))&&oo(S,A,D)}function ll(S,A,D){var U=S[A];Jt.call(S,A)&&mi(U,D)&&(D!==i||A in S)||oo(S,A,D)}function Gf(S,A){for(var D=S.length;D--;)if(mi(S[D][0],A))return D;return-1}function Sk(S,A,D,U){return jo(S,function(X,oe,ce){A(U,X,D(X),ce)}),U}function V_(S,A){return S&&Li(A,Gr(A),S)}function oo(S,A,D){A=="__proto__"&&jf?jf(S,A,{configurable:!0,enumerable:!0,value:D,writable:!0}):S[A]=D}function ip(S,A){for(var D=-1,U=A.length,X=He(U),oe=S==null;++D<U;)X[D]=oe?i:Up(S,A[D]);return X}function Ua(S,A,D){return S==S&&(D!==i&&(S=S<=D?S:D),A!==i&&(S=S>=A?S:A)),S}function ti(S,A,D,U,X,oe){var ce,he=1&A,me=2&A,Te=4&A;if(D&&(ce=X?D(S,U,X,oe):D(S)),ce!==i)return ce;if(!br(S))return S;var Ce=Et(S);if(Ce){if(ce=(function(Ae){var Ne=Ae.length,at=new Ae.constructor(Ne);return Ne&&typeof Ae[0]=="string"&&Jt.call(Ae,"index")&&(at.index=Ae.index,at.input=Ae.input),at})(S),!he)return Mn(S,ce)}else{var De=un(S),$e=De==_||De==w;if(zo(S))return hw(S,he);if(De==O||De==p||$e&&!X){if(ce=me||$e?{}:kw(S),!he)return me?(function(Ae,Ne){return Li(Ae,Aw(Ae),Ne)})(S,(function(Ae,Ne){return Ae&&Li(Ne,Ln(Ne),Ae)})(ce,S)):(function(Ae,Ne){return Li(Ae,Cp(Ae),Ne)})(S,V_(ce,S))}else{if(!Mt[De])return X?S:{};ce=(function(Ae,Ne,at){var qe,wt=Ae.constructor;switch(Ne){case M:return _p(Ae);case y:case b:return new wt(+Ae);case j:return(function(yt,Gt){var nt=Gt?_p(yt.buffer):yt.buffer;return new yt.constructor(nt,yt.byteOffset,yt.byteLength)})(Ae,at);case L:case F:case z:case V:case G:case Y:case ie:case W:case H:return dw(Ae,at);case x:return new wt;case E:case R:return new wt(Ae);case C:return(function(yt){var Gt=new yt.constructor(yt.source,Le.exec(yt));return Gt.lastIndex=yt.lastIndex,Gt})(Ae);case P:return new wt;case k:return qe=Ae,ul?lr(ul.call(qe)):{}}})(S,De,he)}}oe||(oe=new yi);var Ze=oe.get(S);if(Ze)return Ze;oe.set(S,ce),i1(S)?S.forEach(function(Ae){ce.add(ti(Ae,A,D,Ae,S,oe))}):r1(S)&&S.forEach(function(Ae,Ne){ce.set(Ne,ti(Ae,A,D,Ne,S,oe))});var ut=Ce?i:(Te?me?xp:Op:me?Ln:Gr)(S);return Dn(ut||S,function(Ae,Ne){ut&&(Ae=S[Ne=Ae]),ll(ce,Ne,ti(Ae,A,D,Ne,S,oe))}),ce}function G_(S,A,D){var U=D.length;if(S==null)return!U;for(S=lr(S);U--;){var X=D[U],oe=A[X],ce=S[X];if(ce===i&&!(X in S)||!oe(ce))return!1}return!0}function q_(S,A,D){if(typeof S!="function")throw new Jn(o);return gl(function(){S.apply(i,D)},A)}function cl(S,A,D,U){var X=-1,oe=js,ce=!0,he=S.length,me=[],Te=A.length;if(!he)return me;D&&(A=ar(A,gn(D))),U?(oe=$u,ce=!1):A.length>=200&&(oe=La,ce=!1,A=new Ba(A));e:for(;++X<he;){var Ce=S[X],De=D==null?Ce:D(Ce);if(Ce=U||Ce!==0?Ce:0,ce&&De==De){for(var $e=Te;$e--;)if(A[$e]===De)continue e;me.push(Ce)}else oe(A,De,U)||me.push(Ce)}return me}te.templateSettings={escape:se,evaluate:fe,interpolate:ge,variable:"",imports:{_:te}},te.prototype=Vf.prototype,te.prototype.constructor=te,ei.prototype=Gs(Vf.prototype),ei.prototype.constructor=ei,At.prototype=Gs(Vf.prototype),At.prototype.constructor=At,Fa.prototype.clear=function(){this.__data__=sl?sl(null):{},this.size=0},Fa.prototype.delete=function(S){var A=this.has(S)&&delete this.__data__[S];return this.size-=A?1:0,A},Fa.prototype.get=function(S){var A=this.__data__;if(sl){var D=A[S];return D===a?i:D}return Jt.call(A,S)?A[S]:i},Fa.prototype.has=function(S){var A=this.__data__;return sl?A[S]!==i:Jt.call(A,S)},Fa.prototype.set=function(S,A){var D=this.__data__;return this.size+=this.has(S)?0:1,D[S]=sl&&A===i?a:A,this},no.prototype.clear=function(){this.__data__=[],this.size=0},no.prototype.delete=function(S){var A=this.__data__,D=Gf(A,S);return!(D<0||(D==A.length-1?A.pop():Lf.call(A,D,1),--this.size,0))},no.prototype.get=function(S){var A=this.__data__,D=Gf(A,S);return D<0?i:A[D][1]},no.prototype.has=function(S){return Gf(this.__data__,S)>-1},no.prototype.set=function(S,A){var D=this.__data__,U=Gf(D,S);return U<0?(++this.size,D.push([S,A])):D[U][1]=A,this},io.prototype.clear=function(){this.size=0,this.__data__={hash:new Fa,map:new(ol||no),string:new Fa}},io.prototype.delete=function(S){var A=th(this,S).delete(S);return this.size-=A?1:0,A},io.prototype.get=function(S){return th(this,S).get(S)},io.prototype.has=function(S){return th(this,S).has(S)},io.prototype.set=function(S,A){var D=th(this,S),U=D.size;return D.set(S,A),this.size+=D.size==U?0:1,this},Ba.prototype.add=Ba.prototype.push=function(S){return this.__data__.set(S,a),this},Ba.prototype.has=function(S){return this.__data__.has(S)},yi.prototype.clear=function(){this.__data__=new no,this.size=0},yi.prototype.delete=function(S){var A=this.__data__,D=A.delete(S);return this.size=A.size,D},yi.prototype.get=function(S){return this.__data__.get(S)},yi.prototype.has=function(S){return this.__data__.has(S)},yi.prototype.set=function(S,A){var D=this.__data__;if(D instanceof no){var U=D.__data__;if(!ol||U.length<199)return U.push([S,A]),this.size=++D.size,this;D=this.__data__=new io(U)}return D.set(S,A),this.size=D.size,this};var jo=yw(Ni),W_=yw(ap,!0);function Tk(S,A){var D=!0;return jo(S,function(U,X,oe){return D=!!A(U,X,oe)}),D}function qf(S,A,D){for(var U=-1,X=S.length;++U<X;){var oe=S[U],ce=A(oe);if(ce!=null&&(he===i?ce==ce&&!Hn(ce):D(ce,he)))var he=ce,me=oe}return me}function H_(S,A){var D=[];return jo(S,function(U,X,oe){A(U,X,oe)&&D.push(U)}),D}function Xr(S,A,D,U,X){var oe=-1,ce=S.length;for(D||(D=jk),X||(X=[]);++oe<ce;){var he=S[oe];A>0&&D(he)?A>1?Xr(he,A-1,D,U,X):Ii(X,he):U||(X[X.length]=he)}return X}var op=mw(),Y_=mw(!0);function Ni(S,A){return S&&op(S,A,Gr)}function ap(S,A){return S&&Y_(S,A,Gr)}function Wf(S,A){return ki(A,function(D){return lo(S[D])})}function za(S,A){for(var D=0,U=(A=Bo(A,S)).length;S!=null&&D<U;)S=S[ji(A[D++])];return D&&D==U?S:i}function X_(S,A,D){var U=A(S);return Et(S)?U:Ii(U,D(S))}function yn(S){return S==null?S===i?"[object Undefined]":"[object Null]":ja&&ja in lr(S)?(function(A){var D=Jt.call(A,ja),U=A[ja];try{A[ja]=i;var X=!0}catch{}var oe=If.call(A);return X&&(D?A[ja]=U:delete A[ja]),oe})(S):(function(A){return If.call(A)})(S)}function sp(S,A){return S>A}function Ck(S,A){return S!=null&&Jt.call(S,A)}function Pk(S,A){return S!=null&&A in lr(S)}function up(S,A,D){for(var U=D?$u:js,X=S[0].length,oe=S.length,ce=oe,he=He(oe),me=1/0,Te=[];ce--;){var Ce=S[ce];ce&&A&&(Ce=ar(Ce,gn(A))),me=sn(Ce.length,me),he[ce]=!D&&(A||X>=120&&Ce.length>=120)?new Ba(ce&&Ce):i}Ce=S[0];var De=-1,$e=he[0];e:for(;++De<X&&Te.length<me;){var Ze=Ce[De],ut=A?A(Ze):Ze;if(Ze=D||Ze!==0?Ze:0,!($e?La($e,ut):U(Te,ut,D))){for(ce=oe;--ce;){var Ae=he[ce];if(!(Ae?La(Ae,ut):U(S[ce],ut,D)))continue e}$e&&$e.push(ut),Te.push(Ze)}}return Te}function fl(S,A,D){var U=(S=Nw(S,A=Bo(A,S)))==null?S:S[ji(ni(A))];return U==null?i:pn(U,S,D)}function $_(S){return Or(S)&&yn(S)==p}function hl(S,A,D,U,X){return S===A||(S==null||A==null||!Or(S)&&!Or(A)?S!=S&&A!=A:(function(oe,ce,he,me,Te,Ce){var De=Et(oe),$e=Et(ce),Ze=De?m:un(oe),ut=$e?m:un(ce),Ae=(Ze=Ze==p?O:Ze)==O,Ne=(ut=ut==p?O:ut)==O,at=Ze==ut;if(at&&zo(oe)){if(!zo(ce))return!1;De=!0,Ae=!1}if(at&&!Ae)return Ce||(Ce=new yi),De||Ys(oe)?Pw(oe,ce,he,me,Te,Ce):(function(nt,gt,Nr,Cr,bn,cr,ln){switch(Nr){case j:if(nt.byteLength!=gt.byteLength||nt.byteOffset!=gt.byteOffset)return!1;nt=nt.buffer,gt=gt.buffer;case M:return!(nt.byteLength!=gt.byteLength||!cr(new Mf(nt),new Mf(gt)));case y:case b:case E:return mi(+nt,+gt);case g:return nt.name==gt.name&&nt.message==gt.message;case C:case R:return nt==gt+"";case x:var Fi=nl;case P:var Vo=1&Cr;if(Fi||(Fi=Bs),nt.size!=gt.size&&!Vo)return!1;var Wa=ln.get(nt);if(Wa)return Wa==gt;Cr|=2,ln.set(nt,gt);var fo=Pw(Fi(nt),Fi(gt),Cr,bn,cr,ln);return ln.delete(nt),fo;case k:if(ul)return ul.call(nt)==ul.call(gt)}return!1})(oe,ce,Ze,he,me,Te,Ce);if(!(1&he)){var qe=Ae&&Jt.call(oe,"__wrapped__"),wt=Ne&&Jt.call(ce,"__wrapped__");if(qe||wt){var yt=qe?oe.value():oe,Gt=wt?ce.value():ce;return Ce||(Ce=new yi),Te(yt,Gt,he,me,Ce)}}return!!at&&(Ce||(Ce=new yi),(function(nt,gt,Nr,Cr,bn,cr){var ln=1&Nr,Fi=Op(nt),Vo=Fi.length;if(Vo!=Op(gt).length&&!ln)return!1;for(var Wa=Vo;Wa--;){var fo=Fi[Wa];if(!(ln?fo in gt:Jt.call(gt,fo)))return!1}var m1=cr.get(nt),b1=cr.get(gt);if(m1&&b1)return m1==gt&&b1==nt;var fh=!0;cr.set(nt,gt),cr.set(gt,nt);for(var Kp=ln;++Wa<Vo;){var hh=nt[fo=Fi[Wa]],dh=gt[fo];if(Cr)var _1=ln?Cr(dh,hh,fo,gt,nt,cr):Cr(hh,dh,fo,nt,gt,cr);if(!(_1===i?hh===dh||bn(hh,dh,Nr,Cr,cr):_1)){fh=!1;break}Kp||(Kp=fo=="constructor")}if(fh&&!Kp){var vh=nt.constructor,ph=gt.constructor;vh==ph||!("constructor"in nt)||!("constructor"in gt)||typeof vh=="function"&&vh instanceof vh&&typeof ph=="function"&&ph instanceof ph||(fh=!1)}return cr.delete(nt),cr.delete(gt),fh})(oe,ce,he,me,Te,Ce))})(S,A,D,U,hl,X))}function lp(S,A,D,U){var X=D.length,oe=X,ce=!U;if(S==null)return!oe;for(S=lr(S);X--;){var he=D[X];if(ce&&he[2]?he[1]!==S[he[0]]:!(he[0]in S))return!1}for(;++X<oe;){var me=(he=D[X])[0],Te=S[me],Ce=he[1];if(ce&&he[2]){if(Te===i&&!(me in S))return!1}else{var De=new yi;if(U)var $e=U(Te,Ce,me,S,A,De);if(!($e===i?hl(Ce,Te,3,U,De):$e))return!1}}return!0}function K_(S){return!(!br(S)||(A=S,I_&&I_ in A))&&(lo(S)?uk:ee).test(Ga(S));var A}function Z_(S){return typeof S=="function"?S:S==null?jn:typeof S=="object"?Et(S)?ew(S[0],S[1]):J_(S):y1(S)}function cp(S){if(!pl(S))return vk(S);var A=[];for(var D in lr(S))Jt.call(S,D)&&D!="constructor"&&A.push(D);return A}function fp(S,A){return S<A}function Q_(S,A){var D=-1,U=Nn(S)?He(S.length):[];return jo(S,function(X,oe,ce){U[++D]=A(X,oe,ce)}),U}function J_(S){var A=Tp(S);return A.length==1&&A[0][2]?Dw(A[0][0],A[0][1]):function(D){return D===S||lp(D,S,A)}}function ew(S,A){return Pp(S)&&Iw(A)?Dw(ji(S),A):function(D){var U=Up(D,S);return U===i&&U===A?zp(D,S):hl(A,U,3)}}function Hf(S,A,D,U,X){S!==A&&op(A,function(oe,ce){if(X||(X=new yi),br(oe))(function(me,Te,Ce,De,$e,Ze,ut){var Ae=Rp(me,Ce),Ne=Rp(Te,Ce),at=ut.get(Ne);if(at)np(me,Ce,at);else{var qe=Ze?Ze(Ae,Ne,Ce+"",me,Te,ut):i,wt=qe===i;if(wt){var yt=Et(Ne),Gt=!yt&&zo(Ne),nt=!yt&&!Gt&&Ys(Ne);qe=Ne,yt||Gt||nt?Et(Ae)?qe=Ae:Tr(Ae)?qe=Mn(Ae):Gt?(wt=!1,qe=hw(Ne,!0)):nt?(wt=!1,qe=dw(Ne,!0)):qe=[]:yl(Ne)||qa(Ne)?(qe=Ae,qa(Ae)?qe=s1(Ae):br(Ae)&&!lo(Ae)||(qe=kw(Ne))):wt=!1}wt&&(ut.set(Ne,qe),$e(qe,Ne,De,Ze,ut),ut.delete(Ne)),np(me,Ce,qe)}})(S,A,ce,D,Hf,U,X);else{var he=U?U(Rp(S,ce),oe,ce+"",S,A,X):i;he===i&&(he=oe),np(S,ce,he)}},Ln)}function tw(S,A){var D=S.length;if(D)return uo(A+=A<0?D:0,D)?S[A]:i}function rw(S,A,D){A=A.length?ar(A,function(oe){return Et(oe)?function(ce){return za(ce,oe.length===1?oe[0]:oe)}:oe}):[jn];var U=-1;A=ar(A,gn(ht()));var X=Q_(S,function(oe,ce,he){var me=ar(A,function(Te){return Te(oe)});return{criteria:me,index:++U,value:oe}});return(function(oe){var ce=oe.length;for(oe.sort(function(he,me){return(function(Te,Ce,De){for(var $e=-1,Ze=Te.criteria,ut=Ce.criteria,Ae=Ze.length,Ne=De.length;++$e<Ae;){var at=vw(Ze[$e],ut[$e]);if(at)return $e>=Ne?at:at*(De[$e]=="desc"?-1:1)}return Te.index-Ce.index})(he,me,D)});ce--;)oe[ce]=oe[ce].value;return oe})(X)}function nw(S,A,D){for(var U=-1,X=A.length,oe={};++U<X;){var ce=A[U],he=za(S,ce);D(he,ce)&&dl(oe,Bo(ce,S),he)}return oe}function hp(S,A,D,U){var X=U?Xv:Do,oe=-1,ce=A.length,he=S;for(S===A&&(A=Mn(A)),D&&(he=ar(S,gn(D)));++oe<ce;)for(var me=0,Te=A[oe],Ce=D?D(Te):Te;(me=X(he,Ce,me,U))>-1;)he!==S&&Lf.call(he,me,1),Lf.call(S,me,1);return S}function iw(S,A){for(var D=S?A.length:0,U=D-1;D--;){var X=A[D];if(D==U||X!==oe){var oe=X;uo(X)?Lf.call(S,X,1):gp(S,X)}}return S}function dp(S,A){return S+Bf(F_()*(A-S+1))}function vp(S,A){var D="";if(!S||A<1||A>f)return D;do A%2&&(D+=S),(A=Bf(A/2))&&(S+=S);while(A);return D}function St(S,A){return kp(Mw(S,A,jn),S+"")}function Ak(S){return z_(Xs(S))}function Rk(S,A){var D=Xs(S);return rh(D,Ua(A,0,D.length))}function dl(S,A,D,U){if(!br(S))return S;for(var X=-1,oe=(A=Bo(A,S)).length,ce=oe-1,he=S;he!=null&&++X<oe;){var me=ji(A[X]),Te=D;if(me==="__proto__"||me==="constructor"||me==="prototype")return S;if(X!=ce){var Ce=he[me];(Te=U?U(Ce,me,he):i)===i&&(Te=br(Ce)?Ce:uo(A[X+1])?[]:{})}ll(he,me,Te),he=he[me]}return S}var ow=Uf?function(S,A){return Uf.set(S,A),S}:jn,kk=jf?function(S,A){return jf(S,"toString",{configurable:!0,enumerable:!1,value:Gp(A),writable:!0})}:jn;function Ik(S){return rh(Xs(S))}function ri(S,A,D){var U=-1,X=S.length;A<0&&(A=-A>X?0:X+A),(D=D>X?X:D)<0&&(D+=X),X=A>D?0:D-A>>>0,A>>>=0;for(var oe=He(X);++U<X;)oe[U]=S[U+A];return oe}function Dk(S,A){var D;return jo(S,function(U,X,oe){return!(D=A(U,X,oe))}),!!D}function Yf(S,A,D){var U=0,X=S==null?U:S.length;if(typeof A=="number"&&A==A&&X<=2147483647){for(;U<X;){var oe=U+X>>>1,ce=S[oe];ce!==null&&!Hn(ce)&&(D?ce<=A:ce<A)?U=oe+1:X=oe}return X}return pp(S,A,jn,D)}function pp(S,A,D,U){var X=0,oe=S==null?0:S.length;if(oe===0)return 0;for(var ce=(A=D(A))!=A,he=A===null,me=Hn(A),Te=A===i;X<oe;){var Ce=Bf((X+oe)/2),De=D(S[Ce]),$e=De!==i,Ze=De===null,ut=De==De,Ae=Hn(De);if(ce)var Ne=U||ut;else Ne=Te?ut&&(U||$e):he?ut&&$e&&(U||!Ze):me?ut&&$e&&!Ze&&(U||!Ae):!Ze&&!Ae&&(U?De<=A:De<A);Ne?X=Ce+1:oe=Ce}return sn(oe,4294967294)}function aw(S,A){for(var D=-1,U=S.length,X=0,oe=[];++D<U;){var ce=S[D],he=A?A(ce):ce;if(!D||!mi(he,me)){var me=he;oe[X++]=ce===0?0:ce}}return oe}function sw(S){return typeof S=="number"?S:Hn(S)?h:+S}function Wn(S){if(typeof S=="string")return S;if(Et(S))return ar(S,Wn)+"";if(Hn(S))return B_?B_.call(S):"";var A=S+"";return A=="0"&&1/S==-1/0?"-0":A}function Fo(S,A,D){var U=-1,X=js,oe=S.length,ce=!0,he=[],me=he;if(D)ce=!1,X=$u;else if(oe>=200){var Te=A?null:Nk(S);if(Te)return Bs(Te);ce=!1,X=La,me=new Ba}else me=A?[]:he;e:for(;++U<oe;){var Ce=S[U],De=A?A(Ce):Ce;if(Ce=D||Ce!==0?Ce:0,ce&&De==De){for(var $e=me.length;$e--;)if(me[$e]===De)continue e;A&&me.push(De),he.push(Ce)}else X(me,De,D)||(me!==he&&me.push(De),he.push(Ce))}return he}function gp(S,A){return(S=Nw(S,A=Bo(A,S)))==null||delete S[ji(ni(A))]}function uw(S,A,D,U){return dl(S,A,D(za(S,A)),U)}function Xf(S,A,D,U){for(var X=S.length,oe=U?X:-1;(U?oe--:++oe<X)&&A(S[oe],oe,S););return D?ri(S,U?0:oe,U?oe+1:X):ri(S,U?oe+1:0,U?X:oe)}function lw(S,A){var D=S;return D instanceof At&&(D=D.value()),Ku(A,function(U,X){return X.func.apply(X.thisArg,Ii([U],X.args))},D)}function yp(S,A,D){var U=S.length;if(U<2)return U?Fo(S[0]):[];for(var X=-1,oe=He(U);++X<U;)for(var ce=S[X],he=-1;++he<U;)he!=X&&(oe[X]=cl(oe[X]||ce,S[he],A,D));return Fo(Xr(oe,1),A,D)}function cw(S,A,D){for(var U=-1,X=S.length,oe=A.length,ce={};++U<X;){var he=U<oe?A[U]:i;D(ce,S[U],he)}return ce}function mp(S){return Tr(S)?S:[]}function bp(S){return typeof S=="function"?S:jn}function Bo(S,A){return Et(S)?S:Pp(S,A)?[S]:Bw($t(S))}var Mk=St;function Uo(S,A,D){var U=S.length;return D=D===i?U:D,!A&&D>=U?S:ri(S,A,D)}var fw=lk||function(S){return Er.clearTimeout(S)};function hw(S,A){if(A)return S.slice();var D=S.length,U=D_?D_(D):new S.constructor(D);return S.copy(U),U}function _p(S){var A=new S.constructor(S.byteLength);return new Mf(A).set(new Mf(S)),A}function dw(S,A){var D=A?_p(S.buffer):S.buffer;return new S.constructor(D,S.byteOffset,S.length)}function vw(S,A){if(S!==A){var D=S!==i,U=S===null,X=S==S,oe=Hn(S),ce=A!==i,he=A===null,me=A==A,Te=Hn(A);if(!he&&!Te&&!oe&&S>A||oe&&ce&&me&&!he&&!Te||U&&ce&&me||!D&&me||!X)return 1;if(!U&&!oe&&!Te&&S<A||Te&&D&&X&&!U&&!oe||he&&D&&X||!ce&&X||!me)return-1}return 0}function pw(S,A,D,U){for(var X=-1,oe=S.length,ce=D.length,he=-1,me=A.length,Te=Mr(oe-ce,0),Ce=He(me+Te),De=!U;++he<me;)Ce[he]=A[he];for(;++X<ce;)(De||X<oe)&&(Ce[D[X]]=S[X]);for(;Te--;)Ce[he++]=S[X++];return Ce}function gw(S,A,D,U){for(var X=-1,oe=S.length,ce=-1,he=D.length,me=-1,Te=A.length,Ce=Mr(oe-he,0),De=He(Ce+Te),$e=!U;++X<Ce;)De[X]=S[X];for(var Ze=X;++me<Te;)De[Ze+me]=A[me];for(;++ce<he;)($e||X<oe)&&(De[Ze+D[ce]]=S[X++]);return De}function Mn(S,A){var D=-1,U=S.length;for(A||(A=He(U));++D<U;)A[D]=S[D];return A}function Li(S,A,D,U){var X=!D;D||(D={});for(var oe=-1,ce=A.length;++oe<ce;){var he=A[oe],me=U?U(D[he],S[he],he,D,S):i;me===i&&(me=S[he]),X?oo(D,he,me):ll(D,he,me)}return D}function $f(S,A){return function(D,U){var X=Et(D)?qv:Sk,oe=A?A():{};return X(D,S,ht(U,2),oe)}}function qs(S){return St(function(A,D){var U=-1,X=D.length,oe=X>1?D[X-1]:i,ce=X>2?D[2]:i;for(oe=S.length>3&&typeof oe=="function"?(X--,oe):i,ce&&mn(D[0],D[1],ce)&&(oe=X<3?i:oe,X=1),A=lr(A);++U<X;){var he=D[U];he&&S(A,he,U,oe)}return A})}function yw(S,A){return function(D,U){if(D==null)return D;if(!Nn(D))return S(D,U);for(var X=D.length,oe=A?X:-1,ce=lr(D);(A?oe--:++oe<X)&&U(ce[oe],oe,ce)!==!1;);return D}}function mw(S){return function(A,D,U){for(var X=-1,oe=lr(A),ce=U(A),he=ce.length;he--;){var me=ce[S?he:++X];if(D(oe[me],me,oe)===!1)break}return A}}function bw(S){return function(A){var D=Mo(A=$t(A))?Vr(A):i,U=D?D[0]:A.charAt(0),X=D?Uo(D,1).join(""):A.slice(1);return U[S]()+X}}function Ws(S){return function(A){return Ku(p1(v1(A).replace(Aa,"")),S,"")}}function vl(S){return function(){var A=arguments;switch(A.length){case 0:return new S;case 1:return new S(A[0]);case 2:return new S(A[0],A[1]);case 3:return new S(A[0],A[1],A[2]);case 4:return new S(A[0],A[1],A[2],A[3]);case 5:return new S(A[0],A[1],A[2],A[3],A[4]);case 6:return new S(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new S(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var D=Gs(S.prototype),U=S.apply(D,A);return br(U)?U:D}}function _w(S){return function(A,D,U){var X=lr(A);if(!Nn(A)){var oe=ht(D,3);A=Gr(A),D=function(he){return oe(X[he],he,X)}}var ce=S(A,D,U);return ce>-1?X[oe?A[ce]:ce]:i}}function ww(S){return so(function(A){var D=A.length,U=D,X=ei.prototype.thru;for(S&&A.reverse();U--;){var oe=A[U];if(typeof oe!="function")throw new Jn(o);if(X&&!ce&&eh(oe)=="wrapper")var ce=new ei([],!0)}for(U=ce?U:D;++U<D;){var he=eh(oe=A[U]),me=he=="wrapper"?Sp(oe):i;ce=me&&Ap(me[0])&&me[1]==424&&!me[4].length&&me[9]==1?ce[eh(me[0])].apply(ce,me[3]):oe.length==1&&Ap(oe)?ce[he]():ce.thru(oe)}return function(){var Te=arguments,Ce=Te[0];if(ce&&Te.length==1&&Et(Ce))return ce.plant(Ce).value();for(var De=0,$e=D?A[De].apply(this,Te):Ce;++De<D;)$e=A[De].call(this,$e);return $e}})}function Kf(S,A,D,U,X,oe,ce,he,me,Te){var Ce=A&l,De=1&A,$e=2&A,Ze=24&A,ut=512&A,Ae=$e?i:vl(S);return function Ne(){for(var at=arguments.length,qe=He(at),wt=at;wt--;)qe[wt]=arguments[wt];if(Ze)var yt=Hs(Ne),Gt=(function(Cr,bn){for(var cr=Cr.length,ln=0;cr--;)Cr[cr]===bn&&++ln;return ln})(qe,yt);if(U&&(qe=pw(qe,U,X,Ze)),oe&&(qe=gw(qe,oe,ce,Ze)),at-=Gt,Ze&&at<Te){var nt=Di(qe,yt);return xw(S,A,Kf,Ne.placeholder,D,qe,nt,he,me,Te-at)}var gt=De?D:this,Nr=$e?gt[S]:S;return at=qe.length,he?qe=(function(Cr,bn){for(var cr=Cr.length,ln=sn(bn.length,cr),Fi=Mn(Cr);ln--;){var Vo=bn[ln];Cr[ln]=uo(Vo,cr)?Fi[Vo]:i}return Cr})(qe,he):ut&&at>1&&qe.reverse(),Ce&&me<at&&(qe.length=me),this&&this!==Er&&this instanceof Ne&&(Nr=Ae||vl(Nr)),Nr.apply(gt,qe)}}function Ew(S,A){return function(D,U){return(function(X,oe,ce,he){return Ni(X,function(me,Te,Ce){oe(he,ce(me),Te,Ce)}),he})(D,S,A(U),{})}}function Zf(S,A){return function(D,U){var X;if(D===i&&U===i)return A;if(D!==i&&(X=D),U!==i){if(X===i)return U;typeof D=="string"||typeof U=="string"?(D=Wn(D),U=Wn(U)):(D=sw(D),U=sw(U)),X=S(D,U)}return X}}function wp(S){return so(function(A){return A=ar(A,gn(ht())),St(function(D){var U=this;return S(A,function(X){return pn(X,U,D)})})})}function Qf(S,A){var D=(A=A===i?" ":Wn(A)).length;if(D<2)return D?vp(A,S):A;var U=vp(A,Ff(S/No(A)));return Mo(A)?Uo(Vr(U),0,S).join(""):U.slice(0,S)}function Ow(S){return function(A,D,U){return U&&typeof U!="number"&&mn(A,D,U)&&(D=U=i),A=co(A),D===i?(D=A,A=0):D=co(D),(function(X,oe,ce,he){for(var me=-1,Te=Mr(Ff((oe-X)/(ce||1)),0),Ce=He(Te);Te--;)Ce[he?Te:++me]=X,X+=ce;return Ce})(A,D,U=U===i?A<D?1:-1:co(U),S)}}function Jf(S){return function(A,D){return typeof A=="string"&&typeof D=="string"||(A=ii(A),D=ii(D)),S(A,D)}}function xw(S,A,D,U,X,oe,ce,he,me,Te){var Ce=8&A;A|=Ce?u:64,4&(A&=~(Ce?64:u))||(A&=-4);var De=[S,A,X,Ce?oe:i,Ce?ce:i,Ce?i:oe,Ce?i:ce,he,me,Te],$e=D.apply(i,De);return Ap(S)&&Lw($e,De),$e.placeholder=U,jw($e,S,A)}function Ep(S){var A=Mi[S];return function(D,U){if(D=ii(D),(U=U==null?0:sn(Ot(U),292))&&j_(D)){var X=($t(D)+"e").split("e");return+((X=($t(A(X[0]+"e"+(+X[1]+U)))+"e").split("e"))[0]+"e"+(+X[1]-U))}return A(D)}}var Nk=zs&&1/Bs(new zs([,-0]))[1]==c?function(S){return new zs(S)}:Hp;function Sw(S){return function(A){var D=un(A);return D==x?nl(A):D==P?Qv(A):(function(U,X){return ar(X,function(oe){return[oe,U[oe]]})})(A,S(A))}}function ao(S,A,D,U,X,oe,ce,he){var me=2&A;if(!me&&typeof S!="function")throw new Jn(o);var Te=U?U.length:0;if(Te||(A&=-97,U=X=i),ce=ce===i?ce:Mr(Ot(ce),0),he=he===i?he:Ot(he),Te-=X?X.length:0,64&A){var Ce=U,De=X;U=X=i}var $e=me?i:Sp(S),Ze=[S,A,D,U,X,Ce,De,oe,ce,he];if($e&&(function(Ae,Ne){var at=Ae[1],qe=Ne[1],wt=at|qe,yt=wt<131,Gt=qe==l&&at==8||qe==l&&at==256&&Ae[7].length<=Ne[8]||qe==384&&Ne[7].length<=Ne[8]&&at==8;if(!yt&&!Gt)return Ae;1&qe&&(Ae[2]=Ne[2],wt|=1&at?0:4);var nt=Ne[3];if(nt){var gt=Ae[3];Ae[3]=gt?pw(gt,nt,Ne[4]):nt,Ae[4]=gt?Di(Ae[3],s):Ne[4]}(nt=Ne[5])&&(gt=Ae[5],Ae[5]=gt?gw(gt,nt,Ne[6]):nt,Ae[6]=gt?Di(Ae[5],s):Ne[6]),(nt=Ne[7])&&(Ae[7]=nt),qe&l&&(Ae[8]=Ae[8]==null?Ne[8]:sn(Ae[8],Ne[8])),Ae[9]==null&&(Ae[9]=Ne[9]),Ae[0]=Ne[0],Ae[1]=wt})(Ze,$e),S=Ze[0],A=Ze[1],D=Ze[2],U=Ze[3],X=Ze[4],!(he=Ze[9]=Ze[9]===i?me?0:S.length:Mr(Ze[9]-Te,0))&&24&A&&(A&=-25),A&&A!=1)ut=A==8||A==16?(function(Ae,Ne,at){var qe=vl(Ae);return function wt(){for(var yt=arguments.length,Gt=He(yt),nt=yt,gt=Hs(wt);nt--;)Gt[nt]=arguments[nt];var Nr=yt<3&&Gt[0]!==gt&&Gt[yt-1]!==gt?[]:Di(Gt,gt);return(yt-=Nr.length)<at?xw(Ae,Ne,Kf,wt.placeholder,i,Gt,Nr,i,i,at-yt):pn(this&&this!==Er&&this instanceof wt?qe:Ae,this,Gt)}})(S,A,he):A!=u&&A!=33||X.length?Kf.apply(i,Ze):(function(Ae,Ne,at,qe){var wt=1&Ne,yt=vl(Ae);return function Gt(){for(var nt=-1,gt=arguments.length,Nr=-1,Cr=qe.length,bn=He(Cr+gt),cr=this&&this!==Er&&this instanceof Gt?yt:Ae;++Nr<Cr;)bn[Nr]=qe[Nr];for(;gt--;)bn[Nr++]=arguments[++nt];return pn(cr,wt?at:this,bn)}})(S,A,D,U);else var ut=(function(Ae,Ne,at){var qe=1&Ne,wt=vl(Ae);return function yt(){return(this&&this!==Er&&this instanceof yt?wt:Ae).apply(qe?at:this,arguments)}})(S,A,D);return jw(($e?ow:Lw)(ut,Ze),S,A)}function Tw(S,A,D,U){return S===i||mi(S,Us[D])&&!Jt.call(U,D)?A:S}function Cw(S,A,D,U,X,oe){return br(S)&&br(A)&&(oe.set(A,S),Hf(S,A,i,Cw,oe),oe.delete(A)),S}function Lk(S){return yl(S)?i:S}function Pw(S,A,D,U,X,oe){var ce=1&D,he=S.length,me=A.length;if(he!=me&&!(ce&&me>he))return!1;var Te=oe.get(S),Ce=oe.get(A);if(Te&&Ce)return Te==A&&Ce==S;var De=-1,$e=!0,Ze=2&D?new Ba:i;for(oe.set(S,A),oe.set(A,S);++De<he;){var ut=S[De],Ae=A[De];if(U)var Ne=ce?U(Ae,ut,De,A,S,oe):U(ut,Ae,De,S,A,oe);if(Ne!==i){if(Ne)continue;$e=!1;break}if(Ze){if(!Zu(A,function(at,qe){if(!La(Ze,qe)&&(ut===at||X(ut,at,D,U,oe)))return Ze.push(qe)})){$e=!1;break}}else if(ut!==Ae&&!X(ut,Ae,D,U,oe)){$e=!1;break}}return oe.delete(S),oe.delete(A),$e}function so(S){return kp(Mw(S,i,Gw),S+"")}function Op(S){return X_(S,Gr,Cp)}function xp(S){return X_(S,Ln,Aw)}var Sp=Uf?function(S){return Uf.get(S)}:Hp;function eh(S){for(var A=S.name+"",D=Vs[A],U=Jt.call(Vs,A)?D.length:0;U--;){var X=D[U],oe=X.func;if(oe==null||oe==S)return X.name}return A}function Hs(S){return(Jt.call(te,"placeholder")?te:S).placeholder}function ht(){var S=te.iteratee||qp;return S=S===qp?Z_:S,arguments.length?S(arguments[0],arguments[1]):S}function th(S,A){var D,U,X=S.__data__;return((U=typeof(D=A))=="string"||U=="number"||U=="symbol"||U=="boolean"?D!=="__proto__":D===null)?X[typeof A=="string"?"string":"hash"]:X.map}function Tp(S){for(var A=Gr(S),D=A.length;D--;){var U=A[D],X=S[U];A[D]=[U,X,Iw(X)]}return A}function Va(S,A){var D=(function(U,X){return U==null?i:U[X]})(S,A);return K_(D)?D:i}var Cp=ep?function(S){return S==null?[]:(S=lr(S),ki(ep(S),function(A){return N_.call(S,A)}))}:Yp,Aw=ep?function(S){for(var A=[];S;)Ii(A,Cp(S)),S=Nf(S);return A}:Yp,un=yn;function Rw(S,A,D){for(var U=-1,X=(A=Bo(A,S)).length,oe=!1;++U<X;){var ce=ji(A[U]);if(!(oe=S!=null&&D(S,ce)))break;S=S[ce]}return oe||++U!=X?oe:!!(X=S==null?0:S.length)&&uh(X)&&uo(ce,X)&&(Et(S)||qa(S))}function kw(S){return typeof S.constructor!="function"||pl(S)?{}:Gs(Nf(S))}function jk(S){return Et(S)||qa(S)||!!(L_&&S&&S[L_])}function uo(S,A){var D=typeof S;return!!(A=A??f)&&(D=="number"||D!="symbol"&&be.test(S))&&S>-1&&S%1==0&&S<A}function mn(S,A,D){if(!br(D))return!1;var U=typeof A;return!!(U=="number"?Nn(D)&&uo(A,D.length):U=="string"&&A in D)&&mi(D[A],S)}function Pp(S,A){if(Et(S))return!1;var D=typeof S;return!(D!="number"&&D!="symbol"&&D!="boolean"&&S!=null&&!Hn(S))||pe.test(S)||!ye.test(S)||A!=null&&S in lr(A)}function Ap(S){var A=eh(S),D=te[A];if(typeof D!="function"||!(A in At.prototype))return!1;if(S===D)return!0;var U=Sp(D);return!!U&&S===U[0]}(tp&&un(new tp(new ArrayBuffer(1)))!=j||ol&&un(new ol)!=x||rp&&un(rp.resolve())!=T||zs&&un(new zs)!=P||al&&un(new al)!=I)&&(un=function(S){var A=yn(S),D=A==O?S.constructor:i,U=D?Ga(D):"";if(U)switch(U){case mk:return j;case bk:return x;case _k:return T;case wk:return P;case Ek:return I}return A});var Fk=Rf?lo:Xp;function pl(S){var A=S&&S.constructor;return S===(typeof A=="function"&&A.prototype||Us)}function Iw(S){return S==S&&!br(S)}function Dw(S,A){return function(D){return D!=null&&D[S]===A&&(A!==i||S in lr(D))}}function Mw(S,A,D){return A=Mr(A===i?S.length-1:A,0),function(){for(var U=arguments,X=-1,oe=Mr(U.length-A,0),ce=He(oe);++X<oe;)ce[X]=U[A+X];X=-1;for(var he=He(A+1);++X<A;)he[X]=U[X];return he[A]=D(ce),pn(S,this,he)}}function Nw(S,A){return A.length<2?S:za(S,ri(A,0,-1))}function Rp(S,A){if((A!=="constructor"||typeof S[A]!="function")&&A!="__proto__")return S[A]}var Lw=Fw(ow),gl=fk||function(S,A){return Er.setTimeout(S,A)},kp=Fw(kk);function jw(S,A,D){var U=A+"";return kp(S,(function(X,oe){var ce=oe.length;if(!ce)return X;var he=ce-1;return oe[he]=(ce>1?"& ":"")+oe[he],oe=oe.join(ce>2?", ":" "),X.replace(le,`{
/* [wrapped with `+oe+`] */
`)})(U,(function(X,oe){return Dn(v,function(ce){var he="_."+ce[0];oe&ce[1]&&!js(X,he)&&X.push(he)}),X.sort()})((function(X){var oe=X.match(de);return oe?oe[1].split(xe):[]})(U),D)))}function Fw(S){var A=0,D=0;return function(){var U=pk(),X=16-(U-D);if(D=U,X>0){if(++A>=800)return arguments[0]}else A=0;return S.apply(i,arguments)}}function rh(S,A){var D=-1,U=S.length,X=U-1;for(A=A===i?U:A;++D<A;){var oe=dp(D,X),ce=S[oe];S[oe]=S[D],S[D]=ce}return S.length=A,S}var Ip,Dp,Bw=(Ip=ah(function(S){var A=[];return S.charCodeAt(0)===46&&A.push(""),S.replace(N,function(D,U,X,oe){A.push(X?oe.replace(ze,"$1"):U||D)}),A},function(S){return Dp.size===500&&Dp.clear(),S}),Dp=Ip.cache,Ip);function ji(S){if(typeof S=="string"||Hn(S))return S;var A=S+"";return A=="0"&&1/S==-1/0?"-0":A}function Ga(S){if(S!=null){try{return kf.call(S)}catch{}try{return S+""}catch{}}return""}function Uw(S){if(S instanceof At)return S.clone();var A=new ei(S.__wrapped__,S.__chain__);return A.__actions__=Mn(S.__actions__),A.__index__=S.__index__,A.__values__=S.__values__,A}var Bk=St(function(S,A){return Tr(S)?cl(S,Xr(A,1,Tr,!0)):[]}),Uk=St(function(S,A){var D=ni(A);return Tr(D)&&(D=i),Tr(S)?cl(S,Xr(A,1,Tr,!0),ht(D,2)):[]}),zk=St(function(S,A){var D=ni(A);return Tr(D)&&(D=i),Tr(S)?cl(S,Xr(A,1,Tr,!0),i,D):[]});function zw(S,A,D){var U=S==null?0:S.length;if(!U)return-1;var X=D==null?0:Ot(D);return X<0&&(X=Mr(U+X,0)),Fs(S,ht(A,3),X)}function Vw(S,A,D){var U=S==null?0:S.length;if(!U)return-1;var X=U-1;return D!==i&&(X=Ot(D),X=D<0?Mr(U+X,0):sn(X,U-1)),Fs(S,ht(A,3),X,!0)}function Gw(S){return S!=null&&S.length?Xr(S,1):[]}function qw(S){return S&&S.length?S[0]:i}var Vk=St(function(S){var A=ar(S,mp);return A.length&&A[0]===S[0]?up(A):[]}),Gk=St(function(S){var A=ni(S),D=ar(S,mp);return A===ni(D)?A=i:D.pop(),D.length&&D[0]===S[0]?up(D,ht(A,2)):[]}),qk=St(function(S){var A=ni(S),D=ar(S,mp);return(A=typeof A=="function"?A:i)&&D.pop(),D.length&&D[0]===S[0]?up(D,i,A):[]});function ni(S){var A=S==null?0:S.length;return A?S[A-1]:i}var Wk=St(Ww);function Ww(S,A){return S&&S.length&&A&&A.length?hp(S,A):S}var Hk=so(function(S,A){var D=S==null?0:S.length,U=ip(S,A);return iw(S,ar(A,function(X){return uo(X,D)?+X:X}).sort(vw)),U});function Mp(S){return S==null?S:yk.call(S)}var Yk=St(function(S){return Fo(Xr(S,1,Tr,!0))}),Xk=St(function(S){var A=ni(S);return Tr(A)&&(A=i),Fo(Xr(S,1,Tr,!0),ht(A,2))}),$k=St(function(S){var A=ni(S);return A=typeof A=="function"?A:i,Fo(Xr(S,1,Tr,!0),i,A)});function Np(S){if(!S||!S.length)return[];var A=0;return S=ki(S,function(D){if(Tr(D))return A=Mr(D.length,A),!0}),tl(A,function(D){return ar(S,Qu(D))})}function Hw(S,A){if(!S||!S.length)return[];var D=Np(S);return A==null?D:ar(D,function(U){return pn(A,i,U)})}var Kk=St(function(S,A){return Tr(S)?cl(S,A):[]}),Zk=St(function(S){return yp(ki(S,Tr))}),Qk=St(function(S){var A=ni(S);return Tr(A)&&(A=i),yp(ki(S,Tr),ht(A,2))}),Jk=St(function(S){var A=ni(S);return A=typeof A=="function"?A:i,yp(ki(S,Tr),i,A)}),eI=St(Np),tI=St(function(S){var A=S.length,D=A>1?S[A-1]:i;return D=typeof D=="function"?(S.pop(),D):i,Hw(S,D)});function Yw(S){var A=te(S);return A.__chain__=!0,A}function nh(S,A){return A(S)}var rI=so(function(S){var A=S.length,D=A?S[0]:0,U=this.__wrapped__,X=function(oe){return ip(oe,S)};return!(A>1||this.__actions__.length)&&U instanceof At&&uo(D)?((U=U.slice(D,+D+(A?1:0))).__actions__.push({func:nh,args:[X],thisArg:i}),new ei(U,this.__chain__).thru(function(oe){return A&&!oe.length&&oe.push(i),oe})):this.thru(X)}),nI=$f(function(S,A,D){Jt.call(S,D)?++S[D]:oo(S,D,1)}),iI=_w(zw),oI=_w(Vw);function Xw(S,A){return(Et(S)?Dn:jo)(S,ht(A,3))}function $w(S,A){return(Et(S)?Wv:W_)(S,ht(A,3))}var aI=$f(function(S,A,D){Jt.call(S,D)?S[D].push(A):oo(S,D,[A])}),sI=St(function(S,A,D){var U=-1,X=typeof A=="function",oe=Nn(S)?He(S.length):[];return jo(S,function(ce){oe[++U]=X?pn(A,ce,D):fl(ce,A,D)}),oe}),uI=$f(function(S,A,D){oo(S,D,A)});function ih(S,A){return(Et(S)?ar:Q_)(S,ht(A,3))}var lI=$f(function(S,A,D){S[D?0:1].push(A)},function(){return[[],[]]}),cI=St(function(S,A){if(S==null)return[];var D=A.length;return D>1&&mn(S,A[0],A[1])?A=[]:D>2&&mn(A[0],A[1],A[2])&&(A=[A[0]]),rw(S,Xr(A,1),[])}),oh=ck||function(){return Er.Date.now()};function Kw(S,A,D){return A=D?i:A,A=S&&A==null?S.length:A,ao(S,l,i,i,i,i,A)}function Zw(S,A){var D;if(typeof A!="function")throw new Jn(o);return S=Ot(S),function(){return--S>0&&(D=A.apply(this,arguments)),S<=1&&(A=i),D}}var Lp=St(function(S,A,D){var U=1;if(D.length){var X=Di(D,Hs(Lp));U|=u}return ao(S,U,A,D,X)}),Qw=St(function(S,A,D){var U=3;if(D.length){var X=Di(D,Hs(Qw));U|=u}return ao(A,U,S,D,X)});function Jw(S,A,D){var U,X,oe,ce,he,me,Te=0,Ce=!1,De=!1,$e=!0;if(typeof S!="function")throw new Jn(o);function Ze(qe){var wt=U,yt=X;return U=X=i,Te=qe,ce=S.apply(yt,wt)}function ut(qe){var wt=qe-me;return me===i||wt>=A||wt<0||De&&qe-Te>=oe}function Ae(){var qe=oh();if(ut(qe))return Ne(qe);he=gl(Ae,(function(wt){var yt=A-(wt-me);return De?sn(yt,oe-(wt-Te)):yt})(qe))}function Ne(qe){return he=i,$e&&U?Ze(qe):(U=X=i,ce)}function at(){var qe=oh(),wt=ut(qe);if(U=arguments,X=this,me=qe,wt){if(he===i)return(function(yt){return Te=yt,he=gl(Ae,A),Ce?Ze(yt):ce})(me);if(De)return fw(he),he=gl(Ae,A),Ze(me)}return he===i&&(he=gl(Ae,A)),ce}return A=ii(A)||0,br(D)&&(Ce=!!D.leading,oe=(De="maxWait"in D)?Mr(ii(D.maxWait)||0,A):oe,$e="trailing"in D?!!D.trailing:$e),at.cancel=function(){he!==i&&fw(he),Te=0,U=me=X=he=i},at.flush=function(){return he===i?ce:Ne(oh())},at}var fI=St(function(S,A){return q_(S,1,A)}),hI=St(function(S,A,D){return q_(S,ii(A)||0,D)});function ah(S,A){if(typeof S!="function"||A!=null&&typeof A!="function")throw new Jn(o);var D=function(){var U=arguments,X=A?A.apply(this,U):U[0],oe=D.cache;if(oe.has(X))return oe.get(X);var ce=S.apply(this,U);return D.cache=oe.set(X,ce)||oe,ce};return D.cache=new(ah.Cache||io),D}function sh(S){if(typeof S!="function")throw new Jn(o);return function(){var A=arguments;switch(A.length){case 0:return!S.call(this);case 1:return!S.call(this,A[0]);case 2:return!S.call(this,A[0],A[1]);case 3:return!S.call(this,A[0],A[1],A[2])}return!S.apply(this,A)}}ah.Cache=io;var dI=Mk(function(S,A){var D=(A=A.length==1&&Et(A[0])?ar(A[0],gn(ht())):ar(Xr(A,1),gn(ht()))).length;return St(function(U){for(var X=-1,oe=sn(U.length,D);++X<oe;)U[X]=A[X].call(this,U[X]);return pn(S,this,U)})}),jp=St(function(S,A){var D=Di(A,Hs(jp));return ao(S,u,i,A,D)}),e1=St(function(S,A){var D=Di(A,Hs(e1));return ao(S,64,i,A,D)}),vI=so(function(S,A){return ao(S,256,i,i,i,A)});function mi(S,A){return S===A||S!=S&&A!=A}var pI=Jf(sp),gI=Jf(function(S,A){return S>=A}),qa=$_((function(){return arguments})())?$_:function(S){return Or(S)&&Jt.call(S,"callee")&&!N_.call(S,"callee")},Et=He.isArray,yI=vf?gn(vf):function(S){return Or(S)&&yn(S)==M};function Nn(S){return S!=null&&uh(S.length)&&!lo(S)}function Tr(S){return Or(S)&&Nn(S)}var zo=hk||Xp,mI=pf?gn(pf):function(S){return Or(S)&&yn(S)==b};function Fp(S){if(!Or(S))return!1;var A=yn(S);return A==g||A=="[object DOMException]"||typeof S.message=="string"&&typeof S.name=="string"&&!yl(S)}function lo(S){if(!br(S))return!1;var A=yn(S);return A==_||A==w||A=="[object AsyncFunction]"||A=="[object Proxy]"}function t1(S){return typeof S=="number"&&S==Ot(S)}function uh(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=f}function br(S){var A=typeof S;return S!=null&&(A=="object"||A=="function")}function Or(S){return S!=null&&typeof S=="object"}var r1=gf?gn(gf):function(S){return Or(S)&&un(S)==x};function n1(S){return typeof S=="number"||Or(S)&&yn(S)==E}function yl(S){if(!Or(S)||yn(S)!=O)return!1;var A=Nf(S);if(A===null)return!0;var D=Jt.call(A,"constructor")&&A.constructor;return typeof D=="function"&&D instanceof D&&kf.call(D)==ak}var Bp=yf?gn(yf):function(S){return Or(S)&&yn(S)==C},i1=mf?gn(mf):function(S){return Or(S)&&un(S)==P};function lh(S){return typeof S=="string"||!Et(S)&&Or(S)&&yn(S)==R}function Hn(S){return typeof S=="symbol"||Or(S)&&yn(S)==k}var Ys=bf?gn(bf):function(S){return Or(S)&&uh(S.length)&&!!Ft[yn(S)]},bI=Jf(fp),_I=Jf(function(S,A){return S<=A});function o1(S){if(!S)return[];if(Nn(S))return lh(S)?Vr(S):Mn(S);if(il&&S[il])return(function(D){for(var U,X=[];!(U=D.next()).done;)X.push(U.value);return X})(S[il]());var A=un(S);return(A==x?nl:A==P?Bs:Xs)(S)}function co(S){return S?(S=ii(S))===c||S===-1/0?17976931348623157e292*(S<0?-1:1):S==S?S:0:S===0?S:0}function Ot(S){var A=co(S),D=A%1;return A==A?D?A-D:A:0}function a1(S){return S?Ua(Ot(S),0,d):0}function ii(S){if(typeof S=="number")return S;if(Hn(S))return h;if(br(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=br(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=Sf(S);var D=Ee.test(S);return D||ve.test(S)?Xu(S.slice(2),D?2:8):Ie.test(S)?h:+S}function s1(S){return Li(S,Ln(S))}function $t(S){return S==null?"":Wn(S)}var wI=qs(function(S,A){if(pl(A)||Nn(A))Li(A,Gr(A),S);else for(var D in A)Jt.call(A,D)&&ll(S,D,A[D])}),u1=qs(function(S,A){Li(A,Ln(A),S)}),ch=qs(function(S,A,D,U){Li(A,Ln(A),S,U)}),EI=qs(function(S,A,D,U){Li(A,Gr(A),S,U)}),OI=so(ip),xI=St(function(S,A){S=lr(S);var D=-1,U=A.length,X=U>2?A[2]:i;for(X&&mn(A[0],A[1],X)&&(U=1);++D<U;)for(var oe=A[D],ce=Ln(oe),he=-1,me=ce.length;++he<me;){var Te=ce[he],Ce=S[Te];(Ce===i||mi(Ce,Us[Te])&&!Jt.call(S,Te))&&(S[Te]=oe[Te])}return S}),SI=St(function(S){return S.push(i,Cw),pn(l1,i,S)});function Up(S,A,D){var U=S==null?i:za(S,A);return U===i?D:U}function zp(S,A){return S!=null&&Rw(S,A,Pk)}var TI=Ew(function(S,A,D){A!=null&&typeof A.toString!="function"&&(A=If.call(A)),S[A]=D},Gp(jn)),CI=Ew(function(S,A,D){A!=null&&typeof A.toString!="function"&&(A=If.call(A)),Jt.call(S,A)?S[A].push(D):S[A]=[D]},ht),PI=St(fl);function Gr(S){return Nn(S)?U_(S):cp(S)}function Ln(S){return Nn(S)?U_(S,!0):(function(A){if(!br(A))return(function(oe){var ce=[];if(oe!=null)for(var he in lr(oe))ce.push(he);return ce})(A);var D=pl(A),U=[];for(var X in A)(X!="constructor"||!D&&Jt.call(A,X))&&U.push(X);return U})(S)}var AI=qs(function(S,A,D){Hf(S,A,D)}),l1=qs(function(S,A,D,U){Hf(S,A,D,U)}),RI=so(function(S,A){var D={};if(S==null)return D;var U=!1;A=ar(A,function(oe){return oe=Bo(oe,S),U||(U=oe.length>1),oe}),Li(S,xp(S),D),U&&(D=ti(D,7,Lk));for(var X=A.length;X--;)gp(D,A[X]);return D}),kI=so(function(S,A){return S==null?{}:(function(D,U){return nw(D,U,function(X,oe){return zp(D,oe)})})(S,A)});function c1(S,A){if(S==null)return{};var D=ar(xp(S),function(U){return[U]});return A=ht(A),nw(S,D,function(U,X){return A(U,X[0])})}var f1=Sw(Gr),h1=Sw(Ln);function Xs(S){return S==null?[]:rl(S,Gr(S))}var II=Ws(function(S,A,D){return A=A.toLowerCase(),S+(D?d1(A):A)});function d1(S){return Vp($t(S).toLowerCase())}function v1(S){return(S=$t(S))&&S.replace(we,$v).replace(Ra,"")}var DI=Ws(function(S,A,D){return S+(D?"-":"")+A.toLowerCase()}),MI=Ws(function(S,A,D){return S+(D?" ":"")+A.toLowerCase()}),NI=bw("toLowerCase"),LI=Ws(function(S,A,D){return S+(D?"_":"")+A.toLowerCase()}),jI=Ws(function(S,A,D){return S+(D?" ":"")+Vp(A)}),FI=Ws(function(S,A,D){return S+(D?" ":"")+A.toUpperCase()}),Vp=bw("toUpperCase");function p1(S,A,D){return S=$t(S),(A=D?i:A)===i?(function(U){return Da.test(U)})(S)?(function(U){return U.match(ka)||[]})(S):(function(U){return U.match(ke)||[]})(S):S.match(A)||[]}var g1=St(function(S,A){try{return pn(S,i,A)}catch(D){return Fp(D)?D:new Lt(D)}}),BI=so(function(S,A){return Dn(A,function(D){D=ji(D),oo(S,D,Lp(S[D],S))}),S});function Gp(S){return function(){return S}}var UI=ww(),zI=ww(!0);function jn(S){return S}function qp(S){return Z_(typeof S=="function"?S:ti(S,1))}var VI=St(function(S,A){return function(D){return fl(D,S,A)}}),GI=St(function(S,A){return function(D){return fl(S,D,A)}});function Wp(S,A,D){var U=Gr(A),X=Wf(A,U);D!=null||br(A)&&(X.length||!U.length)||(D=A,A=S,S=this,X=Wf(A,Gr(A)));var oe=!(br(D)&&"chain"in D&&!D.chain),ce=lo(S);return Dn(X,function(he){var me=A[he];S[he]=me,ce&&(S.prototype[he]=function(){var Te=this.__chain__;if(oe||Te){var Ce=S(this.__wrapped__);return(Ce.__actions__=Mn(this.__actions__)).push({func:me,args:arguments,thisArg:S}),Ce.__chain__=Te,Ce}return me.apply(S,Ii([this.value()],arguments))})}),S}function Hp(){}var qI=wp(ar),WI=wp(_f),HI=wp(Zu);function y1(S){return Pp(S)?Qu(ji(S)):(function(A){return function(D){return za(D,A)}})(S)}var YI=Ow(),XI=Ow(!0);function Yp(){return[]}function Xp(){return!1}var $p,$I=Zf(function(S,A){return S+A},0),KI=Ep("ceil"),ZI=Zf(function(S,A){return S/A},1),QI=Ep("floor"),JI=Zf(function(S,A){return S*A},1),eD=Ep("round"),tD=Zf(function(S,A){return S-A},0);return te.after=function(S,A){if(typeof A!="function")throw new Jn(o);return S=Ot(S),function(){if(--S<1)return A.apply(this,arguments)}},te.ary=Kw,te.assign=wI,te.assignIn=u1,te.assignInWith=ch,te.assignWith=EI,te.at=OI,te.before=Zw,te.bind=Lp,te.bindAll=BI,te.bindKey=Qw,te.castArray=function(){if(!arguments.length)return[];var S=arguments[0];return Et(S)?S:[S]},te.chain=Yw,te.chunk=function(S,A,D){A=(D?mn(S,A,D):A===i)?1:Mr(Ot(A),0);var U=S==null?0:S.length;if(!U||A<1)return[];for(var X=0,oe=0,ce=He(Ff(U/A));X<U;)ce[oe++]=ri(S,X,X+=A);return ce},te.compact=function(S){for(var A=-1,D=S==null?0:S.length,U=0,X=[];++A<D;){var oe=S[A];oe&&(X[U++]=oe)}return X},te.concat=function(){var S=arguments.length;if(!S)return[];for(var A=He(S-1),D=arguments[0],U=S;U--;)A[U-1]=arguments[U];return Ii(Et(D)?Mn(D):[D],Xr(A,1))},te.cond=function(S){var A=S==null?0:S.length,D=ht();return S=A?ar(S,function(U){if(typeof U[1]!="function")throw new Jn(o);return[D(U[0]),U[1]]}):[],St(function(U){for(var X=-1;++X<A;){var oe=S[X];if(pn(oe[0],this,U))return pn(oe[1],this,U)}})},te.conforms=function(S){return(function(A){var D=Gr(A);return function(U){return G_(U,A,D)}})(ti(S,1))},te.constant=Gp,te.countBy=nI,te.create=function(S,A){var D=Gs(S);return A==null?D:V_(D,A)},te.curry=function S(A,D,U){var X=ao(A,8,i,i,i,i,i,D=U?i:D);return X.placeholder=S.placeholder,X},te.curryRight=function S(A,D,U){var X=ao(A,16,i,i,i,i,i,D=U?i:D);return X.placeholder=S.placeholder,X},te.debounce=Jw,te.defaults=xI,te.defaultsDeep=SI,te.defer=fI,te.delay=hI,te.difference=Bk,te.differenceBy=Uk,te.differenceWith=zk,te.drop=function(S,A,D){var U=S==null?0:S.length;return U?ri(S,(A=D||A===i?1:Ot(A))<0?0:A,U):[]},te.dropRight=function(S,A,D){var U=S==null?0:S.length;return U?ri(S,0,(A=U-(A=D||A===i?1:Ot(A)))<0?0:A):[]},te.dropRightWhile=function(S,A){return S&&S.length?Xf(S,ht(A,3),!0,!0):[]},te.dropWhile=function(S,A){return S&&S.length?Xf(S,ht(A,3),!0):[]},te.fill=function(S,A,D,U){var X=S==null?0:S.length;return X?(D&&typeof D!="number"&&mn(S,A,D)&&(D=0,U=X),(function(oe,ce,he,me){var Te=oe.length;for((he=Ot(he))<0&&(he=-he>Te?0:Te+he),(me=me===i||me>Te?Te:Ot(me))<0&&(me+=Te),me=he>me?0:a1(me);he<me;)oe[he++]=ce;return oe})(S,A,D,U)):[]},te.filter=function(S,A){return(Et(S)?ki:H_)(S,ht(A,3))},te.flatMap=function(S,A){return Xr(ih(S,A),1)},te.flatMapDeep=function(S,A){return Xr(ih(S,A),c)},te.flatMapDepth=function(S,A,D){return D=D===i?1:Ot(D),Xr(ih(S,A),D)},te.flatten=Gw,te.flattenDeep=function(S){return S!=null&&S.length?Xr(S,c):[]},te.flattenDepth=function(S,A){return S!=null&&S.length?Xr(S,A=A===i?1:Ot(A)):[]},te.flip=function(S){return ao(S,512)},te.flow=UI,te.flowRight=zI,te.fromPairs=function(S){for(var A=-1,D=S==null?0:S.length,U={};++A<D;){var X=S[A];U[X[0]]=X[1]}return U},te.functions=function(S){return S==null?[]:Wf(S,Gr(S))},te.functionsIn=function(S){return S==null?[]:Wf(S,Ln(S))},te.groupBy=aI,te.initial=function(S){return S!=null&&S.length?ri(S,0,-1):[]},te.intersection=Vk,te.intersectionBy=Gk,te.intersectionWith=qk,te.invert=TI,te.invertBy=CI,te.invokeMap=sI,te.iteratee=qp,te.keyBy=uI,te.keys=Gr,te.keysIn=Ln,te.map=ih,te.mapKeys=function(S,A){var D={};return A=ht(A,3),Ni(S,function(U,X,oe){oo(D,A(U,X,oe),U)}),D},te.mapValues=function(S,A){var D={};return A=ht(A,3),Ni(S,function(U,X,oe){oo(D,X,A(U,X,oe))}),D},te.matches=function(S){return J_(ti(S,1))},te.matchesProperty=function(S,A){return ew(S,ti(A,1))},te.memoize=ah,te.merge=AI,te.mergeWith=l1,te.method=VI,te.methodOf=GI,te.mixin=Wp,te.negate=sh,te.nthArg=function(S){return S=Ot(S),St(function(A){return tw(A,S)})},te.omit=RI,te.omitBy=function(S,A){return c1(S,sh(ht(A)))},te.once=function(S){return Zw(2,S)},te.orderBy=function(S,A,D,U){return S==null?[]:(Et(A)||(A=A==null?[]:[A]),Et(D=U?i:D)||(D=D==null?[]:[D]),rw(S,A,D))},te.over=qI,te.overArgs=dI,te.overEvery=WI,te.overSome=HI,te.partial=jp,te.partialRight=e1,te.partition=lI,te.pick=kI,te.pickBy=c1,te.property=y1,te.propertyOf=function(S){return function(A){return S==null?i:za(S,A)}},te.pull=Wk,te.pullAll=Ww,te.pullAllBy=function(S,A,D){return S&&S.length&&A&&A.length?hp(S,A,ht(D,2)):S},te.pullAllWith=function(S,A,D){return S&&S.length&&A&&A.length?hp(S,A,i,D):S},te.pullAt=Hk,te.range=YI,te.rangeRight=XI,te.rearg=vI,te.reject=function(S,A){return(Et(S)?ki:H_)(S,sh(ht(A,3)))},te.remove=function(S,A){var D=[];if(!S||!S.length)return D;var U=-1,X=[],oe=S.length;for(A=ht(A,3);++U<oe;){var ce=S[U];A(ce,U,S)&&(D.push(ce),X.push(U))}return iw(S,X),D},te.rest=function(S,A){if(typeof S!="function")throw new Jn(o);return St(S,A=A===i?A:Ot(A))},te.reverse=Mp,te.sampleSize=function(S,A,D){return A=(D?mn(S,A,D):A===i)?1:Ot(A),(Et(S)?Ok:Rk)(S,A)},te.set=function(S,A,D){return S==null?S:dl(S,A,D)},te.setWith=function(S,A,D,U){return U=typeof U=="function"?U:i,S==null?S:dl(S,A,D,U)},te.shuffle=function(S){return(Et(S)?xk:Ik)(S)},te.slice=function(S,A,D){var U=S==null?0:S.length;return U?(D&&typeof D!="number"&&mn(S,A,D)?(A=0,D=U):(A=A==null?0:Ot(A),D=D===i?U:Ot(D)),ri(S,A,D)):[]},te.sortBy=cI,te.sortedUniq=function(S){return S&&S.length?aw(S):[]},te.sortedUniqBy=function(S,A){return S&&S.length?aw(S,ht(A,2)):[]},te.split=function(S,A,D){return D&&typeof D!="number"&&mn(S,A,D)&&(A=D=i),(D=D===i?d:D>>>0)?(S=$t(S))&&(typeof A=="string"||A!=null&&!Bp(A))&&!(A=Wn(A))&&Mo(S)?Uo(Vr(S),0,D):S.split(A,D):[]},te.spread=function(S,A){if(typeof S!="function")throw new Jn(o);return A=A==null?0:Mr(Ot(A),0),St(function(D){var U=D[A],X=Uo(D,0,A);return U&&Ii(X,U),pn(S,this,X)})},te.tail=function(S){var A=S==null?0:S.length;return A?ri(S,1,A):[]},te.take=function(S,A,D){return S&&S.length?ri(S,0,(A=D||A===i?1:Ot(A))<0?0:A):[]},te.takeRight=function(S,A,D){var U=S==null?0:S.length;return U?ri(S,(A=U-(A=D||A===i?1:Ot(A)))<0?0:A,U):[]},te.takeRightWhile=function(S,A){return S&&S.length?Xf(S,ht(A,3),!1,!0):[]},te.takeWhile=function(S,A){return S&&S.length?Xf(S,ht(A,3)):[]},te.tap=function(S,A){return A(S),S},te.throttle=function(S,A,D){var U=!0,X=!0;if(typeof S!="function")throw new Jn(o);return br(D)&&(U="leading"in D?!!D.leading:U,X="trailing"in D?!!D.trailing:X),Jw(S,A,{leading:U,maxWait:A,trailing:X})},te.thru=nh,te.toArray=o1,te.toPairs=f1,te.toPairsIn=h1,te.toPath=function(S){return Et(S)?ar(S,ji):Hn(S)?[S]:Mn(Bw($t(S)))},te.toPlainObject=s1,te.transform=function(S,A,D){var U=Et(S),X=U||zo(S)||Ys(S);if(A=ht(A,4),D==null){var oe=S&&S.constructor;D=X?U?new oe:[]:br(S)&&lo(oe)?Gs(Nf(S)):{}}return(X?Dn:Ni)(S,function(ce,he,me){return A(D,ce,he,me)}),D},te.unary=function(S){return Kw(S,1)},te.union=Yk,te.unionBy=Xk,te.unionWith=$k,te.uniq=function(S){return S&&S.length?Fo(S):[]},te.uniqBy=function(S,A){return S&&S.length?Fo(S,ht(A,2)):[]},te.uniqWith=function(S,A){return A=typeof A=="function"?A:i,S&&S.length?Fo(S,i,A):[]},te.unset=function(S,A){return S==null||gp(S,A)},te.unzip=Np,te.unzipWith=Hw,te.update=function(S,A,D){return S==null?S:uw(S,A,bp(D))},te.updateWith=function(S,A,D,U){return U=typeof U=="function"?U:i,S==null?S:uw(S,A,bp(D),U)},te.values=Xs,te.valuesIn=function(S){return S==null?[]:rl(S,Ln(S))},te.without=Kk,te.words=p1,te.wrap=function(S,A){return jp(bp(A),S)},te.xor=Zk,te.xorBy=Qk,te.xorWith=Jk,te.zip=eI,te.zipObject=function(S,A){return cw(S||[],A||[],ll)},te.zipObjectDeep=function(S,A){return cw(S||[],A||[],dl)},te.zipWith=tI,te.entries=f1,te.entriesIn=h1,te.extend=u1,te.extendWith=ch,Wp(te,te),te.add=$I,te.attempt=g1,te.camelCase=II,te.capitalize=d1,te.ceil=KI,te.clamp=function(S,A,D){return D===i&&(D=A,A=i),D!==i&&(D=(D=ii(D))==D?D:0),A!==i&&(A=(A=ii(A))==A?A:0),Ua(ii(S),A,D)},te.clone=function(S){return ti(S,4)},te.cloneDeep=function(S){return ti(S,5)},te.cloneDeepWith=function(S,A){return ti(S,5,A=typeof A=="function"?A:i)},te.cloneWith=function(S,A){return ti(S,4,A=typeof A=="function"?A:i)},te.conformsTo=function(S,A){return A==null||G_(S,A,Gr(A))},te.deburr=v1,te.defaultTo=function(S,A){return S==null||S!=S?A:S},te.divide=ZI,te.endsWith=function(S,A,D){S=$t(S),A=Wn(A);var U=S.length,X=D=D===i?U:Ua(Ot(D),0,U);return(D-=A.length)>=0&&S.slice(D,X)==A},te.eq=mi,te.escape=function(S){return(S=$t(S))&&ae.test(S)?S.replace($,Kv):S},te.escapeRegExp=function(S){return(S=$t(S))&&q.test(S)?S.replace(B,"\\$&"):S},te.every=function(S,A,D){var U=Et(S)?_f:Tk;return D&&mn(S,A,D)&&(A=i),U(S,ht(A,3))},te.find=iI,te.findIndex=zw,te.findKey=function(S,A){return wf(S,ht(A,3),Ni)},te.findLast=oI,te.findLastIndex=Vw,te.findLastKey=function(S,A){return wf(S,ht(A,3),ap)},te.floor=QI,te.forEach=Xw,te.forEachRight=$w,te.forIn=function(S,A){return S==null?S:op(S,ht(A,3),Ln)},te.forInRight=function(S,A){return S==null?S:Y_(S,ht(A,3),Ln)},te.forOwn=function(S,A){return S&&Ni(S,ht(A,3))},te.forOwnRight=function(S,A){return S&&ap(S,ht(A,3))},te.get=Up,te.gt=pI,te.gte=gI,te.has=function(S,A){return S!=null&&Rw(S,A,Ck)},te.hasIn=zp,te.head=qw,te.identity=jn,te.includes=function(S,A,D,U){S=Nn(S)?S:Xs(S),D=D&&!U?Ot(D):0;var X=S.length;return D<0&&(D=Mr(X+D,0)),lh(S)?D<=X&&S.indexOf(A,D)>-1:!!X&&Do(S,A,D)>-1},te.indexOf=function(S,A,D){var U=S==null?0:S.length;if(!U)return-1;var X=D==null?0:Ot(D);return X<0&&(X=Mr(U+X,0)),Do(S,A,X)},te.inRange=function(S,A,D){return A=co(A),D===i?(D=A,A=0):D=co(D),(function(U,X,oe){return U>=sn(X,oe)&&U<Mr(X,oe)})(S=ii(S),A,D)},te.invoke=PI,te.isArguments=qa,te.isArray=Et,te.isArrayBuffer=yI,te.isArrayLike=Nn,te.isArrayLikeObject=Tr,te.isBoolean=function(S){return S===!0||S===!1||Or(S)&&yn(S)==y},te.isBuffer=zo,te.isDate=mI,te.isElement=function(S){return Or(S)&&S.nodeType===1&&!yl(S)},te.isEmpty=function(S){if(S==null)return!0;if(Nn(S)&&(Et(S)||typeof S=="string"||typeof S.splice=="function"||zo(S)||Ys(S)||qa(S)))return!S.length;var A=un(S);if(A==x||A==P)return!S.size;if(pl(S))return!cp(S).length;for(var D in S)if(Jt.call(S,D))return!1;return!0},te.isEqual=function(S,A){return hl(S,A)},te.isEqualWith=function(S,A,D){var U=(D=typeof D=="function"?D:i)?D(S,A):i;return U===i?hl(S,A,i,D):!!U},te.isError=Fp,te.isFinite=function(S){return typeof S=="number"&&j_(S)},te.isFunction=lo,te.isInteger=t1,te.isLength=uh,te.isMap=r1,te.isMatch=function(S,A){return S===A||lp(S,A,Tp(A))},te.isMatchWith=function(S,A,D){return D=typeof D=="function"?D:i,lp(S,A,Tp(A),D)},te.isNaN=function(S){return n1(S)&&S!=+S},te.isNative=function(S){if(Fk(S))throw new Lt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return K_(S)},te.isNil=function(S){return S==null},te.isNull=function(S){return S===null},te.isNumber=n1,te.isObject=br,te.isObjectLike=Or,te.isPlainObject=yl,te.isRegExp=Bp,te.isSafeInteger=function(S){return t1(S)&&S>=-9007199254740991&&S<=f},te.isSet=i1,te.isString=lh,te.isSymbol=Hn,te.isTypedArray=Ys,te.isUndefined=function(S){return S===i},te.isWeakMap=function(S){return Or(S)&&un(S)==I},te.isWeakSet=function(S){return Or(S)&&yn(S)=="[object WeakSet]"},te.join=function(S,A){return S==null?"":dk.call(S,A)},te.kebabCase=DI,te.last=ni,te.lastIndexOf=function(S,A,D){var U=S==null?0:S.length;if(!U)return-1;var X=U;return D!==i&&(X=(X=Ot(D))<0?Mr(U+X,0):sn(X,U-1)),A==A?(function(oe,ce,he){for(var me=he+1;me--;)if(oe[me]===ce)return me;return me})(S,A,X):Fs(S,Ef,X,!0)},te.lowerCase=MI,te.lowerFirst=NI,te.lt=bI,te.lte=_I,te.max=function(S){return S&&S.length?qf(S,jn,sp):i},te.maxBy=function(S,A){return S&&S.length?qf(S,ht(A,2),sp):i},te.mean=function(S){return Of(S,jn)},te.meanBy=function(S,A){return Of(S,ht(A,2))},te.min=function(S){return S&&S.length?qf(S,jn,fp):i},te.minBy=function(S,A){return S&&S.length?qf(S,ht(A,2),fp):i},te.stubArray=Yp,te.stubFalse=Xp,te.stubObject=function(){return{}},te.stubString=function(){return""},te.stubTrue=function(){return!0},te.multiply=JI,te.nth=function(S,A){return S&&S.length?tw(S,Ot(A)):i},te.noConflict=function(){return Er._===this&&(Er._=sk),this},te.noop=Hp,te.now=oh,te.pad=function(S,A,D){S=$t(S);var U=(A=Ot(A))?No(S):0;if(!A||U>=A)return S;var X=(A-U)/2;return Qf(Bf(X),D)+S+Qf(Ff(X),D)},te.padEnd=function(S,A,D){S=$t(S);var U=(A=Ot(A))?No(S):0;return A&&U<A?S+Qf(A-U,D):S},te.padStart=function(S,A,D){S=$t(S);var U=(A=Ot(A))?No(S):0;return A&&U<A?Qf(A-U,D)+S:S},te.parseInt=function(S,A,D){return D||A==null?A=0:A&&(A=+A),gk($t(S).replace(re,""),A||0)},te.random=function(S,A,D){if(D&&typeof D!="boolean"&&mn(S,A,D)&&(A=D=i),D===i&&(typeof A=="boolean"?(D=A,A=i):typeof S=="boolean"&&(D=S,S=i)),S===i&&A===i?(S=0,A=1):(S=co(S),A===i?(A=S,S=0):A=co(A)),S>A){var U=S;S=A,A=U}if(D||S%1||A%1){var X=F_();return sn(S+X*(A-S+Io("1e-"+((X+"").length-1))),A)}return dp(S,A)},te.reduce=function(S,A,D){var U=Et(S)?Ku:xf,X=arguments.length<3;return U(S,ht(A,4),D,X,jo)},te.reduceRight=function(S,A,D){var U=Et(S)?Hv:xf,X=arguments.length<3;return U(S,ht(A,4),D,X,W_)},te.repeat=function(S,A,D){return A=(D?mn(S,A,D):A===i)?1:Ot(A),vp($t(S),A)},te.replace=function(){var S=arguments,A=$t(S[0]);return S.length<3?A:A.replace(S[1],S[2])},te.result=function(S,A,D){var U=-1,X=(A=Bo(A,S)).length;for(X||(X=1,S=i);++U<X;){var oe=S==null?i:S[ji(A[U])];oe===i&&(U=X,oe=D),S=lo(oe)?oe.call(S):oe}return S},te.round=eD,te.runInContext=_e,te.sample=function(S){return(Et(S)?z_:Ak)(S)},te.size=function(S){if(S==null)return 0;if(Nn(S))return lh(S)?No(S):S.length;var A=un(S);return A==x||A==P?S.size:cp(S).length},te.snakeCase=LI,te.some=function(S,A,D){var U=Et(S)?Zu:Dk;return D&&mn(S,A,D)&&(A=i),U(S,ht(A,3))},te.sortedIndex=function(S,A){return Yf(S,A)},te.sortedIndexBy=function(S,A,D){return pp(S,A,ht(D,2))},te.sortedIndexOf=function(S,A){var D=S==null?0:S.length;if(D){var U=Yf(S,A);if(U<D&&mi(S[U],A))return U}return-1},te.sortedLastIndex=function(S,A){return Yf(S,A,!0)},te.sortedLastIndexBy=function(S,A,D){return pp(S,A,ht(D,2),!0)},te.sortedLastIndexOf=function(S,A){if(S!=null&&S.length){var D=Yf(S,A,!0)-1;if(mi(S[D],A))return D}return-1},te.startCase=jI,te.startsWith=function(S,A,D){return S=$t(S),D=D==null?0:Ua(Ot(D),0,S.length),A=Wn(A),S.slice(D,D+A.length)==A},te.subtract=tD,te.sum=function(S){return S&&S.length?el(S,jn):0},te.sumBy=function(S,A){return S&&S.length?el(S,ht(A,2)):0},te.template=function(S,A,D){var U=te.templateSettings;D&&mn(S,A,D)&&(A=i),S=$t(S),A=ch({},A,U,Tw);var X,oe,ce=ch({},A.imports,U.imports,Tw),he=Gr(ce),me=rl(ce,he),Te=0,Ce=A.interpolate||Oe,De="__p += '",$e=Jv((A.escape||Oe).source+"|"+Ce.source+"|"+(Ce===ge?Ge:Oe).source+"|"+(A.evaluate||Oe).source+"|$","g"),Ze="//# sourceURL="+(Jt.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pi+"]")+`
`;S.replace($e,function(Ne,at,qe,wt,yt,Gt){return qe||(qe=wt),De+=S.slice(Te,Gt).replace(Ve,Zv),at&&(X=!0,De+=`' +
__e(`+at+`) +
'`),yt&&(oe=!0,De+=`';
`+yt+`;
__p += '`),qe&&(De+=`' +
((__t = (`+qe+`)) == null ? '' : __t) +
'`),Te=Gt+Ne.length,Ne}),De+=`';
`;var ut=Jt.call(A,"variable")&&A.variable;if(ut){if(Xe.test(ut))throw new Lt("Invalid `variable` option passed into `_.template`")}else De=`with (obj) {
`+De+`
}
`;De=(oe?De.replace(Q,""):De).replace(J,"$1").replace(ne,"$1;"),De="function("+(ut||"obj")+`) {
`+(ut?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var Ae=g1(function(){return Dr(he,Ze+"return "+De).apply(i,me)});if(Ae.source=De,Fp(Ae))throw Ae;return Ae},te.times=function(S,A){if((S=Ot(S))<1||S>f)return[];var D=d,U=sn(S,d);A=ht(A),S-=d;for(var X=tl(U,A);++D<S;)A(D);return X},te.toFinite=co,te.toInteger=Ot,te.toLength=a1,te.toLower=function(S){return $t(S).toLowerCase()},te.toNumber=ii,te.toSafeInteger=function(S){return S?Ua(Ot(S),-9007199254740991,f):S===0?S:0},te.toString=$t,te.toUpper=function(S){return $t(S).toUpperCase()},te.trim=function(S,A,D){if((S=$t(S))&&(D||A===i))return Sf(S);if(!S||!(A=Wn(A)))return S;var U=Vr(S),X=Vr(A);return Uo(U,Tf(U,X),Cf(U,X)+1).join("")},te.trimEnd=function(S,A,D){if((S=$t(S))&&(D||A===i))return S.slice(0,ro(S)+1);if(!S||!(A=Wn(A)))return S;var U=Vr(S);return Uo(U,0,Cf(U,Vr(A))+1).join("")},te.trimStart=function(S,A,D){if((S=$t(S))&&(D||A===i))return S.replace(re,"");if(!S||!(A=Wn(A)))return S;var U=Vr(S);return Uo(U,Tf(U,Vr(A))).join("")},te.truncate=function(S,A){var D=30,U="...";if(br(A)){var X="separator"in A?A.separator:X;D="length"in A?Ot(A.length):D,U="omission"in A?Wn(A.omission):U}var oe=(S=$t(S)).length;if(Mo(S)){var ce=Vr(S);oe=ce.length}if(D>=oe)return S;var he=D-No(U);if(he<1)return U;var me=ce?Uo(ce,0,he).join(""):S.slice(0,he);if(X===i)return me+U;if(ce&&(he+=me.length-he),Bp(X)){if(S.slice(he).search(X)){var Te,Ce=me;for(X.global||(X=Jv(X.source,$t(Le.exec(X))+"g")),X.lastIndex=0;Te=X.exec(Ce);)var De=Te.index;me=me.slice(0,De===i?he:De)}}else if(S.indexOf(Wn(X),he)!=he){var $e=me.lastIndexOf(X);$e>-1&&(me=me.slice(0,$e))}return me+U},te.unescape=function(S){return(S=$t(S))&&Z.test(S)?S.replace(K,gi):S},te.uniqueId=function(S){var A=++ok;return $t(S)+A},te.upperCase=FI,te.upperFirst=Vp,te.each=Xw,te.eachRight=$w,te.first=qw,Wp(te,($p={},Ni(te,function(S,A){Jt.call(te.prototype,A)||($p[A]=S)}),$p),{chain:!1}),te.VERSION="4.17.21",Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){te[S].placeholder=te}),Dn(["drop","take"],function(S,A){At.prototype[S]=function(D){D=D===i?1:Mr(Ot(D),0);var U=this.__filtered__&&!A?new At(this):this.clone();return U.__filtered__?U.__takeCount__=sn(D,U.__takeCount__):U.__views__.push({size:sn(D,d),type:S+(U.__dir__<0?"Right":"")}),U},At.prototype[S+"Right"]=function(D){return this.reverse()[S](D).reverse()}}),Dn(["filter","map","takeWhile"],function(S,A){var D=A+1,U=D==1||D==3;At.prototype[S]=function(X){var oe=this.clone();return oe.__iteratees__.push({iteratee:ht(X,3),type:D}),oe.__filtered__=oe.__filtered__||U,oe}}),Dn(["head","last"],function(S,A){var D="take"+(A?"Right":"");At.prototype[S]=function(){return this[D](1).value()[0]}}),Dn(["initial","tail"],function(S,A){var D="drop"+(A?"":"Right");At.prototype[S]=function(){return this.__filtered__?new At(this):this[D](1)}}),At.prototype.compact=function(){return this.filter(jn)},At.prototype.find=function(S){return this.filter(S).head()},At.prototype.findLast=function(S){return this.reverse().find(S)},At.prototype.invokeMap=St(function(S,A){return typeof S=="function"?new At(this):this.map(function(D){return fl(D,S,A)})}),At.prototype.reject=function(S){return this.filter(sh(ht(S)))},At.prototype.slice=function(S,A){S=Ot(S);var D=this;return D.__filtered__&&(S>0||A<0)?new At(D):(S<0?D=D.takeRight(-S):S&&(D=D.drop(S)),A!==i&&(D=(A=Ot(A))<0?D.dropRight(-A):D.take(A-S)),D)},At.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},At.prototype.toArray=function(){return this.take(d)},Ni(At.prototype,function(S,A){var D=/^(?:filter|find|map|reject)|While$/.test(A),U=/^(?:head|last)$/.test(A),X=te[U?"take"+(A=="last"?"Right":""):A],oe=U||/^find/.test(A);X&&(te.prototype[A]=function(){var ce=this.__wrapped__,he=U?[1]:arguments,me=ce instanceof At,Te=he[0],Ce=me||Et(ce),De=function(at){var qe=X.apply(te,Ii([at],he));return U&&$e?qe[0]:qe};Ce&&D&&typeof Te=="function"&&Te.length!=1&&(me=Ce=!1);var $e=this.__chain__,Ze=!!this.__actions__.length,ut=oe&&!$e,Ae=me&&!Ze;if(!oe&&Ce){ce=Ae?ce:new At(this);var Ne=S.apply(ce,he);return Ne.__actions__.push({func:nh,args:[De],thisArg:i}),new ei(Ne,$e)}return ut&&Ae?S.apply(this,he):(Ne=this.thru(De),ut?U?Ne.value()[0]:Ne.value():Ne)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(S){var A=Af[S],D=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",U=/^(?:pop|shift)$/.test(S);te.prototype[S]=function(){var X=arguments;if(U&&!this.__chain__){var oe=this.value();return A.apply(Et(oe)?oe:[],X)}return this[D](function(ce){return A.apply(Et(ce)?ce:[],X)})}}),Ni(At.prototype,function(S,A){var D=te[A];if(D){var U=D.name+"";Jt.call(Vs,U)||(Vs[U]=[]),Vs[U].push({name:A,func:D})}}),Vs[Kf(i,2).name]=[{name:"wrapper",func:i}],At.prototype.clone=function(){var S=new At(this.__wrapped__);return S.__actions__=Mn(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=Mn(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=Mn(this.__views__),S},At.prototype.reverse=function(){if(this.__filtered__){var S=new At(this);S.__dir__=-1,S.__filtered__=!0}else(S=this.clone()).__dir__*=-1;return S},At.prototype.value=function(){var S=this.__wrapped__.value(),A=this.__dir__,D=Et(S),U=A<0,X=D?S.length:0,oe=(function(Gt,nt,gt){for(var Nr=-1,Cr=gt.length;++Nr<Cr;){var bn=gt[Nr],cr=bn.size;switch(bn.type){case"drop":Gt+=cr;break;case"dropRight":nt-=cr;break;case"take":nt=sn(nt,Gt+cr);break;case"takeRight":Gt=Mr(Gt,nt-cr)}}return{start:Gt,end:nt}})(0,X,this.__views__),ce=oe.start,he=oe.end,me=he-ce,Te=U?he:ce-1,Ce=this.__iteratees__,De=Ce.length,$e=0,Ze=sn(me,this.__takeCount__);if(!D||!U&&X==me&&Ze==me)return lw(S,this.__actions__);var ut=[];e:for(;me--&&$e<Ze;){for(var Ae=-1,Ne=S[Te+=A];++Ae<De;){var at=Ce[Ae],qe=at.iteratee,wt=at.type,yt=qe(Ne);if(wt==2)Ne=yt;else if(!yt){if(wt==1)continue e;break e}}ut[$e++]=Ne}return ut},te.prototype.at=rI,te.prototype.chain=function(){return Yw(this)},te.prototype.commit=function(){return new ei(this.value(),this.__chain__)},te.prototype.next=function(){this.__values__===i&&(this.__values__=o1(this.value()));var S=this.__index__>=this.__values__.length;return{done:S,value:S?i:this.__values__[this.__index__++]}},te.prototype.plant=function(S){for(var A,D=this;D instanceof Vf;){var U=Uw(D);U.__index__=0,U.__values__=i,A?X.__wrapped__=U:A=U;var X=U;D=D.__wrapped__}return X.__wrapped__=S,A},te.prototype.reverse=function(){var S=this.__wrapped__;if(S instanceof At){var A=S;return this.__actions__.length&&(A=new At(this)),(A=A.reverse()).__actions__.push({func:nh,args:[Mp],thisArg:i}),new ei(A,this.__chain__)}return this.thru(Mp)},te.prototype.toJSON=te.prototype.valueOf=te.prototype.value=function(){return lw(this.__wrapped__,this.__actions__)},te.prototype.first=te.prototype.head,il&&(te.prototype[il]=function(){return this}),te})();Er._=Qn,(n=(function(){return Qn}).call(e,t,e,r))===i||(r.exports=n)}).call(this)},5267:function(r,e,t){var n=this&&this.__extends||(function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAction=void 0;var i=t(4671),o=t(5649),a=t(7479),s=(function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h.pending=!1,h}return n(l,u),l.prototype.schedule=function(c,f){var h;if(f===void 0&&(f=0),this.closed)return this;this.state=c;var d=this.id,v=this.scheduler;return d!=null&&(this.id=this.recycleAsyncId(v,d,f)),this.pending=!0,this.delay=f,this.id=(h=this.id)!==null&&h!==void 0?h:this.requestAsyncId(v,this.id,f),this},l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),o.intervalProvider.setInterval(c.flush.bind(c,this),h)},l.prototype.recycleAsyncId=function(c,f,h){if(h===void 0&&(h=0),h!=null&&this.delay===h&&this.pending===!1)return f;f!=null&&o.intervalProvider.clearInterval(f)},l.prototype.execute=function(c,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var h=this._execute(c,f);if(h)return h;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(c,f){var h,d=!1;try{this.work(c)}catch(v){d=!0,h=v||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),h},l.prototype.unsubscribe=function(){if(!this.closed){var c=this.id,f=this.scheduler,h=f.actions;this.work=this.state=this.scheduler=null,this.pending=!1,a.arrRemove(h,this),c!=null&&(this.id=this.recycleAsyncId(f,c,null)),this.delay=null,u.prototype.unsubscribe.call(this)}},l})(i.Action);e.AsyncAction=s},5319:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})(),i=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var o=i(t(1048)),a=(function(s){function u(l){var c=this,f=(function(h){return h instanceof o.default.Buffer?h:typeof h=="number"&&typeof o.default.Buffer.alloc=="function"?o.default.Buffer.alloc(h):new o.default.Buffer(h)})(l);return(c=s.call(this,f.length)||this)._buffer=f,c}return n(u,s),u.prototype.getUInt8=function(l){return this._buffer.readUInt8(l)},u.prototype.getInt8=function(l){return this._buffer.readInt8(l)},u.prototype.getFloat64=function(l){return this._buffer.readDoubleBE(l)},u.prototype.getVarInt=function(l){for(var c=0,f=this._buffer.readInt8(l+c),h=f%128;f/128>=1;)c+=1,h+=(f=this._buffer.readInt8(l+c))%128;return{length:c+1,value:h}},u.prototype.putUInt8=function(l,c){this._buffer.writeUInt8(c,l)},u.prototype.putInt8=function(l,c){this._buffer.writeInt8(c,l)},u.prototype.putFloat64=function(l,c){this._buffer.writeDoubleBE(c,l)},u.prototype.putBytes=function(l,c){if(c instanceof u){var f=Math.min(c.length-c.position,this.length-l);c._buffer.copy(this._buffer,l,c.position,c.position+f),c.position+=f}else s.prototype.putBytes.call(this,l,c)},u.prototype.getSlice=function(l,c){return new u(this._buffer.slice(l,l+c))},u})(i(t(7174)).default);e.default=a,e.alloc=function(s){return new a(s)}},5337:function(r,e,t){var n=this&&this.__read||function(v,p){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var y,b,g=m.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=g.next()).done;)_.push(y.value)}catch(w){b={error:w}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(b)throw b.error}}return _};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=void 0;var i=t(9445),o=t(4662),a=t(983),s=t(8046),u=t(1018),l=t(1251),c=["addListener","removeListener"],f=["addEventListener","removeEventListener"],h=["on","off"];function d(v,p){return function(m){return function(y){return v[m](p,y)}}}e.fromEvent=function v(p,m,y,b){if(u.isFunction(y)&&(b=y,y=void 0),b)return v(p,m,y).pipe(l.mapOneOrManyArgs(b));var g=n((function(x){return u.isFunction(x.addEventListener)&&u.isFunction(x.removeEventListener)})(p)?f.map(function(x){return function(E){return p[x](m,E,y)}}):(function(x){return u.isFunction(x.addListener)&&u.isFunction(x.removeListener)})(p)?c.map(d(p,m)):(function(x){return u.isFunction(x.on)&&u.isFunction(x.off)})(p)?h.map(d(p,m)):[],2),_=g[0],w=g[1];if(!_&&s.isArrayLike(p))return a.mergeMap(function(x){return v(x,m,y)})(i.innerFrom(p));if(!_)throw new TypeError("Invalid event target");return new o.Observable(function(x){var E=function(){for(var O=[],T=0;T<arguments.length;T++)O[T]=arguments[T];return x.next(1<O.length?O:O[0])};return _(E),function(){return w(E)}})}},5348:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7521));e.default=n({},o.default)},5361:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=t(7452),i=t(6781),o=t(7665),a=t(9305),s=a.error.PROTOCOL_ERROR,u=(function(){function c(f){this._ch=f,this._byteArraysSupported=!0}return c.prototype.packable=function(f,h){var d,v=this;h===void 0&&(h=i.functional.identity);try{f=h(f)}catch(y){return function(){throw y}}if(f===null)return function(){return v._ch.writeUInt8(192)};if(f===!0)return function(){return v._ch.writeUInt8(195)};if(f===!1)return function(){return v._ch.writeUInt8(194)};if(typeof f=="number")return function(){return v.packFloat(f)};if(typeof f=="string")return function(){return v.packString(f)};if(typeof f=="bigint")return function(){return v.packInteger((0,a.int)(f))};if((0,a.isInt)(f))return function(){return v.packInteger(f)};if(f instanceof Int8Array)return function(){return v.packBytes(f)};if(f instanceof Array)return function(){v.packListHeader(f.length);for(var y=0;y<f.length;y++)v.packable(f[y]===void 0?null:f[y],h)()};if((d=f)!=null&&typeof d[Symbol.iterator]=="function")return this.packableIterable(f,h);if(f instanceof o.Structure){for(var p=[],m=0;m<f.fields.length;m++)p[m]=this.packable(f.fields[m],h);return function(){return v.packStruct(f.signature,p)}}return typeof f=="object"?function(){for(var y=Object.keys(f),b=0,g=0;g<y.length;g++)f[y[g]]!==void 0&&b++;for(v.packMapHeader(b),g=0;g<y.length;g++){var _=y[g];f[_]!==void 0&&(v.packString(_),v.packable(f[_],h)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(f))},c.prototype.packableIterable=function(f,h){try{var d=Array.from(f);return this.packable(d,h)}catch(v){throw(0,a.newError)("Cannot pack given iterable, ".concat(v.message,": ").concat(f))}},c.prototype.packStruct=function(f,h){h=h||[],this.packStructHeader(h.length,f);for(var d=0;d<h.length;d++)h[d]()},c.prototype.packInteger=function(f){var h=f.high,d=f.low;f.greaterThanOrEqual(-16)&&f.lessThan(128)?this._ch.writeInt8(d):f.greaterThanOrEqual(-128)&&f.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(d)):f.greaterThanOrEqual(-32768)&&f.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(d)):f.greaterThanOrEqual(-2147483648)&&f.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(d)):(this._ch.writeUInt8(203),this._ch.writeInt32(h),this._ch.writeInt32(d))},c.prototype.packFloat=function(f){this._ch.writeUInt8(193),this._ch.writeFloat64(f)},c.prototype.packString=function(f){var h=n.utf8.encode(f),d=h.length;if(d<16)this._ch.writeUInt8(128|d),this._ch.writeBytes(h);else if(d<256)this._ch.writeUInt8(208),this._ch.writeUInt8(d),this._ch.writeBytes(h);else if(d<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(d/256|0),this._ch.writeUInt8(d%256),this._ch.writeBytes(h);else{if(!(d<4294967296))throw(0,a.newError)("UTF-8 strings of size "+d+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((d/16777216|0)%256),this._ch.writeUInt8((d/65536|0)%256),this._ch.writeUInt8((d/256|0)%256),this._ch.writeUInt8(d%256),this._ch.writeBytes(h)}},c.prototype.packListHeader=function(f){if(f<16)this._ch.writeUInt8(144|f);else if(f<256)this._ch.writeUInt8(212),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Lists of size "+f+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packBytes=function(f){if(!this._byteArraysSupported)throw(0,a.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(f.length);for(var h=0;h<f.length;h++)this._ch.writeInt8(f[h])},c.prototype.packBytesHeader=function(f){if(f<256)this._ch.writeUInt8(204),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Byte arrays of size "+f+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packMapHeader=function(f){if(f<16)this._ch.writeUInt8(160|f);else if(f<256)this._ch.writeUInt8(216),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(f/256|0),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Maps of size "+f+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packStructHeader=function(f,h){if(f<16)this._ch.writeUInt8(176|f),this._ch.writeUInt8(h);else if(f<256)this._ch.writeUInt8(220),this._ch.writeUInt8(f),this._ch.writeUInt8(h);else{if(!(f<65536))throw(0,a.newError)("Structures of size "+f+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(f/256|0),this._ch.writeUInt8(f%256)}},c.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},c.prototype._nonPackableValue=function(f){return function(){throw(0,a.newError)(f,s)}},c})();e.Packer=u;var l=(function(){function c(f,h){f===void 0&&(f=!1),h===void 0&&(h=!1),this._disableLosslessIntegers=f,this._useBigInt=h}return c.prototype.unpack=function(f,h){h===void 0&&(h=i.functional.identity);var d=f.readUInt8(),v=240&d,p=15&d;if(d===192)return null;var m=this._unpackBoolean(d);if(m!==null)return m;var y=this._unpackNumberOrInteger(d,f);if(y!==null){if((0,a.isInt)(y)){if(this._useBigInt)return y.toBigInt();if(this._disableLosslessIntegers)return y.toNumberOrInfinity()}return y}var b=this._unpackString(d,v,p,f);if(b!==null)return b;var g=this._unpackList(d,v,p,f,h);if(g!==null)return g;var _=this._unpackByteArray(d,f);if(_!==null)return _;var w=this._unpackMap(d,v,p,f,h);if(w!==null)return w;var x=this._unpackStruct(d,v,p,f,h);if(x!==null)return x;throw(0,a.newError)("Unknown packed value with marker "+d.toString(16))},c.prototype.unpackInteger=function(f){var h=f.readUInt8(),d=this._unpackInteger(h,f);if(d==null)throw(0,a.newError)("Unable to unpack integer value with marker "+h.toString(16));return d},c.prototype._unpackBoolean=function(f){return f===195||f!==194&&null},c.prototype._unpackNumberOrInteger=function(f,h){return f===193?h.readFloat64():this._unpackInteger(f,h)},c.prototype._unpackInteger=function(f,h){if(f>=0&&f<128)return(0,a.int)(f);if(f>=240&&f<256)return(0,a.int)(f-256);if(f===200)return(0,a.int)(h.readInt8());if(f===201)return(0,a.int)(h.readInt16());if(f===202){var d=h.readInt32();return(0,a.int)(d)}if(f===203){var v=h.readInt32(),p=h.readInt32();return new a.Integer(p,v)}return null},c.prototype._unpackString=function(f,h,d,v){return h===128?n.utf8.decode(v,d):f===208?n.utf8.decode(v,v.readUInt8()):f===209?n.utf8.decode(v,v.readUInt16()):f===210?n.utf8.decode(v,v.readUInt32()):null},c.prototype._unpackList=function(f,h,d,v,p){return h===144?this._unpackListWithSize(d,v,p):f===212?this._unpackListWithSize(v.readUInt8(),v,p):f===213?this._unpackListWithSize(v.readUInt16(),v,p):f===214?this._unpackListWithSize(v.readUInt32(),v,p):null},c.prototype._unpackListWithSize=function(f,h,d){for(var v=[],p=0;p<f;p++)v.push(this.unpack(h,d));return v},c.prototype._unpackByteArray=function(f,h){return f===204?this._unpackByteArrayWithSize(h.readUInt8(),h):f===205?this._unpackByteArrayWithSize(h.readUInt16(),h):f===206?this._unpackByteArrayWithSize(h.readUInt32(),h):null},c.prototype._unpackByteArrayWithSize=function(f,h){for(var d=new Int8Array(f),v=0;v<f;v++)d[v]=h.readInt8();return d},c.prototype._unpackMap=function(f,h,d,v,p){return h===160?this._unpackMapWithSize(d,v,p):f===216?this._unpackMapWithSize(v.readUInt8(),v,p):f===217?this._unpackMapWithSize(v.readUInt16(),v,p):f===218?this._unpackMapWithSize(v.readUInt32(),v,p):null},c.prototype._unpackMapWithSize=function(f,h,d){for(var v={},p=0;p<f;p++)v[this.unpack(h,d)]=this.unpack(h,d);return v},c.prototype._unpackStruct=function(f,h,d,v,p){return h===176?this._unpackStructWithSize(d,v,p):f===220?this._unpackStructWithSize(v.readUInt8(),v,p):f===221?this._unpackStructWithSize(v.readUInt16(),v,p):null},c.prototype._unpackStructWithSize=function(f,h,d){for(var v=h.readUInt8(),p=new o.Structure(v,[]),m=0;m<f;m++)p.fields.push(this.unpack(h,d));return d(p)},c})();e.Unpacker=l},5365:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=void 0;var n=t(7843),i=t(3111),o=t(1342),a=t(9445);e.distinct=function(s,u){return n.operate(function(l,c){var f=new Set;l.subscribe(i.createOperatorSubscriber(c,function(h){var d=s?s(h):h;f.has(d)||(f.add(d),c.next(h))})),u&&a.innerFrom(u).subscribe(i.createOperatorSubscriber(c,function(){return f.clear()},o.noop))})}},5382:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.single=void 0;var n=t(2823),i=t(1505),o=t(1759),a=t(7843),s=t(3111);e.single=function(u){return a.operate(function(l,c){var f,h=!1,d=!1,v=0;l.subscribe(s.createOperatorSubscriber(c,function(p){d=!0,u&&!u(p,v++,l)||(h&&c.error(new i.SequenceError("Too many matching values")),h=!0,f=p)},function(){h?(c.next(f),c.complete()):c.error(d?new o.NotFoundError("No matching values"):new n.EmptyError)}))})}},5442:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=void 0;var o=t(7843),a=t(3111),s=t(9445),u=t(6640),l=t(1342),c=t(1107);e.withLatestFrom=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f);return o.operate(function(v,p){for(var m=f.length,y=new Array(m),b=f.map(function(){return!1}),g=!1,_=function(x){s.innerFrom(f[x]).subscribe(a.createOperatorSubscriber(p,function(E){y[x]=E,g||b[x]||(b[x]=!0,(g=b.every(u.identity))&&(b=null))},l.noop))},w=0;w<m;w++)_(w);v.subscribe(a.createOperatorSubscriber(p,function(x){if(g){var E=i([x],n(y));p.next(d?d.apply(void 0,i([],n(E))):E)}}))})}},5459:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(P,R,k,I){I===void 0&&(I=k);var M=Object.getOwnPropertyDescriptor(R,k);M&&!("get"in M?!R.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return R[k]}}),Object.defineProperty(P,I,M)}:function(P,R,k,I){I===void 0&&(I=k),P[I]=R[k]}),i=this&&this.__setModuleDefault||(Object.create?function(P,R){Object.defineProperty(P,"default",{enumerable:!0,value:R})}:function(P,R){P.default=R}),o=this&&this.__importStar||function(P){if(P&&P.__esModule)return P;var R={};if(P!=null)for(var k in P)k!=="default"&&Object.prototype.hasOwnProperty.call(P,k)&&n(R,P,k);return i(R,P),R},a=this&&this.__read||function(P,R){var k=typeof Symbol=="function"&&P[Symbol.iterator];if(!k)return P;var I,M,j=k.call(P),L=[];try{for(;(R===void 0||R-- >0)&&!(I=j.next()).done;)L.push(I.value)}catch(F){M={error:F}}finally{try{I&&!I.done&&(k=j.return)&&k.call(j)}finally{if(M)throw M.error}}return L};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var s=o(t(5022)),u=t(6587),l=t(9691),c=o(t(3371)),f={value:!0,enumerable:!1,configurable:!1,writable:!1},h="__isDuration__",d="__isLocalTime__",v="__isTime__",p="__isDate__",m="__isLocalDateTime__",y="__isDateTime__",b=(function(){function P(R,k,I,M){this.months=(0,u.assertNumberOrInteger)(R,"Months"),this.days=(0,u.assertNumberOrInteger)(k,"Days"),(0,u.assertNumberOrInteger)(I,"Seconds"),(0,u.assertNumberOrInteger)(M,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(I,M),this.nanoseconds=s.normalizeNanosecondsForDuration(M),Object.freeze(this)}return P.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},P})();e.Duration=b,Object.defineProperty(b.prototype,h,f),e.isDuration=function(P){return O(P,h)};var g=(function(){function P(R,k,I,M){this.hour=s.assertValidHour(R),this.minute=s.assertValidMinute(k),this.second=s.assertValidSecond(I),this.nanosecond=s.assertValidNanosecond(M),Object.freeze(this)}return P.fromStandardDate=function(R,k){C(R,k);var I=s.totalNanoseconds(R,k);return new P(R.getHours(),R.getMinutes(),R.getSeconds(),I instanceof c.default?I.toInt():typeof I=="bigint"?(0,c.int)(I).toInt():I)},P.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},P})();e.LocalTime=g,Object.defineProperty(g.prototype,d,f),e.isLocalTime=function(P){return O(P,d)};var _=(function(){function P(R,k,I,M,j){this.hour=s.assertValidHour(R),this.minute=s.assertValidMinute(k),this.second=s.assertValidSecond(I),this.nanosecond=s.assertValidNanosecond(M),this.timeZoneOffsetSeconds=(0,u.assertNumberOrInteger)(j,"Time zone offset in seconds"),Object.freeze(this)}return P.fromStandardDate=function(R,k){return C(R,k),new P(R.getHours(),R.getMinutes(),R.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(R,k)),s.timeZoneOffsetInSeconds(R))},P.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},P})();e.Time=_,Object.defineProperty(_.prototype,v,f),e.isTime=function(P){return O(P,v)};var w=(function(){function P(R,k,I){this.year=s.assertValidYear(R),this.month=s.assertValidMonth(k),this.day=s.assertValidDay(I),Object.freeze(this)}return P.fromStandardDate=function(R){return C(R),new P(R.getFullYear(),R.getMonth()+1,R.getDate())},P.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},P.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},P})();e.Date=w,Object.defineProperty(w.prototype,p,f),e.isDate=function(P){return O(P,p)};var x=(function(){function P(R,k,I,M,j,L,F){this.year=s.assertValidYear(R),this.month=s.assertValidMonth(k),this.day=s.assertValidDay(I),this.hour=s.assertValidHour(M),this.minute=s.assertValidMinute(j),this.second=s.assertValidSecond(L),this.nanosecond=s.assertValidNanosecond(F),Object.freeze(this)}return P.fromStandardDate=function(R,k){return C(R,k),new P(R.getFullYear(),R.getMonth()+1,R.getDate(),R.getHours(),R.getMinutes(),R.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(R,k)))},P.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},P.prototype.toString=function(){return T(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},P})();e.LocalDateTime=x,Object.defineProperty(x.prototype,m,f),e.isLocalDateTime=function(P){return O(P,m)};var E=(function(){function P(R,k,I,M,j,L,F,z,V){this.year=s.assertValidYear(R),this.month=s.assertValidMonth(k),this.day=s.assertValidDay(I),this.hour=s.assertValidHour(M),this.minute=s.assertValidMinute(j),this.second=s.assertValidSecond(L),this.nanosecond=s.assertValidNanosecond(F);var G=a((function(W,H){var Q=W!=null,J=H!=null&&H!=="";if(!Q&&!J)throw(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(W," and id: ").concat(H));var ne=[void 0,void 0];return Q&&((0,u.assertNumberOrInteger)(W,"Time zone offset in seconds"),ne[0]=W),J&&((0,u.assertString)(H,"Time zone ID"),s.assertValidZoneId("Time zone ID",H),ne[1]=H),ne})(z,V),2),Y=G[0],ie=G[1];this.timeZoneOffsetSeconds=Y,this.timeZoneId=ie??void 0,Object.freeze(this)}return P.fromStandardDate=function(R,k){return C(R,k),new P(R.getFullYear(),R.getMonth()+1,R.getDate(),R.getHours(),R.getMinutes(),R.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(R,k)),s.timeZoneOffsetInSeconds(R),null)},P.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},P.prototype.toString=function(){var R;return T(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneOffsetSeconds!=null?s.timeZoneOffsetToIsoString((R=this.timeZoneOffsetSeconds)!==null&&R!==void 0?R:0):"")+(this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"")},P.prototype._toUTC=function(){var R;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var k=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract((R=this.timeZoneOffsetSeconds)!==null&&R!==void 0?R:0);return(0,c.int)(k).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},P})();function O(P,R){return P!=null&&P[R]===!0}function T(P,R,k,I,M,j,L){return s.dateToIsoString(P,R,k)+"T"+s.timeToIsoString(I,M,j,L)}function C(P,R){(0,u.assertValidDate)(P,"Standard date"),R!=null&&(0,u.assertNumberOrInteger)(R,"Nanosecond")}e.DateTime=E,Object.defineProperty(E.prototype,y,f),e.isDateTime=function(P){return O(P,y)}},5471:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;var n=t(7843),i=t(3111);e.map=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){u.next(o.call(a,c,l++))}))})}},5477:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.window=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(1342),s=t(9445);e.window=function(u){return i.operate(function(l,c){var f=new n.Subject;c.next(f.asObservable());var h=function(d){f.error(d),c.error(d)};return l.subscribe(o.createOperatorSubscriber(c,function(d){return f==null?void 0:f.next(d)},function(){f.complete(),c.complete()},h)),s.innerFrom(u).subscribe(o.createOperatorSubscriber(c,function(){f.complete(),c.next(f=new n.Subject)},a.noop,h)),function(){f==null||f.unsubscribe(),f=null}})}},5481:function(r,e,t){var n=this&&this.__awaiter||function(w,x,E,O){return new(E||(E=Promise))(function(T,C){function P(I){try{k(O.next(I))}catch(M){C(M)}}function R(I){try{k(O.throw(I))}catch(M){C(M)}}function k(I){var M;I.done?T(I.value):(M=I.value,M instanceof E?M:new E(function(j){j(M)})).then(P,R)}k((O=O.apply(w,x||[])).next())})},i=this&&this.__generator||function(w,x){var E,O,T,C,P={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return C={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function R(k){return function(I){return(function(M){if(E)throw new TypeError("Generator is already executing.");for(;C&&(C=0,M[0]&&(P=0)),P;)try{if(E=1,O&&(T=2&M[0]?O.return:M[0]?O.throw||((T=O.return)&&T.call(O),0):O.next)&&!(T=T.call(O,M[1])).done)return T;switch(O=0,T&&(M=[2&M[0],T.value]),M[0]){case 0:case 1:T=M;break;case 4:return P.label++,{value:M[1],done:!1};case 5:P.label++,O=M[1],M=[0];continue;case 7:M=P.ops.pop(),P.trys.pop();continue;default:if(!((T=(T=P.trys).length>0&&T[T.length-1])||M[0]!==6&&M[0]!==2)){P=0;continue}if(M[0]===3&&(!T||M[1]>T[0]&&M[1]<T[3])){P.label=M[1];break}if(M[0]===6&&P.label<T[1]){P.label=T[1],T=M;break}if(T&&P.label<T[2]){P.label=T[2],P.ops.push(M);break}T[2]&&P.ops.pop(),P.trys.pop();continue}M=x.call(w,P)}catch(j){M=[6,j],O=0}finally{E=T=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}})([k,I])}}},o=this&&this.__read||function(w,x){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var O,T,C=E.call(w),P=[];try{for(;(x===void 0||x-- >0)&&!(O=C.next()).done;)P.push(O.value)}catch(R){T={error:R}}finally{try{O&&!O.done&&(E=C.return)&&E.call(C)}finally{if(T)throw T.error}}return P},a=this&&this.__spreadArray||function(w,x,E){if(E||arguments.length===2)for(var O,T=0,C=x.length;T<C;T++)!O&&T in x||(O||(O=Array.prototype.slice.call(x,0,T)),O[T]=x[T]);return w.concat(O||Array.prototype.slice.call(x))},s=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(2696),l=t(6587),c=t(326),f=t(9691),h=s(t(9512)),d=t(3618),v=t(6189),p=t(9730),m=t(754),y=s(t(4569)),b=s(t(5909)),g=t(6030),_=(function(){function w(x){var E,O=x.mode,T=x.connectionProvider,C=x.bookmarks,P=x.database,R=x.config,k=x.reactive,I=x.fetchSize,M=x.impersonatedUser,j=x.bookmarkManager,L=x.notificationFilter,F=x.auth,z=x.log,V=x.homeDatabaseCallback;this._mode=O,this._database=P,this._reactive=k,this._fetchSize=I,this._homeDatabaseCallback=V,this._auth=F,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:F,database:P,bookmarks:C,connectionProvider:T,impersonatedUser:M,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:z}),this._writeConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:F,database:P,bookmarks:C,connectionProvider:T,impersonatedUser:M,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:z}),this._open=!0,this._hasTx=!1,this._impersonatedUser=M,this._lastBookmarks=C??p.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=(function(Y){var ie,W=(ie=Y==null?void 0:Y.maxTransactionRetryTime)!==null&&ie!==void 0?ie:null;return new v.TransactionExecutor(W)})(R),this._databaseNameResolved=this._database!=="";var G=this._calculateWatermaks();this._lowRecordWatermark=G.low,this._highRecordWatermark=G.high,this._results=[],this._bookmarkManager=j,this._notificationFilter=L,this._log=z,this._databaseGuess=R==null?void 0:R.cachedHomeDatabase,this._isRoutingSession=(E=R==null?void 0:R.routingDriver)!==null&&E!==void 0&&E}return w.prototype.run=function(x,E,O){var T=this,C=(0,l.validateQueryAndParameters)(x,E),P=C.validatedQuery,R=C.params,k=O!=null?new m.TxConfig(O,this._log):m.TxConfig.empty(),I=this._run(P,R,function(M){return n(T,void 0,void 0,function(){var j,L=this;return i(this,function(F){switch(F.label){case 0:return[4,this._bookmarks()];case 1:return j=F.sent(),this._assertSessionIsOpen(),[2,M.run(P,R,{bookmarks:j,txConfig:k,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(z){return L._onCompleteCallback(z,j)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(I),I},w.prototype._run=function(x,E,O){var T=this._acquireAndConsumeConnection(O),C=T.connectionHolder,P=T.resultPromise.catch(function(k){return Promise.resolve(new u.FailedObserver({error:k}))}),R={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new h.default(P,x,E,C,R)},w.prototype._acquireConnection=function(x){var E=this,O=this._acquireAndConsumeConnection(x),T=O.connectionHolder;return O.resultPromise.then(function(C){return n(E,void 0,void 0,function(){return i(this,function(P){switch(P.label){case 0:return[4,T.releaseConnection()];case 1:return P.sent(),[2,C]}})})})},w.prototype._acquireAndConsumeConnection=function(x){var E,O=this._connectionHolderWithMode(this._mode);return E=this._open?!this._hasTx&&O.initializeConnection(this._databaseGuess)?O.getConnection().then(function(T){return x(T)}):Promise.reject((0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,f.newError)("Cannot run query in a closed session.")),{connectionHolder:O,resultPromise:E}},w.prototype.beginTransaction=function(x){var E=x,O=m.TxConfig.empty();return E!=null&&(O=new m.TxConfig(E,this._log)),this._beginTransaction(this._mode,O,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},w.prototype._beginTransaction=function(x,E,O){var T=this;if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var C=w._validateSessionMode(x),P=this._connectionHolderWithMode(C);P.initializeConnection(this._databaseGuess),this._hasTx=!0;var R=new y.default({connectionHolder:P,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(k,I,M){return T._updateBookmarks(k,I,M)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:O,onDbCallback:this._onDatabaseNameResolved.bind(this)});return R._begin(function(){return T._bookmarks()},E),R},w.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")},w.prototype._transactionClosed=function(){this._hasTx=!1},w.prototype.lastBookmark=function(){return this.lastBookmarks()},w.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},w.prototype._bookmarks=function(){var x;return n(this,void 0,void 0,function(){var E;return i(this,function(O){switch(O.label){case 0:return[4,(x=this._bookmarkManager)===null||x===void 0?void 0:x.getBookmarks()];case 1:return(E=O.sent())===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(a(a([],o(E),!1),o(this._configuredBookmarks),!1))]}})})},w.prototype.readTransaction=function(x,E){var O=new m.TxConfig(E,this._log);return this._runTransaction(c.ACCESS_MODE_READ,O,x)},w.prototype.writeTransaction=function(x,E){var O=new m.TxConfig(E,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,O,x)},w.prototype._runTransaction=function(x,E,O){var T=this;return this._transactionExecutor.execute(function(C){return T._beginTransaction(x,E,C)},O)},w.prototype.executeRead=function(x,E){var O=new m.TxConfig(E,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,O,x)},w.prototype.executeWrite=function(x,E){var O=new m.TxConfig(E,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,O,x)},w.prototype._executeInTransaction=function(x,E,O){var T=this;return this._transactionExecutor.execute(function(C){return T._beginTransaction(x,E,C)},O,b.default.fromTransaction)},w.prototype._onDatabaseNameResolved=function(x){if(this._isRoutingSession&&(this._databaseGuess=x,!this._databaseNameResolved)){var E=x??"";this._database=E,this._readConnectionHolder.setDatabase(E),this._writeConnectionHolder.setDatabase(E),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,g.cacheKey)(this._auth,this._impersonatedUser),x)}},w.prototype._getConnectionAcquistionBookmarks=function(){var x;return n(this,void 0,void 0,function(){var E;return i(this,function(O){switch(O.label){case 0:return[4,(x=this._bookmarkManager)===null||x===void 0?void 0:x.getBookmarks()];case 1:return(E=O.sent())===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(a(a([],o(this._configuredBookmarks),!1),o(E),!1))]}})})},w.prototype._updateBookmarks=function(x,E,O){var T,C,P;x==null||x.isEmpty()||((T=this._bookmarkManager)===null||T===void 0||T.updateBookmarks((C=E==null?void 0:E.values())!==null&&C!==void 0?C:[],(P=x==null?void 0:x.values())!==null&&P!==void 0?P:[]).catch(function(){}),this._lastBookmarks=x,this._configuredBookmarks=p.Bookmarks.empty())},w.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(x){switch(x.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(E){return E._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return x.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:x.sent(),x.label=3;case 3:return[2]}})})},w.prototype[Symbol.asyncDispose]=function(){return this.close()},w.prototype._connectionHolderWithMode=function(x){if(x===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(x===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+x)},w.prototype._onCompleteCallback=function(x,E){this._updateBookmarks(new p.Bookmarks(x.bookmark),E,x.db)},w.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},w.prototype._configureTransactionExecutor=function(x,E){this._transactionExecutor.pipelineBegin=x,this._transactionExecutor.telemetryApi=E},w._validateSessionMode=function(x){var E=x??c.ACCESS_MODE_WRITE;if(E!==c.ACCESS_MODE_READ&&E!==c.ACCESS_MODE_WRITE)throw(0,f.newError)("Illegal session mode "+E);return E},w})();e.default=_},5510:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.every=void 0;var n=t(7843),i=t(3111);e.every=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){o.call(a,c,l++,s)||(u.next(!1),u.complete())},function(){u.next(!0),u.complete()}))})}},5553:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0});var i=t(7174),o=t(5319),a=(function(s){function u(l){for(var c=this,f=0,h=0;h<l.length;h++)f+=l[h].length;return(c=s.call(this,f)||this)._buffers=l,c}return n(u,s),u.prototype.getUInt8=function(l){for(var c=0;c<this._buffers.length;c++){var f=this._buffers[c];if(!(l>=f.length))return f.getUInt8(l);l-=f.length}},u.prototype.getInt8=function(l){for(var c=0;c<this._buffers.length;c++){var f=this._buffers[c];if(!(l>=f.length))return f.getInt8(l);l-=f.length}},u.prototype.getFloat64=function(l){for(var c=(0,o.alloc)(8),f=0;f<8;f++)c.putUInt8(f,this.getUInt8(l+f));return c.getFloat64(0)},u})(i.BaseBuffer);e.default=a},5568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorClass=void 0,e.createErrorClass=function(t){var n=t(function(i){Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}},5572:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=void 0;var i=t(7843),o=t(3111),a=t(7479);e.bufferCount=function(s,u){return u===void 0&&(u=null),u=u??s,i.operate(function(l,c){var f=[],h=0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v,p,m,y,b=null;h++%u===0&&f.push([]);try{for(var g=n(f),_=g.next();!_.done;_=g.next())(E=_.value).push(d),s<=E.length&&(b=b??[]).push(E)}catch(O){v={error:O}}finally{try{_&&!_.done&&(p=g.return)&&p.call(g)}finally{if(v)throw v.error}}if(b)try{for(var w=n(b),x=w.next();!x.done;x=w.next()){var E=x.value;a.arrRemove(f,E),c.next(E)}}catch(O){m={error:O}}finally{try{x&&!x.done&&(y=w.return)&&y.call(w)}finally{if(m)throw m.error}}},function(){var d,v;try{for(var p=n(f),m=p.next();!m.done;m=p.next()){var y=m.value;c.next(y)}}catch(b){d={error:b}}finally{try{m&&!m.done&&(v=p.return)&&v.call(p)}finally{if(d)throw d.error}}c.complete()},void 0,function(){f=null}))})}},5584:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raceInit=e.race=void 0;var n=t(4662),i=t(9445),o=t(8535),a=t(3111);function s(u){return function(l){for(var c=[],f=function(d){c.push(i.innerFrom(u[d]).subscribe(a.createOperatorSubscriber(l,function(v){if(c){for(var p=0;p<c.length;p++)p!==d&&c[p].unsubscribe();c=null}l.next(v)})))},h=0;c&&!l.closed&&h<u.length;h++)f(h)}}e.race=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return(u=o.argsOrArgArray(u)).length===1?i.innerFrom(u[0]):new n.Observable(s(u))},e.raceInit=s},5592:(r,e,t)=>{var n=t(7192);n=n.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),r.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},5600:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.raceWith=void 0;var o=t(5584),a=t(7843),s=t(6640);e.raceWith=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.length?a.operate(function(c,f){o.raceInit(i([c],n(u)))(f)}):s.identity}},5636:(r,e,t)=>{var n=t(1048),i=n.Buffer;function o(s,u){for(var l in s)u[l]=s[l]}function a(s,u,l){return i(s,u,l)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(s,u,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,u,l)},a.alloc=function(s,u,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return u!==void 0?typeof l=="string"?c.fill(u,l):c.fill(u):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},5642:function(r,e,t){var n=this&&this.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(x[O]=E[O])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=_}g(_,w),_.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(g){for(var _,w=1,x=arguments.length;w<x;w++)for(var E in _=arguments[w])Object.prototype.hasOwnProperty.call(_,E)&&(g[E]=_[E]);return g},i.apply(this,arguments)},o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(2857)),s=o(t(7021)),u=t(397),l=t(9014),c=o(t(1175)),f=o(t(3321)),h=t(9305),d=(h.internal.bookmarks.Bookmarks,h.internal.constants.BOLT_PROTOCOL_V3),v=h.internal.txConfig.TxConfig,p="context",m="CALL dbms.cluster.routing.getRoutingTable($".concat(p,")"),y=new l.StreamObserver,b=(function(g){function _(){return g!==null&&g.apply(this,arguments)||this}return n(_,g),Object.defineProperty(_.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(x){return x(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.transformMetadata=function(w){return"t_first"in w&&(w.result_available_after=w.t_first,delete w.t_first),"t_last"in w&&(w.result_consumed_after=w.t_last,delete w.t_last),w},_.prototype.initialize=function(w){var x=this,E=w===void 0?{}:w,O=E.userAgent,T=(E.boltAgent,E.authToken),C=E.notificationFilter,P=E.onError,R=E.onComplete,k=new l.LoginObserver({onError:function(I){return x._onLoginError(I,P)},onCompleted:function(I){return x._onLoginCompleted(I,T,R)}});return(0,u.assertNotificationFilterIsEmpty)(C,this._onProtocolError,k),this.write(s.default.hello(O,T),k,!0),k},_.prototype.prepareToClose=function(){this.write(s.default.goodbye(),y,!0)},_.prototype.beginTransaction=function(w){var x=w===void 0?{}:w,E=x.bookmarks,O=x.txConfig,T=x.database,C=x.impersonatedUser,P=x.notificationFilter,R=x.mode,k=x.beforeError,I=x.afterError,M=x.beforeComplete,j=x.afterComplete,L=new l.ResultStreamObserver({server:this._server,beforeError:k,afterError:I,beforeComplete:M,afterComplete:j});return L.prepareToHandleSingleResponse(),(0,u.assertDatabaseIsEmpty)(T,this._onProtocolError,L),(0,u.assertImpersonatedUserIsEmpty)(C,this._onProtocolError,L),(0,u.assertNotificationFilterIsEmpty)(P,this._onProtocolError,L),this.write(s.default.begin({bookmarks:E,txConfig:O,mode:R}),L,!0),L},_.prototype.commitTransaction=function(w){var x=w===void 0?{}:w,E=x.beforeError,O=x.afterError,T=x.beforeComplete,C=x.afterComplete,P=new l.ResultStreamObserver({server:this._server,beforeError:E,afterError:O,beforeComplete:T,afterComplete:C});return P.prepareToHandleSingleResponse(),this.write(s.default.commit(),P,!0),P},_.prototype.rollbackTransaction=function(w){var x=w===void 0?{}:w,E=x.beforeError,O=x.afterError,T=x.beforeComplete,C=x.afterComplete,P=new l.ResultStreamObserver({server:this._server,beforeError:E,afterError:O,beforeComplete:T,afterComplete:C});return P.prepareToHandleSingleResponse(),this.write(s.default.rollback(),P,!0),P},_.prototype.run=function(w,x,E){var O=E===void 0?{}:E,T=O.bookmarks,C=O.txConfig,P=O.database,R=O.impersonatedUser,k=O.notificationFilter,I=O.mode,M=O.beforeKeys,j=O.afterKeys,L=O.beforeError,F=O.afterError,z=O.beforeComplete,V=O.afterComplete,G=O.flush,Y=G===void 0||G,ie=O.highRecordWatermark,W=ie===void 0?Number.MAX_VALUE:ie,H=O.lowRecordWatermark,Q=H===void 0?Number.MAX_VALUE:H,J=new l.ResultStreamObserver({server:this._server,beforeKeys:M,afterKeys:j,beforeError:L,afterError:F,beforeComplete:z,afterComplete:V,highRecordWatermark:W,lowRecordWatermark:Q});return(0,u.assertDatabaseIsEmpty)(P,this._onProtocolError,J),(0,u.assertImpersonatedUserIsEmpty)(R,this._onProtocolError,J),(0,u.assertNotificationFilterIsEmpty)(k,this._onProtocolError,J),this.write(s.default.runWithMetadata(w,x,{bookmarks:T,txConfig:C,mode:I}),J,!1),this.write(s.default.pullAll(),J,Y),J},_.prototype.requestRoutingInformation=function(w){var x,E=w.routingContext,O=E===void 0?{}:E,T=w.sessionContext,C=T===void 0?{}:T,P=w.onError,R=w.onCompleted,k=this.run(m,((x={})[p]=O,x),i(i({},C),{txConfig:v.empty()}));return new l.ProcedureRouteObserver({resultObserver:k,onProtocolError:this._onProtocolError,onError:P,onCompleted:R})},_})(a.default);e.default=b},5648:function(r,e,t){var n=this&&this.__extends||(function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScheduler=void 0;var i=t(8986),o=(function(a){function s(u,l){l===void 0&&(l=i.Scheduler.now);var c=a.call(this,u,l)||this;return c.actions=[],c._active=!1,c}return n(s,a),s.prototype.flush=function(u){var l=this.actions;if(this._active)l.push(u);else{var c;this._active=!0;do if(c=u.execute(u.state,u.delay))break;while(u=l.shift());if(this._active=!1,c){for(;u=l.shift();)u.unsubscribe();throw c}}},s})(i.Scheduler);e.AsyncScheduler=o},5649:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,n([i,o],t(a))):setInterval.apply(void 0,n([i,o],t(a)))},clearInterval:function(i){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(i)},delegate:void 0}},5742:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=n(t(3057)),a=(n(t(9305)),(function(){function s(u){this._txc=u}return s.prototype.run=function(u,l){var c=this;return new o.default(new i.Observable(function(f){try{f.next(c._txc.run(u,l)),f.complete()}catch(h){f.error(h)}return function(){}}))},s.prototype.commit=function(){var u=this;return new i.Observable(function(l){u._txc.commit().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.rollback=function(){var u=this;return new i.Observable(function(l){u._txc.rollback().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.isOpen=function(){return this._txc.isOpen()},s.prototype.close=function(){var u=this;return new i.Observable(function(l){u._txc.close().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s})());e.default=a},5788:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscriptionError=void 0;var n=t(5568);e.UnsubscriptionError=n.createErrorClass(function(i){return function(o){i(this),this.message=o?o.length+` errors occurred during unsubscription:
`+o.map(function(a,s){return s+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=o}})},5815:function(r,e,t){var n=this&&this.__extends||(function(){var m=function(y,b){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},m(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function g(){this.constructor=y}m(y,b),y.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(m){for(var y,b=1,g=arguments.length;b<g;b++)for(var _ in y=arguments[b])Object.prototype.hasOwnProperty.call(y,_)&&(m[_]=y[_]);return m},i.apply(this,arguments)},o=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(9744)),s=o(t(9238)),u=o(t(3321)),l=o(t(7021)),c=t(9014),f=t(9305).internal.constants,h=f.BOLT_PROTOCOL_V5_5,d=f.FETCH_ALL,v=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),p=(function(m){function y(){return m!==null&&m.apply(this,arguments)||this}return n(y,m),Object.defineProperty(y.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(g){return g(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(b){var g=this,_=b===void 0?{}:b,w=_.userAgent,x=_.boltAgent,E=_.authToken,O=_.notificationFilter,T=_.onError,C=_.onComplete,P={},R=new c.LoginObserver({onError:function(k){return g._onLoginError(k,T)},onCompleted:function(k){return P.metadata=k,g._onLoginCompleted(k)}});return this.write(l.default.hello5x5(w,x,O,this._serversideRouting),R,!1),this.logon({authToken:E,onComplete:function(k){return C(i(i({},k),P.metadata))},onError:T,flush:!0})},y.prototype.beginTransaction=function(b){var g=b===void 0?{}:b,_=g.bookmarks,w=g.txConfig,x=g.database,E=g.mode,O=g.impersonatedUser,T=g.notificationFilter,C=g.beforeError,P=g.afterError,R=g.beforeComplete,k=g.afterComplete,I=new c.ResultStreamObserver({server:this._server,beforeError:C,afterError:P,beforeComplete:R,afterComplete:k});return I.prepareToHandleSingleResponse(),this.write(l.default.begin5x5({bookmarks:_,txConfig:w,database:x,mode:E,impersonatedUser:O,notificationFilter:T}),I,!0),I},y.prototype.run=function(b,g,_){var w=_===void 0?{}:_,x=w.bookmarks,E=w.txConfig,O=w.database,T=w.mode,C=w.impersonatedUser,P=w.notificationFilter,R=w.beforeKeys,k=w.afterKeys,I=w.beforeError,M=w.afterError,j=w.beforeComplete,L=w.afterComplete,F=w.flush,z=F===void 0||F,V=w.reactive,G=V!==void 0&&V,Y=w.fetchSize,ie=Y===void 0?d:Y,W=w.highRecordWatermark,H=W===void 0?Number.MAX_VALUE:W,Q=w.lowRecordWatermark,J=Q===void 0?Number.MAX_VALUE:Q,ne=new c.ResultStreamObserver({server:this._server,reactive:G,fetchSize:ie,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:R,afterKeys:k,beforeError:I,afterError:M,beforeComplete:j,afterComplete:L,highRecordWatermark:H,lowRecordWatermark:J,enrichMetadata:this._enrichMetadata}),K=G;return this.write(l.default.runWithMetadata5x5(b,g,{bookmarks:x,txConfig:E,database:O,mode:T,impersonatedUser:C,notificationFilter:P}),ne,K&&z),G||this.write(l.default.pull({n:ie}),ne,z),ne},y.prototype._enrichMetadata=function(b){return Array.isArray(b.statuses)&&(b.statuses=b.statuses.map(function(g){return i(i({},g),{description:g.neo4j_code!=null?g.status_description:g.description,diagnostic_record:g.diagnostic_record!==null?i(i({},v),g.diagnostic_record):null})})),b},y})(a.default);e.default=p},5837:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,n){n===void 0&&(n=function(){return{get userAgent(){}}});var i=n(),o=i.userAgent!=null?i.userAgent.split("(")[1].split(")")[0]:void 0,a=i.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:o,languageDetails:a}}},5880:function(r,e,t){var n,i;n=function(){var o=function(){},a="undefined",s=typeof window!==a&&typeof window.navigator!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],l={},c=null;function f(b,g){var _=b[g];if(typeof _.bind=="function")return _.bind(b);try{return Function.prototype.bind.call(_,b)}catch{return function(){return Function.prototype.apply.apply(_,[b,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(){for(var b=this.getLevel(),g=0;g<u.length;g++){var _=u[g];this[_]=g<b?o:this.methodFactory(_,b,this.name)}if(this.log=this.debug,typeof console===a&&b<this.levels.SILENT)return"No console available for logging"}function v(b){return function(){typeof console!==a&&(d.call(this),this[b].apply(this,arguments))}}function p(b,g,_){return(function(w){return w==="debug"&&(w="log"),typeof console!==a&&(w==="trace"&&s?h:console[w]!==void 0?f(console,w):console.log!==void 0?f(console,"log"):o)})(b)||v.apply(this,arguments)}function m(b,g){var _,w,x,E=this,O="loglevel";function T(){var R;if(typeof window!==a&&O){try{R=window.localStorage[O]}catch{}if(typeof R===a)try{var k=window.document.cookie,I=encodeURIComponent(O),M=k.indexOf(I+"=");M!==-1&&(R=/^([^;]+)/.exec(k.slice(M+I.length+1))[1])}catch{}return E.levels[R]===void 0&&(R=void 0),R}}function C(R){var k=R;if(typeof k=="string"&&E.levels[k.toUpperCase()]!==void 0&&(k=E.levels[k.toUpperCase()]),typeof k=="number"&&k>=0&&k<=E.levels.SILENT)return k;throw new TypeError("log.setLevel() called with invalid level: "+R)}typeof b=="string"?O+=":"+b:typeof b=="symbol"&&(O=void 0),E.name=b,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=g||p,E.getLevel=function(){return x??w??_},E.setLevel=function(R,k){return x=C(R),k!==!1&&(function(I){var M=(u[I]||"silent").toUpperCase();if(typeof window!==a&&O){try{return void(window.localStorage[O]=M)}catch{}try{window.document.cookie=encodeURIComponent(O)+"="+M+";"}catch{}}})(x),d.call(E)},E.setDefaultLevel=function(R){w=C(R),T()||E.setLevel(R,!1)},E.resetLevel=function(){x=null,(function(){if(typeof window!==a&&O){try{window.localStorage.removeItem(O)}catch{}try{window.document.cookie=encodeURIComponent(O)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}})(),d.call(E)},E.enableAll=function(R){E.setLevel(E.levels.TRACE,R)},E.disableAll=function(R){E.setLevel(E.levels.SILENT,R)},E.rebuild=function(){if(c!==E&&(_=C(c.getLevel())),d.call(E),c===E)for(var R in l)l[R].rebuild()},_=C(c?c.getLevel():"WARN");var P=T();P!=null&&(x=C(P)),d.call(E)}(c=new m).getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var g=l[b];return g||(g=l[b]=new m(b,c.methodFactory)),g};var y=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=y),c},c.getLoggers=function(){return l},c.default=c,c},(i=n.call(e,t,e,r))===void 0||(r.exports=i)},5909:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(i){var o=i.run;this._run=o}return n.fromTransaction=function(i){return new n({run:i.run.bind(i)})},n.prototype.run=function(i,o){return this._run(i,o)},n})();e.default=t},5918:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(7286),a=t(7843);e.zip=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.operate(function(l,c){o.zip.apply(void 0,i([l],n(s))).subscribe(c)})}},5973:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var n=t(9305),i=n.internal.temporalUtil,o=i.DAYS_0000_TO_1970,a=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,u=i.NANOS_PER_MINUTE,l=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,f=i.floorDiv,h=i.floorMod;function d(p){var m=(p=(0,n.int)(p)).add(o).subtract(60),y=(0,n.int)(0);if(m.lessThan(0)){var b=m.add(1).div(a).subtract(1);y=b.multiply(400),m=m.add(b.multiply(-a))}var g=m.multiply(400).add(591).div(a),_=m.subtract(g.multiply(365).add(g.div(4)).subtract(g.div(100)).add(g.div(400)));_.lessThan(0)&&(g=g.subtract(1),_=m.subtract(g.multiply(365).add(g.div(4)).subtract(g.div(100)).add(g.div(400)))),g=g.add(y);var w=_,x=w.multiply(5).add(2).div(153),E=x.add(2).modulo(12).add(1),O=w.subtract(x.multiply(306).add(5).div(10)).add(1);return g=g.add(x.div(10)),new n.Date(g,E,O)}function v(p){var m=(p=(0,n.int)(p)).div(s),y=(p=p.subtract(m.multiply(s))).div(u),b=(p=p.subtract(y.multiply(u))).div(l),g=p.subtract(b.multiply(l));return new n.LocalTime(m,y,b,g)}e.epochDayToDate=d,e.nanoOfDayToLocalTime=v,e.epochSecondAndNanoToLocalDateTime=function(p,m){var y=f(p,c),b=h(p,c).multiply(l).add(m),g=d(y),_=v(b);return new n.LocalDateTime(g.year,g.month,g.day,_.hour,_.minute,_.second,_.nanosecond)}},6013:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObject=void 0,e.createObject=function(t,n){return t.reduce(function(i,o,a){return i[o]=n[a],i},{})}},6030:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cacheKey=void 0;var n=t(4027);e.cacheKey=function(i,o){var a;return o!=null?"basic:"+o:i===void 0?"DEFAULT":i.scheme==="basic"?"basic:"+((a=i.principal)!==null&&a!==void 0?a:""):i.scheme==="kerberos"?"kerberos:"+i.credentials:i.scheme==="bearer"?"bearer:"+i.credentials:i.scheme==="none"?"none":(0,n.stringify)(i,{sortedElements:!0})}},6033:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var n=t(6995),i=t(1866),o=(function(){function f(h,d,v,p){var m,y,b;this.query={text:h,parameters:d},this.queryType=v.type,this.counters=new u((m=v.stats)!==null&&m!==void 0?m:{}),this.updateStatistics=this.counters,this.plan=(v.plan!=null||v.profile!=null)&&new a((y=v.plan)!==null&&y!==void 0?y:v.profile),this.profile=v.profile!=null&&new s(v.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(v),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(v),this.server=new l(v.server,p),this.resultConsumedAfter=v.result_consumed_after,this.resultAvailableAfter=v.result_available_after,this.database={name:(b=v.db)!==null&&b!==void 0?b:null}}return f.prototype.hasPlan=function(){return this.plan instanceof a},f.prototype.hasProfile=function(){return this.profile instanceof s},f})(),a=function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]};e.Plan=a;var s=(function(){function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.dbHits=c("dbHits",h),this.rows=c("rows",h),this.pageCacheMisses=c("pageCacheMisses",h),this.pageCacheHits=c("pageCacheHits",h),this.pageCacheHitRatio=c("pageCacheHitRatio",h),this.time=c("time",h),this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]}return f.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},f})();e.ProfiledPlan=s,e.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var u=(function(){function f(h){var d=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(h).forEach(function(v){var p=v.replace(/(-\w)/g,function(m){return m[1].toUpperCase()});p in d._stats?d._stats[p]=n.util.toNumber(h[v]):p==="systemUpdates"?d._systemUpdates=n.util.toNumber(h[v]):p==="containsSystemUpdates"?d._containsSystemUpdates=h[v]:p==="containsUpdates"&&(d._containsUpdates=h[v])}),this._stats=Object.freeze(this._stats)}return f.prototype.containsUpdates=function(){var h=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(d,v){return d+h._stats[v]},0)>0},f.prototype.updates=function(){return this._stats},f.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},f.prototype.systemUpdates=function(){return this._systemUpdates},f})();e.QueryStatistics=u;var l=function(f,h){f!=null&&(this.address=f.address,this.agent=f.version),this.protocolVersion=h};function c(f,h,d){if(d===void 0&&(d=0),h!==!1&&f in h){var v=h[f];return n.util.toNumber(v)}return d}e.ServerInfo=l,e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=o},6038:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},6086:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=void 0;var n=t(7961),i=t(1731),o=t(6472);e.sampleTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.sample(o.interval(a,s))}},6102:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=void 0;var n=t(4662),i=t(8535),o=t(3111),a=t(1342),s=t(9445);e.onErrorResumeNext=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=i.argsOrArgArray(u);return new n.Observable(function(f){var h=0,d=function(){if(h<c.length){var v=void 0;try{v=s.innerFrom(c[h++])}catch{return void d()}var p=new o.OperatorSubscriber(f,void 0,a.noop,a.noop);v.subscribe(p),p.add(d)}else f.complete()};d()})}},6106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=void 0;var n=t(95),i=t(8918);e.publishLast=function(){return function(o){var a=new n.AsyncSubject;return new i.ConnectableObservable(o,function(){return a})}}},6161:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(6248));e.default=n({},o.default)},6189:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(v){for(var p,m=1,y=arguments.length;m<y;m++)for(var b in p=arguments[m])Object.prototype.hasOwnProperty.call(p,b)&&(v[b]=p[b]);return v},n.apply(this,arguments)},i=this&&this.__awaiter||function(v,p,m,y){return new(m||(m=Promise))(function(b,g){function _(E){try{x(y.next(E))}catch(O){g(O)}}function w(E){try{x(y.throw(E))}catch(O){g(O)}}function x(E){var O;E.done?b(E.value):(O=E.value,O instanceof m?O:new m(function(T){T(O)})).then(_,w)}x((y=y.apply(v,p||[])).next())})},o=this&&this.__generator||function(v,p){var m,y,b,g,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(x){return function(E){return(function(O){if(m)throw new TypeError("Generator is already executing.");for(;g&&(g=0,O[0]&&(_=0)),_;)try{if(m=1,y&&(b=2&O[0]?y.return:O[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,O[1])).done)return b;switch(y=0,b&&(O=[2&O[0],b.value]),O[0]){case 0:case 1:b=O;break;case 4:return _.label++,{value:O[1],done:!1};case 5:_.label++,y=O[1],O=[0];continue;case 7:O=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||O[0]!==6&&O[0]!==2)){_=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){_.label=O[1];break}if(O[0]===6&&_.label<b[1]){_.label=b[1],b=O;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(O);break}b[2]&&_.ops.pop(),_.trys.pop();continue}O=p.call(v,_)}catch(T){O=[6,T],y=0}finally{m=b=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}})([x,E])}}},a=this&&this.__read||function(v,p){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var y,b,g=m.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=g.next()).done;)_.push(y.value)}catch(w){b={error:w}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(b)throw b.error}}return _},s=this&&this.__spreadArray||function(v,p,m){if(m||arguments.length===2)for(var y,b=0,g=p.length;b<g;b++)!y&&b in p||(y||(y=Array.prototype.slice.call(p,0,b)),y[b]=p[b]);return v.concat(y||Array.prototype.slice.call(p))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var u=t(9691),l=t(326);function c(v,p){for(var m=[],y=2;y<arguments.length;y++)m[y-2]=arguments[y];return setTimeout.apply(void 0,s([v,p],a(m),!1))}function f(v){return clearTimeout(v)}var h=(function(){function v(p,m,y,b,g){g===void 0&&(g={setTimeout:c,clearTimeout:f}),this._maxRetryTimeMs=d(p,3e4),this._initialRetryDelayMs=d(m,1e3),this._multiplier=d(y,2),this._jitterFactor=d(b,.2),this._setTimeout=g.setTimeout,this._clearTimeout=g.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=l.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return v.prototype.execute=function(p,m,y){var b=this,g={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){g.apiTransactionConfig=void 0}}};return new Promise(function(_,w){b._executeTransactionInsidePromise(p,m,_,w,y,g).catch(w)}).catch(function(_){var w=Date.now(),x=b._initialRetryDelayMs;return b._retryTransactionPromise(p,m,_,w,x,y,g)})},v.prototype.close=function(){var p=this;this._inFlightTimeoutIds.forEach(function(m){return p._clearTimeout(m)}),this._inFlightTimeoutIds=[]},v.prototype._retryTransactionPromise=function(p,m,y,b,g,_,w){var x=this;return Date.now()-b>this._maxRetryTimeMs||!(0,u.isRetriableError)(y)?Promise.reject(y):new Promise(function(E,O){var T=x._computeDelayWithJitter(g),C=x._setTimeout(function(){x._inFlightTimeoutIds=x._inFlightTimeoutIds.filter(function(P){return P!==C}),x._executeTransactionInsidePromise(p,m,E,O,_,w).catch(O)},T);x._inFlightTimeoutIds.push(C)}).catch(function(E){var O=g*x._multiplier;return x._retryTransactionPromise(p,m,E,b,O,_,w)})},v.prototype._executeTransactionInsidePromise=function(p,m,y,b,g,_){return i(this,void 0,void 0,function(){var w,x,E,O,T,C,P=this;return o(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),x=p((_==null?void 0:_.apiTransactionConfig)!=null?n({},_==null?void 0:_.apiTransactionConfig):void 0),this.pipelineBegin?(E=x,[3,3]):[3,1];case 1:return[4,x];case 2:E=R.sent(),R.label=3;case 3:return w=E,[3,5];case 4:return O=R.sent(),b(O),[2];case 5:return T=g??function(k){return k},C=T(w),this._safeExecuteTransactionWork(C,m).then(function(k){return P._handleTransactionWorkSuccess(k,w,y,b)}).catch(function(k){return P._handleTransactionWorkFailure(k,w,b)}),[2]}})})},v.prototype._safeExecuteTransactionWork=function(p,m){try{var y=m(p);return Promise.resolve(y)}catch(b){return Promise.reject(b)}},v.prototype._handleTransactionWorkSuccess=function(p,m,y,b){m.isOpen()?m.commit().then(function(){y(p)}).catch(function(g){b(g)}):y(p)},v.prototype._handleTransactionWorkFailure=function(p,m,y){m.isOpen()?m.rollback().catch(function(b){}).then(function(){return y(p)}).catch(y):y(p)},v.prototype._computeDelayWithJitter=function(p){var m=p*this._jitterFactor,y=p-m,b=p+m;return Math.random()*(b-y)+y},v.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,u.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,u.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,u.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,u.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},v})();function d(v,p){return v??p}e.TransactionExecutor=h},6245:function(r,e,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=o.internal.util,s=a.ENCRYPTION_OFF,u=a.ENCRYPTION_ON,l=(function(){function f(h,d,v){d===void 0&&(d=c),v===void 0&&(v=function(_){return new WebSocket(_)});var p=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=h,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var m=(function(_,w){var x=(function(C){return C.encrypted===!0||C.encrypted===u})(_),E=(function(C){return C.encrypted===!1||C.encrypted===s})(_),O=_.trust,T=(function(C){var P=typeof C=="function"?C():"";return P&&P.toLowerCase().indexOf("https")>=0})(w);return(function(C,P,R){R===null||(C&&!R?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):P&&R&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))})(x,E,T),E?{scheme:"ws",error:null}:T?{scheme:"wss",error:null}:x?O&&O!=="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"?{scheme:null,error:(0,o.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+O+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}})(h,d),y=m.scheme,b=m.error;if(b)this._error=b;else{this._ws=(function(_,w,x){var E=_+"://"+w.asHostPort();try{return x(E)}catch(T){if((function(C,P){return C.name==="SyntaxError"&&(R=P.asHostPort()).charAt(0)==="["&&R.indexOf("]")!==-1;var R})(T,w)){var O=(function(C,P){var R=P.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(C,"://").concat(R,":").concat(P.port())})(_,w);return x(O)}throw T}})(y,h.address,v),this._ws.binaryType="arraybuffer";var g=this;this._ws.onclose=function(_){_&&!_.wasClean&&g._handleConnectionError(),g._open=!1},this._ws.onopen=function(){g._clearConnectionTimeout();var _=g._pending;g._pending=null;for(var w=0;w<_.length;w++)g.write(_[w])},this._ws.onmessage=function(_){if(p._resetTimeout(),g.onmessage){var w=new i.default(_.data);g.onmessage(w)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return f.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,o.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,o.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},f.prototype.write=function(h){if(this._pending!==null)this._pending.push(h);else{if(!(h instanceof i.default))throw(0,o.newError)("Don't know how to send buffer: "+h);try{this._ws.send(h._buffer)}catch(d){if(this._ws.readyState===1)throw d;this._handleConnectionError()}}},f.prototype.close=function(){var h=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(d,v){h._clearConnectionTimeout(),h._ws&&h._ws.readyState!==3?(h._open=!1,h.stopReceiveTimeout(),h._ws.onclose=function(){d()},h._ws.close()):d()})),this._closingPromise},f.prototype.setupReceiveTimeout=function(h){this._receiveTimeout=h},f.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},f.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},f.prototype._resetTimeout=function(){var h=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){h._receiveTimeoutId=null,h._timedout=!0,h.stopReceiveTimeout(),h._error=(0,o.newError)("Connection lost. Server didn't respond in ".concat(h._receiveTimeout,"ms"),h._config.connectionErrorCode),h.close(),h.onerror&&h.onerror(h._error)},this._receiveTimeout))},f.prototype._setupConnectionTimeout=function(){var h=this,d=this._config.connectionTimeout;if(d){var v=this._ws;return setTimeout(function(){v.readyState!==1&&(h._connectionTimeoutFired=!0,v.close())},d)}return null},f.prototype._clearConnectionTimeout=function(){var h=this._connectionTimeoutId;(h||h===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(h))},f})();function c(){return typeof window<"u"&&window.location?window.location.protocol:null}e.default=l},6248:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3399));e.default=n({},o.default)},6293:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var o=t(7245),a=o.Immediate.setImmediate,s=o.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||a).apply(void 0,i([],n(u)))},clearImmediate:function(u){var l=e.immediateProvider.delegate;return((l==null?void 0:l.clearImmediate)||s)(u)},delegate:void 0}},6345:function(r,e,t){var n=this&&this.__extends||(function(){var v=function(p,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(y[g]=b[g])},v(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=p}v(p,m),p.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(v){for(var p,m=1,y=arguments.length;m<y;m++)for(var b in p=arguments[m])Object.prototype.hasOwnProperty.call(p,b)&&(v[b]=p[b]);return v},i.apply(this,arguments)},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(844)),s=t(397),u=o(t(9994)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_1,d=(function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),p.prototype.initialize=function(m){var y=this,b=m===void 0?{}:m,g=b.userAgent,_=(b.boltAgent,b.authToken),w=b.notificationFilter,x=b.onError,E=b.onComplete,O={},T=new f.LoginObserver({onError:function(C){return y._onLoginError(C,x)},onCompleted:function(C){return O.metadata=C,y._onLoginCompleted(C)}});return(0,s.assertNotificationFilterIsEmpty)(w,this._onProtocolError,T),this.write(c.default.hello5x1(g,this._serversideRouting),T,!1),this.logon({authToken:_,onComplete:function(C){return E(i(i({},C),O.metadata))},onError:x,flush:!0})},p.prototype.logon=function(m){var y=this,b=m===void 0?{}:m,g=b.authToken,_=b.onComplete,w=b.onError,x=b.flush,E=new f.LoginObserver({onCompleted:function(){return y._onLoginCompleted(null,g,_)},onError:function(O){return y._onLoginError(O,w)}});return this.write(c.default.logon(g),E,x),E},p.prototype.logoff=function(m){var y=m===void 0?{}:m,b=y.onComplete,g=y.onError,_=y.flush,w=new f.LogoffObserver({onCompleted:b,onError:g});return this.write(c.default.logoff(),w,_),w},p})(a.default);e.default=d},6368:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=void 0;var n=t(1964),i=t(1018);e.isIterable=function(o){return i.isFunction(o==null?void 0:o[n.iterator])}},6377:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(h){for(var d,v=1,p=arguments.length;v<p;v++)for(var m in d=arguments[v])Object.prototype.hasOwnProperty.call(d,m)&&(h[m]=d[m]);return h},i.apply(this,arguments)},o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(6890)),s=o(t(6248)),u=o(t(3321)),l=t(9305).internal.constants.BOLT_PROTOCOL_V5_7,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype.enrichErrorMetadata=function(v){return i(i({},v),{cause:v.cause!==null&&v.cause!==void 0?this.enrichErrorMetadata(v.cause):null,code:v.neo4j_code,diagnostic_record:v.diagnostic_record!==null?i(i({},c),v.diagnostic_record):null})},d})(a.default);e.default=f},6384:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scanInternals=void 0;var n=t(3111);e.scanInternals=function(i,o,a,s,u){return function(l,c){var f=a,h=o,d=0;l.subscribe(n.createOperatorSubscriber(c,function(v){var p=d++;h=f?i(h,v,p):(f=!0,v),s&&c.next(h)},u&&function(){f&&c.next(h),c.complete()}))}}},6385:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),t(7666);var i=(function(o){function a(s){var u=o.call(this)||this;return u._errorHandler=s,u}return n(a,o),Object.defineProperty(a.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),a.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(a.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),a.prototype.connect=function(s,u,l,c){throw new Error("not implemented")},a.prototype.write=function(s,u,l){throw new Error("not implemented")},a.prototype.close=function(){throw new Error("not implemented")},a.prototype.handleAndTransformError=function(s,u){return this._errorHandler?this._errorHandler.handleAndTransformError(s,u,this):s},a})(t(9305).Connection);e.default=i},6445:function(r,e,t){var n=this&&this.__extends||(function(){var f=function(h,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(v[m]=p[m])},f(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function v(){this.constructor=h}f(h,d),h.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}})(),i=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(4596)),a=t(9305),s=i(t(5348)),u=i(t(3321)),l=a.internal.constants.BOLT_PROTOCOL_V4_2,c=(function(f){function h(){return f!==null&&f.apply(this,arguments)||this}return n(h,f),Object.defineProperty(h.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var d=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(v){return v(d._config,d._log)}))),this._transformer},enumerable:!1,configurable:!0}),h})(o.default);e.default=c},6472:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interval=void 0;var n=t(7961),i=t(4092);e.interval=function(o,a){return o===void 0&&(o=0),a===void 0&&(a=n.asyncScheduler),o<0&&(o=0),i.timer(o,o,a)}},6492:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var n=t(9305);e.identity=function(i){return i},e.reuseOngoingRequest=function(i,o){o===void 0&&(o=null);var a=new Map;return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=n.json.stringify(s);if(a.has(l))return a.get(l);var c=i.apply(o,s);return a.set(l,c),c.finally(function(){a.delete(l)})}}},6505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=void 0;var n=t(9568),i=t(5471);e.timestamp=function(o){return o===void 0&&(o=n.dateTimestampProvider),i.map(function(a){return{value:a,timestamp:o.now()}})}},6544:function(r,e,t){var n=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=n(t(8320)),a=n(t(2857)),s=n(t(5642)),u=n(t(2539)),l=n(t(4596)),c=n(t(6445)),f=n(t(9054)),h=n(t(1711)),d=n(t(844)),v=n(t(6345)),p=n(t(934)),m=n(t(9125)),y=n(t(9744)),b=n(t(5815)),g=n(t(6890)),_=n(t(6377)),w=n(t(1092)),x=(t(7452),n(t(2578)));e.default=function(E){var O=E===void 0?{}:E,T=O.version,C=O.chunker,P=O.dechunker,R=O.channel,k=O.disableLosslessIntegers,I=O.useBigInt,M=O.serversideRouting,j=O.server,L=O.log,F=O.observer;return(function(z,V,G,Y,ie,W,H,Q){switch(z){case 1:return new o.default(V,G,Y,W,Q,H);case 2:return new a.default(V,G,Y,W,Q,H);case 3:return new s.default(V,G,Y,W,Q,H);case 4:return new u.default(V,G,Y,W,Q,H);case 4.1:return new l.default(V,G,Y,W,Q,H,ie);case 4.2:return new c.default(V,G,Y,W,Q,H,ie);case 4.3:return new f.default(V,G,Y,W,Q,H,ie);case 4.4:return new h.default(V,G,Y,W,Q,H,ie);case 5:return new d.default(V,G,Y,W,Q,H,ie);case 5.1:return new v.default(V,G,Y,W,Q,H,ie);case 5.2:return new p.default(V,G,Y,W,Q,H,ie);case 5.3:return new m.default(V,G,Y,W,Q,H,ie);case 5.4:return new y.default(V,G,Y,W,Q,H,ie);case 5.5:return new b.default(V,G,Y,W,Q,H,ie);case 5.6:return new g.default(V,G,Y,W,Q,H,ie);case 5.7:return new _.default(V,G,Y,W,Q,H,ie);case 5.8:return new w.default(V,G,Y,W,Q,H,ie);default:throw(0,i.newError)("Unknown Bolt protocol version: "+z)}})(T,j,C,{disableLosslessIntegers:k,useBigInt:I},M,function(z){var V=new x.default({transformMetadata:z.transformMetadata.bind(z),enrichErrorMetadata:z.enrichErrorMetadata.bind(z),log:L,observer:F});return R.onerror=F.onError.bind(F),R.onmessage=function(G){return P.write(G)},P.onmessage=function(G){try{V.handleResponse(z.unpack(G))}catch(Y){return F.onError(Y)}},V},F.onProtocolError.bind(F),L)}},6566:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.repeatWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=!1,v=!1,p=function(){return v&&d&&(l.complete(),!0)},m=function(){v=!1,c=u.subscribe(a.createOperatorSubscriber(l,void 0,function(){v=!0,!p()&&(f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){c?m():h=!0},function(){d=!0,p()}))),f).next()})),h&&(c.unsubscribe(),c=null,h=!1,m())};m()})}},6586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=void 0;var n=t(983),i=t(1018);e.mergeMapTo=function(o,a,s){return s===void 0&&(s=1/0),i.isFunction(a)?n.mergeMap(function(){return o},a,s):(typeof a=="number"&&(s=a),n.mergeMap(function(){return o},s))}},6587:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,p){p===void 0&&(p=v);var m=Object.getOwnPropertyDescriptor(d,v);m&&!("get"in m?!d.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,p,m)}:function(h,d,v,p){p===void 0&&(p=v),h[p]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],p=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&p>=h.length&&(h=void 0),{value:h&&h[p++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var s=o(t(3371)),u=t(4027);function l(h){return typeof h=="object"&&!Array.isArray(h)&&h!==null}function c(h,d){if(!f(h))throw new TypeError((0,u.stringify)(d)+" expected to be string but was: "+(0,u.stringify)(h));return h}function f(h){return Object.prototype.toString.call(h)==="[object String]"}e.ENCRYPTION_ON="ENCRYPTION_ON",e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(h){if(h===null)return!0;if(!l(h))return!1;for(var d in h)if(h[d]!==void 0)return!1;return!0},e.isObject=l,e.validateQueryAndParameters=function(h,d,v){var p,m,y="",b=d??{},g=(p=v==null?void 0:v.skipAsserts)!==null&&p!==void 0&&p;return typeof h=="string"?y=h:h instanceof String?y=h.toString():typeof h=="object"&&h.text!=null&&(y=h.text,b=(m=h.parameters)!==null&&m!==void 0?m:{}),g||((function(_){if(c(_,"Cypher query"),_.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")})(y),(function(_){if(!l(_)){var w=_.constructor!=null?" "+_.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(w," ").concat(JSON.stringify(_)))}})(b)),{validatedQuery:y,params:b}},e.assertObject=function(h,d){if(!l(h))throw new TypeError(d+" expected to be an object but was: "+(0,u.stringify)(h));return h},e.assertString=c,e.assertNumber=function(h,d){if(typeof h!="number")throw new TypeError(d+" expected to be a number but was: "+(0,u.stringify)(h));return h},e.assertNumberOrInteger=function(h,d){if(typeof h!="number"&&typeof h!="bigint"&&!(0,s.isInt)(h))throw new TypeError(d+" expected to be either a number or an Integer object but was: "+(0,u.stringify)(h));return h},e.assertValidDate=function(h,d){if(Object.prototype.toString.call(h)!=="[object Date]")throw new TypeError(d+" expected to be a standard JavaScript Date but was: "+(0,u.stringify)(h));if(Number.isNaN(h.getTime()))throw new TypeError(d+" expected to be valid JavaScript Date but its time was NaN: "+(0,u.stringify)(h));return h},e.isString=f,e.equals=function h(d,v){var p,m;if(d===v)return!0;if(d===null||v===null)return!1;if(typeof d=="object"&&typeof v=="object"){var y=Object.keys(d),b=Object.keys(v);if(y.length!==b.length)return!1;try{for(var g=a(y),_=g.next();!_.done;_=g.next()){var w=_.value;if(!h(d[w],v[w]))return!1}}catch(x){p={error:x}}finally{try{_&&!_.done&&(m=g.return)&&m.call(g)}finally{if(p)throw p.error}}return!0}return!1},e.toNumber=function(h){return h instanceof s.default?h.toNumber():typeof h=="bigint"?(0,s.int)(h).toNumber():h}},6625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=void 0;var n=t(6728);e.combineAll=n.combineLatestAll},6637:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=void 0;var i=t(2483),o=t(8014),a=t(7843),s=t(9445),u=t(3111),l=t(1342),c=t(7479);e.windowToggle=function(f,h){return a.operate(function(d,v){var p=[],m=function(y){for(;0<p.length;)p.shift().error(y);v.error(y)};s.innerFrom(f).subscribe(u.createOperatorSubscriber(v,function(y){var b=new i.Subject;p.push(b);var g,_=new o.Subscription;try{g=s.innerFrom(h(y))}catch(w){return void m(w)}v.next(b.asObservable()),_.add(g.subscribe(u.createOperatorSubscriber(v,function(){c.arrRemove(p,b),b.complete(),_.unsubscribe()},l.noop,m)))},l.noop)),d.subscribe(u.createOperatorSubscriber(v,function(y){var b,g,_=p.slice();try{for(var w=n(_),x=w.next();!x.done;x=w.next())x.value.next(y)}catch(E){b={error:E}}finally{try{x&&!x.done&&(g=w.return)&&g.call(w)}finally{if(b)throw b.error}}},function(){for(;0<p.length;)p.shift().complete();v.complete()},m,function(){for(;0<p.length;)p.shift().unsubscribe()}))})}},6640:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.identity=void 0,e.identity=function(t){return t}},6661:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=t(7168),a=t(3321),s=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new a.TypeTransformer({signature:78,isTypeInstance:function(u){return u instanceof i.Node},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Node",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.Node(c,f,h)}})},createRelationshipTransformer:function(){return new a.TypeTransformer({signature:82,isTypeInstance:function(u){return u instanceof i.Relationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Relationship",5,u.size);var l=n(u.fields,5),c=l[0],f=l[1],h=l[2],d=l[3],v=l[4];return new i.Relationship(c,f,h,d,v)}})},createUnboundRelationshipTransformer:function(){return new a.TypeTransformer({signature:114,isTypeInstance:function(u){return u instanceof i.UnboundRelationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("UnboundRelationship",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.UnboundRelationship(c,f,h)}})},createPathTransformer:function(){return new a.TypeTransformer({signature:80,isTypeInstance:function(u){return u instanceof i.Path},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Path",3,u.size);for(var l=n(u.fields,3),c=l[0],f=l[1],h=l[2],d=[],v=c[0],p=0;p<h.length;p+=2){var m=c[h[p+1]],y=(0,i.toNumber)(h[p]),b=void 0;y>0?(b=f[y-1])instanceof i.UnboundRelationship&&(f[y-1]=b=b.bindTo(v,m)):(b=f[-y-1])instanceof i.UnboundRelationship&&(f[-y-1]=b=b.bindTo(m,v)),d.push(new i.PathSegment(v,b,m)),v=m}return new i.Path(c[0],c[c.length-1],d)}})}}},6672:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,f)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),i=this&&this.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),o=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(u,s,l);return i(u,s),u},a=this&&this.__exportStar||function(s,u){for(var l in s)l==="default"||Object.prototype.hasOwnProperty.call(u,l)||n(u,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=o(t(4455)),e.bolt=o(t(7666)),e.buf=o(t(7174)),e.channel=o(t(7452)),e.packstream=o(t(7168)),a(t(9689),e)},6702:function(r,e){var t=this&&this.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(n,i){var o,a;if(n===i)return!0;if(n===null||i===null)return!1;if(typeof n=="object"&&typeof i=="object"){var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;try{for(var l=t(s),c=l.next();!c.done;c=l.next()){var f=c.value;if(n[f]!==i[f])return!1}}catch(h){o={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0}return!1}},6728:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestAll=void 0;var n=t(3247),i=t(3638);e.combineLatestAll=function(o){return i.joinAllInternals(n.combineLatest,o)}},6746:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=void 0;var i=t(2483),o=t(7843),a=t(3111);e.windowCount=function(s,u){u===void 0&&(u=0);var l=u>0?u:s;return o.operate(function(c,f){var h=[new i.Subject],d=0;f.next(h[0].asObservable()),c.subscribe(a.createOperatorSubscriber(f,function(v){var p,m;try{for(var y=n(h),b=y.next();!b.done;b=y.next())b.value.next(v)}catch(w){p={error:w}}finally{try{b&&!b.done&&(m=y.return)&&m.call(y)}finally{if(p)throw p.error}}var g=d-s+1;if(g>=0&&g%l===0&&h.shift().complete(),++d%l===0){var _=new i.Subject;h.push(_),f.next(_.asObservable())}},function(){for(;h.length>0;)h.shift().complete();f.complete()},function(v){for(;h.length>0;)h.shift().error(v);f.error(v)},function(){h=null}))})}},6755:function(r,e){var t=this&&this.__awaiter||function(l,c,f,h){return new(f||(f=Promise))(function(d,v){function p(b){try{y(h.next(b))}catch(g){v(g)}}function m(b){try{y(h.throw(b))}catch(g){v(g)}}function y(b){var g;b.done?d(b.value):(g=b.value,g instanceof f?g:new f(function(_){_(g)})).then(p,m)}y((h=h.apply(l,c||[])).next())})},n=this&&this.__generator||function(l,c){var f,h,d,v,p={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function m(y){return function(b){return(function(g){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,g[0]&&(p=0)),p;)try{if(f=1,h&&(d=2&g[0]?h.return:g[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,g[1])).done)return d;switch(h=0,d&&(g=[2&g[0],d.value]),g[0]){case 0:case 1:d=g;break;case 4:return p.label++,{value:g[1],done:!1};case 5:p.label++,h=g[1],g=[0];continue;case 7:g=p.ops.pop(),p.trys.pop();continue;default:if(!((d=(d=p.trys).length>0&&d[d.length-1])||g[0]!==6&&g[0]!==2)){p=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){p.label=g[1];break}if(g[0]===6&&p.label<d[1]){p.label=d[1],d=g;break}if(d&&p.label<d[2]){p.label=d[2],p.ops.push(g);break}d[2]&&p.ops.pop(),p.trys.pop();continue}g=c.call(l,p)}catch(_){g=[6,_],h=0}finally{f=d=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}})([y,b])}}},i=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],h=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&h>=l.length&&(l=void 0),{value:l&&l[h++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)p.push(h.value)}catch(m){d={error:m}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return p},a=this&&this.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var h,d=0,v=c.length;d<v;d++)!h&&d in c||(h||(h=Array.prototype.slice.call(c,0,d)),h[d]=c[d]);return l.concat(h||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var s=(function(){function l(){throw new Error("Not implemented")}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){return n(this,function(h){throw new Error("Not implemented")})})},l.prototype.getBookmarks=function(){return t(this,void 0,void 0,function(){return n(this,function(c){throw new Error("Not implemented")})})},l})();e.default=s,e.bookmarkManager=function(l){l===void 0&&(l={});var c=new Set(l.initialBookmarks);return new u(c,l.bookmarksSupplier,l.bookmarksConsumer)};var u=(function(){function l(c,f,h){this._bookmarks=c,this._bookmarksSupplier=f,this._bookmarksConsumer=h}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){var h,d,v,p,m,y,b,g,_,w;return n(this,function(x){switch(x.label){case 0:h=this._bookmarks;try{for(d=i(c),v=d.next();!v.done;v=d.next())y=v.value,h.delete(y)}catch(E){b={error:E}}finally{try{v&&!v.done&&(g=d.return)&&g.call(d)}finally{if(b)throw b.error}}try{for(p=i(f),m=p.next();!m.done;m=p.next())y=m.value,h.add(y)}catch(E){_={error:E}}finally{try{m&&!m.done&&(w=p.return)&&w.call(p)}finally{if(_)throw _.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(a([],o(h),!1))];case 1:x.sent(),x.label=2;case 2:return[2]}})})},l.prototype.getBookmarks=function(){var c;return t(this,void 0,void 0,function(){var f,h,d,v,p,m,y;return n(this,function(b){switch(b.label){case 0:return f=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:h=(c=b.sent())!==null&&c!==void 0?c:[];try{for(d=i(h),v=d.next();!v.done;v=d.next())p=v.value,f.add(p)}catch(g){m={error:g}}finally{try{v&&!v.done&&(y=d.return)&&y.call(d)}finally{if(m)throw m.error}}b.label=2;case 2:return[2,a([],o(f),!1)]}})})},l})()},6781:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(a,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);c&&!("get"in c?!s.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,l,c)}:function(a,s,u,l){l===void 0&&(l=u),a[l]=s[u]}),i=this&&this.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),o=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&n(s,a,u);return i(s,a),s};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=o(t(6492)),e.object=o(t(6702))},6804:r=>{r.exports=function(i,o){Array.isArray(o)||(o=[o]);var a=(function(l){for(var c=-1,f=0;f<l.length;f++){var h=l[f];if(h.type==="preprocessor")/^#(extension|version)/.test(h.data)&&(c=Math.max(c,f));else if(h.type==="keyword"&&h.data==="precision"){var d=n(l,f);if(d===-1)throw new Error("precision statement not followed by any semicolons!");c=Math.max(c,d)}}return c+1})(i),s=a>0?i[a-1]:null;s&&t.test(s.data)&&i.splice(a++,0,e),i.splice.apply(i,[a,0].concat(o));var u=a+o.length;return i[u]&&/[^\r\n]$/.test(i[u].data)&&i.splice(u,0,e),i};var e={data:`
`,type:"whitespace"},t=/[^\r\n]$/;function n(i,o){for(var a=o;a<i.length;a++)if(i[a].type==="operator"&&i[a].data===";")return a;return-1}},6824:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromSubscribable=void 0;var n=t(4662);e.fromSubscribable=function(i){return new n.Observable(function(o){return i.subscribe(o)})}},6842:function(r,e,t){var n=this&&this.__awaiter||function(v,p,m,y){return new(m||(m=Promise))(function(b,g){function _(E){try{x(y.next(E))}catch(O){g(O)}}function w(E){try{x(y.throw(E))}catch(O){g(O)}}function x(E){var O;E.done?b(E.value):(O=E.value,O instanceof m?O:new m(function(T){T(O)})).then(_,w)}x((y=y.apply(v,p||[])).next())})},i=this&&this.__generator||function(v,p){var m,y,b,g,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(x){return function(E){return(function(O){if(m)throw new TypeError("Generator is already executing.");for(;g&&(g=0,O[0]&&(_=0)),_;)try{if(m=1,y&&(b=2&O[0]?y.return:O[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,O[1])).done)return b;switch(y=0,b&&(O=[2&O[0],b.value]),O[0]){case 0:case 1:b=O;break;case 4:return _.label++,{value:O[1],done:!1};case 5:_.label++,y=O[1],O=[0];continue;case 7:O=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||O[0]!==6&&O[0]!==2)){_=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){_.label=O[1];break}if(O[0]===6&&_.label<b[1]){_.label=b[1],b=O;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(O);break}b[2]&&_.ops.pop(),_.trys.pop();continue}O=p.call(v,_)}catch(T){O=[6,T],y=0}finally{m=b=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}})([x,E])}}},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(7589)),s=t(9691),u=t(4883),l=(function(){function v(p){var m=p.create,y=m===void 0?function(L,F,z){return n(j,void 0,void 0,function(){return i(this,function(V){switch(V.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,V.sent()]}})})}:m,b=p.destroy,g=b===void 0?function(L){return n(j,void 0,void 0,function(){return i(this,function(F){switch(F.label){case 0:return[4,Promise.resolve()];case 1:return[2,F.sent()]}})})}:b,_=p.validateOnAcquire,w=_===void 0?function(L,F){return!0}:_,x=p.validateOnRelease,E=x===void 0?function(L){return!0}:x,O=p.installIdleObserver,T=O===void 0?function(L,F){}:O,C=p.removeIdleObserver,P=C===void 0?function(L){}:C,R=p.config,k=R===void 0?a.default.defaultConfig():R,I=p.log,M=I===void 0?u.Logger.noOp():I,j=this;this._create=y,this._destroy=g,this._validateOnAcquire=w,this._validateOnRelease=E,this._installIdleObserver=T,this._removeIdleObserver=P,this._maxSize=k.maxSize,this._acquisitionTimeout=k.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=M,this._closed=!1}return v.prototype.acquire=function(p,m,y){return n(this,void 0,void 0,function(){var b,g,_=this;return i(this,function(w){switch(w.label){case 0:return b=m.asKey(),(g=this._acquireRequests)[b]==null&&(g[b]=[]),[4,new Promise(function(x,E){var O=setTimeout(function(){var C=g[b];if(C!=null&&(g[b]=C.filter(function(k){return k!==T})),!T.isCompleted()){var P=_.activeResourceCount(m),R=_.has(m)?_._pools[b].length:0;T.reject((0,s.newError)("Connection acquisition timed out in ".concat(_._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(P,", Idle conn count = ").concat(R,".")))}},_._acquisitionTimeout);typeof O=="object"&&O.unref();var T=new h(b,p,y,x,E,O,_._log);g[b].push(T),_._processPendingAcquireRequests(m)})];case 1:return[2,w.sent()]}})})},v.prototype.purge=function(p){return n(this,void 0,void 0,function(){return i(this,function(m){switch(m.label){case 0:return[4,this._purgeKey(p.asKey())];case 1:return[2,m.sent()]}})})},v.prototype.apply=function(p,m){var y=p.asKey();y in this._pools&&this._pools[y].apply(m)},v.prototype.close=function(){return n(this,void 0,void 0,function(){var p=this;return i(this,function(m){switch(m.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(y){return n(p,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return[4,this._purgeKey(y)];case 1:return[2,b.sent()]}})})})).then()];case 1:return[2,m.sent()]}})})},v.prototype.keepAll=function(p){return n(this,void 0,void 0,function(){var m,y,b,g=this;return i(this,function(_){switch(_.label){case 0:return m=p.map(function(w){return w.asKey()}),y=Object.keys(this._pools),b=y.filter(function(w){return!m.includes(w)}),[4,Promise.all(b.map(function(w){return n(g,void 0,void 0,function(){return i(this,function(x){switch(x.label){case 0:return[4,this._purgeKey(w)];case 1:return[2,x.sent()]}})})})).then()];case 1:return[2,_.sent()]}})})},v.prototype.has=function(p){return p.asKey()in this._pools},v.prototype.activeResourceCount=function(p){var m;return(m=this._activeResourceCounts[p.asKey()])!==null&&m!==void 0?m:0},v.prototype._getOrInitializePoolFor=function(p){var m=this._pools[p];return m==null&&(m=new d,this._pools[p]=m,this._pendingCreates[p]=0),m},v.prototype._acquire=function(p,m,y){return n(this,void 0,void 0,function(){var b,g,_,w,x,E,O,T=this;return i(this,function(C){switch(C.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(b=m.asKey(),g=this._getOrInitializePoolFor(b),y)return[3,10];C.label=1;case 1:if(!(g.length>0))return[3,10];if((_=g.pop())==null)return[3,1];c(b,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(_),w=!1,C.label=2;case 2:return C.trys.push([2,4,,6]),[4,this._validateOnAcquire(p,_)];case 3:return w=C.sent(),[3,6];case 4:return x=C.sent(),f(b,this._activeResourceCounts),g.removeInUse(_),[4,this._destroy(_)];case 5:throw C.sent(),x;case 6:return w?(this._log.isDebugEnabled()&&this._log.debug("".concat(_," acquired from the pool ").concat(b)),[2,{resource:_,pool:g}]):[3,7];case 7:return f(b,this._activeResourceCounts),g.removeInUse(_),[4,this._destroy(_)];case 8:C.sent(),C.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&this.activeResourceCount(m)+this._pendingCreates[b]>=this._maxSize)return[2,{resource:null,pool:g}];this._pendingCreates[b]=this._pendingCreates[b]+1,C.label=11;case 11:return C.trys.push([11,,15,16]),this.activeResourceCount(m)+g.length>=this._maxSize&&y?(O=g.pop())==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(O),g.removeInUse(O),[4,this._destroy(O)]):[3,13];case 12:C.sent(),C.label=13;case 13:return[4,this._create(p,m,function(P,R){return n(T,void 0,void 0,function(){return i(this,function(k){switch(k.label){case 0:return[4,this._release(P,R,g)];case 1:return[2,k.sent()]}})})})];case 14:return E=C.sent(),g.pushInUse(E),c(b,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(E," created for the pool ").concat(b)),[3,16];case 15:return this._pendingCreates[b]=this._pendingCreates[b]-1,[7];case 16:return[2,{resource:E,pool:g}]}})})},v.prototype._release=function(p,m,y){return n(this,void 0,void 0,function(){var b,g=this;return i(this,function(_){switch(_.label){case 0:b=p.asKey(),_.label=1;case 1:return _.trys.push([1,,9,10]),y.isActive()?[4,this._validateOnRelease(m)]:[3,6];case 2:return _.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(m," destroyed and can't be released to the pool ").concat(b," because it is not functional")),y.removeInUse(m),[4,this._destroy(m)]);case 3:return _.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(m,{onError:function(w){g._log.debug("Idle connection ".concat(m," destroyed because of error: ").concat(w));var x=g._pools[b];x!=null&&(g._pools[b]=x.filter(function(E){return E!==m}),x.removeInUse(m)),g._destroy(m).catch(function(){})}}),y.push(m),this._log.isDebugEnabled()&&this._log.debug("".concat(m," released to the pool ").concat(b)),_.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(m," destroyed and can't be released to the pool ").concat(b," because pool has been purged")),y.removeInUse(m),[4,this._destroy(m)];case 7:_.sent(),_.label=8;case 8:return[3,10];case 9:return f(b,this._activeResourceCounts),this._processPendingAcquireRequests(p),[7];case 10:return[2]}})})},v.prototype._purgeKey=function(p){return n(this,void 0,void 0,function(){var m,y,b;return i(this,function(g){switch(g.label){case 0:if(m=this._pools[p],y=[],m==null)return[3,2];for(;m.length>0;)(b=m.pop())!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(b),y.push(this._destroy(b)));return m.close(),delete this._pools[p],[4,Promise.all(y)];case 1:g.sent(),g.label=2;case 2:return[2]}})})},v.prototype._processPendingAcquireRequests=function(p){var m=this,y=p.asKey(),b=this._acquireRequests[y];if(b!=null){var g=b.shift();g!=null?this._acquire(g.context,p,g.requireNew).catch(function(_){return g.reject(_),{resource:null,pool:null}}).then(function(_){var w=_.resource,x=_.pool;w!=null&&x!=null?g.isCompleted()?m._release(p,w,x).catch(function(E){m._log.isDebugEnabled()&&m._log.debug("".concat(w," could not be release back to the pool. Cause: ").concat(E))}):g.resolve(w):g.isCompleted()||(m._acquireRequests[y]==null&&(m._acquireRequests[y]=[]),m._acquireRequests[y].unshift(g))}).catch(function(_){return g.reject(_)}):delete this._acquireRequests[y]}},v})();function c(v,p){var m,y=(m=p[v])!==null&&m!==void 0?m:0;p[v]=y+1}function f(v,p){var m,y=((m=p[v])!==null&&m!==void 0?m:0)-1;y>0?p[v]=y:delete p[v]}var h=(function(){function v(p,m,y,b,g,_,w){this._key=p,this._context=m,this._resolve=b,this._reject=g,this._timeoutId=_,this._log=w,this._completed=!1,this._config=y??{}}return Object.defineProperty(v.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"requireNew",{get:function(){var p;return(p=this._config.requireNew)!==null&&p!==void 0&&p},enumerable:!1,configurable:!0}),v.prototype.isCompleted=function(){return this._completed},v.prototype.resolve=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(p," acquired from the pool ").concat(this._key)),this._resolve(p))},v.prototype.reject=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(p))},v})(),d=(function(){function v(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return v.prototype.isActive=function(){return this._active},v.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},v.prototype.filter=function(p){return this._elements=this._elements.filter(p),this},v.prototype.apply=function(p){this._elements.forEach(p),this._elementsInUse.forEach(p)},Object.defineProperty(v.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),v.prototype.pop=function(){var p=this._elements.pop();return p!=null&&this._elementsInUse.add(p),p},v.prototype.push=function(p){return this._elementsInUse.delete(p),this._elements.push(p)},v.prototype.pushInUse=function(p){this._elementsInUse.add(p)},v.prototype.removeInUse=function(p){this._elementsInUse.delete(p)},v})();e.default=l},6872:function(r,e){var t=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var n=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=n;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return t(a,o),a})(n);e.InternalConfig=i},6890:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(h){for(var d,v=1,p=arguments.length;v<p;v++)for(var m in d=arguments[v])Object.prototype.hasOwnProperty.call(d,m)&&(h[m]=d[m]);return h},i.apply(this,arguments)},o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(5815)),s=o(t(3399)),u=o(t(3321)),l=t(9305).internal.constants.BOLT_PROTOCOL_V5_6,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype._enrichMetadata=function(v){return Array.isArray(v.statuses)&&(v.statuses=v.statuses.map(function(p){return i(i({},p),{diagnostic_record:p.diagnostic_record!==null?i(i({},c),p.diagnostic_record):null})})),v},d})(a.default);e.default=f},6894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lastValueFrom=void 0;var n=t(2823);e.lastValueFrom=function(i,o){var a=typeof o=="object";return new Promise(function(s,u){var l,c=!1;i.subscribe({next:function(f){l=f,c=!0},error:u,complete:function(){c?s(l):a?s(o.defaultValue):u(new n.EmptyError)}})})}},6902:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flatMap=void 0;var n=t(983);e.flatMap=n.mergeMap},6931:r=>{r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},6985:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleArray=void 0;var n=t(4662);e.scheduleArray=function(i,o){return new n.Observable(function(a){var s=0;return o.schedule(function(){s===i.length?a.complete():(a.next(i[s++]),a.closed||this.schedule())})})}},6995:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(w,x,E,O){O===void 0&&(O=E);var T=Object.getOwnPropertyDescriptor(x,E);T&&!("get"in T?!x.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return x[E]}}),Object.defineProperty(w,O,T)}:function(w,x,E,O){O===void 0&&(O=E),w[O]=x[E]}),i=this&&this.__setModuleDefault||(Object.create?function(w,x){Object.defineProperty(w,"default",{enumerable:!0,value:x})}:function(w,x){w.default=x}),o=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var x={};if(w!=null)for(var E in w)E!=="default"&&Object.prototype.hasOwnProperty.call(w,E)&&n(x,w,E);return i(x,w),x};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var a=o(t(6587));e.util=a;var s=o(t(5022));e.temporalUtil=s;var u=o(t(2696));e.observer=u;var l=o(t(9730));e.bookmarks=l;var c=o(t(326));e.constants=c;var f=o(t(3618));e.connectionHolder=f;var h=o(t(754));e.txConfig=h;var d=o(t(6189));e.transactionExecutor=d;var v=o(t(4883));e.logger=v;var p=o(t(407));e.urlUtil=p;var m=o(t(7509));e.serverAddress=m;var y=o(t(9470));e.resolver=y;var b=o(t(93));e.objectUtil=b;var g=o(t(3488));e.boltAgent=g;var _=o(t(2906));e.pool=_},7021:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var n=t(9305),i=n.internal.constants,o=i.ACCESS_MODE_READ,a=i.FETCH_ALL,s=n.internal.util.assertString,u=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=u;var l=(function(){function g(_,w,x){this.signature=_,this.fields=w,this.toString=x}return g.init=function(_,w){return new g(1,[_,w],function(){return"INIT ".concat(_," {...}")})},g.run=function(_,w){return new g(16,[_,w],function(){return"RUN ".concat(_," ").concat(n.json.stringify(w))})},g.pullAll=function(){return v},g.reset=function(){return p},g.hello=function(_,w,x,E){x===void 0&&(x=null),E===void 0&&(E=null);var O=Object.assign({user_agent:_},w);return x&&(O.routing=x),E&&(O.patch_bolt=E),new g(1,[O],function(){return"HELLO {user_agent: '".concat(_,"', ...}")})},g.hello5x1=function(_,w){w===void 0&&(w=null);var x={user_agent:_};return w&&(x.routing=w),new g(1,[x],function(){return"HELLO {user_agent: '".concat(_,"', ...}")})},g.hello5x2=function(_,w,x){w===void 0&&(w=null),x===void 0&&(x=null);var E={user_agent:_};return h(E,w),x&&(E.routing=x),new g(1,[E],function(){return"HELLO ".concat(n.json.stringify(E))})},g.hello5x3=function(_,w,x,E){x===void 0&&(x=null),E===void 0&&(E=null);var O={};return _&&(O.user_agent=_),w&&(O.bolt_agent={product:w.product,platform:w.platform,language:w.language,language_details:w.languageDetails}),h(O,x),E&&(O.routing=E),new g(1,[O],function(){return"HELLO ".concat(n.json.stringify(O))})},g.hello5x5=function(_,w,x,E){x===void 0&&(x=null),E===void 0&&(E=null);var O={};return _&&(O.user_agent=_),w&&(O.bolt_agent={product:w.product,platform:w.platform,language:w.language,language_details:w.languageDetails}),d(O,x),E&&(O.routing=E),new g(1,[O],function(){return"HELLO ".concat(n.json.stringify(O))})},g.logon=function(_){return new g(106,[_],function(){return"LOGON { ... }"})},g.logoff=function(){return new g(107,[],function(){return"LOGOFF"})},g.begin=function(_){var w=_===void 0?{}:_,x=c(w.bookmarks,w.txConfig,w.database,w.mode,w.impersonatedUser,w.notificationFilter);return new g(17,[x],function(){return"BEGIN ".concat(n.json.stringify(x))})},g.begin5x5=function(_){var w=_===void 0?{}:_,x=c(w.bookmarks,w.txConfig,w.database,w.mode,w.impersonatedUser,w.notificationFilter,{appendNotificationFilter:d});return new g(17,[x],function(){return"BEGIN ".concat(n.json.stringify(x))})},g.commit=function(){return m},g.rollback=function(){return y},g.runWithMetadata=function(_,w,x){var E=x===void 0?{}:x,O=c(E.bookmarks,E.txConfig,E.database,E.mode,E.impersonatedUser,E.notificationFilter);return new g(16,[_,w,O],function(){return"RUN ".concat(_," ").concat(n.json.stringify(w)," ").concat(n.json.stringify(O))})},g.runWithMetadata5x5=function(_,w,x){var E=x===void 0?{}:x,O=c(E.bookmarks,E.txConfig,E.database,E.mode,E.impersonatedUser,E.notificationFilter,{appendNotificationFilter:d});return new g(16,[_,w,O],function(){return"RUN ".concat(_," ").concat(n.json.stringify(w)," ").concat(n.json.stringify(O))})},g.goodbye=function(){return b},g.pull=function(_){var w=_===void 0?{}:_,x=w.stmtId,E=x===void 0?-1:x,O=w.n,T=f(E??-1,(O===void 0?a:O)||a);return new g(63,[T],function(){return"PULL ".concat(n.json.stringify(T))})},g.discard=function(_){var w=_===void 0?{}:_,x=w.stmtId,E=x===void 0?-1:x,O=w.n,T=f(E??-1,(O===void 0?a:O)||a);return new g(47,[T],function(){return"DISCARD ".concat(n.json.stringify(T))})},g.telemetry=function(_){var w=_.api,x=(0,n.int)(w);return new g(84,[x],function(){return"TELEMETRY ".concat(x.toString())})},g.route=function(_,w,x){return _===void 0&&(_={}),w===void 0&&(w=[]),x===void 0&&(x=null),new g(102,[_,w,x],function(){return"ROUTE ".concat(n.json.stringify(_)," ").concat(n.json.stringify(w)," ").concat(x)})},g.routeV4x4=function(_,w,x){_===void 0&&(_={}),w===void 0&&(w=[]),x===void 0&&(x={});var E={};return x.databaseName&&(E.db=x.databaseName),x.impersonatedUser&&(E.imp_user=x.impersonatedUser),new g(102,[_,w,E],function(){return"ROUTE ".concat(n.json.stringify(_)," ").concat(n.json.stringify(w)," ").concat(n.json.stringify(E))})},g})();function c(g,_,w,x,E,O,T){var C;T===void 0&&(T={});var P={};return g.isEmpty()||(P.bookmarks=g.values()),_.timeout!==null&&(P.tx_timeout=_.timeout),_.metadata&&(P.tx_metadata=_.metadata),w&&(P.db=s(w,"database")),E&&(P.imp_user=s(E,"impersonatedUser")),x===o&&(P.mode="r"),((C=T.appendNotificationFilter)!==null&&C!==void 0?C:h)(P,O),P}function f(g,_){var w={n:(0,n.int)(_)};return g!==-1&&(w.qid=(0,n.int)(g)),w}function h(g,_){_&&(_.minimumSeverityLevel&&(g.notifications_minimum_severity=_.minimumSeverityLevel),_.disabledCategories&&(g.notifications_disabled_categories=_.disabledCategories),_.disabledClassifications&&(g.notifications_disabled_categories=_.disabledClassifications))}function d(g,_){_&&(_.minimumSeverityLevel&&(g.notifications_minimum_severity=_.minimumSeverityLevel),_.disabledCategories&&(g.notifications_disabled_classifications=_.disabledCategories),_.disabledClassifications&&(g.notifications_disabled_classifications=_.disabledClassifications))}e.default=l;var v=new l(63,[],function(){return"PULL_ALL"}),p=new l(15,[],function(){return"RESET"}),m=new l(18,[],function(){return"COMMIT"}),y=new l(19,[],function(){return"ROLLBACK"}),b=new l(2,[],function(){return"GOODBYE"})},7041:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(m){try{p(c.next(m))}catch(y){h(y)}}function v(m){try{p(c.throw(m))}catch(y){h(y)}}function p(m){var y;m.done?f(m.value):(y=m.value,y instanceof l?y:new l(function(b){b(y)})).then(d,v)}p((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(p){return function(m){return(function(y){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}})([p,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(326),a=(function(){function s(u){this._createSession=u}return s.prototype.execute=function(u,l,c){return n(this,void 0,void 0,function(){var f,h,d=this;return i(this,function(v){switch(v.label){case 0:f=this._createSession({database:u.database,bookmarkManager:u.bookmarkManager,impersonatedUser:u.impersonatedUser,auth:u.auth}),p=u.signal,m="abort",y=function(){return n(d,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return[4,f.close()];case 1:return[2,b.sent()]}})})},typeof(p==null?void 0:p.addEventListener)=="function"&&p.addEventListener(m,y),h={uninstall:function(){typeof(p==null?void 0:p.removeEventListener)=="function"&&p.removeEventListener(m,y)}},f._configureTransactionExecutor(!0,o.TELEMETRY_APIS.EXECUTE_QUERY),v.label=1;case 1:return v.trys.push([1,,3,5]),[4,(u.routing==="READ"?f.executeRead.bind(f):f.executeWrite.bind(f))(function(b){return n(d,void 0,void 0,function(){var g;return i(this,function(_){switch(_.label){case 0:return g=b.run(l,c),[4,u.resultTransformer(g)];case 1:return[2,_.sent()]}})})},u.transactionConfig)];case 2:return[2,v.sent()];case 3:return h.uninstall(),[4,f.close()];case 4:return v.sent(),[7];case 5:return[2]}var p,m,y})})},s})();e.default=a},7045:(r,e,t)=>{var n=t(3206);r.exports=function(i,o){var a=n(o),s=[];return(s=s.concat(a(i))).concat(a(null))}},7057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentOutOfRangeError=void 0;var n=t(5568);e.ArgumentOutOfRangeError=n.createErrorClass(function(i){return function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},7093:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var n=t(6587),i="__isPoint__",o=(function(){function s(u,l,c,f){this.srid=(0,n.assertNumberOrInteger)(u,"SRID"),this.x=(0,n.assertNumber)(l,"X coordinate"),this.y=(0,n.assertNumber)(c,"Y coordinate"),this.z=f==null?f:(0,n.assertNumber)(f,"Z coordinate"),Object.freeze(this)}return s.prototype.toString=function(){return this.z==null||isNaN(this.z)?"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),"}"):"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),", z=").concat(a(this.z),"}")},s})();function a(s){return Number.isInteger(s)?s.toString()+".0":s.toString()}e.Point=o,Object.defineProperty(o.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(s){return s!=null&&s[i]===!0}},7101:r=>{r.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},7110:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.executeSchedule=void 0,e.executeSchedule=function(t,n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var s=n.schedule(function(){i(),a?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(s),!a)return s}},7168:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var a=o(t(5361));e.v1=a;var s=o(t(2072));e.v2=s;var u=o(t(7665));e.structure=u,e.default=s},7174:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=n(t(45));e.BaseBuffer=i.default,e.default=i.default},7192:r=>{r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7210:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=void 0;var i=t(8014),o=t(7843),a=t(3111),s=t(7479),u=t(7961),l=t(1107),c=t(7110);e.bufferTime=function(f){for(var h,d,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var m=(h=l.popScheduler(v))!==null&&h!==void 0?h:u.asyncScheduler,y=(d=v[0])!==null&&d!==void 0?d:null,b=v[1]||1/0;return o.operate(function(g,_){var w=[],x=!1,E=function(C){var P=C.buffer;C.subs.unsubscribe(),s.arrRemove(w,C),_.next(P),x&&O()},O=function(){if(w){var C=new i.Subscription;_.add(C);var P={buffer:[],subs:C};w.push(P),c.executeSchedule(C,m,function(){return E(P)},f)}};y!==null&&y>=0?c.executeSchedule(_,m,O,y,!0):x=!0,O();var T=a.createOperatorSubscriber(_,function(C){var P,R,k=w.slice();try{for(var I=n(k),M=I.next();!M.done;M=I.next()){var j=M.value,L=j.buffer;L.push(C),b<=L.length&&E(j)}}catch(F){P={error:F}}finally{try{M&&!M.done&&(R=I.return)&&R.call(I)}finally{if(P)throw P.error}}},function(){for(;w!=null&&w.length;)_.next(w.shift().buffer);T==null||T.unsubscribe(),_.complete(),_.unsubscribe()},void 0,function(){return w=null});g.subscribe(T)})}},7220:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=void 0;var n=t(1637),i=t(8918);e.publishBehavior=function(o){return function(a){var s=new n.BehaviorSubject(o);return new i.ConnectableObservable(a,function(){return s})}}},7245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TestTools=e.Immediate=void 0;var t,n=1,i={};function o(a){return a in i&&(delete i[a],!0)}e.Immediate={setImmediate:function(a){var s=n++;return i[s]=!0,t||(t=Promise.resolve()),t.then(function(){return o(s)&&a()}),s},clearImmediate:function(a){o(a)}},e.TestTools={pending:function(){return Object.keys(i).length}}},7264:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(C){for(var P,R=1,k=arguments.length;R<k;R++)for(var I in P=arguments[R])Object.prototype.hasOwnProperty.call(P,I)&&(C[I]=P[I]);return C},n.apply(this,arguments)},i=this&&this.__awaiter||function(C,P,R,k){return new(R||(R=Promise))(function(I,M){function j(z){try{F(k.next(z))}catch(V){M(V)}}function L(z){try{F(k.throw(z))}catch(V){M(V)}}function F(z){var V;z.done?I(z.value):(V=z.value,V instanceof R?V:new R(function(G){G(V)})).then(j,L)}F((k=k.apply(C,P||[])).next())})},o=this&&this.__generator||function(C,P){var R,k,I,M,j={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return M={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function L(F){return function(z){return(function(V){if(R)throw new TypeError("Generator is already executing.");for(;M&&(M=0,V[0]&&(j=0)),j;)try{if(R=1,k&&(I=2&V[0]?k.return:V[0]?k.throw||((I=k.return)&&I.call(k),0):k.next)&&!(I=I.call(k,V[1])).done)return I;switch(k=0,I&&(V=[2&V[0],I.value]),V[0]){case 0:case 1:I=V;break;case 4:return j.label++,{value:V[1],done:!1};case 5:j.label++,k=V[1],V=[0];continue;case 7:V=j.ops.pop(),j.trys.pop();continue;default:if(!((I=(I=j.trys).length>0&&I[I.length-1])||V[0]!==6&&V[0]!==2)){j=0;continue}if(V[0]===3&&(!I||V[1]>I[0]&&V[1]<I[3])){j.label=V[1];break}if(V[0]===6&&j.label<I[1]){j.label=I[1],I=V;break}if(I&&j.label<I[2]){j.label=I[2],j.ops.push(V);break}I[2]&&j.ops.pop(),j.trys.pop();continue}V=P.call(C,j)}catch(G){V=[6,G],k=0}finally{R=I=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}})([F,z])}}},a=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var s=t(9730),u=a(t(8341)),l=t(326),c=t(4883),f=a(t(5481)),h=t(6587),d=t(6755),v=a(t(1573)),p=a(t(7041)),m=t(9691),y=a(t(3001)),b=t(6030),g=l.ACCESS_MODE_READ;e.READ=g;var _=l.ACCESS_MODE_WRITE;e.WRITE=_;var w=0;e.SessionConfig=function(){this.defaultAccessMode=_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var x={WRITE:"WRITE",READ:"READ"};e.routing=x,Object.freeze(x),e.QueryConfig=function(){this.routing=x.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var E=(function(){function C(P,R,k,I,M){R===void 0&&(R={}),I===void 0&&(I=function(L){return new f.default(L)}),M===void 0&&(M=function(L){return new p.default(L)}),(function(L){L.maxConnectionLifetime=O(L.maxConnectionLifetime,36e5),L.maxConnectionPoolSize=O(L.maxConnectionPoolSize,l.DEFAULT_POOL_MAX_SIZE),L.connectionAcquisitionTimeout=O(L.connectionAcquisitionTimeout,l.DEFAULT_POOL_ACQUISITION_TIMEOUT),L.fetchSize=T(L.fetchSize,1e3),L.connectionTimeout=(function(F){var z=parseInt(F.connectionTimeout,10);return z===0||!isNaN(z)&&z<0?null:isNaN(z)?l.DEFAULT_CONNECTION_TIMEOUT_MILLIS:z})(L),L.connectionLivenessCheckTimeout=(function(F){if(F!=null){var z=parseInt(F,10);if(z<0||Number.isNaN(z))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(z));return z}})(L.connectionLivenessCheckTimeout)})(R);var j=c.Logger.create(R);(function(L,F){var z,V,G=L.resolver;if(G!=null&&typeof G!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof G));if(L.connectionAcquisitionTimeout<L.connectionTimeout&&F.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((z=L.notificationFilter)===null||z===void 0?void 0:z.disabledCategories)!=null&&((V=L.notificationFilter)===null||V===void 0?void 0:V.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`)})(R,j),this._id=w++,this._meta=P,this._config=R,this._log=j,this._createConnectionProvider=k,this._createSession=I,this._defaultExecuteQueryBookmarkManager=(0,d.bookmarkManager)(),this._queryExecutor=M(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new y.default(1e4),this._afterConstruction()}return Object.defineProperty(C.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),C.prototype.executeQuery=function(P,R,k){var I,M,j;return k===void 0&&(k={}),i(this,void 0,void 0,function(){var L,F,z;return o(this,function(V){switch(V.label){case 0:if(L=k.bookmarkManager===null?void 0:(I=k.bookmarkManager)!==null&&I!==void 0?I:this.executeQueryBookmarkManager,F=(M=k.resultTransformer)!==null&&M!==void 0?M:v.default.eagerResultTransformer(),(z=(j=k.routing)!==null&&j!==void 0?j:x.WRITE)!==x.READ&&z!==x.WRITE)throw(0,m.newError)('Illegal query routing config: "'.concat(z,'"'));return[4,this._queryExecutor.execute({resultTransformer:F,bookmarkManager:L,routing:z,database:k.database,impersonatedUser:k.impersonatedUser,transactionConfig:k.transactionConfig,auth:k.auth,signal:k.signal},P,R)];case 1:return[2,V.sent()]}})})},C.prototype.verifyConnectivity=function(P){var R=(P===void 0?{}:P).database,k=R===void 0?"":R;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:k,accessMode:g})},C.prototype.verifyAuthentication=function(P){var R=P===void 0?{}:P,k=R.database,I=R.auth;return i(this,void 0,void 0,function(){return o(this,function(M){switch(M.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:k??"system",auth:I,accessMode:g})];case 1:return[2,M.sent()]}})})},C.prototype.getServerInfo=function(P){var R=(P===void 0?{}:P).database,k=R===void 0?"":R;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:k,accessMode:g})},C.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},C.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},C.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},C.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},C.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},C.prototype.isEncrypted=function(){return this._isEncrypted()},C.prototype._supportsRouting=function(){return this._meta.routing},C.prototype._isEncrypted=function(){return this._config.encrypted===h.ENCRYPTION_ON||this._config.encrypted===!0},C.prototype._getTrust=function(){return this._config.trust},C.prototype.session=function(P){var R=P===void 0?{}:P,k=R.defaultAccessMode,I=k===void 0?_:k,M=R.bookmarks,j=R.database,L=j===void 0?"":j,F=R.impersonatedUser,z=R.fetchSize,V=R.bookmarkManager,G=R.notificationFilter,Y=R.auth;return this._newSession({defaultAccessMode:I,bookmarkOrBookmarks:M,database:L,reactive:!1,impersonatedUser:F,fetchSize:T(z,this._config.fetchSize),bookmarkManager:V,notificationFilter:G,auth:Y})},C.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},C.prototype[Symbol.asyncDispose]=function(){return this.close()},C.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},C.prototype._homeDatabaseCallback=function(P,R){this.homeDatabaseCache.set(P,R)},C.prototype._newSession=function(P){var R=P.defaultAccessMode,k=P.bookmarkOrBookmarks,I=P.database,M=P.reactive,j=P.impersonatedUser,L=P.fetchSize,F=P.bookmarkManager,z=P.notificationFilter,V=P.auth,G=f.default._validateSessionMode(R),Y=this._getOrCreateConnectionProvider(),ie=this.homeDatabaseCache.get((0,b.cacheKey)(V,j)),W=this._homeDatabaseCallback.bind(this),H=k!=null?new s.Bookmarks(k):s.Bookmarks.empty();return this._createSession({mode:G,database:I??"",connectionProvider:Y,bookmarks:H,config:n({cachedHomeDatabase:ie,routingDriver:this._supportsRouting()},this._config),reactive:M,impersonatedUser:j,fetchSize:L,bookmarkManager:F,notificationFilter:z,auth:V,log:this._log,homeDatabaseCallback:W})},C.prototype._getOrCreateConnectionProvider=function(){var P;return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(P=this._config,new u.default(P.resolver)))),this._connectionProvider},C})();function O(C,P){var R=parseInt(C,10);return R>0||R===0?R:R<0?Number.MAX_SAFE_INTEGER:P}function T(C,P){var R=parseInt(C,10);if(R>0||R===l.FETCH_ALL)return R;if(R===0||R<0)throw new Error("The fetch size can only be a positive value or ".concat(l.FETCH_ALL," for ALL. However fetchSize = ").concat(R));return P}e.Driver=E,e.default=E},7286:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(4662),a=t(9445),s=t(8535),u=t(8616),l=t(3111),c=t(1107);e.zip=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f),v=s.argsOrArgArray(f);return v.length?new o.Observable(function(p){var m=v.map(function(){return[]}),y=v.map(function(){return!1});p.add(function(){m=y=null});for(var b=function(_){a.innerFrom(v[_]).subscribe(l.createOperatorSubscriber(p,function(w){if(m[_].push(w),m.every(function(E){return E.length})){var x=m.map(function(E){return E.shift()});p.next(d?d.apply(void 0,i([],n(x))):x),m.some(function(E,O){return!E.length&&y[O]})&&p.complete()}},function(){y[_]=!0,!m[_].length&&p.complete()}))},g=0;!p.closed&&g<v.length;g++)b(g);return function(){m=y=null}}):u.EMPTY}},7302:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=void 0;var n=t(983),i=t(6640);e.mergeAll=function(o){return o===void 0&&(o=1/0),n.mergeMap(i.identity,o)}},7315:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportUnhandledError=void 0;var n=t(3413),i=t(9155);e.reportUnhandledError=function(o){i.timeoutProvider.setTimeout(function(){var a=n.config.onUnhandledError;if(!a)throw o;a(o)})}},7331:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(5348));e.default=n({},o.default)},7360:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsArgArrayOrObject=void 0;var t=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;e.argsArgArrayOrObject=function(a){if(a.length===1){var s=a[0];if(t(s))return{args:s,keys:null};if((l=s)&&typeof l=="object"&&n(l)===i){var u=o(s);return{args:u.map(function(c){return s[c]}),keys:u}}}var l;return{args:a,keys:null}}},7372:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.skipUntil=function(s){return n.operate(function(u,l){var c=!1,f=i.createOperatorSubscriber(l,function(){f==null||f.unsubscribe(),c=!0},a.noop);o.innerFrom(s).subscribe(f),u.subscribe(i.createOperatorSubscriber(l,function(h){return c&&l.next(h)}))})}},7428:function(r,e,t){var n=this&&this.__extends||(function(){var J=function(ne,K){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,Z){$.__proto__=Z}||function($,Z){for(var ae in Z)Object.prototype.hasOwnProperty.call(Z,ae)&&($[ae]=Z[ae])},J(ne,K)};return function(ne,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function $(){this.constructor=ne}J(ne,K),ne.prototype=K===null?Object.create(K):($.prototype=K.prototype,new $)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(J){for(var ne,K=1,$=arguments.length;K<$;K++)for(var Z in ne=arguments[K])Object.prototype.hasOwnProperty.call(ne,Z)&&(J[Z]=ne[Z]);return J},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(J,ne,K,$){$===void 0&&($=K);var Z=Object.getOwnPropertyDescriptor(ne,K);Z&&!("get"in Z?!ne.__esModule:Z.writable||Z.configurable)||(Z={enumerable:!0,get:function(){return ne[K]}}),Object.defineProperty(J,$,Z)}:function(J,ne,K,$){$===void 0&&($=K),J[$]=ne[K]}),a=this&&this.__setModuleDefault||(Object.create?function(J,ne){Object.defineProperty(J,"default",{enumerable:!0,value:ne})}:function(J,ne){J.default=ne}),s=this&&this.__importStar||function(J){if(J&&J.__esModule)return J;var ne={};if(J!=null)for(var K in J)K!=="default"&&Object.prototype.hasOwnProperty.call(J,K)&&o(ne,J,K);return a(ne,J),ne},u=this&&this.__awaiter||function(J,ne,K,$){return new(K||(K=Promise))(function(Z,ae){function se(ye){try{ge($.next(ye))}catch(pe){ae(pe)}}function fe(ye){try{ge($.throw(ye))}catch(pe){ae(pe)}}function ge(ye){var pe;ye.done?Z(ye.value):(pe=ye.value,pe instanceof K?pe:new K(function(N){N(pe)})).then(se,fe)}ge(($=$.apply(J,ne||[])).next())})},l=this&&this.__generator||function(J,ne){var K,$,Z,ae,se={label:0,sent:function(){if(1&Z[0])throw Z[1];return Z[1]},trys:[],ops:[]};return ae={next:fe(0),throw:fe(1),return:fe(2)},typeof Symbol=="function"&&(ae[Symbol.iterator]=function(){return this}),ae;function fe(ge){return function(ye){return(function(pe){if(K)throw new TypeError("Generator is already executing.");for(;ae&&(ae=0,pe[0]&&(se=0)),se;)try{if(K=1,$&&(Z=2&pe[0]?$.return:pe[0]?$.throw||((Z=$.return)&&Z.call($),0):$.next)&&!(Z=Z.call($,pe[1])).done)return Z;switch($=0,Z&&(pe=[2&pe[0],Z.value]),pe[0]){case 0:case 1:Z=pe;break;case 4:return se.label++,{value:pe[1],done:!1};case 5:se.label++,$=pe[1],pe=[0];continue;case 7:pe=se.ops.pop(),se.trys.pop();continue;default:if(!((Z=(Z=se.trys).length>0&&Z[Z.length-1])||pe[0]!==6&&pe[0]!==2)){se=0;continue}if(pe[0]===3&&(!Z||pe[1]>Z[0]&&pe[1]<Z[3])){se.label=pe[1];break}if(pe[0]===6&&se.label<Z[1]){se.label=Z[1],Z=pe;break}if(Z&&se.label<Z[2]){se.label=Z[2],se.ops.push(pe);break}Z[2]&&se.ops.pop(),se.trys.pop();continue}pe=ne.call(J,se)}catch(N){pe=[6,N],$=0}finally{K=Z=0}if(5&pe[0])throw pe[1];return{value:pe[0]?pe[1]:void 0,done:!0}})([ge,ye])}}},c=this&&this.__values||function(J){var ne=typeof Symbol=="function"&&Symbol.iterator,K=ne&&J[ne],$=0;if(K)return K.call(J);if(J&&typeof J.length=="number")return{next:function(){return J&&$>=J.length&&(J=void 0),{value:J&&J[$++],done:!J}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__read||function(J,ne){var K=typeof Symbol=="function"&&J[Symbol.iterator];if(!K)return J;var $,Z,ae=K.call(J),se=[];try{for(;(ne===void 0||ne-- >0)&&!($=ae.next()).done;)se.push($.value)}catch(fe){Z={error:fe}}finally{try{$&&!$.done&&(K=ae.return)&&K.call(ae)}finally{if(Z)throw Z.error}}return se},h=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(e,"__esModule",{value:!0});var d=t(9305),v=s(t(206)),p=t(7452),m=h(t(4132)),y=h(t(8987)),b=t(4455),g=t(7721),_=t(6781),w=d.error.SERVICE_UNAVAILABLE,x=d.error.SESSION_EXPIRED,E=d.internal.bookmarks.Bookmarks,O=d.internal.constants,T=O.ACCESS_MODE_READ,C=O.ACCESS_MODE_WRITE,P=O.BOLT_PROTOCOL_V3,R=O.BOLT_PROTOCOL_V4_0,k=O.BOLT_PROTOCOL_V4_4,I=O.BOLT_PROTOCOL_V5_1,M="Neo.ClientError.Database.DatabaseNotFound",j="Neo.ClientError.Transaction.InvalidBookmark",L="Neo.ClientError.Transaction.InvalidBookmarkMixture",F="Neo.ClientError.Security.AuthorizationExpired",z="Neo.ClientError.Statement.ArgumentError",V="Neo.ClientError.Request.Invalid",G="Neo.ClientError.Statement.TypeError",Y="N/A",ie=null,W=(0,d.int)(3e4),H=(function(J){function ne(K){var $=K.id,Z=K.address,ae=K.routingContext,se=K.hostNameResolver,fe=K.config,ge=K.log,ye=K.userAgent,pe=K.boltAgent,N=K.authTokenManager,B=K.routingTablePurgeDelay,q=K.newPool,re=J.call(this,{id:$,config:fe,log:ge,userAgent:ye,boltAgent:pe,authTokenManager:N,newPool:q},function(ue){return u(re,void 0,void 0,function(){var le,de;return l(this,function(xe){switch(xe.label){case 0:return le=g.createChannelConnection,de=[ue,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,le.apply(void 0,de.concat([xe.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return re._routingContext=i(i({},ae),{address:Z.toString()}),re._seedRouter=Z,re._rediscovery=new v.default(re._routingContext),re._loadBalancingStrategy=new b.LeastConnectedLoadBalancingStrategy(re._connectionPool),re._hostNameResolver=se,re._dnsResolver=new p.HostNameResolver,re._log=ge,re._useSeedRouter=!0,re._routingTableRegistry=new Q(B?(0,d.int)(B):W),re._refreshRoutingTable=_.functional.reuseOngoingRequest(re._refreshRoutingTable,re),re._withSSR=0,re._withoutSSR=0,re}return n(ne,J),ne.prototype._createConnectionErrorHandler=function(){return new g.ConnectionErrorHandler(x)},ne.prototype._handleUnavailability=function(K,$,Z){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat($," for database '").concat(Z,"' because of an error ").concat(K.code," '").concat(K.message,"'")),this.forget($,Z||ie),K},ne.prototype._handleSecurityError=function(K,$,Z,ae){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat($," for database '").concat(ae,"' because of an error ").concat(K.code," '").concat(K.message,"'")),J.prototype._handleSecurityError.call(this,K,$,Z,ae)},ne.prototype._handleWriteFailure=function(K,$,Z){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat($," for database '").concat(Z,"' because of an error ").concat(K.code," '").concat(K.message,"'")),this.forgetWriter($,Z||ie),(0,d.newError)("No longer possible to write to server at "+$,x,K)},ne.prototype.acquireConnection=function(K){var $=K===void 0?{}:K,Z=$.accessMode,ae=$.database,se=$.bookmarks,fe=$.impersonatedUser,ge=$.onDatabaseNameResolved,ye=$.auth,pe=$.homeDb;return u(this,void 0,void 0,function(){var N,B,q,re,ue,le=this;return l(this,function(de){switch(de.label){case 0:return N={database:ae||ie},B=new g.ConnectionErrorHandler(x,function(xe,ke){return le._handleUnavailability(xe,ke,N.database)},function(xe,ke){return le._handleWriteFailure(xe,ke,pe??N.database)},function(xe,ke,Xe){return le._handleSecurityError(xe,ke,Xe,N.database)}),this.SSREnabled()&&pe!==void 0&&ae===""?!(re=this._routingTableRegistry.get(pe,function(){return new v.RoutingTable({database:pe})}))||re.isStaleFor(Z)?[3,2]:[4,this.getConnectionFromRoutingTable(re,ye,Z,B)]:[3,2];case 1:if(q=de.sent(),this.SSREnabled())return[2,q];q.release(),de.label=2;case 2:return[4,this._freshRoutingTable({accessMode:Z,database:N.database,bookmarks:se,impersonatedUser:fe,auth:ye,onDatabaseNameResolved:function(xe){N.database=N.database||xe,ge&&ge(xe)}})];case 3:return ue=de.sent(),[2,this.getConnectionFromRoutingTable(ue,ye,Z,B)]}})})},ne.prototype.getConnectionFromRoutingTable=function(K,$,Z,ae){return u(this,void 0,void 0,function(){var se,fe,ge,ye;return l(this,function(pe){switch(pe.label){case 0:if(Z===T)fe=this._loadBalancingStrategy.selectReader(K.readers),se="read";else{if(Z!==C)throw(0,d.newError)("Illegal mode "+Z);fe=this._loadBalancingStrategy.selectWriter(K.writers),se="write"}if(!fe)throw(0,d.newError)("Failed to obtain connection towards ".concat(se," server. Known routing table is: ").concat(K),x);pe.label=1;case 1:return pe.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:$},fe)];case 2:return ge=pe.sent(),$?[4,this._verifyStickyConnection({auth:$,connection:ge,address:fe})]:[3,4];case 3:return pe.sent(),[2,ge];case 4:return[2,new g.DelegateConnection(ge,ae)];case 5:throw ye=pe.sent(),ae.handleAndTransformError(ye,fe);case 6:return[2]}})})},ne.prototype._hasProtocolVersion=function(K){return u(this,void 0,void 0,function(){var $,Z,ae,se,fe,ge;return l(this,function(ye){switch(ye.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:$=ye.sent(),ae=0,ye.label=2;case 2:if(!(ae<$.length))return[3,8];ye.label=3;case 3:return ye.trys.push([3,6,,7]),[4,this._createChannelConnection($[ae])];case 4:return se=ye.sent(),fe=se.protocol()?se.protocol().version:null,[4,se.close()];case 5:return ye.sent(),fe?[2,K(fe)]:[2,!1];case 6:return ge=ye.sent(),Z=ge,[3,7];case 7:return ae++,[3,2];case 8:if(Z)throw Z;return[2,!1]}})})},ne.prototype.supportsMultiDb=function(){return u(this,void 0,void 0,function(){return l(this,function(K){switch(K.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=R})];case 1:return[2,K.sent()]}})})},ne.prototype.supportsTransactionConfig=function(){return u(this,void 0,void 0,function(){return l(this,function(K){switch(K.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=P})];case 1:return[2,K.sent()]}})})},ne.prototype.supportsUserImpersonation=function(){return u(this,void 0,void 0,function(){return l(this,function(K){switch(K.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=k})];case 1:return[2,K.sent()]}})})},ne.prototype.supportsSessionAuth=function(){return u(this,void 0,void 0,function(){return l(this,function(K){switch(K.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=I})];case 1:return[2,K.sent()]}})})},ne.prototype.getNegotiatedProtocolVersion=function(){var K=this;return new Promise(function($,Z){K._hasProtocolVersion($).catch(Z)})},ne.prototype.verifyAuthentication=function(K){var $=K.database,Z=K.accessMode,ae=K.auth;return u(this,void 0,void 0,function(){var se=this;return l(this,function(fe){return[2,this._verifyAuthentication({auth:ae,getAddress:function(){return u(se,void 0,void 0,function(){var ge,ye,pe;return l(this,function(N){switch(N.label){case 0:return ge={database:$||ie},[4,this._freshRoutingTable({accessMode:Z,database:ge.database,auth:ae,onDatabaseNameResolved:function(B){ge.database=ge.database||B}})];case 1:if(ye=N.sent(),(pe=Z===C?ye.writers:ye.readers).length===0)throw(0,d.newError)("No servers available for database '".concat(ge.database,"' with access mode '").concat(Z,"'"),w);return[2,pe[0]]}})})}})]})})},ne.prototype.verifyConnectivityAndGetServerInfo=function(K){var $=K.database,Z=K.accessMode;return u(this,void 0,void 0,function(){var ae,se,fe,ge,ye,pe,N,B,q,re,ue;return l(this,function(le){switch(le.label){case 0:return ae={database:$||ie},[4,this._freshRoutingTable({accessMode:Z,database:ae.database,onDatabaseNameResolved:function(de){ae.database=ae.database||de}})];case 1:se=le.sent(),fe=Z===C?se.writers:se.readers,ge=(0,d.newError)("No servers available for database '".concat(ae.database,"' with access mode '").concat(Z,"'"),w),le.label=2;case 2:le.trys.push([2,9,10,11]),ye=c(fe),pe=ye.next(),le.label=3;case 3:if(pe.done)return[3,8];N=pe.value,le.label=4;case 4:return le.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:N})];case 5:return[2,le.sent()];case 6:return B=le.sent(),ge=B,[3,7];case 7:return pe=ye.next(),[3,3];case 8:return[3,11];case 9:return q=le.sent(),re={error:q},[3,11];case 10:try{pe&&!pe.done&&(ue=ye.return)&&ue.call(ye)}finally{if(re)throw re.error}return[7];case 11:throw ge}})})},ne.prototype.forget=function(K,$){this._routingTableRegistry.apply($,{applyWhenExists:function(Z){return Z.forget(K)}}),this._connectionPool.purge(K).catch(function(){})},ne.prototype.forgetWriter=function(K,$){this._routingTableRegistry.apply($,{applyWhenExists:function(Z){return Z.forgetWriter(K)}})},ne.prototype._freshRoutingTable=function(K){var $=K===void 0?{}:K,Z=$.accessMode,ae=$.database,se=$.bookmarks,fe=$.impersonatedUser,ge=$.onDatabaseNameResolved,ye=$.auth,pe=this._routingTableRegistry.get(ae,function(){return new v.RoutingTable({database:ae})});return pe.isStaleFor(Z)?(this._log.info('Routing table is stale for database: "'.concat(ae,'" and access mode: "').concat(Z,'": ').concat(pe)),this._refreshRoutingTable(pe,se,fe,ye).then(function(N){return ge(N.database),N})):pe},ne.prototype._refreshRoutingTable=function(K,$,Z,ae){var se=K.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(se,K,$,Z,ae):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(se,K,$,Z,ae)},ne.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(K,$,Z,ae,se){return u(this,void 0,void 0,function(){var fe,ge,ye,pe,N,B,q;return l(this,function(re){switch(re.label){case 0:return fe=[],[4,this._fetchRoutingTableUsingSeedRouter(fe,this._seedRouter,$,Z,ae,se)];case 1:return ge=f.apply(void 0,[re.sent(),2]),ye=ge[0],pe=ge[1],ye?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(K,$,Z,ae,se)];case 3:N=f.apply(void 0,[re.sent(),2]),B=N[0],q=N[1],ye=B,pe=q||pe,re.label=4;case 4:return[4,this._applyRoutingTableIfPossible($,ye,pe)];case 5:return[2,re.sent()]}})})},ne.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(K,$,Z,ae,se){return u(this,void 0,void 0,function(){var fe,ge,ye,pe;return l(this,function(N){switch(N.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(K,$,Z,ae,se)];case 1:return fe=f.apply(void 0,[N.sent(),2]),ge=fe[0],ye=fe[1],ge?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(K,this._seedRouter,$,Z,ae,se)];case 2:pe=f.apply(void 0,[N.sent(),2]),ge=pe[0],ye=pe[1],N.label=3;case 3:return[4,this._applyRoutingTableIfPossible($,ge,ye)];case 4:return[2,N.sent()]}})})},ne.prototype._fetchRoutingTableUsingKnownRouters=function(K,$,Z,ae,se){return u(this,void 0,void 0,function(){var fe,ge,ye,pe;return l(this,function(N){switch(N.label){case 0:return[4,this._fetchRoutingTable(K,$,Z,ae,se)];case 1:return fe=f.apply(void 0,[N.sent(),2]),ge=fe[0],ye=fe[1],ge?[2,[ge,null]]:(pe=K.length-1,ne._forgetRouter($,K,pe),[2,[null,ye]])}})})},ne.prototype._fetchRoutingTableUsingSeedRouter=function(K,$,Z,ae,se,fe){return u(this,void 0,void 0,function(){var ge,ye;return l(this,function(pe){switch(pe.label){case 0:return[4,this._resolveSeedRouter($)];case 1:return ge=pe.sent(),ye=ge.filter(function(N){return K.indexOf(N)<0}),[4,this._fetchRoutingTable(ye,Z,ae,se,fe)];case 2:return[2,pe.sent()]}})})},ne.prototype._resolveSeedRouter=function(K){return u(this,void 0,void 0,function(){var $,Z,ae=this;return l(this,function(se){switch(se.label){case 0:return[4,this._hostNameResolver.resolve(K)];case 1:return $=se.sent(),[4,Promise.all($.map(function(fe){return ae._dnsResolver.resolve(fe)}))];case 2:return Z=se.sent(),[2,[].concat.apply([],Z)]}})})},ne.prototype._fetchRoutingTable=function(K,$,Z,ae,se){return u(this,void 0,void 0,function(){var fe=this;return l(this,function(ge){return[2,K.reduce(function(ye,pe,N){return u(fe,void 0,void 0,function(){var B,q,re,ue,le,de,xe;return l(this,function(ke){switch(ke.label){case 0:return[4,ye];case 1:return B=f.apply(void 0,[ke.sent(),1]),(q=B[0])?[2,[q,null]]:(re=N-1,ne._forgetRouter($,K,re),[4,this._createSessionForRediscovery(pe,Z,ae,se)]);case 2:if(ue=f.apply(void 0,[ke.sent(),2]),le=ue[0],de=ue[1],!le)return[3,8];ke.label=3;case 3:return ke.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(le,$.database,pe,ae)];case 4:return[2,[ke.sent(),null]];case 5:return xe=ke.sent(),[2,this._handleRediscoveryError(xe,pe)];case 6:return le.close(),[7];case 7:return[3,9];case 8:return[2,[null,de]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},ne.prototype._createSessionForRediscovery=function(K,$,Z,ae){return u(this,void 0,void 0,function(){var se,fe,ge,ye,pe,N=this;return l(this,function(B){switch(B.label){case 0:return B.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:ae},K)];case 1:return se=B.sent(),ae?[4,this._verifyStickyConnection({auth:ae,connection:se,address:K})]:[3,3];case 2:B.sent(),B.label=3;case 3:return fe=g.ConnectionErrorHandler.create({errorCode:x,handleSecurityError:function(q,re,ue){return N._handleSecurityError(q,re,ue)}}),ge=se._sticky?new g.DelegateConnection(se):new g.DelegateConnection(se,fe),ye=new m.default(ge),se.protocol().version<4?[2,[new d.Session({mode:C,bookmarks:E.empty(),connectionProvider:ye}),null]]:[2,[new d.Session({mode:T,database:"system",bookmarks:$,connectionProvider:ye,impersonatedUser:Z}),null]];case 4:return pe=B.sent(),[2,this._handleRediscoveryError(pe,K)];case 5:return[2]}})})},ne.prototype._handleRediscoveryError=function(K,$){if((function(Z){return[M,j,L,z,V,G,Y].includes(Z.code)})(K)||(function(Z){return Z.code.startsWith("Neo.ClientError.Security.")&&![F].includes(Z.code)})(K))throw K;if(K.code==="Neo.ClientError.Procedure.ProcedureNotFound")throw(0,d.newError)("Server at ".concat($.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),w,K);return this._log.warn("unable to fetch routing table because of an error ".concat(K)),[null,K]},ne.prototype._applyRoutingTableIfPossible=function(K,$,Z){return u(this,void 0,void 0,function(){return l(this,function(ae){switch(ae.label){case 0:if(!$)throw(0,d.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(K),w,Z);return $.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable($)];case 1:return ae.sent(),[2,$]}})})},ne.prototype._updateRoutingTable=function(K){return u(this,void 0,void 0,function(){return l(this,function($){switch($.label){case 0:return[4,this._connectionPool.keepAll(K.allServers())];case 1:return $.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(K),this._log.info("Updated routing table ".concat(K)),[2]}})})},ne._forgetRouter=function(K,$,Z){var ae=$[Z];K&&ae&&K.forgetRouter(ae)},ne.prototype._channelSsrCallback=function(K,$){if($==="OPEN")K===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else{if($!=="CLOSE")throw(0,d.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'");K===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1}},ne.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},ne})(y.default);e.default=H;var Q=(function(){function J(ne){this._tables=new Map,this._routingTablePurgeDelay=ne}return J.prototype.register=function(ne){return this._tables.set(ne.database,ne),this},J.prototype.apply=function(ne,K){var $=K===void 0?{}:K,Z=$.applyWhenExists,ae=$.applyWhenDontExists,se=ae===void 0?function(){}:ae;return this._tables.has(ne)?Z(this._tables.get(ne)):typeof ne=="string"||ne===null?se():this._forEach(Z),this},J.prototype.get=function(ne,K){return this._tables.has(ne)?this._tables.get(ne):typeof K=="function"?K():K},J.prototype.removeExpired=function(){var ne=this;return this._removeIf(function(K){return K.isExpiredFor(ne._routingTablePurgeDelay)})},J.prototype._forEach=function(ne){var K,$;try{for(var Z=c(this._tables),ae=Z.next();!ae.done;ae=Z.next())ne(f(ae.value,2)[1])}catch(se){K={error:se}}finally{try{ae&&!ae.done&&($=Z.return)&&$.call(Z)}finally{if(K)throw K.error}}return this},J.prototype._remove=function(ne){return this._tables.delete(ne),this},J.prototype._removeIf=function(ne){var K,$;try{for(var Z=c(this._tables),ae=Z.next();!ae.done;ae=Z.next()){var se=f(ae.value,2),fe=se[0];ne(se[1])&&this._remove(fe)}}catch(ge){K={error:ge}}finally{try{ae&&!ae.done&&($=Z.return)&&$.call(Z)}finally{if(K)throw K.error}}return this},J})()},7441:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.dematerialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){return n.observeNotification(u,s)}))})}},7449:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,p=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(d=p.next()).done;)m.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(v)throw v.error}}return m},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7168),s=t(9305),u=o(t(7518)),l=o(t(5045));e.default=n(n(n({},u.default),l.default),{createNodeTransformer:function(c){return u.default.createNodeTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Node",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],p=h[2],m=h[3];return new s.Node(d,v,p,m)}})},createRelationshipTransformer:function(c){return u.default.createRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Relationship",8,f.size);var h=i(f.fields,8),d=h[0],v=h[1],p=h[2],m=h[3],y=h[4],b=h[5],g=h[6],_=h[7];return new s.Relationship(d,v,p,m,y,b,g,_)}})},createUnboundRelationshipTransformer:function(c){return u.default.createUnboundRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("UnboundRelationship",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],p=h[2],m=h[3];return new s.UnboundRelationship(d,v,p,m)}})}})},7452:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__exportStar||function(l,c){for(var f in l)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,l,f)},o=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(t(3951),e),i(t(373),e);var a=t(2481);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return o(a).default}});var s=t(5319);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return s.alloc}});var u=t(3473);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return o(u).default}})},7479:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrRemove=void 0,e.arrRemove=function(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}},7509:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var a=t(6587),s=o(t(407)),u=(function(){function l(c,f,h,d){this._host=(0,a.assertString)(c,"host"),this._resolved=f!=null?(0,a.assertString)(f,"resolved"):null,this._port=(0,a.assertNumber)(h,"port"),this._hostPort=d,this._stringValue=f!=null?"".concat(d,"(").concat(f,")"):"".concat(d)}return l.prototype.host=function(){return this._host},l.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},l.prototype.port=function(){return this._port},l.prototype.resolveWith=function(c){return new l(this._host,c,this._port,this._hostPort)},l.prototype.asHostPort=function(){return this._hostPort},l.prototype.asKey=function(){return this._hostPort},l.prototype.toString=function(){return this._stringValue},l.fromUrl=function(c){var f=s.parseDatabaseUrl(c);return new l(f.host,null,f.port,f.hostAndPort)},l})();e.ServerAddress=u},7518:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7331));e.default=n({},o.default)},7521:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2066));e.default=n({},o.default)},7561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=void 0;var n=t(7843),i=t(3111);e.refCount=function(){return n.operate(function(o,a){var s=null;o._refCount++;var u=i.createOperatorSubscriber(a,void 0,void 0,void 0,function(){if(!o||o._refCount<=0||0<--o._refCount)s=null;else{var l=o._connection,c=s;s=null,!l||c&&l!==c||l.unsubscribe(),a.unsubscribe()}});o.subscribe(u),u.closed||(s=o.connect())})}},7579:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connectable=void 0;var n=t(2483),i=t(4662),o=t(9353),a={connector:function(){return new n.Subject},resetOnDisconnect:!0};e.connectable=function(s,u){u===void 0&&(u=a);var l=null,c=u.connector,f=u.resetOnDisconnect,h=f===void 0||f,d=c(),v=new i.Observable(function(p){return d.subscribe(p)});return v.connect=function(){return l&&!l.closed||(l=o.defer(function(){return s}).subscribe(d),h&&l.add(function(){return d=c()})),l},v}},7589:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var t=100;e.DEFAULT_MAX_SIZE=t;var n=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=n;var i=(function(){function s(u,l){this.maxSize=o(u,t),this.acquisitionTimeout=o(l,n)}return s.defaultConfig=function(){return new s(t,n)},s.fromDriverConfig=function(u){return new s(a(u.maxConnectionPoolSize)?u.maxConnectionPoolSize:t,a(u.connectionAcquisitionTimeout)?u.connectionAcquisitionTimeout:n)},s})();function o(s,u){return a(s)?s:u}function a(s){return s===0||s!=null}e.default=i},7601:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)p.push(h.value)}catch(m){d={error:m}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return p},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var o=t(7843),a=t(8158),s=t(1107),u=t(4917);e.concat=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l);return o.operate(function(h,d){a.concatAll()(u.from(i([h],n(l)),f)).subscribe(d)})}},7610:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(y){return(function(b){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){v.label=b[1];break}if(b[0]===6&&v.label<h[1]){v.label=h[1],h=b;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(b);break}h[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(g){b=[6,g],f=0}finally{c=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([m,y])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.generate=void 0;var i=t(6640),o=t(8613),a=t(9353),s=t(8808);e.generate=function(u,l,c,f,h){var d,v,p,m;function y(){var b;return n(this,function(g){switch(g.label){case 0:b=m,g.label=1;case 1:return l&&!l(b)?[3,4]:[4,p(b)];case 2:g.sent(),g.label=3;case 3:return b=c(b),[3,1];case 4:return[2]}})}return arguments.length===1?(m=(d=u).initialState,l=d.condition,c=d.iterate,v=d.resultSelector,p=v===void 0?i.identity:v,h=d.scheduler):(m=u,!f||o.isScheduler(f)?(p=i.identity,h=f):p=f),a.defer(h?function(){return s.scheduleIterable(y(),h)}:y)}},7614:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createInvalidObservableTypeError=void 0,e.createInvalidObservableTypeError=function(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},7629:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=void 0;var n=t(1018);e.isPromise=function(i){return n.isFunction(i==null?void 0:i.then)}},7640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=void 0;var n=t(7961),i=t(8941),o=t(4092);e.throttleTime=function(a,s,u){s===void 0&&(s=n.asyncScheduler);var l=o.timer(a,s);return i.throttle(function(){return l},u)}},7661:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand=void 0;var n=t(7843),i=t(1983);e.expand=function(o,a,s){return a===void 0&&(a=1/0),a=(a||0)<1?1/0:a,n.operate(function(u,l){return i.mergeInternals(u,l,o,a,void 0,!0,s)})}},7665:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var n=t(9305),i=n.error.PROTOCOL_ERROR,o=(function(){function a(s,u){this.signature=s,this.fields=u}return Object.defineProperty(a.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),a.prototype.toString=function(){for(var s="",u=0;u<this.fields.length;u++)u>0&&(s+=", "),s+=this.fields[u];return"Structure("+this.signature+", ["+s+"])"},a})();e.Structure=o,e.verifyStructSize=function(a,s,u){if(s!==u)throw(0,n.newError)("Wrong struct size for ".concat(a,", expected ").concat(s," but was ").concat(u),i)},e.default=o},7666:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),i=this&&this.__exportStar||function(c,f){for(var h in c)h==="default"||Object.prototype.hasOwnProperty.call(f,h)||n(f,c,h)},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var a=o(t(8731)),s=o(t(6544)),u=o(t(9054)),l=o(t(7790));i(t(9014),e),e.BoltProtocol=u.default,e.RawRoutingTable=l.default,e.default={handshake:a.default,create:s.default}},7714:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFind=e.find=void 0;var n=t(7843),i=t(3111);function o(a,s,u){var l=u==="index";return function(c,f){var h=0;c.subscribe(i.createOperatorSubscriber(f,function(d){var v=h++;a.call(s,d,v,c)&&(f.next(l?v:d),f.complete())},function(){f.next(l?-1:void 0),f.complete()}))}}e.find=function(a,s){return n.operate(o(a,s,"value"))},e.createFind=o},7721:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var p=Object.getOwnPropertyDescriptor(h,d);p&&!("get"in p?!h.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,p)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h},a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var s=a(t(6385));e.Connection=s.default;var u=o(t(8031));e.ChannelConnection=u.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});var l=a(t(9857));e.DelegateConnection=l.default;var c=a(t(2363));e.ConnectionErrorHandler=c.default,e.default=s.default},7740:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairs=void 0;var n=t(4917);e.pairs=function(i,o){return n.from(Object.entries(i),o)}},7790:function(r,e,t){var n=this&&this.__extends||(function(){var l=function(c,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(h[v]=d[v])},l(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=c}l(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}})(),i=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),i(t(9305));var o=(function(){function l(){}return l.ofRecord=function(c){return c===null?l.ofNull():new u(c)},l.ofMessageResponse=function(c){return c===null?l.ofNull():new a(c)},l.ofNull=function(){return new s},Object.defineProperty(l.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),l})();e.default=o;var a=(function(l){function c(f){var h=l.call(this)||this;return h._response=f,h}return n(c,l),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),c})(o),s=(function(l){function c(){return l!==null&&l.apply(this,arguments)||this}return n(c,l),Object.defineProperty(c.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),c})(o),u=(function(l){function c(f){var h=l.call(this)||this;return h._record=f,h}return n(c,l),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),c})(o)},7800:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n,i=t(8616),o=t(1004),a=t(1103),s=t(1018);(n=e.NotificationKind||(e.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=(function(){function c(f,h,d){this.kind=f,this.value=h,this.error=d,this.hasValue=f==="N"}return c.prototype.observe=function(f){return l(this,f)},c.prototype.do=function(f,h,d){var v=this,p=v.kind,m=v.value,y=v.error;return p==="N"?f==null?void 0:f(m):p==="E"?h==null?void 0:h(y):d==null?void 0:d()},c.prototype.accept=function(f,h,d){var v;return s.isFunction((v=f)===null||v===void 0?void 0:v.next)?this.observe(f):this.do(f,h,d)},c.prototype.toObservable=function(){var f=this,h=f.kind,d=f.value,v=f.error,p=h==="N"?o.of(d):h==="E"?a.throwError(function(){return v}):h==="C"?i.EMPTY:0;if(!p)throw new TypeError("Unexpected notification kind "+h);return p},c.createNext=function(f){return new c("N",f)},c.createError=function(f){return new c("E",void 0,f)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c})();function l(c,f){var h,d,v,p=c,m=p.kind,y=p.value,b=p.error;if(typeof m!="string")throw new TypeError('Invalid notification, missing "kind"');m==="N"?(h=f.next)===null||h===void 0||h.call(f,y):m==="E"?(d=f.error)===null||d===void 0||d.call(f,b):(v=f.complete)===null||v===void 0||v.call(f)}e.Notification=u,e.observeNotification=l},7815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=void 0;var n=t(4662),i=t(9445),o=t(2483),a=t(7843),s=t(3111);e.groupBy=function(u,l,c,f){return a.operate(function(h,d){var v;l&&typeof l!="function"?(c=l.duration,v=l.element,f=l.connector):v=l;var p=new Map,m=function(w){p.forEach(w),w(d)},y=function(w){return m(function(x){return x.error(w)})},b=0,g=!1,_=new s.OperatorSubscriber(d,function(w){try{var x=u(w),E=p.get(x);if(!E){p.set(x,E=f?f():new o.Subject);var O=(C=x,P=E,(R=new n.Observable(function(k){b++;var I=P.subscribe(k);return function(){I.unsubscribe(),--b===0&&g&&_.unsubscribe()}})).key=C,R);if(d.next(O),c){var T=s.createOperatorSubscriber(E,function(){E.complete(),T==null||T.unsubscribe()},void 0,void 0,function(){return p.delete(x)});_.add(i.innerFrom(c(O)).subscribe(T))}}E.next(v?v(w):w)}catch(k){y(k)}var C,P,R},function(){return m(function(w){return w.complete()})},y,function(){return p.clear()},function(){return g=!0,b===0});h.subscribe(_)})}},7835:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retry=void 0;var n=t(7843),i=t(3111),o=t(6640),a=t(4092),s=t(9445);e.retry=function(u){var l;u===void 0&&(u=1/0);var c=(l=u&&typeof u=="object"?u:{count:u}).count,f=c===void 0?1/0:c,h=l.delay,d=l.resetOnSuccess,v=d!==void 0&&d;return f<=0?o.identity:n.operate(function(p,m){var y,b=0,g=function(){var _=!1;y=p.subscribe(i.createOperatorSubscriber(m,function(w){v&&(b=0),m.next(w)},void 0,function(w){if(b++<f){var x=function(){y?(y.unsubscribe(),y=null,g()):_=!0};if(h!=null){var E=typeof h=="number"?a.timer(h):s.innerFrom(h(w,b)),O=i.createOperatorSubscriber(m,function(){O.unsubscribe(),x()},function(){m.complete()});E.subscribe(O)}else x()}else m.error(w)})),_&&(y.unsubscribe(),y=null,g())};g()})}},7843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.operate=e.hasLift=void 0;var n=t(1018);function i(o){return n.isFunction(o==null?void 0:o.lift)}e.hasLift=i,e.operate=function(o){return function(a){if(i(a))return a.lift(function(s){try{return o(s,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},7853:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.using=void 0;var n=t(4662),i=t(9445),o=t(8616);e.using=function(a,s){return new n.Observable(function(u){var l=a(),c=s(l);return(c?i.innerFrom(c):o.EMPTY).subscribe(u),function(){l&&l.unsubscribe()}})}},7857:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.WRITE=e.READ=e.Driver=void 0;var o=t(9305),a=i(t(3466)),s=o.internal.constants.FETCH_ALL,u=o.driver.READ,l=o.driver.WRITE;e.READ=u,e.WRITE=l;var c=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),d.prototype.rxSession=function(v){var p=v===void 0?{}:v,m=p.defaultAccessMode,y=m===void 0?l:m,b=p.bookmarks,g=p.database,_=g===void 0?"":g,w=p.fetchSize,x=p.impersonatedUser,E=p.bookmarkManager,O=p.notificationFilter,T=p.auth;return new a.default({session:this._newSession({defaultAccessMode:y,bookmarkOrBookmarks:b,database:_,impersonatedUser:x,auth:T,reactive:!1,fetchSize:f(w,this._config.fetchSize),bookmarkManager:E,notificationFilter:O,log:this._log}),config:this._config,log:this._log})},d})(o.Driver);function f(h,d){var v=parseInt(h,10);if(v>0||v===s)return v;if(v===0||v<0)throw new Error("The fetch size can only be a positive value or ".concat(s," for ALL. However fetchSize = ").concat(v));return d}e.Driver=c,e.default=c},7961:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var n=t(5267),i=t(5648);e.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),e.async=e.asyncScheduler},7991:(r,e)=>{e.byteLength=function(c){var f=s(c),h=f[0],d=f[1];return 3*(h+d)/4-d},e.toByteArray=function(c){var f,h,d=s(c),v=d[0],p=d[1],m=new i((function(g,_,w){return 3*(_+w)/4-w})(0,v,p)),y=0,b=p>0?v-4:v;for(h=0;h<b;h+=4)f=n[c.charCodeAt(h)]<<18|n[c.charCodeAt(h+1)]<<12|n[c.charCodeAt(h+2)]<<6|n[c.charCodeAt(h+3)],m[y++]=f>>16&255,m[y++]=f>>8&255,m[y++]=255&f;return p===2&&(f=n[c.charCodeAt(h)]<<2|n[c.charCodeAt(h+1)]>>4,m[y++]=255&f),p===1&&(f=n[c.charCodeAt(h)]<<10|n[c.charCodeAt(h+1)]<<4|n[c.charCodeAt(h+2)]>>2,m[y++]=f>>8&255,m[y++]=255&f),m},e.fromByteArray=function(c){for(var f,h=c.length,d=h%3,v=[],p=16383,m=0,y=h-d;m<y;m+=p)v.push(l(c,m,m+p>y?y:m+p));return d===1?(f=c[h-1],v.push(t[f>>2]+t[f<<4&63]+"==")):d===2&&(f=(c[h-2]<<8)+c[h-1],v.push(t[f>>10]+t[f>>4&63]+t[f<<2&63]+"=")),v.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=o[a],n[o.charCodeAt(a)]=a;function s(c){var f=c.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=c.indexOf("=");return h===-1&&(h=f),[h,h===f?0:4-h%4]}function u(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[63&c]}function l(c,f,h){for(var d,v=[],p=f;p<h;p+=3)d=(c[p]<<16&16711680)+(c[p+1]<<8&65280)+(255&c[p+2]),v.push(u(d));return v.join("")}n[45]=62,n[95]=63},8014:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},o=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.isSubscription=e.EMPTY_SUBSCRIPTION=e.Subscription=void 0;var a=t(1018),s=t(5788),u=t(7479),l=(function(){function f(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}var h;return f.prototype.unsubscribe=function(){var d,v,p,m,y;if(!this.closed){this.closed=!0;var b=this._parentage;if(b)if(this._parentage=null,Array.isArray(b))try{for(var g=n(b),_=g.next();!_.done;_=g.next())_.value.remove(this)}catch(C){d={error:C}}finally{try{_&&!_.done&&(v=g.return)&&v.call(g)}finally{if(d)throw d.error}}else b.remove(this);var w=this.initialTeardown;if(a.isFunction(w))try{w()}catch(C){y=C instanceof s.UnsubscriptionError?C.errors:[C]}var x=this._finalizers;if(x){this._finalizers=null;try{for(var E=n(x),O=E.next();!O.done;O=E.next()){var T=O.value;try{c(T)}catch(C){y=y??[],C instanceof s.UnsubscriptionError?y=o(o([],i(y)),i(C.errors)):y.push(C)}}}catch(C){p={error:C}}finally{try{O&&!O.done&&(m=E.return)&&m.call(E)}finally{if(p)throw p.error}}}if(y)throw new s.UnsubscriptionError(y)}},f.prototype.add=function(d){var v;if(d&&d!==this)if(this.closed)c(d);else{if(d instanceof f){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=(v=this._finalizers)!==null&&v!==void 0?v:[]).push(d)}},f.prototype._hasParent=function(d){var v=this._parentage;return v===d||Array.isArray(v)&&v.includes(d)},f.prototype._addParent=function(d){var v=this._parentage;this._parentage=Array.isArray(v)?(v.push(d),v):v?[v,d]:d},f.prototype._removeParent=function(d){var v=this._parentage;v===d?this._parentage=null:Array.isArray(v)&&u.arrRemove(v,d)},f.prototype.remove=function(d){var v=this._finalizers;v&&u.arrRemove(v,d),d instanceof f&&d._removeParent(this)},f.EMPTY=((h=new f).closed=!0,h),f})();function c(f){a.isFunction(f)?f():f.unsubscribe()}e.Subscription=l,e.EMPTY_SUBSCRIPTION=l.EMPTY,e.isSubscription=function(f){return f instanceof l||f&&"closed"in f&&a.isFunction(f.remove)&&a.isFunction(f.add)&&a.isFunction(f.unsubscribe)}},8015:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.buffer=function(s){return n.operate(function(u,l){var c=[];return u.subscribe(o.createOperatorSubscriber(l,function(f){return c.push(f)},function(){l.next(c),l.complete()})),a.innerFrom(s).subscribe(o.createOperatorSubscriber(l,function(){var f=c;c=[],l.next(f)},i.noop)),function(){c=null}})}},8031:function(r,e,t){var n=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),i=this&&this.__awaiter||function(p,m,y,b){return new(y||(y=Promise))(function(g,_){function w(O){try{E(b.next(O))}catch(T){_(T)}}function x(O){try{E(b.throw(O))}catch(T){_(T)}}function E(O){var T;O.done?g(O.value):(T=O.value,T instanceof y?T:new y(function(C){C(T)})).then(w,x)}E((b=b.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var y,b,g,_,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(E){return function(O){return(function(T){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(w=0)),w;)try{if(y=1,b&&(g=2&T[0]?b.return:T[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,T[1])).done)return g;switch(b=0,g&&(T=[2&T[0],g.value]),T[0]){case 0:case 1:g=T;break;case 4:return w.label++,{value:T[1],done:!1};case 5:w.label++,b=T[1],T=[0];continue;case 7:T=w.ops.pop(),w.trys.pop();continue;default:if(!((g=(g=w.trys).length>0&&g[g.length-1])||T[0]!==6&&T[0]!==2)){w=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){w.label=T[1];break}if(T[0]===6&&w.label<g[1]){w.label=g[1],g=T;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(T);break}g[2]&&w.ops.pop(),w.trys.pop();continue}T=m.call(p,w)}catch(C){T=[6,C],b=0}finally{y=g=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}})([E,O])}}},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var s=t(7452),u=t(9305),l=a(t(6385)),c=a(t(7666)),f=u.error.PROTOCOL_ERROR,h=u.internal.logger.Logger,d=0;e.createChannelConnection=function(p,m,y,b,g,_,w,x){_===void 0&&(_=null),x===void 0&&(x=function(O){return new s.Channel(O)});var E=x(new s.ChannelConfig(p,m,y.errorCode(),g));return c.default.handshake(E,b).then(function(O){var T=O.protocolVersion,C=O.consumeRemainingBuffer,P=new s.Chunker(E),R=new s.Dechunker,k=new v(E,y,p,b,m.disableLosslessIntegers,_,P,m.notificationFilter,function(I){return c.default.create({version:T,channel:E,chunker:P,dechunker:R,disableLosslessIntegers:m.disableLosslessIntegers,useBigInt:m.useBigInt,serversideRouting:_,server:I.server,log:I.logger,observer:{onObserversCountChange:I._handleOngoingRequestsNumberChange.bind(I),onError:I._handleFatalError.bind(I),onFailure:I._resetOnFailure.bind(I),onProtocolError:I._handleProtocolError.bind(I),onErrorApplyTransformation:function(M){return I.handleAndTransformError(M,I._address)}}})},m.telemetryDisabled,w);return C(function(I){return R.write(I)}),k}).catch(function(O){return E.close().then(function(){throw O})})};var v=(function(p){function m(y,b,g,_,w,x,E,O,T,C,P){w===void 0&&(w=!1),x===void 0&&(x=null),P===void 0&&(P=function(M){});var R,k,I=p.call(this,b)||this;return I._authToken=null,I._idle=!1,I._reseting=!1,I._resetObservers=[],I._id=d++,I._address=g,I._server={address:g.asHostPort()},I._creationTimestamp=Date.now(),I._disableLosslessIntegers=w,I._ch=y,I._chunker=E,I._log=(R=I,new h((k=_)._level,function(M,j){return k._loggerFunction(M,"".concat(R," ").concat(j))})),I._serversideRouting=x,I._notificationFilter=O,I._telemetryDisabledDriverConfig=C===!0,I._telemetryDisabledConnection=!0,I._ssrCallback=P,I._dbConnectionId=null,I._protocol=T(I),I._isBroken=!1,I._log.isDebugEnabled()&&I._log.debug("created towards ".concat(g)),I}return n(m,p),m.prototype.beginTransaction=function(y){return this._sendTelemetryIfEnabled(y),this._protocol.beginTransaction(y)},m.prototype.run=function(y,b,g){return this._sendTelemetryIfEnabled(g),this._protocol.run(y,b,g)},m.prototype._sendTelemetryIfEnabled=function(y){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||y==null||y.apiTelemetryConfig==null||this._protocol.telemetry({api:y.apiTelemetryConfig.api},{onCompleted:y.apiTelemetryConfig.onTelemetrySuccess,onError:y.beforeError})},m.prototype.commitTransaction=function(y){return this._protocol.commitTransaction(y)},m.prototype.rollbackTransaction=function(y){return this._protocol.rollbackTransaction(y)},m.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(m.prototype,"authToken",{get:function(){return this._authToken},set:function(y){this._authToken=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(y){this._dbConnectionId=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(y){this._idleTimestamp=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),m.prototype.connect=function(y,b,g,_){return i(this,void 0,void 0,function(){var w=this;return o(this,function(x){switch(x.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,u.newError)("Connection does not support re-auth");return this._authToken=g,this._protocol.initialized?[3,2]:[4,this._initialize(y,b,g)];case 1:case 3:return[2,x.sent()];case 2:return _?[4,new Promise(function(E,O){w._protocol.logoff({onError:O}),w._protocol.logon({authToken:g,onError:O,onComplete:function(){return E(w)},flush:!0})})]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:g,flush:!0}),[2,this]}})})},m.prototype._initialize=function(y,b,g){var _=this,w=this;return new Promise(function(x,E){_._protocol.initialize({userAgent:y,boltAgent:b,authToken:g,notificationFilter:_._notificationFilter,onError:function(O){return E(O)},onComplete:function(O){var T;if(O){var C=O.server;_.version&&!C||(_.version=C);var P=O.connection_id;if(_.databaseId||(_.databaseId=P),O.hints){var R=O.hints["connection.recv_timeout_seconds"];if(R!=null){var k=(0,u.toNumber)(R);Number.isInteger(k)&&k>0?_._ch.setupReceiveTimeout(1e3*k):_._log.info("Server located at ".concat(_._address," supplied an invalid connection receive timeout value (").concat(k,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}O.hints["telemetry.enabled"]===!0&&(_._telemetryDisabledConnection=!1),_.SSREnabledHint=O.hints["ssr.enabled"]}_._ssrCallback((T=_.SSREnabledHint)!==null&&T!==void 0&&T,"OPEN")}x(w)}})})},m.prototype.protocol=function(){return this._protocol},Object.defineProperty(m.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"version",{get:function(){return this._server.version},set:function(y){this._server.version=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),m.prototype._handleFatalError=function(y){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||y,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(u.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},m.prototype._setIdle=function(y){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(y)},m.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},m.prototype._queueObserver=function(y){return this._protocol.queueObserverIfProtocolIsNotBroken(y)},m.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},m.prototype.resetAndFlush=function(){var y=this;return new Promise(function(b,g){y._reset({onError:function(_){if(y._isBroken)g(_);else{var w=y._handleProtocolError("Received FAILURE as a response for RESET: ".concat(_));g(w)}},onComplete:function(){b()}})})},m.prototype._resetOnFailure=function(){var y=this;this.isOpen()&&this._reset({onError:function(){y._protocol.resetFailure()},onComplete:function(){y._protocol.resetFailure()}})},m.prototype._reset=function(y){var b=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(y):this._protocol.reset({onError:function(_){y.onError(_)},onComplete:function(){y.onComplete()}});else{this._resetObservers.push(y),this._reseting=!0;var g=function(_){b._reseting=!1;var w=b._resetObservers;b._resetObservers=[],w.forEach(_)};this._protocol.reset({onError:function(_){g(function(w){return w.onError(_)})},onComplete:function(){g(function(_){return _.onComplete()})}})}},m.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},m.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},m.prototype._handleOngoingRequestsNumberChange=function(y){this._idle||(y===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},m.prototype.close=function(){var y;return i(this,void 0,void 0,function(){return o(this,function(b){switch(b.label){case 0:return this._ssrCallback((y=this.SSREnabledHint)!==null&&y!==void 0&&y,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return b.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},m.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},m.prototype._handleProtocolError=function(y){this._protocol.resetFailure(),this._updateCurrentObserver();var b=(0,u.newError)(y,f);return this._handleFatalError(b),b},m})(l.default);e.default=v},8046:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0,e.isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"}},8079:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=void 0;var n=t(7961),i=t(7843),o=t(3111);e.debounceTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=null,f=null,h=null,d=function(){if(c){c.unsubscribe(),c=null;var p=f;f=null,l.next(p)}};function v(){var p=h+a,m=s.now();if(m<p)return c=this.schedule(void 0,p-m),void l.add(c);d()}u.subscribe(o.createOperatorSubscriber(l,function(p){f=p,h=s.now(),c||(c=s.schedule(v,a),l.add(c))},function(){d(),l.complete()},void 0,function(){f=c=null}))})}},8118:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=void 0;var n=t(9445),i=t(3111),o=t(7843);e.catchError=function a(s){return o.operate(function(u,l){var c,f=null,h=!1;f=u.subscribe(i.createOperatorSubscriber(l,void 0,void 0,function(d){c=n.innerFrom(s(d,a(s)(u))),f?(f.unsubscribe(),f=null,c.subscribe(l)):h=!0})),h&&(f.unsubscribe(),f=null,c.subscribe(l))})}},8157:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=void 0;var n=t(1242),i=t(9247),o=t(1018);e.publishReplay=function(a,s,u,l){u&&!o.isFunction(u)&&(l=u);var c=o.isFunction(u)?u:void 0;return function(f){return i.multicast(new n.ReplaySubject(a,s,l),c)(f)}}},8158:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=void 0;var n=t(7302);e.concatAll=function(){return n.mergeAll(1)}},8208:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=void 0;var n=t(2483),i=t(7961),o=t(8014),a=t(7843),s=t(3111),u=t(7479),l=t(1107),c=t(7110);e.windowTime=function(f){for(var h,d,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var m=(h=l.popScheduler(v))!==null&&h!==void 0?h:i.asyncScheduler,y=(d=v[0])!==null&&d!==void 0?d:null,b=v[1]||1/0;return a.operate(function(g,_){var w=[],x=!1,E=function(P){var R=P.window,k=P.subs;R.complete(),k.unsubscribe(),u.arrRemove(w,P),x&&O()},O=function(){if(w){var P=new o.Subscription;_.add(P);var R=new n.Subject,k={window:R,subs:P,seen:0};w.push(k),_.next(R.asObservable()),c.executeSchedule(P,m,function(){return E(k)},f)}};y!==null&&y>=0?c.executeSchedule(_,m,O,y,!0):x=!0,O();var T=function(P){return w.slice().forEach(P)},C=function(P){T(function(R){var k=R.window;return P(k)}),P(_),_.unsubscribe()};return g.subscribe(s.createOperatorSubscriber(_,function(P){T(function(R){R.window.next(P),b<=++R.seen&&E(R)})},function(){return C(function(P){return P.complete()})},function(P){return C(function(R){return R.error(P)})})),function(){w=null}})}},8239:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestWith=void 0;var o=t(2551);e.combineLatestWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.combineLatest.apply(void 0,i([],n(a)))}},8253:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeWith=void 0;var o=t(361);e.mergeWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.merge.apply(void 0,i([],n(a)))}},8264:function(r,e,t){var n=this&&this.__extends||(function(){var y=function(b,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(_[x]=w[x])},y(b,g)};return function(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=b}y(b,g),b.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(y){for(var b,g=1,_=arguments.length;g<_;g++)for(var w in b=arguments[g])Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w]);return y},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(y,b,g,_){_===void 0&&(_=g);var w=Object.getOwnPropertyDescriptor(b,g);w&&!("get"in w?!b.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return b[g]}}),Object.defineProperty(y,_,w)}:function(y,b,g,_){_===void 0&&(_=g),y[_]=b[g]}),a=this&&this.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),s=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var g in y)g!=="default"&&Object.prototype.hasOwnProperty.call(y,g)&&o(b,y,g);return a(b,y),b};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var u=s(t(4027));e.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var l=(function(){function y(){}return y.prototype.hasUpdate=function(){throw new Error("Not Implemented")},y.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},y})();e.ClientCertificateProvider=l;var c=(function(y){function b(){return y!==null&&y.apply(this,arguments)||this}return n(b,y),b.prototype.updateCertificate=function(g){throw new Error("Not implemented")},b})(l);e.RotatingClientCertificateProvider=c;var f=new((function(){function y(){}return y.prototype.rotating=function(b){var g=b.initialCertificate;if(g==null||!h(g))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(u.stringify(g)));var _=i({},g);return new m(_)},y})());function h(y){return y!=null&&typeof y=="object"&&"certfile"in y&&(d(b=y.certfile)||v(b,d))&&"keyfile"in y&&(function(g){function _(w){return typeof w=="string"||w!=null&&typeof w=="object"&&"path"in w&&typeof w.path=="string"&&p("password",w)}return _(g)||v(g,_)})(y.keyfile)&&p("password",y);var b}function d(y){return typeof y=="string"}function v(y,b,g){return g===void 0&&(g=!1),Array.isArray(y)&&(g||y.length>0)&&y.filter(b).length===y.length}function p(y,b){return!(y in b)||b[y]==null||typeof b[y]=="string"}e.clientCertificateProviders=f,Object.freeze(f),e.resolveCertificateProvider=function(y){if(y!=null){if(typeof y=="object"&&"hasUpdate"in y&&"getClientCertificate"in y&&typeof y.getClientCertificate=="function"&&typeof y.hasUpdate=="function")return y;if(h(y)){var b=i({},y);return{getClientCertificate:function(){return b},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(u.stringify(y)))}};var m=(function(){function y(b,g){g===void 0&&(g=!1),this._certificate=b,this._updated=g}return y.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},y.prototype.getClientCertificate=function(){return this._certificate},y.prototype.updateCertificate=function(b){if(!h(b))throw new TypeError("certificate should be ClientCertificate, but got ".concat(u.stringify(b)));this._certificate=i({},b),this._updated=!0},y})()},8275:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.first=void 0;var n=t(2823),i=t(783),o=t(846),a=t(378),s=t(4869),u=t(6640);e.first=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.take(1),f?a.defaultIfEmpty(c):s.throwIfEmpty(function(){return new n.EmptyError}))}}},8320:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(x){for(var E,O=1,T=arguments.length;O<T;O++)for(var C in E=arguments[O])Object.prototype.hasOwnProperty.call(E,C)&&(x[C]=E[C]);return x},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(x,E,O,T){T===void 0&&(T=O);var C=Object.getOwnPropertyDescriptor(E,O);C&&!("get"in C?!E.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return E[O]}}),Object.defineProperty(x,T,C)}:function(x,E,O,T){T===void 0&&(T=O),x[T]=E[O]}),o=this&&this.__setModuleDefault||(Object.create?function(x,E){Object.defineProperty(x,"default",{enumerable:!0,value:E})}:function(x,E){x.default=E}),a=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var E={};if(x!=null)for(var O in x)O!=="default"&&Object.prototype.hasOwnProperty.call(x,O)&&i(E,x,O);return o(E,x),E},s=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(397),l=(t(7452),t(7168)),c=a(t(7021)),f=t(9014),h=t(9305),d=s(t(6661)),v=s(t(3321)),p=h.internal.bookmarks.Bookmarks,m=h.internal.constants,y=m.ACCESS_MODE_WRITE,b=m.BOLT_PROTOCOL_V1,g=(h.internal.logger.Logger,h.internal.txConfig.TxConfig),_=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),w=(function(){function x(E,O,T,C,P,R){var k=T===void 0?{}:T,I=k.disableLosslessIntegers,M=k.useBigInt;C===void 0&&(C=function(){return null}),this._server=E||{},this._chunker=O,this._packer=this._createPacker(O),this._unpacker=this._createUnpacker(I,M),this._responseHandler=C(this),this._log=P,this._onProtocolError=R,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:I,useBigInt:M}}return Object.defineProperty(x.prototype,"transformer",{get:function(){var E=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(d.default).map(function(O){return O(E._config,E._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"version",{get:function(){return b},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),x.prototype.packer=function(){return this._packer},x.prototype.packable=function(E){return this._packer.packable(E,this.transformer.toStructure)},x.prototype.unpacker=function(){return this._unpacker},x.prototype.unpack=function(E){return this._unpacker.unpack(E,this.transformer.fromStructure)},x.prototype.transformMetadata=function(E){return E},x.prototype.enrichErrorMetadata=function(E){return n(n({},E),{diagnostic_record:E.diagnostic_record!==null?n(n({},_),E.diagnostic_record):null})},x.prototype.initialize=function(E){var O=this,T=E===void 0?{}:E,C=T.userAgent,P=(T.boltAgent,T.authToken),R=T.notificationFilter,k=T.onError,I=T.onComplete,M=new f.LoginObserver({onError:function(j){return O._onLoginError(j,k)},onCompleted:function(j){return O._onLoginCompleted(j,I)}});return(0,u.assertNotificationFilterIsEmpty)(R,this._onProtocolError,M),this.write(c.default.init(C,P),M,!0),M},x.prototype.logoff=function(E){var O=E===void 0?{}:E,T=O.onComplete,C=O.onError,P=(O.flush,new f.LogoffObserver({onCompleted:T,onError:C})),R=(0,h.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(R.message),P.onError(R),R},x.prototype.logon=function(E){var O=this,T=E===void 0?{}:E,C=T.authToken,P=T.onComplete,R=T.onError,k=(T.flush,new f.LoginObserver({onCompleted:function(){return O._onLoginCompleted({},C,P)},onError:function(M){return O._onLoginError(M,R)}})),I=(0,h.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(I.message),k.onError(I),I},x.prototype.prepareToClose=function(){},x.prototype.beginTransaction=function(E){var O=E===void 0?{}:E,T=O.bookmarks,C=O.txConfig,P=O.database,R=O.mode,k=O.impersonatedUser,I=O.notificationFilter,M=O.beforeError,j=O.afterError,L=O.beforeComplete,F=O.afterComplete;return this.run("BEGIN",T?T.asBeginTransactionParameters():{},{bookmarks:T,txConfig:C,database:P,mode:R,impersonatedUser:k,notificationFilter:I,beforeError:M,afterError:j,beforeComplete:L,afterComplete:F,flush:!1})},x.prototype.commitTransaction=function(E){var O=E===void 0?{}:E,T=O.beforeError,C=O.afterError,P=O.beforeComplete,R=O.afterComplete;return this.run("COMMIT",{},{bookmarks:p.empty(),txConfig:g.empty(),mode:y,beforeError:T,afterError:C,beforeComplete:P,afterComplete:R})},x.prototype.rollbackTransaction=function(E){var O=E===void 0?{}:E,T=O.beforeError,C=O.afterError,P=O.beforeComplete,R=O.afterComplete;return this.run("ROLLBACK",{},{bookmarks:p.empty(),txConfig:g.empty(),mode:y,beforeError:T,afterError:C,beforeComplete:P,afterComplete:R})},x.prototype.run=function(E,O,T){var C=T===void 0?{}:T,P=(C.bookmarks,C.txConfig),R=C.database,k=(C.mode,C.impersonatedUser),I=C.notificationFilter,M=C.beforeKeys,j=C.afterKeys,L=C.beforeError,F=C.afterError,z=C.beforeComplete,V=C.afterComplete,G=C.flush,Y=G===void 0||G,ie=C.highRecordWatermark,W=ie===void 0?Number.MAX_VALUE:ie,H=C.lowRecordWatermark,Q=H===void 0?Number.MAX_VALUE:H,J=new f.ResultStreamObserver({server:this._server,beforeKeys:M,afterKeys:j,beforeError:L,afterError:F,beforeComplete:z,afterComplete:V,highRecordWatermark:W,lowRecordWatermark:Q});return(0,u.assertTxConfigIsEmpty)(P,this._onProtocolError,J),(0,u.assertDatabaseIsEmpty)(R,this._onProtocolError,J),(0,u.assertImpersonatedUserIsEmpty)(k,this._onProtocolError,J),(0,u.assertNotificationFilterIsEmpty)(I,this._onProtocolError,J),this.write(c.default.run(E,O),J,!1),this.write(c.default.pullAll(),J,Y),J},Object.defineProperty(x.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),x.prototype.reset=function(E){var O=E===void 0?{}:E,T=O.onError,C=O.onComplete,P=new f.ResetObserver({onProtocolError:this._onProtocolError,onError:T,onComplete:C});return this.write(c.default.reset(),P,!0),P},x.prototype.telemetry=function(E,O){E.api;var T=O===void 0?{}:O,C=(T.onError,T.onCompleted),P=new f.CompletedObserver;return C&&C(),P},x.prototype._createPacker=function(E){return new l.v1.Packer(E)},x.prototype._createUnpacker=function(E,O){return new l.v1.Unpacker(E,O)},x.prototype.write=function(E,O,T){if(this.queueObserverIfProtocolIsNotBroken(O)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(E)),this._lastMessageSignature=E.signature;var C=new l.structure.Structure(E.signature,E.fields);this.packable(C)(),this._chunker.messageBoundary(),T&&this._chunker.flush()}},x.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===c.SIGNATURES.HELLO||this._lastMessageSignature===c.SIGNATURES.LOGON},x.prototype.isLastMessageReset=function(){return this._lastMessageSignature===c.SIGNATURES.RESET},x.prototype.notifyFatalError=function(E){return this._fatalError=E,this._responseHandler._notifyErrorToObservers(E)},x.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},x.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},x.prototype.queueObserverIfProtocolIsNotBroken=function(E){return this.isBroken()?(this.notifyFatalErrorToObserver(E),!1):this._responseHandler._queueObserver(E)},x.prototype.isBroken=function(){return!!this._fatalError},x.prototype.notifyFatalErrorToObserver=function(E){E&&E.onError&&E.onError(this._fatalError)},x.prototype.resetFailure=function(){this._responseHandler._resetFailure()},x.prototype._onLoginCompleted=function(E,O,T){if(this._initialized=!0,this._authToken=O,E){var C=E.server;this._server.version||(this._server.version=C)}T&&T(E)},x.prototype._onLoginError=function(E,O){this._onProtocolError(E.message),O&&O(E)},x})();e.default=w},8330:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=void 0;var i=t(8616),o=t(7843),a=t(3111);e.takeLast=function(s){return s<=0?function(){return i.EMPTY}:o.operate(function(u,l){var c=[];u.subscribe(a.createOperatorSubscriber(l,function(f){c.push(f),s<c.length&&c.shift()},function(){var f,h;try{for(var d=n(c),v=d.next();!v.done;v=d.next()){var p=v.value;l.next(p)}}catch(m){f={error:m}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}l.complete()},void 0,function(){c=null}))})}},8341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7509);function i(a){return Promise.resolve([a])}var o=(function(){function a(s){this._resolverFunction=s??i}return a.prototype.resolve=function(s){var u=this;return new Promise(function(l){return l(u._resolverFunction(s.asHostPort()))}).then(function(l){if(!Array.isArray(l))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(l));return l.map(function(c){return n.ServerAddress.fromUrl(c)})})},a})();e.default=o},8522:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=void 0;var n=t(8616),i=t(7843),o=t(3111),a=t(9445),s=t(4092);e.repeat=function(u){var l,c,f=1/0;return u!=null&&(typeof u=="object"?(l=u.count,f=l===void 0?1/0:l,c=u.delay):f=u),f<=0?function(){return n.EMPTY}:i.operate(function(h,d){var v,p=0,m=function(){if(v==null||v.unsubscribe(),v=null,c!=null){var b=typeof c=="number"?s.timer(c):a.innerFrom(c(p)),g=o.createOperatorSubscriber(d,function(){g.unsubscribe(),y()});b.subscribe(g)}else y()},y=function(){var b=!1;v=h.subscribe(o.createOperatorSubscriber(d,void 0,function(){++p<f?v?m():b=!0:d.complete()})),b&&m()};y()})}},8535:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsOrArgArray=void 0;var t=Array.isArray;e.argsOrArgArray=function(n){return n.length===1&&t(n[0])?n[0]:n}},8538:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.zipWith=void 0;var o=t(5918);e.zipWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.zip.apply(void 0,i([],n(a)))}},8561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindNodeCallback=void 0;var n=t(1439);e.bindNodeCallback=function(i,o,a){return n.bindCallbackInternals(!0,i,o,a)}},8613:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=void 0;var n=t(1018);e.isScheduler=function(i){return i&&n.isFunction(i.schedule)}},8616:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var n=t(4662);e.EMPTY=new n.Observable(function(i){return i.complete()}),e.empty=function(i){return i?(function(o){return new n.Observable(function(a){return o.schedule(function(){return a.complete()})})})(i):e.EMPTY}},8624:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scan=void 0;var n=t(7843),i=t(6384);e.scan=function(o,a){return n.operate(i.scanInternals(o,a,arguments.length>=2,!0))}},8655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var n=t(4662),i=t(1342);e.NEVER=new n.Observable(i.noop),e.never=function(){return e.NEVER}},8669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.last=void 0;var n=t(2823),i=t(783),o=t(8330),a=t(4869),s=t(378),u=t(6640);e.last=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.takeLast(1),f?s.defaultIfEmpty(c):a.throwIfEmpty(function(){return new n.EmptyError}))}}},8712:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchScan=void 0;var n=t(3879),i=t(7843);e.switchScan=function(o,a){return i.operate(function(s,u){var l=a;return n.switchMap(function(c,f){return o(l,c,f)},function(c,f){return l=f,f})(s).subscribe(u),function(){l=null}})}},8731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7452),i=t(9305),o=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"];function a(u,l){return{major:u,minor:l}}function s(u){for(var l=[],c=u[3],f=u[2],h=0;h<=u[1];h++)l.push({major:c,minor:f-h});return l}e.default=function(u,l){return(function(c,f){var h=this;return new Promise(function(d,v){var p=function(m){v(m)};c.onerror=p.bind(h),c._error&&p(c._error),c.onmessage=function(m){try{var y=(function(b,g){var _=[b.readUInt8(),b.readUInt8(),b.readUInt8(),b.readUInt8()];if(_[0]===72&&_[1]===84&&_[2]===84&&_[3]===80)throw g.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(_[3]+"."+_[2])})(m,f);d({protocolVersion:y,capabilites:0,buffer:m,consumeRemainingBuffer:function(b){m.hasRemaining()&&b(m.readSlice(m.remaining()))}})}catch(b){v(b)}},c.write((function(m){if(m.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var y=(0,n.alloc)(20);return y.writeInt32(1616949271),m.forEach(function(b){if(b instanceof Array){var g=b[0],_=g.major,w=(x=g.minor)-b[1].minor;y.writeInt32(w<<16|x<<8|_)}else{_=b.major;var x=b.minor;y.writeInt32(x<<8|_)}}),y.reset(),y})([a(255,1),[a(5,8),a(5,0)],[a(4,4),a(4,2)],a(3,0)]))})})(u,l).then(function(c){return c.protocolVersion===255.1?(function(f,h){for(var d=h.readVarInt(),v=[],p=0;p<d;p++){var m=[h.readUInt8(),h.readUInt8(),h.readUInt8(),h.readUInt8()];v=v.concat(s(m))}h.readVarInt();var y=0,b=0;for(v.sort(function(_,w){return Number(_.major)!==Number(w.major)?Number(w.major)-Number(_.major):Number(w.minor)-Number(_.minor)}),p=0;p<v.length;p++){var g=v[p];if(o.includes(g.major+"."+g.minor)){y=g.major,b=g.minor;break}}return new Promise(function(_,w){try{var x=(0,n.alloc)(5);x.writeInt32(b<<8|y),x.writeVarInt(0),f.write(x),_({protocolVersion:+(y+"."+b),capabilites:0,consumeRemainingBuffer:function(E){h.hasRemaining()&&E(h.readSlice(h.remaining()))}})}catch(E){w(E)}})})(u,c.buffer):c})}},8766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=void 0;var n=t(3865),i=t(846),o=t(490),a=t(3218),s=t(983),u=t(9445);e.delayWhen=function l(c,f){return f?function(h){return n.concat(f.pipe(i.take(1),o.ignoreElements()),h.pipe(l(c)))}:s.mergeMap(function(h,d){return u.innerFrom(c(h,d)).pipe(i.take(1),a.mapTo(h))})}},8774:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=void 0;var n=t(3879),i=t(6640);e.switchAll=function(){return n.switchMap(i.identity)}},8784:(r,e,t)=>{var n=t(4704);r.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},8808:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleIterable=void 0;var n=t(4662),i=t(1964),o=t(1018),a=t(7110);e.scheduleIterable=function(s,u){return new n.Observable(function(l){var c;return a.executeSchedule(l,u,function(){c=s[i.iterator](),a.executeSchedule(l,u,function(){var f,h,d;try{h=(f=c.next()).value,d=f.done}catch(v){return void l.error(v)}d?l.complete():l.next(h)},0,!0)}),function(){return o.isFunction(c==null?void 0:c.return)&&c.return()}})}},8813:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(Vr,ro,gi,Qn){Qn===void 0&&(Qn=gi),Object.defineProperty(Vr,Qn,{enumerable:!0,get:function(){return ro[gi]}})}:function(Vr,ro,gi,Qn){Qn===void 0&&(Qn=gi),Vr[Qn]=ro[gi]}),i=this&&this.__exportStar||function(Vr,ro){for(var gi in Vr)gi==="default"||Object.prototype.hasOwnProperty.call(ro,gi)||n(ro,Vr,gi)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var o=t(4662);Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return o.Observable}});var a=t(8918);Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return a.ConnectableObservable}});var s=t(3327);Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return s.observable}});var u=t(3110);Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return u.animationFrames}});var l=t(2483);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return l.Subject}});var c=t(1637);Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var f=t(1242);Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var h=t(95);Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return h.AsyncSubject}});var d=t(3692);Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var v=t(7961);Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var p=t(2886);Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var m=t(3862);Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}});var y=t(182);Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var b=t(8986);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return b.Scheduler}});var g=t(8014);Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return g.Subscription}});var _=t(5);Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return _.Subscriber}});var w=t(7800);Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return w.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return w.NotificationKind}});var x=t(2706);Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return x.pipe}});var E=t(1342);Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return E.noop}});var O=t(6640);Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return O.identity}});var T=t(1751);Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return T.isObservable}});var C=t(6894);Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return C.lastValueFrom}});var P=t(9060);Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return P.firstValueFrom}});var R=t(7057);Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return R.ArgumentOutOfRangeError}});var k=t(2823);Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return k.EmptyError}});var I=t(1759);Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return I.NotFoundError}});var M=t(9686);Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return M.ObjectUnsubscribedError}});var j=t(1505);Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return j.SequenceError}});var L=t(1554);Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return L.TimeoutError}});var F=t(5788);Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return F.UnsubscriptionError}});var z=t(2713);Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return z.bindCallback}});var V=t(8561);Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return V.bindNodeCallback}});var G=t(3247);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return G.combineLatest}});var Y=t(3865);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return Y.concat}});var ie=t(7579);Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return ie.connectable}});var W=t(9353);Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return W.defer}});var H=t(8616);Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return H.empty}});var Q=t(9105);Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return Q.forkJoin}});var J=t(4917);Object.defineProperty(e,"from",{enumerable:!0,get:function(){return J.from}});var ne=t(5337);Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ne.fromEvent}});var K=t(347);Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return K.fromEventPattern}});var $=t(7610);Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return $.generate}});var Z=t(4209);Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return Z.iif}});var ae=t(6472);Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return ae.interval}});var se=t(2833);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return se.merge}});var fe=t(8655);Object.defineProperty(e,"never",{enumerable:!0,get:function(){return fe.never}});var ge=t(1004);Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ge.of}});var ye=t(6102);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return ye.onErrorResumeNext}});var pe=t(7740);Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return pe.pairs}});var N=t(1699);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return N.partition}});var B=t(5584);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return B.race}});var q=t(9376);Object.defineProperty(e,"range",{enumerable:!0,get:function(){return q.range}});var re=t(1103);Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return re.throwError}});var ue=t(4092);Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return ue.timer}});var le=t(7853);Object.defineProperty(e,"using",{enumerable:!0,get:function(){return le.using}});var de=t(7286);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return de.zip}});var xe=t(1656);Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return xe.scheduled}});var ke=t(8616);Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return ke.EMPTY}});var Xe=t(8655);Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Xe.NEVER}}),i(t(6038),e);var ze=t(3413);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return ze.config}});var Ge=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Ge.audit}});var Le=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Le.auditTime}});var Ie=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Ie.buffer}});var Ee=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return Ee.bufferCount}});var ee=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return ee.bufferTime}});var ve=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return ve.bufferToggle}});var be=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return be.bufferWhen}});var we=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return we.catchError}});var Oe=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Oe.combineAll}});var Ve=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Ve.combineLatestAll}});var Se=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Se.combineLatestWith}});var We=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return We.concatAll}});var Be=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return Be.concatMap}});var Ye=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Ye.concatMapTo}});var ot=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return ot.concatWith}});var et=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return et.connect}});var Ue=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return Ue.count}});var ft=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return ft.debounce}});var st=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return st.debounceTime}});var Pt=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return Pt.defaultIfEmpty}});var Ct=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return Ct.delay}});var bt=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return bt.delayWhen}});var vt=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return vt.dematerialize}});var It=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return It.distinct}});var Dt=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Dt.distinctUntilChanged}});var er=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return er.distinctUntilKeyChanged}});var mr=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return mr.elementAt}});var pt=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return pt.endWith}});var Nt=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Nt.every}});var or=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return or.exhaust}});var hr=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return hr.exhaustAll}});var Ar=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Ar.exhaustMap}});var Sr=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Sr.expand}});var Yt=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Yt.filter}});var Xt=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Xt.finalize}});var jt=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return jt.find}});var In=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return In.findIndex}});var zr=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return zr.first}});var Ro=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ro.groupBy}});var Aa=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Aa.ignoreElements}});var Ra=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ra.isEmpty}});var to=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return to.last}});var ka=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return ka.map}});var Ia=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Ia.mapTo}});var Da=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Da.materialize}});var Ma=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Ma.max}});var pi=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return pi.mergeAll}});var Ft=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Ft.flatMap}});var Mt=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Mt.mergeMap}});var ko=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return ko.mergeMapTo}});var Io=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Io.mergeScan}});var Xu=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Xu.mergeWith}});var on=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return on.min}});var Na=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Na.multicast}});var Er=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Er.observeOn}});var Ri=t(1226);Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Ri.onErrorResumeNextWith}});var Ir=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Ir.pairwise}});var Ns=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Ns.pluck}});var Ls=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Ls.publish}});var an=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return an.publishBehavior}});var vf=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return vf.publishLast}});var pf=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return pf.publishReplay}});var gf=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return gf.raceWith}});var yf=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return yf.reduce}});var mf=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return mf.repeat}});var bf=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return bf.repeatWhen}});var pn=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return pn.retry}});var qv=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return qv.retryWhen}});var Dn=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Dn.refCount}});var Wv=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Wv.sample}});var _f=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return _f.sampleTime}});var ki=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return ki.scan}});var js=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return js.sequenceEqual}});var $u=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return $u.share}});var ar=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return ar.shareReplay}});var Ii=t(5382);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Ii.single}});var Ku=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return Ku.skip}});var Hv=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Hv.skipLast}});var Zu=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Zu.skipUntil}});var Yv=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Yv.skipWhile}});var wf=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return wf.startWith}});var Fs=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Fs.subscribeOn}});var Do=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Do.switchAll}});var Xv=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Xv.switchMap}});var Ef=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Ef.switchMapTo}});var Of=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Of.switchScan}});var Qu=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Qu.take}});var Ju=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Ju.takeLast}});var xf=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return xf.takeUntil}});var el=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return el.takeWhile}});var tl=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return tl.tap}});var Sf=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Sf.throttle}});var gn=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return gn.throttleTime}});var rl=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return rl.throwIfEmpty}});var La=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return La.timeInterval}});var Tf=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Tf.timeout}});var Cf=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Cf.timeoutWith}});var $v=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return $v.timestamp}});var Kv=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Kv.toArray}});var Zv=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Zv.window}});var Mo=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Mo.windowCount}});var nl=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return nl.windowTime}});var Pf=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Pf.windowToggle}});var Di=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Di.windowWhen}});var Bs=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Bs.withLatestFrom}});var Qv=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Qv.zipAll}});var No=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return No.zipWith}})},8831:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.bufferWhen=function(s){return n.operate(function(u,l){var c=null,f=null,h=function(){f==null||f.unsubscribe();var d=c;c=[],d&&l.next(d),a.innerFrom(s()).subscribe(f=o.createOperatorSubscriber(l,h,i.noop))};h(),u.subscribe(o.createOperatorSubscriber(l,function(d){return c==null?void 0:c.push(d)},function(){c&&l.next(c),l.complete()},void 0,function(){return c=f=null}))})}},8888:(r,e,t)=>{var n=t(5636).Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(v){var p;switch(this.encoding=(function(m){var y=(function(b){if(!b)return"utf8";for(var g;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(g)return;b=(""+b).toLowerCase(),g=!0}})(m);if(typeof y!="string"&&(n.isEncoding===i||!i(m)))throw new Error("Unknown encoding: "+m);return y||m})(v),this.encoding){case"utf16le":this.text=u,this.end=l,p=4;break;case"utf8":this.fillLast=s,p=4;break;case"base64":this.text=c,this.end=f,p=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(p)}function a(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function s(v){var p=this.lastTotal-this.lastNeed,m=(function(y,b){if((192&b[0])!=128)return y.lastNeed=0,"";if(y.lastNeed>1&&b.length>1){if((192&b[1])!=128)return y.lastNeed=1,"";if(y.lastNeed>2&&b.length>2&&(192&b[2])!=128)return y.lastNeed=2,""}})(this,v);return m!==void 0?m:this.lastNeed<=v.length?(v.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,p,0,v.length),void(this.lastNeed-=v.length))}function u(v,p){if((v.length-p)%2==0){var m=v.toString("utf16le",p);if(m){var y=m.charCodeAt(m.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",p,v.length-1)}function l(v){var p=v&&v.length?this.write(v):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return p+this.lastChar.toString("utf16le",0,m)}return p}function c(v,p){var m=(v.length-p)%3;return m===0?v.toString("base64",p):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",p,v.length-m))}function f(v){var p=v&&v.length?this.write(v):"";return this.lastNeed?p+this.lastChar.toString("base64",0,3-this.lastNeed):p}function h(v){return v.toString(this.encoding)}function d(v){return v&&v.length?this.write(v):""}e.StringDecoder=o,o.prototype.write=function(v){if(v.length===0)return"";var p,m;if(this.lastNeed){if((p=this.fillLast(v))===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<v.length?p?p+this.text(v,m):this.text(v,m):p||""},o.prototype.end=function(v){var p=v&&v.length?this.write(v):"";return this.lastNeed?p+"":p},o.prototype.text=function(v,p){var m=(function(b,g,_){var w=g.length-1;if(w<_)return 0;var x=a(g[w]);return x>=0?(x>0&&(b.lastNeed=x-1),x):--w<_||x===-2?0:(x=a(g[w]))>=0?(x>0&&(b.lastNeed=x-2),x):--w<_||x===-2?0:(x=a(g[w]))>=0?(x>0&&(x===2?x=0:b.lastNeed=x-3),x):0})(this,v,p);if(!this.lastNeed)return v.toString("utf8",p);this.lastTotal=m;var y=v.length-(m-this.lastNeed);return v.copy(this.lastChar,0,y),v.toString("utf8",p,y)},o.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},8917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n,i){this.keys=t,this.records=n,this.summary=i}},8918:function(r,e,t){var n=this&&this.__extends||(function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}c(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectableObservable=void 0;var i=t(4662),o=t(8014),a=t(7561),s=t(3111),u=t(7843),l=(function(c){function f(h,d){var v=c.call(this)||this;return v.source=h,v.subjectFactory=d,v._subject=null,v._refCount=0,v._connection=null,u.hasLift(h)&&(v.lift=h.lift),v}return n(f,c),f.prototype._subscribe=function(h){return this.getSubject().subscribe(h)},f.prototype.getSubject=function(){var h=this._subject;return h&&!h.isStopped||(this._subject=this.subjectFactory()),this._subject},f.prototype._teardown=function(){this._refCount=0;var h=this._connection;this._subject=this._connection=null,h==null||h.unsubscribe()},f.prototype.connect=function(){var h=this,d=this._connection;if(!d){d=this._connection=new o.Subscription;var v=this.getSubject();d.add(this.source.subscribe(s.createOperatorSubscriber(v,void 0,function(){h._teardown(),v.complete()},function(p){h._teardown(),v.error(p)},function(){return h._teardown()}))),d.closed&&(this._connection=null,d=o.Subscription.EMPTY)}return d},f.prototype.refCount=function(){return a.refCount()(this)},f})(i.Observable);e.ConnectableObservable=l},8937:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=void 0;var n=t(6640),i=t(7843),o=t(3111);function a(s,u){return s===u}e.distinctUntilChanged=function(s,u){return u===void 0&&(u=n.identity),s=s??a,i.operate(function(l,c){var f,h=!0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v=u(d);!h&&s(f,v)||(h=!1,f=v,c.next(d))}))})}},8941:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;var n=t(7843),i=t(3111),o=t(9445);e.throttle=function(a,s){return n.operate(function(u,l){var c=s??{},f=c.leading,h=f===void 0||f,d=c.trailing,v=d!==void 0&&d,p=!1,m=null,y=null,b=!1,g=function(){y==null||y.unsubscribe(),y=null,v&&(x(),b&&l.complete())},_=function(){y=null,b&&l.complete()},w=function(E){return y=o.innerFrom(a(E)).subscribe(i.createOperatorSubscriber(l,g,_))},x=function(){if(p){p=!1;var E=m;m=null,l.next(E),!b&&w(E)}};u.subscribe(i.createOperatorSubscriber(l,function(E){p=!0,m=E,(!y||y.closed)&&(h?x():w(E))},function(){b=!0,(!(v&&p&&y)||y.closed)&&l.complete()}))})}},8960:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=void 0;var n=t(7843);e.subscribeOn=function(i,o){return o===void 0&&(o=0),n.operate(function(a,s){s.add(i.schedule(function(){return a.subscribe(s)},o))})}},8977:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,p=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(d=p.next()).done;)m.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(v)throw v.error}}return m},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.share=void 0;var o=t(9445),a=t(2483),s=t(5),u=t(7843);function l(c,f){for(var h=[],d=2;d<arguments.length;d++)h[d-2]=arguments[d];if(f!==!0){if(f!==!1){var v=new s.SafeSubscriber({next:function(){v.unsubscribe(),c()}});return o.innerFrom(f.apply(void 0,i([],n(h)))).subscribe(v)}}else c()}e.share=function(c){c===void 0&&(c={});var f=c.connector,h=f===void 0?function(){return new a.Subject}:f,d=c.resetOnError,v=d===void 0||d,p=c.resetOnComplete,m=p===void 0||p,y=c.resetOnRefCountZero,b=y===void 0||y;return function(g){var _,w,x,E=0,O=!1,T=!1,C=function(){w==null||w.unsubscribe(),w=void 0},P=function(){C(),_=x=void 0,O=T=!1},R=function(){var k=_;P(),k==null||k.unsubscribe()};return u.operate(function(k,I){E++,T||O||C();var M=x=x??h();I.add(function(){--E!==0||T||O||(w=l(R,b))}),M.subscribe(I),!_&&E>0&&(_=new s.SafeSubscriber({next:function(j){return M.next(j)},error:function(j){T=!0,C(),w=l(P,v,j),M.error(j)},complete:function(){O=!0,C(),w=l(P,m),M.complete()}}),o.innerFrom(k).subscribe(_))})(g)}}},8986:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;var n=t(9568),i=(function(){function o(a,s){s===void 0&&(s=o.now),this.schedulerActionCtor=a,this.now=s}return o.prototype.schedule=function(a,s,u){return s===void 0&&(s=0),new this.schedulerActionCtor(this,a).schedule(u,s)},o.now=n.dateTimestampProvider.now,o})();e.Scheduler=i},8987:function(r,e,t){var n=this&&this.__extends||(function(){var w=function(x,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,T){O.__proto__=T}||function(O,T){for(var C in T)Object.prototype.hasOwnProperty.call(T,C)&&(O[C]=T[C])},w(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=x}w(x,E),x.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}})(),i=this&&this.__awaiter||function(w,x,E,O){return new(E||(E=Promise))(function(T,C){function P(I){try{k(O.next(I))}catch(M){C(M)}}function R(I){try{k(O.throw(I))}catch(M){C(M)}}function k(I){var M;I.done?T(I.value):(M=I.value,M instanceof E?M:new E(function(j){j(M)})).then(P,R)}k((O=O.apply(w,x||[])).next())})},o=this&&this.__generator||function(w,x){var E,O,T,C,P={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return C={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function R(k){return function(I){return(function(M){if(E)throw new TypeError("Generator is already executing.");for(;C&&(C=0,M[0]&&(P=0)),P;)try{if(E=1,O&&(T=2&M[0]?O.return:M[0]?O.throw||((T=O.return)&&T.call(O),0):O.next)&&!(T=T.call(O,M[1])).done)return T;switch(O=0,T&&(M=[2&M[0],T.value]),M[0]){case 0:case 1:T=M;break;case 4:return P.label++,{value:M[1],done:!1};case 5:P.label++,O=M[1],M=[0];continue;case 7:M=P.ops.pop(),P.trys.pop();continue;default:if(!((T=(T=P.trys).length>0&&T[T.length-1])||M[0]!==6&&M[0]!==2)){P=0;continue}if(M[0]===3&&(!T||M[1]>T[0]&&M[1]<T[3])){P.label=M[1];break}if(M[0]===6&&P.label<T[1]){P.label=T[1],T=M;break}if(T&&P.label<T[2]){P.label=T[2],P.ops.push(M);break}T[2]&&P.ops.pop(),P.trys.pop();continue}M=x.call(w,P)}catch(j){M=[6,j],O=0}finally{E=T=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}})([k,I])}}},a=this&&this.__read||function(w,x){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var O,T,C=E.call(w),P=[];try{for(;(x===void 0||x-- >0)&&!(O=C.next()).done;)P.push(O.value)}catch(R){T={error:R}}finally{try{O&&!O.done&&(E=C.return)&&E.call(C)}finally{if(T)throw T.error}}return P},s=this&&this.__spreadArray||function(w,x,E){if(E||arguments.length===2)for(var O,T=0,C=x.length;T<C;T++)!O&&T in x||(O||(O=Array.prototype.slice.call(x,0,T)),O[T]=x[T]);return w.concat(O||Array.prototype.slice.call(x))},u=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var l=t(7721),c=t(9305),f=u(t(1839)),h=t(6781),d=u(t(4531)),v=u(t(4271)),p=c.error.SERVICE_UNAVAILABLE,m=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],y=c.internal.pool,b=y.Pool,g=y.PoolConfig,_=(function(w){function x(E,O){var T=E.id,C=E.config,P=E.log,R=E.userAgent,k=E.boltAgent,I=E.authTokenManager,M=E.newPool,j=M===void 0?function(){for(var F=[],z=0;z<arguments.length;z++)F[z]=arguments[z];return new(b.bind.apply(b,s([void 0],a(F),!1)))}:M;O===void 0&&(O=null);var L=w.call(this)||this;return L._id=T,L._config=C,L._log=P,L._clientCertificateHolder=new v.default({clientCertificateProvider:L._config.clientCertificate}),L._authenticationProvider=new f.default({authTokenManager:I,userAgent:R,boltAgent:k}),L._livenessCheckProvider=new d.default({connectionLivenessCheckTimeout:C.connectionLivenessCheckTimeout}),L._userAgent=R,L._boltAgent=k,L._createChannelConnection=O||function(F){return i(L,void 0,void 0,function(){var z,V;return o(this,function(G){switch(G.label){case 0:return z=l.createChannelConnection,V=[F,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,z.apply(void 0,V.concat([G.sent()]))]}})})},L._connectionPool=j({create:L._createConnection.bind(L),destroy:L._destroyConnection.bind(L),validateOnAcquire:L._validateConnectionOnAcquire.bind(L),validateOnRelease:L._validateConnectionOnRelease.bind(L),installIdleObserver:x._installIdleObserverOnConnection.bind(L),removeIdleObserver:x._removeIdleObserverOnConnection.bind(L),config:g.fromDriverConfig(C),log:L._log}),L._openConnections={},L}return n(x,w),x.prototype._createConnectionErrorHandler=function(){return new l.ConnectionErrorHandler(p)},x.prototype._getClientCertificate=function(){return i(this,void 0,void 0,function(){return o(this,function(E){return[2,this._config.clientCertificate.getClientCertificate()]})})},x.prototype._createConnection=function(E,O,T){var C=this,P=E.auth;return this._createChannelConnection(O).then(function(R){return R.release=function(){return R.idleTimestamp=Date.now(),T(O,R)},C._openConnections[R.id]=R,C._authenticationProvider.authenticate({connection:R,auth:P}).catch(function(k){throw C._destroyConnection(R),k})})},x.prototype._validateConnectionOnAcquire=function(E,O){var T=E.auth,C=E.skipReAuth;return i(this,void 0,void 0,function(){var P,R;return o(this,function(k){switch(k.label){case 0:if(!this._validateConnection(O))return[2,!1];k.label=1;case 1:return k.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(O)];case 2:return k.sent(),[3,4];case 3:return P=k.sent(),this._log.debug("The connection ".concat(O.id," is not alive because of an error ").concat(P.code," '").concat(P.message,"'")),[2,!1];case 4:return k.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:O,auth:T,skipReAuth:C})];case 5:return k.sent(),[2,!0];case 6:return R=k.sent(),this._log.debug("The connection ".concat(O.id," is not valid because of an error ").concat(R.code," '").concat(R.message,"'")),[2,!1];case 7:return[2]}})})},x.prototype._validateConnectionOnRelease=function(E){return E._sticky!==!0&&this._validateConnection(E)},x.prototype._validateConnection=function(E){if(!E.isOpen())return!1;var O=this._config.maxConnectionLifetime;return!(Date.now()-E.creationTimestamp>O)},x.prototype._destroyConnection=function(E){return delete this._openConnections[E.id],E.close()},x.prototype._verifyConnectivityAndGetServerVersion=function(E){var O=E.address;return i(this,void 0,void 0,function(){var T,C;return o(this,function(P){switch(P.label){case 0:return[4,this._connectionPool.acquire({},O)];case 1:T=P.sent(),C=new c.ServerInfo(T.server,T.protocol().version),P.label=2;case 2:return P.trys.push([2,,5,7]),T.protocol().isLastMessageLogon()?[3,4]:[4,T.resetAndFlush()];case 3:P.sent(),P.label=4;case 4:return[3,7];case 5:return[4,T.release()];case 6:return P.sent(),[7];case 7:return[2,C]}})})},x.prototype._verifyAuthentication=function(E){var O=E.getAddress,T=E.auth;return i(this,void 0,void 0,function(){var C,P,R,k,I,M;return o(this,function(j){switch(j.label){case 0:C=[],j.label=1;case 1:return j.trys.push([1,8,9,11]),[4,O()];case 2:return P=j.sent(),[4,this._connectionPool.acquire({auth:T,skipReAuth:!0},P)];case 3:if(R=j.sent(),C.push(R),k=!R.protocol().isLastMessageLogon(),!R.supportsReAuth)throw(0,c.newError)("Driver is connected to a database that does not support user switch.");return k&&R.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:R,auth:T,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return j.sent(),[3,7];case 5:return!k||R.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:T},P,{requireNew:!0})];case 6:(I=j.sent())._sticky=!0,C.push(I),j.label=7;case 7:return[2,!0];case 8:if(M=j.sent(),m.includes(M.code))return[2,!1];throw M;case 9:return[4,Promise.all(C.map(function(L){return L.release()}))];case 10:return j.sent(),[7];case 11:return[2]}})})},x.prototype._verifyStickyConnection=function(E){var O=E.auth,T=E.connection;return E.address,i(this,void 0,void 0,function(){var C,P;return o(this,function(R){switch(R.label){case 0:return C=h.object.equals(O,T.authToken),P=!C,T._sticky=C&&!T.supportsReAuth,P||T._sticky?[4,T.release()]:[3,2];case 1:throw R.sent(),(0,c.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},x.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(E){switch(E.label){case 0:return[4,this._connectionPool.close()];case 1:return E.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(O){return O.close()}))];case 2:return E.sent(),[2]}})})},x._installIdleObserverOnConnection=function(E,O){E._setIdle(O)},x._removeIdleObserverOnConnection=function(E){E._unsetIdle()},x.prototype._handleSecurityError=function(E,O,T){return this._authenticationProvider.handleError({connection:T,code:E.code})&&(E.retriable=!0),E.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(O,function(C){C.authToken=null}),T&&T.close().catch(function(){}),E},x})(c.ConnectionProvider);e.default=_},8995:function(r,e,t){var n=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],d=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=void 0;var i=t(8014),o=t(7843),a=t(9445),s=t(3111),u=t(1342),l=t(7479);e.bufferToggle=function(c,f){return o.operate(function(h,d){var v=[];a.innerFrom(c).subscribe(s.createOperatorSubscriber(d,function(p){var m=[];v.push(m);var y=new i.Subscription;y.add(a.innerFrom(f(p)).subscribe(s.createOperatorSubscriber(d,function(){l.arrRemove(v,m),d.next(m),y.unsubscribe()},u.noop)))},u.noop)),h.subscribe(s.createOperatorSubscriber(d,function(p){var m,y;try{for(var b=n(v),g=b.next();!g.done;g=b.next())g.value.push(p)}catch(_){m={error:_}}finally{try{g&&!g.done&&(y=b.return)&&y.call(b)}finally{if(m)throw m.error}}},function(){for(;v.length>0;)d.next(v.shift());d.complete()}))})}},9014:function(r,e,t){var n=this&&this.__extends||(function(){var w=function(x,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,T){O.__proto__=T}||function(O,T){for(var C in T)Object.prototype.hasOwnProperty.call(T,C)&&(O[C]=T[C])},w(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=x}w(x,E),x.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}})(),i=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var o=t(9305),a=i(t(7790)),s=t(6781),u=o.internal.constants.FETCH_ALL,l=o.error.PROTOCOL_ERROR,c=(function(){function w(){}return w.prototype.onNext=function(x){},w.prototype.onError=function(x){},w.prototype.onCompleted=function(x){},w})();e.StreamObserver=c;var f=(function(w){function x(E){var O=E===void 0?{}:E,T=O.reactive,C=T!==void 0&&T,P=O.moreFunction,R=O.discardFunction,k=O.fetchSize,I=k===void 0?u:k,M=O.beforeError,j=O.afterError,L=O.beforeKeys,F=O.afterKeys,z=O.beforeComplete,V=O.afterComplete,G=O.server,Y=O.highRecordWatermark,ie=Y===void 0?Number.MAX_VALUE:Y,W=O.lowRecordWatermark,H=W===void 0?Number.MAX_VALUE:W,Q=O.enrichMetadata,J=O.onDb,ne=w.call(this)||this;return ne._fieldKeys=null,ne._fieldLookup=null,ne._head=null,ne._queuedRecords=[],ne._tail=null,ne._error=null,ne._observers=[],ne._meta={},ne._server=G,ne._beforeError=M,ne._afterError=j,ne._beforeKeys=L,ne._afterKeys=F,ne._beforeComplete=z,ne._afterComplete=V,ne._enrichMetadata=Q||s.functional.identity,ne._queryId=null,ne._moreFunction=P,ne._discardFunction=R,ne._discard=!1,ne._fetchSize=I,ne._lowRecordWatermark=H,ne._highRecordWatermark=ie,ne._setState(C?_.READY:_.READY_STREAMING),ne._setupAutoPull(),ne._paused=!1,ne._pulled=!C,ne._haveRecordStreamed=!1,ne._onDb=J,ne}return n(x,w),x.prototype.pause=function(){this._paused=!0},x.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},x.prototype.onNext=function(E){this._haveRecordStreamed=!0;var O=new o.Record(this._fieldKeys,E,this._fieldLookup);this._observers.some(function(T){return T.onNext})?this._observers.forEach(function(T){T.onNext&&T.onNext(O)}):(this._queuedRecords.push(O),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},x.prototype.onCompleted=function(E){this._state.onSuccess(this,E)},x.prototype.onError=function(E){this._state.onError(this,E)},x.prototype.cancel=function(){this._discard=!0},x.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(_.STREAMING)},x.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(_.SUCCEEDED)},x.prototype.subscribe=function(E){if(this._head&&E.onKeys&&E.onKeys(this._head),this._queuedRecords.length>0&&E.onNext)for(var O=0;O<this._queuedRecords.length;O++)E.onNext(this._queuedRecords[O]),this._queuedRecords.length-O-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===_.READY&&this._handleStreaming());this._tail&&E.onCompleted&&E.onCompleted(this._tail),this._error&&E.onError(this._error),this._observers.push(E),this._state===_.READY&&this._handleStreaming()},x.prototype._handleHasMore=function(E){this._setState(_.READY),this._handleStreaming(),delete E.has_more},x.prototype._handlePullSuccess=function(E){var O=this,T=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},E));if([void 0,null,"r","w","rw","s"].includes(T.type)){this._setState(_.SUCCEEDED);var C=null;this._beforeComplete&&(C=this._beforeComplete(T));var P=function(){O._tail=T,O._observers.some(function(R){return R.onCompleted})&&O._observers.forEach(function(R){R.onCompleted&&R.onCompleted(T)}),O._afterComplete&&O._afterComplete(T)};C?Promise.resolve(C).then(function(){return P()}):P()}else this.onError((0,o.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(T.type,"'"),l))},x.prototype._handleRunSuccess=function(E,O){var T=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},E.fields&&E.fields.length>0){this._fieldKeys=E.fields;for(var C=0;C<E.fields.length;C++)this._fieldLookup[E.fields[C]]=C}E.db!==null&&this._onDb!==void 0&&this._onDb(E.db),E.fields!=null&&delete E.fields,E.qid!==null&&E.qid!==void 0&&(this._queryId=E.qid,delete E.qid),this._storeMetadataForCompletion(E);var P=null;this._beforeKeys&&(P=this._beforeKeys(this._fieldKeys));var R=function(){T._head=T._fieldKeys,T._observers.some(function(k){return k.onKeys})&&T._observers.forEach(function(k){k.onKeys&&k.onKeys(T._fieldKeys)}),T._afterKeys&&T._afterKeys(T._fieldKeys),O()};P?Promise.resolve(P).then(function(){return R()}):R()}},x.prototype._handleError=function(E){var O=this;this._setState(_.FAILED),this._error=E;var T=null;this._beforeError&&(T=this._beforeError(E));var C=function(){O._observers.some(function(P){return P.onError})&&O._observers.forEach(function(P){P.onError&&P.onError(E)}),O._afterError&&O._afterError(E)};T?Promise.resolve(T).then(function(){return C()}):C()},x.prototype._handleStreaming=function(){this._head&&this._observers.some(function(E){return E.onNext||E.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},x.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(_.STREAMING)},x.prototype._storeMetadataForCompletion=function(E){for(var O=Object.keys(E),T=O.length,C="";T--;)C=O[T],this._meta[C]=E[C]},x.prototype._setState=function(E){this._state=E},x.prototype._setupAutoPull=function(){this._autoPull=!0},x})(c);e.ResultStreamObserver=f;var h=(function(w){function x(E){var O=E===void 0?{}:E,T=O.onError,C=O.onCompleted,P=w.call(this)||this;return P._onError=T,P._onCompleted=C,P}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when initializing "+o.json.stringify(E)))},x.prototype.onError=function(E){this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(E)},x})(c);e.LoginObserver=h;var d=(function(w){function x(E){var O=E===void 0?{}:E,T=O.onError,C=O.onCompleted,P=w.call(this)||this;return P._onError=T,P._onCompleted=C,P}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when logging off "+o.json.stringify(E)))},x.prototype.onError=function(E){this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(E)},x})(c);e.LogoffObserver=d;var v=(function(w){function x(E){var O=E===void 0?{}:E,T=O.onProtocolError,C=O.onError,P=O.onComplete,R=w.call(this)||this;return R._onProtocolError=T,R._onError=C,R._onComplete=P,R}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(E),l))},x.prototype.onError=function(E){E.code===l&&this._onProtocolError&&this._onProtocolError(E.message),this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onComplete&&this._onComplete(E)},x})(c);e.ResetObserver=v;var p=(function(w){function x(E){var O=E===void 0?{}:E,T=O.onError,C=O.onCompleted,P=w.call(this)||this;return P._onError=T,P._onCompleted=C,P}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when sending telemetry "+o.json.stringify(E),l))},x.prototype.onError=function(E){this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(E)},x})(f);e.TelemetryObserver=p;var m=(function(w){function x(E){var O=E.error,T=E.onError,C=w.call(this,{beforeError:T})||this;return C.onError(O),C}return n(x,w),x})(f);e.FailedObserver=m;var y=(function(w){function x(){var E=w.call(this)||this;return w.prototype.markCompleted.call(E),E}return n(x,w),x})(f);e.CompletedObserver=y;var b=(function(w){function x(E){var O=E.resultObserver,T=E.onProtocolError,C=E.onError,P=E.onCompleted,R=w.call(this)||this;return R._resultObserver=O,R._onError=C,R._onCompleted=P,R._records=[],R._onProtocolError=T,O.subscribe(R),R}return n(x,w),x.prototype.onNext=function(E){this._records.push(E)},x.prototype.onError=function(E){E.code===l&&this._onProtocolError&&this._onProtocolError(E.message),this._onError&&this._onError(E)},x.prototype.onCompleted=function(){this._records===null||this._records.length===1?this._onCompleted&&this._onCompleted(a.default.ofRecord(this._records[0])):this.onError((0,o.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+o.json.stringify(this._records),l))},x})(c);e.ProcedureRouteObserver=b;var g=(function(w){function x(E){var O=E===void 0?{}:E,T=O.onProtocolError,C=O.onError,P=O.onCompleted,R=w.call(this)||this;return R._onProtocolError=T,R._onError=C,R._onCompleted=P,R}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(E),l))},x.prototype.onError=function(E){E.code===l&&this._onProtocolError&&this._onProtocolError(E.message),this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(a.default.ofMessageResponse(E))},x})(c);e.RouteObserver=g;var _={READY_STREAMING:{onSuccess:function(w,x){w._handleRunSuccess(x,function(){w._setState(_.STREAMING)})},onError:function(w,x){w._handleError(x)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(w,x){w._handleRunSuccess(x,function(){return w._handleStreaming()})},onError:function(w,x){w._handleError(x)},name:function(){return"READY"},pull:function(w){return w._more()}},STREAMING:{onSuccess:function(w,x){x.has_more?w._handleHasMore(x):w._handlePullSuccess(x)},onError:function(w,x){w._handleError(x)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(w){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},9018:function(r,e,t){var n=this&&this.__read||function(m,y){var b=typeof Symbol=="function"&&m[Symbol.iterator];if(!b)return m;var g,_,w=b.call(m),x=[];try{for(;(y===void 0||y-- >0)&&!(g=w.next()).done;)x.push(g.value)}catch(E){_={error:E}}finally{try{g&&!g.done&&(b=w.return)&&b.call(w)}finally{if(_)throw _.error}}return x},i=this&&this.__spreadArray||function(m,y,b){if(b||arguments.length===2)for(var g,_=0,w=y.length;_<w;_++)!g&&_ in y||(g||(g=Array.prototype.slice.call(y,0,_)),g[_]=y[_]);return m.concat(g||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var o=t(9305),a=o.internal.constants,s=a.ACCESS_MODE_WRITE,u=a.ACCESS_MODE_READ,l=o.internal.serverAddress.ServerAddress,c=o.error.PROTOCOL_ERROR,f=(function(){function m(y){var b=y===void 0?{}:y,g=b.database,_=b.routers,w=b.readers,x=b.writers,E=b.expirationTime,O=b.ttl;this.database=g||null,this.databaseName=g||"default database",this.routers=_||[],this.readers=w||[],this.writers=x||[],this.expirationTime=E||(0,o.int)(0),this.ttl=O}return m.fromRawRoutingTable=function(y,b,g){return d(y,b,g)},m.prototype.forget=function(y){this.readers=h(this.readers,y),this.writers=h(this.writers,y)},m.prototype.forgetRouter=function(y){this.routers=h(this.routers,y)},m.prototype.forgetWriter=function(y){this.writers=h(this.writers,y)},m.prototype.isStaleFor=function(y){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||y===u&&this.readers.length===0||y===s&&this.writers.length===0},m.prototype.isExpiredFor=function(y){return this.expirationTime.add(y).lessThan(Date.now())},m.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},m.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},m})();function h(m,y){return m.filter(function(b){return b.asKey()!==y.asKey()})}function d(m,y,b){var g=b.ttl,_=(function(T,C){try{var P=(0,o.int)(Date.now()),R=(0,o.int)(T.ttl).multiply(1e3).add(P);return R.lessThan(P)?o.Integer.MAX_VALUE:R}catch(k){throw(0,o.newError)("Unable to parse TTL entry from router ".concat(C,` from raw routing table:
`).concat(o.json.stringify(T),`
Error message: `).concat(k.message),c)}})(b,y),w=(function(T,C){try{var P=[],R=[],k=[];return T.servers.forEach(function(I){var M=I.role,j=I.addresses;M==="ROUTE"?P=p(j).map(function(L){return l.fromUrl(L)}):M==="WRITE"?k=p(j).map(function(L){return l.fromUrl(L)}):M==="READ"&&(R=p(j).map(function(L){return l.fromUrl(L)}))}),{routers:P,readers:R,writers:k}}catch(I){throw(0,o.newError)("Unable to parse servers entry from router ".concat(C,` from addresses:
`).concat(o.json.stringify(T.servers),`
Error message: `).concat(I.message),c)}})(b,y),x=w.routers,E=w.readers,O=w.writers;return v(x,"routers",y),v(E,"readers",y),new f({database:m||b.db,routers:x,readers:E,writers:O,expirationTime:_,ttl:g})}function v(m,y,b){if(m.length===0)throw(0,o.newError)("Received no "+y+" from router "+b,c)}function p(m){if(!Array.isArray(m))throw new TypeError("Array expected but got: "+m);return Array.from(m)}e.default=f,e.createValidRoutingTable=d},9052:(r,e)=>{function t(n,i,o){return{kind:n,value:i,error:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.nextNotification=e.errorNotification=e.COMPLETE_NOTIFICATION=void 0,e.COMPLETE_NOTIFICATION=t("C",void 0,void 0),e.errorNotification=function(n){return t("E",void 0,n)},e.nextNotification=function(n){return t("N",n,void 0)},e.createNotification=t},9054:function(r,e,t){var n=this&&this.__extends||(function(){var y=function(b,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(_[x]=w[x])},y(b,g)};return function(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=b}y(b,g),b.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(y){for(var b,g=1,_=arguments.length;g<_;g++)for(var w in b=arguments[g])Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w]);return y},i.apply(this,arguments)},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(6445)),s=o(t(7021)),u=t(9014),l=t(397),c=o(t(7331)),f=o(t(5045)),h=o(t(3321)),d=t(9305),v=d.internal.bookmarks.Bookmarks,p=d.internal.constants.BOLT_PROTOCOL_V4_3,m=(function(y){function b(){return y!==null&&y.apply(this,arguments)||this}return n(b,y),Object.defineProperty(b.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(c.default).map(function(_){return _(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),b.prototype.requestRoutingInformation=function(g){var _=g.routingContext,w=_===void 0?{}:_,x=g.databaseName,E=x===void 0?null:x,O=g.sessionContext,T=O===void 0?{}:O,C=g.onError,P=g.onCompleted,R=new u.RouteObserver({onProtocolError:this._onProtocolError,onError:C,onCompleted:P}),k=T.bookmarks||v.empty();return this.write(s.default.route(w,k.values(),E),R,!0),R},b.prototype.initialize=function(g){var _=this,w=g===void 0?{}:g,x=w.userAgent,E=(w.boltAgent,w.authToken),O=w.notificationFilter,T=w.onError,C=w.onComplete,P=new u.LoginObserver({onError:function(R){return _._onLoginError(R,T)},onCompleted:function(R){return R.patch_bolt!==void 0&&_._applyPatches(R.patch_bolt),_._onLoginCompleted(R,E,C)}});return(0,l.assertNotificationFilterIsEmpty)(O,this._onProtocolError,P),this.write(s.default.hello(x,E,this._serversideRouting,["utc"]),P,!0),P},b.prototype._applyPatches=function(g){g.includes("utc")&&this._applyUtcPatch()},b.prototype._applyUtcPatch=function(){var g=this;this._transformer=new h.default(Object.values(i(i({},c.default),f.default)).map(function(_){return _(g._config,g._log)}))},b})(a.default);e.default=m},9060:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstValueFrom=void 0;var n=t(2823),i=t(5);e.firstValueFrom=function(o,a){var s=typeof a=="object";return new Promise(function(u,l){var c=new i.SafeSubscriber({next:function(f){u(f),c.unsubscribe()},error:l,complete:function(){s?u(a.defaultValue):l(new n.EmptyError)}});o.subscribe(c)})}},9098:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=void 0;var n=t(6640),i=t(7843),o=t(3111);e.skipLast=function(a){return a<=0?n.identity:i.operate(function(s,u){var l=new Array(a),c=0;return s.subscribe(o.createOperatorSubscriber(u,function(f){var h=c++;if(h<a)l[h]=f;else{var d=h%a,v=l[d];l[d]=f,u.next(v)}})),function(){l=null}})}},9105:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forkJoin=void 0;var n=t(4662),i=t(7360),o=t(9445),a=t(1107),s=t(3111),u=t(1251),l=t(6013);e.forkJoin=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=a.popResultSelector(c),d=i.argsArgArrayOrObject(c),v=d.args,p=d.keys,m=new n.Observable(function(y){var b=v.length;if(b)for(var g=new Array(b),_=b,w=b,x=function(O){var T=!1;o.innerFrom(v[O]).subscribe(s.createOperatorSubscriber(y,function(C){T||(T=!0,w--),g[O]=C},function(){return _--},void 0,function(){_&&T||(w||y.next(p?l.createObject(p,g):g),y.complete())}))},E=0;E<b;E++)x(E);else y.complete()});return h?m.pipe(u.mapOneOrManyArgs(h)):m}},9125:function(r,e,t){var n=this&&this.__extends||(function(){var d=function(v,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},d(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=v}d(v,p),v.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(d){for(var v,p=1,m=arguments.length;p<m;p++)for(var y in v=arguments[p])Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y]);return d},i.apply(this,arguments)},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(934)),s=o(t(2204)),u=o(t(3321)),l=o(t(7021)),c=t(9014),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_3,h=(function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return n(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(m){return m(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.initialize=function(p){var m=this,y=p===void 0?{}:p,b=y.userAgent,g=y.boltAgent,_=y.authToken,w=y.notificationFilter,x=y.onError,E=y.onComplete,O={},T=new c.LoginObserver({onError:function(C){return m._onLoginError(C,x)},onCompleted:function(C){return O.metadata=C,m._onLoginCompleted(C)}});return this.write(l.default.hello5x3(b,g,w,this._serversideRouting),T,!1),this.logon({authToken:_,onComplete:function(C){return E(i(i({},C),O.metadata))},onError:x,flush:!0})},v})(a.default);e.default=h},9135:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=void 0;var n=t(983),i=t(1018);e.concatMap=function(o,a){return i.isFunction(a)?n.mergeMap(o,a,1):n.mergeMap(o,1)}},9137:function(r,e,t){var n=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(p){return function(m){return(function(y){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}})([p,m])}}},i=this&&this.__await||function(s){return this instanceof i?(this.v=s,this):new i(s)},o=this&&this.__asyncGenerator||function(s,u,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=l.apply(s,u||[]),h=[];return c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c;function d(b){f[b]&&(c[b]=function(g){return new Promise(function(_,w){h.push([b,g,_,w])>1||v(b,g)})})}function v(b,g){try{(_=f[b](g)).value instanceof i?Promise.resolve(_.value.v).then(p,m):y(h[0][2],_)}catch(w){y(h[0][3],w)}var _}function p(b){v("next",b)}function m(b){v("throw",b)}function y(b,g){b(g),h.shift(),h.length&&v(h[0][0],h[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.isReadableStreamLike=e.readableStreamLikeToAsyncGenerator=void 0;var a=t(1018);e.readableStreamLikeToAsyncGenerator=function(s){return o(this,arguments,function(){var u,l,c;return n(this,function(f){switch(f.label){case 0:u=s.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,i(u.read())];case 3:return l=f.sent(),c=l.value,l.done?[4,i(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,i(c)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})},e.isReadableStreamLike=function(s){return a.isFunction(s==null?void 0:s.getReader)}},9139:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;var n=t(6384),i=t(7843);e.reduce=function(o,a){return i.operate(n.scanInternals(o,a,arguments.length>=2,!1,!0))}},9155:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,n([i,o],t(a))):setTimeout.apply(void 0,n([i,o],t(a)))},clearTimeout:function(i){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(i)},delegate:void 0}},9223:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.captureError=e.errorContext=void 0;var n=t(3413),i=null;e.errorContext=function(o){if(n.config.useDeprecatedSynchronousErrorHandling){var a=!i;if(a&&(i={errorThrown:!1,error:null}),o(),a){var s=i,u=s.errorThrown,l=s.error;if(i=null,u)throw l}}else o()},e.captureError=function(o){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=o)}},9238:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(4325));e.default=n({},o.default)},9247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=void 0;var n=t(8918),i=t(1018),o=t(1483);e.multicast=function(a,s){var u=i.isFunction(a)?a:function(){return a};return i.isFunction(s)?o.connect(s,{connector:u}):function(l){return new n.ConnectableObservable(l,u)}}},9305:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(G,Y,ie,W){W===void 0&&(W=ie);var H=Object.getOwnPropertyDescriptor(Y,ie);H&&!("get"in H?!Y.__esModule:H.writable||H.configurable)||(H={enumerable:!0,get:function(){return Y[ie]}}),Object.defineProperty(G,W,H)}:function(G,Y,ie,W){W===void 0&&(W=ie),G[W]=Y[ie]}),i=this&&this.__setModuleDefault||(Object.create?function(G,Y){Object.defineProperty(G,"default",{enumerable:!0,value:Y})}:function(G,Y){G.default=Y}),o=this&&this.__importStar||function(G){if(G&&G.__esModule)return G;var Y={};if(G!=null)for(var ie in G)ie!=="default"&&Object.prototype.hasOwnProperty.call(G,ie)&&n(Y,G,ie);return i(Y,G),Y},a=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var s=t(9691);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return s.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return s.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var u=o(t(3371));e.Integer=u.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return u.toString}});var l=t(5459);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}});var c=t(1517);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var f=a(t(4820));e.Record=f.default;var h=t(7093);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h.Point}});var d=o(t(6033));e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var v=o(t(1866));e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var p=t(1985);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var m=a(t(9512));e.Result=m.default;var y=a(t(8917));e.EagerResult=y.default;var b=o(t(2007));e.ConnectionProvider=b.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return b.Releasable}});var g=a(t(1409));e.Connection=g.default;var _=a(t(9473));e.Transaction=_.default;var w=a(t(5909));e.ManagedTransaction=w.default;var x=a(t(4569));e.TransactionPromise=x.default;var E=a(t(5481));e.Session=E.default;var O=o(t(7264)),T=O;e.Driver=O.default,e.driver=T;var C=a(t(1967));e.auth=C.default;var P=t(6755);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return P.bookmarkManager}});var R=t(2069);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return R.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return R.staticAuthTokenManager}});var k=t(7264);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return k.routing}});var I=o(t(6872));e.types=I;var M=o(t(4027));e.json=M;var j=a(t(1573));e.resultTransformers=j.default;var L=t(8264);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return L.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return L.resolveCertificateProvider}});var F=o(t(6995));e.internal=F;var z={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};e.error=z;var V={authTokenManagers:R.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,newGQLError:s.newGQLError,GQLError:s.GQLError,isRetriableError:s.isRetriableError,error:z,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:F,isPoint:h.isPoint,Point:h.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,isDate:l.isDate,isDateTime:l.isDateTime,isDuration:l.isDuration,isLocalDateTime:l.isLocalDateTime,isLocalTime:l.isLocalTime,isTime:l.isTime,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:f.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:m.default,EagerResult:y.default,Transaction:_.default,ManagedTransaction:w.default,TransactionPromise:x.default,Session:E.default,Driver:O.default,Connection:g.default,Releasable:b.Releasable,types:I,driver:T,json:M,auth:C.default,bookmarkManager:P.bookmarkManager,routing:k.routing,resultTransformers:j.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:L.clientCertificateProviders,resolveCertificateProvider:L.resolveCertificateProvider};e.default=V},9318:(r,e)=>{e.read=function(t,n,i,o,a){var s,u,l=8*a-o-1,c=(1<<l)-1,f=c>>1,h=-7,d=i?a-1:0,v=i?-1:1,p=t[n+d];for(d+=v,s=p&(1<<-h)-1,p>>=-h,h+=l;h>0;s=256*s+t[n+d],d+=v,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=o;h>0;u=256*u+t[n+d],d+=v,h-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,o),s-=f}return(p?-1:1)*u*Math.pow(2,s-o)},e.write=function(t,n,i,o,a,s){var u,l,c,f=8*s-a-1,h=(1<<f)-1,d=h>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:s-1,m=o?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-u))<1&&(u--,c*=2),(n+=u+d>=1?v/c:v*Math.pow(2,1-d))*c>=2&&(u++,c/=2),u+d>=h?(l=0,u=h):u+d>=1?(l=(n*c-1)*Math.pow(2,a),u+=d):(l=n*Math.pow(2,d-1)*Math.pow(2,a),u=0));a>=8;t[i+p]=255&l,p+=m,l/=256,a-=8);for(u=u<<a|l,f+=a;f>0;t[i+p]=255&u,p+=m,u/=256,f-=8);t[i+p-m]|=128*y}},9353:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defer=void 0;var n=t(4662),i=t(9445);e.defer=function(o){return new n.Observable(function(a){i.innerFrom(o()).subscribe(a)})}},9356:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var n=t(7843),i=t(3111);e.isEmpty=function(){return n.operate(function(o,a){o.subscribe(i.createOperatorSubscriber(a,function(){a.next(!1),a.complete()},function(){a.next(!0),a.complete()}))})}},9376:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0;var n=t(4662),i=t(8616);e.range=function(o,a,s){if(a==null&&(a=o,o=0),a<=0)return i.EMPTY;var u=a+o;return new n.Observable(s?function(l){var c=o;return s.schedule(function(){c<u?(l.next(c++),this.schedule()):l.complete()})}:function(l){for(var c=o;c<u&&!l.closed;)l.next(c++);l.complete()})}},9419:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var n=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return n.audit}});var i=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var o=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return o.buffer}});var a=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return a.bufferCount}});var s=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var u=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return u.bufferToggle}});var l=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return l.bufferWhen}});var c=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var f=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return f.combineAll}});var h=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return h.combineLatestAll}});var d=t(2551);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var v=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var p=t(7601);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var m=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return m.concatAll}});var y=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var b=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return b.concatMapTo}});var g=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return g.concatWith}});var _=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return _.connect}});var w=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return w.count}});var x=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return x.debounce}});var E=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return E.debounceTime}});var O=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return O.defaultIfEmpty}});var T=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return T.delay}});var C=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return C.delayWhen}});var P=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return P.dematerialize}});var R=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return R.distinct}});var k=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return k.distinctUntilChanged}});var I=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return I.distinctUntilKeyChanged}});var M=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return M.elementAt}});var j=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return j.endWith}});var L=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return L.every}});var F=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return F.exhaust}});var z=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return z.exhaustAll}});var V=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return V.exhaustMap}});var G=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return G.expand}});var Y=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Y.filter}});var ie=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return ie.finalize}});var W=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return W.find}});var H=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return H.findIndex}});var Q=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Q.first}});var J=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return J.groupBy}});var ne=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ne.ignoreElements}});var K=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return K.isEmpty}});var $=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return $.last}});var Z=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Z.map}});var ae=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return ae.mapTo}});var se=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return se.materialize}});var fe=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return fe.max}});var ge=t(361);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ge.merge}});var ye=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return ye.mergeAll}});var pe=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return pe.flatMap}});var N=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return N.mergeMap}});var B=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return B.mergeMapTo}});var q=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return q.mergeScan}});var re=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return re.mergeWith}});var ue=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return ue.min}});var le=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return le.multicast}});var de=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return de.observeOn}});var xe=t(1226);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return xe.onErrorResumeNext}});var ke=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return ke.pairwise}});var Xe=t(2171);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Xe.partition}});var ze=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return ze.pluck}});var Ge=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Ge.publish}});var Le=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Le.publishBehavior}});var Ie=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Ie.publishLast}});var Ee=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Ee.publishReplay}});var ee=t(4440);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return ee.race}});var ve=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return ve.raceWith}});var be=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return be.reduce}});var we=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return we.repeat}});var Oe=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Oe.repeatWhen}});var Ve=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Ve.retry}});var Se=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Se.retryWhen}});var We=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return We.refCount}});var Be=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Be.sample}});var Ye=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Ye.sampleTime}});var ot=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return ot.scan}});var et=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return et.sequenceEqual}});var Ue=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Ue.share}});var ft=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return ft.shareReplay}});var st=t(5382);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return st.single}});var Pt=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return Pt.skip}});var Ct=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Ct.skipLast}});var bt=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return bt.skipUntil}});var vt=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return vt.skipWhile}});var It=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return It.startWith}});var Dt=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Dt.subscribeOn}});var er=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return er.switchAll}});var mr=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return mr.switchMap}});var pt=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return pt.switchMapTo}});var Nt=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Nt.switchScan}});var or=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return or.take}});var hr=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return hr.takeLast}});var Ar=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Ar.takeUntil}});var Sr=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Sr.takeWhile}});var Yt=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Yt.tap}});var Xt=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Xt.throttle}});var jt=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return jt.throttleTime}});var In=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return In.throwIfEmpty}});var zr=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return zr.timeInterval}});var Ro=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ro.timeout}});var Aa=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Aa.timeoutWith}});var Ra=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ra.timestamp}});var to=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return to.toArray}});var ka=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return ka.window}});var Ia=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Ia.windowCount}});var Da=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Da.windowTime}});var Ma=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Ma.windowToggle}});var pi=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return pi.windowWhen}});var Ft=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Ft.withLatestFrom}});var Mt=t(5918);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Mt.zip}});var ko=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return ko.zipAll}});var Io=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Io.zipWith}})},9445:function(r,e,t){var n=this&&this.__awaiter||function(O,T,C,P){return new(C||(C=Promise))(function(R,k){function I(L){try{j(P.next(L))}catch(F){k(F)}}function M(L){try{j(P.throw(L))}catch(F){k(F)}}function j(L){var F;L.done?R(L.value):(F=L.value,F instanceof C?F:new C(function(z){z(F)})).then(I,M)}j((P=P.apply(O,T||[])).next())})},i=this&&this.__generator||function(O,T){var C,P,R,k,I={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return k={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function M(j){return function(L){return(function(F){if(C)throw new TypeError("Generator is already executing.");for(;I;)try{if(C=1,P&&(R=2&F[0]?P.return:F[0]?P.throw||((R=P.return)&&R.call(P),0):P.next)&&!(R=R.call(P,F[1])).done)return R;switch(P=0,R&&(F=[2&F[0],R.value]),F[0]){case 0:case 1:R=F;break;case 4:return I.label++,{value:F[1],done:!1};case 5:I.label++,P=F[1],F=[0];continue;case 7:F=I.ops.pop(),I.trys.pop();continue;default:if(!((R=(R=I.trys).length>0&&R[R.length-1])||F[0]!==6&&F[0]!==2)){I=0;continue}if(F[0]===3&&(!R||F[1]>R[0]&&F[1]<R[3])){I.label=F[1];break}if(F[0]===6&&I.label<R[1]){I.label=R[1],R=F;break}if(R&&I.label<R[2]){I.label=R[2],I.ops.push(F);break}R[2]&&I.ops.pop(),I.trys.pop();continue}F=T.call(O,I)}catch(z){F=[6,z],P=0}finally{C=R=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}})([j,L])}}},o=this&&this.__asyncValues||function(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,C=O[Symbol.asyncIterator];return C?C.call(O):(O=typeof a=="function"?a(O):O[Symbol.iterator](),T={},P("next"),P("throw"),P("return"),T[Symbol.asyncIterator]=function(){return this},T);function P(R){T[R]=O[R]&&function(k){return new Promise(function(I,M){(function(j,L,F,z){Promise.resolve(z).then(function(V){j({value:V,done:F})},L)})(I,M,(k=O[R](k)).done,k.value)})}}},a=this&&this.__values||function(O){var T=typeof Symbol=="function"&&Symbol.iterator,C=T&&O[T],P=0;if(C)return C.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadableStreamLike=e.fromAsyncIterable=e.fromIterable=e.fromPromise=e.fromArrayLike=e.fromInteropObservable=e.innerFrom=void 0;var s=t(8046),u=t(7629),l=t(4662),c=t(1116),f=t(1358),h=t(7614),d=t(6368),v=t(9137),p=t(1018),m=t(7315),y=t(3327);function b(O){return new l.Observable(function(T){var C=O[y.observable]();if(p.isFunction(C.subscribe))return C.subscribe(T);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function g(O){return new l.Observable(function(T){for(var C=0;C<O.length&&!T.closed;C++)T.next(O[C]);T.complete()})}function _(O){return new l.Observable(function(T){O.then(function(C){T.closed||(T.next(C),T.complete())},function(C){return T.error(C)}).then(null,m.reportUnhandledError)})}function w(O){return new l.Observable(function(T){var C,P;try{for(var R=a(O),k=R.next();!k.done;k=R.next()){var I=k.value;if(T.next(I),T.closed)return}}catch(M){C={error:M}}finally{try{k&&!k.done&&(P=R.return)&&P.call(R)}finally{if(C)throw C.error}}T.complete()})}function x(O){return new l.Observable(function(T){(function(C,P){var R,k,I,M;return n(this,void 0,void 0,function(){var j,L;return i(this,function(F){switch(F.label){case 0:F.trys.push([0,5,6,11]),R=o(C),F.label=1;case 1:return[4,R.next()];case 2:if((k=F.sent()).done)return[3,4];if(j=k.value,P.next(j),P.closed)return[2];F.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return L=F.sent(),I={error:L},[3,11];case 6:return F.trys.push([6,,9,10]),k&&!k.done&&(M=R.return)?[4,M.call(R)]:[3,8];case 7:F.sent(),F.label=8;case 8:return[3,10];case 9:if(I)throw I.error;return[7];case 10:return[7];case 11:return P.complete(),[2]}})})})(O,T).catch(function(C){return T.error(C)})})}function E(O){return x(v.readableStreamLikeToAsyncGenerator(O))}e.innerFrom=function(O){if(O instanceof l.Observable)return O;if(O!=null){if(c.isInteropObservable(O))return b(O);if(s.isArrayLike(O))return g(O);if(u.isPromise(O))return _(O);if(f.isAsyncIterable(O))return x(O);if(d.isIterable(O))return w(O);if(v.isReadableStreamLike(O))return E(O)}throw h.createInvalidObservableTypeError(O)},e.fromInteropObservable=b,e.fromArrayLike=g,e.fromPromise=_,e.fromIterable=w,e.fromAsyncIterable=x,e.fromReadableStreamLike=E},9470:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=n(t(3389));e.BaseHostNameResolver=i.default;var o=n(t(8341));e.ConfiguredCustomResolver=o.default},9473:function(r,e,t){var n=this&&this.__awaiter||function(y,b,g,_){return new(g||(g=Promise))(function(w,x){function E(C){try{T(_.next(C))}catch(P){x(P)}}function O(C){try{T(_.throw(C))}catch(P){x(P)}}function T(C){var P;C.done?w(C.value):(P=C.value,P instanceof g?P:new g(function(R){R(P)})).then(E,O)}T((_=_.apply(y,b||[])).next())})},i=this&&this.__generator||function(y,b){var g,_,w,x,E={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function O(T){return function(C){return(function(P){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,P[0]&&(E=0)),E;)try{if(g=1,_&&(w=2&P[0]?_.return:P[0]?_.throw||((w=_.return)&&w.call(_),0):_.next)&&!(w=w.call(_,P[1])).done)return w;switch(_=0,w&&(P=[2&P[0],w.value]),P[0]){case 0:case 1:w=P;break;case 4:return E.label++,{value:P[1],done:!1};case 5:E.label++,_=P[1],P=[0];continue;case 7:P=E.ops.pop(),E.trys.pop();continue;default:if(!((w=(w=E.trys).length>0&&w[w.length-1])||P[0]!==6&&P[0]!==2)){E=0;continue}if(P[0]===3&&(!w||P[1]>w[0]&&P[1]<w[3])){E.label=P[1];break}if(P[0]===6&&E.label<w[1]){E.label=w[1],w=P;break}if(w&&E.label<w[2]){E.label=w[2],E.ops.push(P);break}w[2]&&E.ops.pop(),E.trys.pop();continue}P=b.call(y,E)}catch(R){P=[6,R],_=0}finally{g=w=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}})([T,C])}}},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(6587),s=t(3618),u=t(9730),l=t(754),c=t(2696),f=t(9691),h=o(t(9512)),d=(function(){function y(b){var g=b.connectionHolder,_=b.onClose,w=b.onBookmarks,x=b.onConnection,E=b.reactive,O=b.fetchSize,T=b.impersonatedUser,C=b.highRecordWatermark,P=b.lowRecordWatermark,R=b.notificationFilter,k=b.apiTelemetryConfig,I=this;this._connectionHolder=g,this._reactive=E,this._state=v.ACTIVE,this._onClose=_,this._onBookmarks=w,this._onConnection=x,this._onError=this._onErrorCallback.bind(this),this._fetchSize=O,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=T,this._lowRecordWatermak=P,this._highRecordWatermark=C,this._bookmarks=u.Bookmarks.empty(),this._notificationFilter=R,this._apiTelemetryConfig=k,this._acceptActive=function(){},this._activePromise=new Promise(function(M,j){I._acceptActive=M})}return y.prototype._begin=function(b,g,_){var w=this;this._connectionHolder.getConnection().then(function(x){return n(w,void 0,void 0,function(){var E,O=this;return i(this,function(T){switch(T.label){case 0:return this._onConnection(),x==null?[3,2]:(E=this,[4,b()]);case 1:return E._bookmarks=T.sent(),[2,x.beginTransaction({bookmarks:this._bookmarks,txConfig:g,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(C){_!=null&&_.onError(C),O._onError(C).catch(function(){})},afterComplete:function(C){_!=null&&_.onComplete(C),C.db!==void 0&&(_==null?void 0:_.onDB)!=null&&_.onDB(C.db),O._onComplete(C)}})];case 2:throw(0,f.newError)("No connection available")}})})}).catch(function(x){_!=null&&_.onError(x),w._onError(x).catch(function(){})}).finally(function(){return w._acceptActive()})},y.prototype.run=function(b,g){var _=(0,a.validateQueryAndParameters)(b,g),w=_.validatedQuery,x=_.params,E=this._state.run(w,x,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(E),E},y.prototype.commit=function(){var b=this,g=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(_){return b._onCompleteCallback(_,b._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=g.state,this._onClose(),new Promise(function(_,w){g.result.subscribe({onCompleted:function(){return _()},onError:function(x){return w(x)}})})},y.prototype.rollback=function(){var b=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=b.state,this._onClose(),new Promise(function(g,_){b.result.subscribe({onCompleted:function(){return g()},onError:function(w){return _(w)}})})},y.prototype.isOpen=function(){return this._state===v.ACTIVE},y.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype._onErrorCallback=function(b){return this._state===v.FAILED?Promise.resolve(null):(this._state=v.FAILED,this._onClose(),this._results.forEach(function(g){g.isOpen()&&g._streamObserverPromise.then(function(_){return _.onError(b)}).catch(function(_){})}),this._connectionHolder.releaseConnection())},y.prototype._onCompleteCallback=function(b,g){this._onBookmarks(new u.Bookmarks(b==null?void 0:b.bookmark),g??u.Bookmarks.empty(),b==null?void 0:b.db)},y})(),v={ACTIVE:{commit:function(y){return{result:p(!0,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.SUCCEEDED}},rollback:function(y){return{result:p(!1,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.ROLLED_BACK}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError,x=g.onComplete,E=g.onConnection,O=g.reactive,T=g.fetchSize,C=g.highRecordWatermark,P=g.lowRecordWatermark,R=g.preparationJob,k=R??Promise.resolve();return m(_.getConnection().then(function(I){return k.then(function(){return I})}).then(function(I){if(E(),I!=null)return I.run(y,b,{bookmarks:u.Bookmarks.empty(),txConfig:l.TxConfig.empty(),beforeError:w,afterComplete:x,reactive:O,fetchSize:T,highRecordWatermark:C,lowRecordWatermark:P});throw(0,f.newError)("No connection available")}).catch(function(I){return new c.FailedObserver({error:I,onError:w})}),y,b,_,C,P)}},FAILED:{commit:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:g}),"COMMIT",{},b,0,0),state:v.FAILED}},rollback:function(y){var b=y.connectionHolder;return y.onError,y.onComplete,{result:m(new c.CompletedObserver,"ROLLBACK",{},b,0,0),state:v.FAILED}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError;return g.onComplete,m(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:w}),y,b,_,0,0)}},SUCCEEDED:{commit:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:g}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:b}},rollback:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:g}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:b}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError;return g.onComplete,m(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:w}),y,b,_,0,0)}},ROLLED_BACK:{commit:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:g}),"COMMIT",{},b,0,0),state:v.ROLLED_BACK}},rollback:function(y){var b=y.connectionHolder;return y.onError,y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},b,0,0),state:v.ROLLED_BACK}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError;return g.onComplete,m(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:w}),y,b,_,0,0)}}};function p(y,b,g,_,w,x,E){var O=E??Promise.resolve(),T=b.getConnection().then(function(C){return O.then(function(){return C})}).then(function(C){return w(),x.forEach(function(P){return P._cancel()}),Promise.all(x.map(function(P){return P.summary()})).then(function(P){if(C!=null)return y?C.commitTransaction({beforeError:g,afterComplete:_}):C.rollbackTransaction({beforeError:g,afterComplete:_});throw(0,f.newError)("No connection available")})}).catch(function(C){return new c.FailedObserver({error:C,onError:g})});return new h.default(T,y?"COMMIT":"ROLLBACK",{},b,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function m(y,b,g,_,w,x){return _===void 0&&(_=s.EMPTY_CONNECTION_HOLDER),new h.default(Promise.resolve(y),b,g,new s.ReadOnlyConnectionHolder(_??s.EMPTY_CONNECTION_HOLDER),{low:x,high:w})}e.default=d},9507:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var o=t(8014);e.animationFrameProvider={schedule:function(a){var s=requestAnimationFrame,u=cancelAnimationFrame,l=e.animationFrameProvider.delegate;l&&(s=l.requestAnimationFrame,u=l.cancelAnimationFrame);var c=s(function(f){u=void 0,a(f)});return new o.Subscription(function(){return u==null?void 0:u(c)})},requestAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(a)))},cancelAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(a)))},delegate:void 0}},9512:function(r,e,t){var n,i=this&&this.__awaiter||function(p,m,y,b){return new(y||(y=Promise))(function(g,_){function w(O){try{E(b.next(O))}catch(T){_(T)}}function x(O){try{E(b.throw(O))}catch(T){_(T)}}function E(O){var T;O.done?g(O.value):(T=O.value,T instanceof y?T:new y(function(C){C(T)})).then(w,x)}E((b=b.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var y,b,g,_,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(E){return function(O){return(function(T){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(w=0)),w;)try{if(y=1,b&&(g=2&T[0]?b.return:T[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,T[1])).done)return g;switch(b=0,g&&(T=[2&T[0],g.value]),T[0]){case 0:case 1:g=T;break;case 4:return w.label++,{value:T[1],done:!1};case 5:w.label++,b=T[1],T=[0];continue;case 7:T=w.ops.pop(),w.trys.pop();continue;default:if(!((g=(g=w.trys).length>0&&g[g.length-1])||T[0]!==6&&T[0]!==2)){w=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){w.label=T[1];break}if(T[0]===6&&w.label<g[1]){w.label=g[1],g=T;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(T);break}g[2]&&w.ops.pop(),w.trys.pop();continue}T=m.call(p,w)}catch(C){T=[6,C],b=0}finally{y=g=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}})([E,O])}}},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6033)),u=t(6995),l=t(9691),c=u.connectionHolder.EMPTY_CONNECTION_HOLDER,f=function(p){""+p},h=function(p){},d=function(p){},v=(function(){function p(m,y,b,g,_){var w;_===void 0&&(_={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=(w=new Error("")).stack!=null?w.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=m,this._p=null,this._query=y,this._parameters=b??{},this._connectionHolder=g??c,this._keys=null,this._summary=null,this._error=null,this._watermarks=_}return p.prototype.keys=function(){var m=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(y,b){m._streamObserverPromise.then(function(g){return g.subscribe(m._decorateObserver({onKeys:function(_){return y(_)},onError:function(_){return b(_)}}))}).catch(b)})},p.prototype.summary=function(){var m=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(y,b){m._streamObserverPromise.then(function(g){g.cancel(),g.subscribe(m._decorateObserver({onCompleted:function(_){return y(_)},onError:function(_){return b(_)}}))}).catch(b)})},p.prototype._getOrCreatePromise=function(){var m=this;return this._p==null&&(this._p=new Promise(function(y,b){var g=[],_={onNext:function(w){g.push(w)},onCompleted:function(w){y({records:g,summary:w})},onError:function(w){b(w)}};m.subscribe(_)})),this._p},p.prototype[Symbol.asyncIterator]=function(){var m=this;if(!this.isOpen()){var y=(0,l.newError)("Result is already consumed");return{next:function(){return Promise.reject(y)},peek:function(){return Promise.reject(y)}}}var b={paused:!0,firstRun:!0,finished:!1},g=function(){var x,E;if(b.streaming!=null){var O=(E=(x=b.queuedObserver)===null||x===void 0?void 0:x.size)!==null&&E!==void 0?E:0,T=O>=m._watermarks.high,C=O<=m._watermarks.low;T&&!b.paused?(b.paused=!0,b.streaming.pause()):(C&&b.paused||b.firstRun&&!T)&&(b.firstRun=!1,b.paused=!1,b.streaming.resume())}},_=function(){return i(m,void 0,void 0,function(){var x;return o(this,function(E){switch(E.label){case 0:return b.queuedObserver!==void 0?[3,2]:(b.queuedObserver=this._createQueuedResultObserver(g),x=b,[4,this._subscribe(b.queuedObserver,!0).catch(function(){})]);case 1:x.streaming=E.sent(),g(),E.label=2;case 2:return[2,b.queuedObserver]}})})},w=function(x){if(x===void 0)throw(0,l.newError)("InvalidState: Result stream finished without Summary",l.PROTOCOL_ERROR);return!0};return{next:function(){return i(m,void 0,void 0,function(){var x;return o(this,function(E){switch(E.label){case 0:return b.finished&&w(b.summary)?[2,{done:!0,value:b.summary}]:[4,_()];case 1:return[4,E.sent().dequeue()];case 2:return(x=E.sent()).done===!0&&(b.finished=x.done,b.summary=x.value),[2,x]}})})},return:function(x){return i(m,void 0,void 0,function(){var E,O;return o(this,function(T){switch(T.label){case 0:return b.finished&&w(b.summary)?[2,{done:!0,value:x??b.summary}]:((O=b.streaming)===null||O===void 0||O.cancel(),[4,_()]);case 1:return[4,T.sent().dequeueUntilDone()];case 2:return E=T.sent(),b.finished=!0,E.value=x??E.value,b.summary=E.value,[2,E]}})})},peek:function(){return i(m,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return b.finished&&w(b.summary)?[2,{done:!0,value:b.summary}]:[4,_()];case 1:return[4,x.sent().head()];case 2:return[2,x.sent()]}})})}}},p.prototype.then=function(m,y){return this._getOrCreatePromise().then(m,y)},p.prototype.catch=function(m){return this._getOrCreatePromise().catch(m)},p.prototype.finally=function(m){return this._getOrCreatePromise().finally(m)},p.prototype.subscribe=function(m){this._subscribe(m).catch(function(){})},p.prototype.isOpen=function(){return this._summary===null&&this._error===null},p.prototype._subscribe=function(m,y){y===void 0&&(y=!1);var b=this._decorateObserver(m);return this._streamObserverPromise.then(function(g){return y&&g.pause(),g.subscribe(b),g}).catch(function(g){return b.onError!=null&&b.onError(g),Promise.reject(g)})},p.prototype._decorateObserver=function(m){var y,b,g,_=this,w=(y=m.onCompleted)!==null&&y!==void 0?y:h,x=(b=m.onError)!==null&&b!==void 0?b:f,E=(g=m.onKeys)!==null&&g!==void 0?g:d;return{onNext:m.onNext!=null?m.onNext.bind(m):void 0,onKeys:function(O){return _._keys=O,E.call(m,O)},onCompleted:function(O){_._releaseConnectionAndGetSummary(O).then(function(T){return _._summary!==null?w.call(m,_._summary):(_._summary=T,w.call(m,T))}).catch(x)},onError:function(O){_._connectionHolder.releaseConnection().then(function(){(function(T,C){C!=null&&(T.stack=T.toString()+`
`+C)})(O,_._stack),_._error=O,x.call(m,O)}).catch(x)}}},p.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(m){return m.cancel()}).catch(function(){})},p.prototype._releaseConnectionAndGetSummary=function(m){var y=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),b=y.validatedQuery,g=y.params,_=this._connectionHolder;return _.getConnection().then(function(w){return _.releaseConnection().then(function(){return w==null?void 0:w.getProtocolVersion()})},function(w){}).then(function(w){return new s.default(b,g,m,w)})},p.prototype._createQueuedResultObserver=function(m){var y=this;function b(){var O={};return O.promise=new Promise(function(T,C){O.resolve=T,O.reject=C}),O}function g(O){return O instanceof Error}function _(){var O;return i(this,void 0,void 0,function(){var T;return o(this,function(C){switch(C.label){case 0:if(w.length>0){if(T=(O=w.shift())!==null&&O!==void 0?O:(0,l.newError)("Unexpected empty buffer",l.PROTOCOL_ERROR),m(),g(T))throw T;return[2,T]}return x.resolvable=b(),[4,x.resolvable.promise];case 1:return[2,C.sent()]}})})}var w=[],x={resolvable:null},E={onNext:function(O){E._push({done:!1,value:O})},onCompleted:function(O){E._push({done:!0,value:O})},onError:function(O){E._push(O)},_push:function(O){if(x.resolvable!==null){var T=x.resolvable;x.resolvable=null,g(O)?T.reject(O):T.resolve(O)}else w.push(O),m()},dequeue:_,dequeueUntilDone:function(){return i(y,void 0,void 0,function(){var O;return o(this,function(T){switch(T.label){case 0:return[4,_()];case 1:return(O=T.sent()).done===!0?[2,O]:[3,0];case 2:return[2]}})})},head:function(){return i(y,void 0,void 0,function(){var O,T;return o(this,function(C){switch(C.label){case 0:if(w.length>0){if(g(O=w[0]))throw O;return[2,O]}x.resolvable=b(),C.label=1;case 1:return C.trys.push([1,3,4,5]),[4,x.resolvable.promise];case 2:return O=C.sent(),w.unshift(O),[2,O];case 3:throw T=C.sent(),w.unshift(T),T;case 4:return m(),[7];case 5:return[2]}})})},get size(){return w.length}};return E},p})();n=Symbol.toStringTag,e.default=v},9567:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleObservable=void 0;var n=t(9445),i=t(5184),o=t(8960);e.scheduleObservable=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},9568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},9589:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.schedulePromise=void 0;var n=t(9445),i=t(5184),o=t(8960);e.schedulePromise=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},9612:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=void 0;var n=t(8937);e.distinctUntilKeyChanged=function(i,o){return n.distinctUntilChanged(function(a,s){return o?o(a[i],s[i]):a[i]===s[i]})}},9669:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.concatWith=void 0;var o=t(7601);e.concatWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.concat.apply(void 0,i([],n(a)))}},9686:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUnsubscribedError=void 0;var n=t(5568);e.ObjectUnsubscribedError=n.createErrorClass(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},9689:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=t(4132);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var o=t(8987);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var a=t(3545);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var s=t(7428);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},9691:function(r,e,t){var n=this&&this.__extends||(function(){var m=function(y,b){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},m(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function g(){this.constructor=y}m(y,b),y.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}})(),i=this&&this.__createBinding||(Object.create?function(m,y,b,g){g===void 0&&(g=b);var _=Object.getOwnPropertyDescriptor(y,b);_&&!("get"in _?!y.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(m,g,_)}:function(m,y,b,g){g===void 0&&(g=b),m[g]=y[b]}),o=this&&this.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),a=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var b in m)b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)&&i(y,m,b);return o(y,m),y};Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.GQLError=e.Neo4jError=e.isRetriableError=e.newGQLError=e.newError=void 0;var s=a(t(4027)),u=t(1053),l={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(l);var c=Object.values(l),f="ServiceUnavailable";e.SERVICE_UNAVAILABLE=f;var h="SessionExpired";e.SESSION_EXPIRED=h,e.PROTOCOL_ERROR="ProtocolError";var d=(function(m){function y(b,g,_,w,x){var E,O=this;return(O=m.call(this,b,x!=null?{cause:x}:void 0)||this).constructor=y,O.__proto__=y.prototype,O.cause=x??void 0,O.gqlStatus=g,O.gqlStatusDescription=_,O.diagnosticRecord=w,O.classification=(function(T){return T===void 0||T._classification===void 0?"UNKNOWN":c.includes(T._classification)?T==null?void 0:T._classification:"UNKNOWN"})(O.diagnosticRecord),O.rawClassification=(E=w==null?void 0:w._classification)!==null&&E!==void 0?E:void 0,O.name="GQLError",O}return n(y,m),Object.defineProperty(y.prototype,"diagnosticRecordAsJsonString",{get:function(){return s.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),y})(Error);e.GQLError=d;var v=(function(m){function y(b,g,_,w,x,E){var O=m.call(this,b,_,w,x,E)||this;return O.constructor=y,O.__proto__=y.prototype,O.code=g,O.name="Neo4jError",O.retriable=(function(T){return T===f||T===h||(function(C){return C==="Neo.ClientError.Security.AuthorizationExpired"})(T)||(function(C){return(C==null?void 0:C.includes("TransientError"))===!0})(T)})(g),O}return n(y,m),y.isRetriable=function(b){return b!=null&&b instanceof y&&b.retriable},y})(d);e.Neo4jError=v,e.newError=function(m,y,b,g,_,w){return new v(m,y??"N/A",g??"50N42",_??"error: general processing exception - unexpected error. "+m,w??u.rawPolyfilledDiagnosticRecord,b)},e.newGQLError=function(m,y,b,g,_){return new d(m,b??"50N42",g??"error: general processing exception - unexpected error. "+m,_??u.rawPolyfilledDiagnosticRecord,y)};var p=v.isRetriable;e.isRetriableError=p},9730:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,p){p===void 0&&(p=v);var m=Object.getOwnPropertyDescriptor(d,v);m&&!("get"in m?!d.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,p,m)}:function(h,d,v,p){p===void 0&&(p=v),h[p]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__read||function(h,d){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var p,m,y=v.call(h),b=[];try{for(;(d===void 0||d-- >0)&&!(p=y.next()).done;)b.push(p.value)}catch(g){m={error:g}}finally{try{p&&!p.done&&(v=y.return)&&v.call(y)}finally{if(m)throw m.error}}return b},s=this&&this.__spreadArray||function(h,d,v){if(v||arguments.length===2)for(var p,m=0,y=d.length;m<y;m++)!p&&m in d||(p||(p=Array.prototype.slice.call(d,0,m)),p[m]=d[m]);return h.concat(p||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var u=o(t(6587)),l=(function(){function h(d){this._values=(function(v){if(v==null||v==="")return[];if(u.isString(v))return[v];if(Array.isArray(v)){for(var p=new Set,m=f(v),y=0;y<m.length;y++){var b=m[y];if(b!=null){if(!u.isString(b))throw new TypeError("Bookmark value should be a string, given: '".concat(b,"'"));p.add(b)}}return s([],a(p),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(v,"'"))})(d)}return h.empty=function(){return c},h.prototype.isEmpty=function(){return this._values.length===0},h.prototype.values=function(){return this._values},h.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},h.prototype.asBeginTransactionParameters=function(){var d;return this.isEmpty()?{}:((d={}).bookmarks=this._values,d)},h})();e.Bookmarks=l;var c=new l(null);function f(h){return h.reduce(function(d,v){return Array.isArray(v)?d.concat(f(v)):d.concat(v)},[])}},9744:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9125)),a=i(t(4325)),s=i(t(7021)),u=t(9014),l=i(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_4,f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(a.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype.telemetry=function(v,p){var m=v.api,y=p===void 0?{}:p,b=y.onError,g=y.onCompleted,_=new u.TelemetryObserver({onCompleted:g,onError:b});return this.write(s.default.telemetry({api:m}),_,!1),_},d})(o.default);e.default=f},9756:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=void 0;var n=t(7843),i=t(7714);e.findIndex=function(o,a){return n.operate(i.createFind(o,a,"index"))}},9792:(r,e,t)=>{var n=t(7045),i=t(4360),o=t(6804);r.exports=function(a,s){if(!s)return a;var u=Object.keys(s);if(u.length===0)return a;for(var l=n(a),c=u.length-1;c>=0;c--){var f=u[c],h=String(s[f]);h&&(h=" "+h),o(l,{type:"preprocessor",data:"#define "+f+h})}return i(l)}},9823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=t(8813),o=t(9419),a=(n.internal.logger.Logger,n.error.SERVICE_UNAVAILABLE),s=(function(){function l(c){var f=c===void 0?{}:c,h=f.maxRetryTimeout,d=h===void 0?3e4:h,v=f.initialDelay,p=v===void 0?1e3:v,m=f.delayMultiplier,y=m===void 0?2:m,b=f.delayJitter,g=b===void 0?.2:b,_=f.logger,w=_===void 0?null:_;this._maxRetryTimeout=u(d,3e4),this._initialDelay=u(p,1e3),this._delayMultiplier=u(y,2),this._delayJitter=u(g,.2),this._logger=w}return l.prototype.retry=function(c){var f=this;return c.pipe((0,o.retryWhen)(function(h){var d=[],v=Date.now(),p=1,m=f._initialDelay;return h.pipe((0,o.mergeMap)(function(y){if(!(0,n.isRetriableError)(y))return(0,i.throwError)(function(){return y});if(d.push(y),p>=2&&Date.now()-v>=f._maxRetryTimeout){var b=(0,n.newError)("Failed after retried for ".concat(p," times in ").concat(f._maxRetryTimeout," ms. Make sure that your database is online and retry again."),a);return b.seenErrors=d,(0,i.throwError)(function(){return b})}var g=f._computeNextDelay(m);return m*=f._delayMultiplier,p++,f._logger&&f._logger.warn("Transaction failed and will be retried in ".concat(g)),(0,i.of)(1).pipe((0,o.delay)(g))}))}))},l.prototype._computeNextDelay=function(c){var f=c*this._delayJitter;return c-f+2*f*Math.random()},l})();function u(l,c){return l||l===0?l:c}e.default=s},9843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.retryWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=function(){c=u.subscribe(a.createOperatorSubscriber(l,void 0,void 0,function(v){f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){return c?d():h=!0}))),f&&f.next(v)})),h&&(c.unsubscribe(),c=null,h=!1,d())};d()})}},9857:function(r,e,t){var n=this&&this.__extends||(function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}})(),i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=(function(a){function s(u,l){var c=a.call(this,l)||this;return l&&(c._originalErrorHandler=u._errorHandler,u._errorHandler=c._errorHandler),c._delegate=u,c}return n(s,a),s.prototype.beginTransaction=function(u){return this._delegate.beginTransaction(u)},s.prototype.run=function(u,l,c){return this._delegate.run(u,l,c)},s.prototype.commitTransaction=function(u){return this._delegate.commitTransaction(u)},s.prototype.rollbackTransaction=function(u){return this._delegate.rollbackTransaction(u)},s.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(s.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(u){this._delegate.databaseId=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(u){this._delegate.authToken=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._delegate.version},set:function(u){this._delegate.version=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(u){this._delegate.idleTimestamp=u},enumerable:!1,configurable:!0}),s.prototype.isOpen=function(){return this._delegate.isOpen()},s.prototype.protocol=function(){return this._delegate.protocol()},s.prototype.connect=function(u,l,c,f){return this._delegate.connect(u,l,c,f)},s.prototype.write=function(u,l,c){return this._delegate.write(u,l,c)},s.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},s.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},s.prototype.close=function(){return this._delegate.close()},s.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},s})(i(t(6385)).default);e.default=o},9938:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=void 0;var n=t(9135),i=t(1018);e.concatMapTo=function(o,a){return i.isFunction(a)?n.concatMap(function(){return o},a):n.concatMap(function(){return o})}},9975:(r,e,t)=>{var n=t(7101),i=Array.prototype.concat,o=Array.prototype.slice,a=r.exports=function(s){for(var u=[],l=0,c=s.length;l<c;l++){var f=s[l];n(f)?u=i.call(u,o.call(f)):u.push(f)}return u};a.wrap=function(s){return function(){return s(a(arguments))}}},9994:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7449));e.default=n({},o.default)}},xS={};function _r(r){var e=xS[r];if(e!==void 0)return e.exports;var t=xS[r]={id:r,loaded:!1,exports:{}};return bU[r].call(t.exports,t,t.exports,_r),t.loaded=!0,t.exports}_r.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return _r.d(e,{a:e}),e},_r.d=(r,e)=>{for(var t in e)_r.o(e,t)&&!_r.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},_r.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),_r.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),_r.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var Qt=_r(5250),_U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])};function kv(r,e){function t(){this.constructor=r}_U(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hf=(function(){function r(e){e===void 0&&(e="Atom@"+en()),this.name=e,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=zt.NOT_TRACKING}return r.prototype.onBecomeUnobserved=function(){},r.prototype.reportObserved=function(){BA(this)},r.prototype.reportChanged=function(){ha(),(function(e){if(e.lowestObserverState!==zt.STALE){e.lowestObserverState=zt.STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===zt.UP_TO_DATE&&(i.isTracing!==xi.NONE&&UA(i,e),i.onBecomeStale()),i.dependenciesState=zt.STALE}}})(this),da()},r.prototype.toString=function(){return this.name},r})(),wU=(function(r){function e(t,n,i){t===void 0&&(t="Atom@"+en()),n===void 0&&(n=jS),i===void 0&&(i=jS);var o=r.call(this,t)||this;return o.name=t,o.onBecomeObservedHandler=n,o.onBecomeUnobservedHandler=i,o.isPendingUnobservation=!1,o.isBeingTracked=!1,o}return kv(e,r),e.prototype.reportObserved=function(){return ha(),r.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),da(),!!rt.trackingDerivation},e.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},e})(hf),v_=Ds("Atom",hf);function xs(r){return r.interceptors&&r.interceptors.length>0}function Iv(r,e){var t=r.interceptors||(r.interceptors=[]);return t.push(e),b_(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Ss(r,e){var t=Ms();try{var n=r.interceptors;if(n)for(var i=0,o=n.length;i<o&&(mt(!(e=n[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{Oo(t)}}function ca(r){return r.changeListeners&&r.changeListeners.length>0}function Dv(r,e){var t=r.changeListeners||(r.changeListeners=[]);return t.push(e),b_(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function fa(r,e){var t=Ms(),n=r.changeListeners;if(n){for(var i=0,o=(n=n.slice()).length;i<o;i++)n[i](e);Oo(t)}}function An(){return!!rt.spyListeners.length}function Ts(r){if(rt.spyListeners.length)for(var e=rt.spyListeners,t=0,n=e.length;t<n;t++)e[t](r)}function Ci(r){Ts(TA({},r,{spyReportStart:!0}))}var SS={spyReportEnd:!0};function Pi(r){Ts(r?TA({},r,SS):SS)}function sA(r){return rt.spyListeners.push(r),b_(function(){var e=rt.spyListeners.indexOf(r);e!==-1&&rt.spyListeners.splice(e,1)})}var TS="__$$iterating";function xd(r){mt(r[TS]!==!0,"Illegal state: cannot recycle array as iterator"),Hc(r,TS,!0);var e=-1;return Hc(r,"next",function(){return{done:++e>=this.length,value:e<this.length?this[e]:void 0}}),r}function uA(r,e){Hc(r,typeof Symbol=="function"&&Symbol.iterator||"@@iterator",e)}var Pl,Bh,EU=(function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1})(),z0=0,V0=function(){};Pl=V0,Bh=Array.prototype,Object.setPrototypeOf!==void 0?Object.setPrototypeOf(Pl.prototype,Bh):Pl.prototype.__proto__!==void 0?Pl.prototype.__proto__=Bh:Pl.prototype=Bh,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(r){Object.defineProperty(V0.prototype,r,{configurable:!0,writable:!0,value:Array.prototype[r]})});var lA=(function(){function r(e,t,n,i){this.array=n,this.owned=i,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new hf(e||"ObservableArray@"+en()),this.enhancer=function(o,a){return t(o,a,e+"[..]")}}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.dehanceValues=function(e){return this.dehancer!==void 0?e.map(this.dehancer):e},r.prototype.intercept=function(e){return Iv(this,e)},r.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Dv(this,e)},r.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},r.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},r.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>z0&&p_(e+t+1)},r.prototype.spliceWithArray=function(e,t,n){var i=this;E_(this.atom);var o=this.values.length;if(e===void 0?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=arguments.length===1?o-e:t==null?0:Math.max(0,Math.min(t,o-e)),n===void 0&&(n=[]),xs(this)){var a=Ss(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!a)return SA;t=a.removedCount,n=a.added}var s=(n=n.map(function(l){return i.enhancer(l,void 0)})).length-t;this.updateArrayLength(o,s);var u=this.spliceItemsIntoValues(e,t,n);return t===0&&n.length===0||this.notifyArraySplice(e,n,u),this.dehanceValues(u)},r.prototype.spliceItemsIntoValues=function(e,t,n){if(n.length<1e4)return(i=this.values).splice.apply(i,[e,t].concat(n));var i,o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},r.prototype.notifyArrayChildUpdate=function(e,t,n){var i=!this.owned&&An(),o=ca(this),a=o||i?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;i&&Ci(a),this.atom.reportChanged(),o&&fa(this,a),i&&Pi()},r.prototype.notifyArraySplice=function(e,t,n){var i=!this.owned&&An(),o=ca(this),a=o||i?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;i&&Ci(a),this.atom.reportChanged(),o&&fa(this,a),i&&Pi()},r})(),bo=(function(r){function e(t,n,i,o){i===void 0&&(i="ObservableArray@"+en()),o===void 0&&(o=!1);var a=r.call(this)||this,s=new lA(i,n,a,o);return Hc(a,"$mobx",s),t&&t.length&&a.spliceWithArray(0,0,t),EU&&Object.defineProperty(s.array,"0",OU),a}return kv(e,r),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,n){return n===void 0&&(n=!1),this.$mobx.observe(t,n)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map(function(i){return To(i)?i.peek():i}))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,n,i){i===void 0&&(i=0);var o=this.findIndex.apply(this,arguments);return o===-1?void 0:this.get(o)},e.prototype.findIndex=function(t,n,i){i===void 0&&(i=0);for(var o=this.peek(),a=o.length,s=i;s<a;s++)if(t.call(n,o[s],s,this))return s;return-1},e.prototype.splice=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,n)}return this.$mobx.spliceWithArray(t,n,i)},e.prototype.spliceWithArray=function(t,n,i){return this.$mobx.spliceWithArray(t,n,i)},e.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,t),i.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.$mobx;return i.spliceWithArray(0,0,t),i.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var n=this.slice();return n.sort.apply(n,arguments)},e.prototype.remove=function(t){var n=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},e.prototype.move=function(t,n){function i(s){if(s<0)throw new Error("[mobx.array] Index out of bounds: "+s+" is negative");var u=this.$mobx.values.length;if(s>=u)throw new Error("[mobx.array] Index out of bounds: "+s+" is not smaller than "+u)}if(i.call(this,t),i.call(this,n),t!==n){var o,a=this.$mobx.values;o=t<n?a.slice(0,t).concat(a.slice(t+1,n+1),[a[t]],a.slice(n+1)):a.slice(0,n).concat([a[t]],a.slice(n,t),a.slice(t+1)),this.replace(o)}},e.prototype.get=function(t){var n=this.$mobx;if(n){if(t<n.values.length)return n.atom.reportObserved(),n.dehanceValue(n.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+n.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,n){var i=this.$mobx,o=i.values;if(t<o.length){E_(i.atom);var a=o[t];if(xs(i)){var s=Ss(i,{type:"update",object:this,index:t,newValue:n});if(!s)return;n=s.newValue}(n=i.enhancer(n,a))!==a&&(o[t]=n,i.notifyArrayChildUpdate(t,n,a))}else{if(t!==o.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+o.length);i.spliceWithArray(t,0,[n])}},e})(V0);uA(bo.prototype,function(){return xd(this.slice())}),Object.defineProperty(bo.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(r){this.$mobx.setArrayLength(r)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(r){var e=Array.prototype[r];mt(typeof e=="function","Base function not defined on Array prototype: '"+r+"'"),Oa(bo.prototype,r,function(){return e.apply(this.peek(),arguments)})}),(function(r,e){for(var t=0;t<e.length;t++)Oa(r,e[t],r[e[t]])})(bo.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var OU=cA(0);function cA(r){return{enumerable:!1,configurable:!1,get:function(){return this.get(r)},set:function(e){this.set(r,e)}}}function xU(r){Object.defineProperty(bo.prototype,""+r,cA(r))}function p_(r){for(var e=z0;e<r;e++)xU(e);z0=r}p_(1e3);var SU=Ds("ObservableArrayAdministration",lA);function To(r){return __(r)&&SU(r.$mobx)}var Jl={},Ea=(function(r){function e(t,n,i,o){i===void 0&&(i="ObservableValue@"+en()),o===void 0&&(o=!0);var a=r.call(this,i)||this;return a.enhancer=n,a.hasUnreportedChange=!1,a.dehancer=void 0,a.value=n(t,void 0,i),o&&An()&&Ts({type:"create",object:a,newValue:a.value}),a}return kv(e,r),e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){var n=this.value;if((t=this.prepareNewValue(t))!==Jl){var i=An();i&&Ci({type:"update",object:this,newValue:t,oldValue:n}),this.setNewValue(t),i&&Pi()}},e.prototype.prepareNewValue=function(t){if(E_(this),xs(this)){var n=Ss(this,{object:this,type:"update",newValue:t});if(!n)return Jl;t=n.newValue}return t=this.enhancer(t,this.value,this.name),this.value!==t?t:Jl},e.prototype.setNewValue=function(t){var n=this.value;this.value=t,this.reportChanged(),ca(this)&&fa(this,{type:"update",object:this,newValue:t,oldValue:n})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return Iv(this,t)},e.prototype.observe=function(t,n){return n&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Dv(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return AA(this.get())},e})(hf);Ea.prototype[PA()]=Ea.prototype.valueOf;var g_=Ds("ObservableValue",Ea),TU={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:`* This computation is suspended (not in use by any reaction) and won't run automatically.
	Didn't expect this computation to be suspended at this point?
	  1. Make sure this computation is used by a reaction (reaction, autorun, observer).
	  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).`,m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:`Hi there! I'm sorry you have just run into an exception.
If your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)
threw an exception and that mobx caught it, to avoid that it brings the rest of your application down.
The original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.

However, more interesting is the actual stack trace of the error itself.
Hopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.
See \`error.stack\` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.
That stack is more interesting than the stack of this console.error itself.

If the exception you see is an exception you created yourself, make sure to use \`throw new Error("Oops")\` instead of \`throw "Oops"\`,
because the javascript environment will only preserve the original stack trace in the first form.

You can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".
(Note that it might pause on many other, unrelated exception as well).

If that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!
`,m038:`Missing items in this list?
    1. Check whether all used values are properly marked as observable (use isObservable to verify)
    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.
`};function kt(r){return TU[r]}function Gc(r,e){mt(typeof e=="function",kt("m026")),mt(typeof r=="string"&&r.length>0,"actions should have valid names, got: '"+r+"'");var t=function(){return y_(r,e,this,arguments)};return t.originalFn=e,t.isMobxAction=!0,t}function y_(r,e,t,n){var i=(function(o,a,s,u){var l=An()&&!!o,c=0;if(l){c=Date.now();var f=u&&u.length||0,h=new Array(f);if(f>0)for(var d=0;d<f;d++)h[d]=u[d];Ci({type:"action",name:o,fn:a,object:s,arguments:h})}var v=Ms();return ha(),{prevDerivation:v,prevAllowStateChanges:hA(!0),notifySpy:l,startTime:c}})(r,e,t,n);try{return e.apply(t,n)}finally{(function(o){dA(o.prevAllowStateChanges),da(),Oo(o.prevDerivation),o.notifySpy&&Pi({time:Date.now()-o.startTime})})(i)}}function fA(r){mt(rt.trackingDerivation===null,kt("m028")),rt.strictMode=r,rt.allowStateChanges=!r}function hA(r){var e=rt.allowStateChanges;return rt.allowStateChanges=r,e}function dA(r){rt.allowStateChanges=r}function Mv(r,e,t,n,i){function o(a,s,u,l,c){if(c===void 0&&(c=0),mt(i||PS(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),u){Lv(a,"__mobxLazyInitializers")||Oa(a,"__mobxLazyInitializers",a.__mobxLazyInitializers&&a.__mobxLazyInitializers.slice()||[]);var f=u.value,h=u.initializer;return a.__mobxLazyInitializers.push(function(v){r(v,s,h?h.call(v):f,l,u)}),{enumerable:n,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&qc(this),e.call(this,s)},set:function(v){this.__mobxDidRunLazyInitializers!==!0&&qc(this),t.call(this,s,v)}}}var d={enumerable:n,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[s]===!0||CS(this,s,void 0,r,l,u),e.call(this,s)},set:function(v){this.__mobxInitializedProps&&this.__mobxInitializedProps[s]===!0?t.call(this,s,v):CS(this,s,v,r,l,u)}};return(arguments.length<3||arguments.length===5&&c<3)&&Object.defineProperty(a,s,d),d}return i?function(){if(PS(arguments))return o.apply(null,arguments);var a=arguments,s=arguments.length;return function(u,l,c){return o(u,l,c,a,s)}}:o}function CS(r,e,t,n,i,o){Lv(r,"__mobxInitializedProps")||Oa(r,"__mobxInitializedProps",{}),r.__mobxInitializedProps[e]=!0,n(r,e,t,i,o)}function qc(r){r.__mobxDidRunLazyInitializers!==!0&&r.__mobxLazyInitializers&&(Oa(r,"__mobxDidRunLazyInitializers",!0),r.__mobxDidRunLazyInitializers&&r.__mobxLazyInitializers.forEach(function(e){return e(r)}))}function PS(r){return(r.length===2||r.length===3)&&typeof r[1]=="string"}var CU=Mv(function(r,e,t,n,i){var o=n&&n.length===1?n[0]:t.name||e||"<unnamed action>";Oa(r,e,rr(o,t))},function(r){return this[r]},function(){mt(!1,kt("m001"))},!1,!0),PU=Mv(function(r,e,t){vA(r,e,t)},function(r){return this[r]},function(){mt(!1,kt("m001"))},!1,!1),rr=function(r,e,t,n){return arguments.length===1&&typeof r=="function"?Gc(r.name||"<unnamed action>",r):arguments.length===2&&typeof e=="function"?Gc(r,e):arguments.length===1&&typeof r=="string"?AS(r):AS(e).apply(null,arguments)};function AS(r){return function(e,t,n){if(n&&typeof n.value=="function")return n.value=Gc(r,n.value),n.enumerable=!1,n.configurable=!0,n;if(n!==void 0&&n.get!==void 0)throw new Error("[mobx] action is not expected to be used with getters");return CU(r).apply(this,arguments)}}function $d(r){return typeof r=="function"&&r.isMobxAction===!0}function vA(r,e,t){var n=function(){return y_(e,t,r,arguments)};n.isMobxAction=!0,Oa(r,e,n)}rr.bound=function(r,e,t){if(typeof r=="function"){var n=Gc("<not yet bound action>",r);return n.autoBind=!0,n}return PU.apply(null,arguments)};var RS=Object.prototype.toString;function Nv(r,e){return G0(r,e)}function G0(r,e,t,n){if(r===e)return r!==0||1/r==1/e;if(r==null||e==null)return!1;if(r!=r)return e!=e;var i=typeof r;return(i==="function"||i==="object"||typeof e=="object")&&(function(o,a,s,u){o=kS(o),a=kS(a);var l=RS.call(o);if(l!==RS.call(a))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+o==""+a;case"[object Number]":return+o!=+o?+a!=+a:+o==0?1/+o==1/a:+o==+a;case"[object Date]":case"[object Boolean]":return+o==+a;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(o)===Symbol.valueOf.call(a)}var c=l==="[object Array]";if(!c){if(typeof o!="object"||typeof a!="object")return!1;var f=o.constructor,h=a.constructor;if(f!==h&&!(typeof f=="function"&&f instanceof f&&typeof h=="function"&&h instanceof h)&&"constructor"in o&&"constructor"in a)return!1}u=u||[];for(var d=(s=s||[]).length;d--;)if(s[d]===o)return u[d]===a;if(s.push(o),u.push(a),c){if((d=o.length)!==a.length)return!1;for(;d--;)if(!G0(o[d],a[d],s,u))return!1}else{var v,p=Object.keys(o);if(d=p.length,Object.keys(a).length!==d)return!1;for(;d--;)if(!AU(a,v=p[d])||!G0(o[v],a[v],s,u))return!1}return s.pop(),u.pop(),!0})(r,e,t,n)}function kS(r){return To(r)?r.peek():di(r)?r.entries():Bu(r)?(function(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t})(r.entries()):r}function AU(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function IS(r,e){return r===e}var Co={identity:IS,structural:function(r,e){return Nv(r,e)},default:function(r,e){return(function(t,n){return typeof t=="number"&&typeof n=="number"&&isNaN(t)&&isNaN(n)})(r,e)||IS(r,e)}};function Kd(r,e,t){var n,i,o;typeof r=="string"?(n=r,i=e,o=t):(n=r.name||"Autorun@"+en(),i=r,o=e),mt(typeof i=="function",kt("m004")),mt($d(i)===!1,kt("m005")),o&&(i=i.bind(o));var a=new Yc(n,function(){this.track(s)});function s(){i(a)}return a.schedule(),a.getDisposer()}function pA(r,e,t){var n;arguments.length>3&&tn(kt("m007")),Is(r)&&tn(kt("m008")),(n=typeof t=="object"?t:{}).name=n.name||r.name||e.name||"Reaction@"+en(),n.fireImmediately=t===!0||n.fireImmediately===!0,n.delay=n.delay||0,n.compareStructural=n.compareStructural||n.struct||!1,e=rr(n.name,n.context?e.bind(n.context):e),n.context&&(r=r.bind(n.context));var i,o=!0,a=!1,s=n.equals?n.equals:n.compareStructural||n.struct?Co.structural:Co.default,u=new Yc(n.name,function(){o||n.delay<1?l():a||(a=!0,setTimeout(function(){a=!1,l()},n.delay))});function l(){if(!u.isDisposed){var c=!1;u.track(function(){var f=r(u);c=o||!s(i,f),i=f}),o&&n.fireImmediately&&e(i,u),o||c!==!0||e(i,u),o&&(o=!1)}}return u.schedule(),u.getDisposer()}var Cs=(function(){function r(e,t,n,i,o){this.derivation=e,this.scope=t,this.equals=n,this.dependenciesState=zt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=zt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+en(),this.value=new Qd(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=xi.NONE,this.name=i||"ComputedValue@"+en(),o&&(this.setter=Gc(i+"-setter",o))}return r.prototype.onBecomeStale=function(){(function(e){if(e.lowestObserverState===zt.UP_TO_DATE){e.lowestObserverState=zt.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===zt.UP_TO_DATE&&(i.dependenciesState=zt.POSSIBLY_STALE,i.isTracing!==xi.NONE&&UA(i,e),i.onBecomeStale())}}})(this)},r.prototype.onBecomeUnobserved=function(){X0(this),this.value=void 0},r.prototype.get=function(){mt(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),rt.inBatch===0?(ha(),Y0(this)&&(this.isTracing!==xi.NONE&&""+this.name,this.value=this.computeValue(!1)),da()):(BA(this),Y0(this)&&this.trackAndCompute()&&(function(t){if(t.lowestObserverState!==zt.STALE){t.lowestObserverState=zt.STALE;for(var n=t.observers,i=n.length;i--;){var o=n[i];o.dependenciesState===zt.POSSIBLY_STALE?o.dependenciesState=zt.STALE:o.dependenciesState===zt.UP_TO_DATE&&(t.lowestObserverState=zt.UP_TO_DATE)}}})(this));var e=this.value;if(zl(e))throw e.cause;return e},r.prototype.peek=function(){var e=this.computeValue(!1);if(zl(e))throw e.cause;return e},r.prototype.set=function(e){if(this.setter){mt(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else mt(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},r.prototype.trackAndCompute=function(){An()&&Ts({object:this.scope,type:"compute",fn:this.derivation});var e=this.value,t=this.dependenciesState===zt.NOT_TRACKING,n=this.value=this.computeValue(!0);return t||zl(e)||zl(n)||!this.equals(e,n)},r.prototype.computeValue=function(e){var t;if(this.isComputing=!0,rt.computationDepth++,e)t=GA(this,this.derivation,this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new Qd(n)}return rt.computationDepth--,this.isComputing=!1,t},r.prototype.observe=function(e,t){var n=this,i=!0,o=void 0;return Kd(function(){var a=n.get();if(!i||t){var s=Ms();e({type:"update",object:n,newValue:a,oldValue:o}),Oo(s)}i=!1,o=a})},r.prototype.toJSON=function(){return this.get()},r.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},r.prototype.valueOf=function(){return AA(this.get())},r.prototype.whyRun=function(){var e=!!rt.trackingDerivation,t=Zd(this.isComputing?this.newObserving:this.observing).map(function(i){return i.name}),n=Zd(LA(this).map(function(i){return i.name}));return`
WhyRun? computation '`+this.name+`':
 * Running because: `+(e?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+`
`+(this.dependenciesState===zt.NOT_TRACKING?kt("m032"):` * This computation will re-run if any of the following observables changes:
    `+W0(t)+`
    `+(this.isComputing&&e?" (... or any observable accessed during the remainder of the current run)":"")+`
    `+kt("m038")+`

  * If the outcome of this computation changes, the following observers will be re-run:
    `+W0(n)+`
`)},r})();Cs.prototype[PA()]=Cs.prototype.valueOf;var Eo=Ds("ComputedValue",Cs),gA=(function(){function r(e,t){this.target=e,this.name=t,this.values={},this.changeListeners=null,this.interceptors=null}return r.prototype.observe=function(e,t){return mt(t!==!0,"`observe` doesn't support the fire immediately property for observable objects."),Dv(this,e)},r.prototype.intercept=function(e){return Iv(this,e)},r})();function Lu(r,e){if(Zi(r)&&r.hasOwnProperty("$mobx"))return r.$mobx;mt(Object.isExtensible(r),kt("m035")),Fu(r)||(e=(r.constructor.name||"ObservableObject")+"@"+en()),e||(e="ObservableObject@"+en());var t=new gA(r,e);return Hc(r,"$mobx",t),t}function RU(r,e,t,n){if(r.values[e]&&!Eo(r.values[e]))return mt("value"in t,"The property "+e+" in "+r.name+" is already observable, cannot redefine it as computed property"),void(r.target[e]=t.value);if("value"in t)if(Is(t.value)){var i=t.value;q0(r,e,i.initialValue,i.enhancer)}else $d(t.value)&&t.value.autoBind===!0?vA(r.target,e,t.value.originalFn):Eo(t.value)?(function(o,a,s){var u=o.name+"."+a;s.name=u,s.scope||(s.scope=o.target),o.values[a]=s,Object.defineProperty(o.target,a,mA(a))})(r,e,t.value):q0(r,e,t.value,n);else yA(r,e,t.get,t.set,Co.default,!0)}function q0(r,e,t,n){if(w_(r.target,e),xs(r)){var i=Ss(r,{object:r.target,name:e,type:"add",newValue:t});if(!i)return;t=i.newValue}t=(r.values[e]=new Ea(t,n,r.name+"."+e,!1)).value,Object.defineProperty(r.target,e,(function(o){return DS[o]||(DS[o]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[o].get()},set:function(a){bA(this,o,a)}})})(e)),(function(o,a,s,u){var l=ca(o),c=An(),f=l||c?{type:"add",object:a,name:s,newValue:u}:null;c&&Ci(f),l&&fa(o,f),c&&Pi()})(r,r.target,e,t)}function yA(r,e,t,n,i,o){o&&w_(r.target,e),r.values[e]=new Cs(t,r.target,i,r.name+"."+e,n),o&&Object.defineProperty(r.target,e,mA(e))}var DS={},MS={};function mA(r){return MS[r]||(MS[r]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[r].get()},set:function(e){return this.$mobx.values[r].set(e)}})}function bA(r,e,t){var n=r.$mobx,i=n.values[e];if(xs(n)){if(!(s=Ss(n,{type:"update",object:r,name:e,newValue:t})))return;t=s.newValue}if((t=i.prepareNewValue(t))!==Jl){var o=ca(n),a=An(),s=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:t}:null;a&&Ci(s),i.setNewValue(t),o&&fa(n,s),a&&Pi()}}var kU=Ds("ObservableObjectAdministration",gA);function Zi(r){return!!__(r)&&(qc(r),kU(r.$mobx))}function Yu(r,e){if(r==null)return!1;if(e!==void 0){if(To(r)||di(r))throw new Error(kt("m019"));if(Zi(r)){var t=r.$mobx;return t.values&&!!t.values[e]}return!1}return Zi(r)||!!r.$mobx||v_(r)||Uu(r)||Eo(r)}function df(r){return mt(!!r,":("),Mv(function(e,t,n,i,o){w_(e,t),mt(!o||!o.get,kt("m022")),q0(Lu(e,void 0),t,n,r)},function(e){var t=this.$mobx.values[e];if(t!==void 0)return t.get()},function(e,t){bA(this,e,t)},!0,!1)}function _A(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return m_(r,na,e)}function wA(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return m_(r,ia,e)}function m_(r,e,t){mt(arguments.length>=2,kt("m014")),mt(typeof r=="object",kt("m015")),mt(!di(r),kt("m016")),t.forEach(function(u){mt(typeof u=="object",kt("m017")),mt(!Yu(u),kt("m018"))});for(var n=Lu(r),i={},o=t.length-1;o>=0;o--){var a=t[o];for(var s in a)if(i[s]!==!0&&Lv(a,s)){if(i[s]=!0,r===a&&!CA(r,s))continue;RU(n,s,Object.getOwnPropertyDescriptor(a,s),e)}}return r}var EA=df(na),IU=df(OA),DU=df(ia),MU=df(ec),NU=df(xA),NS={box:function(r,e){return arguments.length>2&&Wo("box"),new Ea(r,na,e)},shallowBox:function(r,e){return arguments.length>2&&Wo("shallowBox"),new Ea(r,ia,e)},array:function(r,e){return arguments.length>2&&Wo("array"),new bo(r,na,e)},shallowArray:function(r,e){return arguments.length>2&&Wo("shallowArray"),new bo(r,ia,e)},map:function(r,e){return arguments.length>2&&Wo("map"),new ju(r,na,e)},shallowMap:function(r,e){return arguments.length>2&&Wo("shallowMap"),new ju(r,ia,e)},object:function(r,e){arguments.length>2&&Wo("object");var t={};return Lu(t,e),_A(t,r),t},shallowObject:function(r,e){arguments.length>2&&Wo("shallowObject");var t={};return Lu(t,e),wA(t,r),t},ref:function(){return arguments.length<2?Ul(ia,arguments[0]):DU.apply(null,arguments)},shallow:function(){return arguments.length<2?Ul(OA,arguments[0]):IU.apply(null,arguments)},deep:function(){return arguments.length<2?Ul(na,arguments[0]):EA.apply(null,arguments)},struct:function(){return arguments.length<2?Ul(ec,arguments[0]):MU.apply(null,arguments)}},pr=function(r){if(r===void 0&&(r=void 0),typeof arguments[1]=="string")return EA.apply(null,arguments);if(mt(arguments.length<=1,kt("m021")),mt(!Is(r),kt("m020")),Yu(r))return r;var e=na(r,0,void 0);return e!==r?e:pr.box(r)};function Wo(r){tn("Expected one or two arguments to observable."+r+". Did you accidentally try to use observable."+r+" as decorator?")}function Is(r){return typeof r=="object"&&r!==null&&r.isMobxModifierDescriptor===!0}function Ul(r,e){return mt(!Is(e),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:e,enhancer:r}}function na(r,e,t){return Is(r)&&tn("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),Yu(r)?r:Array.isArray(r)?pr.array(r,t):Fu(r)?pr.object(r,t):Bu(r)?pr.map(r,t):r}function OA(r,e,t){return Is(r)&&tn("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),r==null||Zi(r)||To(r)||di(r)?r:Array.isArray(r)?pr.shallowArray(r,t):Fu(r)?pr.shallowObject(r,t):Bu(r)?pr.shallowMap(r,t):tn("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function ia(r){return r}function ec(r,e,t){if(Nv(r,e))return e;if(Yu(r))return r;if(Array.isArray(r))return new bo(r,ec,t);if(Bu(r))return new ju(r,ec,t);if(Fu(r)){var n={};return Lu(n,t),m_(n,ec,[r]),n}return r}function xA(r,e,t){return Nv(r,e)?e:r}function pu(r,e){e===void 0&&(e=void 0),ha();try{return r.apply(e)}finally{da()}}Object.keys(NS).forEach(function(r){return pr[r]=NS[r]}),pr.deep.struct=pr.struct,pr.ref.struct=function(){return arguments.length<2?Ul(xA,arguments[0]):NU.apply(null,arguments)};var LU={},ju=(function(){function r(e,t,n){t===void 0&&(t=na),n===void 0&&(n="ObservableMap@"+en()),this.enhancer=t,this.name=n,this.$mobx=LU,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new bo(void 0,ia,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(e)}return r.prototype._has=function(e){return this._data[e]!==void 0},r.prototype.has=function(e){return!!this.isValidKey(e)&&(e=""+e,this._hasMap[e]?this._hasMap[e].get():this._updateHasMapEntry(e,!1).get())},r.prototype.set=function(e,t){this.assertValidKey(e),e=""+e;var n=this._has(e);if(xs(this)){var i=Ss(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},r.prototype.delete=function(e){var t=this;if(this.assertValidKey(e),e=""+e,xs(this)&&!(o=Ss(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=An(),i=ca(this),o=i||n?{type:"delete",object:this,oldValue:this._data[e].value,name:e}:null;return n&&Ci(o),pu(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data[e].setNewValue(void 0),t._data[e]=void 0}),i&&fa(this,o),n&&Pi(),!0}return!1},r.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap[e];return n?n.setNewValue(t):n=this._hasMap[e]=new Ea(t,ia,this.name+"."+e+"?",!1),n},r.prototype._updateValue=function(e,t){var n=this._data[e];if((t=n.prepareNewValue(t))!==Jl){var i=An(),o=ca(this),a=o||i?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;i&&Ci(a),n.setNewValue(t),o&&fa(this,a),i&&Pi()}},r.prototype._addValue=function(e,t){var n=this;pu(function(){var s=n._data[e]=new Ea(t,n.enhancer,n.name+"."+e,!1);t=s.value,n._updateHasMapEntry(e,!0),n._keys.push(e)});var i=An(),o=ca(this),a=o||i?{type:"add",object:this,name:e,newValue:t}:null;i&&Ci(a),o&&fa(this,a),i&&Pi()},r.prototype.get=function(e){return e=""+e,this.has(e)?this.dehanceValue(this._data[e].get()):this.dehanceValue(void 0)},r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.keys=function(){return xd(this._keys.slice())},r.prototype.values=function(){return xd(this._keys.map(this.get,this))},r.prototype.entries=function(){var e=this;return xd(this._keys.map(function(t){return[t,e.get(t)]}))},r.prototype.forEach=function(e,t){var n=this;this.keys().forEach(function(i){return e.call(t,n.get(i),i,n)})},r.prototype.merge=function(e){var t=this;return di(e)&&(e=e.toJS()),pu(function(){Fu(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(n){var i=n[0],o=n[1];return t.set(i,o)}):Bu(e)?e.forEach(function(n,i){return t.set(i,n)}):e!=null&&tn("Cannot initialize map from "+e)}),this},r.prototype.clear=function(){var e=this;pu(function(){qA(function(){e.keys().forEach(e.delete,e)})})},r.prototype.replace=function(e){var t=this;return pu(function(){var n,i=Fu(n=e)?Object.keys(n):Array.isArray(n)?n.map(function(o){return o[0]}):Bu(n)?Array.from(n.keys()):di(n)?n.keys():tn("Cannot get keys from "+n);t.keys().filter(function(o){return i.indexOf(o)===-1}).forEach(function(o){return t.delete(o)}),t.merge(e)}),this},Object.defineProperty(r.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),r.prototype.toJS=function(){var e=this,t={};return this.keys().forEach(function(n){return t[n]=e.get(n)}),t},r.prototype.toJSON=function(){return this.toJS()},r.prototype.isValidKey=function(e){return e!=null&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")},r.prototype.assertValidKey=function(e){if(!this.isValidKey(e))throw new Error("[mobx.map] Invalid key: '"+e+"', only strings, numbers and booleans are accepted as key in observable maps.")},r.prototype.toString=function(){var e=this;return this.name+"[{ "+this.keys().map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},r.prototype.observe=function(e,t){return mt(t!==!0,kt("m033")),Dv(this,e)},r.prototype.intercept=function(e){return Iv(this,e)},r})();uA(ju.prototype,function(){return this.entries()});var di=Ds("ObservableMap",ju),SA=[];function Wc(){return typeof window<"u"?window:_r.g}function en(){return++rt.mobxGuid}function tn(r,e){throw mt(!1,r,e),"X"}function mt(r,e,t){if(!r)throw new Error("[mobx] Invariant failed: "+e+(t?" in '"+t+"'":""))}Object.freeze(SA);var LS=[];function ss(r){return LS.indexOf(r)===-1&&(LS.push(r),console.error("[mobx] Deprecated: "+r),!0)}function b_(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var jS=function(){};function Zd(r){var e=[];return r.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function W0(r,e,t){return e===void 0&&(e=100),t===void 0&&(t=" - "),r?r.slice(0,e).join(t)+(r.length>e?" (... and "+(r.length-e)+"more)":""):""}function __(r){return r!==null&&typeof r=="object"}function Fu(r){if(r===null||typeof r!="object")return!1;var e=Object.getPrototypeOf(r);return e===Object.prototype||e===null}function TA(){for(var r=arguments[0],e=1,t=arguments.length;e<t;e++){var n=arguments[e];for(var i in n)Lv(n,i)&&(r[i]=n[i])}return r}var jU=Object.prototype.hasOwnProperty;function Lv(r,e){return jU.call(r,e)}function Oa(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function Hc(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function CA(r,e){var t=Object.getOwnPropertyDescriptor(r,e);return!t||t.configurable!==!1&&t.writable!==!1}function w_(r,e){mt(CA(r,e),"Cannot make property '"+e+"' observable, it is not configurable and writable in the target object")}function Ds(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return __(n)&&n[t]===!0}}function Bu(r){return Wc().Map!==void 0&&r instanceof Wc().Map}function PA(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function AA(r){return r===null?null:typeof r=="object"?""+r:r}var zt,xi,FU=["mobxGuid","resetId","spyListeners","strictMode","runId"],RA=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]},rt=new RA,kA=!1,IA=!1,FS=!1,Dm=Wc();function Qi(r,e){if(typeof r=="object"&&r!==null){if(To(r))return mt(e===void 0,kt("m036")),r.$mobx.atom;if(di(r)){var t=r;return e===void 0?Qi(t._keys):(mt(!!(n=t._data[e]||t._hasMap[e]),"the entry '"+e+"' does not exist in the observable map '"+H0(r)+"'"),n)}var n;if(qc(r),e&&!r.$mobx&&r[e],Zi(r))return e?(mt(!!(n=r.$mobx.values[e]),"no observable property '"+e+"' found on the observable object '"+H0(r)+"'"),n):tn("please specify a property");if(v_(r)||Eo(r)||Uu(r))return r}else if(typeof r=="function"&&Uu(r.$mobx))return r.$mobx;return tn("Cannot obtain atom from "+r)}function _o(r,e){return mt(r,"Expecting some object"),e!==void 0?_o(Qi(r,e)):v_(r)||Eo(r)||Uu(r)||di(r)?r:(qc(r),r.$mobx?r.$mobx:void mt(!1,"Cannot obtain administration from "+r))}function H0(r,e){return(e!==void 0?Qi(r,e):Zi(r)||di(r)?_o(r):Qi(r)).name}function DA(r,e){return MA(Qi(r,e))}function MA(r){var e={name:r.name};return r.observing&&r.observing.length>0&&(e.dependencies=Zd(r.observing).map(MA)),e}function NA(r){var e={name:r.name};return(function(t){return t.observers&&t.observers.length>0})(r)&&(e.observers=LA(r).map(NA)),e}function LA(r){return r.observers}function BU(r,e){var t=r.observers.length;t&&(r.observersIndexes[e.__mapid]=t),r.observers[t]=e,r.lowestObserverState>e.dependenciesState&&(r.lowestObserverState=e.dependenciesState)}function jA(r,e){if(r.observers.length===1)r.observers.length=0,FA(r);else{var t=r.observers,n=r.observersIndexes,i=t.pop();if(i!==e){var o=n[e.__mapid]||0;o?n[i.__mapid]=o:delete n[i.__mapid],t[o]=i}delete n[e.__mapid]}}function FA(r){r.isPendingUnobservation||(r.isPendingUnobservation=!0,rt.pendingUnobservations.push(r))}function ha(){rt.inBatch++}function da(){if(--rt.inBatch===0){YA();for(var r=rt.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation=!1,t.observers.length===0&&t.onBecomeUnobserved()}rt.pendingUnobservations=[]}}function BA(r){var e=rt.trackingDerivation;e!==null?e.runId!==r.lastAccessedBy&&(r.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=r):r.observers.length===0&&FA(r)}function UA(r,e){if(""+r.name+e.name,r.isTracing===xi.BREAK){var t=[];zA(DA(r),t,1),new Function(`debugger;
/*
Tracing '`+r.name+`'

You are entering this break point because derivation '`+r.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(r instanceof Cs?r.derivation.toString():"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function zA(r,e,t){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(t).join("	")+r.name),r.dependencies&&r.dependencies.forEach(function(n){return zA(n,e,t+1)}))}Dm.__mobxInstanceCount?(Dm.__mobxInstanceCount++,setTimeout(function(){kA||IA||FS||(FS=!0,console.warn("[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details."))},1)):Dm.__mobxInstanceCount=1,(function(r){r[r.NOT_TRACKING=-1]="NOT_TRACKING",r[r.UP_TO_DATE=0]="UP_TO_DATE",r[r.POSSIBLY_STALE=1]="POSSIBLY_STALE",r[r.STALE=2]="STALE"})(zt||(zt={})),(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(xi||(xi={}));var Qd=function(r){this.cause=r};function zl(r){return r instanceof Qd}function Y0(r){switch(r.dependenciesState){case zt.UP_TO_DATE:return!1;case zt.NOT_TRACKING:case zt.STALE:return!0;case zt.POSSIBLY_STALE:for(var e=Ms(),t=r.observing,n=t.length,i=0;i<n;i++){var o=t[i];if(Eo(o)){try{o.get()}catch{return Oo(e),!0}if(r.dependenciesState===zt.STALE)return Oo(e),!0}}return WA(r),Oo(e),!1}}function VA(){return rt.trackingDerivation!==null}function E_(r){var e=r.observers.length>0;rt.computationDepth>0&&e&&tn(kt("m031")+r.name),!rt.allowStateChanges&&e&&tn(kt(rt.strictMode?"m030a":"m030b")+r.name)}function GA(r,e,t){WA(r),r.newObserving=new Array(r.observing.length+100),r.unboundDepsCount=0,r.runId=++rt.runId;var n,i=rt.trackingDerivation;rt.trackingDerivation=r;try{n=e.call(t)}catch(o){n=new Qd(o)}return rt.trackingDerivation=i,(function(o){for(var a=o.observing,s=o.observing=o.newObserving,u=zt.UP_TO_DATE,l=0,c=o.unboundDepsCount,f=0;f<c;f++)(h=s[f]).diffValue===0&&(h.diffValue=1,l!==f&&(s[l]=h),l++),h.dependenciesState>u&&(u=h.dependenciesState);for(s.length=l,o.newObserving=null,c=a.length;c--;)(h=a[c]).diffValue===0&&jA(h,o),h.diffValue=0;for(;l--;){var h;(h=s[l]).diffValue===1&&(h.diffValue=0,BU(h,o))}u!==zt.UP_TO_DATE&&(o.dependenciesState=u,o.onBecomeStale())})(r),n}function X0(r){var e=r.observing;r.observing=[];for(var t=e.length;t--;)jA(e[t],r);r.dependenciesState=zt.NOT_TRACKING}function qA(r){var e=Ms(),t=r();return Oo(e),t}function Ms(){var r=rt.trackingDerivation;return rt.trackingDerivation=null,r}function Oo(r){rt.trackingDerivation=r}function WA(r){if(r.dependenciesState!==zt.UP_TO_DATE){r.dependenciesState=zt.UP_TO_DATE;for(var e=r.observing,t=e.length;t--;)e[t].lowestObserverState=zt.UP_TO_DATE}}function HA(r){switch(r.length){case 0:return rt.trackingDerivation;case 1:return Qi(r[0]);case 2:return Qi(r[0],r[1])}}var Yc=(function(){function r(e,t){e===void 0&&(e="Reaction@"+en()),this.name=e,this.onInvalidate=t,this.observing=[],this.newObserving=[],this.dependenciesState=zt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+en(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=xi.NONE}return r.prototype.onBecomeStale=function(){this.schedule()},r.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,rt.pendingReactions.push(this),YA())},r.prototype.isScheduled=function(){return this._isScheduled},r.prototype.runReaction=function(){this.isDisposed||(ha(),this._isScheduled=!1,Y0(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&An()&&Ts({object:this,type:"scheduled-reaction"})),da())},r.prototype.track=function(e){ha();var t,n=An();n&&(t=Date.now(),Ci({object:this,type:"reaction",fn:e})),this._isRunning=!0;var i=GA(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&X0(this),zl(i)&&this.reportExceptionInDerivation(i.cause),n&&Pi({time:Date.now()-t}),da()},r.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,i=kt("m037");console.error(n||i,e),An()&&Ts({type:"error",message:n,error:e,object:this}),rt.globalReactionErrorHandlers.forEach(function(o){return o(e,t)})}},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(ha(),X0(this),da()))},r.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e.onError=UU,e},r.prototype.toString=function(){return"Reaction["+this.name+"]"},r.prototype.whyRun=function(){var e=Zd(this._isRunning?this.newObserving:this.observing).map(function(t){return t.name});return`
WhyRun? reaction '`+this.name+`':
 * Status: [`+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+`]
 * This reaction will re-run if any of the following observables changes:
    `+W0(e)+`
    `+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+`
	`+kt("m038")+`
`},r.prototype.trace=function(e){e===void 0&&(e=!1),(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=!1;typeof t[t.length-1]=="boolean"&&(i=t.pop());var o=HA(t);if(!o)return tn("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");o.isTracing===xi.NONE&&""+o.name,o.isTracing=i?xi.BREAK:xi.LOG})(this,e)},r})();function UU(r){mt(this&&this.$mobx&&Uu(this.$mobx),"Invalid `this`"),mt(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=r}var BS=100,$0=function(r){return r()};function YA(){rt.inBatch>0||rt.isRunningReactions||$0(zU)}function zU(){rt.isRunningReactions=!0;for(var r=rt.pendingReactions,e=0;r.length>0;){++e===BS&&(console.error("Reaction doesn't converge to a stable state after "+BS+" iterations. Probably there is a cycle in the reactive function: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction()}rt.isRunningReactions=!1}var Uu=Ds("Reaction",Yc);function O_(r){return Mv(function(e,t,n,i,o){mt(o!==void 0,kt("m009")),mt(typeof o.get=="function",kt("m010")),yA(Lu(e,""),t,o.get,o.set,r,!1)},function(e){var t=this.$mobx.values[e];if(t!==void 0)return t.get()},function(e,t){this.$mobx.values[e].set(t)},!1,!1)}var VU=O_(Co.default),GU=O_(Co.structural),Jd=function(r,e,t){if(typeof e=="string")return VU.apply(null,arguments);mt(typeof r=="function",kt("m011")),mt(arguments.length<3,kt("m012"));var n=typeof e=="object"?e:{};n.setter=typeof e=="function"?e:n.setter;var i=n.equals?n.equals:n.compareStructural||n.struct?Co.structural:Co.default;return new Cs(r,n.context,i,n.name||r.name||"",n.setter)};function Pn(r,e,t){function n(c){return e&&t.push([r,c]),c}if(e===void 0&&(e=!0),t===void 0&&(t=[]),Yu(r)){if(e&&t===null&&(t=[]),e&&r!==null&&typeof r=="object"){for(var i=0,o=t.length;i<o;i++)if(t[i][0]===r)return t[i][1]}if(To(r)){var a=n([]),s=r.map(function(c){return Pn(c,e,t)});for(a.length=s.length,i=0,o=s.length;i<o;i++)a[i]=s[i];return a}if(Zi(r)){for(var u in a=n({}),r)a[u]=Pn(r[u],e,t);return a}if(di(r)){var l=n({});return r.forEach(function(c,f){return l[f]=Pn(c,e,t)}),l}if(g_(r))return Pn(r.get(),e,t)}return r}Jd.struct=GU,Jd.equals=O_;var x_={allowStateChanges:function(r,e){var t,n=hA(r);try{t=e()}finally{dA(n)}return t},deepEqual:Nv,getAtom:Qi,getDebugName:H0,getDependencyTree:DA,getAdministration:_o,getGlobalState:function(){return rt},getObserverTree:function(r,e){return NA(Qi(r,e))},interceptReads:function(r,e,t){var n;if(di(r)||To(r)||g_(r))n=_o(r);else{if(!Zi(r))return tn("Expected observable map, object or array as first array");if(typeof e!="string")return tn("InterceptReads can only be used with a specific property, not with an object in general");n=_o(r,e)}return n.dehancer!==void 0?tn("An intercept reader was already established"):(n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0})},isComputingDerivation:VA,isSpyEnabled:An,onReactionError:function(r){return rt.globalReactionErrorHandlers.push(r),function(){var e=rt.globalReactionErrorHandlers.indexOf(r);e>=0&&rt.globalReactionErrorHandlers.splice(e,1)}},reserveArrayBuffer:p_,resetGlobalState:function(){rt.resetId++;var r=new RA;for(var e in r)FU.indexOf(e)===-1&&(rt[e]=r[e]);rt.allowStateChanges=!rt.strictMode},isolateGlobalState:function(){IA=!0,Wc().__mobxInstanceCount--},shareGlobalState:function(){ss("Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details."),kA=!0;var r=Wc(),e=rt;if(r.__mobservableTrackingStack||r.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(r.__mobxGlobal&&r.__mobxGlobal.version!==e.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");r.__mobxGlobal?rt=r.__mobxGlobal:r.__mobxGlobal=e},spyReport:Ts,spyReportEnd:Pi,spyReportStart:Ci,setReactionScheduler:function(r){var e=$0;$0=function(t){return r(function(){return e(t)})}}},K0={Reaction:Yc,untracked:qA,Atom:wU,BaseAtom:hf,useStrict:fA,isStrictModeEnabled:function(){return rt.strictMode},spy:sA,comparer:Co,asReference:function(r){return ss("asReference is deprecated, use observable.ref instead"),pr.ref(r)},asFlat:function(r){return ss("asFlat is deprecated, use observable.shallow instead"),pr.shallow(r)},asStructure:function(r){return ss("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),pr.struct(r)},asMap:function(r){return ss("asMap is deprecated, use observable.map or observable.shallowMap instead"),pr.map(r||{})},isModifierDescriptor:Is,isObservableObject:Zi,isBoxedObservable:g_,isObservableArray:To,ObservableMap:ju,isObservableMap:di,map:function(r){return ss("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),pr.map(r)},transaction:pu,observable:pr,computed:Jd,isObservable:Yu,isComputed:function(r,e){if(r==null)return!1;if(e!==void 0){if(Zi(r)===!1||!r.$mobx.values[e])return!1;var t=Qi(r,e);return Eo(t)}return Eo(r)},extendObservable:_A,extendShallowObservable:wA,observe:function(r,e,t,n){return typeof t=="function"?(function(i,o,a,s){return _o(i,o).observe(a,s)})(r,e,t,n):(function(i,o,a){return _o(i).observe(o,a)})(r,e,t)},intercept:function(r,e,t){return typeof t=="function"?(function(n,i,o){return _o(n,i).intercept(o)})(r,e,t):(function(n,i){return _o(n).intercept(i)})(r,e)},autorun:Kd,autorunAsync:function(r,e,t,n){var i,o,a,s;typeof r=="string"?(i=r,o=e,a=t,s=n):(i=r.name||"AutorunAsync@"+en(),o=r,a=e,s=t),mt($d(o)===!1,kt("m006")),a===void 0&&(a=1),s&&(o=o.bind(s));var u=!1,l=new Yc(i,function(){u||(u=!0,setTimeout(function(){u=!1,l.isDisposed||l.track(c)},a))});function c(){o(l)}return l.schedule(),l.getDisposer()},when:function(r,e,t,n){var i,o,a,s;return typeof r=="string"?(i=r,o=e,a=t,s=n):(i="When@"+en(),o=r,a=e,s=t),Kd(i,function(u){if(o.call(s)){u.dispose();var l=Ms();a.call(s),Oo(l)}})},reaction:pA,action:rr,isAction:$d,runInAction:function(r,e,t){var n=typeof r=="string"?r:r.name||"<unnamed action>",i=typeof r=="function"?r:e,o=typeof r=="function"?e:t;return mt(typeof i=="function",kt("m002")),mt(i.length===0,kt("m003")),mt(typeof n=="string"&&n.length>0,"actions should have valid names, got: '"+n+"'"),y_(n,i,o,void 0)},expr:function(r,e){return VA()||console.warn(kt("m013")),Jd(r,{context:e}).get()},toJS:Pn,createTransformer:function(r,e){mt(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=rt.resetId,i=(function(o){function a(s,u){var l=o.call(this,function(){return r(u)},void 0,Co.default,"Transformer-"+r.name+"-"+s,void 0)||this;return l.sourceIdentifier=s,l.sourceObject=u,l}return kv(a,o),a.prototype.onBecomeUnobserved=function(){var s=this.value;o.prototype.onBecomeUnobserved.call(this),delete t[this.sourceIdentifier],e&&e(s,this.sourceObject)},a})(Cs);return function(o){n!==rt.resetId&&(t={},n=rt.resetId);var a=(function(u){if(typeof u=="string"||typeof u=="number")return u;if(u===null||typeof u!="object")throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+u);var l=u.$transformId;return l===void 0&&Oa(u,"$transformId",l=en()),l})(o),s=t[a];return s?s.get():(s=t[a]=new i(a,o)).get()}},whyRun:function(r,e){return ss("`whyRun` is deprecated in favor of `trace`"),(r=HA(arguments))?Eo(r)||Uu(r)?r.whyRun():tn(kt("m025")):kt("m024")},isArrayLike:function(r){return Array.isArray(r)||To(r)},extras:x_},US=!1,qU=function(r){var e=K0[r];Object.defineProperty(K0,r,{get:function(){return US||(US=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and wont work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),e}})};for(var WU in K0)qU(WU);function tc(r){return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(r)}function HU(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,XA(n.key),n)}}function XA(r){var e=(function(t){if(tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(tc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return tc(e)=="symbol"?e:e+""}typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:sA,extras:x_});var YU=["onLayoutDone","onLayoutStep","onError","onInitialization","onLayoutComputing","onWebGLContextLost","onZoomTransitionDone","restart"],XU=(function(){return r=function t(){var n,i,o,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,o=void 0,(i=XA(i="callbacks"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.callbacks=a},e=[{key:"onInitialization",value:function(){this.isValidFunction(this.callbacks.onInitialization)&&this.callbacks.onInitialization()}},{key:"onZoomTransitionDone",value:function(){this.isValidFunction(this.callbacks.onZoomTransitionDone)&&this.callbacks.onZoomTransitionDone()}},{key:"onLayoutDone",value:function(){this.isValidFunction(this.callbacks.onLayoutDone)&&this.callbacks.onLayoutDone()}},{key:"onLayoutStep",value:function(t){this.isValidFunction(this.callbacks.onLayoutStep)&&this.callbacks.onLayoutStep(t)}},{key:"onLayoutComputing",value:function(t){this.isValidFunction(this.callbacks.onLayoutComputing)&&this.callbacks.onLayoutComputing(t)}},{key:"onError",value:function(t){this.isValidFunction(this.callbacks.onError)&&this.callbacks.onError(t)}},{key:"onWebGLContextLost",value:function(t){this.isValidFunction(this.callbacks.onWebGLContextLost)&&this.callbacks.onWebGLContextLost(t)}},{key:"isValidFunction",value:function(t){return t!==void 0&&typeof t=="function"}}],e&&HU(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),$U=_r(1803),zS=_r.n($U),KU={value:()=>{}};function $A(){for(var r,e=0,t=arguments.length,n={};e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Sd(n)}function Sd(r){this._=r}function ZU(r,e){for(var t,n=0,i=r.length;n<i;++n)if((t=r[n]).name===e)return t.value}function VS(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=KU,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}Sd.prototype=$A.prototype={constructor:Sd,on:function(r,e){var t,n,i=this._,o=(n=i,(r+"").trim().split(/^|\s+/).map(function(u){var l="",c=u.indexOf(".");if(c>=0&&(l=u.slice(c+1),u=u.slice(0,c)),u&&!n.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:l}})),a=-1,s=o.length;if(!(arguments.length<2)){if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(t=(r=o[a]).type)i[t]=VS(i[t],r.name,e);else if(e==null)for(t in i)i[t]=VS(i[t],r.name,null);return this}for(;++a<s;)if((t=(r=o[a]).type)&&(t=ZU(i[t],r.name)))return t},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new Sd(r)},call:function(r,e){if((t=arguments.length-2)>0)for(var t,n,i=new Array(t),o=0;o<t;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=0,t=(n=this._[r]).length;o<t;++o)n[o].value.apply(e,i)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,o=n.length;i<o;++i)n[i].value.apply(e,t)}};const QU=$A;var Td,Vl,_u=0,Gl=0,Al=0,ev=0,gs=0,jv=0,Xc=typeof performance=="object"&&performance.now?performance:Date,KA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function ZA(){return gs||(KA(JU),gs=Xc.now()+jv)}function JU(){gs=0}function Z0(){this._call=this._time=this._next=null}function QA(r,e,t){var n=new Z0;return n.restart(r,e,t),n}function GS(){gs=(ev=Xc.now())+jv,_u=Gl=0;try{(function(){ZA(),++_u;for(var r,e=Td;e;)(r=gs-e._time)>=0&&e._call.call(void 0,r),e=e._next;--_u})()}finally{_u=0,(function(){for(var r,e,t=Td,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:Td=e);Vl=r,Q0(n)})(),gs=0}}function e6(){var r=Xc.now(),e=r-ev;e>1e3&&(jv-=e,ev=r)}function Q0(r){_u||(Gl&&(Gl=clearTimeout(Gl)),r-gs>24?(r<1/0&&(Gl=setTimeout(GS,r-Xc.now()-jv)),Al&&(Al=clearInterval(Al))):(Al||(ev=Xc.now(),Al=setInterval(e6,1e3)),_u=1,KA(GS)))}Z0.prototype=QA.prototype={constructor:Z0,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?ZA():+t)+(e==null?0:+e),this._next||Vl===this||(Vl?Vl._next=this:Td=this,Vl=this),this._call=r,this._time=t,Q0()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q0())}};const qS=4294967296;function t6(r){return r.x}function r6(r){return r.y}var n6=Math.PI*(3-Math.sqrt(5));function WS(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,o,a,s,u,l,c,f,h,d=r._root,v={data:n},p=r._x0,m=r._y0,y=r._x1,b=r._y1;if(!d)return r._root=v,r;for(;d.length;)if((l=e>=(o=(p+y)/2))?p=o:y=o,(c=t>=(a=(m+b)/2))?m=a:b=a,i=d,!(d=d[f=c<<1|l]))return i[f]=v,r;if(s=+r._x.call(null,d.data),u=+r._y.call(null,d.data),e===s&&t===u)return v.next=d,i?i[f]=v:r._root=v,r;do i=i?i[f]=new Array(4):r._root=new Array(4),(l=e>=(o=(p+y)/2))?p=o:y=o,(c=t>=(a=(m+b)/2))?m=a:b=a;while((f=c<<1|l)==(h=(u>=a)<<1|s>=o));return i[h]=d,i[f]=v,r}function _n(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function i6(r){return r[0]}function o6(r){return r[1]}function S_(r,e,t){var n=new T_(e??i6,t??o6,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function T_(r,e,t,n,i,o){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function HS(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var wn=S_.prototype=T_.prototype;function Sn(r){return function(){return r}}function oa(r){return 1e-6*(r()-.5)}function Mm(){var r,e,t,n,i,o=Sn(-30),a=1,s=1/0,u=.81;function l(d){var v,p=r.length,m=S_(r,t6,r6).visitAfter(f);for(n=d,v=0;v<p;++v)e=r[v],m.visit(h)}function c(){if(r){var d,v,p=r.length;for(i=new Array(p),d=0;d<p;++d)v=r[d],i[v.index]=+o(v,d,r)}}function f(d){var v,p,m,y,b,g=0,_=0;if(d.length){for(m=y=b=0;b<4;++b)(v=d[b])&&(p=Math.abs(v.value))&&(g+=v.value,_+=p,m+=p*v.x,y+=p*v.y);d.x=m/_,d.y=y/_}else{(v=d).x=v.data.x,v.y=v.data.y;do g+=i[v.data.index];while(v=v.next)}d.value=g}function h(d,v,p,m){if(!d.value)return!0;var y=d.x-e.x,b=d.y-e.y,g=m-v,_=y*y+b*b;if(g*g/u<_)return _<s&&(y===0&&(_+=(y=oa(t))*y),b===0&&(_+=(b=oa(t))*b),_<a&&(_=Math.sqrt(a*_)),e.vx+=y*d.value*n/_,e.vy+=b*d.value*n/_),!0;if(!(d.length||_>=s)){(d.data!==e||d.next)&&(y===0&&(_+=(y=oa(t))*y),b===0&&(_+=(b=oa(t))*b),_<a&&(_=Math.sqrt(a*_)));do d.data!==e&&(g=i[d.data.index]*n/_,e.vx+=y*g,e.vy+=b*g);while(d=d.next)}}return l.initialize=function(d,v){r=d,t=v,c()},l.strength=function(d){return arguments.length?(o=typeof d=="function"?d:Sn(+d),c(),l):o},l.distanceMin=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.distanceMax=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.theta=function(d){return arguments.length?(u=d*d,l):Math.sqrt(u)},l}function a6(r){return r.x+r.vx}function s6(r){return r.y+r.vy}function u6(r){return r.index}function YS(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}wn.copy=function(){var r,e,t=new T_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return t;if(!n.length)return t._root=HS(n),t;for(r=[{source:n,target:t._root=new Array(4)}];n=r.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?r.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=HS(e));return t},wn.add=function(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return WS(this.cover(e,t),e,t,r)},wn.addAll=function(r){var e,t,n,i,o=r.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(t=0;t<o;++t)isNaN(n=+this._x.call(null,e=r[t]))||isNaN(i=+this._y.call(null,e))||(a[t]=n,s[t]=i,n<u&&(u=n),n>c&&(c=n),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),t=0;t<o;++t)WS(this,a[t],s[t],r[t]);return this},wn.cover=function(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,o=(n=Math.floor(e))+1;else{for(var a,s,u=i-t||1,l=this._root;t>r||r>=i||n>e||e>=o;)switch(s=(e<n)<<1|r<t,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=t+u,o=n+u;break;case 1:t=i-u,o=n+u;break;case 2:i=t+u,n=o-u;break;case 3:t=i-u,n=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=n,this._x1=i,this._y1=o,this},wn.data=function(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r},wn.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},wn.find=function(r,e,t){var n,i,o,a,s,u,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,v=[],p=this._root;for(p&&v.push(new _n(p,c,f,h,d)),t==null?t=1/0:(c=r-t,f=e-t,h=r+t,d=e+t,t*=t);u=v.pop();)if(!(!(p=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<c||(s=u.y1)<f))if(p.length){var m=(i+a)/2,y=(o+s)/2;v.push(new _n(p[3],m,y,a,s),new _n(p[2],i,y,m,s),new _n(p[1],m,o,a,y),new _n(p[0],i,o,m,y)),(l=(e>=y)<<1|r>=m)&&(u=v[v.length-1],v[v.length-1]=v[v.length-1-l],v[v.length-1-l]=u)}else{var b=r-+this._x.call(null,p.data),g=e-+this._y.call(null,p.data),_=b*b+g*g;if(_<t){var w=Math.sqrt(t=_);c=r-w,f=e-w,h=r+w,d=e+w,n=p.data}}return n},wn.remove=function(r){if(isNaN(o=+this._x.call(null,r))||isNaN(a=+this._y.call(null,r)))return this;var e,t,n,i,o,a,s,u,l,c,f,h,d=this._root,v=this._x0,p=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(s=(v+m)/2))?v=s:m=s,(c=a>=(u=(p+y)/2))?p=u:y=u,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(t=e,h=f)}for(;d.data!==r;)if(n=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,n?(i?n.next=i:delete n.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(t?t[h]=d:this._root=d),this):(this._root=i,this)},wn.removeAll=function(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this},wn.root=function(){return this._root},wn.size=function(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r},wn.visit=function(r){var e,t,n,i,o,a,s=[],u=this._root;for(u&&s.push(new _n(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!r(u=e.node,n=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(n+o)/2,c=(i+a)/2;(t=u[3])&&s.push(new _n(t,l,c,o,a)),(t=u[2])&&s.push(new _n(t,n,c,l,a)),(t=u[1])&&s.push(new _n(t,l,i,o,c)),(t=u[0])&&s.push(new _n(t,n,i,l,c))}return this},wn.visitAfter=function(r){var e,t=[],n=[];for(this._root&&t.push(new _n(this._root,this._x0,this._y0,this._x1,this._y1));e=t.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&t.push(new _n(o,a,s,c,f)),(o=i[1])&&t.push(new _n(o,c,s,u,f)),(o=i[2])&&t.push(new _n(o,a,f,c,l)),(o=i[3])&&t.push(new _n(o,c,f,u,l))}n.push(e)}for(;e=n.pop();)r(e.node,e.x0,e.y0,e.x1,e.y1);return this},wn.x=function(r){return arguments.length?(this._x=r,this):this._x},wn.y=function(r){return arguments.length?(this._y=r,this):this._y};var lt=256,Nm=4096,Pr=25,JA="#FFDF81",eR="#818790",tR="#EDEDED",rR="#CFD1D4",nR="#F5F6F6",iR="#8FE3E8",C_="#1A1B1D",oR={position:"absolute",top:0,bottom:0,left:0,right:0},l6=1/.38,ir=function(){return window.devicePixelRatio||1},c6=["NVL_basic-wrapper","NVL_interactive-wrapper"];function Rl(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return XS(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?XS(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function XS(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var aR=function(r,e){var t=[r,e].sort();return"".concat(t[0],".").concat(t[1])},Uh=function(r){var e=new Set;return r.forEach(function(t){var n=t.from,i=t.to,o=aR(n,i);e.has(o)||e.add(o)}),e},J0=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tR,t=new Map;return r.forEach(function(n){var i=n.id,o=n.from,a=n.to,s=n.color,u=n.width,l=n.disabled,c=aR(o,a),f=t.get(c);f?f.bundledRels.push({id:i,color:s??void 0,disabled:l!=null&&l,width:u??1}):t.set(c,{bundledRels:[{id:i,color:s??void 0,disabled:l!=null&&l,width:u??1}],key:c,from:o,to:a,color:s??void 0,disabled:l!=null&&l,width:0})}),t.forEach(function(n){var i=(0,Qt.uniqBy)(n.bundledRels,"disabled"),o=i.length===1&&i[0].disabled===!0,a=i.length===1&&i[0].disabled!==!0;if(o)n.color=e,n.width=1;else{var s=n.bundledRels.filter(function(l){return l.disabled!==!0}),u=(0,Qt.uniqBy)(s,"color");a?(n.color=u.length>1?void 0:n.bundledRels[0].color,n.bundledRels.forEach(function(l){n.width+=l.width})):(n.color=u.length===1?u[0].color:void 0,n.disabled=!1,n.bundledRels.forEach(function(l){n.width+=l.disabled!==!0?l.width:0}))}n.width=Math.min(n.width,20)}),Array.from(t.values())},$c=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(function(r){return"size"in r})!==void 0};function eb(r){return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(r)}var f6=function(r){var e,t;return typeof r.source=="number"||typeof r.target=="number"||typeof r.source=="string"||typeof r.target=="string"?45*devicePixelRatio:((e=r.source.size)!==null&&e!==void 0?e:Pr)+((t=r.target.size)!==null&&t!==void 0?t:Pr)+90*devicePixelRatio};function $S(r){return eb(r)==="object"}var h6=function(r){var e;return((e=r.size)!==null&&e!==void 0?e:Pr)+25*devicePixelRatio},tb=function(){return-400*Math.pow(devicePixelRatio,2)},d6=function(){return 2*tb()};function ys(r){return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(r)}function KS(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ZS(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function v6(r,e,t){return(e=sR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function p6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,sR(n.key),n)}}function sR(r){var e=(function(t){if(ys(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ys(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return ys(e)=="symbol"?e:e+""}var Vi="d3ForceLayout",Lm=function(r){return r&&Pn(r)},g6=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t);var o=n.state;this.state=o,this.d3Nodes={},this.d3RelList={},this.computing=!0,this.center={x:0,y:0},this.nodeRelCount=[];var a=this.state,s=a.nodes,u=a.rels;s.addChannel(Vi),u.addChannel(Vi),this.simulation=(function(l){var c,f=1,h=.001,d=1-Math.pow(h,1/300),v=0,p=.6,m=new Map,y=QA(_),b=QU("tick","end"),g=(function(){let O=1;return()=>(O=(1664525*O+1013904223)%qS)/qS})();function _(){w(),b.call("tick",c),f<h&&(y.stop(),b.call("end",c))}function w(O){var T,C,P=l.length;O===void 0&&(O=1);for(var R=0;R<O;++R)for(f+=(v-f)*d,m.forEach(function(k){k(f)}),T=0;T<P;++T)(C=l[T]).fx==null?C.x+=C.vx*=p:(C.x=C.fx,C.vx=0),C.fy==null?C.y+=C.vy*=p:(C.y=C.fy,C.vy=0);return c}function x(){for(var O,T=0,C=l.length;T<C;++T){if((O=l[T]).index=T,O.fx!=null&&(O.x=O.fx),O.fy!=null&&(O.y=O.fy),isNaN(O.x)||isNaN(O.y)){var P=10*Math.sqrt(.5+T),R=T*n6;O.x=P*Math.cos(R),O.y=P*Math.sin(R)}(isNaN(O.vx)||isNaN(O.vy))&&(O.vx=O.vy=0)}}function E(O){return O.initialize&&O.initialize(l,g),O}return l==null&&(l=[]),x(),c={tick:w,restart:function(){return y.restart(_),c},stop:function(){return y.stop(),c},nodes:function(O){return arguments.length?(l=O,x(),m.forEach(E),c):l},alpha:function(O){return arguments.length?(f=+O,c):f},alphaMin:function(O){return arguments.length?(h=+O,c):h},alphaDecay:function(O){return arguments.length?(d=+O,c):+d},alphaTarget:function(O){return arguments.length?(v=+O,c):v},velocityDecay:function(O){return arguments.length?(p=1-O,c):1-p},randomSource:function(O){return arguments.length?(g=O,m.forEach(E),c):g},force:function(O,T){return arguments.length>1?(T==null?m.delete(O):m.set(O,E(T)),c):m.get(O)},find:function(O,T,C){var P,R,k,I,M,j=0,L=l.length;for(C==null?C=1/0:C*=C,j=0;j<L;++j)(k=(P=O-(I=l[j]).x)*P+(R=T-I.y)*R)<C&&(M=I,C=k);return M},on:function(O,T){return arguments.length>1?(b.on(O,T),c):b.on(O)}}})().velocityDecay(.4).force("charge",Mm().strength(tb)).force("centerX",(function(l){var c,f,h,d=Sn(.1);function v(m){for(var y,b=0,g=c.length;b<g;++b)(y=c[b]).vx+=(h[b]-y.x)*f[b]*m}function p(){if(c){var m,y=c.length;for(f=new Array(y),h=new Array(y),m=0;m<y;++m)f[m]=isNaN(h[m]=+l(c[m],m,c))?0:+d(c[m],m,c)}}return typeof l!="function"&&(l=Sn(l==null?0:+l)),v.initialize=function(m){c=m,p()},v.strength=function(m){return arguments.length?(d=typeof m=="function"?m:Sn(+m),p(),v):d},v.x=function(m){return arguments.length?(l=typeof m=="function"?m:Sn(+m),p(),v):l},v})(0).strength(.03)).force("centerY",(function(l){var c,f,h,d=Sn(.1);function v(m){for(var y,b=0,g=c.length;b<g;++b)(y=c[b]).vy+=(h[b]-y.y)*f[b]*m}function p(){if(c){var m,y=c.length;for(f=new Array(y),h=new Array(y),m=0;m<y;++m)f[m]=isNaN(h[m]=+l(c[m],m,c))?0:+d(c[m],m,c)}}return typeof l!="function"&&(l=Sn(l==null?0:+l)),v.initialize=function(m){c=m,p()},v.strength=function(m){return arguments.length?(d=typeof m=="function"?m:Sn(+m),p(),v):d},v.y=function(m){return arguments.length?(l=typeof m=="function"?m:Sn(+m),p(),v):l},v})(0).strength(.03)).alpha(1).alphaMin(.05).on("end",function(){i.simulationStopped=!0,i.shouldUpdate=!1,i.shouldReheatNodes=!1,i.shouldCountNodeRels=!1}).stop(),this.simulationStopped=!0,this.shouldUpdate=!0,this.shouldReheatNodes=!1,this.shouldCountNodeRels=!0,this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){var l=s.channels[Vi];if(s.version!==void 0&&l){var c=Object.values(l.adds).length>0,f=Object.values(l.removes).length>0,h=Object.values(l.updates),d=$c(h);c||f||d?(i.shouldUpdate=!0,i.shouldReheatNodes=!0,i.shouldCountNodeRels=!0):i.shouldReheatNodes=!1}var v=u.channels[Vi];if(u.version!==void 0&&v){var p=Object.values(v.adds).length>0,m=Object.values(v.removes).length>0;(p||m)&&(i.shouldUpdate=!0,i.shouldReheatNodes=!0,i.shouldCountNodeRels=!0)}}))},e=[{key:"setOptions",value:function(t){}},{key:"updateNodes",value:function(t){var n=this;t.forEach(function(i){n.d3Nodes[i.id]===void 0&&(n.d3Nodes[i.id]={id:i.id}),i!=null&&i.pinned?(n.d3Nodes[i.id].fx=i.x,n.d3Nodes[i.id].fy=i.y):(n.d3Nodes[i.id].x=i.x,n.d3Nodes[i.id].y=i.y),n.d3Nodes[i.id].vy=0,n.d3Nodes[i.id].vx=0}),this.shouldUpdate=!0,this.simulation.tick().alpha(.2)}},{key:"update",value:function(){var t,n=this,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||i){var o=this.state,a=o.nodes,s=o.rels,u=a.channels[Vi],l=s.channels[Vi],c=Object.values(u.adds).length>0,f=Object.values(l.adds).length>0,h=Object.values(u.removes).length>0,d=Object.values(l.removes).length>0,v=Object.values(u.updates).length>0;if(c||f||h||d||v){var p=c&&Object.keys(this.d3Nodes).length===0,m=Lm(u.removes);Object.keys(m).forEach(function(g){delete n.d3Nodes[g]});var y=Lm(u.adds);if(Object.keys(y).forEach(function(g){n.d3Nodes[g]=(function(_){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?ZS(Object(x),!0).forEach(function(E){v6(_,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(x)):ZS(Object(x)).forEach(function(E){Object.defineProperty(_,E,Object.getOwnPropertyDescriptor(x,E))})}return _})({},y[g])}),v&&Object.values(u.updates).forEach(function(g){g.pinned===!0?(n.d3Nodes[g.id].fx=n.d3Nodes[g.id].x,n.d3Nodes[g.id].fy=n.d3Nodes[g.id].y):g.pinned===!1&&(n.d3Nodes[g.id].fx=null,n.d3Nodes[g.id].fy=null),g.size!==void 0&&(n.d3Nodes[g.id].size=g.size)}),(f||d)&&(this.d3RelList=J0(Lm(s.items)).filter(function(g){return g.from!==g.to}).map(function(g,_){return{source:g.from,target:g.to,index:_}})),p){var b=Object.values(this.d3Nodes);(function(g,_,w){var x=g.filter(function(E){return E.x===void 0&&E.y===void 0});x.forEach(function(E,O){E.x=_.x+w*Math.sin(2*Math.PI*O/x.length),E.y=_.y+w*Math.cos(2*Math.PI*O/x.length)})})(b,this.center,(t=b.length,45*t/(2*Math.PI)))}this.layout(a.items,s.items,p)}a.clearChannel(Vi),s.clearChannel(Vi),this.shouldUpdate=!1,this.simulation.alpha()>this.simulation.alphaMin()&&(this.shouldUpdate=!0,this.simulationStopped&&(this.simulation.restart(),this.simulationStopped=!1))}}},{key:"layout",value:function(t,n,i){var o=this;if(!(0,Qt.isEmpty)(this.d3Nodes)){if(this.simulation.stop(),this.simulation.nodes(Object.values(this.d3Nodes)).force("collide",(function(l){var c,f,h,d=1,v=1;function p(){for(var b,g,_,w,x,E,O,T=c.length,C=0;C<v;++C)for(g=S_(c,a6,s6).visitAfter(m),b=0;b<T;++b)_=c[b],E=f[_.index],O=E*E,w=_.x+_.vx,x=_.y+_.vy,g.visit(P);function P(R,k,I,M,j){var L=R.data,F=R.r,z=E+F;if(!L)return k>w+z||M<w-z||I>x+z||j<x-z;if(L.index>_.index){var V=w-L.x-L.vx,G=x-L.y-L.vy,Y=V*V+G*G;Y<z*z&&(V===0&&(Y+=(V=oa(h))*V),G===0&&(Y+=(G=oa(h))*G),Y=(z-(Y=Math.sqrt(Y)))/Y*d,_.vx+=(V*=Y)*(z=(F*=F)/(O+F)),_.vy+=(G*=Y)*z,L.vx-=V*(z=1-z),L.vy-=G*z)}}}function m(b){if(b.data)return b.r=f[b.data.index];for(var g=b.r=0;g<4;++g)b[g]&&b[g].r>b.r&&(b.r=b[g].r)}function y(){if(c){var b,g,_=c.length;for(f=new Array(_),b=0;b<_;++b)g=c[b],f[g.index]=+l(g,b,c)}}return typeof l!="function"&&(l=Sn(l==null?1:+l)),p.initialize=function(b,g){c=b,h=g,y()},p.iterations=function(b){return arguments.length?(v=+b,p):v},p.strength=function(b){return arguments.length?(d=+b,p):d},p.radius=function(b){return arguments.length?(l=typeof b=="function"?b:Sn(+b),y(),p):l},p})().radius(h6)),this.shouldCountNodeRels&&(this.nodeRelCount=this.countNodeRels()),this.simulation.force("link",(function(l){var c,f,h,d,v,p,m=u6,y=function(O){return 1/Math.min(d[O.source.index],d[O.target.index])},b=Sn(30),g=1;function _(O){for(var T=0,C=l.length;T<g;++T)for(var P,R,k,I,M,j,L,F=0;F<C;++F)R=(P=l[F]).source,I=(k=P.target).x+k.vx-R.x-R.vx||oa(p),M=k.y+k.vy-R.y-R.vy||oa(p),I*=j=((j=Math.sqrt(I*I+M*M))-f[F])/j*O*c[F],M*=j,k.vx-=I*(L=v[F]),k.vy-=M*L,R.vx+=I*(L=1-L),R.vy+=M*L}function w(){if(h){var O,T,C=h.length,P=l.length,R=new Map(h.map((k,I)=>[m(k,I,h),k]));for(O=0,d=new Array(C);O<P;++O)(T=l[O]).index=O,typeof T.source!="object"&&(T.source=YS(R,T.source)),typeof T.target!="object"&&(T.target=YS(R,T.target)),d[T.source.index]=(d[T.source.index]||0)+1,d[T.target.index]=(d[T.target.index]||0)+1;for(O=0,v=new Array(P);O<P;++O)T=l[O],v[O]=d[T.source.index]/(d[T.source.index]+d[T.target.index]);c=new Array(P),x(),f=new Array(P),E()}}function x(){if(h)for(var O=0,T=l.length;O<T;++O)c[O]=+y(l[O],O,l)}function E(){if(h)for(var O=0,T=l.length;O<T;++O)f[O]=+b(l[O],O,l)}return l==null&&(l=[]),_.initialize=function(O,T){h=O,p=T,w()},_.links=function(O){return arguments.length?(l=O,w(),_):l},_.id=function(O){return arguments.length?(m=O,_):m},_.iterations=function(O){return arguments.length?(g=+O,_):g},_.strength=function(O){return arguments.length?(y=typeof O=="function"?O:Sn(+O),x(),_):y},_.distance=function(O){return arguments.length?(b=typeof O=="function"?O:Sn(+O),E(),_):b},_})(this.d3RelList).id(function(l){return l.id}).distance(f6).strength(function(l){return(function(c,f){if(!$S(c.source)||!$S(c.target))return 1;var h=1.2/(Math.min(f[c.source.index],f[c.target.index])+(Math.max(f[c.source.index],f[c.target.index])-1)/100);return Math.max(Math.min(h,1),.06)})(l,o.nodeRelCount)})),i){var a=0;this.simulation.force("charge",Mm().strength(d6));for(var s=performance.now();performance.now()-s<300&&a<200;)this.simulation.alpha(1),this.simulation.tick(1),a+=1;this.simulation.force("charge",Mm().strength(tb));for(var u=performance.now();performance.now()-u<100&&this.simulation.alpha()>=this.simulation.alphaMin();)this.simulation.tick(1);return this.computing=!1,void this.simulation.restart()}this.shouldReheatNodes?this.simulation.alpha(1).restart():this.simulation.restart()}}},{key:"getNodePositions",value:function(t){var n,i=[],o=(function(l,c){var f=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!f){if(Array.isArray(l)||(f=(function(y,b){if(y){if(typeof y=="string")return KS(y,b);var g={}.toString.call(y).slice(8,-1);return g==="Object"&&y.constructor&&(g=y.constructor.name),g==="Map"||g==="Set"?Array.from(y):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?KS(y,b):void 0}})(l))||c){f&&(l=f);var h=0,d=function(){};return{s:d,n:function(){return h>=l.length?{done:!0}:{done:!1,value:l[h++]}},e:function(y){throw y},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,p=!0,m=!1;return{s:function(){f=f.call(l)},n:function(){var y=f.next();return p=y.done,y},e:function(y){m=!0,v=y},f:function(){try{p||f.return==null||f.return()}finally{if(m)throw v}}}})(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=this.d3Nodes[a.id];if(s!==void 0){var u={id:s.id,x:s.x,y:s.y};i.push(u)}}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return this.computing}},{key:"terminateUpdate",value:function(){this.simulation.alpha(this.simulation.alphaMin()).stop(),this.simulationStopped=!0}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){t()}),this.state.nodes.removeChannel(Vi),this.state.rels.removeChannel(Vi),this.simulation.stop()}},{key:"setAlpha",value:function(t){this.simulation.alpha(t),this.simulation.restart(),this.simulation.shouldUpdate=!0}},{key:"countNodeRels",value:function(){for(var t=new Map(Object.entries(this.d3Nodes)),n=Object.values(this.d3RelList),i=new Array(t.length),o=0;o<n.length;++o){var a=n[o];a.index=o,ys(a.source)!=="object"&&(a.source=t.get(a.source)),ys(a.target)!=="object"&&(a.target=t.get(a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1}return i}}],e&&p6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),y6=_r(5880),uR=_r.n(y6),Wt=uR().getLogger("NVL");const jm=tF;var m6={CoseBilkentLayout:{standard:"createCoseBilkentLayoutWorker",fallback:"coseBilkentLayoutFallbackWorker"},HierarchicalLayout:{standard:"createHierarchicalLayoutWorker",fallback:"hierarchicalLayoutFallbackWorker"}},lR=function(r){var e,t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=m6[r],i=n.standard,o=n.fallback;if(t)e=jm[o];else try{e=jm[i]()}catch(a){console.warn("Failed to initialise ".concat(r,' worker: "').concat(JSON.stringify(a),'". Falling back to syncronous code.')),e=jm[o]}if(e===void 0)throw"".concat(r," code could not be initialized.");return e.port.start(),e};function rc(r){return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(r)}function QS(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Fm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QS(Object(t),!0).forEach(function(n){bi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QS(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Bm(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return JS(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?JS(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function JS(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function b6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,cR(n.key),n)}}function bi(r,e,t){return(e=cR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cR(r){var e=(function(t){if(rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(rc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return rc(e)=="symbol"?e:e+""}var eT=function(r,e,t){return r+(e-r)*(function(n){return n*n*(3-2*n)})(t)},fR=(function(){return r=function t(n){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),bi(this,"positions",void 0),bi(this,"oldPositions",void 0),bi(this,"startTime",void 0),bi(this,"t",void 0),bi(this,"currentT",void 0),bi(this,"state",void 0),bi(this,"shouldUpdateAnimator",void 0),bi(this,"parents",void 0),bi(this,"animationCompleteCallback",void 0),bi(this,"shouldUpdate",void 0);var i=n.state;this.positions={},this.oldPositions={},this.startTime=0,this.t=1,this.currentT=1,this.state=i,this.shouldUpdateAnimator=!1,this.parents={},this.animationCompleteCallback=n.animationCompleteCallback},e=[{key:"getPositionMapFromState",value:function(){var t,n=this.state.nodes,i=n.idToPosition,o={},a=Bm(n.items);try{for(a.s();!(t=a.n()).done;){var s=t.value,u=i[s.id];u!==void 0&&(o[s.id]={id:s.id,x:u.x,y:u.y})}}catch(l){a.e(l)}finally{a.f()}return o}},{key:"updatePositionsFromState",value:function(){this.positions=Fm({},this.getPositionMapFromState())}},{key:"updateOldPositionFromState",value:function(){this.oldPositions=Fm({},this.getPositionMapFromState())}},{key:"startAnimation",value:function(){this.updateOldPositionFromState(),this.startTime=Date.now(),this.t=0,this.currentT=0,this.shouldUpdateAnimator=!0}},{key:"update",value:function(){var t=this.shouldUpdateAnimator,n=(Date.now()-this.startTime)/400;this.t=Math.min(n,1),this.currentT<1?this.shouldUpdateAnimator=!0:(this.shouldUpdateAnimator=!1,t&&!this.shouldUpdateAnimator&&this.animationCompleteCallback!==void 0&&this.animationCompleteCallback(),this.shouldUpdateAnimator||this.updatePositionsFromState())}},{key:"updateNodes",value:function(t){var n,i=Bm(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.x!==void 0&&o.y!==void 0&&(this.positions[o.id]={id:o.id,x:o.x,y:o.y}),this.shouldUpdate=!0}}catch(a){i.e(a)}finally{i.f()}}},{key:"getNodePositions",value:function(t){var n,i=this.parents,o=this.state.nodes.idToPosition,a=(function(g,_){for(var w={x:0,y:0},x=g.length,E=0,O=0;O<x;O++){var T=_[g[O].id];T===void 0||isNaN(T.x)||isNaN(T.y)||T.x===0||T.y===0||(w.x+=T.x,w.y+=T.y,E+=1)}return E>0?[w.x/E,w.y/E]:[0,0]})(t,o),s={x:a[0],y:a[1]},u=[],l=Bm(t);try{for(l.s();!(n=l.n()).done;){var c=n.value,f=this.positions[c.id],h=o[c.id],d={id:c.id};if(f!==void 0){for(var v,p,m,y=c.id,b=(v=this.oldPositions[c.id])!==null&&v!==void 0?v:Fm({},s);b===void 0&&i[y]!==void 0;)y=i[y],b=this.oldPositions[y];b.x=(p=b.x)!==null&&p!==void 0?p:s.x,b.y=(m=b.y)!==null&&m!==void 0?m:s.y,d.x=eT(b.x,f.x,this.t),d.y=eT(b.y,f.y,this.t)}else h!==void 0&&(d.x=h.x||s.x,d.y=h.y||s.y);u.push(d)}}catch(g){l.e(g)}finally{l.f()}return this.currentT=this.t,u}}],e&&b6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Cu(r){return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cu(r)}function tT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function _6(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(t),!0).forEach(function(n){us(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function w6(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}})(r,e)||hR(r,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function rT(r){return(function(e){if(Array.isArray(e))return rb(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||hR(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function hR(r,e){if(r){if(typeof r=="string")return rb(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?rb(r,e):void 0}}function rb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function E6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,vR(n.key),n)}}function dR(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dR=function(){return!!r})()}function nb(){return nb=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=(function(o,a){for(;!{}.hasOwnProperty.call(o,a)&&(o=Pu(o))!==null;);return o})(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},nb.apply(null,arguments)}function Pu(r){return Pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pu(r)}function ib(r,e){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ib(r,e)}function us(r,e,t){return(e=vR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vR(r){var e=(function(t){if(Cu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Cu(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Cu(e)=="symbol"?e:e+""}var nT=function(r){return r!==void 0?Pn(r):r},O6=(function(){function r(n){var i;return(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,r),us(i=(function(o,a,s){return a=Pu(a),(function(u,l){if(l&&(Cu(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c})(u)})(o,dR()?Reflect.construct(a,s||[],Pu(o).constructor):a.apply(o,s))})(this,r,[n]),"stateDisposers",void 0),us(i,"cytoCompleteCallback",void 0),us(i,"computing",void 0),us(i,"pendingLayoutData",void 0),us(i,"worker",void 0),us(i,"workersDisabled",void 0),i.stateDisposers=[],i.stateDisposers.push(i.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)})),i.cytoCompleteCallback=n.cytoCompleteCallback,i.shouldUpdate=!0,i.computing=!1,i.workersDisabled=n.state.disableWebWorkers,i.setOptions(),i.worker=lR("CoseBilkentLayout",i.workersDisabled),i.pendingLayoutData=null,i}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&ib(n,i)})(r,fR),e=r,t=[{key:"setOptions",value:function(){this.shouldUpdate=!0}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(this.shouldUpdate||n){var a=nT(i),s=nT(o);(a.length>0||s.length>0)&&(this.updatePositionsFromState(),this.layout(a,s))}(function(u,l,c){var f=nb(Pu(u.prototype),"update",c);return typeof f=="function"?function(h){return f.apply(c,h)}:f})(r,0,this)([]),this.shouldUpdate=!1}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(n,i){var o=this;if(this.worker){if(n.length){var a=n.map(function(l){return{group:"nodes",data:{id:l.id}}}),s=i.map(function(l){return{group:"edges",data:{id:"rel".concat(l.id),source:l.from,target:l.to}}}),u={elements:[].concat(rT(a),rT(s)),spacingFactor:n.reduce(function(l,c){var f;return l+((f=c.size)!==null&&f!==void 0?f:Pr)},0)/n.length*4.5/50*ir()};this.computing?this.pendingLayoutData=u:(this.computing=!0,this.worker.port.onmessage=function(l){var c=l.data.positions;if(o.computing){for(var f=0,h=Object.entries(c);f<h.length;f++){var d=w6(h[f],2),v=d[0],p=d[1];o.positions[v]=_6({id:v},p)}o.cytoCompleteCallback(),o.startAnimation()}o.computing=!1,o.shouldUpdate=!0},setTimeout(function(){o.computing&&o.worker.port.postMessage(u)},0))}}else Wt.info("Cose-Bilkent layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){this.computing=!1}},{key:"destroy",value:function(){var n;this.stateDisposers.forEach(function(i){i()}),(n=this.worker)===null||n===void 0||n.port.close()}}],t&&E6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t})(),iT=typeof Float32Array<"u"?Float32Array:Array;function tv(){var r=new iT(16);return iT!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var ob=function(r,e,t,n,i,o,a){var s=1/(e-t),u=1/(n-i),l=1/(o-a);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*u,r[14]=(a+o)*l,r[15]=1,r},x6=_r(9792),oT=_r.n(x6);function nc(r){return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(r)}function S6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,pR(n.key),n)}}function kl(r,e,t){return(e=pR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pR(r){var e=(function(t){if(nc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(nc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return nc(e)=="symbol"?e:e+""}var aa=(function(){return r=function t(n,i,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")})(this,t),kl(this,"shaderProgram",void 0),kl(this,"gl",void 0),kl(this,"curTexture",void 0),kl(this,"attributeInfo",void 0),kl(this,"uniformInfo",void 0);var s=n.createShader(n.FRAGMENT_SHADER);if(!n.isShader(s))throw new Error("Could not create shader object");var u=oT()(o,a);n.shaderSource(s,u),n.compileShader(s),(0,Qt.isNil)(n.getShaderParameter(s,n.COMPILE_STATUS))&&Wt.info(n.getShaderInfoLog(s));var l=n.createShader(n.VERTEX_SHADER);if(!n.isShader(l))throw new Error("Could not create shader object");var c=oT()(i,a);if(n.shaderSource(l,c),n.compileShader(l),(0,Qt.isNil)(n.getShaderParameter(l,n.COMPILE_STATUS))&&Wt.info(n.getShaderInfoLog(l)),this.shaderProgram=n.createProgram(),n.attachShader(this.shaderProgram,s),n.attachShader(this.shaderProgram,l),n.linkProgram(this.shaderProgram),(0,Qt.isNil)(n.getProgramParameter(this.shaderProgram,n.LINK_STATUS)))throw new Error("Could not initialise shader");this.gl=n,this.curTexture=0,this.scanUniforms(),this.scanAttributes()},e=[{key:"setUniform",value:function(t,n){var i=this.gl,o=this.uniformInfo[t];if(o===void 0)throw new Error("Shader.setUniform - Uniform ".concat(t," not found in shader"));switch(o.type){case i.INT:i.uniform1i(o.location,n);break;case i.INT_VEC2:i.uniform2iv(o.location,n);break;case i.INT_VEC3:i.uniform3iv(o.location,n);break;case i.INT_VEC4:i.uniform4iv(o.location,n);break;case i.SAMPLER_2D:i.activeTexture(i.TEXTURE0+o.texture),i.bindTexture(i.TEXTURE_2D,n),i.uniform1i(o.location,o.texture);break;case i.SAMPLER_CUBE:case i.FLOAT:i.uniform1f(o.location,n);break;case i.FLOAT_VEC2:i.uniform2fv(o.location,n);break;case i.FLOAT_VEC3:i.uniform3fv(o.location,n);break;case i.FLOAT_VEC4:i.uniform4fv(o.location,n);break;case i.FLOAT_MAT2:i.uniformMatrix2fv(o.location,!1,n);break;case i.FLOAT_MAT3:i.uniformMatrix3fv(o.location,!1,n);break;case i.FLOAT_MAT4:i.uniformMatrix4fv(o.location,!1,n)}}},{key:"setAttributePointer",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t],u=i*Float32Array.BYTES_PER_ELEMENT,l=o*Float32Array.BYTES_PER_ELEMENT;a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.FLOAT,!1,l,u)}},{key:"setAttributePointerFloat",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.FLOAT,!1,o,i)}},{key:"setAttributePointerUShort",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.UNSIGNED_SHORT,!1,o,i)}},{key:"setAttributePointerByteNorm",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.UNSIGNED_BYTE,!0,o,i)}},{key:"setAttributePointerByte",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.UNSIGNED_BYTE,!1,o,i)}},{key:"use",value:function(){this.gl.useProgram(this.shaderProgram)}},{key:"remove",value:function(){this.gl.deleteProgram(this.shaderProgram)}},{key:"scanAttributes",value:function(){var t=this.gl;this.attributeInfo={};for(var n,i,o=t.getProgramParameter(this.shaderProgram,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++)n=t.getActiveAttrib(this.shaderProgram,a),i=t.getAttribLocation(this.shaderProgram,n.name),this.attributeInfo[n.name]={type:n.type,position:i}}},{key:"scanUniforms",value:function(){var t=this.gl;this.uniformInfo={};for(var n,i=t.getProgramParameter(this.shaderProgram,t.ACTIVE_UNIFORMS),o=0;o<i;o++){n=t.getActiveUniform(this.shaderProgram,o);var a=t.getUniformLocation(this.shaderProgram,n.name),s={type:n.type,location:a};n.type===t.SAMPLER_2D&&(s.texture=this.curTexture,this.curTexture+=1),this.uniformInfo[n.name]=s}}}],e&&S6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Au(r){return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(r)}function T6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,C6(n.key),n)}}function C6(r){var e=(function(t){if(Au(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Au(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Au(e)=="symbol"?e:e+""}function ab(r){var e=typeof Map=="function"?new Map:void 0;return ab=function(t){if(t===null||!(function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}})(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return(function(i,o,a){if(P_())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,o);var u=new(i.bind.apply(i,s));return a&&Kc(u,a.prototype),u})(t,arguments,Zc(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Kc(n,t)},ab(r)}function P_(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P_=function(){return!!r})()}function Kc(r,e){return Kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Kc(r,e)}function Zc(r){return Zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zc(r)}var gR=(function(){function r(){return(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,r),(function(n,i,o){return i=Zc(i),(function(a,s){if(s&&(Au(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u})(a)})(n,P_()?Reflect.construct(i,o||[],Zc(n).constructor):i.apply(n,o))})(this,r,arguments)}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&Kc(n,i)})(r,ab(Error)),e=r,(t=[{key:"toString",value:function(){return this.message}}])&&T6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t})();const zh=`uniform mat4 u_projection;

attribute vec2 a_position;
//attribute float a_index;

//varying highp float index;

void main() {
//  index = a_index;
  gl_Position = u_projection * vec4(a_position, 0.0, 1.0);
}`;function ic(r){return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ic(r)}function P6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,A6(n.key),n)}}function A6(r){var e=(function(t){if(ic(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ic(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return ic(e)=="symbol"?e:e+""}var aT=(function(){return r=function t(n,i){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),this.graph=this.constructGraphObjects(n,i),this.subGraphs=[],this.sunMap={}},e=[{key:"constructGraphObjects",value:function(t,n){var i=new Array(t.nodes.length),o=new Array(t.rels.length),a={},s=[];return t.nodes.forEach(function(u,l){i[l]=[],o[l]=[],s.push(u)}),t.rels.forEach(function(u){var l=n[u.from],c=n[u.to];l!==void 0&&c!==void 0&&(i[l].push(c),i[c].push(l),o[l].push(u.id),o[c].push(u.id),a[u.id]=u)}),this.relIdMap=o,{nodes:s,relationships:i,idToRel:a}}},{key:"coarsenTo",value:function(t){for(var n=this.graph,i=n.nodes.length,o=0;n.nodes.length>t&&n.relationships.some(function(s){return s.length>0});){var a=this.coarsen(n,o===0);if(o===0&&(this.nodeSortMap=a.nodeSortMap),this.subGraphs.push(a.sortedInput),(n=a.output).relationships.length===0||n.relationships.every(function(s){return s.length===0})||i===n.nodes.length)break;i=n.nodes.length,o+=1}return this.subGraphs.push(n),n}},{key:"coarsenBy",value:function(t){for(var n=t,i=this.graph,o=i.nodes.length,a=n;n>0;){var s=this.coarsen(i,n===a);if(this.subGraphs.push(s.sortedInput),(i=s.output).relationships.length===0||i.relationships.every(function(u){return u.length===0})||o===i.nodes.length)break;o=i.nodes.length,n-=1}return this.subGraphs.push(i),i}},{key:"coarsen",value:function(t,n){var i=this,o=t.nodes,a=t.relationships,s=o.map(function(w,x){return x}),u={},l={};o.forEach(function(w,x){u[x]=w,l[w.id]=x});for(var c=a.map(function(w){return w.slice()}),f={suns:{},planets:{},moons:{}},h=[],d=[],v=function(){var w=s[0];s.splice(s.indexOf(w),1),a[w].forEach(function(O){var T=s.indexOf(O);T>=0&&s.splice(T,1);var C=-1,P=c[O];P.forEach(function(R,k){var I=s.indexOf(R);I>=0?s.splice(I,1):R===w&&(C=k)}),P.splice(C,1)});var x={id:w};if(n)x.originalId=u[w].id;else{var E=u[w];x.finestIndex=E.finestIndex,x.originalId=E.originalId}h.push(x),f.suns[w]=x};s.length>0;)v();h.forEach(function(w,x){d[x]=[]}),h.forEach(function(w,x){var E={},O=[];a[w.id].forEach(function(T){if(T!==w.id&&!E[T]){var C={id:T,parent:w,sunId:x,moons:[]},P=u[T];C.size=function(){return C.moons.length+1},C.weight=P.weight||1,C.children=function(){return C.moons},n?C.originalId=P.id:(C.finestIndex=P.finestIndex,C.originalId=P.originalId),O.push(C),E[T]=!0}}),O.forEach(function(T){f.planets[T.id]=T}),w.planets=O,w.children=function(){return w.planets},w.weight=w.planets.reduce(function(T,C){return T+(C.weight||1)},0)+(u[w.id].weight||1),w.size=function(){return w.planets.reduce(function(T,C){return T+C.size()},0)+1}});var p=o.filter(function(w,x){return!h.find(function(E){return E.id===x})&&!f.planets[x]});p.forEach(function(w){for(var x=l[w.id],E=c[x],O=null,T=-1,C=0;C<E.length;C++){var P=E[C];if(P!==x&&(O=f.planets[P])){T=C;break}}if(E.splice(T,1),O){var R={id:x,size:function(){return 0}};R.weight=u[x].weight||1,R.parent=O,R.sunId=O.sunId,n?R.originalId=w.id:(R.finestIndex=w.finestIndex,R.originalId=w.originalId),f.moons[x]=R,O.moons.push(R),O.weight+=R.weight,O.parent.weight+=R.weight;var k=c[O.id];k.splice(k.indexOf(x),1)}}),c.forEach(function(w,x){if(!f.suns[x]){var E=f.planets[x]||f.moons[x];c[x].forEach(function(O){var T=f.planets[O];if(T||(T=f.moons[O]),E.sunId!==T.sunId){var C=d[E.sunId];C.includes(T.sunId)||C.push(T.sunId)}})}});var m=[],y=0,b={};h.forEach(function(w,x){var E=o[w.id];b[w.id]=y,w.previousIndex=x,w.id=y,y+=1,n&&(E.finestIndex=w.id,w.finestIndex=w.id),m.push(E),w.planets.forEach(function(O){var T=o[O.id];b[O.id]=y,O.id=y,y+=1,O.sunId=w.id,n&&(T.finestIndex=O.id),i.sunMap[O.originalId]=w.originalId,m.push(T),O.moons.forEach(function(C){var P=o[C.id];b[C.id]=y,C.id=y,y+=1,C.sunId=w.id,n&&(P.finestIndex=C.id),i.sunMap[C.originalId]=w.originalId,m.push(P)})})});var g=[],_=[];return a.forEach(function(w,x){var E=b[x];g[E]=w.map(function(O){return b[O]}),n&&(_[E]=w.map(function(O,T){return i.relIdMap[x][T]}))}),_&&_.length>0&&(this.relIdMap=_),{output:{nodes:h,relationships:d},sortedInput:{nodes:m,relationships:g},nodeSortMap:b}}}],e&&P6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),sT=function(r,e,t){for(var n=2*Math.PI/t,i=[],o=0;o<t;o++){var a=n*o;i.push({x:r.x+e*Math.cos(a),y:r.y+e*Math.sin(a)})}return i};function oc(r){return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(r)}function Il(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return uT(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?uT(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function uT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function R6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,yR(n.key),n)}}function dt(r,e,t){return(e=yR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yR(r){var e=(function(t){if(oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(oc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return oc(e)=="symbol"?e:e+""}var $r="PhysLayout",Dl=new Float32Array(4),oi=256,Um=function(r){for(var e={},t={},n=0;n<r.length;n++)e[r[n].id]=n,t[n]=r[n].id;return{nodeIdToIndex:e,nodeIndexToId:t}},k6=(function(){return r=function t(n){var i=this;(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,t),dt(this,"physVbo",void 0),dt(this,"physSmallVbo",void 0),dt(this,"physProjection",void 0),dt(this,"physSmallProjection",void 0),dt(this,"gl",void 0),dt(this,"useReadpixelWorkaround",void 0),dt(this,"averageNodeSize",void 0),dt(this,"shouldUpdate",void 0),dt(this,"iterationCount",void 0),dt(this,"lastSpeedValues",void 0),dt(this,"rollingAvgGraphSpeed",void 0),dt(this,"nodeVariation",void 0),dt(this,"nodeCenterPoint",void 0),dt(this,"peakIterationMultiplier",void 0),dt(this,"stateDisposers",void 0),dt(this,"state",void 0),dt(this,"dpr",void 0),dt(this,"intelWorkaround",void 0),dt(this,"simulationStopVelocitySquared",void 0),dt(this,"gravity",void 0),dt(this,"force",void 0),dt(this,"nodeIdToIndex",void 0),dt(this,"nodeIndexToId",void 0),dt(this,"flatRelationshipKeys",void 0),dt(this,"numNodes",void 0),dt(this,"solarMerger",void 0),dt(this,"subGraphs",void 0),dt(this,"nodeSortMap",void 0),dt(this,"firstUpdate",void 0),dt(this,"curPhysData",void 0),dt(this,"apprxRepForceShader",void 0),dt(this,"levelsClusterTexture",void 0),dt(this,"levelsFinestIndexTexture",void 0),dt(this,"initalLevelTexture",void 0),dt(this,"levelsData",void 0),dt(this,"collisionDetectionMultiplier",void 0),dt(this,"physShader",void 0),dt(this,"physData",void 0),dt(this,"workaroundData",void 0),dt(this,"pinData",void 0),dt(this,"updateData",void 0),dt(this,"updateShader",void 0),dt(this,"workaroundShader",void 0),dt(this,"physPositions",void 0),dt(this,"springTexture",void 0),dt(this,"sizeTexture",void 0),dt(this,"offsetTexture",void 0),dt(this,"pinTexture",void 0),dt(this,"addedNodes",void 0),dt(this,"updateTexture",void 0),dt(this,"enableVerlet",void 0);var o=n.state,a=n.webGLContext;if(Wt.info("layout - webGLContext",!!a),n.webGLContext===void 0)throw new Error("PhysLayout missing options: webGLContext - webgl context");if(n.state===void 0)throw new Error("PhysLayout missing options: state - state object");var s=a;this.checkCompatibility(s),this.printGlStats(s),this.physVbo=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.physVbo);var u=new Float32Array([0,0,lt,0,0,lt,lt,lt]);s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW),this.physSmallVbo=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.physSmallVbo);var l=new Float32Array([0,0,oi,0,0,oi,oi,oi]);s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW),this.physProjection=tv(),ob(this.physProjection,0,lt,lt,0,0,1e6),this.physSmallProjection=tv(),ob(this.physSmallProjection,0,oi,oi,0,0,1e6),s.disable(s.DEPTH_TEST),this.gl=s,this.useReadpixelWorkaround&&this.setupReadpixelWorkaround(),this.setupUpdates(),this.averageNodeSize=Pr,this.shouldUpdate=!0,this.iterationCount=0,this.lastSpeedValues=[],this.rollingAvgGraphSpeed=0,this.nodeVariation=0,this.nodeCenterPoint=[0,0],this.peakIterationMultiplier=160,this.setOptions(n,!0),this.definePhysicsArrays(),this.flatRelationshipKeys=new Set;var c=o.nodes,f=o.rels;c.addChannel($r),f.addChannel($r),this.stateDisposers=[],this.stateDisposers.push(o.reaction(function(){return o.graphUpdates},function(){var h=c.channels[$r];if(c.version!==void 0&&h){var d=Object.values(h.adds).length>0,v=Object.values(h.removes).length>0,p=Object.values(h.updates),m=$c(p);(d||v||m)&&(i.shouldUpdate=!0,i.checkForUpdates())}var y=f.channels[$r];if(f.version!==void 0&&y){var b=Object.values(y.adds).length>0,g=Object.values(y.removes).length>0;(b||g)&&(i.shouldUpdate=!0,i.checkForUpdates())}})),this.setData({nodes:c.items,rels:f.items}),this.state=o,this.dpr=window.devicePixelRatio||1},e=[{key:"setOptions",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(t){var i=t.intelWorkaround,o=t.simulationStopVelocity,a=t.gravity,s=t.enableVerlet,u=s!==void 0&&s;n&&(this.intelWorkaround=i,this.enableVerlet=u);var l=this.enableVerlet?.25:o??100;this.simulationStopVelocitySquared=l*l,this.gravity=a??100,this.force=0}}},{key:"setData",value:function(t){var n=Um(t.nodes),i=n.nodeIdToIndex,o=n.nodeIndexToId;return this.nodeIdToIndex=i,this.nodeIndexToId=o,this.numNodes=t.nodes.length,this.flatRelationshipKeys=Uh(t.rels),this.solarMerger=new aT(t,i),this.solarMerger.coarsenTo(1),this.subGraphs=this.solarMerger.subGraphs,this.nodeSortMap=this.solarMerger.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]),this.setupPhysics(),this.firstUpdate=!0,this.curPhysData=0,this.shouldUpdate=!0,this.iterationCount=0,this.subGraphs[0]}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.gl;if(this.checkForUpdates(t),!this.shouldUpdate)return n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(0).frameBuffer),n.readPixels(0,0,lt,lt,n.RGBA,n.FLOAT,this.physPositions),!1;n.disable(n.BLEND);for(var i=this.nodeVariation/(this.numNodes||1)>.3,o=this.getScaleNumber(this.iterationCount),a=this.subGraphs?this.subGraphs.length:0,s=this.getPhysData(0).texture,u=a-1;u>0;u--){var l=this.subGraphs[u].nodes.length,c=u===a-1;this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_physData",s),this.apprxRepForceShader.setUniform("u_clusterData",this.levelsClusterTexture[u]),this.apprxRepForceShader.setUniform("u_finestIndexes",this.levelsFinestIndexTexture[u]),this.apprxRepForceShader.setUniform("u_prevForce",c?this.initalLevelTexture:this.levelsData[u+1].texture),this.apprxRepForceShader.setUniform("u_numNodes",l),this.apprxRepForceShader.setUniform("u_iterationMultiplier",o),this.apprxRepForceShader.setUniform("u_baseLength",this.getBaseLength(l)),this.apprxRepForceShader.setUniform("u_isTopLevel",c?1:0),n.bindBuffer(n.ARRAY_BUFFER,this.physSmallVbo),this.apprxRepForceShader.setAttributePointer("a_position",2,0,2),n.bindFramebuffer(n.FRAMEBUFFER,this.levelsData[u].frameBuffer),n.viewport(0,0,oi,oi),n.drawArrays(n.TRIANGLE_STRIP,0,4)}if(this.collisionDetectionMultiplier=0,this.collisionDetectionMultiplier=i?Math.min(this.iterationCount/Math.min(this.numNodes,300),1):1,this.force=a<=1?this.initalLevelTexture:this.levelsData[1].texture,this.physShader.use(),this.physShader.setUniform("u_prevForce",a<=1?this.initalLevelTexture:this.levelsData[1].texture),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_physData",s),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_iterationMultiplier",o),this.physShader.setUniform("u_curIteration",this.iterationCount),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_clusterData",this.levelsClusterTexture[0]),this.physShader.setUniform("u_collisionMultiplier",this.collisionDetectionMultiplier),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.firstUpdate=!1,n.bindBuffer(n.ARRAY_BUFFER,this.physVbo),this.physShader.setAttributePointer("a_position",2,0,2),n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(1).frameBuffer),n.viewport(0,0,lt,lt),n.drawArrays(n.TRIANGLE_STRIP,0,4),this.useReadpixelWorkaround?this.doReadpixelWorkaround():(n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(0).frameBuffer),n.readPixels(0,0,lt,lt,n.RGBA,n.FLOAT,this.physPositions)),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.iterationCount+=1,this.numNodes<2)this.shouldUpdate=!1,this.iterationCount=0;else if(this.iterationCount%5==0){var f=this.iterationCount<300,h=f?this.getMaxSpeedSquared():this.getMedianSpeedSquared(this.addedNodes);this.lastSpeedValues.push(h),this.rollingAvgGraphSpeed=this.lastSpeedValues.reduce(function(p,m){return p+m},0)/this.lastSpeedValues.length;var d=f&&h>=this.rollingAvgGraphSpeed,v=this.simulationStopVelocitySquared&&this.rollingAvgGraphSpeed<this.simulationStopVelocitySquared;this.lastSpeedValues.length>20&&this.lastSpeedValues.shift(),!d&&v===!0&&this.iterationCount>2&&this.terminateUpdate()}return this.shouldUpdate}},{key:"terminateUpdate",value:function(){Wt.info("Cooling down after ".concat(this.iterationCount," iterations at graph speed of ").concat(Math.sqrt(this.rollingAvgGraphSpeed))),this.shouldUpdate=!1,this.iterationCount=0,this.rollingAvgGraphSpeed=0,this.lastSpeedValues=[],this.addedNodes=null,this.nodeVariation=0}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"getNodePositions",value:function(t){var n=[];if(this.useReadpixelWorkaround){var i,o=Il(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this.nodeIdToIndex[a.id],u=a.id,l=void 0,c=void 0;s!==void 0&&(l=this.workaroundData[0].dataFloat[s],c=this.workaroundData[1].dataFloat[s]),n.push({id:u,x:l,y:c})}}catch(b){o.e(b)}finally{o.f()}}else{var f,h=Il(t);try{for(h.s();!(f=h.n()).done;){var d=f.value,v=this.nodeIdToIndex[d.id],p=d.id,m=void 0,y=void 0;v!==void 0&&(m=this.physPositions[4*v+0],y=this.physPositions[4*v+1]),n.push({id:p,x:m,y})}}catch(b){h.e(b)}finally{h.f()}}return n}},{key:"reheat",value:function(t){this.setupSize(this.subGraphs[0]),this.shouldUpdate=!0,this.iterationCount=0,this.nodeVariation=t.nodes.length}},{key:"updateNodes",value:function(t){var n=this.gl,i=new Set;n.bindTexture(n.TEXTURE_2D,this.getPhysData().texture);var o,a=Il(t);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=this.nodeIdToIndex[s.id];if(s.x!==void 0&&s.y!==void 0){Dl[0]=s.x,Dl[1]=s.y,Dl[2]=0,Dl[3]=0;var l=u%lt,c=(u-l)/lt;n.texSubImage2D(n.TEXTURE_2D,0,l,c,1,1,n.RGBA,n.FLOAT,Dl),this.useReadpixelWorkaround?(this.workaroundData[0].dataFloat[u]=s.x,this.workaroundData[1].dataFloat[u]=s.y):(this.physPositions[4*u+0]=s.x,this.physPositions[4*u+1]=s.y)}s.pinned!==void 0&&(this.pinData[u]=s.pinned?255:0),Object.keys(s).forEach(function(f){return i.add(f)})}}catch(f){a.e(f)}finally{a.f()}i.has("pinned")&&(n.bindTexture(n.TEXTURE_2D,this.pinTexture),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,lt,lt,0,n.ALPHA,n.UNSIGNED_BYTE,this.pinData)),(i.has("x")||i.has("y")||i.has("size"))&&(this.shouldUpdate=!0,this.iterationCount=0)}},{key:"addRemoveData",value:function(t,n,i){var o=this.gl;this.numNodes=t.nodes.length,this.physShader.use(),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_baseLength",this.getBaseLength());var a=Um(t.nodes).nodeIdToIndex,s=new aT(t,a);s.coarsenTo(1);var u=s.subGraphs[0],l=this.subGraphs[0],c=function(L){return l.nodes.findIndex(function(F){return F.id===L})},f=Object.values(n.adds),h=Object.values(n.removes);this.addedNodes=f.length>0?{}:null,this.nodeVariation=f.length+h.length;for(var d=function(L){return!!n.adds[L]},v=3*Math.sqrt(t.nodes.length),p={x:0,y:0},m=u.nodes.length,y=new Uint8Array(65536),b=0;b<m;b++){var g=0,_=0,w=u.nodes[b];if(d(w.id)){if(this.addedNodes[b]=w.id,g=w.position?w.position.x:void 0,_=w.position?w.position.y:void 0,g===void 0||_===void 0){var x=s.sunMap,E=void 0;for(E=x[w.id];E!==void 0;E=x[E]){var O=c(E);if(O!==-1){var T=this.getNodePosition(O);g=T.x+10*(Math.random()-.5),_=T.y+10*(Math.random()-.5);break}}E===void 0&&(g=this.nodeCenterPoint[0]+v*(Math.random()-.5),_=this.nodeCenterPoint[1]+v*(Math.random()-.5))}this.updateData[2*b]=g,this.updateData[2*b+1]=_,y[b]=w.pinned?255:0}else{var C=c(w.id),P=this.getNodePosition(C);g=P.x,_=P.y,this.updateData[2*b]=C,this.updateData[2*b+1]=999999,y[b]=this.pinData[C]}p.x+=g||0,p.y+=_||0}this.nodeCenterPoint=m?[p.x/m,p.y/m]:[0,0],this.pinData=y,this.subGraphs=s.subGraphs,this.nodeSortMap=s.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]);var R=Um(this.subGraphs[0].nodes),k=R.nodeIdToIndex,I=R.nodeIndexToId;this.nodeIdToIndex=k,this.nodeIndexToId=I,o.bindTexture(o.TEXTURE_2D,this.updateTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,lt,lt,0,o.ALPHA,o.FLOAT,this.updateData),Wt.info("Setting gravity center to ",this.nodeCenterPoint),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.updateShader.use(),this.updateShader.setUniform("u_numNodesNew",u.nodes.length),this.updateShader.setUniform("u_physData",this.getPhysData(0).texture),this.updateShader.setUniform("u_updateData",this.updateTexture),o.disable(o.BLEND),o.bindBuffer(o.ARRAY_BUFFER,this.physVbo),this.updateShader.setAttributePointer("a_position",2,0,2),o.bindFramebuffer(o.FRAMEBUFFER,this.getPhysData(1).frameBuffer),o.viewport(0,0,lt,lt),o.drawArrays(o.TRIANGLE_STRIP,0,4),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.useReadpixelWorkaround?this.doReadpixelWorkaround():(o.bindFramebuffer(o.FRAMEBUFFER,this.getPhysData().frameBuffer),o.readPixels(0,0,lt,lt,o.RGBA,o.FLOAT,this.physPositions)),(f.length>0||h.length>0)&&(o.bindTexture(o.TEXTURE_2D,this.pinTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,lt,lt,0,o.ALPHA,o.UNSIGNED_BYTE,this.pinData));var M=Uh(t.rels),j=this.hasRelationshipFlatMapChanged(M,i);return this.shouldUpdate=this.nodeVariation>0||j,this.iterationCount=0,this.flatRelationshipKeys=M,this.setupPhysicsForCoarse(),this.subGraphs[0]}},{key:"destroy",value:function(){var t=this;this.gl.deleteBuffer(this.physVbo),this.gl.deleteBuffer(this.physSmallVbo),this.physData.forEach(function(n){t.gl.deleteFramebuffer(n.frameBuffer),t.gl.deleteTexture(n.texture)}),this.levelsData.forEach(function(n){t.gl.deleteFramebuffer(n.frameBuffer),t.gl.deleteTexture(n.texture)}),this.levelsClusterTexture.forEach(function(n){t.gl.deleteTexture(n)}),this.levelsFinestIndexTexture.forEach(function(n){t.gl.deleteTexture(n)}),this.gl.deleteTexture(this.initalLevelTexture),this.gl.deleteTexture(this.sizeTexture),this.gl.deleteTexture(this.offsetTexture),this.gl.deleteTexture(this.springTexture),this.gl.deleteTexture(this.pinTexture),this.gl.deleteTexture(this.updateTexture),this.apprxRepForceShader!==void 0&&this.apprxRepForceShader.remove(),this.updateShader!==void 0&&this.updateShader.remove(),this.physShader!==void 0&&this.physShader.remove(),this.physPositions=null,this.gl=null,this.stateDisposers.forEach(function(n){n()}),this.state.nodes.removeChannel($r),this.state.rels.removeChannel($r)}},{key:"hasRelationshipFlatMapChanged",value:function(t,n){if(t.size!==this.flatRelationshipKeys.size)return!0;var i=!1,o=Object.values(n.adds),a=Object.values(n.removes);if(o.length>0||a.length>0){var s,u=Il(Uh(o));try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!this.flatRelationshipKeys.has(l)){i=!0;break}}}catch(d){u.e(d)}finally{u.f()}if(!i){var c,f=Il(Uh(a));try{for(f.s();!(c=f.n()).done;){var h=c.value;if(!t.has(h)){i=!0;break}}}catch(d){f.e(d)}finally{f.f()}}}return i}},{key:"dumpTexture",value:function(t,n,i){var o=this.gl;Wt.info("--- Dumping texture ",i),o.bindFramebuffer(o.FRAMEBUFFER,t),o.readPixels(0,0,lt,lt,o.RGBA,o.FLOAT,this.physPositions);for(var a=0;a<n;a++)Wt.info(a,": ",this.physPositions[4*a+0],this.physPositions[4*a+1],this.physPositions[4*a+2],this.physPositions[4*a+3])}},{key:"getScaleNumber",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i,o,a){return a+Math.pow(10,6)*Math.pow(i-120,-1.7)};return t===0?0:t<300?200+-1/Math.pow(10,5)*3*Math.pow(Math.abs(t-200+12),3):n(t,200,10)}},{key:"getBaseLength",value:function(t){if(t===void 0||t===this.numNodes)return 100*this.dpr;var n=Math.pow(this.averageNodeSize/2,2)*Math.PI,i=this.numNodes/t*n;return(100+Math.sqrt(i/Math.PI)/2/t)*this.dpr}},{key:"checkForUpdates",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.state,i=n.nodes,o=n.rels,a={nodes:i.items,rels:o.items},s=Object.values(i.channels[$r].adds).length>0,u=Object.values(o.channels[$r].adds).length>0,l=Object.values(i.channels[$r].removes).length>0,c=Object.values(o.channels[$r].removes).length>0,f=Object.values(i.channels[$r].updates);(s||u||l||c)&&this.addRemoveData(a,{adds:i.channels[$r].adds,removes:i.channels[$r].removes},{adds:o.channels[$r].adds,removes:o.channels[$r].removes}),t?(this.updateNodes(a.nodes),this.reheat(a)):f.length>0&&(this.updateNodes(f),$c(f)&&this.reheat(a)),i.clearChannel($r),o.clearChannel($r)}},{key:"getNodePosition",value:function(t){return this.useReadpixelWorkaround?{x:this.workaroundData[0].dataFloat[t],y:this.workaroundData[1].dataFloat[t]}:{x:this.physPositions[4*t+0],y:this.physPositions[4*t+1]}}},{key:"getMaxSpeedSquared",value:function(){var t=0;if(this.useReadpixelWorkaround)for(var n=0;n<this.numNodes;n++){var i=this.workaroundData[2].dataFloat[n],o=this.workaroundData[3].dataFloat[n],a=i*i+o*o;a>t&&(t=a)}else for(var s=0;s<this.numNodes;s++){var u=this.physPositions[4*s+2],l=this.physPositions[4*s+3],c=u*u+l*l;c>t&&(t=c)}return t}},{key:"getMedianSpeedSquared",value:function(t){var n=[];if(this.useReadpixelWorkaround)for(var i=0;i<this.numNodes;i++){var o=this.workaroundData[2].dataFloat[i],a=this.workaroundData[3].dataFloat[i],s=o*o+a*a;n[i]=s}else for(var u=0;u<this.numNodes;u++)if(!t||t[u]){var l=this.physPositions[4*u+2],c=this.physPositions[4*u+3],f=l*l+c*c;n.push(f)}return n.sort(function(h,d){return h-d}),n[Math.floor(n.length/2)]}},{key:"getPhysData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.physData[(this.curPhysData+t)%this.physData.length]}},{key:"newTexture",value:function(t,n,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.FLOAT,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.RGBA,s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,a,i,i,0,a,o,n),s}},{key:"newFramebuffer",value:function(t,n){var i=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),i}},{key:"checkCompatibility",value:function(t){function n(l){throw new gR(l)}t||n("Could not initialize WebGL"),t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0&&n("Vertex shader texture access not available"),t.getExtension("OES_texture_float")||n("OES_texture_float extension not available"),t.getExtension("WEBGL_color_buffer_float")||(Wt.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0);var i=t.getParameter(t.MAX_TEXTURE_SIZE),o=Math.max(lt,Nm);if(i<o&&n("Need larger WebGL texture support. Avaliable: ".concat(i," needed: ").concat(o)),!this.useReadpixelWorkaround){var a=new Float32Array(4),s=this.newTexture(t,a,1),u=this.newFramebuffer(t,s);t.bindFramebuffer(t.FRAMEBUFFER,u),t.readPixels(0,0,1,1,t.RGBA,t.FLOAT,a),t.getError()!==t.NO_ERROR&&(Wt.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u),t.deleteTexture(s)}}},{key:"printGlStats",value:function(t){var n="?",i="?";if(t.getParameter(t.RENDERER))i=t.getParameter(t.RENDERER),n=t.getParameter(t.VENDOR);else{var o=t.getExtension("WEBGL_debug_renderer_info");o&&(n=t.getParameter(o.UNMASKED_VENDOR_WEBGL),i=t.getParameter(o.UNMASKED_RENDERER_WEBGL))}Wt.trace("Vendor: ".concat(n)),Wt.trace("Renderer: ".concat(i));var a=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);Wt.trace("Line width range: ".concat(a));var s=t.getSupportedExtensions();Wt.trace("Extentions:"),s.length>0&&s.forEach(function(u){return Wt.trace(u)})}},{key:"adjustToGlSize",value:function(t){return t*this.dpr*2.5}},{key:"setupSize",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{nodes:[]},n=new Float32Array(65536),i=t.nodes,o=i.length,a=0,s=0;s<o;s++){var u,l=parseInt((u=i[s].size)!==null&&u!==void 0?u:Pr,10);n[s]=this.adjustToGlSize(l),a+=l}this.averageNodeSize=o?a/o:Pr;var c=this.gl;this.sizeTexture===void 0&&(this.sizeTexture=c.createTexture()),c.bindTexture(c.TEXTURE_2D,this.sizeTexture),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,lt,lt,0,c.ALPHA,c.FLOAT,n),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)}},{key:"setupSprings",value:function(t){var n,i,o=this.gl,a=t.relationships,s=new Float32Array(16777216),u=new Float32Array(65536),l=0;for(n=0;n<t.nodes.length;n++)for(u[n]=l,s[l]=a[n].length,l+=1,i=0;i<a[n].length;i++)s[l]=a[n][i],l+=1;for(i=l;i<s.length;i++)s[i]=1;for(i=n;i<u.length;i++)u[i]=0;this.offsetTexture===void 0&&(this.offsetTexture=o.createTexture()),o.bindTexture(o.TEXTURE_2D,this.offsetTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,lt,lt,0,o.ALPHA,o.FLOAT,u),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),this.springTexture===void 0&&(this.springTexture=o.createTexture()),o.bindTexture(o.TEXTURE_2D,this.springTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,Nm,Nm,0,o.ALPHA,o.FLOAT,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE)}},{key:"setupPhysics",value:function(){this.setupPhysicsForCoarse(),this.setupPhysicsForNodes(),this.physPositions=new Float32Array(262144),this.setupPinData()}},{key:"setupPhysicsForNodes",value:function(){var t=this.gl,n=this.subGraphs.length,i=this.subGraphs[0].nodes,o=3*Math.sqrt(i.length),a=new Float32Array(262144),s=new Float32Array(262144);this.numNodes=i.length;for(var u=0;u<262144;u++)a[u]=0,s[u]=0;for(var l=function(m,y,b,g){g[4*m+0]=y,g[4*m+1]=b,g[4*m+2]=0,g[4*m+3]=0},c=n-1;c>=0;c--){var f=c===n-1?[]:this.subGraphs[c+1].nodes;f.length===0?this.subGraphs[c].nodes.forEach(function(m,y){var b=m.placement?m.placement.x:o*(Math.random()-.5),g=m.placement?m.placement.y:o*(Math.random()-.5);l(m.finestIndex===void 0?y:m.finestIndex,b,g,a)}):f.forEach(function(m){var y=m.finestIndex,b=a[4*m.finestIndex],g=a[4*m.finestIndex+1],_=sT({x:b,y:g},10,m.planets.length+1);y+=1,m.planets.forEach(function(w,x){var E=_[x];l(y+=1,E.x,E.y,a);var O=sT({x:E.x,y:E.y},10,w.moons.length+1);w.moons.forEach(function(T,C){var P=O[C];l(y+=1,P.x,P.y,a)})})})}this.physData=[];for(var h=0;h<2;h++){var d=this.newTexture(t,h===0?a:s,lt),v=this.newFramebuffer(t,d);this.physData.push({texture:d,frameBuffer:v})}var p=this.enableVerlet?`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;


float DAMP = 0.6;
float COOL = 0.99998;
float TEMP = max(0.02, pow(COOL, u_curIteration));
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 50000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection, float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = (combinedNodeSize - dist) / (dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * fScale) / (dist);
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, myPosition.zw);
  } else {
    vec2 prevVelocity = myPosition.zw;
    vec2 currentPos = myPosition.xy;
    vec2 prevPos = currentPos - prevVelocity;

    vec2 newPos = currentPos + TEMP * ( DAMP * (prevVelocity) + acceleration * TIMESTEP * TIMESTEP);
    vec2 newVelocity = newPos - currentPos;
    gl_FragColor = vec4(newPos, newVelocity);
  }
}`:`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 500000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection,  float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = ((combinedNodeSize - dist) / dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * (fScale / 1.5)) / dist;
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, acceleration * TIMESTEP * 0.5);
  } else {
    myPosition.zw = myPosition.zw * VELOCITYDECAY;
    gl_FragColor = vec4(myPosition.xy + myPosition.zw * TIMESTEP, myPosition.zw + acceleration * TIMESTEP);
  }
}`;this.physShader=new aa(t,zh,p,{INTEL_WORKAROUND:this.intelWorkaround?1:0}),this.physShader.use(),this.physShader.setUniform("u_projection",this.physProjection),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_gravity",this.gravity)}},{key:"setupPhysicsForCoarse",value:function(){var t=this,n=this.gl;this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[];var i,o,a=this.subGraphs.length,s=function(v,p,m,y,b){i[4*v+0]=p,i[4*v+1]=m,i[4*v+2]=b.size(),i[4*v+3]=y||1};if(a===1){i=new Float32Array(262144);var u=this.subGraphs[0].nodes;u.forEach(function(v,p){s(p,0,0,v.weight,{size:function(){return u.length}})}),this.levelsClusterTexture[0]=this.newTexture(n,i,oi)}else for(var l=function(){var v=t.subGraphs[c].nodes,p=c===t.subGraphs.length-1?[]:t.subGraphs[c+1].nodes;i=new Float32Array(262144),o=new Float32Array(65536);var m=0;if(p.length>0){var y=p.slice();y.sort(function(_,w){return _.previousIndex-w.previousIndex}),y.forEach(function(_,w){var x=m,E=p.indexOf(_);s(m,E,x,v[_.id].weight,_),o[m]=v[m].finestIndex,m+=1,_.planets.forEach(function(O){s(m,E,x,O.weight,_),o[m]=v[m].finestIndex,m+=1,O.moons.forEach(function(T){s(m,E,x,T.weight,_),o[m]=v[m].finestIndex,m+=1})})})}else v.forEach(function(_,w){s(w,0,0,_.weight,{size:function(){return v.length}}),o[w]=v[w].finestIndex});var b=t.newTexture(n,null,oi),g=t.newFramebuffer(n,b);t.levelsData[c]={texture:b,frameBuffer:g},t.levelsClusterTexture[c]=t.newTexture(n,i,oi),t.levelsFinestIndexTexture[c]=t.newTexture(n,o,lt,n.FLOAT,n.ALPHA)},c=this.subGraphs.length-1;c>=0;c--)l();for(var f=new Float32Array(262144),h=0;h<f.length;h++)f[h]=0;this.initalLevelTexture=this.newTexture(n,f,oi);var d=this.enableVerlet?`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float PI = 3.1415926535897932384626433832795;
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 1.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getSquaredLogClusterWeight(float value) {
  return pow(log(value), 2.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterArea = pow(clusterSize + u_baseLength * 2.0, 2.0);

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getSquaredLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = (clusterArea * fScale) / (dist * dist);

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.2;
    }

    acceleration += ((delta / sqrt(dist)) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / (dist * dist);
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`:`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getLogClusterWeight(float value) {
  return value / max(log(value), 1.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = ((u_baseLength * u_baseLength) * (fScale / 1.5)) / dist;

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.3;
    }

    acceleration += ((delta / dist) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / dist;
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`;this.apprxRepForceShader=new aa(n,zh,d),this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_projection",this.physSmallProjection)}},{key:"setupPinData",value:function(){var t=this.gl;this.pinTexture=t.createTexture(),this.pinData=new Uint8Array(65536);for(var n=0;n<65536;n++)this.pinData[n]=0;t.bindTexture(t.TEXTURE_2D,this.pinTexture),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,lt,lt,0,t.ALPHA,t.UNSIGNED_BYTE,this.pinData),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}},{key:"setupUpdates",value:function(){var t=this.gl;this.updateData=new Float32Array(65536),this.updateTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.updateTexture),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,lt,lt,0,t.ALPHA,t.FLOAT,this.updateData),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.updateShader=new aa(t,zh,`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_updateData;
uniform float u_numNodesNew;

const float INDEX_FLAG = 999999.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5)*textureSide;

  if (index >= u_numNodesNew) {
    discard;
  }

  float firstValue = getTextureData(u_updateData, index * 2.0, 256.0).a;
  float secondValue = getTextureData(u_updateData, index * 2.0 + 1.0, 256.0).a;

  if (secondValue == INDEX_FLAG) {
    vec4 myPosition = getTextureData(u_physData, firstValue, 256.0);
    gl_FragColor = myPosition;
  } else {
    gl_FragColor = vec4(firstValue, secondValue, 0.0, 0.0);
  }
}
`),this.updateShader.use(),this.updateShader.setUniform("u_projection",this.physProjection)}},{key:"setupReadpixelWorkaround",value:function(){var t=this.gl;this.workaroundShader=new aa(t,zh,`precision lowp float;

uniform sampler2D u_physData;
uniform float u_index;

float shift_right (float v, float amt) { 
    v = floor(v) + 0.5; 
    return floor(v / exp2(amt)); 
}

float shift_left (float v, float amt) { 
    return floor(v * exp2(amt) + 0.5); 
}

float mask_last (float v, float bits) { 
    return mod(v, shift_left(1.0, bits)); 
}

float extract_bits (float num, float from, float to) { 
    from = floor(from + 0.5); to = floor(to + 0.5); 
    return mask_last(shift_right(num, from), to - from); 
}

// From https://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target
vec4 encode_float (float val) { 
    if (val == 0.0) return vec4(0, 0, 0, 0); 
    float sign = val > 0.0 ? 0.0 : 1.0; 
    val = abs(val); 
    float exponent = floor(log2(val)); 
    float biased_exponent = exponent + 127.0; 
    float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
    float t = biased_exponent / 2.0; 
    float last_bit_of_biased_exponent = fract(t) * 2.0; 
    float remaining_bits_of_biased_exponent = floor(t); 
    float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
    float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
    float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
    float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
    return vec4(byte4, byte3, byte2, byte1); 
}

void main(void) {
  vec4 texData = texture2D(u_physData, gl_FragCoord.xy / 255.0);
  float data;
  if (u_index == 0.0) {
    data = texData.x;
  } else if (u_index == 1.0) {
    data = texData.y;
  } else if (u_index == 2.0) {
    data = texData.z;
  } else if (u_index == 3.0) {
    data = texData.w;
  }

  gl_FragColor = encode_float(data);
}
`),this.workaroundShader.use(),this.workaroundShader.setUniform("u_projection",this.physProjection),this.workaroundData=[];for(var n=0;n<4;n++){var i=new Uint8Array(262144),o=this.newTexture(t,null,lt,t.UNSIGNED_BYTE),a=this.newFramebuffer(t,o);this.workaroundData.push({dataByte:i,dataFloat:new Float32Array(i.buffer),texture:o,frameBuffer:a})}}},{key:"doReadpixelWorkaround",value:function(){for(var t=this.gl,n=0;n<4;n++){var i=this.workaroundData[n];t.bindFramebuffer(t.FRAMEBUFFER,i.frameBuffer),t.viewport(0,0,lt,lt),this.workaroundShader.use(),this.workaroundShader.setUniform("u_index",n),this.workaroundShader.setUniform("u_physData",this.getPhysData(0).texture),t.bindBuffer(t.ARRAY_BUFFER,this.physVbo),this.workaroundShader.setAttributePointer("a_position",2,0,2),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.readPixels(0,0,lt,lt,t.RGBA,t.UNSIGNED_BYTE,i.dataByte)}}},{key:"definePhysicsArrays",value:function(){this.physData=[],this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[]}}],e&&R6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function ac(r){return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(r)}function Vh(r){return(function(e){if(Array.isArray(e))return zm(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||(function(e,t){if(e){if(typeof e=="string")return zm(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zm(e,t):void 0}})(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function zm(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function I6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,mR(n.key),n)}}function su(r,e,t){return(e=mR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mR(r){var e=(function(t){if(ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ac(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return ac(e)=="symbol"?e:e+""}var uu="ForceCytoLayout",Gh="forceDirected",qh="coseBilkent",D6=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),su(this,"physLayout",void 0),su(this,"coseBilkentLayout",void 0),su(this,"state",void 0),su(this,"currentLayoutType",void 0),su(this,"enableCytoscape",void 0),su(this,"currentLayout",void 0);var o=n.state,a=n.enableCytoscape;this.enableCytoscape=a==null||a,this.physLayout=new k6(n),this.coseBilkentLayout=new O6({state:o,cytoCompleteCallback:function(){for(i.physLayout.update(!0),i.copyLayoutPositions(i.state.nodes.items,i.coseBilkentLayout,i.physLayout);i.physLayout.update(!1););i.copyLayoutPositions(i.state.nodes.items,i.physLayout,i.coseBilkentLayout)},animationCompleteCallback:function(){i.currentLayoutType===qh&&setTimeout(function(){return i.setLayout(Gh)},50)}}),this.currentLayout=this.physLayout,this.currentLayoutType=Gh;var s=o.nodes,u=o.rels;s.addChannel(uu),u.addChannel(uu),this.state=o},e=[{key:"setOptions",value:function(t){t!==void 0&&(this.currentLayout.setOptions(t),this.enableCytoscape=t.enableCytoscape)}},{key:"getLayout",value:function(t){return t===qh?this.coseBilkentLayout:this.physLayout}},{key:"setLayout",value:function(t){if(t!==this.currentLayoutType){Wt.info("Switching to layout: ".concat(t," in ForceCyto"));var n=this.getLayout(t);this.currentLayout=n,this.currentLayoutType=t}}},{key:"copyLayoutPositions",value:function(t,n,i){var o=n.getNodePositions(t);i.updateNodes(o)}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.state,i=n.nodes,o=n.rels,a=i.channels[uu],s=o.channels[uu],u=Object.values(a.adds).length,l=Object.values(s.adds).length,c=Object.values(a.adds).map(function(T){return T.id}),f=Object.values(s.adds).map(function(T){return T.id}),h=new Set(Object.keys(a.adds)),d=new Set(Object.keys(s.adds));if(i.clearChannel(uu),o.clearChannel(uu),this.currentLayoutType===Gh&&this.enableCytoscape&&i.items.length<=100&&u<100&&u>0&&l>0){var v=i.items.map(function(T){return T.id}),p=new Set([].concat(Vh(v),Vh(c))),m=o.items.map(function(T){return T.id}),y=new Set([].concat(Vh(m),Vh(f)));if(p.size<=100&&y.size<=300){var b=(function(T,C,P,R){var k,I=new Set(T),M=Rl(new Set(C));try{for(M.s();!(k=M.n()).done;){var j=k.value,L=R.idToItem[j];if(L){var F=L.from,z=L.to;I.add(F),I.add(z)}}}catch(ne){M.e(ne)}finally{M.f()}var V,G=(function(ne){var K,$={},Z={},ae=Rl(ne);try{for(ae.s();!(K=ae.n()).done;){for(var se=K.value,fe=se.from,ge=se.to,ye="".concat(fe,"-").concat(ge),pe="".concat(ge,"-").concat(fe),N=0,B=[ye,pe];N<B.length;N++){var q=B[N];Z[q]!==void 0?Z[q].push(se):Z[q]=[se]}$[fe]||($[fe]=new Set),$[ge]||($[ge]=new Set),$[fe].add(ge),$[ge].add(fe)}}catch(re){ae.e(re)}finally{ae.f()}return{adjNodesMap:$,relMap:Z}})(R.items),Y=G.adjNodesMap,ie=G.relMap,W={},H={},Q=function(ne){var K=[];for(W[ne]||K.push(ne);K.length>0;){var $=K.shift();if(W[$]=P.idToItem[$],Y[$]!==void 0){var Z,ae=Rl(Y[$]);try{for(ae.s();!(Z=ae.n()).done;){var se=Z.value;if(!W[se]){K.push(se);var fe=ie["".concat($,"-").concat(se)];if(fe){var ge,ye=Rl(fe);try{for(ye.s();!(ge=ye.n()).done;){var pe=ge.value;H[pe.id]||(H[pe.id]=pe)}}catch(N){ye.e(N)}finally{ye.f()}}}}}catch(N){ae.e(N)}finally{ae.f()}}}},J=Rl(I);try{for(J.s();!(V=J.n()).done;)Q(V.value)}catch(ne){J.e(ne)}finally{J.f()}return{connectedNodes:W,connectedRels:H}})(h,d,i,o),g=b.connectedNodes,_=b.connectedRels,w=Object.values(g),x=Object.values(_),E=w.length,O=x.length;E===h.size&&O===d.size&&(d.size>0||h.size>0)?(this.setLayout(qh),this.coseBilkentLayout.update(!0,i.items,o.items)):O>0&&d.size/O>.25&&(this.setLayout(qh),this.coseBilkentLayout.update(!0,w,x))}}this.physLayout.update(t),this.coseBilkentLayout.update(t)}},{key:"getShouldUpdate",value:function(){return this.currentLayout.getShouldUpdate()}},{key:"getComputing",value:function(){return this.currentLayout.getComputing()}},{key:"updateNodes",value:function(t){this.setLayout(Gh),this.physLayout.updateNodes(t)}},{key:"getNodePositions",value:function(t){return this.currentLayout.getNodePositions(t)}},{key:"terminateUpdate",value:function(){this.physLayout.terminateUpdate(),this.coseBilkentLayout.terminateUpdate()}},{key:"destroy",value:function(){this.physLayout.destroy(),this.coseBilkentLayout.destroy()}}],e&&I6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function sc(r){return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(r)}function lT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function M6(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lT(Object(t),!0).forEach(function(n){ql(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cT(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return fT(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?fT(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function fT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function N6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,bR(n.key),n)}}function ql(r,e,t){return(e=bR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bR(r){var e=(function(t){if(sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(sc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return sc(e)=="symbol"?e:e+""}var Gi="FreeLayout",L6=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),ql(this,"state",void 0),ql(this,"positions",void 0),ql(this,"shouldUpdate",void 0),ql(this,"stateDisposers",void 0);var o=n.state;this.state=o,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)}));var a=this.state,s=a.nodes,u=a.rels;s.addChannel(Gi),u.addChannel(Gi),this.shouldUpdate=!0,this.setOptions(),this.layout(s.items,s.idToItem,s.idToPosition)},e=[{key:"setOptions",value:function(){}},{key:"updateNodes",value:function(t){var n,i=cT(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.x!==void 0&&o.y!==void 0&&(this.positions[o.id]={x:o.x,y:o.y}),this.shouldUpdate=!0}}catch(a){i.e(a)}finally{i.f()}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||t){var n=this.state,i=n.nodes,o=n.rels,a=Object.values(i.channels[Gi].adds).length>0,s=Object.values(o.channels[Gi].adds).length>0,u=Object.values(i.channels[Gi].removes).length>0,l=Object.values(o.channels[Gi].removes).length>0;(a||s||u||l)&&this.layout(i.items,i.idToItem,i.idToPosition),i.clearChannel(Gi),o.clearChannel(Gi)}this.shouldUpdate=!1}},{key:"layout",value:function(t,n,i){var o,a=(o=t)!==void 0?Pn(o):o;if(!(0,Qt.isEmpty)(a)){for(var s={},u=0;u<a.length;++u){var l,c=a[u].id,f=(l=i[c])!==null&&l!==void 0?l:{},h=f.x,d=h===void 0?0:h,v=f.y,p=v===void 0?0:v;s[c]={id:c,x:d,y:p}}this.positions=s,this.shouldUpdate=!1}}},{key:"setNodePositions",value:function(t){this.positions=t}},{key:"getNodePositions",value:function(t){var n,i=[],o=cT(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=this.positions[a.id],u=M6({id:a.id},s);i.push(u)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){}},{key:"destroy",value:function(){this.state.nodes.removeChannel(Gi),this.state.rels.removeChannel(Gi)}}],e&&N6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function uc(r){return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(r)}function hT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(t),!0).forEach(function(n){j6(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function j6(r,e,t){return(e=_R(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vT(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return pT(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?pT(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function pT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function F6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,_R(n.key),n)}}function _R(r){var e=(function(t){if(uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(uc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return uc(e)=="symbol"?e:e+""}var qi="GridLayout",B6=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t);var o=n.state;this.state=o,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)}));var a=this.state,s=a.nodes,u=a.rels;s.addChannel(qi),u.addChannel(qi),this.shouldUpdate=!0,this.setOptions(n),this.layout(s.items,s.idToItem,s.idToPosition,u.items)},e=[{key:"setOptions",value:function(t){}},{key:"updateNodes",value:function(t){var n,i=vT(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.x!==void 0&&o.y!==void 0&&(this.positions[o.id]={x:o.x,y:o.y}),this.shouldUpdate=!0}}catch(a){i.e(a)}finally{i.f()}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||t){var n=this.state,i=n.nodes,o=n.rels,a=Object.values(i.channels[qi].adds).length>0,s=Object.values(o.channels[qi].adds).length>0,u=Object.values(i.channels[qi].removes).length>0,l=Object.values(o.channels[qi].removes).length>0;(a||s||u||l)&&(this.layout(i.items,i.idToItem,i.idToPosition,o.items),i.idToPosition=this.positions),i.clearChannel(qi),o.clearChannel(qi)}this.shouldUpdate=!1}},{key:"layout",value:function(t,n,i,o){var a,s=(a=t)?Pn(a):a;if(!(0,Qt.isEmpty)(s)){for(var u=s.length,l=Math.ceil(Math.sqrt(u)),c=new Array(u),f=0,h=0;h<l;++h){for(var d=0;d<l&&(c[f]={y:0+150*h,x:0+150*d},(f+=1)!==u);++d);if(f===u)break}for(var v=s.sort(),p={},m=0;m<u;++m){var y=v[m],b=c[m];y.x===b.x&&y.y===b.y||(p[y.id]=dT({id:y.id},b))}this.positions=p,this.shouldUpdate=!1}}},{key:"getNodePositions",value:function(t){var n,i=[],o=vT(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=this.positions[a.id],u=dT({id:a.id},s);i.push(u)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){this.shouldUpdate=!1}},{key:"destroy",value:function(){this.state.nodes.removeChannel(qi),this.state.rels.removeChannel(qi)}}],e&&F6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),U6=new Set(["direction","packing"]),z6="forceDirected",Cd="hierarchical",V6="grid",G6="free",q6="d3Force",sb="webgl",ub="canvas";function lc(r){return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(r)}function Wh(r,e,t){return(e=(function(n){var i=(function(o){if(lc(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(lc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return lc(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var lb="down",W6=Wh(Wh(Wh(Wh({},"up","BT"),lb,"TB"),"left","RL"),"right","LR"),cb="bin",H6=[cb,"stack"],Y6=["html"],X6=["html"],$6=["captionHtml"];function Ru(r){return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(r)}function Vm(r,e){if(r==null)return{};var t,n,i=(function(a,s){if(a==null)return{};var u={};for(var l in a)if({}.hasOwnProperty.call(a,l)){if(s.indexOf(l)!==-1)continue;u[l]=a[l]}return u})(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function K6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ER(n.key),n)}}function wR(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wR=function(){return!!r})()}function fb(){return fb=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=(function(o,a){for(;!{}.hasOwnProperty.call(o,a)&&(o=ku(o))!==null;);return o})(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},fb.apply(null,arguments)}function ku(r){return ku=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ku(r)}function hb(r,e){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},hb(r,e)}function Wi(r,e,t){return(e=ER(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ER(r){var e=(function(t){if(Ru(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ru(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Ru(e)=="symbol"?e:e+""}var En="HierarchicalLayout",Hh=function(r){return r!==void 0?Pn(r):r},Z6=(function(){function r(n){var i;(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,r),Wi(i=(function(u,l,c){return l=ku(l),(function(f,h){if(h&&(Ru(h)=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d})(f)})(u,wR()?Reflect.construct(l,c||[],ku(u).constructor):l.apply(u,c))})(this,r,[n]),"direction",void 0),Wi(i,"packing",void 0),Wi(i,"stateDisposers",void 0),Wi(i,"oldComputing",void 0),Wi(i,"computing",void 0),Wi(i,"pendingLayoutData",void 0),Wi(i,"worker",void 0),Wi(i,"directionChanged",void 0),Wi(i,"packingChanged",void 0),Wi(i,"workersDisabled",void 0),i.direction=lb,i.packing=cb;var o=i.state,a=o.nodes,s=o.rels;return a.addChannel(En),s.addChannel(En),i.stateDisposers=[i.state.reaction(function(){return i.state.graphUpdates},function(){if(a.version!==void 0){var u=a.channels[En],l=Object.values(u.adds).length>0,c=Object.values(u.removes).length>0,f=Object.values(u.updates),h=$c(f);i.shouldUpdate=i.shouldUpdate||l||c||h}if(s.version!==void 0){var d=s.channels[En],v=Object.values(d.adds).length>0,p=Object.values(d.removes).length>0;i.shouldUpdate=i.shouldUpdate||v||p}})],i.shouldUpdate=!0,i.oldComputing=!1,i.computing=!1,i.workersDisabled=n.state.disableWebWorkers,i.setOptions(n),i.worker=lR("HierarchicalLayout",i.workersDisabled),i.pendingLayoutData=null,i.layout(a.items,a.idToItem,a.idToPosition,s.items),i}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&hb(n,i)})(r,fR),e=r,t=[{key:"setOptions",value:function(n){if(n!==void 0&&(function(u){return Object.keys(u).every(function(l){return U6.has(l)})})(n)){var i=n.direction,o=i===void 0?lb:i,a=n.packing,s=a===void 0?cb:a;Object.keys(W6).includes(o)&&(this.directionChanged=this.direction&&this.direction!==o,this.direction=o),H6.includes(s)&&(this.packingChanged=this.packing&&this.packing!==s,this.packing=s),this.shouldUpdate=this.shouldUpdate||this.directionChanged||this.packingChanged}}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||n){var i=this.state,o=i.nodes,a=i.rels,s=this.directionChanged,u=this.packingChanged,l=Object.values(o.channels[En].adds).length>0,c=Object.values(a.channels[En].adds).length>0,f=Object.values(o.channels[En].removes).length>0,h=Object.values(a.channels[En].removes).length>0,d=Object.values(o.channels[En].updates),v=$c(d);(n||l||c||f||h||s||u||v)&&this.layout(o.items,o.idToItem,o.idToPosition,a.items),o.clearChannel(En),a.clearChannel(En),this.directionChanged=!1,this.packingChanged=!1}(function(p,m,y){var b=fb(ku(p.prototype),"update",y);return typeof b=="function"?function(g){return b.apply(y,g)}:b})(r,0,this)([]),this.shouldUpdate=!1,this.oldComputing=this.computing}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(n,i,o,a){var s=this;if(this.worker){var u=Hh(n).map(function(y){return y.html,Vm(y,Y6)}),l=Hh(i),c={};Object.keys(l).forEach(function(y){var b=l[y],g=(b.html,Vm(b,X6));c[y]=g});var f=Hh(a).map(function(y){return y.captionHtml,Vm(y,$6)}),h=Hh(o),d=this.direction,v=this.packing,p=window.devicePixelRatio,m={nodes:u,nodeIds:c,idToPosition:h,rels:f,direction:d,packing:v,pixelRatio:p,forcedDelay:0};this.computing?this.pendingLayoutData=m:(this.worker.port.onmessage=function(y){var b=y.data,g=b.positions,_=b.parents,w=b.waypoints;s.computing&&(s.positions=g),s.parents=_,s.state.setWaypoints(w),s.pendingLayoutData!==null?(s.worker.port.postMessage(s.pendingLayoutData),s.pendingLayoutData=null):s.computing=!1,s.shouldUpdate=!0,s.startAnimation()},this.computing=!0,this.worker.port.postMessage(m))}else Wt.info("Hierarchical layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){var n,i;this.computing=!1,this.shouldUpdate=!1,(n=this.state.nodes)===null||n===void 0||n.clearChannel(En),(i=this.state.rels)===null||i===void 0||i.clearChannel(En)}},{key:"destroy",value:function(){var n;this.stateDisposers.forEach(function(i){i()}),this.state.nodes.removeChannel(En),this.state.rels.removeChannel(En),(n=this.worker)===null||n===void 0||n.port.close()}}],t&&K6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t})();function cc(r){return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(r)}function Q6(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,OR(n.key),n)}}function Hi(r,e,t){return(e=OR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function OR(r){var e=(function(t){if(cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(cc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return cc(e)=="symbol"?e:e+""}var J6=(function(){return r=function t(n,i){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),Hi(this,"elementId",void 0),Hi(this,"currentValue",void 0),Hi(this,"startValue",void 0),Hi(this,"currentTime",void 0),Hi(this,"duration",void 0),Hi(this,"status",void 0),Hi(this,"endValue",void 0),Hi(this,"startTime",void 0),Hi(this,"endTime",void 0),Hi(this,"hasNextAnimation",void 0),this.elementId=n,this.startValue=i,this.status=0,this.currentValue=i,this.duration=0},(e=[{key:"setDuration",value:function(t){this.duration=t,this.setEndTime(this.startTime+this.duration)}},{key:"getStatus",value:function(){return this.status}},{key:"advance",value:function(){if(this.status!==1)return!1;this.currentTime=new Date().getTime();var t,n=this.endTime-this.startTime;return(t=n>0?(this.currentTime-this.startTime)/n:1)>=1?(this.currentValue=this.endValue,this.status=2):(this.currentValue=this.startValue+t*(this.endValue-this.startValue),this.hasNextAnimation=!0),this.hasNextAnimation}},{key:"setEndValue",value:function(t){this.endValue!==t&&(t-this.currentValue!==0?(this.currentTime=new Date().getTime(),this.status=1,this.startValue=this.currentValue,this.endValue=t,this.startTime=this.currentTime,this.setEndTime(this.startTime+this.duration)):this.endValue=t)}},{key:"setEndTime",value:function(t){this.endTime=Math.max(t,this.startTime)}}])&&Q6(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function fc(r){return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(r)}function gT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gT(Object(t),!0).forEach(function(n){ls(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function e8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,xR(n.key),n)}}function ls(r,e,t){return(e=xR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xR(r){var e=(function(t){if(fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(fc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return fc(e)=="symbol"?e:e+""}var t8=(function(){return r=function t(){(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),ls(this,"animations",void 0),ls(this,"durations",void 0),ls(this,"defaultDuration",void 0),ls(this,"hasNextAnimation",void 0),ls(this,"ignoreAnimationsFlag",void 0),this.animations=new Map,this.durations=[],this.durations[0]=0,this.durations[1]=0,this.defaultDuration=150,this.hasNextAnimation=!1,this.ignoreAnimationsFlag=!1},e=[{key:"advance",value:function(){var t=this;return this.hasNextAnimation=!1,this.animations.forEach(function(n){Object.values(n).forEach(function(i){i.advance()&&(t.hasNextAnimation=!0)})}),this.hasNextAnimation}},{key:"ignoreAnimations",value:function(t){this.ignoreAnimationsFlag=t}},{key:"setOptions",value:function(t){t.fadeDuration!==void 0&&(this.durations[0]=t.fadeDuration),t.sizeDuration!==void 0&&(this.durations[1]=t.sizeDuration)}},{key:"needsToRun",value:function(){return this.hasNextAnimation}},{key:"getValueForAnimationName",value:function(t,n,i){var o,a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(this.ignoreAnimationsFlag)return i;var u=(o=this.getById(t))!==null&&o!==void 0?o:{};if(u[n]===void 0){var l=s===1?this.createSizeAnimation(0,t,n):this.createFadeAnimation(0,t,n);l.setEndValue(i),a=l.currentValue}else{var c=u[n];if(c.currentValue===i)return i;c.setEndValue(i),a=c.currentValue}return this.hasNextAnimation=!0,a}},{key:"createAnimation",value:function(t,n,i){var o,a=new J6(n,t),s=(o=this.animations.get(n))!==null&&o!==void 0?o:{};return this.animations.set(n,yT(yT({},s),{},ls({},i,a))),a}},{key:"getById",value:function(t){return this.animations.get(t)}},{key:"createFadeAnimation",value:function(t,n,i){var o,a=this.createAnimation(t,n,i);return a.setDuration((o=this.durations[0])!==null&&o!==void 0?o:this.defaultDuration),a}},{key:"createSizeAnimation",value:function(t,n,i){var o,a=this.createAnimation(t,n,i);return a.setDuration((o=this.durations[1])!==null&&o!==void 0?o:this.defaultDuration),a}}],e&&e8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function hc(r){return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(r)}function r8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,SR(n.key),n)}}function SR(r){var e=(function(t){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(hc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return hc(e)=="symbol"?e:e+""}var ai=64,n8=(function(){return r=function t(){var n,i,o;(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,o=void 0,(i=SR(i="cache"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.cache={}},e=[{key:"getImage",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.getOrCreateEntry(t),o=n?"inverted":"image",a=i[o];return a===void 0&&(a=this.loadImage(t),i[o]=a),this.drawIfNeeded(a,n),a.canvas}},{key:"getOrCreateEntry",value:function(t){return this.cache[t]===void 0&&(this.cache[t]={}),this.cache[t]}},{key:"invertCanvas",value:function(t){for(var n=t.getImageData(0,0,ai,ai),i=n.data,o=0;o<4096;o++){var a=4*o;i[a]^=255,i[a+1]^=255,i[a+2]^=255}t.putImageData(n,0,0)}},{key:"loadImage",value:function(t){var n=document.createElement("canvas");n.width=ai,n.height=ai;var i=new Image;return i.src=t,i.crossOrigin="anonymous",{canvas:n,image:i,drawn:!1}}},{key:"drawIfNeeded",value:function(t,n){var i=t.image,o=t.canvas;if(!t.drawn&&i.complete){var a=o.getContext("2d");try{a.drawImage(i,0,0,ai,ai)}catch(s){Wt.error("Failed to draw image",i.src,s),a.beginPath(),a.strokeStyle="black",a.rect(0,0,ai,ai),a.moveTo(0,0),a.lineTo(ai,ai),a.moveTo(0,ai),a.lineTo(ai,0),a.stroke(),a.closePath()}n&&this.invertCanvas(a),t.drawn=!0}}}],e&&r8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();const i8=n8;function dc(r){return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(r)}function mT(r,e){if(r){if(typeof r=="string")return db(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?db(r,e):void 0}}function db(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function o8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,TR(n.key),n)}}function Ho(r,e,t){return(e=TR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TR(r){var e=(function(t){if(dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(dc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return dc(e)=="symbol"?e:e+""}var a8=(function(){return r=function t(n,i,o){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),Ho(this,"key",void 0),Ho(this,"rels",void 0),Ho(this,"waypointPath",void 0),Ho(this,"selfReferring",void 0),Ho(this,"fromId",void 0),Ho(this,"toId",void 0),Ho(this,"angles",void 0),Ho(this,"labelInfo",void 0),this.key=n,this.rels=new Map,this.selfReferring=i===o,this.fromId=i,this.toId=o,this.labelInfo={},this.angles=[]},e=[{key:"insert",value:function(t){this.rels.set(t.id,t)}},{key:"setLabelInfo",value:function(t,n){this.labelInfo[t]=n}},{key:"has",value:function(t){var n=t.id;return this.rels.has(n)}},{key:"remove",value:function(t){var n=t.id;if(this.rels.has(n)&&(this.rels.delete(n),this.size()>0)){var i=(function(o,a){return(function(s){if(Array.isArray(s))return s})(o)||(function(s,u){var l=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var c,f,h,d,v=[],p=!0,m=!1;try{if(h=(l=l.call(s)).next,u!==0)for(;!(p=(c=h.call(l)).done)&&(v.push(c.value),v.length!==u);p=!0);}catch(y){m=!0,f=y}finally{try{if(!p&&l.return!=null&&(d=l.return(),Object(d)!==d))return}finally{if(m)throw f}}return v}})(o,a)||mT(o,a)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()})(this.relArray(),1)[0];this.fromId=i.from,this.toId=i.to}}},{key:"size",value:function(){return this.rels.size}},{key:"relArray",value:function(){return Array.from(this.rels.values())}},{key:"maxFontSize",value:function(){if(this.size()===0)return 1;var t=this.relArray().map(function(n){return(0,Qt.isNumber)(n.captionSize)?n.captionSize:1});return Math.max.apply(Math,(function(n){return(function(i){if(Array.isArray(i))return db(i)})(n)||(function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)})(n)||mT(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()})(t))}},{key:"relIsOppositeDirection",value:function(t){var n=t.from,i=t.to,o=this.fromId,a=this.toId;return n!==o&&i!==a||n===a&&i===o}},{key:"indexOf",value:function(t){var n=t.id,i=Array.from(this.rels.keys());return this.rels.has(n)?i.indexOf(n):-1}},{key:"getRel",value:function(t){var n=this.relArray();return t<0||t>=n.length?null:n[t]}},{key:"setWaypoints",value:function(t){this.waypointPath=t}},{key:"setAngles",value:function(t){this.angles=t}}],e&&o8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),bT=eR,_T=2*Math.PI/50,wT=.1*Math.PI;function vc(r){return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(r)}function ET(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=CR(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function OT(r){return(function(e){if(Array.isArray(e))return vb(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||CR(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function CR(r,e){if(r){if(typeof r=="string")return vb(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vb(r,e):void 0}}function vb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function s8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,PR(n.key),n)}}function xT(r,e,t){return(e=PR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function PR(r){var e=(function(t){if(vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(vc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return vc(e)=="symbol"?e:e+""}var u8=function(r){var e=[];if(r.length===0)e.push({size:2*Math.PI,start:0});else{for(var t=r.length-1;t>=0;t--){var n=void 0,i=void 0;t===0?(i=r[r.length-1],n=r[t]-r[r.length-1]+2*Math.PI):(i=r[t-1],n=r[t]-r[t-1]),e.push({size:n,start:i})}e.sort(function(o,a){return a.size-o.size})}return e},l8=function(r,e){for(;e>r.length||r[0].size>2*r[e-1].size;)r.push({size:r[0].size/2,start:r[0].start}),r.push({size:r[0].size/2,start:r[0].start+r[0].size/2}),r.shift(),r.sort(function(t,n){return n.size-t.size});return r},c8=(function(){return r=function t(n,i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),xT(this,"bundles",void 0),xT(this,"nodeToBundles",void 0),this.bundles={},this.nodeToBundles={};var o=n.reduce(function(a,s){return a[s.id]=s,a},{});this.updateData(o,{},{},i)},e=[{key:"getBundle",value:function(t){var n=this.bundles,i=this.nodeToBundles,o=this.generatePairId(t.from,t.to),a=n[o];return a===void 0&&(a=new a8(o,t.from,t.to),n[o]=a,i[t.from]===void 0&&(i[t.from]=[]),i[t.to]===void 0&&(i[t.to]=[]),i[t.from].push(a),i[t.to].push(a)),a}},{key:"updateData",value:function(t,n,i,o){var a,s=this.bundles,u=this.nodeToBundles,l=function(w,x){var E=u[x].findIndex(function(O){return O===w});E!==-1&&u[x].splice(E,1),u[x].length===0&&delete u[x]},c=[].concat(OT(Object.values(t)),OT(Object.values(i))),f=Object.values(n),h=ET(c);try{for(h.s();!(a=h.n()).done;){var d=a.value;this.getBundle(d).insert(d)}}catch(w){h.e(w)}finally{h.f()}for(var v=0,p=f;v<p.length;v++){var m=p[v],y=this.getBundle(m);y.remove(m),y.size()===0&&(delete s[y.key],l(y,m.from),l(y,m.to))}for(var b=0,g=Object.keys(s);b<g.length;b++){var _=s[g[b]];_.setWaypoints(o["".concat(_.fromId,"-").concat(_.toId)])}}},{key:"updatePositions",value:function(t){for(var n=this.nodeToBundles,i=0,o=Object.keys(t);i<o.length;i++){var a,s=o[i],u=(a=n[s])!==null&&a!==void 0?a:[];if(u.length!==0){var l=u.find(function(O){return O.selfReferring}),c=u.filter(function(O){return!O.selfReferring});if(l!==void 0){var f,h=[],d=ET(c);try{for(d.s();!(f=d.n()).done;){var v=f.value,p=t[v.fromId],m=t[v.toId];if(p!==void 0&&m!==void 0)for(var y=_T*v.size(),b=p.id===s?Math.atan2(m.y-p.y,m.x-p.x):Math.atan2(p.y-m.y,p.x-m.x),g=0;g<v.size();g++)h.push(b+y/2-g*_T);else{var _=p===void 0?v.fromId:v.toId;Wt.warn("Arrowbundler: Node with id ".concat(_," is not in position map"))}}}catch(O){d.e(O)}finally{d.f()}var w=h.map(function(O){return(O+2*Math.PI)%(2*Math.PI)}).sort(),x=u8(w);l8(x,l.size());var E=x.map(function(O){return O.start+O.size/2}).slice(0,l.size());l.setAngles(E)}}}}},{key:"generatePairId",value:function(t,n){return[t.toString(),n.toString()].sort(function(i,o){return i.localeCompare(o)}).join("-")}}],e&&s8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function pc(r){return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(r)}function ST(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function f8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,AR(n.key),n)}}function cs(r,e,t){return(e=AR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function AR(r){var e=(function(t){if(pc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(pc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return pc(e)=="symbol"?e:e+""}var Fv=function(r,e){return(0,Qt.isFinite)(r.x)&&(0,Qt.isFinite)(r.y)&&(0,Qt.isFinite)(e.x)&&(0,Qt.isFinite)(e.y)},Yh=function(r,e){if(r===void 0||e===void 0||!Fv(r,e))return!1;var t=e.x-r.x,n=e.y-r.y,i=ir();return t*t+n*n<100*i*i},fn=(function(){return r=function t(n,i){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),cs(this,"p1",void 0),cs(this,"p2",void 0),cs(this,"unit",void 0),cs(this,"norm",void 0),cs(this,"length",void 0),cs(this,"vector",void 0),this.p1=n,this.p2=i,this.vector=this.getVector(),this.length=this.getLength(),this.unit=this.getUnitVector(),this.norm=this.getUnitNormalVector()},e=[{key:"getVector",value:function(){return{x:this.p2.x-this.p1.x,y:this.p2.y-this.p1.y}}},{key:"getLength",value:function(){var t=this.vector,n=t.x,i=t.y;return Math.sqrt(n*n+i*i)}},{key:"getUnitVector",value:function(){var t=this.vector,n=this.length;return{x:t.x/n,y:t.y/n}}},{key:"getUnitNormalVector",value:function(){return{x:this.unit.y,y:-this.unit.x}}}],e&&f8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),A_=function(r,e,t){var n={x:e.x-r.x,y:e.y-r.y},i=(function(l,c){var f=(l.x*c.x+l.y*c.y)/(c.x*c.x+c.y*c.y);return(0,Qt.clamp)(f,0,1)})({x:t.x-r.x,y:t.y-r.y},n),o=r.x+i*n.x,a=r.y+i*n.y,s=o-t.x,u=a-t.y;return Math.sqrt(s*s+u*u)},h8=function(r,e,t,n){if(e.x===t.x&&e.y===t.y)return e;var i=e.y-r.y,o=r.x-e.x,a=i*r.x+o*r.y,s=n.y-t.y,u=t.x-n.x,l=s*t.x+u*t.y,c=i*u-s*o;return c===0?null:{x:(u*a-o*l)/c,y:(i*l-s*a)/c}},Gm=function(r,e,t,n){var i,o,a,s=1e9,u=(function(c){for(var f=1;f<arguments.length;f++){var h=arguments[f]!=null?arguments[f]:{};f%2?ST(Object(h),!0).forEach(function(d){cs(c,d,h[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(h)):ST(Object(h)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(h,d))})}return c})({},r),l={x:0,y:0};for(o=1;o<10;o++)a=.1*o,l.x=Math.pow(1-a,2)*r.x+2*a*(1-a)*t.x+Math.pow(a,2)*e.x,l.y=Math.pow(1-a,2)*r.y+2*a*(1-a)*t.y+Math.pow(a,2)*e.y,o>0&&(s=(i=A_(u,l,n))<s?i:s),u.x=l.x,u.y=l.y;return s},d8=_r(3269),RR=_r.n(d8);function gc(r){return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(r)}function Ml(r){return(function(e){if(Array.isArray(e))return pb(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||kR(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function TT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rv(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TT(Object(t),!0).forEach(function(n){v8(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):TT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function v8(r,e,t){return(e=(function(n){var i=(function(o){if(gc(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(gc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return gc(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kR(r,e){if(r){if(typeof r=="string")return pb(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?pb(r,e):void 0}}function pb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var nv="",CT=function(r){return!(!r||!isNaN(Number(r))||r.toLowerCase()===r.toUpperCase())&&r===r.toUpperCase()},p8=function(r){var e=r[r.length-1],t=r[r.length-2];return!(!e||!isNaN(Number(e))||e.toLowerCase()===e.toUpperCase())&&!(!t||!isNaN(Number(t))||t.toLowerCase()===t.toUpperCase())&&CT(e)&&!CT(t)},g8=function(r){return` 	
\r\v`.includes(r)},gb=function(r,e,t,n){for(var i,o=arguments.length>4&&arguments[4]!==void 0&&arguments[4],a=[],s=[],u=0,l=0,c=!1,f=!1,h=0;h<n;h++)a[h]=t(h,n);for(var d,v=function(){i=r.slice(u,p);var m,y=e(i),b=a[l];if(y>b||(m=r[p-1],`
\r\v`.includes(m))){if(!(l<n-1)){if(o)return{v:[]};for(var g=p,_=function(){return r[g-1]};y>b;){for(g-=1;g8(_());)g-=1;if(!(g-u>1)){i="",f=!0,c=!1;break}i=r.slice(u,g),y=e(i),f=!0,c=!1}return s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:c},{v:s}}c=!1,f=!1;var w=(function(E){var O=E.length,T=Math.min(O-1,3);if(O===1)return{hyphen:!1,cnt:0};for(var C=0;C<T;C++){var P=E[E.length-(C+1)];if(P===" "||P.toLowerCase()===P.toUpperCase())return{hyphen:!1,cnt:C+1};var R=E.slice(0,E.length-C);if(p8(R))return{hyphen:!1,cnt:C+1}}return{hyphen:!0,cnt:1}})(i),x=p-w.cnt;if(w.hyphen)for(i=r.slice(u,x),y=e(i),c=!0;y>b;){if(!(x-u>1)){i=r[u],x=u+1,y=e(i),c=!1;break}x-=1,i=r.slice(u,x),y=e(i),c=!0}else i=(i=r.slice(u,x)).trim();s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:c},u=x,l+=1}},p=1;p<=r.length;p++)if(d=v())return d.v;return i=r.slice(u,r.length),s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:!1},s},PT=function(r,e,t,n,i,o,a,s){r.font="bold ".concat(n,"px ").concat(t).replace(/"/g,"");for(var u=function(v){var p;return(p=r.measureText(v))===null||p===void 0?void 0:p.width},l=o?(a<4?["",""]:[""]).length:0,c=function(v,p){return(function(m,y,b){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"top",_=.98*b,w=.89*b,x=.95*b;return y===1?_:y===2?x:y===3&&g==="top"?m===0||m===2?w:_:y===4&&g==="top"?m===0||m===3?.78*b:x:y===5&&g==="top"?m===0||m===4?.65*b:m===1||m===3?w:x:_})(v+l,p+l,i)},f=1,h=[],d=function(){if((h=(function(p,m,y,b){var g,_=p.split(/\s/g).filter(function(k){return k.length>0}),w=[],x=null,E=function(k){return m(k)>y(w.length,b)},O=(function(k){var I=typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(!I){if(Array.isArray(k)||(I=kR(k))){I&&(k=I);var M=0,j=function(){};return{s:j,n:function(){return M>=k.length?{done:!0}:{done:!1,value:k[M++]}},e:function(V){throw V},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L,F=!0,z=!1;return{s:function(){I=I.call(k)},n:function(){var V=I.next();return F=V.done,V},e:function(V){z=!0,L=V},f:function(){try{F||I.return==null||I.return()}finally{if(z)throw L}}}})(_);try{for(O.s();!(g=O.n()).done;){var T=g.value,C=x?"".concat(x," ").concat(T):T;if(m(C)<y(w.length,b))x=C;else{if(x!==null){var P=E(x);w.push({text:x,overflowed:P})}if(x=T,w.length>b)return[]}}}catch(k){O.e(k)}finally{O.f()}if(x){var R=E(x);w.push({text:x,overflowed:R})}return w.length<=b?w:[]})(e,u,c,f)).length===0)h=gb(e,u,c,f,a>f);else if(h.some(function(p){return p.overflowed})){var v=f;h=h.reduce(function(p,m){var y=a-p.length;if(y===0){var b=p[p.length-1];return b.text.endsWith(nv)||(u(b.text)+u(nv)>c(p.length,v)?(p[p.length-1].text=b.text.slice(0,-2),p[p.length-1].hasEllipsisChar=!0):(p[p.length-1].text=b.text,p[p.length-1].hasEllipsisChar=!0)),p}if(m.overflowed){var g=gb(m.text,u,c,y);p=p.concat(g)}else p.push({text:m.text,hasEllipsisChar:!1,hasHyphenChar:!1});return p},[])}else h=h.map(function(p){return rv(rv({},p),{},{hasEllipsisChar:!1,hasHyphenChar:!1})});f+=1};h.length===0;)d();return Array.from(h)},IR=function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(e,t,n){var i=t.value;if(i){var o="".concat(n>0&&e.length?", ":"").concat(i);return[].concat(Ml(e),[rv(rv({},t),{},{value:o,chars:o.split("").map(function(a,s){var u,l;return n!==0&&e.length?s<2?null:Ml((u=t.styles)!==null&&u!==void 0?u:[]):Ml((l=t.styles)!==null&&l!==void 0?l:[])})})])}return[]},[]);return{stylesPerChar:r.reduce(function(e,t){return[].concat(Ml(e),Ml(t.chars))},[]),fullCaption:r.map(function(e){return e.value}).join("")}};function qm(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var y8=[[.04,1],[100,2]],Pd=[[.8,1.1],[3,1.6],[8,2.5]],m8=[[Pd[0][0],1],[100,1.25]],is=function(r,e){if(r.includes("rgba"))return r;if(r.includes("rgb")){var t=r.substr(r.indexOf("(")+1).replace(")","").split(",");return"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(e,")")}var n=RR().get.rgb(r);return n===null?r:"rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(e,")")},Yo=function(r,e,t,n){var i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=arguments.length>5&&arguments[5]!==void 0&&arguments[5],a=n.headPosition,s=n.headAngle,u=n.headHeight,l=n.headChinHeight,c=n.headWidth,f=Math.cos(s),h=Math.sin(s),d=function(m,y){return{x:a.x+m*f-y*h,y:a.y+m*h+y*f}},v=[d(l-u,0),d(-u,c/2),d(0,0),d(-u,-c/2)],p={lineWidth:r.lineWidth,strokeStyle:r.strokeStyle,fillStyle:r.fillStyle};r.lineWidth=e,r.strokeStyle=t,r.fillStyle=t,(function(m,y,b,g){if(m.beginPath(),y.length>0){var _=y[0];m.moveTo(_.x,_.y)}for(var w=1;w<y.length;w++){var x=y[w];m.lineTo(x.x,x.y)}m.closePath(),b&&m.fill(),g&&m.stroke()})(r,v,i,o),r.lineWidth=p.lineWidth,r.strokeStyle=p.strokeStyle,r.fillStyle=p.fillStyle},b8=function(r,e,t,n,i){var o=n;i.forEach(function(a){var s=a.width,u=a.color,l=o+s;r.beginPath(),r.fillStyle=u,r.arc(e,t,l,0,2*Math.PI,!1),r.arc(e,t,o,2*Math.PI,0,!0),r.fill(),r.closePath(),o=l})},DR=function(r,e,t,n){r.beginPath(),r.arc(e,t,n,0,2*Math.PI,!1),r.closePath()},AT=function(r,e,t,n,i){r.beginPath(),r.fillStyle=n,DR(r,e,t,i),r.fill(),r.closePath()};function Wm(r,e){var t=e.find(function(i){return r<i[0]}),n=e[e.length-1][1];return t!==void 0?t[1]:n}var RT=function(r,e,t,n,i,o,a,s,u,l){var c=n,f=0,h=0,d="".concat(i,"px ").concat(o),v="normal ".concat(d);e.forEach(function(p){var m;r.font=v;var y,b=-((m=r.measureText(p.text))===null||m===void 0?void 0:m.width)/2,g=p.text?(function(_){if(Array.isArray(_))return qm(_)})(y=p.text)||(function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)})(y)||(function(_,w){if(_){if(typeof _=="string")return qm(_,w);var x={}.toString.call(_).slice(8,-1);return x==="Object"&&_.constructor&&(x=_.constructor.name),x==="Map"||x==="Set"?Array.from(_):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?qm(_,w):void 0}})(y)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})():[];p.hasHyphenChar||p.hasEllipsisChar||g.push(" "),g.forEach(function(_){var w,x=r.measureText(_).width,E=(w=t[h])!==null&&w!==void 0?w:[],O=E.includes("bold"),T=E.includes("italic");r.font=O&&T?"italic 600 ".concat(d):T?"italic 400 ".concat(d):O?"bold ".concat(d):v,E.includes("underline")&&r.fillRect(s+b+f,u+c+.2,x,.2),p.hasEllipsisChar?r.fillText(_,s+b+f-l/2,u+c):r.fillText(_,s+b+f,u+c),f+=x,h+=1}),r.font=v,p.hasHyphenChar&&r.fillText("",s+b+f,u+c),p.hasEllipsisChar&&r.fillText(nv,s+b+f-l/2,u+c),f=0,c+=a})},gu=function(r,e){return{x:r.x+e.x,y:r.y+e.y}},MR=function(r,e){return{x:r.x-e.x,y:r.y-e.y}},lu=function(r,e){return{x:r.x*e,y:r.y*e}},_8=function(r,e){return r.x*e.x+r.y*e.y},Wl=function(r,e){return(function(t){return Math.sqrt(t.x*t.x+t.y*t.y)})(MR(r,e))},kT=function(r,e){return{x:Math.cos(r)*e,y:Math.sin(r)*e}};function NR(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return IT(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?IT(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function IT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Ad=2*Math.PI,sa=Math.PI/2,DT=function(r,e,t,n,i,o){var a={x:(r.x+e.x)/2,y:(r.y+e.y)/2},s={x:r.x,y:r.y},u={x:e.x,y:e.y},l=new fn(u,s),c=(function(h,d){var v=0;return h&&(v+=h),d&&(v-=d),v})(n,t);a.x+=c/2*l.unit.x,a.y+=c/2*l.unit.y;var f=o.size()/2-o.indexOf(i);return a.x+=f*l.unit.x,a.y+=f*l.unit.y,a},yb=function(r){var e=ir(),t=r.size,n=r.selected;return((t??Pr)+4+(n===!0?4:0))*e},Xh=function(r,e){var t=ir();r.shadowColor=e.color,r.shadowBlur=e.width*t,r.shadowOffsetX=0,r.shadowOffsetY=0},$h=function(r){r.shadowColor="rgba(0,0,0,0)",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0},R_=function(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0&&arguments[5],a=function(M){var j=arguments.length>1&&arguments[1]!==void 0&&arguments[1],L=M.norm.x,F=M.norm.y;return j?{x:-L,y:-F}:M.norm},s=ir(),u=e.indexOf(r),l=(e.size()-1)/2,c=u>l,f=Math.abs(u-l),h=i?17*e.maxFontSize():8,d=(e.size()-1)*h*s,v=(function(M,j,L,F,z,V,G){var Y,ie=arguments.length>7&&arguments[7]!==void 0&&arguments[7],W=ir(),H=M.size(),Q=H>1,J=M.relIsOppositeDirection(V),ne=J?L:j,K=J?j:L,$=M.waypointPath,Z=$==null?void 0:$.points,ae=$==null?void 0:$.from,se=$==null?void 0:$.to,fe=Yh(ne,ae)&&Yh(K,se)||Yh(K,ae)&&Yh(ne,se),ge=fe?Z[1]:null,ye=fe?Z[Z.length-2]:null,pe=yb(ne),N=yb(K),B=function(bt,vt){return Math.atan2(bt.y-vt.y,bt.x-vt.x)},q=Math.max(Math.PI,Ad/(H/2)),re=Q?F*q*(G?1:-1)/((Y=ne.size)!==null&&Y!==void 0?Y:Pr):0,ue=B(fe?ge:K,ne),le=fe?B(K,ye):ue,de=function(bt,vt,It,Dt){return{x:bt.x+Math.cos(vt)*It*(Dt?-1:1),y:bt.y+Math.sin(vt)*It*(Dt?-1:1)}},xe=function(bt,vt){return de(ne,ue+bt,vt,!1)},ke=function(bt,vt){return de(K,le-bt,vt,!0)},Xe=function(bt,vt){return{x:bt.x+(vt.x-bt.x)/2,y:bt.y+(vt.y-bt.y)/2}},ze=function(bt,vt){return Math.sqrt((bt.x-vt.x)*(bt.x-vt.x)+(bt.y-vt.y)*(bt.y-vt.y))*W},Ge=xe(re,pe),Le=ke(re,N),Ie=Q?xe(0,pe):null,Ee=Q?ke(0,N):null,ee=200*W,ve=[];if(fe){var be=ze(Ge,ge)<ee;if(Q&&!be){var we=Xe(Ie,ge);ve.push(new fn(Ge,we)),ve.push(new fn(we,ge))}else ve.push(new fn(Ge,ge));for(var Oe=2;Oe<Z.length-1;Oe++)ve.push(new fn(Z[Oe-1],Z[Oe]));var Ve=ze(Le,ye)<ee;if(Q&&!Ve){var Se=Xe(Ee,ye);ve.push(new fn(ye,Se)),ve.push(new fn(Se,Le))}else ve.push(new fn(ye,Le))}else{var We=Q?ze(Ie,Ee):0;if(Q&&We>2*(30*W+Math.min(pe,N)))if(ie){var Be=DT(ne,K,pe,N,V,M);ve.push(new fn(Ge,Be)),ve.push(new fn(Be,Le))}else{var Ye=F*z,ot=30+pe,et=Math.sqrt(ot*ot+Ye*Ye),Ue=30+N,ft=Math.sqrt(Ue*Ue+Ye*Ye),st=xe(0,et),Pt=ke(0,ft);ve.push(new fn(Ge,st)),ve.push(new fn(st,Pt)),ve.push(new fn(Pt,Le))}else if(We>(pe+N)/2){var Ct=DT(ne,K,pe,N,V,M);ve.push(new fn(Ge,Ct)),ve.push(new fn(Ct,Le))}else ve.push(new fn(Ge,Le))}return ve})(e,t,n,f,h,r,c,o),p=[],m=v[0],y=a(m,c);p.push({x:m.p1.x+y.x,y:m.p1.y+y.y});for(var b=1;b<v.length;b++)if(e.size()===1)p.push(v[b-1].p2);else{var g=v[b-1],_=v[b],w=a(g,c),x=a(_,c),E=gu(g.p1,lu(w,d/2)),O=gu(g.p2,lu(w,d/2)),T=gu(_.p1,lu(x,d/2)),C=gu(_.p2,lu(x,d/2)),P=null;_8(w,x)<.99&&(P=h8(E,O,T,C));var R=P!==null?MR(P,g.p2):lu(w,d/2);p.push(gu(g.p2,lu(R,f/l)))}var k=v[v.length-1],I=a(k,c);return p.push({x:k.p2.x+I.x,y:k.p2.y+I.y}),e.relIsOppositeDirection(r)?p.reverse():p},MT=function(r,e,t,n,i,o,a,s){var u,l=arguments.length>8&&arguments[8]!==void 0&&arguments[8],c=ir(),f=i.selected,h=i.captions,d=h===void 0?[]:h,v=i.caption,p=v===void 0?"":v,m=i.width,y=i.disabled,b=i.captionAlign,g=b===void 0?"top":b,_=i.captionSize,w=_===void 0?1:_,x=d.length>0?(u=IR(d))===null||u===void 0?void 0:u.fullCaption:p;if(x!==void 0){var E=6*w*c,O=f===!0?"bold":"normal",T=x;r.fillStyle=y===!0?a.fontColor:s,r.font="".concat(O," ").concat(E,"px ").concat('"Open Sans", sans-serif');var C=function(H){return r.measureText(H).width},P=(m??1)*(f===!0?1.5:1),R=C(T);if(R>n){var k=gb(T,C,function(){return n},1,!1)[0];T=k.hasEllipsisChar===!0?"".concat(k.text,"..."):T,R=n}var I=Math.cos(t),M=Math.sin(t),j={x:e.x,y:e.y},L=j.x,F=j.y,z=t;l&&(z=t-sa,L+=2*E*I,F+=2*E*M,z-=sa);var V=(1+w)*c,G=g==="bottom"?E/2+P+V:-(P+V);r.translate(L,F),r.rotate(z),r.fillText(T,-R/2,G),r.rotate(-z),r.translate(-L,-F);var Y=2*G*Math.sin(t),ie=2*G*Math.cos(t),W={position:{x:e.x-Y,y:e.y+ie},rotation:l?t-Math.PI:t,width:n/c,height:(E+V)/c};o.setLabelInfo(i.id,W)}},Kh=function(r,e,t,n,i){if(r.beginPath(),r.moveTo(e[0].x,e[0].y),i&&e.length>2){for(var o=1;o<e.length-2;){var a=(e[o].x+e[o+1].x)/2,s=(e[o].y+e[o+1].y)/2;r.quadraticCurveTo(e[o].x,e[o].y,a,s),o+=1}r.quadraticCurveTo(e[o].x,e[o].y,e[o+1].x,e[o+1].y)}else for(var u=1;u<e.length;u++)r.lineTo(e[u].x,e[u].y);r.lineWidth=t,r.strokeStyle=n,r.lineCap="round",r.stroke()},Hm=function(r){return r.rings[0].width*ir()*1.5},NT=function(r){return 6*r*ir()},LT=function(r,e,t){var n,i;return{widthAlign:e/2*((n=r[0])!==null&&n!==void 0?n:0),heightAlign:t/2*((i=r[1])!==null&&i!==void 0?i:0)}},k_=function(r,e,t){var n,i,o=t.indexOf(r),a=(n=t.angles[o])!==null&&n!==void 0?n:0,s=a-wT/2,u=a+wT/2,l=(i=r.width)!==null&&i!==void 0?i:1,c=ir(),f=yb(e),h={x:e.x+Math.cos(s)*(f+l/2),y:e.y+Math.sin(s)*(f+l/2)},d={x:e.x+Math.cos(u)*(f+l/2),y:e.y+Math.sin(u)*(f+l/2)},v={x:e.x+Math.cos(a)*(f+35*c),y:e.y+Math.sin(a)*(f+35*c)};return{startAngle:s,endAngle:u,startPoint:h,endPoint:d,apexPoint:v,control1Point:{x:v.x+25*Math.cos(a-sa)*c/2,y:v.y+25*Math.sin(a-sa)*c/2},control2Point:{x:v.x+25*Math.cos(a+sa)*c/2,y:v.y+25*Math.sin(a+sa)*c/2}}},Zh=function(r,e,t,n,i,o){r.beginPath(),r.moveTo(e.x,e.y),r.quadraticCurveTo(i.x,i.y,n.x,n.y),r.quadraticCurveTo(o.x,o.y,t.x,t.y),r.stroke()},w8=function(r,e,t,n,i,o,a,s,u,l){var c=!(arguments.length>10&&arguments[10]!==void 0)||arguments[10];Fv(t,n)&&(t.id===n.id?(function(f,h,d,v,p,m,y,b){var g=arguments.length>8&&arguments[8]!==void 0?arguments[8]:bT,_=h.overlayIcon,w=h.selected,x=h.width,E=h.hovered,O=h.disabled,T=h.color,C=k_(h,d,v),P=C.startPoint,R=C.endPoint,k=C.apexPoint,I=C.control1Point,M=C.control2Point,j=y.rings,L=y.shadow,F=ir(),z=j[0].color,V=j[1].color,G=j[0].width*F,Y=j[1].width*F,ie=40*F,W=(x??1)*F,H=W>1?W/2:1,Q=9*H,J=2*H,ne=7*H,K=w===!0,$=O===!0,Z=_!==void 0,ae=Math.atan2(R.y-M.y,R.x-M.x),se=K?G*Math.sqrt(1+2*Q/ne*(2*Q/ne)):0,fe={x:R.x-Math.cos(ae)*(.5*Q-J+se),y:R.y-Math.sin(ae)*(.5*Q-J+se)},ge={headPosition:{x:R.x+Math.cos(ae)*(.5*Q-J-se),y:R.y+Math.sin(ae)*(.5*Q-J-se)},headAngle:ae,headHeight:Q,headChinHeight:J,headWidth:ne};if(f.save(),f.lineCap="round",K&&(Xh(f,L),f.lineWidth=W+Y,f.strokeStyle=V,Zh(f,P,fe,k,I,M),Yo(f,Y,V,ge,!1,!0),$h(f),f.lineWidth=W+G,f.strokeStyle=z,Zh(f,P,fe,k,I,M),Yo(f,G,z,ge,!1,!0)),f.lineWidth=W,E===!0&&!K&&!$){var ye=L.color;Xh(f,L),f.strokeStyle=ye,f.fillStyle=ye,Zh(f,P,fe,k,I,M),Yo(f,W,ye,ge),$h(f)}var pe=$?b.color:T??g;if(f.fillStyle=pe,f.strokeStyle=pe,Zh(f,P,fe,k,I,M),Yo(f,W,pe,ge),m||Z){var N,B=v.indexOf(h),q=(N=v.angles[B])!==null&&N!==void 0?N:0,re=k.x-Math.cos(ae)*(se/4),ue=k.y-Math.sin(ae)*(se/4),le=(q+sa)%Ad,de=(q+Ad)%Ad<Math.PI;if(m&&MT(f,{x:re,y:ue},le,ie,h,v,b,g,de),Z){var xe=_.position,ke=xe===void 0?[0,0]:xe,Xe=_.url,ze=_.size,Ge=NT(ze===void 0?1:ze),Le=LT(ke,ie,Ge),Ie=Le.widthAlign,Ee=Le.heightAlign+(K?Hm(y):0)*(ke[1]<0?-1:1);f.save(),f.translate(re,ue),de?(f.rotate(le-Math.PI),f.translate(2*-Ie,2*-Ee)):f.rotate(le);var ee=Ge/2,ve=-ee+Ie,be=-ee+Ee;f.drawImage(p.getImage(Xe),ve,be,Ge,Ge),f.restore()}}f.restore()})(r,e,t,i,o,a,s,u,l):(function(f,h,d,v,p,m,y,b,g,_){var w=arguments.length>10&&arguments[10]!==void 0?arguments[10]:bT,x=h.overlayIcon,E=h.color,O=h.disabled,T=h.selected,C=h.width,P=h.hovered,R=h.captionAlign,k=T===!0,I=O===!0,M=x!==void 0,j=g.rings,L=g.shadow,F=R_(h,p,d,v,y,b),z=ir(),V=(function(mr){var pt,Nt=mr.selected===!0?1.5:1;return((pt=mr.width)!==null&&pt!==void 0?pt:1)*Nt*ir()})(h),G=I?_.color:E??w,Y=j[0].width*z,ie=j[1].width*z,W=z*(C>1?C/2:1),H=9*W,Q=2*W,J=7*W,ne=Wl(F[F.length-2],F[F.length-1]),K=2*H,$=k?Y*Math.sqrt(1+K/J*(K/J)):0,Z=2-$,ae=Math.floor(F.length/2);F.length>2&&k&&ne<H+$-Q&&(Z+=ne,$-=ne/2+Q,F.pop(),ae=Math.floor(F.length/2));var se,fe,ge=F[F.length-2],ye=F[F.length-1],pe=(se=ge,fe=ye,Math.atan2(fe.y-se.y,fe.x-se.x)),N=H/2+$,B=Math.cos(pe),q=Math.sin(pe);F[F.length-1]={x:ye.x-B*N,y:ye.y-q*N};var re,ue={headPosition:{x:ye.x+B*Z,y:ye.y+q*Z},headAngle:pe,headHeight:H,headChinHeight:Q,headWidth:J},le=NR(F);try{for(le.s();!(re=le.n()).done;){var de=re.value;de.x=Math.round(de.x),de.y=Math.round(de.y)}}catch(mr){le.e(mr)}finally{le.f()}if(f.save(),k){var xe=j[0].color,ke=j[1].color,Xe=Math.atan2(F[1].y-F[0].y,F[1].x-F[0].x),ze=kT(Xe,Hm(g));F[0]=gu(F[0],ze),Xh(f,L),Kh(f,F,V+ie,ke,b),Yo(f,ie,ke,ue,!1,!0),$h(f),Kh(f,F,V+Y,xe,b),Yo(f,Y,xe,ue,!1,!0)}if(P===!0&&!k&&!I){var Ge=L.color;Xh(f,L),Kh(f,F,V,Ge,b),Yo(f,V,Ge,ue),$h(f)}if(Kh(f,F,V,G,b),Yo(f,V,G,ue),y||M){var Le,Ie,Ee,ee,ve,be=d.x>v.x,we=F[ae];1&~F.length?(Le=F[be?ae:ae-1],Ie=F[be?ae-1:ae],Ee=(Le.x+Ie.x)/2,ee=(Le.y+Ie.y)/2,ve=Math.atan2(Ie.y-Le.y,Ie.x-Le.x)):(Le=F[be?ae+1:ae-1],Ie=F[be?ae-1:ae+1],b?(Ee=(we.x+(Le.x+Ie.x)/2)/2,ee=(we.y+(Le.y+Ie.y)/2)/2,ve=be?Math.atan2(d.y-v.y,d.x-v.x):Math.atan2(v.y-d.y,v.x-d.x)):(Wl(we,Le)>Wl(we,Ie)?Ie=we:Le=we,Ee=(Le.x+Ie.x)/2,ee=(Le.y+Ie.y)/2,ve=Math.atan2(Ie.y-Le.y,Ie.x-Le.x)));var Oe=k?kT(ve+sa,Hm(g)):{x:0,y:0},Ve=Wl(Le,Ie);if(y){var Se=R==="bottom"?1:-1,We={x:Ee+Oe.x*Se,y:ee+Oe.y*Se};MT(f,We,ve,Ve,h,p,_,w)}if(M){var Be=x.position,Ye=Be===void 0?[0,0]:Be,ot=x.url,et=x.size,Ue=NT(et===void 0?1:et),ft=LT(Ye,Ve,Ue),st=ft.widthAlign,Pt=ft.heightAlign,Ct=Ye[1]<0?-1:1,bt=Oe.x*Ct,vt=Oe.y*Ct,It=Ue/2;f.translate(Ee,ee),f.rotate(ve);var Dt=-It+bt+st,er=-It+vt+Pt;f.drawImage(m.getImage(ot),Dt,er,Ue,Ue),f.rotate(-ve),f.translate(-Ee,-ee)}}f.restore()})(r,e,t,n,i,o,a,c,s,u,l))},E8=function(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=arguments.length>5&&arguments[5]!==void 0&&arguments[5];return Fv(t,n)?t.id===n.id?(function(a,s,u){for(var l=k_(a,s,u),c={left:1/0,top:1/0,right:-1/0,bottom:-1/0},f=["startPoint","endPoint","apexPoint","control1Point","control2Point"],h=0;h<f.length;h++){var d=l[f[h]],v=d.x,p=d.y;v<c.left&&(c.left=v),v>c.right&&(c.right=v),p<c.top&&(c.top=p),p>c.bottom&&(c.bottom=p)}return c})(r,t,e):(function(a,s,u,l,c,f){var h,d={left:1/0,top:1/0,right:-1/0,bottom:-1/0},v=NR(R_(a,s,u,l,c,f));try{for(v.s();!(h=v.n()).done;){var p=h.value,m=p.x,y=p.y;m<d.left&&(d.left=m),m>d.right&&(d.right=m),y<d.top&&(d.top=y),y>d.bottom&&(d.bottom=y)}}catch(b){v.e(b)}finally{v.f()}return d})(r,e,t,n,i,o):null};function iv(r){return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(r)}var O8=/^\s+/,x8=/\s+$/;function tt(r,e){if(e=e||{},(r=r||"")instanceof tt)return r;if(!(this instanceof tt))return new tt(r,e);var t=(function(n){var i,o,a,s={r:0,g:0,b:0},u=1,l=null,c=null,f=null,h=!1,d=!1;return typeof n=="string"&&(n=(function(v){v=v.replace(O8,"").replace(x8,"").toLowerCase();var p,m=!1;if(mb[v])v=mb[v],m=!0;else if(v=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(p=_i.rgb.exec(v))?{r:p[1],g:p[2],b:p[3]}:(p=_i.rgba.exec(v))?{r:p[1],g:p[2],b:p[3],a:p[4]}:(p=_i.hsl.exec(v))?{h:p[1],s:p[2],l:p[3]}:(p=_i.hsla.exec(v))?{h:p[1],s:p[2],l:p[3],a:p[4]}:(p=_i.hsv.exec(v))?{h:p[1],s:p[2],v:p[3]}:(p=_i.hsva.exec(v))?{h:p[1],s:p[2],v:p[3],a:p[4]}:(p=_i.hex8.exec(v))?{r:Xn(p[1]),g:Xn(p[2]),b:Xn(p[3]),a:VT(p[4]),format:m?"name":"hex8"}:(p=_i.hex6.exec(v))?{r:Xn(p[1]),g:Xn(p[2]),b:Xn(p[3]),format:m?"name":"hex"}:(p=_i.hex4.exec(v))?{r:Xn(p[1]+""+p[1]),g:Xn(p[2]+""+p[2]),b:Xn(p[3]+""+p[3]),a:VT(p[4]+""+p[4]),format:m?"name":"hex8"}:!!(p=_i.hex3.exec(v))&&{r:Xn(p[1]+""+p[1]),g:Xn(p[2]+""+p[2]),b:Xn(p[3]+""+p[3]),format:m?"name":"hex"}})(n)),iv(n)=="object"&&(po(n.r)&&po(n.g)&&po(n.b)?(i=n.r,o=n.g,a=n.b,s={r:255*vr(i,255),g:255*vr(o,255),b:255*vr(a,255)},h=!0,d=String(n.r).substr(-1)==="%"?"prgb":"rgb"):po(n.h)&&po(n.s)&&po(n.v)?(l=Hl(n.s),c=Hl(n.v),s=(function(v,p,m){v=6*vr(v,360),p=vr(p,100),m=vr(m,100);var y=Math.floor(v),b=v-y,g=m*(1-p),_=m*(1-b*p),w=m*(1-(1-b)*p),x=y%6;return{r:255*[m,_,g,g,w,m][x],g:255*[w,m,m,_,g,g][x],b:255*[g,g,w,m,m,_][x]}})(n.h,l,c),h=!0,d="hsv"):po(n.h)&&po(n.s)&&po(n.l)&&(l=Hl(n.s),f=Hl(n.l),s=(function(v,p,m){var y,b,g;function _(E,O,T){return T<0&&(T+=1),T>1&&(T-=1),T<1/6?E+6*(O-E)*T:T<.5?O:T<2/3?E+(O-E)*(2/3-T)*6:E}if(v=vr(v,360),p=vr(p,100),m=vr(m,100),p===0)y=b=g=m;else{var w=m<.5?m*(1+p):m+p-m*p,x=2*m-w;y=_(x,w,v+1/3),b=_(x,w,v),g=_(x,w,v-1/3)}return{r:255*y,g:255*b,b:255*g}})(n.h,l,f),h=!0,d="hsl"),n.hasOwnProperty("a")&&(u=n.a)),u=LR(u),{ok:h,format:n.format||d,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:u}})(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}function jT(r,e,t){r=vr(r,255),e=vr(e,255),t=vr(t,255);var n,i,o=Math.max(r,e,t),a=Math.min(r,e,t),s=(o+a)/2;if(o==a)n=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case r:n=(e-t)/u+(e<t?6:0);break;case e:n=(t-r)/u+2;break;case t:n=(r-e)/u+4}n/=6}return{h:n,s:i,l:s}}function FT(r,e,t){r=vr(r,255),e=vr(e,255),t=vr(t,255);var n,i,o=Math.max(r,e,t),a=Math.min(r,e,t),s=o,u=o-a;if(i=o===0?0:u/o,o==a)n=0;else{switch(o){case r:n=(e-t)/u+(e<t?6:0);break;case e:n=(t-r)/u+2;break;case t:n=(r-e)/u+4}n/=6}return{h:n,s:i,v:s}}function BT(r,e,t,n){var i=[Si(Math.round(r).toString(16)),Si(Math.round(e).toString(16)),Si(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function UT(r,e,t,n){return[Si(jR(n)),Si(Math.round(r).toString(16)),Si(Math.round(e).toString(16)),Si(Math.round(t).toString(16))].join("")}function S8(r,e){e=e===0?0:e||10;var t=tt(r).toHsl();return t.s-=e/100,t.s=Bv(t.s),tt(t)}function T8(r,e){e=e===0?0:e||10;var t=tt(r).toHsl();return t.s+=e/100,t.s=Bv(t.s),tt(t)}function C8(r){return tt(r).desaturate(100)}function P8(r,e){e=e===0?0:e||10;var t=tt(r).toHsl();return t.l+=e/100,t.l=Bv(t.l),tt(t)}function A8(r,e){e=e===0?0:e||10;var t=tt(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),tt(t)}function R8(r,e){e=e===0?0:e||10;var t=tt(r).toHsl();return t.l-=e/100,t.l=Bv(t.l),tt(t)}function k8(r,e){var t=tt(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,tt(t)}function I8(r){var e=tt(r).toHsl();return e.h=(e.h+180)%360,tt(e)}function zT(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=tt(r).toHsl(),n=[tt(r)],i=360/e,o=1;o<e;o++)n.push(tt({h:(t.h+o*i)%360,s:t.s,l:t.l}));return n}function D8(r){var e=tt(r).toHsl(),t=e.h;return[tt(r),tt({h:(t+72)%360,s:e.s,l:e.l}),tt({h:(t+216)%360,s:e.s,l:e.l})]}function M8(r,e,t){e=e||6,t=t||30;var n=tt(r).toHsl(),i=360/t,o=[tt(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,o.push(tt(n));return o}function N8(r,e){e=e||6;for(var t=tt(r).toHsv(),n=t.h,i=t.s,o=t.v,a=[],s=1/e;e--;)a.push(tt({h:n,s:i,v:o})),o=(o+s)%1;return a}tt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(299*r.r+587*r.g+114*r.b)/1e3},getLuminance:function(){var r,e,t,n=this.toRgb();return r=n.r/255,e=n.g/255,t=n.b/255,.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))},setAlpha:function(r){return this._a=LR(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=FT(this._r,this._g,this._b);return{h:360*r.h,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=FT(this._r,this._g,this._b),e=Math.round(360*r.h),t=Math.round(100*r.s),n=Math.round(100*r.v);return this._a==1?"hsv("+e+", "+t+"%, "+n+"%)":"hsva("+e+", "+t+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var r=jT(this._r,this._g,this._b);return{h:360*r.h,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=jT(this._r,this._g,this._b),e=Math.round(360*r.h),t=Math.round(100*r.s),n=Math.round(100*r.l);return this._a==1?"hsl("+e+", "+t+"%, "+n+"%)":"hsla("+e+", "+t+"%, "+n+"%, "+this._roundA+")"},toHex:function(r){return BT(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return(function(e,t,n,i,o){var a=[Si(Math.round(e).toString(16)),Si(Math.round(t).toString(16)),Si(Math.round(n).toString(16)),Si(jR(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")})(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*vr(this._r,255))+"%",g:Math.round(100*vr(this._g,255))+"%",b:Math.round(100*vr(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*vr(this._r,255))+"%, "+Math.round(100*vr(this._g,255))+"%, "+Math.round(100*vr(this._b,255))+"%)":"rgba("+Math.round(100*vr(this._r,255))+"%, "+Math.round(100*vr(this._g,255))+"%, "+Math.round(100*vr(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(L8[BT(this._r,this._g,this._b,!0)]||!1)},toFilter:function(r){var e="#"+UT(this._r,this._g,this._b,this._a),t=e,n=this._gradientType?"GradientType = 1, ":"";if(r){var i=tt(r);t="#"+UT(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+t+")"},toString:function(r){var e=!!r;r=r||this._format;var t=!1,n=this._a<1&&this._a>=0;return e||!n||r!=="hex"&&r!=="hex6"&&r!=="hex3"&&r!=="hex4"&&r!=="hex8"&&r!=="name"?(r==="rgb"&&(t=this.toRgbString()),r==="prgb"&&(t=this.toPercentageRgbString()),r!=="hex"&&r!=="hex6"||(t=this.toHexString()),r==="hex3"&&(t=this.toHexString(!0)),r==="hex4"&&(t=this.toHex8String(!0)),r==="hex8"&&(t=this.toHex8String()),r==="name"&&(t=this.toName()),r==="hsl"&&(t=this.toHslString()),r==="hsv"&&(t=this.toHsvString()),t||this.toHexString()):r==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return tt(this.toString())},_applyModification:function(r,e){var t=r.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(P8,arguments)},brighten:function(){return this._applyModification(A8,arguments)},darken:function(){return this._applyModification(R8,arguments)},desaturate:function(){return this._applyModification(S8,arguments)},saturate:function(){return this._applyModification(T8,arguments)},greyscale:function(){return this._applyModification(C8,arguments)},spin:function(){return this._applyModification(k8,arguments)},_applyCombination:function(r,e){return r.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M8,arguments)},complement:function(){return this._applyCombination(I8,arguments)},monochromatic:function(){return this._applyCombination(N8,arguments)},splitcomplement:function(){return this._applyCombination(D8,arguments)},triad:function(){return this._applyCombination(zT,[3])},tetrad:function(){return this._applyCombination(zT,[4])}},tt.fromRatio=function(r,e){if(iv(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=n==="a"?r[n]:Hl(r[n]));r=t}return tt(r,e)},tt.equals=function(r,e){return!(!r||!e)&&tt(r).toRgbString()==tt(e).toRgbString()},tt.random=function(){return tt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tt.mix=function(r,e,t){t=t===0?0:t||50;var n=tt(r).toRgb(),i=tt(e).toRgb(),o=t/100;return tt({r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a})},tt.readability=function(r,e){var t=tt(r),n=tt(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)},tt.isReadable=function(r,e,t){var n,i,o,a,s,u=tt.readability(r,e);switch(i=!1,(a=((o=(o=t)||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&a!=="AAA"&&(a="AA"),(s=(o.size||"small").toLowerCase())!=="small"&&s!=="large"&&(s="small"),(n={level:a,size:s}).level+n.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},tt.mostReadable=function(r,e,t){var n,i,o,a,s=null,u=0;i=(t=t||{}).includeFallbackColors,o=t.level,a=t.size;for(var l=0;l<e.length;l++)(n=tt.readability(r,e[l]))>u&&(u=n,s=tt(e[l]));return tt.isReadable(r,s,{level:o,size:a})||!i?s:(t.includeFallbackColors=!1,tt.mostReadable(r,["#fff","#000"],t))};var mb=tt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L8=tt.hexNames=(function(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e})(mb);function LR(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function vr(r,e){(function(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1})(r)&&(r="100%");var t=(function(n){return typeof n=="string"&&n.indexOf("%")!=-1})(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function Bv(r){return Math.min(1,Math.max(0,r))}function Xn(r){return parseInt(r,16)}function Si(r){return r.length==1?"0"+r:""+r}function Hl(r){return r<=1&&(r=100*r+"%"),r}function jR(r){return Math.round(255*parseFloat(r)).toString(16)}function VT(r){return Xn(r)/255}var Xo,Qh,Jh,_i=(Qh="[\\s|\\(]+("+(Xo="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Xo+")[,|\\s]+("+Xo+")\\s*\\)?",Jh="[\\s|\\(]+("+Xo+")[,|\\s]+("+Xo+")[,|\\s]+("+Xo+")[,|\\s]+("+Xo+")\\s*\\)?",{CSS_UNIT:new RegExp(Xo),rgb:new RegExp("rgb"+Qh),rgba:new RegExp("rgba"+Jh),hsl:new RegExp("hsl"+Qh),hsla:new RegExp("hsla"+Jh),hsv:new RegExp("hsv"+Qh),hsva:new RegExp("hsva"+Jh),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function po(r){return!!_i.CSS_UNIT.exec(r)}var j8=function(r){return tt.mostReadable(r,[C_,"#FFFFFF"]).toString()},Qc=function(r){return RR().get.rgb(r)},ed=function(r){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e),i=Qc(r);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=255*i[3],t[0]},td=function(r){return[(e=Qc(r))[0]/255,e[1]/255,e[2]/255];var e};function F8(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}})(r,e)||(function(t,n){if(t){if(typeof t=="string")return GT(t,n);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?GT(t,n):void 0}})(r,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function GT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var B8=function(r){var e=r.x,t=e===void 0?0:e,n=r.y,i=n===void 0?0:n,o=r.size,a=o===void 0?Pr:o;return{top:i-a,left:t-a,right:t+a,bottom:i+a}},U8=function(r,e,t,n,i,o){var a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:JA,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:1,u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,l=e.x,c=l===void 0?0:l,f=e.y,h=f===void 0?0:f,d=e.size,v=d===void 0?Pr:d,p=e.caption,m=p===void 0?"":p,y=e.captions,b=y===void 0?[]:y,g=e.captionAlign,_=g===void 0?"center":g,w=e.captionSize,x=w===void 0?1:w,E=e.disabled,O=e.activated,T=e.selected,C=e.hovered,P=e.id,R=e.icon,k=e.overlayIcon,I=ir(),M=(function(pt,Nt,or){var hr=pt.selected?or.selected.rings:or.default.rings;if(!hr.length){var Ar=Nt.getById(pt.id);return Ar!==void 0&&Object.entries(Ar).forEach(function(Sr){var Yt=F8(Sr,2),Xt=Yt[0],jt=Yt[1];Xt.startsWith("ring-")&&jt.setEndValue(0)}),[{width:0,color:""}]}return hr.map(function(Sr,Yt){var Xt=Sr.widthFactor,jt=Sr.color,In=(pt.size||Pr)*Xt*ir();return{width:Nt.getValueForAnimationName(pt.id,"ring-".concat(Yt),In),color:jt}})})(e,n,i),j=M.reduce(function(pt,Nt){return pt+Nt.width},0),L=v*I,F=2*L,z=(function(pt,Nt){if(!pt||!Nt)return{nodeInfoLevel:0,fontInfoLevel:1.25,iconInfoLevel:1};var or=ir(),hr=1600*or*(1200*or),Ar=Math.pow(pt,2)*Math.PI*Math.pow(Nt,2)/(hr/100);return{nodeInfoLevel:Wm(Ar,y8),fontInfoLevel:Wm(Ar,Pd),iconInfoLevel:Wm(Ar,m8)}})(L,u),V=z.nodeInfoLevel,G=z.fontInfoLevel,Y=z.iconInfoLevel,ie=e.color||a,W=(function(pt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pr)/({1:3.5,2:2.75,3:2}[arguments.length>2&&arguments[2]!==void 0?arguments[2]:1]+(arguments.length>3&&arguments[3]!==void 0&&arguments[3]?1:0))/pt})(G,L,x,!!R),H=j8(ie),Q=L;if(j>0&&(Q=L+j),E)ie=o.color,H=o.fontColor;else{var J;if(O){var ne=Date.now()%1e3/1e3,K=ne<.7?ne/.7:0,$=is(ie,.4-.4*K);AT(r,c,h,$,L+.88*L*K)}var Z=(J=i.selected.shadow)!==null&&J!==void 0?J:{width:0,opacity:0,color:""},ae=Z.width*I,se=Z.opacity,fe=Z.color,ge=T||C?ae:0,ye=n.getValueForAnimationName(P,"shadowWidth",ge);ye>0&&(function(pt,Nt,or,hr,Ar,Sr){var Yt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,Xt=Ar+Sr,jt=pt.createRadialGradient(Nt,or,Ar,Nt,or,Xt);jt.addColorStop(0,"transparent"),jt.addColorStop(.01,is(hr,.5*Yt)),jt.addColorStop(.05,is(hr,.5*Yt)),jt.addColorStop(.5,is(hr,.12*Yt)),jt.addColorStop(.75,is(hr,.03*Yt)),jt.addColorStop(1,is(hr,0)),pt.fillStyle=jt,DR(pt,Nt,or,Xt),pt.fill()})(r,c,h,fe,Q,ye,se)}AT(r,c,h,ie,L),j>0&&b8(r,c,h,L,M);var pe=!!m.length,N=!!b.length,B=!!R;if(R){var q=V<2||!(pe||N),re=V>0?1:0,ue=q?1*L:.75*L;ue/=Y;var le=q?.5*ue:ue*(Y===1?_==="center"?1.3:_==="bottom"||q?1.1:0:_==="center"?1.35:_==="bottom"||q?1.1:0),de=ue/2;ue=n.getValueForAnimationName(P,"iconSize",ue),de=n.getValueForAnimationName(P,"iconXPos",de),le=n.getValueForAnimationName(P,"iconYPos",le);var xe=r.globalAlpha,ke=E?.1:re;r.globalAlpha=n.getValueForAnimationName(P,"iconOpacity",ke);var Xe=H==="#ffffff",ze=t.getImage(R,Xe);r.drawImage(ze,c-de,h-le,Math.floor(ue),Math.floor(ue)),r.globalAlpha=xe}if(k!==void 0){var Ge,Le,Ie,Ee,ee,ve=F*((Ge=k.size)!==null&&Ge!==void 0?Ge:1),be=ve/2-L*((Le=(Ie=k.position)===null||Ie===void 0?void 0:Ie[1])!==null&&Le!==void 0?Le:0),we=ve/2-L*((Ee=(ee=k.position)===null||ee===void 0?void 0:ee[0])!==null&&Ee!==void 0?Ee:0),Oe=r.globalAlpha,Ve=E?.1:1;r.globalAlpha=n.getValueForAnimationName(P,"iconOpacity",Ve);var Se=t.getImage(k.url);r.drawImage(Se,c-we,h-be,ve,ve),r.globalAlpha=Oe}if(pe||N){var We=V<2?0:1,Be=n.getValueForAnimationName(P,"textOpacity",We,0);if(Be>0){var Ye,ot,et='"Open Sans", sans-serif',Ue=2;G===((Ye=Pd[1])===null||Ye===void 0?void 0:Ye[1])?Ue=3:G===((ot=Pd[2])===null||ot===void 0?void 0:ot[1])&&(Ue=4);var ft=_==="center"?.7*F:2*Math.sqrt(Math.pow(F/2,2)-Math.pow(F/3,2));if(r.fillStyle=is(H,Be),N){var st,Pt=IR(b),Ct=Pt.stylesPerChar,bt=Pt.fullCaption,vt=PT(r,bt,et,W,ft,B,Ue,e==null||e.captionAlign),It=-(vt.length-2)*W/2;st=_&&_!=="center"?_==="bottom"?It+L/Math.PI:It-L/Math.PI:It,RT(r,vt,Ct,st,W,et,W,c,h,s)}else if(pe){var Dt=PT(r,m,et,W,ft,B,Ue,e==null||e.captionAlign),er=-(Dt.length-2)*W/2,mr=m.split("").map(function(pt){return[]});RT(r,Dt,mr,er,W,et,W,c,h,s)}}}};function yc(r){return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(r)}function qT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function On(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qT(Object(t),!0).forEach(function(n){xn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cu(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return WT(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?WT(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function WT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function z8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,FR(n.key),n)}}function xn(r,e,t){return(e=FR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function FR(r){var e=(function(t){if(yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(yc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return yc(e)=="symbol"?e:e+""}var $o="canvasRenderer",V8=(function(){return r=function t(n,i,o){var a=this,s=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).relationshipThreshold,u=s===void 0?0:s;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),xn(this,"arrowBundler",void 0),xn(this,"activeNodes",void 0),xn(this,"canvas",void 0),xn(this,"context",void 0),xn(this,"state",void 0),xn(this,"stateDisposers",void 0),xn(this,"relationshipThreshold",void 0),xn(this,"animationHandler",void 0),xn(this,"imageCache",void 0),xn(this,"needsRun",void 0),xn(this,"nodeVersion",void 0),xn(this,"relVersion",void 0),xn(this,"waypointVersion",void 0),xn(this,"ellipsisWidth",void 0),i!==null&&(this.activeNodes=new Set,this.canvas=n,this.context=i,this.state=o,this.stateDisposers=[],this.stateDisposers.push(o.autorun(function(){o.zoom!==void 0&&(a.needsRun=!0),o.panX!==void 0&&(a.needsRun=!0),o.panY!==void 0&&(a.needsRun=!0),o.nodes.version!==void 0&&(a.needsRun=!0),o.rels.version!==void 0&&(a.needsRun=!0),o.waypoints.counter>0&&(a.needsRun=!0),o.layout!==void 0&&(a.needsRun=!0)})),o.nodes.addChannel($o),o.rels.addChannel($o),this.relationshipThreshold=u,this.nodeVersion=o.nodes.version,this.relVersion=o.rels.version,this.waypointVersion=o.waypoints.counter,this.animationHandler=new t8,this.animationHandler.setOptions({fadeDuration:150,sizeDuration:150}),this.arrowBundler=new c8(o.rels.items,o.waypoints.data),this.imageCache=new i8,this.needsRun=!0,this.ellipsisWidth=i.measureText(nv).width)},e=[{key:"needsToRun",value:function(){return this.needsRun||this.animationHandler.needsToRun()||this.activeNodes.size>0}},{key:"processUpdates",value:function(){var t=this.state,n=!1,i=t.nodes.channels[$o],o=t.rels.channels[$o],a=o.adds,s=o.removes,u=o.updates;this.nodeVersion<t.nodes.version&&(this.handleChannelUpdate(i,t.nodes,!0),this.nodeVersion=t.nodes.version,t.nodes.clearChannel($o)),this.relVersion<t.rels.version&&(n=Object.keys(a).length>0||Object.keys(s).length>0||Object.keys(u).length>0,t.rels.clearChannel($o),this.relVersion=t.rels.version),(n||this.waypointVersion<t.waypoints.counter)&&(this.arrowBundler.updateData(a,s,u,t.waypoints.data),this.waypointVersion=t.waypoints.counter)}},{key:"render",value:function(t){var n,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.state,s=this.animationHandler,u=this.arrowBundler,l=a.zoom,c=a.layout,f=a.nodes.idToPosition,h=(n=o.canvas)!==null&&n!==void 0?n:this.canvas,d=(i=o.context)!==null&&i!==void 0?i:this.context,v=ir(),p=h.clientWidth*v,m=h.clientHeight*v;d.save(),o.backgroundColor!==void 0?(d.fillStyle=o.backgroundColor,d.fillRect(0,0,p,m)):d.clearRect(0,0,p,m),this.zoomAndPan(d,h),s.ignoreAnimations(!!o.ignoreAnimations),o.ignoreAnimations||s.advance(),u.updatePositions(f);var y=this.getRelationshipsToRender(o.showCaptions,p,m);this.renderRelationships(y,d,c!==Cd);var b=this.getNodesToRender(t,p,m);this.renderNodes(b,d,l),d.restore(),this.needsRun=!1}},{key:"getRelationshipsToRender",value:function(t,n,i){var o,a=[],s=[],u=[],l=this.arrowBundler,c=this.state,f=this.relationshipThreshold,h=c.layout,d=c.zoom,v=c.rels,p=c.nodes,m=p.idToItem,y=p.idToPosition,b=cu(v.items);try{for(b.s();!(o=b.n()).done;){var g=o.value,_=l.getBundle(g),w=On(On({},m[g.from]),y[g.from]),x=On(On({},m[g.to]),y[g.to]),E=t||d>f||g.captionHtml!==void 0,O=E8(g,_,w,x,E,h!==Cd);if(O!==null){var T,C,P,R,k,I,M=this.isBoundingBoxOffScreen(O,n,i),j=Wl({x:(T=w.x)!==null&&T!==void 0?T:0,y:(C=w.y)!==null&&C!==void 0?C:0},{x:(P=x.x)!==null&&P!==void 0?P:0,y:(R=x.y)!==null&&R!==void 0?R:0}),L=(((k=w.size)!==null&&k!==void 0?k:Pr)+((I=x.size)!==null&&I!==void 0?I:Pr))*devicePixelRatio,F=w.id!==x.id&&L>j;M||F||(g.disabled?s.push(On(On({},g),{},{fromNode:w,toNode:x,showLabel:E})):g.selected?a.push(On(On({},g),{},{fromNode:w,toNode:x,showLabel:E})):u.push(On(On({},g),{},{fromNode:w,toNode:x,showLabel:E})))}}}catch(z){b.e(z)}finally{b.f()}return[].concat(s,u,a)}},{key:"getNodesToRender",value:function(t,n,i){var o,a=[],s=[],u=[],l=this.state.nodes.idToItem,c=cu(t);try{for(c.s();!(o=c.n()).done;){var f=o.value,h=B8(f);this.isBoundingBoxOffScreen(h,n,i)||(l[f.id].disabled?a.push(On({},f)):l[f.id].selected?s.push(On({},f)):u.push(On({},f)))}}catch(d){c.e(d)}finally{c.f()}return[].concat(a,u,s)}},{key:"renderNodes",value:function(t,n,i){var o,a=this.imageCache,s=this.animationHandler,u=this.state,l=this.ellipsisWidth,c=u.nodes.idToItem,f=u.nodeBorderStyles,h=u.disabledItemStyles,d=u.defaultNodeColor,v=cu(t);try{for(v.s();!(o=v.n()).done;){var p=o.value;U8(n,On(On({},c[p.id]),p),a,s,f,h,d,l,i)}}catch(m){v.e(m)}finally{v.f()}}},{key:"renderRelationships",value:function(t,n,i){var o,a=this.state.relationshipBorderStyles.selected,s=this.arrowBundler,u=this.imageCache,l=this.state,c=l.disabledItemStyles,f=l.defaultRelationshipColor,h=cu(t);try{for(h.s();!(o=h.n()).done;){var d=o.value,v=s.getBundle(d),p=d.fromNode,m=d.toNode,y=d.showLabel;w8(n,d,p,m,v,u,y,a,c,f,i)}}catch(b){h.e(b)}finally{h.f()}}},{key:"getNodesAt",value:function(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=[],a=this.state.nodes,s=a.items,u=a.idToPosition,l=ir(),c=cu(s);try{var f=function(){var h=n.value,d=h.id,v=h.size,p=v===void 0?Pr:v,m=u[d],y=m.x,b=m.y,g=Math.sqrt(Math.pow(t.x-y,2)+Math.pow(t.y-b,2));if(g<=(p+i)*l){var _=o.findIndex(function(w){return w.distance>g});o.splice(_!==-1?_:o.length,0,{data:h,targetCoordinates:{x:y,y:b},pointerCoordinates:t,distanceVector:{x:t.x-y,y:t.y-b},insideNode:g<=p*l,distance:g})}};for(c.s();!(n=c.n()).done;)f()}catch(h){c.e(h)}finally{c.f()}return o}},{key:"getRelsAt",value:function(t){var n,i=[],o=this.state,a=this.arrowBundler,s=this.relationshipThreshold,u=o.zoom,l=o.rels.items,c=o.nodes.idToPosition,f=o.layout,h=u>s,d=cu(l);try{var v=function(){var p=n.value,m=a.getBundle(p),y=c[p.from],b=c[p.to];if(y!==void 0&&b!==void 0&&m.has(p)){var g=(function(w,x,E,O,T,C){var P=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(!Fv(E,O))return 1/0;var R=E===O?(function(k,I,M,j){var L=k_(I,M,j),F=L.startPoint,z=L.endPoint,V=L.apexPoint,G=L.control1Point,Y=L.control2Point,ie=Gm(F,V,G,k),W=Gm(V,z,Y,k);return Math.min(ie,W)})(w,x,E,T):(function(k,I,M,j,L,F,z){var V=R_(I,M,j,L,F,z),G=1/0;if(z&&V.length===3)G=Gm(V[0],V[2],V[1],k);else for(var Y=1;Y<V.length;Y++){var ie=V[Y-1],W=V[Y],H=A_(ie,W,k);G=H<G?H:G}return G})(w,x,T,E,O,C,P);return R})(t,p,y,b,m,h,f!==Cd);if(g<10){var _=i.findIndex(function(w){return w.distance>g});i.splice(_!==-1?_:i.length,0,{data:p,fromTargetCoordinates:y,toTargetCoordinates:b,pointerCoordinates:t,distance:g})}}};for(d.s();!(n=d.n()).done;)v()}catch(p){d.e(p)}finally{d.f()}return i}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){t()}),this.state.nodes.removeChannel($o),this.state.rels.removeChannel($o)}},{key:"isBoundingBoxOffScreen",value:function(t,n,i){var o=this.state,a=o.zoom,s=n/a,u=i/a,l=o.panX-s/2,c=o.panY-u/2,f=t.right<l,h=t.bottom<c,d=t.left>l+s,v=t.top>c+u;return f||d||h||v}},{key:"handleChannelUpdate",value:function(t,n,i){for(var o=Object.keys(t.adds),a=0;a<o.length;a++){var s=o[a];t.adds[s].activated&&this.activeNodes.add(s)}for(var u=Object.keys(t.removes),l=0;l<u.length;l++){var c=u[l];this.activeNodes.delete(c)}if(i)for(var f=Object.keys(t.updates),h=0;h<f.length;h++){var d=f[h];n.idToItem[d].activated?this.activeNodes.add(d):this.activeNodes.delete(d)}}},{key:"zoomAndPan",value:function(t,n){var i=n.width,o=n.height,a=this.state,s=a.zoom,u=a.panX,l=a.panY;t.translate(-i/2*s,-o/2*s),t.translate(-u*s,-l*s),t.scale(s,s),t.translate(i/2/s,o/2/s),t.translate(i/2,o/2)}}],e&&z8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),BR=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=(function(a,s){if((0,Qt.isNil)(a)||(0,Qt.isNil)(s))return{offsetX:0,offsetY:0};var u=s.getBoundingClientRect(),l=window.devicePixelRatio||1;return{offsetX:l*(a.clientX-u.left-.5*u.width),offsetY:l*(a.clientY-u.top-.5*u.height)}})(r,e);return{x:n+o.offsetX/t,y:i+o.offsetY/t}};function mc(r){return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(r)}function UR(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function G8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,VR(n.key),n)}}function zR(r,e,t){return e&&G8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function ci(r,e,t){return(e=VR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VR(r){var e=(function(t){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(mc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return mc(e)=="symbol"?e:e+""}var si="WebGLRenderer",q8=(function(){return zR(function r(e){var t=this;if(UR(this,r),ci(this,"mainSceneRenderer",void 0),ci(this,"minimapRenderer",void 0),ci(this,"needsRun",void 0),ci(this,"minimapMouseDown",void 0),ci(this,"stateDisposers",void 0),ci(this,"state",void 0),e.state===void 0)throw new Error("Renderer missing options: state - state object");var n=e.state,i=e.mainSceneRenderer,o=e.minimapRenderer,a=n.nodes,s=n.rels;this.mainSceneRenderer=i,this.minimapRenderer=o,this.needsRun=!1,this.minimapMouseDown=!1,this.stateDisposers=[],this.stateDisposers.push(n.autorun(function(){t.updateMainViewport(n.zoom,n.panX,n.panY)})),this.stateDisposers.push(n.autorun(function(){t.updateMinimapViewport(n.minimapZoom,n.minimapPanX,n.minimapPanY)})),this.stateDisposers.push(n.autorun(function(){n.nodes.version!==void 0&&(t.needsRun=!0),n.rels.version!==void 0&&(t.needsRun=!0)})),a.addChannel(si),s.addChannel(si),this.state=n,this.setupMinimapInteractions()},[{key:"needsToRun",value:function(){return this.needsRun||Object.keys(this.mainSceneRenderer.activeNodes).length>0}},{key:"renderMainScene",value:function(r){var e=this.state,t=e.nodes,n=e.rels;this.checkForUpdates(t,n),this.mainSceneRenderer.render(r,t,n),this.needsRun=!1}},{key:"renderMinimap",value:function(r){var e=this.state,t=e.nodes,n=e.rels;this.checkForUpdates(t,n),this.minimapRenderer.render(r,t,n),this.minimapRenderer.renderViewbox(),this.needsRun=!1}},{key:"checkForUpdates",value:function(r,e){var t=Object.values(r.channels[si].adds).length>0,n=Object.values(e.channels[si].adds).length>0,i=Object.values(r.channels[si].removes).length>0,o=Object.values(e.channels[si].removes).length>0,a=Object.values(r.channels[si].updates),s=Object.values(e.channels[si].updates);t||n||i||o?(this.mainSceneRenderer.setData({nodes:r.items,rels:e.items}),this.minimapRenderer.setData({nodes:r.items,rels:e.items})):(a.length>0&&(this.mainSceneRenderer.updateNodes(a),this.minimapRenderer.updateNodes(a)),s.length>0&&(this.mainSceneRenderer.updateRelationships(e.items),this.minimapRenderer.updateRelationships(e.items))),r.clearChannel(si),e.clearChannel(si)}},{key:"onResize",value:function(){var r=this.state,e=r.zoom,t=r.panX,n=r.panY,i=r.minimapZoom,o=r.minimapPanX,a=r.minimapPanY;this.updateMainViewport(e,t,n),this.updateMinimapViewport(i,o,a)}},{key:"updateMainViewport",value:function(r,e,t){this.mainSceneRenderer.updateViewport(r,e,t);var n=this.mainSceneRenderer.canvas.clientWidth,i=this.mainSceneRenderer.canvas.clientHeight;this.minimapRenderer.updateViewportBox(r,e,t,n,i),this.needsRun=!0}},{key:"updateMinimapViewport",value:function(r,e,t){this.minimapRenderer.updateViewport(r,e,t),this.needsRun=!0}},{key:"handleMinimapDrag",value:function(r){var e=this.state,t=this.minimapRenderer,n=BR(r,t.canvas,e.minimapZoom,e.minimapPanX,e.minimapPanY),i=n.x,o=n.y;e.setPan(i,o)}},{key:"handleMinimapWheel",value:function(r){var e=this.state,t=this.mainSceneRenderer;e.setZoom((function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(0,Qt.isNil)(n)||isNaN(n.deltaY)?i:i-n.deltaY/500*Math.min(1,i)})(r,e.zoom),t.canvas),r.preventDefault()}},{key:"setupMinimapInteractions",value:function(){var r=this,e=this.minimapRenderer.canvas;e.addEventListener("mousedown",function(t){r.handleMinimapDrag(t),r.minimapMouseDown=!0}),e.addEventListener("mousemove",function(t){r.minimapMouseDown&&r.handleMinimapDrag(t)}),e.addEventListener("mouseup",function(){r.minimapMouseDown=!1}),e.addEventListener("mouseleave",function(){r.minimapMouseDown=!1}),e.addEventListener("wheel",function(t){r.handleMinimapWheel(t)})}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(r){r()}),this.state.nodes.removeChannel(si),this.state.rels.removeChannel(si),this.mainSceneRenderer.destroy(),this.minimapRenderer.destroy()}}])})(),W8=(function(){return zR(function r(){UR(this,r),ci(this,"mainSceneRenderer",void 0),ci(this,"minimapRenderer",void 0),ci(this,"needsRun",void 0),ci(this,"minimapMouseDown",void 0),ci(this,"stateDisposers",void 0),ci(this,"state",void 0)},[{key:"renderMainScene",value:function(r){}},{key:"renderMinimap",value:function(r){}},{key:"checkForUpdates",value:function(r,e){}},{key:"onResize",value:function(){}},{key:"updateMainViewport",value:function(r,e,t){}},{key:"updateMinimapViewport",value:function(r,e,t){}},{key:"handleMinimapDrag",value:function(r){}},{key:"handleMinimapWheel",value:function(r){}},{key:"setupMinimapInteractions",value:function(){}},{key:"destroy",value:function(){}},{key:"needsToRun",value:function(){return!1}}])})();function bc(r){return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(r)}function Ym(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return HT(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?HT(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function HT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function H8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,GR(n.key),n)}}function dr(r,e,t){return(e=GR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function GR(r){var e=(function(t){if(bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(bc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return bc(e)=="symbol"?e:e+""}var bb,Kr=24,YT=(function(){return r=function t(n,i,o,a){var s;if((function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),dr(this,"nodeShader",void 0),dr(this,"nodeAnimShader",void 0),dr(this,"relShader",void 0),dr(this,"relDataBuffer",void 0),dr(this,"viewportBoxShader",void 0),dr(this,"defaultRelColor",void 0),dr(this,"defaultNodeColor",void 0),dr(this,"disableRelColor",void 0),dr(this,"disableNodeColor",void 0),dr(this,"gl",void 0),dr(this,"activeNodes",void 0),dr(this,"canvas",void 0),dr(this,"projection",void 0),dr(this,"idToIndex",void 0),dr(this,"posBuffer",void 0),dr(this,"numRels",void 0),dr(this,"numNodes",void 0),dr(this,"nodeDataByte",void 0),dr(this,"relIdToIndex",void 0),dr(this,"relData",void 0),dr(this,"viewportBoxBuffer",void 0),dr(this,"relBuffer",void 0),dr(this,"nodeBuffer",void 0),dr(this,"posTexture",void 0),((s=n.getExtension("OES_texture_float"))!==null&&s!==void 0?s:void 0)===void 0)throw new Error("Renderer needs floating point texture support");this.nodeShader=new aa(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;
uniform lowp vec3 u_nodeBorderColor;
uniform lowp vec3 u_selectedBorderColor;
uniform lowp vec3 u_selectedInnerBorderColor;
uniform lowp vec3 u_shadowColor;
uniform lowp float u_drawDefaultBorder;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_selected;
attribute lowp float a_hovered;

varying lowp float window;
varying lowp vec4 color;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float drawDefaultBorder;

lowp float MinNodeSize = 5.0;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);
  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  lowp float nodeSize = a_size * u_zoom * u_glAdjust;
  if (nodeSize < MinNodeSize) {
   gl_PointSize = MinNodeSize;
   varNodeSize = MinNodeSize;
  } else {
    gl_PointSize = nodeSize;
    varNodeSize = nodeSize;
  }

  color = a_color;
  selected = a_selected;
  hovered = a_hovered;
  nodeBorderColor = u_nodeBorderColor;
  selectedBorderColor = u_selectedBorderColor;
  selectedInnerBorderColor = u_selectedInnerBorderColor;
  shadowColor = u_shadowColor;
  drawDefaultBorder = u_drawDefaultBorder;
}`,`uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float drawDefaultBorder;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;

mediump float circleSize = 0.40;
mediump float defaultBoderSize = 0.42;
mediump float innerSelectedRingSize = 0.43;
mediump float outerSelectedRingSize = 0.47;
mediump float shadowSize = 0.51;

lowp float getShadowAlpha(lowp float size, lowp float dist) {
  return (1.0 - smoothstep(size, shadowSize, dist)) * 0.25;
}

lowp float getCircleAlpha(lowp float ringSize, lowp float nodeSize, lowp float dist) {
  return color.w - smoothstep(ringSize - nodeSize, ringSize, dist);
}

void main() {
  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float nodeSize = 1.0 / varNodeSize;
    lowp float nodeAlpha = getCircleAlpha(circleSize, nodeSize, dist);
    lowp float borderAlpha = getCircleAlpha(defaultBoderSize, nodeSize, dist);
    lowp float ringAlpha = getCircleAlpha(innerSelectedRingSize, nodeSize, dist);
    lowp vec3 finalColor = color.xyz;
    lowp float finalAlpha = nodeAlpha;

    if (selected > 0.0) {
      lowp float shadowAlpha = getShadowAlpha(outerSelectedRingSize, dist);
      lowp float ringAlpha2 = getCircleAlpha(outerSelectedRingSize, nodeSize, dist);

      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedInnerBorderColor, finalColor, borderAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(borderAlpha, ringAlpha2)));
      } else {
        finalColor = mix(selectedInnerBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(ringAlpha, ringAlpha2)));
      }
    } else if (hovered > 0.0) {
      if (drawDefaultBorder > 0.0) {
        lowp float shadowAlpha = getShadowAlpha(defaultBoderSize, dist);
  
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(shadowColor, finalColor, borderAlpha);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, ringAlpha));
      } else {
        lowp float shadowAlpha = getShadowAlpha(circleSize, dist);

        finalColor = mix(shadowColor, finalColor, nodeAlpha);
        finalAlpha = max(shadowAlpha, nodeAlpha);
      }
    } else {
      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalAlpha = borderAlpha;
      }
    }
    gl_FragColor = vec4(finalColor, 1.0) * finalAlpha;
  }
}
`),this.nodeAnimShader=new aa(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform lowp float u_animPos;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_active;

varying lowp float varNodeSize;
varying lowp vec4 color;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);

  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  float nodeSize = a_size * u_zoom * u_glAdjust;
  nodeSize = nodeSize * (0.4 / 0.5); // Remove extra space added for shadow and selection ring

  gl_PointSize = a_active > 0.5
    ? nodeSize + 0.88 * nodeSize * u_animPos
    : 0.0;

  color = a_color;
  varNodeSize = a_size;
}`,`uniform mediump float u_zoom;
uniform lowp float u_animPos;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float varNodeSize;
mediump float circleSize = 0.50;

void main(void) {

  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float alpha = 1.0 - smoothstep(circleSize - (1.0 / (varNodeSize * 2.0 * u_zoom * u_glAdjust)), circleSize, dist);
    lowp float pulseAlpha = 0.9 - 0.9 * u_animPos;
    gl_FragColor = vec4(color.xyz, 1.0) * alpha * pulseAlpha;
  }
}
`),this.relShader=new aa(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_glAdjust;

attribute vec2 a_from;
attribute vec2 a_to;
attribute lowp vec4 a_color;
attribute lowp float a_triside;
attribute float a_width;

varying lowp vec4 color;

void main(void) {
  vec4 from = texture2D(u_positions, a_from);
  vec4 to = texture2D(u_positions, a_to);
  vec2 direction = normalize(to.xy - from.xy);
  direction = vec2(-direction.y, direction.x);

  float width = a_width * u_glAdjust * 0.5;

  if (a_triside == 0.0) {
    from.y += (width / 2.0) * direction.y;
    from.x += (width / 2.0) * direction.x;
  } else {
    from.y -= (width / 2.0) * direction.y;
    from.x -= (width / 2.0) * direction.x;
  }

  color = a_color;
  gl_Position = u_projection * vec4(from.xy, 0.0, 1.0);
}
`,`varying lowp vec4 color;

void main(void) {
  gl_FragColor = vec4(color.xyz, 1.0) * color.w;
}
`),this.viewportBoxShader=new aa(n,`
attribute vec2 coordinates;
uniform mat4 u_projection;
uniform lowp vec4 u_minimapViewportBoxColor;

varying lowp vec4 minimapViewportBoxColor;

void main(void) {
  gl_Position = u_projection * vec4(coordinates, 0.0, 1.0);
  minimapViewportBoxColor = u_minimapViewportBoxColor;
}
`,`
varying lowp vec4 minimapViewportBoxColor;

void main(void) {
 gl_FragColor = minimapViewportBoxColor;
}
`),this.setShaderUniforms(a),n.clearColor(0,0,0,0),n.disable(n.DEPTH_TEST),this.defaultRelColor=a.defaultRelationshipColor,this.defaultNodeColor=a.defaultNodeColor,this.disableRelColor=a.disabledItemStyles.color,this.disableNodeColor=a.disabledItemStyles.color,n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this.gl=n,this.activeNodes={},this.canvas=n.canvas,this.projection=tv(),this.setData({nodes:i.items,rels:o.items}),this.createPositionTexture(),this.setupViewportRendering(a.minimapViewportBoxColor)},e=[{key:"setShaderUniforms",value:function(t){var n,i,o,a,s,u=t.nodeBorderStyles,l=null;((n=u.default)===null||n===void 0?void 0:n.rings.length)>0&&(l=(s=u.default.rings[0])===null||s===void 0?void 0:s.color);var c,f,h=null,d=null,v=(i=(o=u.selected)===null||o===void 0?void 0:o.rings)!==null&&i!==void 0?i:[],p=v.length;p>1&&(d=(c=v[p-2])===null||c===void 0?void 0:c.color,h=(f=v[p-1])===null||f===void 0?void 0:f.color);var m=null;(a=u.selected)!==null&&a!==void 0&&a.shadow&&(m=u.selected.shadow.color),this.nodeShader.use(),(0,Qt.isNil)(l)?this.nodeShader.setUniform("u_drawDefaultBorder",0):(this.nodeShader.setUniform("u_nodeBorderColor",td(l)),this.nodeShader.setUniform("u_drawDefaultBorder",1));var y=td(h),b=td(d),g=td(m);this.nodeShader.setUniform("u_selectedBorderColor",y),this.nodeShader.setUniform("u_selectedInnerBorderColor",b),this.nodeShader.setUniform("u_shadowColor",g)}},{key:"setData",value:function(t){var n=J0(t.rels,this.disableRelColor);this.setupNodeRendering(t.nodes),this.setupRelationshipRendering(n)}},{key:"render",value:function(t,n,i){var o,a=this.gl,s=this.idToIndex,u=Ym(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=s[l.id];this.posBuffer[4*c+0]=l.x,this.posBuffer[4*c+1]=l.y}}catch(f){u.e(f)}finally{u.f()}a.bindTexture(a.TEXTURE_2D,this.posTexture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,lt,lt,0,a.RGBA,a.FLOAT,this.posBuffer),a.enable(a.BLEND),a.bindFramebuffer(a.FRAMEBUFFER,null),a.clear(a.COLOR_BUFFER_BIT),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),this.renderAnimations(this.posTexture),this.numRels>0&&(this.relShader.use(),this.relShader.setUniform("u_positions",this.posTexture),a.bindBuffer(a.ARRAY_BUFFER,this.relBuffer),this.relShader.setAttributePointerByteNorm("a_color",4,0,16),this.relShader.setAttributePointerByteNorm("a_from",2,4,16),this.relShader.setAttributePointerByteNorm("a_to",2,6,16),this.relShader.setAttributePointerByteNorm("a_triside",1,8,16),this.relShader.setAttributePointerFloat("a_width",1,12,16),a.drawArrays(a.TRIANGLES,0,6*this.numRels)),this.numNodes>0&&(this.nodeShader.use(),this.nodeShader.setUniform("u_positions",this.posTexture),a.bindBuffer(a.ARRAY_BUFFER,this.nodeBuffer),this.nodeShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeShader.setAttributePointerByteNorm("a_selected",1,4,12),this.nodeShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeShader.setAttributePointerByte("a_size",4,8,12),this.nodeShader.setAttributePointerByteNorm("a_hovered",1,9,12),a.drawArrays(a.POINTS,0,this.numNodes))}},{key:"renderViewbox",value:function(){var t=this.gl,n=this.projection,i=this.viewportBoxBuffer;this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_projection",n),t.bindBuffer(t.ARRAY_BUFFER,i),this.viewportBoxShader.setAttributePointerFloat("coordinates",2,0,0),t.drawArrays(t.LINES,0,8)}},{key:"updateNodes",value:function(t){var n,i=this.gl,o=this.idToIndex,a=this.disableNodeColor,s=this.nodeBuffer,u=this.nodeDataByte,l=!1,c=Ym(t);try{for(c.s();!(n=c.n()).done;){var f=n.value,h=o[f.id];if(!(0,Qt.isNil)(f.color)||f.disabled===!0){var d=Qc(f.disabled===!0?a:f.color);this.nodeDataByte[3*h*4+0]=d[0],this.nodeDataByte[3*h*4+1]=d[1],this.nodeDataByte[3*h*4+2]=d[2],this.nodeDataByte[3*h*4+3]=255*d[3],l=!0}if(f.selected!==void 0){var v=f.selected;this.nodeDataByte[3*h*4+4]=v?255:0,l=!0}if(f.activated!==void 0&&(this.nodeDataByte[3*h*4+7]=f.activated?255:0,l=!0,f.activated?this.activeNodes[f.id]=!0:delete this.activeNodes[f.id]),f.hovered!==void 0){var p=f.disabled!==!0&&f.hovered;this.nodeDataByte[3*h*4+9]=p?255:0,l=!0}if(f.size!==void 0){var m=f.size;this.nodeDataByte[3*h*4+8]=m||Pr,l=!0}}}catch(y){c.e(y)}finally{c.f()}l&&(i.bindBuffer(i.ARRAY_BUFFER,s),i.bufferData(i.ARRAY_BUFFER,u,i.DYNAMIC_DRAW))}},{key:"updateRelationships",value:function(t){var n,i=J0(t,this.disableRelColor),o=this.gl,a=!1,s=Ym(i);try{for(s.s();!(n=s.n()).done;){var u=n.value,l=u.key,c=u.width,f=u.color,h=u.disabled,d=this.relIdToIndex[l],v=(0,Qt.isNil)(f)?this.defaultRelColor:f,p=ed(h?this.disableRelColor:v);this.relData.positionsAndColors[d*Kr+0]=p,this.relData.positionsAndColors[d*Kr+4]=p,this.relData.positionsAndColors[d*Kr+8]=p,this.relData.positionsAndColors[d*Kr+12]=p,this.relData.positionsAndColors[d*Kr+16]=p,this.relData.positionsAndColors[d*Kr+20]=p,a=!0,c!==void 0&&(this.relData.widths[d*Kr+3]=c,this.relData.widths[d*Kr+7]=c,this.relData.widths[d*Kr+11]=c,this.relData.widths[d*Kr+15]=c,this.relData.widths[d*Kr+19]=c,this.relData.widths[d*Kr+23]=c,a=!0)}}catch(m){s.e(m)}finally{s.f()}a&&(o.bindBuffer(o.ARRAY_BUFFER,this.relBuffer),o.bufferData(o.ARRAY_BUFFER,this.relDataBuffer,o.DYNAMIC_DRAW))}},{key:"createPositionTexture",value:function(){var t=this.gl,n=t.createTexture(),i=new Float32Array(262144);t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,lt,lt,0,t.RGBA,t.FLOAT,i),this.posTexture=n,this.posBuffer=i}},{key:"updateViewportBox",value:function(t,n,i,o,a){var s=this.gl,u=ir(),l=o*u,c=a*u,f=(.5*l+n*t)/t,h=(.5*c+i*t)/t,d=(.5*-l+n*t)/t,v=(.5*-c+i*t)/t,p=[f,h,d,h,d,h,d,v,d,v,f,v,f,v,f,h];s.bindBuffer(s.ARRAY_BUFFER,this.viewportBoxBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(p),s.DYNAMIC_DRAW)}},{key:"updateViewport",value:function(t,n,i){var o=this.gl,a=1/t,s=n-o.drawingBufferWidth*a*.5,u=i-o.drawingBufferHeight*a*.5,l=o.drawingBufferWidth*a,c=o.drawingBufferHeight*a,f=tv(),h=l6*ir();ob(f,s,s+l,u+c,u,0,1e6),this.nodeShader.use(),this.nodeShader.setUniform("u_zoom",t),this.nodeShader.setUniform("u_glAdjust",h),this.nodeShader.setUniform("u_projection",f),this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_zoom",t),this.nodeAnimShader.setUniform("u_glAdjust",h),this.nodeAnimShader.setUniform("u_projection",f),this.relShader.use(),this.relShader.setUniform("u_glAdjust",h),this.relShader.setUniform("u_projection",f),this.projection=f}},{key:"setupViewportRendering",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C_;this.viewportBoxBuffer=this.gl.createBuffer(),this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_minimapViewportBoxColor",[(t=Qc(n))[0]/255,t[1]/255,t[2]/255,t[3]])}},{key:"setupNodeRendering",value:function(t){var n=this.gl,i=new ArrayBuffer(8),o=new Uint32Array(i),a=new Uint8Array(i);this.nodeBuffer===void 0&&(this.nodeBuffer=n.createBuffer()),this.numNodes=t.length;var s=new ArrayBuffer(3*t.length*8),u=new Uint32Array(s),l={};this.activeNodes={};for(var c=0;c<t.length;c++){var f=t[c],h=f.selected,d=f.hovered,v=f.color,p=f.activated,m=f.size,y=f.id,b=f.disabled,g=ed((0,Qt.isNil)(v)?this.defaultNodeColor:v);u[3*c+0]=b?ed(this.disableNodeColor):g,a[0]=h?255:0,a[1]=c%lt,a[2]=Math.floor(c/lt),a[3]=p?255:0,a[4]=!b&&d?255:0,p&&(this.activeNodes[y]=!0),u[3*c+1]=o[0],u[3*c+2]=m??Pr,u[3*c+3]=o[1],l[y]=c}n.bindBuffer(n.ARRAY_BUFFER,this.nodeBuffer),n.bufferData(n.ARRAY_BUFFER,u,n.DYNAMIC_DRAW),this.numNodes=t.length,this.nodeDataByte=new Uint8Array(s),this.idToIndex=l}},{key:"setupRelationshipRendering",value:function(t){var n=this,i=this.gl,o=new ArrayBuffer(4),a=new Uint32Array(o),s=new Uint8Array(o),u={};this.relBuffer===void 0&&(this.relBuffer=i.createBuffer());for(var l=new ArrayBuffer(t.length*Kr*4),c=new Uint32Array(l),f=new Float32Array(l),h=function(v){var p=t[v],m=p.from,y=p.to,b=p.color,g=p.width,_=g===void 0?1:g,w=p.key,x=p.disabled,E=n.idToIndex[m],O=n.idToIndex[y],T=E%lt,C=Math.floor(E/lt),P=O%lt,R=Math.floor(O/lt),k=[T,C,P,R],I=[P,R,T,C],M=(0,Qt.isNil)(b)?n.defaultRelColor:b,j=ed(x?n.disableRelColor:M);u[w]=v;var L=0,F=function(z,V,G,Y){c[v*Kr+L]=z,L+=1;for(var ie=0;ie<V.length;ie++)s[ie]=V[ie];c[v*Kr+L]=a[0],L+=1,s[0]=G,c[v*Kr+L]=a[0],f[v*Kr+(L+=1)]=Y,L+=1};F(j,k,255,_),F(j,I,0,_),F(j,k,0,_),F(j,I,0,_),F(j,k,0,_),F(j,I,255,_)},d=0;d<t.length;d++)h(d);i.bindBuffer(i.ARRAY_BUFFER,this.relBuffer),i.bufferData(i.ARRAY_BUFFER,l,i.DYNAMIC_DRAW),this.numRels=t.length,this.relDataBuffer=l,this.relData={positionsAndColors:c,widths:f},this.relIdToIndex=u}},{key:"renderAnimations",value:function(t){var n=this.gl,i=this.nodeBuffer,o=this.numNodes,a=Date.now()%1e3/1e3,s=a<.7?a/.7:0;this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_positions",t),this.nodeAnimShader.setUniform("u_animPos",s),n.bindBuffer(n.ARRAY_BUFFER,i),this.nodeAnimShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeAnimShader.setAttributePointerByteNorm("a_active",1,7,12),this.nodeAnimShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeAnimShader.setAttributePointerByte("a_size",4,8,12),n.drawArrays(n.POINTS,0,o)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.nodeBuffer),this.gl.deleteBuffer(this.relBuffer),this.nodeShader.remove(),this.nodeAnimShader.remove(),this.relShader.remove()}}],e&&H8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),qR=function(r,e,t){var n=ir();r.width=e*n,r.height=t*n,r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px")},WR=function(r){Wt.warn("Error: WebGL context lost - visualization will stop working!",r),bb!==void 0&&bb(r)},Rd=function(r){var e=r.parentElement,t=e.getBoundingClientRect(),n=t.width,i=t.height;n!==0||i!==0||e.isConnected||(n=parseInt(e.style.width,10)||0,i=parseInt(e.style.height,10)||0),qR(r,n,i)},Xm=function(r,e){var t=document.createElement("canvas");return Object.assign(t.style,oR),r!==void 0&&(r.appendChild(t),Rd(t)),(function(n,i){bb=i,n.addEventListener("webglcontextlost",WR)})(t,e),t},fu=function(r){r.width=0,r.height=0,r.remove()},XT=function(r){var e={antialias:!0},t=r.getContext("webgl",e);return t===null&&(t=r.getContext("experimental-webgl",e)),(function(n){return n instanceof WebGLRenderingContext})(t)?t:null},$T=function(r){r.canvas.removeEventListener("webglcontextlost",WR);var e=r.getExtension("WEBGL_lose_context");e==null||e.loseContext()};function rd(r){return(function(e){if(Array.isArray(e))return wb(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||HR(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function _b(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=HR(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function HR(r,e){if(r){if(typeof r=="string")return wb(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wb(r,e):void 0}}function wb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Y8=Pr*ir();function _c(r){return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(r)}function KT(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nd(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KT(Object(t),!0).forEach(function(n){X8(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KT(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function X8(r,e,t){return(e=(function(n){var i=(function(o){if(_c(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(_c(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return _c(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ov=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,t={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},n=0;n<r.length;n++)t.minX>r[n].x&&(t.minX=r[n].x),t.minY>r[n].y&&(t.minY=r[n].y),t.maxX<r[n].x&&(t.maxX=r[n].x),t.maxY<r[n].y&&(t.maxY=r[n].y);var i=(t.minX+t.maxX)/2,o=(t.minY+t.maxY)/2,a=2*e,s=ir()*a;return{centerX:i,centerY:o,nodesWidth:t.maxX-t.minX+a+s,nodesHeight:t.maxY-t.minY+a+s}},Eb=function(r,e,t,n){var i=1/0,o=1/0;return r>1&&(i=t/r),e>1&&(o=n/e),{zoomX:i,zoomY:o}},YR=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0,i=Math.min(r,e);return Math.min(n,Math.max(t,i))},wc=function(r,e,t,n){return Math.max(Math.min(e,t),Math.min(r,n))},$m=function(r,e,t,n,i,o){var a=e;return(function(s,u,l){return s<u&&s<l})(i,o,e)&&r.length>1?(a=(function(s,u,l){var c=(function(p){var m=new Array(4).fill(p[0]);return p.forEach(function(y){m[0]=y.x<m[0].x?m[0]:nd({},y),m[1]=y.y<m[1].y?m[1]:nd({},y),m[2]=y.x<m[2].x?nd({},y):m[2],m[3]=y.y<m[3].y?nd({},y):m[3]}),m})(s),f=(function(){for(var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=0,y=0,b=0;b<p.length;b++)for(var g=b+1;g<p.length;g++)m=Math.hypot(Math.abs(p[b].x-p[g].x),Math.abs(p[b].y-p[g].y)),y=Math.max(y,m);return y})(c),h=2*l,d=ir()*h,v=u.height<=u.width?u.height-h-d:u.width-h-d;return f>v?.9*v/f:.9*f/v})(r,n,25),wc(i,o,Math.min(e,a),t)):wc(i,o,e,t)};function Ec(r){return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(r)}function $8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,XR(n.key),n)}}function XR(r){var e=(function(t){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ec(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Ec(e)=="symbol"?e:e+""}var K8=(function(){return r=function t(){var n,i,o;(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,o=void 0,(i=XR(i="callbacks"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.callbacks={}},e=[{key:"register",value:function(t,n){this.isCallbackRegistered(t)||(this.callbacks[t]=[]),this.callbacks[t].push(n)}},{key:"isCallbackRegistered",value:function(t){return this.callbacks[t]!==void 0}},{key:"callIfRegistered",value:function(){var t,n=arguments,i=Array.prototype.slice.call(arguments)[0];t=i,YU.includes(t)&&this.isCallbackRegistered(i)&&this.callbacks[i].slice(0).forEach(function(o){return o.apply(null,Array.prototype.slice.call(n,1))})}}],e&&$8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),Z8=_r(481),Km=_r.n(Z8);function Oc(r){return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(r)}function Q8(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,$R(n.key),n)}}function Ko(r,e,t){return(e=$R(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $R(r){var e=(function(t){if(Oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Oc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Oc(e)=="symbol"?e:e+""}var ZT=5e-5,J8=(function(){return r=function t(n){var i,o=this,a=n.state,s=n.getNodePositions,u=n.canvas;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),Ko(this,"xCtrl",void 0),Ko(this,"yCtrl",void 0),Ko(this,"zoomCtrl",void 0),Ko(this,"getNodePositions",void 0),Ko(this,"firstUpdate",void 0),Ko(this,"state",void 0),Ko(this,"canvas",void 0),Ko(this,"stateDisposers",void 0),this.state=a,this.getNodePositions=s,this.canvas=u,this.xCtrl=new(Km())(.35,ZT,.05,1),this.yCtrl=new(Km())(.35,ZT,.05,1),this.zoomCtrl=new(Km())(.3,1e-5,.01,1),this.stateDisposers=[],this.stateDisposers.push(a.autorun(function(){a.fitNodeIds===null&&(o.xCtrl.reset(),o.yCtrl.reset(),o.zoomCtrl.reset())})),this.stateDisposers.push(a.autorun(function(){i!==a.fitNodeIds&&(i=a.fitNodeIds,o.firstUpdate=!0)})),this.stateDisposers.push(a.autorun(function(){a.resetZoom&&(o.firstUpdate=!0)}))},e=[{key:"needsToRun",value:function(){var t=this.state,n=t.fitNodeIds,i=t.resetZoom;return n.length>0||i}},{key:"update",value:function(t,n){var i=this.state,o=i.fitNodeIds,a=i.resetZoom;o.length>0?this.fitNodes(o,t,n):a&&this.reset(t,n)}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){return t()})}},{key:"recalculateTarget",value:function(t,n,i,o){for(var a=this.xCtrl,s=this.yCtrl,u=this.zoomCtrl,l=this.state,c=[],f=0;f<t.length;f++)c.push({id:t[f]});var h=l.zoom,d=l.panX,v=l.panY,p=l.maxNodeRadius,m=l.nodes,y=l.defaultZoomLevel,b=this.getNodePositions(c);m.updatePositions(b);var g=ov(b,p),_=g.centerX,w=g.centerY,x=g.nodesWidth,E=g.nodesHeight;if(isNaN(_)||isNaN(w))return Wt.info("fit() function couldn't calculate center point, not updating viewport"),!1;var O=n.noPan,T=n.outOnly,C=n.minZoom,P=n.maxZoom;a.setTarget(O?d:_),s.setTarget(O?v:w);var R=Eb(x,E,i,o),k=R.zoomX,I=R.zoomY;if(k===1/0&&I===1/0)u.setTarget(y);else{var M=YR(k,I,C,P);T&&h<M?u.setTarget(h):u.setTarget(M)}return!0}},{key:"allNodesAreVisible",value:function(t,n,i){var o=Eb(n,i,this.canvas.width,this.canvas.height),a=o.zoomX,s=o.zoomY;return t<a&&t<s}},{key:"reset",value:function(t,n){var i=this.xCtrl,o=this.yCtrl,a=this.zoomCtrl,s=this.state,u=this.firstUpdate,l=this.canvas,c=s.zoom,f=s.panX,h=s.panY,d=s.nodes,v=s.maxNodeRadius,p=s.defaultZoomLevel;if(u||t){a.setTarget(p);var m=ov(Object.values(d.idToPosition),v),y=m.centerX,b=m.centerY,g=m.nodesWidth,_=m.nodesHeight;this.allNodesAreVisible(c,g,_)?(i.setTarget(y),o.setTarget(b)):(i.setTarget(f),o.setTarget(h)),this.firstUpdate=!1}var w=c+a.update(c),x=f+i.update(f),E=h+o.update(h);s.updateZoomToFit(w,x,E,l),Math.abs(a.target-w)<.01&&(s.updateZoomToFit(p,x,E,l),s.clearReset(),n!==void 0&&n())}},{key:"fitNodes",value:function(t,n,i){var o=this.state,a=this.firstUpdate,s=this.canvas,u=this.xCtrl,l=this.yCtrl,c=this.zoomCtrl,f=o.zoomOptions,h=f===void 0?{}:f,d=o.zoom,v=o.panX,p=o.panY,m=!0;if(a||n){var y=s.width,b=s.height;m=this.recalculateTarget(t,h,y,b),this.firstUpdate=!1}if(m){if(!h.animated)return o.setZoomPan(c.target,u.target,l.target,s),void o.clearFit();var g=v+u.update(v),_=p+l.update(p),w=d+c.update(d);o.updateZoomToFit(w,g,_,s);var x=Math.max(5,10/c.target),E=Math.min(.01,.01*c.target);!n&&Math.abs(c.target-w)<E&&Math.abs(u.target-g)<x&&Math.abs(l.target-_)<x&&(o.setZoom(c.target,s),o.clearFit(),i!==void 0&&i())}}}],e&&Q8(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function xc(r){return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(r)}function Ob(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function o(d,v,p,m){var y=v&&v.prototype instanceof s?v:s,b=Object.create(y.prototype);return $n(b,"_invoke",(function(g,_,w){var x,E,O,T=0,C=w||[],P=!1,R={p:0,n:0,v:r,a:k,f:k.bind(r,4),d:function(I,M){return x=I,E=0,O=r,R.n=M,a}};function k(I,M){for(E=I,O=M,e=0;!P&&T&&!j&&e<C.length;e++){var j,L=C[e],F=R.p,z=L[2];I>3?(j=z===M)&&(O=L[(E=L[4])?5:(E=3,3)],L[4]=L[5]=r):L[0]<=F&&((j=I<2&&F<L[1])?(E=0,R.v=M,R.n=L[1]):F<z&&(j=I<3||L[0]>M||M>z)&&(L[4]=I,L[5]=M,R.n=z,E=0))}if(j||I>1)return a;throw P=!0,M}return function(I,M,j){if(T>1)throw TypeError("Generator is already running");for(P&&M===1&&k(M,j),E=M,O=j;(e=E<2?r:O)||!P;){x||(E?E<3?(E>1&&(R.n=-1),k(E,O)):R.n=O:R.v=O);try{if(T=2,x){if(E||(I="next"),e=x[I]){if(!(e=e.call(x,O)))throw TypeError("iterator result is not an object");if(!e.done)return e;O=e.value,E<2&&(E=0)}else E===1&&(e=x.return)&&e.call(x),E<2&&(O=TypeError("The iterator does not provide a '"+I+"' method"),E=1);x=r}else if((e=(P=R.n<0)?O:g.call(_,R))!==a)break}catch(L){x=r,E=1,O=L}finally{T=1}}return{value:e,done:P}}})(d,p,m),!0),b}var a={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):($n(e={},n,function(){return this}),e),f=l.prototype=s.prototype=Object.create(c);function h(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,l):(d.__proto__=l,$n(d,i,"GeneratorFunction")),d.prototype=Object.create(f),d}return u.prototype=l,$n(f,"constructor",l),$n(l,"constructor",u),u.displayName="GeneratorFunction",$n(l,i,"GeneratorFunction"),$n(f),$n(f,i,"Generator"),$n(f,n,function(){return this}),$n(f,"toString",function(){return"[object Generator]"}),(Ob=function(){return{w:o,m:h}})()}function $n(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}$n=function(o,a,s,u){if(a)i?i(o,a,{value:s,enumerable:!u,configurable:!u,writable:!u}):o[a]=s;else{var l=function(c,f){$n(o,c,function(h){return this._invoke(c,f,h)})};l("next",0),l("throw",1),l("return",2)}},$n(r,e,t,n)}function QT(r,e,t,n,i,o,a){try{var s=r[o](a),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function JT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function e2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e2(Object(t),!0).forEach(function(n){xt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):e2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ez(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,KR(n.key),n)}}function xt(r,e,t){return(e=KR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function KR(r){var e=(function(t){if(xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(xc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return xc(e)=="symbol"?e:e+""}var id="NvlController",od={filename:"visualisation.png",backgroundColor:"rgba(0,0,0,0)"},hu="onError",t2="onLayoutDone",r2="onLayoutStep",av={},Nl=function(){var r;return(r=av[arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default"])!==null&&r!==void 0?r:Object.values(av).pop()},tz=(function(){return r=function i(o,a){var s,u,l,c=this;(function(L,F){if(!(L instanceof F))throw new TypeError("Cannot call a class as a function")})(this,i),xt(this,"destroyed",void 0),xt(this,"state",void 0),xt(this,"callbacks",void 0),xt(this,"instanceId",void 0),xt(this,"glController",void 0),xt(this,"webGLContext",void 0),xt(this,"webGLMinimapContext",void 0),xt(this,"htmlOverlay",void 0),xt(this,"hasResized",void 0),xt(this,"hierarchicalLayout",void 0),xt(this,"gridLayout",void 0),xt(this,"freeLayout",void 0),xt(this,"d3ForceLayout",void 0),xt(this,"forceLayout",void 0),xt(this,"canvasRenderer",void 0),xt(this,"glCanvas",void 0),xt(this,"canvasRect",void 0),xt(this,"glMinimapCanvas",void 0),xt(this,"c2dCanvas",void 0),xt(this,"isInRenderSwitchAnimation",void 0),xt(this,"justSwitchedRenderer",void 0),xt(this,"justSwitchedLayout",void 0),xt(this,"layoutUpdating",void 0),xt(this,"layoutComputing",void 0),xt(this,"isRenderingDisabled",void 0),xt(this,"setRenderSwitchAnimation",void 0),xt(this,"stateDisposers",void 0),xt(this,"zoomTransitionHandler",void 0),xt(this,"currentLayout",void 0),xt(this,"layoutTimeLimit",void 0),xt(this,"pixelRatio",void 0),xt(this,"removeResizeListener",void 0),xt(this,"removeMinimapResizeListener",void 0),xt(this,"pendingZoomOperation",void 0),xt(this,"layoutRunner",void 0),xt(this,"animationRequestId",void 0),xt(this,"layoutDoneCallback",void 0),xt(this,"layoutComputingCallback",void 0),xt(this,"currentLayoutType",void 0),xt(this,"descriptionElement",void 0),this.destroyed=!1;var f=a.frame,h=a.minimapContainer,d=h===void 0?document.createElement("span"):h,v=a.layoutOptions,p=a.layout,m=a.instanceId,y=m===void 0?"default":m,b=a.disableAria,g=b!==void 0&&b,_=o.nodes,w=o.rels,x=o.webGLVisible,E=o.disableWebGL;this.state=o,this.callbacks=new K8,this.instanceId=y;var O=f;O.setAttribute("instanceId",y),O.setAttribute("data-testid","nvl-parent"),(s=O.style.height)!==null&&s!==void 0&&s.length||Object.assign(O.style,{height:"100%"}),(u=O.style.outline)!==null&&u!==void 0&&u.length||Object.assign(O.style,{outline:"none"}),this.descriptionElement=g?document.createElement("div"):(function(L,F){var z;L.setAttribute("role","img"),L.setAttribute("aria-label","Graph visualization");var V="nvl-".concat(F,"-description"),G=(z=document.getElementById(V))!==null&&z!==void 0?z:document.createElement("div");return G.innerHTML="",G.id="nvl-".concat(F,"-description"),G.setAttribute("role","status"),G.setAttribute("aria-live","polite"),G.setAttribute("aria-atomic","false"),G.style.display="none",L.appendChild(G),L.setAttribute("aria-describedby",G.id),G})(O,y);var T=Xm(O,this.onWebGLContextLost.bind(this)),C=Xm(d,this.onWebGLContextLost.bind(this));if(T.setAttribute("data-testid","nvl-gl-canvas"),E)this.glController=new W8;else{var P=XT(T),R=XT(C);this.glController=new q8({mainSceneRenderer:new YT(P,_,w,this.state),minimapRenderer:new YT(R,_,w,this.state),state:o}),this.webGLContext=P,this.webGLMinimapContext=R}var k=Xm(O,this.onWebGLContextLost.bind(this));k.setAttribute("data-testid","nvl-c2d-canvas");var I=k.getContext("2d"),M=document.createElement("div");Object.assign(M.style,cn(cn({},oR),{},{overflow:"hidden"})),O.appendChild(M),this.htmlOverlay=M,this.hasResized=!0,this.hierarchicalLayout=new Z6(cn(cn({},v),{},{state:this.state})),this.gridLayout=new B6({state:this.state}),this.freeLayout=new L6({state:this.state}),this.d3ForceLayout=new g6({state:this.state}),this.forceLayout=E?this.d3ForceLayout:new D6(cn(cn({},v),{},{webGLContext:this.webGLContext,state:this.state})),this.state.setLayout(p),this.state.setLayoutOptions(v);var j=new V8(k,I,o,a);this.canvasRenderer=j,this.glCanvas=T,this.canvasRect=T.getBoundingClientRect(),this.glMinimapCanvas=C,this.c2dCanvas=k,this.glCanvas.style.opacity=x?"1":"0",this.c2dCanvas.style.opacity=x?"0":"1",this.isInRenderSwitchAnimation=!1,this.justSwitchedRenderer=!1,this.justSwitchedLayout=!1,this.hasResized=!1,this.layoutUpdating=!1,this.layoutComputing=!1,this.isRenderingDisabled=!1,_.addChannel(id),w.addChannel(id),this.setRenderSwitchAnimation=function(){c.isInRenderSwitchAnimation=!1},this.stateDisposers=[],this.stateDisposers.push(o.autorun(function(){c.callIfRegistered("zoom",o.zoom)})),this.stateDisposers.push(o.autorun(function(){c.callIfRegistered("pan",{panX:o.panX,panY:o.panY})})),this.stateDisposers.push(o.autorun(function(){c.setLayout(o.layout)})),this.stateDisposers.push(o.autorun(function(){c.setLayoutOptions(o.layoutOptions)})),g||this.stateDisposers.push(o.autorun(function(){(function(L,F){var z=L.nodes,V=L.rels,G=L.layout,Y=z.items.length,ie=V.items.length;if(Y!==0||ie!==0){var W="".concat(Y," node").concat(Y!==1?"s":""),H="".concat(ie," relationship").concat(ie!==1?"s":""),Q="displayed using a ".concat(G??"forceDirected"," layout");F.innerHTML="A graph visualization with ".concat(W," and ").concat(H,", ").concat(Q,".")}else F.innerHTML="An empty graph visualization."})(o,c.descriptionElement)})),this.stateDisposers.push(o.autorun(function(){var L=o.webGLVisible?"1":"0";L!==c.glCanvas.style.opacity&&(c.justSwitchedRenderer=!0,c.glCanvas.style.opacity=L,c.c2dCanvas.style.opacity=o.webGLVisible?"0":"1")})),this.startMainLoop(),this.zoomTransitionHandler=new J8({state:o,getNodePositions:function(L){return c.currentLayout.getNodePositions(L)},canvas:T}),this.layoutTimeLimit=(l=a.layoutTimeLimit)!==null&&l!==void 0?l:16,this.pixelRatio=ir(),this.removeResizeListener=zS()(O,function(){Rd(T),Rd(k),c.canvasRect=T.getBoundingClientRect(),c.hasResized=!0}),this.removeMinimapResizeListener=zS()(d,function(){Rd(C)}),av[y]=this,window.__Nvl_dumpNodes=function(L){var F;return(F=Nl(L))===null||F===void 0?void 0:F.dumpNodes()},window.__Nvl_dumpRelationships=function(L){var F;return(F=Nl(L))===null||F===void 0?void 0:F.dumpRelationships()},window.__Nvl_registerDoneCallback=function(L,F){var z;return(z=Nl(F))===null||z===void 0?void 0:z.on(t2,L)},window.__Nvl_getNodesOnScreen=function(L){var F;return(F=Nl(L))===null||F===void 0?void 0:F.getNodesOnScreen()},window.__Nvl_getZoomLevel=function(L){var F;return(F=Nl(L))===null||F===void 0?void 0:F.getScale()},this.pendingZoomOperation=null},e=[{key:"onWebGLContextLost",value:function(i){this.callIfRegistered("onWebGLContextLost",i)}},{key:"updateMinimapZoom",value:function(){var i=this.state,o=i.nodes,a=i.maxNodeRadius,s=i.maxMinimapZoom,u=i.minMinimapZoom,l=ov(Object.values(o.idToPosition),a),c=l.centerX,f=l.centerY,h=l.nodesWidth,d=l.nodesHeight,v=Eb(h,d,this.glMinimapCanvas.width,this.glMinimapCanvas.height),p=v.zoomX,m=v.zoomY,y=YR(p,m,u,s);this.state.updateMinimapZoomToFit(y,c,f)}},{key:"startMainLoop",value:function(){var i=this,o=this.state,a=o.nodes,s=o.rels;this.currentLayout.update();var u=this.currentLayout.getNodePositions(a.items);a.updatePositions(u),this.isRenderingDisabled||(this.glController.renderMainScene(u),this.glController.renderMinimap(u),this.canvasRenderer.processUpdates(),this.canvasRenderer.render(u)),this.layoutRunner=setInterval(function(){try{(function(){var c=i.currentLayout.getShouldUpdate(),f=c||i.justSwitchedLayout,h=f&&!i.layoutUpdating&&!i.justSwitchedLayout;if(f)for(var d=window.performance.now(),v=h?0:50,p=0;p<v;p++){i.currentLayout.update(i.justSwitchedLayout),i.justSwitchedLayout=!1;var m=window.performance.now();if(!c||m-d>i.layoutTimeLimit)break}})()}catch(c){if(!i.callbacks.isCallbackRegistered(hu))throw c;i.callIfRegistered(hu,c)}},13);var l=function(){try{(function(c){if(i.destroyed)Wt.info("STEP IN A DESTROYED STRIP");else{var f=ir();if(f!==i.pixelRatio)return i.pixelRatio=f,void i.callIfRegistered("restart");var h=i.currentLayout.getShouldUpdate(),d=h||i.justSwitchedLayout,v=i.currentLayout.getComputing(),p=i.zoomTransitionHandler.needsToRun(),m=d&&!i.layoutUpdating&&!i.justSwitchedLayout,y=i.layoutComputing&&!v,b=i.state.webGLVisible&&i.glController.needsToRun(),g=!i.state.webGLVisible&&i.canvasRenderer.needsToRun(),_=i.isInRenderSwitchAnimation||i.justSwitchedRenderer,w=i.hasResized,x=i.pendingZoomOperation!==null,E=i.glController.minimapMouseDown;if(a.clearChannel(id),s.clearChannel(id),p||d||y||_||b||g||E||w||x){!x||m||i.currentLayout.getComputing()||(i.pendingZoomOperation(),i.pendingZoomOperation=null);var O=h||v||y;i.zoomTransitionHandler.update(O,function(){return i.callIfRegistered("onZoomTransitionDone")}),w&&i.glController.onResize();var T=i.currentLayout.getNodePositions(a.items);if(a.updatePositions(T),i.callbacks.isCallbackRegistered(r2)&&i.callIfRegistered(r2,i.dumpNodes()),i.updateMinimapZoom(),i.glController.renderMinimap(T),!i.isRenderingDisabled){if((i.state.webGLVisible||_)&&i.glController.renderMainScene(T),!i.state.webGLVisible||_){i.canvasRenderer.processUpdates(),i.canvasRenderer.render(T);for(var C=0;C<s.items.length;C++){var P=s.items[C].id,R=i.canvasRenderer.arrowBundler.getBundle(s.items[C]),k=s.idToHtmlOverlay[P],I=R.labelInfo[P];if(k&&I){var M=I.rotation,j=I.position,L=I.width,F=I.height,z=i.mapCanvasSpaceToRelativePosition(j.x,j.y),V=z.x,G=z.y,Y=L>5&&!i.state.webGLVisible;Object.assign(k.style,{top:"".concat(G,"px"),left:"".concat(V,"px"),width:"".concat(L,"px"),height:"".concat(F,"px"),display:Y?"block":"none",transform:"translate(-50%, -50%) scale(".concat(Number(i.state.zoom),") rotate(").concat(M,"rad")})}}}for(var ie=0;ie<a.items.length;ie++){var W=a.items[ie],H=W.id,Q=W.size,J=a.idToHtmlOverlay[H];if(J){var ne=i.state.nodes.idToPosition[H],K=i.mapCanvasSpaceToRelativePosition(ne.x,ne.y),$=K.x,Z=K.y,ae="".concat(2*(Q??Pr),"px");Object.assign(J.style,{top:"".concat(Z,"px"),left:"".concat($,"px"),width:ae,height:ae,transform:"translate(-50%, -50%) scale(".concat(Number(i.state.zoom),")")})}}}}var se=!d&&i.layoutUpdating,fe=v!==i.layoutComputing;i.layoutComputing=v,i.layoutUpdating=d,se&&i.callIfRegistered(t2),fe&&i.callIfRegistered("onLayoutComputing",v),i.justSwitchedRenderer=!1,i.hasResized=!1,c!==void 0&&c()}})(function(){i.animationRequestId=window.requestAnimationFrame(l)})}catch(c){if(!i.callbacks.isCallbackRegistered(hu))throw c;i.callIfRegistered(hu,c)}};this.animationRequestId=window.requestAnimationFrame(l)}},{key:"updateHtmlOverlay",value:function(){this.state.nodes.updateHtmlOverlay(this.htmlOverlay),this.state.rels.updateHtmlOverlay(this.htmlOverlay)}},{key:"dumpNodes",value:function(){var i,o=Pn(this.state.nodes.items),a=this.state.nodes.idToPosition,s=[],u=(function(h,d){var v=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!v){if(Array.isArray(h)||(v=(function(_,w){if(_){if(typeof _=="string")return JT(_,w);var x={}.toString.call(_).slice(8,-1);return x==="Object"&&_.constructor&&(x=_.constructor.name),x==="Map"||x==="Set"?Array.from(_):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?JT(_,w):void 0}})(h))||d){v&&(h=v);var p=0,m=function(){};return{s:m,n:function(){return p>=h.length?{done:!0}:{done:!1,value:h[p++]}},e:function(_){throw _},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,b=!0,g=!1;return{s:function(){v=v.call(h)},n:function(){var _=v.next();return b=_.done,_},e:function(_){g=!0,y=_},f:function(){try{b||v.return==null||v.return()}finally{if(g)throw y}}}})(o);try{for(u.s();!(i=u.n()).done;){var l=i.value,c=a[l.id],f=this.mapCanvasSpaceToRelativePosition(c.x,c.y);s.push(cn(cn({},l),{},{x:f.x,y:f.y}))}}catch(h){u.e(h)}finally{u.f()}return s}},{key:"dumpRelationships",value:function(){return Pn(this.state.rels.items)}},{key:"mapCanvasSpaceToRelativePosition",value:function(i,o){var a=this.canvasRect,s=window.devicePixelRatio||1,u=(i-this.state.panX)*this.state.zoom/s,l=(o-this.state.panY)*this.state.zoom/s;return{x:u+.5*a.width,y:l+.5*a.height}}},{key:"mapRelativePositionToCanvasSpace",value:function(i,o){var a=this.glCanvas.getBoundingClientRect(),s=window.devicePixelRatio||1,u=s*(i-.5*a.width),l=s*(o-.5*a.height);return{x:this.state.panX+u/this.state.zoom,y:this.state.panY+l/this.state.zoom}}},{key:"getNodePositions",value:function(){return Object.values(Pn(this.state.nodes.idToPosition))}},{key:"setNodePositions",value:function(i){var o=this,a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s=[],u=i.filter(function(l){var c=l.id,f=o.state.nodes.idToItem[c]!==void 0;return f||s.push(c),f});s.length>0&&Wt.warn("Failed to set positions for following nodes:",s,"They do not exist in the graph."),this.state.nodes.updatePositions(u),this.currentLayout.updateNodes(u),a||this.currentLayout.terminateUpdate(),this.hasResized=!0,this.getNodesOnScreen().nodes.length===0&&this.state.setPan(0,0),this.state.clearFit()}},{key:"isLayoutMoving",value:function(){return this.layoutUpdating}},{key:"getNodesOnScreen",value:function(){var i=this.glCanvas.getBoundingClientRect(),o=this.mapRelativePositionToCanvasSpace(0,0),a=o.x,s=o.y,u=this.mapRelativePositionToCanvasSpace(i.width,i.height);return(function(l,c,f,h,d){var v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:["node"],p=d.nodes,m=d.rels,y=Math.min(l,f),b=Math.max(l,f),g=Math.min(c,h),_=Math.max(c,h),w=[],x=[];if(v.includes("node"))for(var E=0,O=Object.values(p.idToPosition);E<O.length;E++){var T=O[E],C=T.x,P=T.y;C!==void 0&&P!==void 0&&C>y&&C<b&&P>g&&P<_&&w.push(T)}if(v.includes("relationship")){var R,k=_b(m.items);try{for(k.s();!(R=k.n()).done;){var I=R.value,M=I.from,j=I.to,L=p.idToPosition[M],F=p.idToPosition[j];if(L.x!==void 0&&L.y!==void 0&&F.x!==void 0&&F.y!==void 0){var z=L.x>y&&L.x<b&&L.y>g&&L.y<_,V=F.x>y&&F.x<b&&F.y>g&&F.y<_;z&&V&&x.push(I)}}}catch(G){k.e(G)}finally{k.f()}}return{nodes:w,rels:x}})(a,s,u.x,u.y,this.state,["node"])}},{key:"registerDoneCallback",value:function(i){this.layoutDoneCallback=i}},{key:"registerComputingCallback",value:function(i){this.layoutComputingCallback=i}},{key:"getPosition",value:function(i){return this.currentLayout.getNodePositions([{id:i}])[0]}},{key:"getScale",value:function(){return this.state.zoom}},{key:"getPan",value:function(){return{x:this.state.panX,y:this.state.panY}}},{key:"setZoomLevel",value:function(i){var o=this;this.pendingZoomOperation=function(){return o.state.setZoom(i,o.glCanvas)}}},{key:"setPanCoordinates",value:function(i,o){this.state.setPan(i,o)}},{key:"setZoomAndPan",value:function(i,o,a){var s=this;this.pendingZoomOperation=function(){return s.state.setZoomPan(i,o,a,s.glCanvas)}}},{key:"fit",value:function(i,o){var a=this;this.pendingZoomOperation=function(){return a.state.fitNodes(i,o)}}},{key:"resetZoom",value:function(){var i=this;this.pendingZoomOperation=function(){return i.state.setZoomReset()}}},{key:"setRenderer",value:function(i){this.state.setRenderer(i)}},{key:"on",value:function(i,o){this.callbacks.register(i,o)}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"destroy",value:function(){var i;this.destroyed||(this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.layoutRunner!==void 0&&window.clearInterval(this.layoutRunner),this.glController.destroy(),this.glCanvas.removeEventListener("transitionend",this.setRenderSwitchAnimation),this.webGLContext!==void 0&&$T(this.webGLContext),this.webGLMinimapContext!==void 0&&$T(this.webGLMinimapContext),fu(this.glCanvas),fu(this.glMinimapCanvas),this.canvasRenderer.destroy(),fu(this.c2dCanvas),this.removeResizeListener(),this.removeMinimapResizeListener(),this.forceLayout.destroy(),this.hierarchicalLayout.destroy(),this.gridLayout.destroy(),this.freeLayout.destroy(),this.htmlOverlay.remove(),this.descriptionElement.remove(),this.zoomTransitionHandler.destroy(),this.stateDisposers.forEach(function(o){o()}),i=this.instanceId,delete av[i],this.destroyed=!0)}},{key:"callIfRegistered",value:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];this.callbacks.callIfRegistered.apply(this.callbacks,arguments)}},{key:"getCanvasRelsAt",value:function(i){return this.canvasRenderer.getRelsAt(i)}},{key:"getCanvasNodesAt",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.canvasRenderer.getNodesAt(i,o)}},{key:"getLayout",value:function(i){return i===Cd?this.hierarchicalLayout:i===z6?this.forceLayout:i===V6?this.gridLayout:i===G6?this.freeLayout:i===q6?this.d3ForceLayout:this.forceLayout}},{key:"setLayout",value:function(i){Wt.info("Switching to layout: ".concat(i));var o=this.currentLayoutType,a=this.getLayout(i);i==="free"&&a.setNodePositions(this.state.nodes.idToPosition),this.currentLayout=a,this.currentLayoutType=i,o&&o!==this.currentLayoutType&&(this.justSwitchedLayout=!0)}},{key:"setLayoutOptions",value:function(i){this.getLayout(this.state.layout).setOptions(i)}},{key:"getDataUrlForCanvas",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=i.toDataURL("image/png");return o?a.replace(/^data:image\/png/,"data:application/octet-stream"):a}},{key:"initiateFileDownload",value:function(i,o){var a=document.createElement("a");a.style.display="none",a.setAttribute("download",i);var s=this.getDataUrlForCanvas(o,!0);a.setAttribute("href",s),a.click()}},{key:"updateLayoutAndPositions",value:function(){var i=this.state.nodes,o=i.items;this.currentLayout.update(this.justSwitchedLayout),this.justSwitchedLayout=!1;var a=this.currentLayout.getNodePositions(o);return i.updatePositions(a),a}},{key:"saveToFile",value:function(i){var o=cn(cn({},od),i),a=this.createCanvasAndRenderImage(this.c2dCanvas.width,this.c2dCanvas.height,o.backgroundColor);this.initiateFileDownload(o.filename,a),fu(a),a=null}},{key:"getImageDataURL",value:function(i){var o=cn(cn({},od),i),a=this.createCanvasAndRenderImage(this.c2dCanvas.width,this.c2dCanvas.height,o.backgroundColor),s=this.getDataUrlForCanvas(a);return fu(a),a=null,s}},{key:"prepareLargeFileForDownload",value:function(i){var o=this,a=cn(cn({},od),i),s=this.currentLayout.getNodePositions(this.state.nodes.items),u=ov(s,100),l=u.nodesWidth,c=u.nodesHeight,f=u.centerX,h=u.centerY,d=Math.max(Math.min(l+100,15e3),5e3),v=Math.max(Math.min(c+100,15e3),5e3);return this.isRenderingDisabled=!0,new Promise(function(p,m){try{o.setPanCoordinates(f,h);var y=Math.max(d/l-.02,o.state.minZoom),b=Math.max(v/c-.02,o.state.minZoom);o.setZoomLevel(Math.min(y,b))}catch(g){return Wt.error("An error occurred while downloading the file"),void m(g)}setTimeout(function(){try{var g=o.createCanvasAndRenderImage(d,v,a.backgroundColor);o.initiateFileDownload(a.filename,g),fu(g),g=null,p(!0)}catch(_){m(_)}},500)})}},{key:"createCanvasAndRenderImage",value:function(i,o,a){var s=(function(c,f){var h=document.createElement("canvas");return document.body.appendChild(h),qR(h,c,f),h})(i,o),u=(function(c){return c.getContext("2d")})(s),l=this.updateLayoutAndPositions();return this.canvasRenderer.processUpdates(),this.canvasRenderer.render(l,{canvas:s,context:u,backgroundColor:a,ignoreAnimations:!0,showCaptions:!0}),s}},{key:"saveFullGraphToLargeFile",value:(t=Ob().m(function i(o){var a,s,u,l,c;return Ob().w(function(f){for(;;)switch(f.n){case 0:return a=cn(cn({},od),o),s=this.state.zoom,u=this.state.panX,l=this.state.panY,f.p=1,f.n=2,this.prepareLargeFileForDownload(a);case 2:f.n=5;break;case 3:if(f.p=3,c=f.v,Wt.error("An error occurred while downloading the image"),!this.callbacks.isCallbackRegistered(hu)){f.n=4;break}this.callIfRegistered(hu,c),f.n=5;break;case 4:throw c;case 5:return f.p=5,this.isRenderingDisabled=!1,this.setZoomLevel(s),this.setPanCoordinates(u,l),f.f(5);case 6:return f.a(2)}},i,this,[[1,3,5,6]])}),n=function(){var i=this,o=arguments;return new Promise(function(a,s){var u=t.apply(i,o);function l(f){QT(u,a,s,l,c,"next",f)}function c(f){QT(u,a,s,l,c,"throw",f)}l(void 0)})},function(i){return n.apply(this,arguments)})}],e&&ez(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e,t,n})();function Sc(r){return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(r)}function Uv(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function rz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,nz(n.key),n)}}function zv(r,e,t){return e&&rz(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function nz(r){var e=(function(t){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Sc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Sc(e)=="symbol"?e:e+""}var Zm=(function(){return zv(function r(e,t){if(Uv(this,r),!e)throw new Error("Tried to create a node with no data");this.data=e,this.parent=t,this.children=[]},[{key:"addChild",value:function(r){this.children.push(r)}},{key:"isRoot",value:function(){return this.parent===null}},{key:"print",value:function(){var r=this.data.name;this.isRoot()||(r="".concat(r,"		").concat((function(n){for(var i=(Math.round(1e3*n)/1e3).toFixed(3);i.length<6;)i=" ".concat(i);return i})(this.data._timeSpent())," ms"),this.parent.isRoot()||(r="".concat(r,"	").concat(this._percentageOfParentSpent(),"%")));var e=this.noOfChildren()>0;for(var t in e&&(r="".concat(r,"	 Children: ").concat(this.noOfChildren()),console.groupCollapsed(r)),this.children)this.children[t].print();e&&console.groupEnd()}},{key:"noOfChildren",value:function(){return this.children.length}},{key:"_percentageOfParentSpent",value:function(){return Math.round(this.data._timeSpent()/this.parent.data._timeSpent()*100)}}])})(),ZR=(function(){return zv(function r(e){Uv(this,r),this.name=e,this.startTime=performance.now(),this.endTime=null},[{key:"close",value:function(){this.endTime=performance.now()}},{key:"_timeSpent",value:function(){if(this.startTime===null||this.endTime===null)throw new Error("You have an error in your performance measurements that makes the whole tree unreliable. You probably forgot to call performanceTestEnd on ".concat(this.name));return this.endTime-this.startTime}}])})(),iz=(function(){return zv(function r(){Uv(this,r),this.root=new Zm(new ZR("Performance Tree"),null),this.current=this.root},[{key:"clear",value:function(){this.root.children=[],this.current=this.root}},{key:"add",value:function(r){if(this.current){var e=new Zm(r,this.current);this.current.addChild(e),this.current=e}else{if(this.root)throw new Error("Performance tree is screwed up");this.root=new Zm(r,null),this.current=this.root}}},{key:"close",value:function(){if(this.current.isRoot())throw new Error("Tried to close performance tree root. You probably have one too many Performance.endTest() in your code.");this.current.data.close(),this.current=this.current.parent}},{key:"getCurrentData",value:function(){return this.current.data}},{key:"print",value:function(){this.root.noOfChildren()>0&&this.root.print()}}])})(),oz=(function(){return zv(function r(){Uv(this,r),window.performance?(this.disabled=!1,this.tree=new iz):(this.disabled=!0,this.tree=null)},[{key:"startTest",value:function(r){if(!this.disabled){var e,t=r||(e=(e=new Error().stack.split(`
`)[3].trim()).split(" ")[0]==="at"?e.split(" ")[1]:e.split("@")[0]),n=new ZR(t);this.tree.add(n)}}},{key:"endTest",value:function(){this.disabled||this.tree.close()}},{key:"reset",value:function(){this.disabled||this.tree.clear()}},{key:"print",value:function(){this.disabled||this.tree.print()}}])})();function Vv(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return n2(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?n2(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function n2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function az(r){return"from"in r&&"to"in r}function sz(r){this.channels[r]={adds:{},updates:{},removes:{}}}function uz(r){delete this.channels[r]}function lz(r){this.channels[r].adds={},this.channels[r].updates={},this.channels[r].removes={}}var QR=function(r){return"html"in r?r.html:"captionHtml"in r?r.captionHtml:void 0};function cz(r,e){var t,n=!1,i=Vv(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.id;if(this.idToItem[a]===void 0){if(o=(0,Qt.cloneDeep)(o),this.items.push(o),this.idToItem[a]=o,this.idToPosition[a]={id:a,x:0,y:0},"x"in o&&"y"in o){var s=o,u=s.x,l=s.y;isNaN(u)||isNaN(l)||(this.idToPosition[a].x=u,this.idToPosition[a].y=l)}var c=QR(o);if(c instanceof HTMLElement){var f=document.createElement("div");Object.assign(f.style,{position:"absolute"}),f.appendChild(c),this.idToHtmlOverlay[a]=f}for(var h=Object.values(this.channels),d=0,v=h;d<v.length;d++){var p=v[d];p.removes[a]===void 0?p.adds[a]=o:(delete p.removes[a],p.updates[a]=o)}n=!0}}}catch(m){i.e(m)}finally{i.f()}n&&(this.version+=1,e!==void 0&&(e.added=!0))}function fz(r,e){var t,n=!1,i=Vv(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.id,s=this.idToItem[a];if(s!==void 0){Object.assign(s,o);var u=QR(o);if(u instanceof HTMLElement){var l;(l=this.idToHtmlOverlay[a])===null||l===void 0||l.remove(),delete this.idToHtmlOverlay[a];var c=document.createElement("div");Object.assign(c.style,{position:"absolute"}),c.appendChild(u),this.idToHtmlOverlay[a]=c}for(var f=Object.values(this.channels),h=0,d=f;h<d.length;h++){var v=d[h];if(v.adds[a]===void 0){var p=v.updates[a];p===void 0&&(p={id:a},az(s)&&(p={id:a,from:s.from,to:s.to}),v.updates[a]=p),Object.assign(p,o)}}e!==void 0&&(e.updated=!0)}n=!0}}catch(m){i.e(m)}finally{i.f()}n&&(this.version+=1)}function hz(r,e){var t,n=!1,i=Vv(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=this.idToItem[o];if(a!==void 0){var s;n=!0,delete this.idToItem[a.id],delete this.idToPosition[a.id],(s=this.idToHtmlOverlay[a.id])===null||s===void 0||s.remove(),delete this.idToHtmlOverlay[a.id],this.items.splice(this.items.indexOf(a),1);for(var u=Object.values(this.channels),l=0,c=u;l<c.length;l++){var f=c[l];f.adds[o]!==void 0?delete f.adds[o]:(delete f.updates[o],f.removes[o]=a)}}}}catch(h){i.e(h)}finally{i.f()}n&&(e!==void 0&&(e.removed=!0),this.version+=1)}function dz(r){var e,t=Vv(r);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.idToPosition[n.id]!==void 0){var i=this.idToPosition[n.id];Object.assign(i,n)}else this.idToPosition[n.id]={id:n.id,x:n.x,y:n.y,pinned:n.pinned}}}catch(o){t.e(o)}finally{t.f()}}function vz(r){for(var e in this.idToHtmlOverlay){var t=this.idToHtmlOverlay[e];r.appendChild(t)}}var i2=function(){return{idToItem:pr.shallow({}),items:pr.shallow([]),channels:pr.shallow({}),idToPosition:pr.shallow({}),idToHtmlOverlay:pr.shallow({}),version:0,addChannel:rr(sz),removeChannel:rr(uz),clearChannel:rr(lz),add:rr(cz),update:rr(fz),remove:rr(hz),updatePositions:rr(dz),updateHtmlOverlay:rr(vz)}},o2={selected:{rings:[{widthFactor:.05,color:nR},{widthFactor:.1,color:iR}],shadow:{width:10,opacity:1,color:rR}},default:{rings:[]}},a2={selected:{rings:[{color:nR,width:2},{color:iR,width:4}],shadow:{width:18,opacity:1,color:rR}},default:{rings:[]}},Qm=.75,Jm={noPan:!1,outOnly:!1,animated:!0};function Tc(r){return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(r)}function e0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function s2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function t0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s2(Object(t),!0).forEach(function(n){pz(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function pz(r,e,t){return(e=(function(n){var i=(function(o){if(Tc(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Tc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Tc(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Zo=function(r,e,t){(0,Qt.isNil)(r)||((function(n){return typeof n=="string"&&Qc(n)!==null})(r)?e(r):uR().warn("Invalid color string for ".concat(t,":"),r))};function Cc(r){return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(r)}function u2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function l2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(t),!0).forEach(function(n){gz(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):u2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function gz(r,e,t){return(e=(function(n){var i=(function(o){if(Cc(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Cc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Cc(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var yz=function(r){var e=r.minZoom,t=r.maxZoom,n=r.allowDynamicMinZoom,i=n===void 0||n,o=r.layout,a=r.layoutOptions,s=r.styling,u=s===void 0?{}:s,l=r.panX,c=l===void 0?0:l,f=r.panY,h=f===void 0?0:f,d=r.initialZoom,v=r.renderer,p=v===void 0?r.useWebGL===!0?sb:ub:v,m=r.disableWebGL,y=m!==void 0&&m,b=r.disableWebWorkers,g=b!==void 0&&b,_=r.disableTelemetry,w=_!==void 0&&_;fA(!0),x_.isolateGlobalState();var x=(0,Qt.isNil)(e)?.075:e,E=(0,Qt.isNil)(t)?10:t,O=(function(j,L){var F=L.legacyNodeDefaultBorderColor,z=L.legacySelectedBorderColor,V=L.legacyDisabledItemColor,G=L.legacyDisabledItemFontColor,Y=j.nodeDefaultBorderColor,ie=Y===void 0?F:Y,W=j.selectedBorderColor,H=W===void 0?z:W,Q=j.disabledItemColor,J=Q===void 0?V:Q,ne=j.disabledItemFontColor,K=ne===void 0?G:ne,$=j.selectedInnerBorderColor,Z=j.dropShadowColor,ae=j.defaultNodeColor,se=j.defaultRelationshipColor,fe=j.minimapViewportBoxColor,ge=t0({},o2.default),ye=t0({},o2.selected),pe=t0({},a2.selected),N={color:tR,fontColor:"#DDDDDD"},B=eR,q=JA;return Zo($,function(re){ye.rings[0].color=re,pe.rings[0].color=re},"selectedInnerBorderColor"),Zo(H,function(re){ye.rings[1].color=re,pe.rings[1].color=re},"selectedBorderColor"),Zo(ie,function(re){var ue;ge.rings=[{color:re,widthFactor:.05}],ye.rings=[{color:re,widthFactor:.05}].concat((function(le){if(Array.isArray(le))return e0(le)})(ue=ye.rings)||(function(le){if(typeof Symbol<"u"&&le[Symbol.iterator]!=null||le["@@iterator"]!=null)return Array.from(le)})(ue)||(function(le,de){if(le){if(typeof le=="string")return e0(le,de);var xe={}.toString.call(le).slice(8,-1);return xe==="Object"&&le.constructor&&(xe=le.constructor.name),xe==="Map"||xe==="Set"?Array.from(le):xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xe)?e0(le,de):void 0}})(ue)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})())},"nodeDefaultBorderColor"),Zo(Z,function(re){ye.shadow.color=re,pe.shadow.color=re},"dropShadowColor"),Zo(J,function(re){N.color=re},"disabledItemColor"),Zo(K,function(re){N.fontColor=re},"disabledItemFontColor"),Zo(ae,function(re){q=re},"defaultNodeColor"),Zo(se,function(re){B=re},"defaultRelationshipColor"),{nodeBorderStyles:{default:ge,selected:ye},relationshipBorderStyles:{default:a2.default,selected:pe},disabledItemStyles:N,defaultNodeColor:q,defaultRelationshipColor:B,minimapViewportBoxColor:fe||C_}})(u,{legacyNodeDefaultBorderColor:r.nodeDefaultBorderColor,legacySelectedBorderColor:r.selectedBorderColor,legacyDisabledItemColor:r.disabledItemColor,legacyDisabledItemFontColor:r.disabledItemFontColor}),T=O.nodeBorderStyles,C=O.relationshipBorderStyles,P=O.disabledItemStyles,R=O.defaultNodeColor,k=O.defaultRelationshipColor,I=O.minimapViewportBoxColor,M=pr({zoom:d||Qm,minimapZoom:Qm,defaultZoomLevel:Qm,panX:c,panY:h,minimapPanX:0,minimapPanY:0,fitNodeIds:[],resetZoom:!1,zoomOptions:Jm,forceWebGL:!1,renderer:p,disableWebGL:y,disableWebWorkers:g,disableTelemetry:w,fitMovement:0,layout:o,layoutOptions:a,maxDistance:0,maxNodeRadius:50,nodeBorderStyles:T,relationshipBorderStyles:C,disabledItemStyles:P,defaultNodeColor:R,defaultRelationshipColor:k,minimapViewportBoxColor:I,get minZoom(){return x},get maxZoom(){return E},get minMinimapZoom(){return 0},get maxMinimapZoom(){return .2},get webGLVisible(){var j=this.fitMovement>50;return this.renderer===sb||j},nodes:i2(),rels:i2(),graphUpdates:0,waypoints:{data:pr.shallow({}),counter:0},setGraphUpdated:rr(function(){this.graphUpdates+=1}),setRenderer:rr(function(j){rr(function(){this.graphUpdates+=1}),this.renderer=j}),setWaypoints:rr(function(j){this.waypoints.data=j,this.waypoints.counter+=1}),setZoomPan:rr(function(j,L,F,z){if(i){var V=Object.values(this.nodes.idToPosition),G=$m(V,x,E,z,j,this.zoom);G!==this.zoom&&(this.zoom=G,j===G&&(this.panX=L,this.panY=F))}else{var Y=wc(j,this.zoom,x,E);Y!==this.zoom&&(this.zoom=Y,this.panX=L,this.panY=F)}this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setZoom:rr(function(j,L){if(i){var F=Object.values(this.nodes.idToPosition);this.zoom=$m(F,x,E,L,j,this.zoom)}else this.zoom=wc(j,this.zoom,x,E);this.fitNodeIds=[],this.fitMovement=0,this.resetZoom=!1,this.forceWebGL=!1}),setPan:rr(function(j,L){this.panX=j,this.panY=L,this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setLayout:rr(function(j){this.layout=j}),setLayoutOptions:rr(function(j){this.layoutOptions=j}),fitNodes:rr(function(j){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fitNodeIds=(0,Qt.intersection)(j,(0,Qt.map)(this.nodes.items,"id")),this.zoomOptions=l2(l2({},Jm),L)}),setZoomReset:rr(function(){this.resetZoom=!0}),clearFit:rr(function(){this.fitNodeIds=[],this.forceWebGL=!1,this.fitMovement=0,this.zoomOptions=Jm}),clearReset:rr(function(){this.resetZoom=!1,this.fitMovement=0}),updateZoomToFit:rr(function(j,L,F,z){var V;if(this.fitMovement=Math.abs(j-this.zoom)+Math.abs(L-this.panX)+Math.abs(F-this.panY),i){var G=Object.values(this.nodes.idToPosition);V=$m(G,x,E,z,j,this.zoom)}else V=wc(j,this.zoom,x,E);this.zoom=V,this.panX=L,this.panY=F}),updateMinimapZoomToFit:rr(function(j,L,F){this.minimapZoom=j,this.minimapPanX=L,this.minimapPanY=F}),autorun:Kd,reaction:pA});return M},mz=function(r){return!!r&&typeof r.id=="string"&&r.id.length>0},ad=_r(1187);function Pc(r){return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(r)}function c2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function f2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c2(Object(t),!0).forEach(function(n){bz(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):c2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bz(r,e,t){return(e=(function(n){var i=(function(o){if(Pc(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Pc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Pc(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function h2(r){return(function(e){if(Array.isArray(e))return r0(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||(function(e,t){if(e){if(typeof e=="string")return r0(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r0(e,t):void 0}})(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function r0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var n0=function(r){return{id:r.elementId}},d2=function(r){return{id:r.elementId,from:r.startNodeElementId,to:r.endNodeElementId}};ad.resultTransformers.mappedResultTransformer({map:function(r){return Object.values(r.toObject())},collect:function(r){var e={nodes:[],relationships:[]},t=new Map;return(function(n){for(var i=h2(n),o=[];i.length;){var a=i.pop();Array.isArray(a)?i.push.apply(i,h2(a)):o.push(a)}return o})(r).forEach(function(n){(0,ad.isNode)(n)?(e.nodes.push(n0(n)),t.set(n.elementId,n)):(0,ad.isPath)(n)?n.segments.forEach(function(i){e.nodes.push(n0(i.start)),e.nodes.push(n0(i.end)),e.relationships.push(d2(i.relationship)),t.set(i.start.elementId,i.start),t.set(i.end.elementId,i.end),t.set(i.relationship.elementId,i.relationship)}):(0,ad.isRelationship)(n)&&(e.relationships.push(d2(n)),t.set(n.elementId,n))}),f2(f2({},e),{},{recordObjectMap:t})}});const _z=(r=>{var e={};return _r.d(e,r),e})({AnalyticsBrowser:()=>mU});var i0,wz=new Uint8Array(16);function Ez(){if(!i0&&!(i0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i0(wz)}const Oz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Zr=[],o0=0;o0<256;++o0)Zr.push((o0+256).toString(16).substr(1));const xz=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Zr[r[e+0]]+Zr[r[e+1]]+Zr[r[e+2]]+Zr[r[e+3]]+"-"+Zr[r[e+4]]+Zr[r[e+5]]+"-"+Zr[r[e+6]]+Zr[r[e+7]]+"-"+Zr[r[e+8]]+Zr[r[e+9]]+"-"+Zr[r[e+10]]+Zr[r[e+11]]+Zr[r[e+12]]+Zr[r[e+13]]+Zr[r[e+14]]+Zr[r[e+15]]).toLowerCase();if(!(function(n){return typeof n=="string"&&Oz.test(n)})(t))throw TypeError("Stringified UUID is invalid");return t};var v2,a0,s0=0,u0=0;const Sz=function(r,e,t){var n=0,i=new Array(16),o=(r=r||{}).node||v2,a=r.clockseq!==void 0?r.clockseq:a0;if(o==null||a==null){var s=r.random||(r.rng||Ez)();o==null&&(o=v2=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=a0=16383&(s[6]<<8|s[7]))}var u=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:u0+1,c=u-s0+(l-u0)/1e4;if(c<0&&r.clockseq===void 0&&(a=a+1&16383),(c<0||u>s0)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s0=u,u0=l,a0=a;var f=(1e4*(268435455&(u+=122192928e5))+l)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var h=u/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=255&h,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var d=0;d<6;++d)i[n+d]=o[d];return e||xz(i)};function Ac(r){return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(r)}function xb(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function o(d,v,p,m){var y=v&&v.prototype instanceof s?v:s,b=Object.create(y.prototype);return Kn(b,"_invoke",(function(g,_,w){var x,E,O,T=0,C=w||[],P=!1,R={p:0,n:0,v:r,a:k,f:k.bind(r,4),d:function(I,M){return x=I,E=0,O=r,R.n=M,a}};function k(I,M){for(E=I,O=M,e=0;!P&&T&&!j&&e<C.length;e++){var j,L=C[e],F=R.p,z=L[2];I>3?(j=z===M)&&(O=L[(E=L[4])?5:(E=3,3)],L[4]=L[5]=r):L[0]<=F&&((j=I<2&&F<L[1])?(E=0,R.v=M,R.n=L[1]):F<z&&(j=I<3||L[0]>M||M>z)&&(L[4]=I,L[5]=M,R.n=z,E=0))}if(j||I>1)return a;throw P=!0,M}return function(I,M,j){if(T>1)throw TypeError("Generator is already running");for(P&&M===1&&k(M,j),E=M,O=j;(e=E<2?r:O)||!P;){x||(E?E<3?(E>1&&(R.n=-1),k(E,O)):R.n=O:R.v=O);try{if(T=2,x){if(E||(I="next"),e=x[I]){if(!(e=e.call(x,O)))throw TypeError("iterator result is not an object");if(!e.done)return e;O=e.value,E<2&&(E=0)}else E===1&&(e=x.return)&&e.call(x),E<2&&(O=TypeError("The iterator does not provide a '"+I+"' method"),E=1);x=r}else if((e=(P=R.n<0)?O:g.call(_,R))!==a)break}catch(L){x=r,E=1,O=L}finally{T=1}}return{value:e,done:P}}})(d,p,m),!0),b}var a={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(Kn(e={},n,function(){return this}),e),f=l.prototype=s.prototype=Object.create(c);function h(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,l):(d.__proto__=l,Kn(d,i,"GeneratorFunction")),d.prototype=Object.create(f),d}return u.prototype=l,Kn(f,"constructor",l),Kn(l,"constructor",u),u.displayName="GeneratorFunction",Kn(l,i,"GeneratorFunction"),Kn(f),Kn(f,i,"Generator"),Kn(f,n,function(){return this}),Kn(f,"toString",function(){return"[object Generator]"}),(xb=function(){return{w:o,m:h}})()}function Kn(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Kn=function(o,a,s,u){if(a)i?i(o,a,{value:s,enumerable:!u,configurable:!u,writable:!u}):o[a]=s;else{var l=function(c,f){Kn(o,c,function(h){return this._invoke(c,f,h)})};l("next",0),l("throw",1),l("return",2)}},Kn(r,e,t,n)}function p2(r,e,t,n,i,o,a){try{var s=r[o](a),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function Tz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,JR(n.key),n)}}function JR(r){var e=(function(t){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ac(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Ac(e)=="symbol"?e:e+""}var g2=window.localStorage,y2="neo4j.nvl.sTid",m2=!1,Cz=(function(){return r=function i(){var o,a,s;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,i),o=this,s=void 0,(a=JR(a="analytics"))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s;var u=new _z.AnalyticsBrowser;this.analytics=u},e=[{key:"init",value:function(i){this.analytics.load({writeKey:i}),this.analytics.addSourceMiddleware(function(o){var a=o.payload,s=o.next,u=a.obj.context.page;u!==void 0&&(u.url="",u.title="",u.search="",u.referrer="",u.path=""),s(a)})}},{key:"trackEvent",value:(t=xb().m(function i(o){var a;return xb().w(function(s){for(;;)switch(s.n){case 0:return s.n=1,this.ready();case 1:a="".concat(o.eventPrefix?o.eventPrefix:"NVL_core","-").concat(o.event),this.analytics.track(a,o.properties).catch(function(u){Wt.warn("TRACKING: Event tracking is failed. err: ".concat(u))});case 2:return s.a(2)}},i,this)}),n=function(){var i=this,o=arguments;return new Promise(function(a,s){var u=t.apply(i,o);function l(f){p2(u,a,s,l,c,"next",f)}function c(f){p2(u,a,s,l,c,"throw",f)}l(void 0)})},function(i){return n.apply(this,arguments)})},{key:"identify",value:function(){if(!m2){var i=this.getSegmentTrackingId();this.analytics.identify(i).catch(function(o){Wt.debug("TRACKING: Identifying user for Segment tracking failed. err: ".concat(o))}),m2=!0}}},{key:"loadSavedSegmentId",value:function(){try{var i=g2.getItem(y2);return typeof i=="string"?i:null}catch(o){return Wt.debug("TRACKING: Retrieving tracking Id failed. err: ".concat(o)),null}}},{key:"getSegmentTrackingId",value:function(){var i=this.loadSavedSegmentId(),o=i??Sz();return this.saveTrackingId(o),o}},{key:"saveTrackingId",value:function(i){g2.setItem(y2,i)}},{key:"ready",value:function(){return this.analytics.ready().catch(function(i){Wt.debug("TRACKING: segment track instance not ready. err: ".concat(i))})}}],e&&Tz(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e,t,n})();function Rc(r){return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(r)}function Pz(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}})(r,e)||ek(r,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Sb(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=ek(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function ek(r,e){if(r){if(typeof r=="string")return b2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b2(r,e):void 0}}function b2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function _2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(t),!0).forEach(function(n){Az(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Az(r,e,t){return(e=tk(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Rz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,tk(n.key),n)}}function tk(r){var e=(function(t){if(Rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Rc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Rc(e)=="symbol"?e:e+""}function du(r,e,t){rk(r,e),e.set(r,t)}function rk(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function je(r,e){return r.get(Fn(r,e))}function wu(r,e,t){return r.set(Fn(r,e),t),t}function Fn(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var kc=new WeakMap,w2=new WeakMap,Rt=new WeakMap,qt=new WeakMap,Tn=new WeakMap,Yl=new WeakMap,Yn=new WeakSet,e9=(function(){return r=function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),(function(u,l){rk(u,l),l.add(u)})(this,Yn),du(this,kc,void 0),du(this,w2,void 0),du(this,Rt,void 0),du(this,qt,void 0),du(this,Tn,void 0),du(this,Yl,void 0),a.disableTelemetry!==!0&&(wu(Yl,this,new Cz),je(Yl,this).init("4SGwdwzuDm5WkFvQtz7D6ATQlo14yjmW"),je(Yl,this).identify()),Fn(Yn,this,kz).call(this,a),wu(kc,this,new XU(s)),wu(w2,this,new oz),wu(Tn,this,a),je(Tn,this).frame=n,this.checkWebGLCompatibility(),Fn(Yn,this,E2).call(this,i,o,a)},e=[{key:"restart",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.getNodePositions(),o=je(Rt,this),a=o.zoom,s=o.layout,u=o.layoutOptions,l=o.nodes,c=o.rels;je(qt,this).destroy(),Object.assign(je(Tn,this),t),Fn(Yn,this,E2).call(this,l.items,c.items,je(Tn,this)),this.setZoom(a),this.setLayout(s),this.setLayoutOptions(u),this.addAndUpdateElementsInGraph(l.items,c.items),n&&this.setNodePositions(i)}},{key:"addAndUpdateElementsInGraph",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Fn(Yn,this,l0).call(this,t),Fn(Yn,this,c0).call(this,n,t);var i={added:!1,updated:!1};je(Rt,this).nodes.update(t,qr({},i)),je(Rt,this).rels.update(n,qr({},i)),je(Rt,this).nodes.add(t,qr({},i)),je(Rt,this).rels.add(n,qr({},i)),je(Rt,this).setGraphUpdated(),je(qt,this).updateHtmlOverlay()}},{key:"getSelectedNodes",value:function(){var t=this;return Pn(je(Rt,this).nodes.items).filter(function(n){return n.selected}).map(function(n){return qr(qr({},n),je(Rt,t).nodes.idToPosition[n.id])})}},{key:"getSelectedRelationships",value:function(){return Pn(je(Rt,this).rels.items).filter(function(t){return t.selected})}},{key:"updateElementsInGraph",value:function(t,n){var i=this,o={added:!1,updated:!1},a=t.filter(function(u){return je(Rt,i).nodes.idToItem[u.id]!==void 0}),s=n.filter(function(u){return je(Rt,i).rels.idToItem[u.id]!==void 0});Fn(Yn,this,l0).call(this,a),Fn(Yn,this,c0).call(this,s,t),je(Rt,this).nodes.update(a,qr({},o)),je(Rt,this).rels.update(s,qr({},o)),je(qt,this).updateHtmlOverlay()}},{key:"addElementsToGraph",value:function(t,n){Fn(Yn,this,l0).call(this,t),Fn(Yn,this,c0).call(this,n,t);var i={added:!1,updated:!1};je(Rt,this).nodes.add(t,qr({},i)),je(Rt,this).rels.add(n,qr({},i)),je(qt,this).updateHtmlOverlay()}},{key:"removeNodesWithIds",value:function(t){if(Array.isArray(t)&&!(0,Qt.isEmpty)(t)){var n,i={},o=Sb(t);try{for(o.s();!(n=o.n()).done;)i[n.value]=!0}catch(c){o.e(c)}finally{o.f()}var a,s=[],u=Sb(je(Rt,this).rels.items);try{for(u.s();!(a=u.n()).done;){var l=a.value;i[l.from]!==!0&&i[l.to]!==!0||s.push(l.id)}}catch(c){u.e(c)}finally{u.f()}s.length>0&&Fn(Yn,this,O2).call(this,s),Fn(Yn,this,Iz).call(this,t),je(Rt,this).setGraphUpdated(),je(qt,this).updateHtmlOverlay()}}},{key:"removeRelationshipsWithIds",value:function(t){Array.isArray(t)&&!(0,Qt.isEmpty)(t)&&(Fn(Yn,this,O2).call(this,t),je(Rt,this).setGraphUpdated(),je(qt,this).updateHtmlOverlay())}},{key:"getNodes",value:function(){return je(qt,this).dumpNodes()}},{key:"getRelationships",value:function(){return je(qt,this).dumpRelationships()}},{key:"getNodeById",value:function(t){return je(Rt,this).nodes.idToItem[t]}},{key:"getRelationshipById",value:function(t){return je(Rt,this).rels.idToItem[t]}},{key:"getPositionById",value:function(t){return je(Rt,this).nodes.idToPosition[t]}},{key:"getCurrentOptions",value:function(){return je(Tn,this)}},{key:"destroy",value:function(){je(qt,this).destroy()}},{key:"deselectAll",value:function(){this.updateElementsInGraph(je(Rt,this).nodes.items.map(function(t){return qr(qr({},t),{},{selected:!1})}),je(Rt,this).rels.items.map(function(t){return qr(qr({},t),{},{selected:!1})}))}},{key:"fit",value:function(t,n){je(qt,this).fit(t,n)}},{key:"resetZoom",value:function(){je(qt,this).resetZoom()}},{key:"setUseWebGLRenderer",value:function(t){je(qt,this).setRenderer(t?sb:ub)}},{key:"setRenderer",value:function(t){je(qt,this).setRenderer(t)}},{key:"setDisableWebGL",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];je(Tn,this).disableWebGL!==t&&(je(Tn,this).disableWebGL=t,this.restart())}},{key:"pinNode",value:function(t){je(Rt,this).nodes.update([{id:t,pinned:!0}],{})}},{key:"unPinNode",value:function(t){je(Rt,this).nodes.update(t.map(function(n){return{id:n,pinned:!1}}),{})}},{key:"setLayout",value:function(t){je(Rt,this).setLayout(t)}},{key:"setLayoutOptions",value:function(t){je(Rt,this).setLayoutOptions(t)}},{key:"getNodesOnScreen",value:function(){return je(qt,this).getNodesOnScreen()}},{key:"getNodePositions",value:function(){return je(qt,this).getNodePositions()}},{key:"setNodePositions",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];je(qt,this).setNodePositions(t,n)}},{key:"isLayoutMoving",value:function(){return je(qt,this).isLayoutMoving()}},{key:"saveToFile",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};je(qt,this).saveToFile(t)}},{key:"getImageDataUrl",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return je(qt,this).getImageDataURL(t)}},{key:"saveFullGraphToLargeFile",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};je(qt,this).saveFullGraphToLargeFile(t)}},{key:"setZoom",value:function(t){je(qt,this).setZoomLevel(t)}},{key:"setPan",value:function(t,n){je(qt,this).setPanCoordinates(t,n)}},{key:"setZoomAndPan",value:function(t,n,i){je(qt,this).setZoomAndPan(t,n,i)}},{key:"getScale",value:function(){return je(qt,this).getScale()}},{key:"getPan",value:function(){return je(qt,this).getPan()}},{key:"getHits",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node","relationship"],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{hitNodeMarginWidth:0},o=je(Rt,this),a=o.zoom,s=o.panX,u=o.panY,l=o.webGLVisible,c=BR(t,je(Tn,this).frame,a,s,u),f=c.x,h=c.y,d=l?(function(v,p,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},g=[],_=[],w=m.nodes,x=m.rels;return y.includes("node")&&g.push.apply(g,rd((function(E,O){var T,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,R=[],k=_b(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var I=function(){var M,j=T.value,L=C[j.id];if((L==null?void 0:L.x)===void 0||L.y===void 0)return 1;var F=((M=j.size)!==null&&M!==void 0?M:Pr)*ir(),z={x:L.x-E,y:L.y-O},V=Math.pow(F,2),G=Math.pow(F+P,2),Y=Math.pow(z.x,2)+Math.pow(z.y,2),ie=Math.sqrt(Y);if(Y<G){var W=R.findIndex(function(H){return H.distance>ie});R.splice(W!==-1?W:R.length,0,{data:j,targetCoordinates:{x:L.x,y:L.y},pointerCoordinates:{x:E,y:O},distanceVector:z,distance:ie,insideNode:Y<V})}};for(k.s();!(T=k.n()).done;)I()}catch(M){k.e(M)}finally{k.f()}return R})(v,p,w.items,w.idToPosition,b.hitNodeMarginWidth))),y.includes("relationship")&&_.push.apply(_,rd((function(E,O){var T,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=[],R={},k=_b(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var I=function(){var M=T.value,j=M.from,L=M.to;if(R["".concat(j,".").concat(L)]===void 0){var F=C[j],z=C[L];if((F==null?void 0:F.x)===void 0||F.y===void 0||(z==null?void 0:z.x)===void 0||z.y===void 0)return 0;var V=A_({x:F.x,y:F.y},{x:z.x,y:z.y},{x:E,y:O});if(V<=Y8){var G=P.findIndex(function(Y){return Y.distance>V});P.splice(G!==-1?G:P.length,0,{data:M,fromTargetCoordinates:{x:F.x,y:F.y},toTargetCoordinates:{x:z.x,y:z.y},pointerCoordinates:{x:E,y:O},distance:V})}R["".concat(j,".").concat(L)]=1,R["".concat(L,".").concat(j)]=1}};for(k.s();!(T=k.n()).done;)I()}catch(M){k.e(M)}finally{k.f()}return P})(v,p,x.items,w.idToPosition))),{nodes:g,relationships:_}})(f,h,je(Rt,this),n,i):(function(v,p,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},g=[],_=[];return y.includes("node")&&g.push.apply(g,rd(m.getCanvasNodesAt({x:v,y:p},b.hitNodeMarginWidth))),y.includes("relationship")&&_.push.apply(_,rd(m.getCanvasRelsAt({x:v,y:p}))),{nodes:g,relationships:_}})(f,h,je(qt,this),n,i);return qr(qr({},t),{},{nvlTargets:d})}},{key:"getContainer",value:function(){return je(Tn,this).frame}},{key:"checkWebGLCompatibility",value:function(){var t=je(Tn,this).disableWebGL;if(t===void 0||!t){var n=(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("canvas");try{return window.WebGLRenderingContext!==void 0&&(i.getContext("webgl")!==null||i.getContext("experimental-webgl")!==null)}catch{return!1}})();if(!n){if(t!==void 0)throw new gR("Could not initialize WebGL");je(Tn,this).renderer=ub,console.warn("GPU acceleration is not available on your browser. Falling back to CPU layout and rendering. You can disable this warning by setting the disableWebGL option to true.")}t===void 0&&(je(Tn,this).disableWebGL=!n)}}}],e&&Rz(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function E2(){var r,e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};wu(Rt,this,yz(i)),i.minimapContainer instanceof HTMLElement||delete i.minimapContainer,wu(qt,this,new tz(je(Rt,this),i)),this.addAndUpdateElementsInGraph(t,n),je(qt,this).on("restart",this.restart.bind(this));var o,a,s=Sb((o=je(kc,this).callbacks,Object.entries(o)));try{for(s.s();!(a=s.n()).done;){var u=Pz(a.value,2),l=u[0];u[1]!==void 0&&je(qt,this).on(l,je(kc,this)[l].bind(je(kc,this)))}}catch(f){s.e(f)}finally{s.f()}setTimeout(function(){je(qt,e).callIfRegistered("onInitialization")});var c=(r=je(Tn,this).frame)===null||r===void 0?void 0:r.getAttribute("id");je(Tn,this).disableTelemetry!==!0&&setTimeout(function(){je(qt,e).isDestroyed()||je(Yl,e).trackEvent({eventPrefix:c6.includes(c)?c:null,event:"instantiated",properties:{}})},200)}function kz(r){var e,t=r.logging;(t==null?void 0:t.level)!==void 0&&(e=t.level,Wt.setLevel(e),(function(n,i){var o=n.methodFactory;n.methodFactory=function(a,s,u){var l=o(a,s,u);return function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];typeof i.logger=="function"?i.logger.apply(i,[a].concat(f)):l.apply(void 0,f)}},n.setLevel(n.getLevel())})(Wt,t))}function Iz(r){var e=Array.isArray(r)?r:[r],t=je(Rt,this),n=t.nodes,i=t.fitNodeIds;n.remove(e,{removed:!1}),i.length&&e.find(function(o){return i.includes(o)})!==void 0&&je(Rt,this).fitNodes(i.filter(function(o){return!e.includes(o)}))}function O2(r){var e=Array.isArray(r)?r:[r];je(Rt,this).rels.remove(e,{removed:!1})}function l0(r){var e=r.find(function(n){return!(function(i){return!!i&&typeof i.id=="string"&&i.id.length>0})(n)});if(e){var t="";throw/^\d+$/.test(e.id)||(t=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported."),new TypeError("Invalid node provided: ".concat(JSON.stringify(e),".").concat(t))}}function c0(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t="",n=null,i=je(Rt,this),o=i.nodes,a=i.rels,s={},u=0;u<e.length;u++){var l=e[u];s[l.id]=l}for(var c=qr(qr({},o.idToItem),s),f=a.idToItem,h=0;h<r.length;h++){var d=r[h];if(!mz(d)){n=d,/^\d+$/.test(d.id)&&(t=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported.");break}if(f[d.id]===void 0){var v=c[d.from],p=c[d.to];if(v===void 0){t=' Node with id "'.concat(d.from,'" does not exist.'),n=d;break}if(p===void 0){t=' Node with id "'.concat(d.to,'" does not exist.'),n=d;break}}}if(n!==null)throw new TypeError("Invalid relationship provided: ".concat(JSON.stringify(n),".").concat(t))}const Dz=10,f0=10;class Gv{constructor(e,t){Bt(this,"nvl");Bt(this,"options");Bt(this,"container");Bt(this,"callbackMap");Bt(this,"addEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.addEventListener(e,t,n)});Bt(this,"removeEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.removeEventListener(e,t,n)});Bt(this,"callCallbackIfRegistered",(e,...t)=>{const n=this.callbackMap.get(e);typeof n=="function"&&n(...t)});Bt(this,"updateCallback",(e,t)=>{this.callbackMap.set(e,t)});Bt(this,"removeCallback",e=>{this.callbackMap.delete(e)});Bt(this,"toggleGlobalTextSelection",(e,t)=>{e?(document.body.style.removeProperty("user-select"),t&&document.body.removeEventListener("mouseup",t)):(document.body.style.setProperty("user-select","none","important"),t&&document.body.addEventListener("mouseup",t))});this.nvl=e,this.options=t,this.container=this.nvl.getContainer(),this.callbackMap=new Map}get nvlInstance(){return this.nvl}get currentOptions(){return this.options}get containerInstance(){return this.container}}const Mz=(r,e)=>{const t=Math.abs(r.clientX-e.x),n=Math.abs(r.clientY-e.y);return t>f0||n>f0?!0:Math.pow(t,2)+Math.pow(n,2)>f0},Nz=(r,e)=>{const t=r.getBoundingClientRect(),n=window.devicePixelRatio||1;return{x:(e.clientX-t.left-t.width*.5)*n,y:(e.clientY-t.top-t.height*.5)*n}};class t9 extends Gv{constructor(t,n={selectOnClick:!1}){super(t,n);Bt(this,"moved",!1);Bt(this,"mousePosition",{x:0,y:0});Bt(this,"handleMouseDown",t=>{this.mousePosition={x:t.clientX,y:t.clientY}});Bt(this,"handleRightClick",t=>{var a,s;t.preventDefault();const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasRightClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeRightClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipRightClick",(s=o[0])==null?void 0:s.data,n,t)});Bt(this,"handleDoubleClick",t=>{var a,s;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasDoubleClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeDoubleClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipDoubleClick",(s=o[0])==null?void 0:s.data,n,t)});Bt(this,"handleClick",t=>{var a,s;if(Mz(t,this.mousePosition)||t.button!==0)return;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.currentOptions.selectOnClick===!0&&this.nvlInstance.deselectAll(),this.callCallbackIfRegistered("onCanvasClick",t);return}if(i.length>0){const u=i.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),h=[...u[0]?[{id:u[0].id,selected:!0}]:[],...l.map(v=>({id:v.id,selected:!1}))],d=c.map(v=>({...v,selected:!1}));this.nvlInstance.updateElementsInGraph(h,d)}this.callCallbackIfRegistered("onNodeClick",(a=i[0])==null?void 0:a.data,n,t)}else if(o.length>0){const u=o.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),f=l.map(v=>({id:v.id,selected:!1})),d=[...u[0]?[{id:u[0].id,selected:!0}]:[],...c.map(v=>({...v,selected:!1}))];this.nvlInstance.updateElementsInGraph(f,d)}this.callCallbackIfRegistered("onRelationshipClick",(s=o[0])==null?void 0:s.data,n,t)}});Bt(this,"destroy",()=>{this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("click",this.handleClick,!0),this.removeEventListener("dblclick",this.handleDoubleClick,!0),this.removeEventListener("contextmenu",this.handleRightClick,!0)});this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("click",this.handleClick,!0),this.addEventListener("dblclick",this.handleDoubleClick,!0),this.addEventListener("contextmenu",this.handleRightClick,!0)}}class r9 extends Gv{constructor(t,n={drawShadowOnHover:!1}){super(t,n);Bt(this,"currentHoveredElementId");Bt(this,"currentHoveredElementIsNode");Bt(this,"updates",{nodes:[],relationships:[]});Bt(this,"handleHover",t=>{const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n,a=i[0]??o[0],s=a==null?void 0:a.data,u=s!==void 0&&i[0]!==void 0,l=this.currentHoveredElementId===void 0&&s===void 0,c=(s==null?void 0:s.id)!==void 0&&this.currentHoveredElementId===s.id&&u===this.currentHoveredElementIsNode;if(l||c){this.callCallbackIfRegistered("onHover",s,n,t);return}if(this.currentHoveredElementId!==void 0&&this.currentHoveredElementId!==(s==null?void 0:s.id)&&this.unHoverCurrentElement(),u)this.updates.nodes.push({id:s.id,hovered:!0}),this.currentHoveredElementId=s.id,this.currentHoveredElementIsNode=!0;else if(s!==void 0){const{id:h}=s;this.updates.relationships.push({id:h,hovered:!0}),this.currentHoveredElementId=s.id,this.currentHoveredElementIsNode=!1}else this.currentHoveredElementId=void 0,this.currentHoveredElementIsNode=void 0;this.callCallbackIfRegistered("onHover",s,n,t),this.updateElementsInNVL(),this.clearUpdates()});this.addEventListener("mousemove",this.handleHover,!0)}updateElementsInNVL(){this.currentOptions.drawShadowOnHover===!0&&this.nvlInstance.getNodes().length>0&&this.nvlInstance.updateElementsInGraph(this.updates.nodes,this.updates.relationships)}clearUpdates(){this.updates.nodes=[],this.updates.relationships=[]}unHoverCurrentElement(){if(this.currentHoveredElementId===void 0)return;const t={id:this.currentHoveredElementId,hovered:!1};this.currentHoveredElementIsNode===!0?this.updates.nodes.push(t):this.updates.relationships.push({...t})}destroy(){this.removeEventListener("mousemove",this.handleHover,!0)}}var sd={exports:{}},kd={exports:{}},Lz=kd.exports,x2;function jz(){return x2||(x2=1,(function(r,e){(function(t,n){r.exports=n()})(Lz,function(){function t(b,g,_,w,x){(function E(O,T,C,P,R){for(;P>C;){if(P-C>600){var k=P-C+1,I=T-C+1,M=Math.log(k),j=.5*Math.exp(2*M/3),L=.5*Math.sqrt(M*j*(k-j)/k)*(I-k/2<0?-1:1),F=Math.max(C,Math.floor(T-I*j/k+L)),z=Math.min(P,Math.floor(T+(k-I)*j/k+L));E(O,T,F,z,R)}var V=O[T],G=C,Y=P;for(n(O,C,T),R(O[P],V)>0&&n(O,C,P);G<Y;){for(n(O,G,Y),G++,Y--;R(O[G],V)<0;)G++;for(;R(O[Y],V)>0;)Y--}R(O[C],V)===0?n(O,C,Y):n(O,++Y,P),Y<=T&&(C=Y+1),T<=Y&&(P=Y-1)}})(b,g,_||0,w||b.length-1,x||i)}function n(b,g,_){var w=b[g];b[g]=b[_],b[_]=w}function i(b,g){return b<g?-1:b>g?1:0}var o=function(b){b===void 0&&(b=9),this._maxEntries=Math.max(4,b),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(b,g,_){if(!_)return g.indexOf(b);for(var w=0;w<g.length;w++)if(_(b,g[w]))return w;return-1}function s(b,g){u(b,0,b.children.length,g,b)}function u(b,g,_,w,x){x||(x=m(null)),x.minX=1/0,x.minY=1/0,x.maxX=-1/0,x.maxY=-1/0;for(var E=g;E<_;E++){var O=b.children[E];l(x,b.leaf?w(O):O)}return x}function l(b,g){return b.minX=Math.min(b.minX,g.minX),b.minY=Math.min(b.minY,g.minY),b.maxX=Math.max(b.maxX,g.maxX),b.maxY=Math.max(b.maxY,g.maxY),b}function c(b,g){return b.minX-g.minX}function f(b,g){return b.minY-g.minY}function h(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function d(b){return b.maxX-b.minX+(b.maxY-b.minY)}function v(b,g){return b.minX<=g.minX&&b.minY<=g.minY&&g.maxX<=b.maxX&&g.maxY<=b.maxY}function p(b,g){return g.minX<=b.maxX&&g.minY<=b.maxY&&g.maxX>=b.minX&&g.maxY>=b.minY}function m(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(b,g,_,w,x){for(var E=[g,_];E.length;)if(!((_=E.pop())-(g=E.pop())<=w)){var O=g+Math.ceil((_-g)/w/2)*w;t(b,O,g,_,x),E.push(g,O,O,_)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(b){var g=this.data,_=[];if(!p(b,g))return _;for(var w=this.toBBox,x=[];g;){for(var E=0;E<g.children.length;E++){var O=g.children[E],T=g.leaf?w(O):O;p(b,T)&&(g.leaf?_.push(O):v(b,T)?this._all(O,_):x.push(O))}g=x.pop()}return _},o.prototype.collides=function(b){var g=this.data;if(!p(b,g))return!1;for(var _=[];g;){for(var w=0;w<g.children.length;w++){var x=g.children[w],E=g.leaf?this.toBBox(x):x;if(p(b,E)){if(g.leaf||v(b,E))return!0;_.push(x)}}g=_.pop()}return!1},o.prototype.load=function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var g=0;g<b.length;g++)this.insert(b[g]);return this}var _=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var w=this.data;this.data=_,_=w}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},o.prototype.insert=function(b){return b&&this._insert(b,this.data.height-1),this},o.prototype.clear=function(){return this.data=m([]),this},o.prototype.remove=function(b,g){if(!b)return this;for(var _,w,x,E=this.data,O=this.toBBox(b),T=[],C=[];E||T.length;){if(E||(E=T.pop(),w=T[T.length-1],_=C.pop(),x=!0),E.leaf){var P=a(b,E.children,g);if(P!==-1)return E.children.splice(P,1),T.push(E),this._condense(T),this}x||E.leaf||!v(E,O)?w?(_++,E=w.children[_],x=!1):E=null:(T.push(E),C.push(_),_=0,w=E,E=E.children[0])}return this},o.prototype.toBBox=function(b){return b},o.prototype.compareMinX=function(b,g){return b.minX-g.minX},o.prototype.compareMinY=function(b,g){return b.minY-g.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(b){return this.data=b,this},o.prototype._all=function(b,g){for(var _=[];b;)b.leaf?g.push.apply(g,b.children):_.push.apply(_,b.children),b=_.pop();return g},o.prototype._build=function(b,g,_,w){var x,E=_-g+1,O=this._maxEntries;if(E<=O)return s(x=m(b.slice(g,_+1)),this.toBBox),x;w||(w=Math.ceil(Math.log(E)/Math.log(O)),O=Math.ceil(E/Math.pow(O,w-1))),(x=m([])).leaf=!1,x.height=w;var T=Math.ceil(E/O),C=T*Math.ceil(Math.sqrt(O));y(b,g,_,C,this.compareMinX);for(var P=g;P<=_;P+=C){var R=Math.min(P+C-1,_);y(b,P,R,T,this.compareMinY);for(var k=P;k<=R;k+=T){var I=Math.min(k+T-1,R);x.children.push(this._build(b,k,I,w-1))}}return s(x,this.toBBox),x},o.prototype._chooseSubtree=function(b,g,_,w){for(;w.push(g),!g.leaf&&w.length-1!==_;){for(var x=1/0,E=1/0,O=void 0,T=0;T<g.children.length;T++){var C=g.children[T],P=h(C),R=(k=b,I=C,(Math.max(I.maxX,k.maxX)-Math.min(I.minX,k.minX))*(Math.max(I.maxY,k.maxY)-Math.min(I.minY,k.minY))-P);R<E?(E=R,x=P<x?P:x,O=C):R===E&&P<x&&(x=P,O=C)}g=O||g.children[0]}var k,I;return g},o.prototype._insert=function(b,g,_){var w=_?b:this.toBBox(b),x=[],E=this._chooseSubtree(w,this.data,g,x);for(E.children.push(b),l(E,w);g>=0&&x[g].children.length>this._maxEntries;)this._split(x,g),g--;this._adjustParentBBoxes(w,x,g)},o.prototype._split=function(b,g){var _=b[g],w=_.children.length,x=this._minEntries;this._chooseSplitAxis(_,x,w);var E=this._chooseSplitIndex(_,x,w),O=m(_.children.splice(E,_.children.length-E));O.height=_.height,O.leaf=_.leaf,s(_,this.toBBox),s(O,this.toBBox),g?b[g-1].children.push(O):this._splitRoot(_,O)},o.prototype._splitRoot=function(b,g){this.data=m([b,g]),this.data.height=b.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(b,g,_){for(var w,x,E,O,T,C,P,R=1/0,k=1/0,I=g;I<=_-g;I++){var M=u(b,0,I,this.toBBox),j=u(b,I,_,this.toBBox),L=(x=M,E=j,O=void 0,T=void 0,C=void 0,P=void 0,O=Math.max(x.minX,E.minX),T=Math.max(x.minY,E.minY),C=Math.min(x.maxX,E.maxX),P=Math.min(x.maxY,E.maxY),Math.max(0,C-O)*Math.max(0,P-T)),F=h(M)+h(j);L<R?(R=L,w=I,k=F<k?F:k):L===R&&F<k&&(k=F,w=I)}return w||_-g},o.prototype._chooseSplitAxis=function(b,g,_){var w=b.leaf?this.compareMinX:c,x=b.leaf?this.compareMinY:f;this._allDistMargin(b,g,_,w)<this._allDistMargin(b,g,_,x)&&b.children.sort(w)},o.prototype._allDistMargin=function(b,g,_,w){b.children.sort(w);for(var x=this.toBBox,E=u(b,0,g,x),O=u(b,_-g,_,x),T=d(E)+d(O),C=g;C<_-g;C++){var P=b.children[C];l(E,b.leaf?x(P):P),T+=d(E)}for(var R=_-g-1;R>=g;R--){var k=b.children[R];l(O,b.leaf?x(k):k),T+=d(O)}return T},o.prototype._adjustParentBBoxes=function(b,g,_){for(var w=_;w>=0;w--)l(g[w],b)},o.prototype._condense=function(b){for(var g=b.length-1,_=void 0;g>=0;g--)b[g].children.length===0?g>0?(_=b[g-1].children).splice(_.indexOf(b[g]),1):this.clear():s(b[g],this.toBBox)},o})})(kd)),kd.exports}class Fz{constructor(e=[],t=Bz){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(n(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1,s=t[a];const u=a+1;if(u<this.length&&n(t[u],s)<0&&(a=u,s=t[u]),n(s,o)>=0)break;t[e]=s,e=a}t[e]=o}}function Bz(r,e){return r<e?-1:r>e?1:0}const Uz=Object.freeze(Object.defineProperty({__proto__:null,default:Fz},Symbol.toStringTag,{value:"Module"})),zz=iD(Uz);var Ll={exports:{}},h0,S2;function Vz(){return S2||(S2=1,h0=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,l=0,c=u-1;l<u;c=l++){var f=t[n+l*2+0],h=t[n+l*2+1],d=t[n+c*2+0],v=t[n+c*2+1],p=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;p&&(s=!s)}return s}),h0}var d0,T2;function Gz(){return T2||(T2=1,d0=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,l=0,c=u-1;l<u;c=l++){var f=t[l+n][0],h=t[l+n][1],d=t[c+n][0],v=t[c+n][1],p=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;p&&(s=!s)}return s}),d0}var C2;function qz(){if(C2)return Ll.exports;C2=1;var r=Vz(),e=Gz();return Ll.exports=function(n,i,o,a){return i.length>0&&Array.isArray(i[0])?e(n,i,o,a):r(n,i,o,a)},Ll.exports.nested=e,Ll.exports.flat=r,Ll.exports}var Xl={exports:{}},Wz=Xl.exports,P2;function Hz(){return P2||(P2=1,(function(r,e){(function(t,n){n(e)})(Wz,function(t){const i=33306690738754706e-32;function o(p,m,y,b,g){let _,w,x,E,O=m[0],T=b[0],C=0,P=0;T>O==T>-O?(_=O,O=m[++C]):(_=T,T=b[++P]);let R=0;if(C<p&&P<y)for(T>O==T>-O?(x=_-((w=O+_)-O),O=m[++C]):(x=_-((w=T+_)-T),T=b[++P]),_=w,x!==0&&(g[R++]=x);C<p&&P<y;)T>O==T>-O?(x=_-((w=_+O)-(E=w-_))+(O-E),O=m[++C]):(x=_-((w=_+T)-(E=w-_))+(T-E),T=b[++P]),_=w,x!==0&&(g[R++]=x);for(;C<p;)x=_-((w=_+O)-(E=w-_))+(O-E),O=m[++C],_=w,x!==0&&(g[R++]=x);for(;P<y;)x=_-((w=_+T)-(E=w-_))+(T-E),T=b[++P],_=w,x!==0&&(g[R++]=x);return _===0&&R!==0||(g[R++]=_),R}function a(p){return new Float64Array(p)}const s=33306690738754716e-32,u=22204460492503146e-32,l=11093356479670487e-47,c=a(4),f=a(8),h=a(12),d=a(16),v=a(4);t.orient2d=function(p,m,y,b,g,_){const w=(m-_)*(y-g),x=(p-g)*(b-_),E=w-x;if(w===0||x===0||w>0!=x>0)return E;const O=Math.abs(w+x);return Math.abs(E)>=s*O?E:-(function(T,C,P,R,k,I,M){let j,L,F,z,V,G,Y,ie,W,H,Q,J,ne,K,$,Z,ae,se;const fe=T-k,ge=P-k,ye=C-I,pe=R-I;V=($=(ie=fe-(Y=(G=134217729*fe)-(G-fe)))*(H=pe-(W=(G=134217729*pe)-(G-pe)))-((K=fe*pe)-Y*W-ie*W-Y*H))-(Q=$-(ae=(ie=ye-(Y=(G=134217729*ye)-(G-ye)))*(H=ge-(W=(G=134217729*ge)-(G-ge)))-((Z=ye*ge)-Y*W-ie*W-Y*H))),c[0]=$-(Q+V)+(V-ae),V=(ne=K-((J=K+Q)-(V=J-K))+(Q-V))-(Q=ne-Z),c[1]=ne-(Q+V)+(V-Z),V=(se=J+Q)-J,c[2]=J-(se-V)+(Q-V),c[3]=se;let N=(function(le,de){let xe=de[0];for(let ke=1;ke<le;ke++)xe+=de[ke];return xe})(4,c),B=u*M;if(N>=B||-N>=B||(j=T-(fe+(V=T-fe))+(V-k),F=P-(ge+(V=P-ge))+(V-k),L=C-(ye+(V=C-ye))+(V-I),z=R-(pe+(V=R-pe))+(V-I),j===0&&L===0&&F===0&&z===0)||(B=l*M+i*Math.abs(N),(N+=fe*z+pe*j-(ye*F+ge*L))>=B||-N>=B))return N;V=($=(ie=j-(Y=(G=134217729*j)-(G-j)))*(H=pe-(W=(G=134217729*pe)-(G-pe)))-((K=j*pe)-Y*W-ie*W-Y*H))-(Q=$-(ae=(ie=L-(Y=(G=134217729*L)-(G-L)))*(H=ge-(W=(G=134217729*ge)-(G-ge)))-((Z=L*ge)-Y*W-ie*W-Y*H))),v[0]=$-(Q+V)+(V-ae),V=(ne=K-((J=K+Q)-(V=J-K))+(Q-V))-(Q=ne-Z),v[1]=ne-(Q+V)+(V-Z),V=(se=J+Q)-J,v[2]=J-(se-V)+(Q-V),v[3]=se;const q=o(4,c,4,v,f);V=($=(ie=fe-(Y=(G=134217729*fe)-(G-fe)))*(H=z-(W=(G=134217729*z)-(G-z)))-((K=fe*z)-Y*W-ie*W-Y*H))-(Q=$-(ae=(ie=ye-(Y=(G=134217729*ye)-(G-ye)))*(H=F-(W=(G=134217729*F)-(G-F)))-((Z=ye*F)-Y*W-ie*W-Y*H))),v[0]=$-(Q+V)+(V-ae),V=(ne=K-((J=K+Q)-(V=J-K))+(Q-V))-(Q=ne-Z),v[1]=ne-(Q+V)+(V-Z),V=(se=J+Q)-J,v[2]=J-(se-V)+(Q-V),v[3]=se;const re=o(q,f,4,v,h);V=($=(ie=j-(Y=(G=134217729*j)-(G-j)))*(H=z-(W=(G=134217729*z)-(G-z)))-((K=j*z)-Y*W-ie*W-Y*H))-(Q=$-(ae=(ie=L-(Y=(G=134217729*L)-(G-L)))*(H=F-(W=(G=134217729*F)-(G-F)))-((Z=L*F)-Y*W-ie*W-Y*H))),v[0]=$-(Q+V)+(V-ae),V=(ne=K-((J=K+Q)-(V=J-K))+(Q-V))-(Q=ne-Z),v[1]=ne-(Q+V)+(V-Z),V=(se=J+Q)-J,v[2]=J-(se-V)+(Q-V),v[3]=se;const ue=o(re,h,4,v,d);return d[ue-1]})(p,m,y,b,g,_,O)},t.orient2dfast=function(p,m,y,b,g,_){return(m-_)*(y-g)-(p-g)*(b-_)},Object.defineProperty(t,"__esModule",{value:!0})})})(Xl,Xl.exports)),Xl.exports}var A2;function Yz(){if(A2)return sd.exports;A2=1;var r=jz(),e=zz,t=qz(),n=Hz().orient2d;e.default&&(e=e.default),sd.exports=i,sd.exports.default=i;function i(_,w,x){w=Math.max(0,w===void 0?2:w),x=x||0;var E=d(_),O=new r(16);O.toBBox=function(Y){return{minX:Y[0],minY:Y[1],maxX:Y[0],maxY:Y[1]}},O.compareMinX=function(Y,ie){return Y[0]-ie[0]},O.compareMinY=function(Y,ie){return Y[1]-ie[1]},O.load(_);for(var T=[],C=0,P;C<E.length;C++){var R=E[C];O.remove(R),P=v(R,P),T.push(P)}var k=new r(16);for(C=0;C<T.length;C++)k.insert(h(T[C]));for(var I=w*w,M=x*x;T.length;){var j=T.shift(),L=j.p,F=j.next.p,z=p(L,F);if(!(z<M)){var V=z/I;R=o(O,j.prev.p,L,F,j.next.next.p,V,k),R&&Math.min(p(R,L),p(R,F))<=V&&(T.push(j),T.push(v(R,j)),O.remove(R),k.remove(j),k.insert(h(j)),k.insert(h(j.next)))}}j=P;var G=[];do G.push(j.p),j=j.next;while(j!==P);return G.push(j.p),G}function o(_,w,x,E,O,T,C){for(var P=new e([],a),R=_.data;R;){for(var k=0;k<R.children.length;k++){var I=R.children[k],M=R.leaf?m(I,x,E):s(x,E,I);M>T||P.push({node:I,dist:M})}for(;P.length&&!P.peek().node.children;){var j=P.pop(),L=j.node,F=m(L,w,x),z=m(L,E,O);if(j.dist<F&&j.dist<z&&l(x,L,C)&&l(E,L,C))return L}R=P.pop(),R&&(R=R.node)}return null}function a(_,w){return _.dist-w.dist}function s(_,w,x){if(u(_,x)||u(w,x))return 0;var E=y(_[0],_[1],w[0],w[1],x.minX,x.minY,x.maxX,x.minY);if(E===0)return 0;var O=y(_[0],_[1],w[0],w[1],x.minX,x.minY,x.minX,x.maxY);if(O===0)return 0;var T=y(_[0],_[1],w[0],w[1],x.maxX,x.minY,x.maxX,x.maxY);if(T===0)return 0;var C=y(_[0],_[1],w[0],w[1],x.minX,x.maxY,x.maxX,x.maxY);return C===0?0:Math.min(E,O,T,C)}function u(_,w){return _[0]>=w.minX&&_[0]<=w.maxX&&_[1]>=w.minY&&_[1]<=w.maxY}function l(_,w,x){for(var E=Math.min(_[0],w[0]),O=Math.min(_[1],w[1]),T=Math.max(_[0],w[0]),C=Math.max(_[1],w[1]),P=x.search({minX:E,minY:O,maxX:T,maxY:C}),R=0;R<P.length;R++)if(f(P[R].p,P[R].next.p,_,w))return!1;return!0}function c(_,w,x){return n(_[0],_[1],w[0],w[1],x[0],x[1])}function f(_,w,x,E){return _!==E&&w!==x&&c(_,w,x)>0!=c(_,w,E)>0&&c(x,E,_)>0!=c(x,E,w)>0}function h(_){var w=_.p,x=_.next.p;return _.minX=Math.min(w[0],x[0]),_.minY=Math.min(w[1],x[1]),_.maxX=Math.max(w[0],x[0]),_.maxY=Math.max(w[1],x[1]),_}function d(_){for(var w=_[0],x=_[0],E=_[0],O=_[0],T=0;T<_.length;T++){var C=_[T];C[0]<w[0]&&(w=C),C[0]>E[0]&&(E=C),C[1]<x[1]&&(x=C),C[1]>O[1]&&(O=C)}var P=[w,x,E,O],R=P.slice();for(T=0;T<_.length;T++)t(_[T],P)||R.push(_[T]);return g(R)}function v(_,w){var x={p:_,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return w?(x.next=w.next,x.prev=w,w.next.prev=x,w.next=x):(x.prev=x,x.next=x),x}function p(_,w){var x=_[0]-w[0],E=_[1]-w[1];return x*x+E*E}function m(_,w,x){var E=w[0],O=w[1],T=x[0]-E,C=x[1]-O;if(T!==0||C!==0){var P=((_[0]-E)*T+(_[1]-O)*C)/(T*T+C*C);P>1?(E=x[0],O=x[1]):P>0&&(E+=T*P,O+=C*P)}return T=_[0]-E,C=_[1]-O,T*T+C*C}function y(_,w,x,E,O,T,C,P){var R=x-_,k=E-w,I=C-O,M=P-T,j=_-O,L=w-T,F=R*R+k*k,z=R*I+k*M,V=I*I+M*M,G=R*j+k*L,Y=I*j+M*L,ie=F*V-z*z,W,H,Q,J,ne=ie,K=ie;ie===0?(H=0,ne=1,J=Y,K=V):(H=z*Y-V*G,J=F*Y-z*G,H<0?(H=0,J=Y,K=V):H>ne&&(H=ne,J=Y+z,K=V)),J<0?(J=0,-G<0?H=0:-G>F?H=ne:(H=-G,ne=F)):J>K&&(J=K,-G+z<0?H=0:-G+z>F?H=ne:(H=-G+z,ne=F)),W=H===0?0:H/ne,Q=J===0?0:J/K;var $=(1-W)*_+W*x,Z=(1-W)*w+W*E,ae=(1-Q)*O+Q*C,se=(1-Q)*T+Q*P,fe=ae-$,ge=se-Z;return fe*fe+ge*ge}function b(_,w){return _[0]===w[0]?_[1]-w[1]:_[0]-w[0]}function g(_){_.sort(b);for(var w=[],x=0;x<_.length;x++){for(;w.length>=2&&c(w[w.length-2],w[w.length-1],_[x])<=0;)w.pop();w.push(_[x])}for(var E=[],O=_.length-1;O>=0;O--){for(;E.length>=2&&c(E[E.length-2],E[E.length-1],_[O])<=0;)E.pop();E.push(_[O])}return E.pop(),w.pop(),w.concat(E)}return sd.exports}Yz();class n9 extends Gv{constructor(t,n={excludeNodeMargin:!1}){super(t,n);Bt(this,"mousePosition",{x:0,y:0});Bt(this,"targets",[]);Bt(this,"shouldPan",!1);Bt(this,"isPanning",!1);Bt(this,"updateTargets",(t,n)=>{this.targets=t,this.currentOptions.excludeNodeMargin=n});Bt(this,"handleMouseDown",t=>{const n=this.nvlInstance.getHits(t,R2.difference(["node","relationship"],this.targets),{hitNodeMarginWidth:this.currentOptions.excludeNodeMargin===!0?Dz:0});n.nvlTargets.nodes.length>0||n.nvlTargets.relationships.length>0?this.shouldPan=!1:(this.mousePosition={x:t.clientX,y:t.clientY},this.shouldPan=!0)});Bt(this,"handleMouseMove",t=>{if(!this.shouldPan||t.buttons!==1)return;this.isPanning||(this.toggleGlobalTextSelection(!1,this.handleMouseUp),this.isPanning=!0);const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=(t.clientX-this.mousePosition.x)/n*window.devicePixelRatio,s=(t.clientY-this.mousePosition.y)/n*window.devicePixelRatio;this.nvlInstance.setPan(i-a,o-s),this.callCallbackIfRegistered("onPan",{x:i-a,y:o-s},t),this.mousePosition={x:t.clientX,y:t.clientY}});Bt(this,"handleMouseUp",()=>{this.isPanning&&(this.toggleGlobalTextSelection(!0,this.handleMouseUp),this.isPanning=!1),this.shouldPan=!1});this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("mousemove",this.handleMouseMove,!0),this.addEventListener("mouseup",this.handleMouseUp,!0)}destroy(){this.toggleGlobalTextSelection(!0,this.handleMouseUp),this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("mousemove",this.handleMouseMove,!0),this.removeEventListener("mouseup",this.handleMouseUp,!0)}}class i9 extends Gv{constructor(t,n={}){super(t,n);Bt(this,"throttledZoom",R2.throttle(t=>{const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=t.deltaY/500,s=n>=1?a*Math.pow(n,1):a,u=n-s*Math.min(1,n),l=Nz(this.containerInstance,t),c=i+(l.x/n-l.x/u),f=o+(l.y/n-l.y/u);this.nvlInstance.setZoomAndPan(u,c,f),this.callCallbackIfRegistered("onZoom",u,t)},25,{leading:!0}));Bt(this,"handleWheel",t=>{t.ctrlKey||t.metaKey||(t.preventDefault(),this.throttledZoom(t))});Bt(this,"destroy",()=>{this.removeEventListener("wheel",this.handleWheel)});this.addEventListener("wheel",this.handleWheel)}}export{t9 as C,r9 as H,n9 as P,i9 as Z,Ei as _,Qe as a,Je as b,Fr as c,Me as d,Nu as e,aA as f,Qz as g,e9 as h,Vc as i,ns as j,Zz as k,km as l,GB as m,Oi as n,DP as o,r_ as p,a_ as q,Fh as r,IB as s,Ql as t,Jz as u,wo as v,kF as w,vF as x,qB as y};
//# sourceMappingURL=neo4j-MWxXN7EM.js.map
