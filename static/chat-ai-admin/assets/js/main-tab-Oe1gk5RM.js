import{av as k,f as u,o as _,ae as c,ad as p,ar as C,az as I,u as m}from"./vue-chunks-CGLjTDrY.js";import{L as w}from"./list-tabs-DJ9IUgC9.js";import{t as z,b as P}from"./index-IIUHUqQG.js";import{u as S}from"./usePublicNetworkCheck-Gk3eB7lo.js";import{a9 as y}from"./ui-antd-AfNpv4wx.js";const q={__name:"main-tab",emits:["change"],setup(L,{expose:g,emit:h}){const v=h,l=k(),o=u(localStorage.getItem("zm:explore:active")||"1"),s=u([{title:"模板广场",value:"4"},{title:"功能",value:"1"},{title:`插件(${localStorage.getItem("zm:explore:plugins:count")||"0"})`,value:"2"},{title:"插件广场",value:"3"},{title:"MCP广场",value:"5"}]),{isPublicNetwork:x}=S();_(()=>{i()});function n(e){switch(o.value=e.toString(),localStorage.setItem("zm:explore:active",e),v("change",e),Number(e)){case 1:l.push({path:"/explore/index"});break;case 2:case 3:l.push({path:"/plugins/index",query:{active:e}});break;case 4:l.push({path:"/templates/index"});break;case 5:l.push({path:"/mcp/index"});break}}async function i(){let a=(await z()).data.length;P().then(t=>{let r=(t==null?void 0:t.data)||[],f=s.value.find(b=>b.value==2);f.title=`插件(${r.length+a})`,localStorage.setItem("zm:explore:plugins:count",r.length+a)})}function d(){i()}return g({change:n,update:d}),(e,a)=>(p(),c(w,{tabs:s.value,value:o.value,"onUpdate:value":a[0]||(a[0]=t=>o.value=t),onChange:n},{extra:C(({key:t})=>[!m(x)&&t!=1?(p(),c(m(y),{key:0,style:{color:"#FB363F"}})):I("",!0)]),_:1},8,["tabs","value"]))}};export{q as _};
