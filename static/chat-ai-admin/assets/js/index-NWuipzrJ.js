import{_ as R}from"./cu-scroll-BmJNJRCz.js";import{i as V,e as $,f as U}from"./index-B-ofkPiX.js";import{A as F}from"./add-collaborator-O-OXuLlz.js";import{_ as L,c as z,bL as G}from"../../index-C1Xsov4S.js";import{e as J,aa as Q,f as r,r as Y,a1 as g,a2 as c,a5 as s,k as i,Y as o,ae as n,G as Z,l as H,u as l,a7 as D,F as f,_ as a}from"./vue-chunks-DCKTEHpB.js";import{a3 as K,B as W,Z as X,U as P,ab as tt,D as et,g as x,ac as st,ad as at,y as ot,M as B,a as M,Q as S}from"./ui-antd-D64OvTpt.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./utils-D9NMMoMR.js";const nt={class:"content-box"},it={key:0,class:"add-btn-block"},_t={class:"list-content"},lt={key:0,class:"user-block"},ct={class:"name-box"},dt={class:"name"},rt={class:"remark-text"},ut={key:0,class:"hover-btn-box"},pt={key:0},mt={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},ht=["onClick"],bt={class:"menu-header"},gt={key:0,class:"check-box"},ft=["onClick"],xt={class:"menu-header"},Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},Dt={key:0,class:"check-box"},Pt={class:"hover-btn-box"},Bt={key:0},Mt={key:1},St={key:2},Tt=["onClick"],It={__name:"index",setup(Nt){const T=z(),C=J(()=>T.user_name),u=Q().query,p=r(G(u.form_id)),m=r([]),I=Y({object_id:u.form_id,object_type:3}),d=()=>{V({...I}).then(_=>{let t=_.data||[];m.value=t})};d();const j=r(null),N=()=>{j.value.show(m.value,[{object_id:+u.form_id,object_type:3,operate_rights:4}])},y=(_,t)=>{let k=t==4?"管理":t==2?"编辑":"查看";B.confirm({title:"提示?",icon:i(S),content:"确认修改该协作者权限为【"+k+"】",okText:"确认",cancelText:"取消",onOk:()=>{let v=[{object_id:+_.object_id,object_type:+_.object_type,operate_rights:+t}];$({identity_ids:_.identity_id,identity_type:_.identity_type,object_array:JSON.stringify(v)}).then(O=>{M.success("修改成功"),d()})},onCancel(){}})},q=_=>{B.confirm({title:"提示?",icon:i(S),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{U({identity_id:_.identity_id,identity_type:_.identity_type,object_id:_.object_id,object_type:_.object_type}).then(t=>{M.success("删除成功"),d()})},onCancel(){}})},w=r([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(_,t)=>{const k=W,v=X,O=tt,A=ot,E=R;return a(),g(E,null,{default:c(()=>[s("div",nt,[t[7]||(t[7]=s("div",{class:"page-title"},"权限管理",-1)),p.value==4?(a(),o("div",it,[i(k,{type:"primary",onClick:N,icon:H(l(K))},{default:c(()=>[...t[0]||(t[0]=[Z("添加协助者",-1)])]),_:1},8,["icon"])])):n("",!0),s("div",_t,[i(A,{columns:w.value,"data-source":m.value,pagination:!1},{bodyCell:c(({column:h,record:e})=>[h.key==="name"?(a(),o("div",lt,[i(v,{shape:"square",src:e.avatar,size:40},{icon:c(()=>[e.avatar?n("",!0):(a(),g(l(P),{key:0}))]),_:2},1032,["src"]),s("div",ct,[s("div",dt,D(e.user_name),1),s("div",rt,D(e.name),1)])])):n("",!0),h.key==="operate_rights"?(a(),o(f,{key:1},[p.value==2||e.user_name==C.value?(a(),o("div",ut,[e.operate_rights==4?(a(),o("span",pt,"管理")):n("",!0),e.operate_rights==2?(a(),o("span",mt,"编辑")):n("",!0),e.operate_rights==1?(a(),o("span",yt,"查看")):n("",!0)])):e.role_type==1||e.is_creator==1?(a(),o("div",kt,"管理")):(a(),g(O,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:c(()=>[s("div",vt,[s("div",{class:"role-menu",onClick:b=>y(e,4)},[s("div",bt,[i(l(P)),t[1]||(t[1]=s("span",{class:"title"},"管理",-1))]),t[2]||(t[2]=s("div",{class:"desc"},"可编辑，可删除，可查看",-1)),e.operate_rights==4?(a(),o("div",gt,[i(l(x))])):n("",!0)],8,ht),s("div",{class:"role-menu",onClick:b=>y(e,2)},[s("div",xt,[i(l(st)),t[3]||(t[3]=s("span",{class:"title"},"编辑",-1))]),t[4]||(t[4]=s("div",{class:"desc"},"可编辑，可查看",-1)),e.operate_rights==2?(a(),o("div",Ct,[i(l(x))])):n("",!0)],8,ft),s("div",{class:"role-menu",onClick:b=>y(e,1)},[s("div",Ot,[i(l(at)),t[5]||(t[5]=s("span",{class:"title"},"查看",-1))]),t[6]||(t[6]=s("div",{class:"desc"},"仅查看",-1)),e.operate_rights==1?(a(),o("div",Dt,[i(l(x))])):n("",!0)],8,jt)])]),default:c(()=>[s("div",Pt,[e.operate_rights==4?(a(),o("span",Bt,"管理")):n("",!0),e.operate_rights==2?(a(),o("span",Mt,"编辑")):n("",!0),e.operate_rights==1?(a(),o("span",St,"查看")):n("",!0),i(l(et))])]),_:2},1024))],64)):n("",!0),h.key==="action"?(a(),o(f,{key:2},[p.value==4&&e.user_name!=C.value?(a(),o(f,{key:0},[e.role_type!=1&&e.is_creator!=1?(a(),o("a",{key:0,onClick:b=>q(e)},"移除",8,Tt)):n("",!0)],64)):n("",!0)],64)):n("",!0)]),_:1},8,["columns","data-source"])])]),i(F,{onOk:d,ref_key:"addCollaboratorRef",ref:j},null,512)]),_:1})}}},Lt=L(It,[["__scopeId","data-v-7e12ca5e"]]);export{Lt as default};
