import{u as W,ac as we,ad as Re,_ as re,a8 as te}from"../../index-DSFcP5NQ.js";import{ag as fe,r as k,j as ne,a as l,b as n,e as T,y as r,F as O,l as L,p as e,v as t,t as v,u as s,_ as q,q as E,Y as J,c as se,G as oe,C as de,ak as De,h as ee,E as Pe,ah as Oe}from"./vue-chunks-BdaA73Wf.js";import{E as pe}from"./empty-box-DAN5iPDv.js";import{c as ze,b as ve,s as Q,a as ae,r as he,t as Se,u as Ie,e as ue,f as Me,o as Te,h as qe}from"./index-BuURB1pl.js";import{L as ge}from"./loading-box-CQ9Pukre.js";import{U as me}from"./update-modal-D3ZNMX09.js";import{_ as G}from"./emoji-mart-BBMRoEa3.js";import{q as ke,z as ye,at as le,a9 as ie,B as X,a1 as be,an as ce,_ as _e,M as K,b as V,H as Be,W as Ne,I as je}from"./ui-antd-Dl1wwwCD.js";import{_ as $e}from"./tool-icon-IWVrYlVb.js";import{_ as xe}from"./no-permission-DtJ3NYHG.js";import{F as Ae,P as Le,u as Ue}from"./useOfficialArticleLogin-CmM2SX9T.js";import{d as Fe}from"./utils-CvB22N-W.js";import{_ as Ee}from"./main-tab-CdcTMZsk.js";import{u as Ye}from"./usePublicNetworkCheck-B51wgX5Y.js";import{P as He}from"./public-network-check-BgOXIe2j.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./other-LrIFyvU9.js";import"./empty-BFmzY9bl.js";/* empty css                                                                     */import"./list-tabs-Dv38O5dh.js";const Je={class:"_plugin-box"},Ve={key:1,class:"plugin-list"},We=["onClick"],Ge={class:"type-tag"},Ke={class:"base-info"},Qe=["src"],Xe={class:"info"},Ze={class:"head"},et={class:"name zm-line1"},tt={class:"source"},nt={class:"version"},st={class:"action-box"},ot={class:"left"},at={class:"right"},lt=["href"],it=["onClick"],ct={key:1},_t=["onClick"],dt={__name:"remotePlugins",props:{filterData:{type:Object,default:null}},emits:["installReport"],setup(Y,{expose:j,emit:h}){const{t:o}=W("views.explore.plugins.components.remote-plugins"),$=h,u=Y,g=fe(),x=k(null),y=k(!0),P=k([]),M=k({});ne(()=>{f()});function z(){P.value=[],f()}async function f(){y.value=!0,await w(),ze(u.filterData).then(d=>{let a=(d==null?void 0:d.data)||[];a.forEach(c=>{var b;let{local:_,has_update:I}=((b=M.value)==null?void 0:b[c.name])||{};c.local=_,c.has_update=I}),P.value=a}).finally(()=>{y.value=!1})}async function w(){await ve().then(d=>{let a=(d==null?void 0:d.data)||[];$("installReport",a.length);let c={};a.forEach(_=>{c[_.local.name]={local:_.local,has_update:_.remote.latest_version!=_.local.version}}),M.value=c})}function S(d){g.push({path:"/plugins/detail",query:{name:d.name}})}function p(d){x.value.show(d,d.latest_version_detail,d.local||null)}return j({search:z}),(d,a)=>{const c=ke,_=re,I=ye;return n(),l("div",Je,[y.value?(n(),T(ge,{key:0})):P.value.length?(n(),l("div",Ve,[(n(!0),l(O,null,L(P.value,b=>(n(),l("div",{onClick:R=>S(b),key:b.name,class:"plugin-item"},[e("div",Ge,t(b.filter_type_title),1),e("div",Ke,[e("img",{class:"avatar",src:b.icon},null,8,Qe),e("div",Xe,[e("div",Ze,[e("span",et,t(b.title),1)]),e("div",tt,t(b.author),1)])]),r(c,{title:s(Re)(b.description,b,14,1,0),placement:"top"},{default:v(()=>[e("div",{class:"desc zm-line1",ref_for:!0,ref:R=>s(we)(R,b)},t(b.description),513)]),_:2},1032,["title"]),e("div",nt,t(s(o)("label_version"))+"v"+t(b.latest_version),1),e("div",st,[e("div",ot,[r(_,{name:"download"}),q(" "+t(b.installed_count||0),1)]),e("div",at,[b.help_url?(n(),l(O,{key:0},[e("a",{onClick:a[0]||(a[0]=J(()=>{},["stop"])),class:"c595959",href:b.help_url,target:"_blank"},t(s(o)("link_user_guide")),9,lt),r(I,{type:"vertical"})],64)):E("",!0),b.local?(n(),l(O,{key:1},[b.has_update?(n(),l("a",{key:0,onClick:J(R=>p(b),["stop"])},t(s(o)("btn_update")),9,it)):(n(),l("span",ct,t(s(o)("msg_installed")),1))],64)):(n(),l("a",{key:2,onClick:J(R=>p(b),["stop"])},t(s(o)("btn_install")),9,_t))])])],8,We))),128))])):(n(),T(pe,{key:2,title:s(o)("msg_no_available_plugins")},null,8,["title"])),r(me,{ref_key:"updateRef",ref:x,onOk:f},null,512)])}}},ut=G(dt,[["__scopeId","data-v-dfb1c714"]]),rt={class:"head-box"},ft={class:"base-info-box"},pt=["src"],vt={class:"info-box"},ht={class:"left"},gt={class:"name zm-line1"},mt={class:"right"},kt={class:"link"},yt={class:"tools-box"},bt={class:"info"},$t={class:"tit zm-line1"},xt={class:"btns"},Ct=["onClick"],wt=["onClick"],Rt={class:"body-box"},Dt={key:0,class:"no-auth-box"},Pt={class:"tit"},Ot={class:"desc"},zt={key:1,class:"action-box"},St={class:"tit"},It={class:"desc"},Mt={class:"params"},Tt={class:"params-box"},qt={class:"field"},Bt={class:"name"},Nt={class:"type"},jt={key:0,class:"required"},At={class:"desc"},Lt={__name:"feishu-config-box",emits:["del","edit","auth"],setup(Y,{expose:j,emit:h}){const{t:o}=W("views.explore.plugins.components.feishu-config-box"),$=k(null),u=k(!1),g=k({}),x=k({}),y=k({}),P=se(()=>Object.keys(x.value).length);function M(a){g.value=a,f(),w(),u.value=!0}function z(){u.value=!1}function f(){ae({name:g.value.name}).then(a=>{x.value=te(a==null?void 0:a.data,{})})}function w(){he({name:g.value.name,action:"default/get-schema",params:{}}).then(a=>{let c=(a==null?void 0:a.data)||{};for(let _ in c)c[_].type!="node"&&delete c[_];y.value=c})}function S(){$.value.show(x.value)}function p(a,c){for(let _ in x.value)x.value[_].is_default=_==c;Q({name:g.value.name,data:JSON.stringify(x.value)}).then(_=>{f()})}function d(a,c){K.confirm({title:o("title_tip"),content:o("msg_confirm_delete_config"),onOk:()=>{delete x.value[c],Q({name:g.value.name,data:JSON.stringify(x.value)}).then(_=>{f(),V.success(o("msg_deleted"))})}})}return j({show:M,hide:z}),(a,c)=>{const _=ce,I=X,b=ie,R=_e;return n(),l("div",null,[r(R,{open:u.value,"onUpdate:open":c[1]||(c[1]=D=>u.value=D),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:v(()=>[e("div",rt,[e("div",ft,[e("img",{class:"avatar",src:g.value.icon},null,8,pt),e("div",vt,[e("div",ht,[e("div",gt,t(g.value.title),1),e("div",null,t(g.value.author),1)]),e("div",mt,[r(s(le),{onClick:c[0]||(c[0]=D=>u.value=!1),class:"icon"})])])]),e("div",kt,t(g.value.description),1),P.value>0?(n(),T(b,{key:0,placement:"bottom"},{content:v(()=>[e("div",yt,[(n(!0),l(O,null,L(x.value,(D,N)=>(n(),l("div",{key:N,class:"tool-item"},[c[2]||(c[2]=e("img",{class:"cover",src:$e},null,-1)),e("div",bt,[e("div",$t,t(D.name),1),e("div",xt,[D.is_default?(n(),T(_,{key:0,color:"#f50"},{default:v(()=>[q(t(s(o)("label_default")),1)]),_:1})):(n(),l("a",{key:1,onClick:A=>p(D,N)},t(s(o)("btn_set_default")),9,Ct)),e("a",{onClick:A=>d(D,N)},t(s(o)("btn_delete")),9,wt)])])]))),128))])]),default:v(()=>[r(I,{type:"primary",icon:oe(s(be)),class:"auth-btn",onClick:S},{default:v(()=>[q(t(s(o)("msg_authorized_credentials",{count:P.value})),1)]),_:1},8,["icon"])]),_:1})):(n(),T(I,{key:1,type:"primary",class:"auth-btn",onClick:S},{default:v(()=>[q(t(s(o)("btn_authorize_now")),1)]),_:1}))]),e("div",Rt,[P.value?(n(),l("div",zt,[(n(!0),l(O,null,L(y.value,(D,N)=>(n(),l("div",{key:N,class:"action-item"},[e("div",St,t(D.title),1),e("div",It,t(D.desc),1),e("div",Mt,[(n(!0),l(O,null,L(Object.keys(D.params).slice(0,3),(A,i)=>(n(),T(_,{key:i,bordered:!1},{default:v(()=>[q(t(A),1)]),_:2},1024))),128)),r(b,{placement:"right"},{content:v(()=>[e("div",Tt,[(n(!0),l(O,null,L(D.params,(A,i)=>(n(),l("div",{key:i,class:"param-item"},[e("div",qt,[e("span",Bt,t(i),1),e("span",Nt,t(A.type),1),A.required?(n(),l("span",jt,t(s(o)("label_required")),1)):E("",!0)]),e("div",At,t(A.desc),1)]))),128))])]),default:v(()=>[e("a",null,t(s(o)("label_params")),1)]),_:2},1024)])]))),128))])):(n(),l("div",Dt,[c[3]||(c[3]=e("img",{src:xe},null,-1)),e("div",Pt,t(s(o)("msg_need_authorization")),1),e("div",Ot,t(s(o)("msg_config_after_auth")),1),e("a",{class:"link",onClick:S},t(s(o)("btn_authorize_now")),1)]))])]),_:1},8,["open"]),r(Ae,{ref_key:"configModalRef",ref:$,onChange:f},null,512)])}}},Ut=G(Lt,[["__scopeId","data-v-97f7297c"]]),Ft={class:"head-box"},Et={class:"base-info-box"},Yt=["src"],Ht={class:"info-box"},Jt={class:"left"},Vt={class:"name zm-line1"},Wt={class:"right"},Gt={class:"link"},Kt={class:"tools-box"},Qt={class:"info"},Xt={class:"tit zm-line1"},Zt={class:"btns"},en=["onClick"],tn=["onClick"],nn={class:"body-box"},sn={key:0,class:"no-auth-box"},on={class:"tit"},an={class:"desc"},ln={key:1,class:"action-box"},cn={class:"tit"},_n={class:"desc"},dn={class:"params"},un={class:"params-box"},rn={class:"field"},fn={class:"name"},pn={class:"type"},vn={key:0,class:"required"},hn={class:"desc"},gn={__name:"plugin-config-box",setup(Y,{expose:j}){const{t:h}=W("views.explore.plugins.components.plugin-config-box"),o=k(!1),$=k({}),u=k({}),g=k({}),x=k(null),y=se(()=>Object.keys(u.value).length);function P(d,a){$.value=d,f(),w(a),o.value=!0}function M(){o.value=!1}function z(){x.value&&x.value.show(u.value,$.value.name,g.value)}function f(){ae({name:$.value.name}).then(d=>{u.value=te(d==null?void 0:d.data,{})})}function w(d){let a=d||{};for(let c in a)a[c].type!="node"&&delete a[c];g.value=a}function S(d,a){for(let c in u.value)u.value[c].is_default=c==a;Q({name:$.value.name,data:JSON.stringify(u.value)}).then(()=>{f()})}function p(d,a){K.confirm({title:h("title_tip"),content:h("msg_confirm_delete_config"),onOk:()=>{delete u.value[a],Q({name:$.value.name,data:JSON.stringify(u.value)}).then(()=>{f(),V.success(h("msg_deleted"))})}})}return j({show:P,hide:M}),(d,a)=>{const c=ce,_=X,I=ie,b=_e;return n(),l("div",null,[r(b,{open:o.value,"onUpdate:open":a[1]||(a[1]=R=>o.value=R),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:v(()=>[e("div",Ft,[e("div",Et,[e("img",{class:"avatar",src:$.value.icon},null,8,Yt),e("div",Ht,[e("div",Jt,[e("div",Vt,t($.value.title),1),e("div",null,t($.value.author),1)]),e("div",Wt,[r(s(le),{onClick:a[0]||(a[0]=R=>o.value=!1),class:"icon"})])])]),e("div",Gt,t($.value.description),1),y.value>0?(n(),T(I,{key:0,placement:"bottom"},{content:v(()=>[e("div",Kt,[(n(!0),l(O,null,L(u.value,(R,D)=>(n(),l("div",{key:D,class:"tool-item"},[a[2]||(a[2]=e("img",{class:"cover",src:$e},null,-1)),e("div",Qt,[e("div",Xt,t(R.name),1),e("div",Zt,[R.is_default?(n(),T(c,{key:0,color:"#f50"},{default:v(()=>[q(t(s(h)("label_default")),1)]),_:1})):(n(),l("a",{key:1,onClick:N=>S(R,D)},t(s(h)("btn_set_as_default")),9,en)),e("a",{onClick:N=>p(R,D)},t(s(h)("btn_delete")),9,tn)])])]))),128))])]),default:v(()=>[r(_,{type:"primary",icon:oe(s(be)),class:"auth-btn",onClick:z},{default:v(()=>[q(t(s(h)("msg_authorized_credentials",{count:y.value})),1)]),_:1},8,["icon"])]),_:1})):(n(),T(_,{key:1,type:"primary",class:"auth-btn",onClick:z},{default:v(()=>[q(t(s(h)("btn_authorize_now")),1)]),_:1}))]),e("div",nn,[y.value?(n(),l("div",ln,[(n(!0),l(O,null,L(g.value,(R,D)=>(n(),l("div",{key:D,class:"action-item"},[e("div",cn,t(R.title),1),e("div",_n,t(R.desc),1),e("div",dn,[(n(!0),l(O,null,L(Object.keys(R.params).slice(0,3),(N,A)=>(n(),T(c,{key:A,bordered:!1},{default:v(()=>[q(t(N),1)]),_:2},1024))),128)),r(I,{placement:"right"},{content:v(()=>[e("div",un,[(n(!0),l(O,null,L(R.params,(N,A)=>(n(),l("div",{key:A,class:"param-item"},[e("div",rn,[e("span",fn,t(A),1),e("span",pn,t(N.type),1),N.required?(n(),l("span",vn,t(s(h)("label_required")),1)):E("",!0)]),e("div",hn,t(N.desc),1)]))),128))])]),default:v(()=>[e("a",null,t(s(h)("label_parameters")),1)]),_:2},1024)])]))),128))])):(n(),l("div",sn,[a[3]||(a[3]=e("img",{src:xe},null,-1)),e("div",on,t(s(h)("title_authorization_required")),1),e("div",an,t(s(h)("msg_config_after_auth")),1),e("a",{class:"link",onClick:z},t(s(h)("btn_authorize_now")),1)]))])]),_:1},8,["open"]),r(Le,{ref_key:"configModalRef",ref:x,onChange:f},null,512)])}}},mn=G(gn,[["__scopeId","data-v-1cfced19"]]),kn={class:"head-box"},yn={class:"base-info-box"},bn=["src"],$n={class:"info-box"},xn={class:"left"},Cn={class:"name zm-line1"},wn={class:"right"},Rn={class:"link"},Dn={class:"body-box"},Pn={class:"action-box"},On={class:"tit"},zn={class:"desc"},Sn={class:"params"},In={class:"params-box"},Mn={class:"field"},Tn={class:"name"},qn={class:"type"},Bn={key:0,class:"required"},Nn={class:"desc"},jn={__name:"config-box",emits:["del","edit","auth"],setup(Y,{expose:j,emit:h}){const{t:o}=W("views.explore.plugins.components.config-box"),$=h,u=k(!1),g=k({}),x=k({}),y=k(null);function P(f){g.value=f,z()}function M(){u.value=!1}function z(){he({name:g.value.name,action:"default/get-schema",params:{}}).then(f=>{let w=(f==null?void 0:f.data)||{};if(Object.values(w||{}).some(p=>p&&p.use_plugin_config===!0)){y.value&&y.value.show(g.value,w),u.value=!1;return}for(let p in w)w[p].type!="node"&&delete w[p];x.value=w,u.value=!0})}return j({show:P,hide:M}),(f,w)=>{const S=ce,p=ie,d=_e;return n(),l("div",null,[r(d,{open:u.value,"onUpdate:open":w[1]||(w[1]=a=>u.value=a),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:v(()=>[e("div",kn,[e("div",yn,[e("img",{class:"avatar",src:g.value.icon},null,8,bn),e("div",$n,[e("div",xn,[e("div",Cn,t(g.value.title),1),e("div",null,t(g.value.author),1)]),e("div",wn,[r(s(le),{onClick:w[0]||(w[0]=a=>u.value=!1),class:"icon"})])])]),e("div",Rn,t(g.value.description),1),de(f.$slots,"head-extra",{},void 0,!0)]),e("div",Dn,[de(f.$slots,"body",{},()=>[e("div",Pn,[(n(!0),l(O,null,L(x.value,(a,c)=>(n(),l("div",{key:c,class:"action-item"},[e("div",On,t(a.title),1),e("div",zn,t(a.desc),1),e("div",Sn,[(n(!0),l(O,null,L(Object.keys(a.params).slice(0,3),(_,I)=>(n(),T(S,{key:I,bordered:!1},{default:v(()=>[q(t(_),1)]),_:2},1024))),128)),r(p,{placement:"right"},{content:v(()=>[e("div",In,[(n(!0),l(O,null,L(a.params,(_,I)=>(n(),l("div",{key:I,class:"param-item"},[e("div",Mn,[e("span",Tn,t(I),1),e("span",qn,t(_.type),1),_.required?(n(),l("span",Bn,t(s(o)("label_required")),1)):E("",!0)]),e("div",Nn,t(_.desc),1)]))),128))])]),default:v(()=>[e("a",null,t(s(o)("label_params")),1)]),_:2},1024)])]))),128))])],!0)])]),_:3},8,["open"]),r(mn,{ref_key:"pluginConfigRef",ref:y,onAuth:w[2]||(w[2]=a=>$("auth"))},null,512)])}}},Ce=G(jn,[["__scopeId","data-v-1fba9f00"]]),An="/assets/img/official-unlogin-DhPFhfcv.png",Ln={class:"main-box"},Un={class:"login-info-box"},Fn=["src"],En={class:"info"},Yn={class:"name"},Hn=["href"],Jn={class:"no-auth-box"},Vn={class:"tit"},Wn={class:"desc"},Gn={__name:"official-article-config",setup(Y,{expose:j}){const{t:h}=W("views.explore.plugins.components.official-article-config"),{loginInfo:o,loginStatus:$,loginUrl:u,loading:g,refresh:x,goLogin:y,init:P}=Ue(!1),M=k(null);function z(f){P(),M.value.show(f)}return j({show:z}),(f,w)=>{const S=X;return n(),T(Ce,{ref_key:"configRef",ref:M},De({_:2},[s($)?{name:"head-extra",fn:v(()=>{var p,d;return[e("div",Ln,[e("div",Un,[e("img",{class:"avatar",src:(p=s(o))==null?void 0:p.headimgurl},null,8,Fn),e("div",En,[e("div",Yn,t((d=s(o))==null?void 0:d.nickname),1),e("div",null,t(s(h)("label_recent_login_time"))+t(s(Fe)(s(o).login_time*1e3).format("YYYY-MM-DD HH:mm")),1),e("div",null,t(s(h)("label_login_duration"))+t(s(o).login_duration_text),1)])]),e("a",{class:"main-btn",href:s(u),target:"_blank"},t(s(h)("btn_change_password_settings")),9,Hn)])]}),key:"0"}:{name:"body",fn:v(()=>[e("div",Jn,[w[0]||(w[0]=e("img",{src:An},null,-1)),e("div",Vn,t(s(h)("title_login_required")),1),r(S,{type:"primary",class:"link",onClick:s(y)},{default:v(()=>[q(t(s(h)("btn_go_login")),1)]),_:1},8,["onClick"]),e("div",Wn,[q(t(s(h)("msg_already_logged_in")),1),r(S,{type:"link",onClick:s(x),loading:s(g)},{default:v(()=>[q(t(s(h)("btn_click_refresh")),1)]),_:1},8,["onClick","loading"])])])]),key:"1"}]),1536)}}},Kn=G(Gn,[["__scopeId","data-v-d2a48c70"]]),Qn={class:"_plugin-box"},Xn={key:1,class:"plugin-list"},Zn=["onClick"],es={class:"type-tag"},ts={class:"base-info"},ns=["src"],ss={class:"info"},os={class:"head"},as={class:"name zm-line1"},ls={class:"source"},is={class:"version"},cs={key:0,class:"tag"},_s={class:"action-box"},ds={class:"right"},us=["onClick"],rs=["href"],fs=["onClick"],ps=["onClick"],vs={class:"text-center mt24"},hs={__name:"installPlugins",props:{filterData:{type:Object,default:null}},emits:["installReport","tabChange"],setup(Y,{expose:j,emit:h}){const{t:o}=W("views.explore.plugins.components.installPlugins"),$=h,u=Y,g=fe(),x=k(null),y=k(null),P=k(null),M=k(null),z=k(!0),f=k([]),w=["feishu_bitable","official_account_profile","official_batch_tag","official_send_template_message","official_send_message","official_intelligent_api","official_account_batch_send","official_account_comment","official_article"];ne(()=>{c()});function S(i,m){if(!i)return null;const F=document.createElement("canvas").getContext("2d");F.font='14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif';const U=F.measureText(i).width,Z=(m==null?void 0:m.title_width)||120;return U>Z?i:null}function p(){f.value=[],c()}const d=k([]),a=se(()=>u.filterData.filter_type==0||u.filterData.filter_type==5?[...d.value,...f.value]:f.value);function c(){Se(u.filterData).then(i=>{let m=(i==null?void 0:i.data)||[];m=m.map(B=>{var F,U;return{...B.remote,local:B.local,has_update:((F=B.remote)==null?void 0:F.latest_version)!=((U=B.local)==null?void 0:U.version),installing:!1}}),d.value=m}),z.value=!0,ve(u.filterData).then(i=>{let m=(i==null?void 0:i.data)||[];$("installReport",m.length),m=m.map(B=>{var F,U;return{...B.remote,local:B.local,has_update:((F=B.remote)==null?void 0:F.latest_version)!=((U=B.local)==null?void 0:U.version),installing:!1}}),f.value=m}).finally(()=>{z.value=!1})}async function _(i){const m=()=>i.local.has_loaded=!i.local.has_loaded;if(!i.local.has_loaded)K.confirm({title:o("title_confirm_close_plugin"),content:o("msg_close_plugin_warning"),okText:o("btn_confirm"),cancelText:o("btn_cancel"),onOk:()=>{i.local.type=="trigger"?ue({id:i.trigger_config_id,switch_status:0}).then(()=>{V.success(o("msg_closed"))}).catch(m):Me({name:i.name}).then(()=>{V.success(o("msg_closed"))}).catch(m)},onCancel(){m()}});else{if(i.local.type=="trigger"){ue({id:i.trigger_config_id,switch_status:1}).then(()=>{V.success(o("msg_opened"))});return}if(i.name=="feishu_bitable"){let{data:B}=await ae({name:i.name});if(B=te(B,{}),!Object.keys(B).length)return m(),K.confirm({title:o("title_authorize_feishu"),content:oe("div",{style:{color:" red"}},o("msg_complete_config_first")),okText:o("btn_confirm"),cancelText:o("btn_cancel"),onOk:()=>{I(i)}})}Te({name:i.name}).then(()=>{V.success(o("msg_opened"))}).catch(m)}}function I(i){y.value.show(i)}function b(i){K.confirm({title:o("title_confirm_delete_plugin"),content:o("msg_delete_plugin_warning"),okText:o("btn_confirm"),cancelText:o("btn_cancel"),onOk:()=>{Ie({name:i.name}).then(()=>{V.success(o("msg_deleted")),c()})}})}function R(i){i.local.type!="trigger"&&g.push({path:"/plugins/detail",query:{name:i.name}})}function D(i){i.name==="feishu_bitable"?I(i):i.name==="official_article"?P.value.show(i):M.value.show(i)}function N(i){x.value.show(i,i.latest_version_detail,i.local)}function A(i,m){i&&m&&(m.title_width=i.offsetWidth)}return j({search:p}),(i,m)=>{const B=ke,F=Be,U=ye,Z=X;return n(),l("div",Qn,[z.value?(n(),T(ge,{key:0})):a.value.length?(n(),l("div",Xn,[(n(!0),l(O,null,L(a.value,C=>(n(),l("div",{onClick:H=>R(C),key:C.name,class:ee(["plugin-item",{"trigger-plugin-item":C.local.type=="trigger"}])},[e("div",es,t(C.filter_type_title),1),e("div",ts,[e("img",{class:"avatar",src:C.icon},null,8,ns),e("div",ss,[e("div",os,[e("span",as,t(C.title),1)]),e("div",ls,t(C.author),1)])]),r(B,{title:S(C.description,C),placement:"top"},{default:v(()=>[e("div",{class:"desc zm-line1",ref_for:!0,ref:H=>A(H,C)},t(C.description),513)]),_:2},1032,["title"]),e("div",is,[q(t(s(o)("label_version",{version:C.local.version}))+" ",1),C.has_update?(n(),l("span",cs,t(s(o)("label_has_update")),1)):E("",!0)]),e("div",_s,[e("div",{class:"left",onClick:m[0]||(m[0]=J(()=>{},["stop"]))},[r(F,{checked:C.local.has_loaded,"onUpdate:checked":H=>C.local.has_loaded=H,onChange:H=>_(C)},null,8,["checked","onUpdate:checked","onChange"])]),e("div",ds,[C.local.type!="trigger"?(n(),l("span",{key:0,class:"zm-link-pointer",onClick:J(H=>b(C),["stop"])},t(s(o)("btn_delete")),9,us)):E("",!0),C.help_url?(n(),l(O,{key:1},[r(U,{type:"vertical"}),e("a",{onClick:m[1]||(m[1]=J(()=>{},["stop"])),class:"c595959",href:C.help_url,target:"_blank"},t(s(o)("btn_usage_guide")),9,rs)],64)):E("",!0),w.includes(C.name)||C.local.multiNode?(n(),l(O,{key:2},[r(U,{type:"vertical"}),e("a",{onClick:J(H=>D(C),["stop"])},t(s(o)("btn_config")),9,fs)],64)):E("",!0),C.has_update?(n(),l(O,{key:3},[r(U,{type:"vertical"}),e("a",{onClick:J(H=>N(C),["stop"])},t(s(o)("btn_update")),9,ps)],64)):E("",!0)])])],10,Zn))),128))])):(n(),T(pe,{key:2,title:s(o)("title_no_plugins_installed")},{desc:v(()=>[e("div",null,[q(t(s(o)("msg_more_features_prefix"))+" ",1),e("a",{onClick:m[2]||(m[2]=C=>$("tabChange",3))},t(s(o)("title_explore_plugin_marketplace")),1),q(t(s(o)("msg_more_features_suffix")),1)]),e("div",vs,[r(Z,{class:"btn",type:"primary",onClick:m[3]||(m[3]=C=>$("tabChange",3))},{default:v(()=>[q(t(s(o)("btn_go_add")),1)]),_:1})])]),_:1},8,["title"])),r(me,{ref_key:"updateRef",ref:x,onOk:c},null,512),r(Ut,{ref_key:"feishuRef",ref:y},null,512),r(Kn,{ref_key:"officialArtRef",ref:P},null,512),r(Ce,{ref_key:"configRef",ref:M},null,512)])}}},gs=G(hs,[["__scopeId","data-v-0f89fac6"]]),ms={class:"_container"},ks={class:"header"},ys={class:"main-tab-box"},bs={class:"content"},$s={class:"filter-box"},xs={class:"radio-tabs"},Cs=["onClick"],ws=["src"],Rs={__name:"index",setup(Y){const{t:j}=W("views.explore.plugins.index"),{isPublicNetwork:h}=Ye(),o=Oe(),$=k(null),u=k(null),g=k(localStorage.getItem("zm:explore:active")||"2"),x=k([]),y=Pe({title:"",filter_type:0});ne(()=>{o.query.active>1&&$.value.change(o.query.active),P()});function P(){qe().then(p=>{x.value=(p==null?void 0:p.data)||[]})}function M(){u.value.search()}function z(p){y.filter_type=p,M()}function f(p){p>1&&(g.value=p)}function w(p){$.value.change(p)}function S(){$.value.update()}return(p,d)=>{const a=re,c=je;return n(),l("div",ms,[e("div",ks,[e("div",ys,[r(Ee,{ref_key:"tabRef",ref:$,onChange:f},null,512)])]),e("div",bs,[e("div",$s,[e("div",xs,[e("div",{onClick:d[0]||(d[0]=_=>z(0)),class:ee(["radio-tab",{active:y.filter_type==0}])},[r(a,{name:"icon-all"}),e("span",null,t(s(j)("label_all")),1)],2),(n(!0),l(O,null,L(x.value,_=>(n(),l("div",{onClick:I=>z(_.id),key:_.id,class:ee(["radio-tab",{active:_.id==y.filter_type}])},[e("img",{class:"icon",src:_.id==y.filter_type?_.icon_active_path:_.icon_path},null,8,ws),e("span",null,t(_.type_title),1)],10,Cs))),128))]),r(c,{value:y.title,"onUpdate:value":d[1]||(d[1]=_=>y.title=_),valueModifiers:{trim:!0},onChange:M,style:{width:"360px"},allowClear:"",placeholder:s(j)("ph_search_plugin")},{suffix:v(()=>[r(s(Ne))]),_:1},8,["value","placeholder"])]),s(h)?g.value==3?(n(),T(ut,{key:1,onInstallReport:S,filterData:y,ref_key:"pluginRef",ref:u},null,8,["filterData"])):(n(),T(gs,{key:2,onTabChange:w,onInstallReport:S,filterData:y,ref_key:"pluginRef",ref:u},null,8,["filterData"])):(n(),T(He,{key:0}))])])}}},Ks=G(Rs,[["__scopeId","data-v-cd3016ec"]]);export{Ks as default};
//# sourceMappingURL=index-DEuuij8T.js.map
