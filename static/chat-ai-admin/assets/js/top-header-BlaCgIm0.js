import{j as e,d as k,b as y,N as h,O as _,X as t,U as c,u as v,a0 as $,F as W,a1 as q,a5 as A,_ as L,a6 as H,S as T,a3 as st,a8 as at,q as rt,Z as X,a2 as lt}from"./vue-chunks-BRsu9_To.js";import{a as it,A as ct}from"./add-group-BpSh4rtW.js";import{I as Q,b as Y,ag as ut,M as dt,k as pt,E as _t,l as vt,aC as mt,aD as ft}from"../../index-M_xDbIir.js";import{u as K}from"./robot-DM4IWDeQ.js";import{f as bt}from"./index-mwk_dyAT.js";import{P as gt}from"./PlusOutlined-DQ91YM1E.js";import{S as ht}from"./SearchOutlined-KUcJKUZw.js";import"./index-UA7y0weg.js";import{I as kt}from"./Input-Bx6Hhp2b.js";import{E as yt,M as tt,_ as ot}from"./index-B3CPYV6x.js";import"./index-D7wU2qJF.js";import{D as et}from"./dropdown-DCrM-GKY.js";import{L as Ot}from"./LeftOutlined-DbHJ8blF.js";import{R as Rt}from"./RightOutlined-og3IpneX.js";import{_ as nt}from"./index-B0RyY99D.js";import{D as Ct}from"./DownOutlined-CI2wWtcJ.js";import{E as xt}from"./EditOutlined-Cg8Bo7WJ.js";import{_ as wt}from"./index-RSdO8Qbf.js";var Lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};function Z(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(s).filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable}))),r.forEach(function(d){$t(i,d,s[d])})}return i}function $t(i,n,s){return n in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}var F=function(n,s){var r=Z({},n,s.attrs);return e(Q,Z({},r,{icon:Lt}),null)};F.displayName="HomeOutlined";F.inheritAttrs=!1;var Gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};function J(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(s).filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable}))),r.forEach(function(d){St(i,d,s[d])})}return i}function St(i,n,s){return n in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}var U=function(n,s){var r=J({},n,s.attrs);return e(Q,J({},r,{icon:Gt}),null)};U.displayName="PlusCircleOutlined";U.inheritAttrs=!1;const At={class:"robot-group-box"},Pt={class:"popover-scroll-box"},It={class:"group-head-box"},Et={class:"head-title"},Vt={class:"search-box"},Dt={class:"classify-box"},Ht=["onClick"],Tt={class:"classify-title"},Mt={class:"right-content"},Nt={key:0,class:"btn-box"},Bt={class:"hover-btn-wrap"},jt=["onClick"],zt=["onClick"],Ft={class:"list-box popover-scroll-box"},Ut={key:0,class:"empty-box"},Wt=["onClick"],qt={class:"robot-info"},Xt=["src"],Zt={class:"robot-info-content"},Jt={class:"robot-name"},Qt={class:"robot-type-tag"},Yt={class:"robot-desc"},Kt={__name:"robot-group",props:{value:{type:String,default:""}},emits:["update:value","change"],setup(i,{expose:n,emit:s}){const r=K(),d=i,O=s;let G="robot-list-hide-group-key";const m=k(localStorage.getItem(G)==1),R=()=>{m.value=!m.value,localStorage.setItem(G,m.value?1:0)},f=k(""),M=y(()=>r.robotList||[]),P=y(()=>{let a=M.value;return f.value!=""&&(a=a.filter(u=>u.group_id==f.value)),a}),I=y(()=>{let a=r.robotGroupList||[],u=0;return a.forEach(p=>{u+=+p.total}),[{group_name:"全部",total:u,id:""},...a]}),b=k(""),N=y(()=>I.value.filter(a=>a.group_name.includes(b.value))),S=()=>{r.getRobotLists(),r.getGroupList()},E=a=>{f.value=a.id},V=k(null),D=a=>{V.value.show({...a})},B=a=>{dt.confirm({title:`确认删除分组${a.group_name}`,icon:e(_t),content:"",okText:"确认",okType:"danger",cancelText:"取消",onOk(){bt({id:a.id}).then(()=>{pt.success("删除成功"),r.getGroupList(),f.value==a.id&&(f.value="",r.getRobotLists())})}})},j=a=>{O("update:value",a.id),O("change",a.id)};return n({group_id:f}),(a,u)=>{const p=nt,o=kt,C=ot,x=tt,w=et,z=ut;return _(),h("div",At,[t("div",{class:A(["left-group-box",{"hide-group":m.value}])},[t("div",Pt,[t("div",It,[t("div",Et,[u[3]||(u[3]=t("div",null,"机器人分组",-1)),e(p,{title:"新建分组"},{default:c(()=>[t("div",{class:"hover-btn-wrap",onClick:u[0]||(u[0]=l=>D({}))},[e(v(gt))])]),_:1})]),t("div",Vt,[e(o,{value:b.value,"onUpdate:value":u[2]||(u[2]=l=>b.value=l),allowClear:"",placeholder:"搜索分组",style:{width:"100%"}},{suffix:c(()=>[e(v(ht),{onClick:u[1]||(u[1]=$(()=>{},["stop"]))})]),_:1},8,["value"])])]),t("div",Dt,[(_(!0),h(W,null,q(N.value,l=>(_(),h("div",{class:A(["classify-item",{active:l.id==f.value}]),onClick:g=>E(l),key:l.id},[t("div",Tt,L(l.group_name),1),t("div",Mt,[t("div",{class:A(["num",{"num-block":l.id<=0}])},L(l.total),3),l.id>0?(_(),h("div",Nt,[e(w,{placement:"bottomRight"},{overlay:c(()=>[e(x,null,{default:c(()=>[e(C,null,{default:c(()=>[t("div",{onClick:$(g=>D(l),["stop"])},"重命名",8,jt)]),_:2},1024),e(C,null,{default:c(()=>[t("div",{onClick:$(g=>B(l),["stop"])},"删 除",8,zt)]),_:2},1024)]),_:2},1024)]),default:c(()=>[t("div",Bt,[e(v(yt))])]),_:2},1024)])):H("",!0)])],10,Ht))),128))])]),e(p,{placement:"right",title:m.value?"展开分组":"收起分组"},{default:c(()=>[t("div",{class:"hide-group-box",onClick:R},[m.value?(_(),T(v(Rt),{key:1})):(_(),T(v(Ot),{key:0}))])]),_:1},8,["title"])],2),t("div",Ft,[P.value.length==0?(_(),h("div",Ut,[e(z)])):H("",!0),(_(!0),h(W,null,q(P.value,l=>(_(),h("div",{class:A(["list-item-wrapper",{"show-more":m.value}]),key:l.id,onClick:g=>j(l)},[t("div",{class:A(["list-item",{active:l.id==d.value}])},[t("div",qt,[t("img",{class:"robot-avatar",src:l.robot_avatar,alt:""},null,8,Xt),t("div",Zt,[t("div",Jt,L(l.robot_name),1),t("div",Qt,L(l.application_type==0?"聊天机器人":"工作流"),1)])]),t("div",Yt,L(l.robot_intro),1)],2)],10,Wt))),128))]),e(it,{ref_key:"addGroupRef",ref:V,onOk:S},null,512)])}}},to=Y(Kt,[["__scopeId","data-v-162ddcd3"]]),oo={class:"select-robot-block"},eo={class:"robot-option-block show-block-item"},no=["src"],so={class:"robot-name"},ao={class:"create-action"},ro=["src"],lo={class:"create-action"},io=["src"],co={__name:"top-header",setup(i){const n=lt(),s=st(),r=k(null),d=y(()=>s.name),O=K(),{robotInfo:G}=at(O),m=()=>{n.push("/robot/list")},R=k(null),f=vt();let{role_permission:M}=f;const P=y(()=>M.includes("RobotCreate")),I=y(()=>O.robotList||[]),b=k(G.value.id),N=k(null),S=y(()=>I.value.find(p=>p.id==b.value)||{}),E=p=>{R.value.open(p);let o=r.value?r.value.group_id:"0";R.value.setGroupId(o)},V=()=>{var o;let p=+G.value.application_type;R.value.open(p,!0),R.value.setGroupId((o=S.value)==null?void 0:o.group_id)},D=()=>{a(),u()},B=()=>{a(),u()},j=()=>{let p=s.path,o=I.value.find(w=>w.id==b.value),{id:C,robot_key:x}=o;localStorage.setItem("last_local_robot_id",C),window.location.href=`/#${p}?id=${C}&robot_key=${x}`,window.location.reload()};function a(){O.getRobotLists()}function u(){O.getGroupList()}return rt(()=>{}),(p,o)=>{const C=wt,x=nt,w=ot,z=tt,l=et;return _(),h("div",{class:"robot-name-box",ref_key:"robotNameBoxRef",ref:N},[e(ct,{onAddRobot:D,onEditRobot:B,ref_key:"addRobotAlertRef",ref:R},null,512),t("div",{class:"left-icon hover-block",onClick:m},[e(v(F))]),t("div",oo,[e(C,{placement:"bottomLeft",trigger:"click",overlayInnerStyle:{"padding-right":0}},{content:c(()=>[e(to,{ref_key:"robotGroupRef",ref:r,value:b.value,"onUpdate:value":o[0]||(o[0]=g=>b.value=g),onChange:j},null,8,["value"])]),default:c(()=>[t("div",eo,[t("img",{class:"robot-avatar",src:S.value.robot_avatar,alt:""},null,8,no),t("div",so,L(S.value.robot_name),1),e(v(Ct),{class:"down-icon"})])]),_:1})]),d.value=="robotWorkflow"?(_(),T(x,{key:0},{title:c(()=>o[5]||(o[5]=[X("编辑机器人")])),default:c(()=>[t("div",{class:"hover-block",onClick:o[1]||(o[1]=g=>V())},[e(v(xt))])]),_:1})):H("",!0),P.value?(_(),T(l,{key:1},{overlay:c(()=>[e(z,null,{default:c(()=>[e(w,{onClick:o[3]||(o[3]=$(g=>E(0),["prevent"]))},{default:c(()=>[t("span",ao,[t("img",{class:"icon",src:v(mt),alt:""},null,8,ro),o[7]||(o[7]=t("span",null,"聊天机器人",-1))])]),_:1}),e(w,{onClick:o[4]||(o[4]=$(g=>E(1),["prevent"]))},{default:c(()=>[t("span",lo,[t("img",{class:"icon",src:v(ft),alt:""},null,8,io),o[8]||(o[8]=t("span",null,"工作流",-1))])]),_:1})]),_:1})]),default:c(()=>[e(x,null,{title:c(()=>o[6]||(o[6]=[X("新建机器人")])),default:c(()=>[t("div",{class:"hover-block",onClick:o[2]||(o[2]=$(()=>{},["prevent"]))},[e(v(U))])]),_:1})]),_:1})):H("",!0)],512)}}},Go=Y(co,[["__scopeId","data-v-acf5b678"]]);export{U as P,Go as T};
