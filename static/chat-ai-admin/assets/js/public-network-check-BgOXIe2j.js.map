{"version":3,"file":"public-network-check-BgOXIe2j.js","sources":["../../../../front-end/chat-ai-admin-vue/src/assets/empty-network.png","../../../../front-end/chat-ai-admin-vue/src/components/common/public-network-check.vue"],"sourcesContent":["export default \"__VITE_ASSET__DpJd2kzZ__\"","<template>\r\n  <EmptyBox>\r\n    <template #image>\r\n      <img src=\"@/assets/empty-network.png\" width=\"200px\"/>\r\n    </template>\r\n    <template #title>{{ t('title_network_error') }}</template>\r\n    <template #desc>\r\n      <div class=\"empty-desc-box\">\r\n        <div>{{ t('msg_function_closed_retry') }}</div>\r\n        <a-button class=\"btn\" type=\"primary\" :loading=\"loading\" @click=\"reload\">\r\n          {{ loading ? t('btn_reconnecting') : t('btn_reconnect') }}\r\n        </a-button>\r\n      </div>\r\n    </template>\r\n  </EmptyBox>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, onUnmounted, ref} from 'vue'\r\nimport EmptyBox from \"@/components/common/empty-box.vue\";\r\nimport {useCompanyStore} from \"@/stores/modules/company.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('components.common.public-network-check')\r\n\r\nconst companyStore = useCompanyStore()\r\nconst reloadCount = ref(1)\r\nconst timer = ref(null)\r\nconst loading = ref(false)\r\n\r\nonMounted(() => {\r\n  autoReload()\r\n})\r\n\r\nonUnmounted(() => {\r\n  timer.value && clearInterval(timer.value)\r\n})\r\n\r\nfunction autoReload() {\r\n  reload()\r\n  timer.value = setInterval(() => {\r\n    if (reloadCount.value > 2) {\r\n      clearInterval(timer.value)\r\n    } else {\r\n      reloadCount.value += 1\r\n      reload()\r\n    }\r\n  }, 4000)\r\n}\r\n\r\nfunction reload() {\r\n  if (loading.value) return\r\n  loading.value = true\r\n  companyStore.getCompanyInfo().finally(() => {\r\n    setInterval(() => {\r\n      loading.value = false\r\n    }, 1500)\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.empty-desc-box {\r\n  text-align: center;\r\n  .btn {\r\n    min-width: 148px;\r\n    margin-top: 16px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["_imports_0","useI18n","companyStore","useCompanyStore","reloadCount","ref","timer","loading","onMounted","autoReload","onUnmounted","reload","_createBlock","EmptyBox","_cache","_createElementVNode","_unref","_hoisted_1","_createVNode","_component_a_button"],"mappings":"oSAAA,MAAAA,EAAe,8GCuBf,KAAM,CAAE,CAAC,EAAKC,EAAQ,wCAAwC,EAExDC,EAAeC,EAAe,EAC9BC,EAAcC,EAAI,CAAC,EACnBC,EAAQD,EAAI,IAAI,EAChBE,EAAUF,EAAI,EAAK,EAEzBG,EAAU,IAAM,CACdC,EAAU,CACZ,CAAC,EAEDC,EAAY,IAAM,CAChBJ,EAAM,OAAS,cAAcA,EAAM,KAAK,CAC1C,CAAC,EAED,SAASG,GAAa,CACpBE,EAAM,EACNL,EAAM,MAAQ,YAAY,IAAM,CAC1BF,EAAY,MAAQ,EACtB,cAAcE,EAAM,KAAK,GAEzBF,EAAY,OAAS,EACrBO,EAAM,EAEV,EAAG,GAAI,CACT,CAEA,SAASA,GAAS,CACZJ,EAAQ,QACZA,EAAQ,MAAQ,GAChBL,EAAa,iBAAiB,QAAQ,IAAM,CAC1C,YAAY,IAAM,CAChBK,EAAQ,MAAQ,EAClB,EAAG,IAAI,CACT,CAAC,EACH,oCAzDEK,EAaWC,EAAA,KAAA,CAZE,QACT,IAAqD,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAArDC,EAAqD,MAAA,CAAhD,IAAAf,EAAiC,MAAM,sBAEnC,QAAM,IAA8B,KAA3BgB,EAAA,CAAA,EAAC,qBAAA,CAAA,EAAA,CAAA,IACV,OACT,IAKM,CALND,EAKM,MALNE,EAKM,CAJJF,EAA+C,aAAvCC,EAAA,CAAA,EAAC,2BAAA,CAAA,EAAA,CAAA,EACTE,EAEWC,EAAA,CAFD,MAAM,MAAM,KAAK,UAAW,QAASZ,EAAA,MAAU,QAAOI,cAC9D,IAA0D,KAAvDJ,EAAA,MAAUS,EAAA,CAAA,EAAC,kBAAA,EAAuBA,EAAA,CAAA,EAAC,eAAA,CAAA,EAAA,CAAA"}