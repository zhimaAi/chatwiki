import{_ as rt}from"./cu-scroll-ufyFyI_5.js";import{I as yt,M as W,ao as $t,k as E,b as Z,B as Y,ap as xt,aq as Ct,ar as St,E as it,ac as tt,W as Ot,d as at,as as jt,at as Lt,au as wt,av as It,aw as Ut,ax as Pt}from"../../index-CzPebXix.js";import{j as o,z as K,d as h,N as p,O as n,U as r,X as t,Z as U,k as et,u as b,F as M,a1 as z,a5 as pt,a6 as G,S as H,_ as l,a0 as Mt,a3 as At,x as Dt}from"./vue-chunks-BRsu9_To.js";import{F as ct,_ as dt}from"./index-BgVvqN-n.js";import"./index-BFhVTGQQ.js";import{I as ut}from"./Input-DFtZp9vk.js";import{_ as ot}from"./TextArea-DrgXbuSS.js";import{P as st}from"./PlusOutlined-BlmIiILr.js";import{E as _t,M as mt,_ as vt}from"./index-DlQVT6K6.js";import"./index-BSz5XTfh.js";import{D as ht}from"./dropdown-DTOAy9tU.js";import{_ as ft}from"./index-BwqnaIPU.js";import{M as Nt}from"./model-select-BRz1sNBY.js";import{T as Gt}from"./index-BukWVUqX.js";import{S as bt}from"./index-0UwCX3b0.js";import{S as gt,a as kt}from"./index-6HDf6TPN.js";import{D as Tt}from"./DownOutlined-DXKkgIsm.js";import{U as Et}from"./UpOutlined-B_3G2J2r.js";import{E as Ht}from"./EditOutlined-D08WQbiX.js";import{_ as zt}from"./index-Bd3BpNCC.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./Trigger-Bvakuge0.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-OEy0Jz8l.js";import"./Col-CFxRRwN8.js";import"./responsiveObserve-DqAe0rZk.js";import"./collapseMotion-Brd6xpAT.js";import"./QuestionCircleOutlined-DTfTQPH4.js";import"./FormItemContext-B2RmG14m.js";import"./index-Bxqtz4sn.js";import"./Search-Cf7bcOZJ.js";import"./SearchOutlined-a_gTycfl.js";import"./inputProps-jdR54afw.js";import"./Password-fnCqxsm2.js";import"./index-Bhf8G0AA.js";import"./shallowequal-C0xnIuy8.js";import"./slide-CsbPJG8I.js";import"./RightOutlined-DH_YROnp.js";import"./move-CkiYyFmr.js";import"./colors-DfoziJR7.js";import"./index-BfxXXGE8.js";import"./index-BhUXTHsq.js";import"./List-D7uk7Chm.js";import"./useMergedState-C0iIHNGF.js";import"./CheckOutlined-Mk6nTpyE.js";var Rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};function lt(w){for(var f=1;f<arguments.length;f++){var y=arguments[f]!=null?Object(arguments[f]):{},$=Object.keys(y);typeof Object.getOwnPropertySymbols=="function"&&($=$.concat(Object.getOwnPropertySymbols(y).filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable}))),$.forEach(function(_){Vt(w,_,y[_])})}return w}function Vt(w,f,y){return f in w?Object.defineProperty(w,f,{value:y,enumerable:!0,configurable:!0,writable:!0}):w[f]=y,w}var nt=function(f,y){var $=lt({},f,y.attrs);return o(yt,lt({},$,{icon:Rt}),null)};nt.displayName="DatabaseOutlined";nt.inheritAttrs=!1;const qt={__name:"add-group",emits:["ok"],setup(w,{expose:f,emit:y}){const $=y,_=K({id:"",group_name:"",group_desc:""}),x=h(!1),L=h("新建分组"),s=h(!1),k=h(null),A=(g={})=>{k.value&&k.value.resetFields(),_.group_name=g.group_name||"",_.group_desc=g.group_desc||"",_.id=g.id||"",L.value=g.id?"编辑分组":"新建分组",s.value=!0},m=()=>{k.value.validate().then(()=>{$t({..._}).then(()=>{$("ok"),E.success(`${L.value}成功`),s.value=!1})})};return f({show:A}),(g,C)=>{const P=ut,c=dt,T=ot,D=ct,v=W;return n(),p("div",null,[o(v,{open:s.value,"onUpdate:open":C[2]||(C[2]=I=>s.value=I),"confirm-loading":x.value,title:L.value,width:"476px",onOk:m},{default:r(()=>[o(D,{style:{"margin-top":"24px"},layout:"vertical",ref_key:"formRef",ref:k,model:_},{default:r(()=>[o(c,{name:"group_name",label:"分组名称",rules:[{required:!0,message:"请输入分组名称"}]},{default:r(()=>[o(P,{value:_.group_name,"onUpdate:value":C[0]||(C[0]=I=>_.group_name=I),placeholder:"请输入，最多10个字",maxLength:10},null,8,["value"])]),_:1}),o(c,{name:"group_desc",label:"分组描述"},{default:r(()=>[o(T,{style:{height:"80px"},maxLength:100,value:_.group_desc,"onUpdate:value":C[1]||(C[1]=I=>_.group_desc=I),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading","title"])])}}},Bt={class:"group-wrapper"},Jt={class:"group-box"},Ft=["onClick"],Wt={class:"group-name"},Qt={class:"name-text"},Xt={class:"hover-btn-box"},Zt=["onClick"],Yt=["onClick"],Kt={__name:"group-list",emits:["change","load"],setup(w,{emit:f}){const y=f,$=h(-1),_=h([]),x=()=>{Ct().then(m=>{_.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...m.data],y("load",_.value)})};x();const L=m=>{$.value=m.id,y("change",m)},s=h(null),k=m=>{s.value.show({...m})},A=m=>{W.confirm({title:"删除确认",icon:et(it),content:`确定要删除分组【${m.group_name}】吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){St({id:m.id}).then(g=>{m.id==$.value&&L(_.value[0]),x(),E.success("删除成功")})},onCancel(){}})};return(m,g)=>{const C=Y,P=ft,c=vt,T=mt,D=ht;return n(),p(M,null,[t("div",Bt,[t("div",null,[o(C,{onClick:g[0]||(g[0]=v=>k({})),icon:et(b(st)),block:""},{default:r(()=>g[2]||(g[2]=[U("添加分组")])),_:1,__:[2]},8,["icon"])]),t("div",Jt,[(n(!0),p(M,null,z(_.value,v=>(n(),p("div",{class:pt(["group-list",{active:v.id==$.value}]),onClick:I=>L(v),key:v.id},[t("div",Wt,[t("div",Qt,l(v.group_name),1),v.group_desc?(n(),H(P,{key:0},{title:r(()=>[U(l(v.group_desc),1)]),default:r(()=>[o(b(xt))]),_:2},1024)):G("",!0)]),v.id>0?(n(),p("div",{key:0,class:"right-block",onClick:g[1]||(g[1]=Mt(()=>{},["stop"]))},[o(D,null,{overlay:r(()=>[o(T,null,{default:r(()=>[o(c,null,{default:r(()=>[t("div",{onClick:I=>k(v)},"编 辑",8,Zt)]),_:2},1024),o(c,null,{default:r(()=>[t("div",{style:{color:"#fb363f"},onClick:I=>A(v)},"删 除",8,Yt)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("div",Xt,[o(b(_t))])]),_:2},1024)])):G("",!0)],10,Ft))),128))])]),o(qt,{ref_key:"addGroupRef",ref:s,onOk:x},null,512)],64)}}},te=Z(Kt,[["__scopeId","data-v-2b90ce82"]]),ee={class:"ai-create-box"},oe={class:"input-box"},se={class:"input-box"},ne={key:1},le={key:2},re={class:"quick-tags-box"},ie={class:"ai-list-box"},ae={key:0,class:"loading-box"},pe={key:0,class:"prompt-list-box"},ce={class:"prompt-list"},de={class:"prompt-header"},ue={class:"prompt-title"},_e={class:"prompt-content"},me={class:"prompt-list"},ve={class:"prompt-header"},he={class:"prompt-title"},fe={class:"prompt-content"},be={class:"prompt-list"},ge={class:"prompt-header"},ke={class:"prompt-title"},ye={class:"prompt-content"},$e={class:"prompt-list"},xe={class:"prompt-header"},Ce={class:"prompt-title"},Se={class:"prompt-content"},Oe={class:"prompt-list"},je={class:"prompt-header"},Le={class:"prompt-title"},we={class:"prompt-content"},Ie={class:"prompt-list"},Ue={class:"prompt-header"},Pe={class:"prompt-title"},Me={class:"prompt-content"},Ae={class:"prompt-header"},De={class:"prompt-title"},Ne={class:"prompt-content"},Ge={key:1,class:"empty-box"},Te={__name:"ai-create-prompt",emits:["handleAiSave"],setup(w,{expose:f,emit:y}){const $=tt.PRESENTED_IMAGE_SIMPLE,_=h(!1),x=h(!1);At().query;const L=y,s=h(""),k=h(!1),A=[{title:"创建一个电商行业售后客服"},{title:"创建一个英语教育机构官网售前机器人"}],m=h("在上方输入框输入要求，点击生成提示词"),g=()=>{C.value=!1,c.promptStruct=P,s.value="",m.value="在上方输入框输入要求，点击生成提示词",_.value=!0},C=h(!1),P={role:{subject:"",describe:""},task:{subject:"",describe:""},constraints:{subject:"",describe:""},skill:{subject:"",describe:""},output:{subject:"",describe:""},tone:{subject:"",describe:""},custom:[]},c=K({promptStruct:P,use_model:"",model_config_id:""}),T=u=>{s.value=u},D=()=>{if(!s.value)return E.error("请输入AI 生成提示词");if(k.value)return E.error("正在生成中...");k.value=!0,jt({demand:s.value,use_model:c.use_model,model_config_id:c.model_config_id}).then(u=>{c.promptStruct=JSON.parse(u.data.promptStruct),C.value=!0}).finally(()=>{k.value=!1}).catch(u=>{C.value=!1,m.value=u.msg})},v=u=>{Dt(()=>{var e,a,O;c.model_config_id=(e=u[0])==null?void 0:e.model_config_id,c.use_model=(O=(a=u[0])==null?void 0:a.children[0])==null?void 0:O.name})},I=()=>{if(!C.value)return E.error("请先生成提示词");L("handleAiSave",c.promptStruct),_.value=!1};return f({show:g}),(u,e)=>{const a=Y,O=Nt,R=ot,V=at,j=Gt,q=bt,B=tt,Q=W;return n(),p("div",null,[o(Q,{open:_.value,"onUpdate:open":e[3]||(e[3]=S=>_.value=S),title:"AI 生成提示词",wrapClassName:"no-padding-modal",bodyStyle:{"max-height":"600px","overflow-y":"auto"},width:746},{footer:r(()=>[o(a,{type:"primary",loading:x.value,onClick:I},{default:r(()=>e[4]||(e[4]=[U("使用该提示")])),_:1,__:[4]},8,["loading"])]),default:r(()=>[t("div",ee,[t("div",oe,[o(O,{modelType:"LLM",modeName:c.use_model,"onUpdate:modeName":e[0]||(e[0]=S=>c.use_model=S),modeId:c.model_config_id,"onUpdate:modeId":e[1]||(e[1]=S=>c.model_config_id=S),style:{width:"300px"},onLoaded:v},null,8,["modeName","modeId"])]),t("div",se,[o(R,{style:{width:"100%"},value:s.value,"onUpdate:value":e[2]||(e[2]=S=>s.value=S),"auto-size":"",size:"large",placeholder:"请输入AI 生成提示词例如：创建一个电商行业售后客服"},null,8,["value"]),t("div",{class:pt(["btn-box",{"disabed-status":k.value}]),onClick:D},[k.value?(n(),H(b(Ot),{key:0})):G("",!0),o(V,{name:"ai-mark"}),k.value?(n(),p("span",ne,"生成中...")):(n(),p("span",le,"生成"))],2)]),t("div",re,[e[5]||(e[5]=t("div",{class:"quick-label"},"快捷生成：",-1)),(n(),p(M,null,z(A,S=>o(j,{key:S.title,onClick:J=>T(S.title),color:"blue"},{default:r(()=>[U(l(S.title),1)]),_:2},1032,["onClick"])),64))]),t("div",ie,[k.value?(n(),p("div",ae,[o(q,{tip:"正在生成中..."})])):(n(),p(M,{key:1},[C.value?(n(),p("div",pe,[t("div",ce,[t("div",de,[t("div",ue,l(c.promptStruct.role.subject),1)]),t("div",_e,l(c.promptStruct.role.describe),1)]),t("div",me,[t("div",ve,[t("div",he,l(c.promptStruct.task.subject),1)]),t("div",fe,l(c.promptStruct.task.describe),1)]),t("div",be,[t("div",ge,[t("div",ke,l(c.promptStruct.constraints.subject),1)]),t("div",ye,l(c.promptStruct.constraints.describe),1)]),t("div",$e,[t("div",xe,[t("div",Ce,l(c.promptStruct.skill.subject),1)]),t("div",Se,l(c.promptStruct.skill.describe),1)]),t("div",Oe,[t("div",je,[t("div",Le,l(c.promptStruct.output.subject),1)]),t("div",we,l(c.promptStruct.output.describe),1)]),t("div",Ie,[t("div",Ue,[t("div",Pe,l(c.promptStruct.tone.subject),1)]),t("div",Me,l(c.promptStruct.tone.describe),1)]),(n(!0),p(M,null,z(c.promptStruct.custom,(S,J)=>(n(),p("div",{class:"prompt-list",key:J+S.key?S.key:""},[t("div",Ae,[t("div",De,l(S.subject),1)]),t("div",Ne,l(S.describe),1)]))),128))])):(n(),p("div",Ge,[o(B,{image:b($),description:m.value},null,8,["image","description"])]))],64))])])]),_:1},8,["open"])])}}},Ee=Z(Te,[["__scopeId","data-v-d1dd74ad"]]),He={key:1,class:"prompt-list-box"},ze={class:"header-box"},Re={class:"prompt-list"},Ve={class:"prompt-header"},qe={class:"prompt-title"},Be={class:"prompt-content"},Je={class:"prompt-list"},Fe={class:"prompt-header"},We={class:"prompt-title"},Qe={class:"prompt-content"},Xe={class:"prompt-list"},Ze={class:"prompt-header"},Ye={class:"prompt-title"},Ke={class:"prompt-content"},to={class:"prompt-list"},eo={class:"prompt-header"},oo={class:"prompt-title"},so={class:"prompt-content"},no={class:"prompt-list"},lo={class:"prompt-header"},ro={class:"prompt-title"},io={class:"prompt-content"},ao={class:"prompt-list"},po={class:"prompt-header"},co={class:"prompt-title"},uo={class:"prompt-content"},_o={class:"prompt-header"},mo={class:"prompt-title",style:{flex:"1"}},vo={class:"btn-wrapper-box"},ho=["onClick"],fo={class:"prompt-content"},bo={class:"add-theme-block"},go={__name:"add-diy-prompt",props:{groupList:{type:Array,default:()=>[]}},emits:["ok"],setup(w,{expose:f,emit:y}){const $=y,_=w;let x={role:"请输入，告知大模型要扮演的身份、职责、沟通风格等，比如“你扮演一名经验丰富的电商行业售后客服AI助手，具备良好的沟通能力和解决问题的能力。”",task:"请输入，比如“根据提供的知识库资料，找到对应的售后知识（每个知识点之间使用⧼-split_line-⧽进行分割），快速准确回答用户的问题。”",constraints:"请输入对大模型在回复时的要求，比如“你的回答应该使用自然的对话方式，简单直接地回答，不要解释你的答案；当用户问题没有找到相关知识点时，直接告诉用户问题暂时无法回答，不能胡编乱造，否则你将受到惩罚。”",output:"请输入对大模型输出格式的要求，比如“请使用markdown格式输出”",tone:"请告知语言风格要求，比如“专业而不失亲切，适当使用emoji增强可读性”",skill:"请输入"},L={role:{subject:"角色",describe:""},task:{subject:"任务",describe:""},constraints:{subject:"要求",describe:""},skill:{subject:"技能",describe:""},output:{subject:"输出格式",describe:""},tone:{subject:"风格语气",describe:""},custom:[]};const s=K({id:"",title:"",group_id:0,prompt_type:0,prompt:"",prompt_struct:JSON.parse(JSON.stringify(L))}),k=h(!1),A=h(""),m=h(!1),g=h(null),C=(u={},e)=>{g.value&&g.value.resetFields(),s.title=u.title||"",s.group_id=u.group_id>0?u.group_id:0,s.id=e=="copy"?"":u.id||"",s.prompt_type=u.prompt_type,s.prompt=u.prompt||"",s.prompt_struct=u.prompt_struct||JSON.parse(JSON.stringify(L)),A.value=`${u.id?"编辑":"新建"}${u.prompt_type==0?"自定义":"结构化"}提示词`,m.value=!0},P=()=>{g.value.validate().then(()=>{let u={...s};s.prompt_type==0?delete u.prompt_struct:u.prompt_struct=JSON.stringify(s.prompt_struct),wt({...u}).then(()=>{$("ok"),E.success(`${A.value}成功`),m.value=!1})})},c=h(null),T=()=>{c.value.show()},D=u=>{s.prompt_struct=u},v=()=>{s.prompt_struct.custom.push({subject:"",describe:"",key:Math.random()*1e4})},I=u=>{s.prompt_struct.custom.splice(u,1)};return f({show:C}),(u,e)=>{const a=ut,O=dt,R=kt,V=gt,j=ot,q=at,B=Y,Q=ct,S=rt,J=W;return n(),p("div",null,[o(J,{open:m.value,"onUpdate:open":e[9]||(e[9]=d=>m.value=d),"confirm-loading":k.value,title:A.value,width:"766px",onOk:P},{default:r(()=>[o(S,{style:{"max-height":"600px","margin-top":"24px"}},{default:r(()=>[o(Q,{"label-col":{span:3},"wrapper-col":{span:21},ref_key:"formRef",ref:g,model:s},{default:r(()=>[o(O,{name:"title",label:"提示词标题",rules:[{required:!0,message:"请输入提示词标题"}]},{default:r(()=>[o(a,{value:s.title,"onUpdate:value":e[0]||(e[0]=d=>s.title=d),placeholder:"请输入提示词标题",maxLength:10},null,8,["value"])]),_:1}),o(O,{name:"group_id",label:"分组"},{default:r(()=>[o(V,{value:s.group_id,"onUpdate:value":e[1]||(e[1]=d=>s.group_id=d),style:{width:"100%"}},{default:r(()=>[(n(!0),p(M,null,z(_.groupList,d=>(n(),H(R,{value:d.id},{default:r(()=>[U(l(d.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),s.prompt_type==0?(n(),H(O,{key:0,name:"prompt",label:"提示词",rules:[{required:!0,message:"请输入提示词"}]},{default:r(()=>[o(j,{style:{height:"280px"},value:s.prompt,"onUpdate:value":e[2]||(e[2]=d=>s.prompt=d),placeholder:"请输入"},null,8,["value"])]),_:1})):(n(),p("div",He,[t("div",ze,[e[11]||(e[11]=t("div",{class:"header-left"},"提示词",-1)),t("div",{class:"ai-mark-box",onClick:T},[o(q,{name:"ai-mark"}),e[10]||(e[10]=U(" AI自动生成 "))])]),t("div",Re,[t("div",Ve,[t("div",qe,l(s.prompt_struct.role.subject),1)]),t("div",Be,[o(j,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.role.describe,"onUpdate:value":e[3]||(e[3]=d=>s.prompt_struct.role.describe=d),placeholder:b(x).role},null,8,["value","placeholder"])])]),t("div",Je,[t("div",Fe,[t("div",We,l(s.prompt_struct.task.subject),1)]),t("div",Qe,[o(j,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.task.describe,"onUpdate:value":e[4]||(e[4]=d=>s.prompt_struct.task.describe=d),placeholder:b(x).task},null,8,["value","placeholder"])])]),t("div",Xe,[t("div",Ze,[t("div",Ye,l(s.prompt_struct.constraints.subject),1)]),t("div",Ke,[o(j,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.constraints.describe,"onUpdate:value":e[5]||(e[5]=d=>s.prompt_struct.constraints.describe=d),placeholder:b(x).constraints},null,8,["value","placeholder"])])]),t("div",to,[t("div",eo,[t("div",oo,l(s.prompt_struct.skill.subject),1)]),t("div",so,[o(j,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.skill.describe,"onUpdate:value":e[6]||(e[6]=d=>s.prompt_struct.skill.describe=d),placeholder:b(x).skill},null,8,["value","placeholder"])])]),t("div",no,[t("div",lo,[t("div",ro,l(s.prompt_struct.output.subject),1)]),t("div",io,[o(j,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.output.describe,"onUpdate:value":e[7]||(e[7]=d=>s.prompt_struct.output.describe=d),placeholder:b(x).output},null,8,["value","placeholder"])])]),t("div",ao,[t("div",po,[t("div",co,l(s.prompt_struct.tone.subject),1)]),t("div",uo,[o(j,{style:{height:"80px"},bordered:!1,value:s.prompt_struct.tone.describe,"onUpdate:value":e[8]||(e[8]=d=>s.prompt_struct.tone.describe=d),placeholder:b(x).tone},null,8,["value","placeholder"])])]),(n(!0),p(M,null,z(s.prompt_struct.custom,(d,X)=>(n(),p("div",{class:"prompt-list",key:X+d.key?d.key:""},[t("div",_o,[t("div",mo,[o(a,{bordered:!1,style:{width:"100%"},value:d.subject,"onUpdate:value":F=>d.subject=F,placeholder:"请输入主题"},null,8,["value","onUpdate:value"])]),t("div",vo,[t("div",{class:"hover-btn-box",onClick:F=>I(X)},[o(b(Lt))],8,ho)])]),t("div",fo,[o(j,{style:{height:"80px"},bordered:!1,value:d.describe,"onUpdate:value":F=>d.describe=F,placeholder:"请输入"},null,8,["value","onUpdate:value"])])]))),128)),t("div",bo,[o(B,{onClick:v,block:"",icon:et(b(st))},{default:r(()=>e[12]||(e[12]=[U("添加主题")])),_:1,__:[12]},8,["icon"])])]))]),_:1},8,["model"])]),_:1})]),_:1},8,["open","confirm-loading","title"]),o(Ee,{onHandleAiSave:D,ref_key:"aiCreatePromptRef",ref:c},null,512)])}}},ko=Z(go,[["__scopeId","data-v-a5fa67e0"]]),yo={class:"user-model-page"},$o={class:"page-title"},xo={class:"list-wrapper"},Co={class:"left-group"},So={class:"right-cotnetn"},Oo={class:"content-box"},jo={class:"btn-block"},Lo={key:0,class:"loading-box"},wo={class:"prompt-list-box"},Io={class:"prompt-header"},Uo={class:"prompt-title"},Po={key:0,class:"prompt-type diy"},Mo={key:1,class:"prompt-type"},Ao={class:"title"},Do={class:"right-btn-box"},No=["onClick"],Go=["onClick"],To={class:"hover-btn-box"},Eo=["onClick"],Ho=["onClick"],zo=["onClick"],Ro={class:"prompt-content-box"},Vo={key:0,class:"prompt-content"},qo=["onClick"],Bo={key:1,class:"structure-list-box"},Jo={class:"structure-list"},Fo={class:"structure-title"},Wo={class:"structure-content"},Qo={class:"structure-list"},Xo={class:"structure-title"},Zo={class:"structure-content"},Yo=["onClick"],Ko={class:"structure-list"},ts={class:"structure-title"},es={class:"structure-content"},os={class:"structure-list"},ss={class:"structure-title"},ns={class:"structure-content"},ls={class:"structure-list"},rs={class:"structure-title"},is={class:"structure-content"},as={class:"structure-list"},ps={class:"structure-title"},cs={class:"structure-content"},ds={class:"structure-title"},us={class:"structure-content"},_s={class:"move-group-box"},ms={__name:"index",setup(w){let f=-1;const y=e=>{f=e.id,s()};let $=h([]);const _=e=>{$.value=e.filter(a=>a.id>=0)},x=h([]),L=h(!1),s=()=>{L.value=!0,It({group_id:f,page:1,size:9999}).then(e=>{let a=e.data.list||[];a=a.map(O=>({...O,isHide:!0,prompt_struct:O.prompt_struct?JSON.parse(O.prompt_struct):{}})),x.value=a}).finally(()=>{L.value=!1})};s();const k=h(null),A=e=>{k.value.show({group_id:f==-1?0:f,prompt_type:e})},m=(e,a)=>{k.value.show({...e},a)};function g(e){var a;return(a=$.value.filter(O=>O.id==e)[0])==null?void 0:a.group_name}const C=e=>{e.isHide=!e.isHide},P=h(!0),c=()=>{P.value=!P.value,x.value=x.value.map(e=>({...e,isHide:P.value}))},T=e=>{W.confirm({title:"删除确认",icon:o(it),content:`确定要删除提示词[${e.title}]吗？`,okText:"删除",okType:"danger",cancelText:"取消",onOk(){Ut({id:e.id}).then(a=>{E.success("删除成功"),s()})},onCancel(){}})},D=h(!1);let v=K({id:"",group_id:0});const I=e=>{e={...e},v.id=e.id,v.group_id=e.group_id>0?e.group_id:0,D.value=!0},u=()=>{if(v.id<0)return E.error("请选择要移动的分组");Pt({id:v.id,group_id:v.group_id}).then(()=>{E.success("移动成功"),D.value=!1,s()})};return(e,a)=>{const O=zt,R=rt,V=Y,j=vt,q=mt,B=ht,Q=bt,S=ft,J=tt,d=kt,X=gt,F=W;return n(),p("div",yo,[t("div",$o,[a[4]||(a[4]=U(" 提示词模板库 ")),o(O,{type:"vertical"}),a[5]||(a[5]=t("div",{class:"desc"}," 添加提示词模板，在应用配置和工作流的AI对话节点，可以从提示词模板库选择提示词并应用 ",-1))]),t("div",xo,[t("div",Co,[o(R,null,{default:r(()=>[o(te,{onChange:y,onLoad:_})]),_:1})]),t("div",So,[o(R,null,{default:r(()=>[t("div",Oo,[t("div",jo,[o(B,null,{overlay:r(()=>[o(q,null,{default:r(()=>[o(j,null,{default:r(()=>[t("div",{onClick:a[0]||(a[0]=i=>A(1))},"添加结构化提示词")]),_:1}),o(j,null,{default:r(()=>[t("div",{onClick:a[1]||(a[1]=i=>A(0))},"添加自定义提示词")]),_:1})]),_:1})]),default:r(()=>[o(V,{type:"primary",icon:o(b(st))},{default:r(()=>a[6]||(a[6]=[U("提示词")])),_:1,__:[6]},8,["icon"])]),_:1}),o(V,{onClick:c,icon:o(b(nt))},{default:r(()=>[U(l(P.value?"全部展开":"全部收起"),1)]),_:1},8,["icon"])]),L.value?(n(),p("div",Lo,[o(Q)])):G("",!0),t("div",wo,[(n(!0),p(M,null,z(x.value,i=>(n(),p("div",{class:"prompt-list",key:i.id},[t("div",Io,[t("div",Uo,[i.prompt_type==0?(n(),p("div",Po,"自定义")):G("",!0),i.prompt_type==1?(n(),p("div",Mo,"结构化")):G("",!0),t("div",Ao,l(i.title),1),o(O,{type:"vertical"}),t("div",null,l(g(i.group_id)),1)]),t("div",Do,[o(S,{title:i.isHide?"展开":"收起"},{default:r(()=>[t("div",{class:"hover-btn-box",onClick:N=>C(i)},[i.isHide?(n(),H(b(Tt),{key:0})):(n(),H(b(Et),{key:1}))],8,No)]),_:2},1032,["title"]),t("div",{class:"hover-btn-box",onClick:N=>m(i)},[o(b(Ht))],8,Go),o(B,null,{overlay:r(()=>[o(q,null,{default:r(()=>[o(j,null,{default:r(()=>[t("div",{onClick:N=>m(i,"copy")},"复制",8,Eo)]),_:2},1024),o(j,null,{default:r(()=>[t("div",{onClick:N=>I(i)},"修改分组",8,Ho)]),_:2},1024),o(j,null,{default:r(()=>[t("div",{onClick:N=>T(i)},"删除",8,zo)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("div",To,[o(b(_t))])]),_:2},1024)])]),t("div",Ro,[i.prompt_type==0?(n(),p("div",Vo,[i.isHide?(n(),p(M,{key:0},[U(l(i.prompt.slice(0,200))+" ",1),i.prompt.length>200?(n(),p("span",{key:0,onClick:N=>C(i),style:{cursor:"pointer"}},"...",8,qo)):G("",!0)],64)):(n(),p(M,{key:1},[U(l(i.prompt),1)],64))])):(n(),p("div",Bo,[t("div",Jo,[t("div",Fo,l(i.prompt_struct.role.subject),1),t("div",Wo,l(i.prompt_struct.role.describe),1)]),t("div",Qo,[t("div",Xo,l(i.prompt_struct.task.subject),1),t("div",Zo,[U(l(i.prompt_struct.task.describe)+" ",1),i.isHide?(n(),p("span",{key:0,onClick:N=>C(i),style:{cursor:"pointer"}},"...",8,Yo)):G("",!0)])]),i.isHide?G("",!0):(n(),p(M,{key:0},[t("div",Ko,[t("div",ts,l(i.prompt_struct.constraints.subject),1),t("div",es,l(i.prompt_struct.constraints.describe),1)]),t("div",os,[t("div",ss,l(i.prompt_struct.skill.subject),1),t("div",ns,l(i.prompt_struct.skill.describe),1)]),t("div",ls,[t("div",rs,l(i.prompt_struct.output.subject),1),t("div",is,l(i.prompt_struct.output.describe),1)]),t("div",as,[t("div",ps,l(i.prompt_struct.tone.subject),1),t("div",cs,l(i.prompt_struct.tone.describe),1)]),(n(!0),p(M,null,z(i.prompt_struct.custom,N=>(n(),p("div",{class:"structure-list",key:N.subject},[t("div",ds,l(N.subject),1),t("div",us,l(N.describe),1)]))),128))],64))]))])]))),128))])]),x.value.length==0?(n(),H(J,{key:0,style:{"padding-top":"100px"}})):G("",!0)]),_:1})])]),o(ko,{groupList:b($),onOk:s,ref_key:"addDiyPromptRef",ref:k},null,8,["groupList"]),o(F,{open:D.value,"onUpdate:open":a[3]||(a[3]=i=>D.value=i),title:"修改分组",onOk:u},{default:r(()=>[t("div",_s,[a[7]||(a[7]=t("div",{class:"label-text"},"修改分组为",-1)),o(X,{value:b(v).group_id,"onUpdate:value":a[2]||(a[2]=i=>b(v).group_id=i),style:{width:"100%"}},{default:r(()=>[(n(!0),p(M,null,z(b($),i=>(n(),H(d,{value:i.id},{default:r(()=>[U(l(i.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])]),_:1},8,["open"])])}}},un=Z(ms,[["__scopeId","data-v-89be7750"]]);export{un as default};
