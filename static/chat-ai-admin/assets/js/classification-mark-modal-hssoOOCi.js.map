{"version":3,"file":"classification-mark-modal-hssoOOCi.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/library/library-preview/components/selct-star-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/library/library-preview/components/classification-mark-modal.vue"],"sourcesContent":["<template>\r\n  <div class=\"star-select-box\">\r\n    <a-tabs v-model:activeKey=\"activeKey\" size=\"small\" @change=\"handleChange\">\r\n      <a-tab-pane :key=\"-1\">\r\n        <template #tab>{{ t('tab_all') }}</template>\r\n      </a-tab-pane>\r\n      <a-tab-pane :key=\"0\" v-if=\"!hideId.includes(0)\">\r\n        <template #tab>\r\n          <div class=\"star-item\"><StarOutlined />{{ t('tab_unselected') }}</div>\r\n        </template>\r\n      </a-tab-pane>\r\n      <a-tab-pane v-for=\"item in props.startLists\" :key=\"item.id\">\r\n        <template #tab>\r\n          <div class=\"star-item\">\r\n            <StarFilled :style=\"{ color: colorLists[item.type] }\" /> {{ item.name || '-' }} <span v-if=\"item.data_count > 0\">({{ item.data_count }})</span>\r\n          </div>\r\n        </template>\r\n      </a-tab-pane>\r\n    </a-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { StarFilled, StarOutlined } from '@ant-design/icons-vue'\r\nimport colorLists from '@/utils/starColors.js'\r\n\r\nconst { t } = useI18n('views.library.library-preview.components.selct-star-box')\r\nconst emit = defineEmits(['change'])\r\nconst props = defineProps({\r\n  startLists: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  hideId: {\r\n    type: [Number, String, Array],\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst activeKey = ref(-1)\r\n\r\nconst handleChange = () => {\r\n  emit('change', activeKey.value)\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.star-select-box {\r\n  width: fit-content;\r\n  background: #edeff2;\r\n  border-radius: 6px;\r\n  padding: 2px;\r\n  .star-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    min-width: 32px;\r\n    .anticon {\r\n      margin: 0;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  ::v-deep(.ant-tabs-nav-operations) {\r\n    display: none !important;\r\n  }\r\n  ::v-deep(.ant-tabs-nav) {\r\n    margin-bottom: 0;\r\n    &::before {\r\n      border: 0;\r\n    }\r\n    .ant-tabs-tab {\r\n      margin: 0;\r\n      padding: 5px 16px;\r\n    }\r\n    .ant-tabs-ink-bar {\r\n      height: 100%;\r\n      background: #fff;\r\n      border-radius: 6px;\r\n    }\r\n    .ant-tabs-tab-active {\r\n      position: relative;\r\n      z-index: 99;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"t('title_selection_settings')\" @ok=\"handleOk\" :width=\"586\">\r\n      <div class=\"modal-box\">\r\n        <!-- <a-alert show-icon message=\"添加了分类标记的分段，重新分段时将会会被保留。\"></a-alert> -->\r\n        <div class=\"list-box\">\r\n          <a-table :data-source=\"tableData\" :pagination=\"false\">\r\n            <a-table-column key=\"tags\" :title=\"t('label_icon')\" data-index=\"tags\" :width=\"200\">\r\n              <template #default=\"{ record }\">\r\n                <StarFilled class=\"start-icon\" :style=\"{ color: colorLists[record.type] }\" />\r\n              </template>\r\n            </a-table-column>\r\n            <a-table-column key=\"name\" :title=\"t('label_remark')\" data-index=\"name\" :width=\"200\">\r\n              <template #default=\"{ record }\">\r\n                <a-input v-model:value=\"record.name\" :maxLength=\"4\" :placeholder=\"t('ph_set_max_4_chars')\" />\r\n              </template>\r\n            </a-table-column>\r\n          </a-table>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { StarOutlined, StarFilled } from '@ant-design/icons-vue'\r\nimport { getCategoryList, saveCategory } from '@/api/library'\r\nimport colorLists from '@/utils/starColors.js'\r\nimport { ref } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.library.library-preview.components.classification-mark-modal')\r\n\r\nconst open = ref(false)\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst tableData = ref([])\r\nconst show = () => {\r\n  getCategoryLists()\r\n  open.value = true\r\n}\r\n\r\nconst getCategoryLists = () => {\r\n  getCategoryList().then((res) => {\r\n    tableData.value = res.data\r\n  })\r\n}\r\n\r\nconst handleOk = () => {\r\n  let data = tableData.value.map((item) => {\r\n    return {\r\n      id: +item.id,\r\n      name: item.name\r\n    }\r\n  })\r\n  saveCategory({ data: JSON.stringify(data) }).then((res) => {\r\n    message.success(t('msg_save_success'))\r\n    emit('ok')\r\n    open.value = false\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.modal-box {\r\n  margin-top: 24px;\r\n}\r\n.list-box {\r\n  margin: 16px 0;\r\n}\r\n.start-icon {\r\n  font-size: 20px;\r\n}\r\n</style>\r\n"],"names":["t","useI18n","emit","__emit","props","__props","activeKey","ref","handleChange","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_tabs","$event","_createBlock","_component_a_tab_pane","_unref","_createElementVNode","_hoisted_2","StarOutlined","_Fragment","_renderList","item","_hoisted_3","StarFilled","_normalizeStyle","colorLists","_createTextVNode","_toDisplayString","open","tableData","show","getCategoryLists","getCategoryList","res","handleOk","data","saveCategory","message","__expose","_component_a_modal","_component_a_table","_component_a_table_column","_withCtx","record","_component_a_input"],"mappings":"+nBA4BA,KAAM,CAAE,EAAAA,CAAC,EAAKC,EAAQ,yDAAyD,EACzEC,EAAOC,EACPC,EAAQC,EAWRC,EAAYC,EAAI,EAAE,EAElBC,EAAe,IAAM,CACzBN,EAAK,SAAUI,EAAU,KAAK,CAChC,8BA5CE,OAAAG,EAAA,EAAAC,EAkBM,MAlBNC,EAkBM,CAjBJC,EAgBSC,EAAA,CAhBO,UAAWP,EAAA,0CAAAA,EAAS,MAAAQ,GAAE,KAAK,QAAS,SAAQN,cAC1D,IAEa,MAFbO,EAEaC,EAAA,CAFA,IAAK,IAAE,CACP,MAAI,IAAkB,KAAfC,EAAAjB,CAAA,EAAC,SAAA,CAAA,EAAA,CAAA,WAEOK,EAAA,OAAO,SAAQ,CAAA,gBAA3CU,EAIaC,EAAA,CAJA,IAAK,CAAC,EAAA,CACN,MACT,IAAsE,CAAtEE,EAAsE,MAAtEC,EAAsE,CAA/CP,EAAgBK,EAAAG,CAAA,CAAA,MAAGH,EAAAjB,CAAA,EAAC,gBAAA,CAAA,EAAA,CAAA,cAG/CS,EAAA,EAAA,EAAAC,EAMaW,EAAA,KAAAC,EANclB,EAAM,WAAdmB,QAAnBR,EAMaC,EAAA,CANiC,IAAKO,EAAK,KAC3C,MACT,IAEM,CAFNL,EAEM,MAFNM,EAEM,CADJZ,EAAwDK,EAAAQ,CAAA,EAAA,CAA3C,MAAKC,EAAA,CAAA,MAAWT,EAAAU,CAAA,EAAWJ,EAAK,IAAI,CAAA,CAAA,qBAAOK,EAAA,IAACC,EAAGN,EAAK,WAAc,IAAC,CAAA,EAAYA,EAAK,WAAU,GAA3Bd,IAAAC,EAA+D,SAA9B,IAACmB,EAAGN,EAAK,UAAU,EAAG,IAAC,CAAA,mOCkBpJ,KAAM,CAAE,EAAAvB,CAAC,EAAKC,EAAQ,oEAAoE,EAEpF6B,EAAOvB,EAAI,EAAK,EAChBL,EAAOC,EAEP4B,EAAYxB,EAAI,EAAE,EAClByB,EAAO,IAAM,CACjBC,EAAgB,EAChBH,EAAK,MAAQ,EACf,EAEMG,EAAmB,IAAM,CAC7BC,EAAe,EAAG,KAAMC,GAAQ,CAC9BJ,EAAU,MAAQI,EAAI,IACxB,CAAC,CACH,EAEMC,EAAW,IAAM,CACrB,IAAIC,EAAON,EAAU,MAAM,IAAKR,IACvB,CACL,GAAI,CAACA,EAAK,GACV,KAAMA,EAAK,IACjB,EACG,EACDe,EAAa,CAAE,KAAM,KAAK,UAAUD,CAAI,EAAG,EAAE,KAAMF,GAAQ,CACzDI,EAAQ,QAAQvC,EAAE,kBAAkB,CAAC,EACrCE,EAAK,IAAI,EACT4B,EAAK,MAAQ,EACf,CAAC,CACH,EAEA,OAAAU,EAAa,CACX,KAAAR,CACF,CAAC,2CAhECtB,EAoBM,MAAA,KAAA,CAnBJE,EAkBU6B,EAAA,CAlBO,KAAMX,EAAA,qCAAAA,EAAI,MAAAhB,GAAG,MAAOG,EAAAjB,CAAA,EAAC,0BAAA,EAA+B,KAAIoC,EAAW,MAAO,gBACzF,IAgBM,CAhBNlB,EAgBM,MAhBNP,EAgBM,CAdJO,EAaM,MAbNC,EAaM,CAZJP,EAWU8B,EAAA,CAXA,cAAaX,EAAA,MAAY,WAAY,eAC7C,IAIiB,CAJjBnB,EAIiB+B,EAAA,CAJD,IAAI,OAAQ,MAAO1B,EAAAjB,CAAA,EAAC,YAAA,EAAgB,aAAW,OAAQ,MAAO,MACjE,QAAO4C,EAChB,CAA6E,CADzD,OAAAC,KAAM,CAC1BjC,EAA6EK,EAAAQ,CAAA,EAAA,CAAjE,MAAM,aAAc,MAAKC,EAAA,CAAA,MAAWT,EAAAU,CAAA,EAAWkB,EAAO,IAAI,CAAA,CAAA,yCAG1EjC,EAIiB+B,EAAA,CAJD,IAAI,OAAQ,MAAO1B,EAAAjB,CAAA,EAAC,cAAA,EAAkB,aAAW,OAAQ,MAAO,MACnE,QAAO4C,EAChB,CAA6F,CADzE,OAAAC,KAAM,CAC1BjC,EAA6FkC,EAAA,CAA5E,MAAOD,EAAO,KAAP,iBAAA/B,GAAA+B,EAAO,KAAI/B,EAAG,UAAW,EAAI,YAAaG,EAAAjB,CAAA,EAAC,oBAAA"}