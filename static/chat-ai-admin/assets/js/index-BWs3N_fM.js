import{_ as E}from"./date-BMtcJDpd.js";import{h as F}from"./index-BuDcjXHQ.js";import{ah as I,r as $,E as q,a as i,p as h,v as l,u as s,y as r,t as k,b as o,q as d,F as v,_ as m,e as T}from"./vue-chunks-BdaA73Wf.js";import{u as B,d as N}from"../../index-DSFcP5NQ.js";import{d as O}from"./utils-CvB22N-W.js";import{_ as V}from"./emoji-mart-BBMRoEa3.js";import{m as Y,x as H,b5 as L,a0 as M,ad as Q,aO as U,q as j,ac as J}from"./ui-antd-Dl1wwwCD.js";import"./editor-cherry-CFIsbKoN.js";import"./neo4j-MWxXN7EM.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./other-LrIFyvU9.js";const P={class:"user-model-page"},R={class:"page-title"},A={class:"list-wrapper"},G={class:"content-wrapper"},K={class:"search-block"},W={key:0,class:"status-item status-0"},X={key:1,class:"status-item status-1"},Z={key:2,class:"status-item status-2"},tt={key:3,class:"status-item status-3"},et=["onClick"],st={key:1},at={__name:"index",setup(ot){const{t}=B("views.robot.robot-config.export-record.index"),C=N(),y=I().query,f=$([]),a=q({robot_id:y.id,page:1,size:10,total:0,start_time:"",end_time:""}),b=e=>{a.page=e.current,a.size=e.pageSize,x()},w=()=>{a.page=1,x()},D=e=>{a.start_time=e.start_time,a.end_time=e.end_time,w()},x=()=>{F({...a}).then(e=>{let u=e.data.list,c=e.data.map;u.forEach(n=>{var p;n.create_time_desc=O(n.create_time*1e3).format("YYYY/MM/DD HH:mm"),n.source_desc=(p=c.filter(g=>g.source==n.source)[0])==null?void 0:p.source_name,n.is_over_7_days=n.create_time<Date.now()/1e3-10080*60}),f.value=u,a.total=+e.data.total})},S=e=>{let u=`/manage/downloadExportFile?id=${e.id}&robot_id=${y.id}&token=${C.getToken}`;var c=document.createElement("a");c.href=u,c.style.display="none",c.click()},z=[{title:t("title_export_time"),dataIndex:"create_time_desc",key:"create_time_desc"},{title:t("title_export_file_name"),dataIndex:"file_name",key:"file_name"},{title:t("title_source"),key:"source_desc",dataIndex:"source_desc"},{title:t("title_status"),key:"status",dataIndex:"status"},{title:t("title_action"),key:"action"}];return(e,u)=>{const c=Y,n=j,p=H;return o(),i("div",P,[h("div",R,l(s(t)("title_export_record")),1),h("div",A,[h("div",G,[r(c,{"show-icon":"",message:s(t)("msg_export_file_retention")},null,8,["message"]),h("div",K,[r(E,{datekey:"2",onDateChange:D})]),r(p,{class:"table-list",columns:z,"data-source":f.value,pagination:{current:a.page,total:a.total,pageSize:a.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:b},{bodyCell:k(({column:g,record:_})=>[g.key==="status"?(o(),i(v,{key:0},[_.status==0?(o(),i("div",W,[r(s(L)),m(l(s(t)("status_waiting_export")),1)])):d("",!0),_.status==1?(o(),i("div",X,[r(s(M)),m(l(s(t)("status_exporting")),1)])):d("",!0),_.status==2?(o(),i("div",Z,[r(s(Q)),m(l(s(t)("status_export_success")),1)])):d("",!0),_.status==3?(o(),i("div",tt,[r(s(U)),m(l(s(t)("status_export_failed"))+" ",1),_.err_msg?(o(),T(n,{key:0},{title:k(()=>[m(l(_.err_msg),1)]),default:k(()=>[r(s(J))]),_:2},1024)):d("",!0)])):d("",!0)],64)):d("",!0),g.key==="action"?(o(),i(v,{key:1},[_.is_over_7_days?(o(),i("span",st,"--")):(o(),i("a",{key:0,onClick:it=>S(_)},l(s(t)("action_download")),9,et))],64)):d("",!0)]),_:1},8,["data-source","pagination"])])])])}}},yt=V(at,[["__scopeId","data-v-7477cbb0"]]);export{yt as default};
//# sourceMappingURL=index-BWs3N_fM.js.map
