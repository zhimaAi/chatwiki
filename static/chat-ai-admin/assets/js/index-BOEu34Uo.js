import{_ as R}from"./cu-scroll-RG6yxhtf.js";import{i as U,e as V,f as $}from"./index-Lw6UggWh.js";import{A as z}from"./add-collaborator-Bda4xU2n.js";import{b as F,h as X,dX as J,B as L,M as P,k as D,E}from"../../index-M_xDbIir.js";import{b as Z,a3 as G,d as m,z as H,S as f,U as p,X as o,j as n,N as i,a6 as a,Z as K,k as Q,u as _,_ as S,F as g,O as s}from"./vue-chunks-BRsu9_To.js";import{P as W}from"./PlusOutlined-DQ91YM1E.js";import{A as Y}from"./index-DcO3W2TZ.js";import{U as B}from"./UserOutlined-DlWzUUz9.js";import{D as tt}from"./DownOutlined-CI2wWtcJ.js";import{C as x}from"./CheckOutlined-DVulUWsT.js";import{E as et}from"./EditOutlined-Cg8Bo7WJ.js";import{E as ot}from"./Password-5njtOUlo.js";import{_ as st}from"./index-RSdO8Qbf.js";import{a as it}from"./index-Bg1_T7h9.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./index-V0sRhm34.js";import"./Trigger-CkoSoTBd.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-A-SljaBF.js";import"./Col-CFWsj1wI.js";import"./responsiveObserve-CRSSr9-w.js";import"./hasIn-DEwqUvIo.js";import"./collapseMotion-Brd6xpAT.js";import"./index-B0RyY99D.js";import"./colors-C56HAaAp.js";import"./QuestionCircleOutlined-B5SgdGK5.js";import"./FormItemContext-DRzYyKbC.js";import"./index-Dob-Z8xa.js";import"./RadioButton-Bb2kU0Fd.js";import"./Checkbox-pA5GUfu7.js";import"./index-Bn-th77D.js";import"./index-SuSZ4kHz.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./index-CMIXnI2Z.js";import"./index-D8nD-csV.js";import"./List-DKTpjnke.js";import"./CaretDownFilled-BzxZQg7Y.js";import"./Input-Bx6Hhp2b.js";import"./index-Btmz2D3B.js";import"./inputProps-DsSGhBt6.js";import"./index-D_6sH2t0.js";import"./LeftOutlined-DbHJ8blF.js";import"./RightOutlined-og3IpneX.js";import"./index-khLftDou.js";import"./slide-DzpBPoRp.js";import"./useMergedState-C0iIHNGF.js";import"./SearchOutlined-KUcJKUZw.js";import"./move-DD64vPeJ.js";import"./index-D7wU2qJF.js";import"./dropdown-DCrM-GKY.js";import"./Dropdown-Dh4cjnmT.js";import"./index-B3CPYV6x.js";import"./shallowequal-C0xnIuy8.js";import"./CaretDownOutlined-C4FFiOW0.js";import"./index-UA7y0weg.js";import"./Search-w33R1D1l.js";import"./TextArea-C57yjED6.js";const at={class:"content-box"},nt={key:0,class:"add-btn-block"},rt={class:"list-content"},_t={key:0,class:"user-block"},pt={class:"name-box"},lt={class:"name"},mt={class:"remark-text"},ct={key:0,class:"hover-btn-box"},dt={key:0},ut={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},ht=["onClick"],bt={class:"menu-header"},ft={key:0,class:"check-box"},gt=["onClick"],xt={class:"menu-header"},Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},Pt={key:0,class:"check-box"},Dt={class:"hover-btn-box"},Et={key:0},St={key:1},Bt={key:2},Mt=["onClick"],Nt={__name:"index",setup(Tt){const M=X(),C=Z(()=>M.user_name),c=G().query,d=m(J(c.form_id)),u=m([]),N=H({object_id:c.form_id,object_type:3}),l=()=>{U({...N}).then(r=>{let t=r.data||[];u.value=t})};l();const j=m(null),T=()=>{j.value.show(u.value,[{object_id:+c.form_id,object_type:3,operate_rights:4}])},y=(r,t)=>{let k=t==4?"管理":t==2?"编辑":"查看";P.confirm({title:"提示?",icon:n(E),content:"确认修改该协作者权限为【"+k+"】",okText:"确认",cancelText:"取消",onOk:()=>{let v=[{object_id:+r.object_id,object_type:+r.object_type,operate_rights:+t}];V({identity_ids:r.identity_id,identity_type:r.identity_type,object_array:JSON.stringify(v)}).then(O=>{D.success("修改成功"),l()})},onCancel(){}})},A=r=>{P.confirm({title:"提示?",icon:n(E),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{$({identity_id:r.identity_id,identity_type:r.identity_type,object_id:r.object_id,object_type:r.object_type}).then(t=>{D.success("删除成功"),l()})},onCancel(){}})},I=m([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(r,t)=>{const k=L,v=Y,O=st,q=it,w=R;return s(),f(w,null,{default:p(()=>[o("div",at,[t[7]||(t[7]=o("div",{class:"page-title"},"权限管理",-1)),d.value==4?(s(),i("div",nt,[n(k,{type:"primary",onClick:T,icon:Q(_(W))},{default:p(()=>t[0]||(t[0]=[K("添加协助者")])),_:1,__:[0]},8,["icon"])])):a("",!0),o("div",rt,[n(q,{columns:I.value,"data-source":u.value,pagination:!1},{bodyCell:p(({column:h,record:e})=>[h.key==="name"?(s(),i("div",_t,[n(v,{shape:"square",src:e.avatar,size:40},{icon:p(()=>[e.avatar?a("",!0):(s(),f(_(B),{key:0}))]),_:2},1032,["src"]),o("div",pt,[o("div",lt,S(e.user_name),1),o("div",mt,S(e.name),1)])])):a("",!0),h.key==="operate_rights"?(s(),i(g,{key:1},[d.value==2||e.user_name==C.value?(s(),i("div",ct,[e.operate_rights==4?(s(),i("span",dt,"管理")):a("",!0),e.operate_rights==2?(s(),i("span",ut,"编辑")):a("",!0),e.operate_rights==1?(s(),i("span",yt,"查看")):a("",!0)])):e.role_type==1||e.is_creator==1?(s(),i("div",kt,"管理")):(s(),f(O,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:p(()=>[o("div",vt,[o("div",{class:"role-menu",onClick:b=>y(e,4)},[o("div",bt,[n(_(B)),t[1]||(t[1]=o("span",{class:"title"},"管理",-1))]),t[2]||(t[2]=o("div",{class:"desc"},"可编辑，可删除，可查看",-1)),e.operate_rights==4?(s(),i("div",ft,[n(_(x))])):a("",!0)],8,ht),o("div",{class:"role-menu",onClick:b=>y(e,2)},[o("div",xt,[n(_(et)),t[3]||(t[3]=o("span",{class:"title"},"编辑",-1))]),t[4]||(t[4]=o("div",{class:"desc"},"可编辑，可查看",-1)),e.operate_rights==2?(s(),i("div",Ct,[n(_(x))])):a("",!0)],8,gt),o("div",{class:"role-menu",onClick:b=>y(e,1)},[o("div",Ot,[n(_(ot)),t[5]||(t[5]=o("span",{class:"title"},"查看",-1))]),t[6]||(t[6]=o("div",{class:"desc"},"仅查看",-1)),e.operate_rights==1?(s(),i("div",Pt,[n(_(x))])):a("",!0)],8,jt)])]),default:p(()=>[o("div",Dt,[e.operate_rights==4?(s(),i("span",Et,"管理")):a("",!0),e.operate_rights==2?(s(),i("span",St,"编辑")):a("",!0),e.operate_rights==1?(s(),i("span",Bt,"查看")):a("",!0),n(_(tt))])]),_:2},1024))],64)):a("",!0),h.key==="action"?(s(),i(g,{key:2},[d.value==4&&e.user_name!=C.value?(s(),i(g,{key:0},[e.role_type!=1&&e.is_creator!=1?(s(),i("a",{key:0,onClick:b=>A(e)},"移除",8,Mt)):a("",!0)],64)):a("",!0)],64)):a("",!0)]),_:1},8,["columns","data-source"])])]),n(z,{onOk:l,ref_key:"addCollaboratorRef",ref:j},null,512)]),_:1})}}},$e=F(Nt,[["__scopeId","data-v-7e12ca5e"]]);export{$e as default};
