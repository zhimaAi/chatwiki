import{u as N,f as R,bR as y,_ as V}from"../../index-DSFcP5NQ.js";import{c as x,r as C,a as b,p as t,y as n,t as r,v as o,u as i,e as q,q as A,_ as E,F as w,l as L,ag as j,b as m,Y as p}from"./vue-chunks-BdaA73Wf.js";import{A as z,_ as G}from"./add-data-sheet-B3OukkAC.js";import{g as Y,d as H}from"./index-p9HhDhmV.js";import{P as J}from"./page-tabs-D0DH-kej.js";import{_ as K}from"./page-alert-DLppgA58.js";import{_ as Q}from"./emoji-mart-BBMRoEa3.js";import{a1 as U,B as W,b as v,f as X,g as Z,i as tt,M as et,O as st}from"./ui-antd-Dl1wwwCD.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const ot={class:"library-page"},at={class:"library-page-body"},it={class:"list-toolbar"},nt={class:"toolbar-box"},lt={class:"list-total"},rt={class:"toolbar-box"},ct={class:"list-box"},dt=["onClick"],_t={class:"library-info"},mt={class:"library-info-content"},pt={class:"library-title"},ut={class:"item-body"},ft={class:"library-desc"},bt={class:"item-footer"},vt={class:"library-size"},gt={class:"text-item"},ht={class:"text-item"},kt=["onClick"],yt=["onClick"],xt={__name:"index",setup(Ct){const{t:e}=N("views.database.database-list.index");j();const B=x(()=>[{title:e("page_tabs.library"),path:"/library/list"},{title:e("page_tabs.database"),path:"/database/list"},{title:e("page_tabs.document_extract_faq"),path:"/ai-extract-faq/list"},{title:e("page_tabs.trigger_statistics"),path:"/trigger-statics/list"}]),T=R();let{role_permission:D,role_type:P}=T;const $=x(()=>P==1||D.includes("FormCreate")),u=C([]),f=()=>{Y({}).then(s=>{u.value=s.data||[]})};f();const g=C(null),h=(s={})=>{if(s.id){let a=y(s.id);if(!(a==4||a==2))return v.error(e("message.no_edit_permission"))}g.value.show(s)},S=s=>{window.open(`/#/database/details?form_id=${s.id}&name=${s.name}`,"_blank","noopener")},F=s=>{if(y(s.id)!=4)return v.error(e("message.no_delete_permission"));let c=3,_=et.confirm({title:e("delete_confirm.title"),icon:n(st),content:e("delete_confirm.content",{name:s.name}),okText:c+" "+e("delete_confirm.confirm_btn"),okType:"danger",okButtonProps:{disabled:!0},cancelText:e("delete_confirm.cancel_btn"),onOk(){O(s)},onCancel(){}}),d=setInterval(()=>{c==1?(_.update({okText:e("delete_confirm.confirm_btn"),okButtonProps:{disabled:!1}}),clearInterval(d),d=void 0):(c-=1,_.update({okText:c+" "+e("delete_confirm.confirm_btn"),okButtonProps:{disabled:!0}}))},1e3)},O=({id:s})=>{H({id:s}).then(()=>{v.success(e("message.delete_success")),f()})};return(s,a)=>{const c=W,_=V,d=Z,I=X,M=tt;return m(),b(w,null,[t("div",ot,[n(J,{class:"mb-16",tabs:B.value,active:"/database/list"},null,8,["tabs"]),n(K,{style:{"margin-bottom":"16px"},title:i(e)("usage_guide.title")},{default:r(()=>[t("div",null,[t("p",null,o(i(e)("usage_guide.point_1")),1),t("p",null,o(i(e)("usage_guide.point_2")),1)])]),_:1},8,["title"]),t("div",at,[t("div",it,[t("div",nt,[t("h3",lt,o(i(e)("list.all"))+" ("+o(u.value.length)+")",1)]),t("div",rt,[$.value?(m(),q(c,{key:0,type:"primary",onClick:a[0]||(a[0]=l=>h())},{icon:r(()=>[n(i(U))]),default:r(()=>[E(" "+o(i(e)("list.create_btn")),1)]),_:1})):A("",!0)])]),t("div",ct,[(m(!0),b(w,null,L(u.value,l=>(m(),b("div",{class:"list-item-wrapper",key:l.id},[t("div",{class:"list-item",onClick:p(k=>S(l),["stop"])},[t("div",_t,[a[3]||(a[3]=t("img",{class:"library-icon",src:G,alt:""},null,-1)),t("div",mt,[t("div",pt,o(l.name),1)])]),t("div",ut,[t("div",ft,o(l.description),1)]),t("div",bt,[t("div",vt,[t("span",gt,o(i(e)("item.data_count"))+o(l.entry_count)+o(i(e)("item.count_unit")),1),t("span",ht,o(i(e)("item.related_apps"))+o(l.robot_nums||0),1)]),t("div",{class:"action-box",onClick:a[2]||(a[2]=p(()=>{},["stop"]))},[n(M,null,{overlay:r(()=>[n(I,null,{default:r(()=>[n(d,null,{default:r(()=>[t("a",{href:"javascript:;",onClick:p(k=>h(l),["stop"])},o(i(e)("item.edit")),9,kt)]),_:2},1024),n(d,null,{default:r(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:k=>F(l)},o(i(e)("item.delete")),9,yt)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("div",{class:"action-item",onClick:a[1]||(a[1]=p(()=>{},["stop"]))},[n(_,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,dt)]))),128))])])]),n(z,{onOk:f,ref_key:"addDataSheetRef",ref:g},null,512)],64)}}},qt=Q(xt,[["__scopeId","data-v-c3f4e443"]]);export{qt as default};
//# sourceMappingURL=index-DGcZEdtU.js.map
