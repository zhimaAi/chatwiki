import{_ as O,b as V,f as A,bP as y,d as E}from"../../index-CB2DywzJ.js";import{e as x,f as C,ac as b,as as t,k as i,ar as r,at as o,u as n,ae as L,az as R,G as j,F as B,ax as q,av as z,ad as m,B as p}from"./vue-chunks-CGLjTDrY.js";import{A as G,_ as W}from"./add-data-sheet-DBVwIfVU.js";import{g as H,d as J}from"./index-D_MN-GJN.js";import{P as K}from"./page-tabs-B6pKMLdc.js";import{_ as Q}from"./page-alert-DcOtfX2y.js";import{a6 as U,B as X,b as v,h as Y,i as Z,k as tt,M as et,W as st}from"./ui-antd-BHaxN-GS.js";import"./neo4j-CSfpjqgw.js";import"./utils-pAinW4BS.js";import"./other-BrZCAsTs.js";const ot={class:"library-page"},at={class:"library-page-body"},nt={class:"list-toolbar"},it={class:"toolbar-box"},lt={class:"list-total"},rt={class:"toolbar-box"},ct={class:"list-box"},dt=["onClick"],_t={class:"library-info"},mt={class:"library-info-content"},pt={class:"library-title"},ut={class:"item-body"},ft={class:"library-desc"},bt={class:"item-footer"},vt={class:"library-size"},gt={class:"text-item"},ht={class:"text-item"},kt=["onClick"],yt=["onClick"],xt={__name:"index",setup(Ct){const{t:e}=V("views.database.database-list.index");z();const w=x(()=>[{title:e("page_tabs.library"),path:"/library/list"},{title:e("page_tabs.database"),path:"/database/list"},{title:e("page_tabs.document_extract_faq"),path:"/ai-extract-faq/list"},{title:e("page_tabs.trigger_statistics"),path:"/trigger-statics/list"}]),P=A();let{role_permission:T,role_type:D}=P;const $=x(()=>D==1||T.includes("FormCreate")),u=C([]),f=()=>{H({}).then(s=>{u.value=s.data||[]})};f();const g=C(null),h=(s={})=>{if(s.id){let a=y(s.id);if(!(a==4||a==2))return v.error(e("message.no_edit_permission"))}g.value.show(s)},S=s=>{window.open(`/#/database/details?form_id=${s.id}&name=${s.name}`,"_blank","noopener")},F=s=>{if(y(s.id)!=4)return v.error(e("message.no_delete_permission"));let c=3,_=et.confirm({title:e("delete_confirm.title"),icon:i(st),content:e("delete_confirm.content",{name:s.name}),okText:c+" "+e("delete_confirm.confirm_btn"),okType:"danger",okButtonProps:{disabled:!0},cancelText:e("delete_confirm.cancel_btn"),onOk(){I(s)},onCancel(){}}),d=setInterval(()=>{c==1?(_.update({okText:e("delete_confirm.confirm_btn"),okButtonProps:{disabled:!1}}),clearInterval(d),d=void 0):(c-=1,_.update({okText:c+" "+e("delete_confirm.confirm_btn"),okButtonProps:{disabled:!0}}))},1e3)},I=({id:s})=>{J({id:s}).then(()=>{v.success(e("message.delete_success")),f()})};return(s,a)=>{const c=X,_=E,d=Z,M=Y,N=tt;return m(),b(B,null,[t("div",ot,[i(K,{class:"mb-16",tabs:w.value,active:"/database/list"},null,8,["tabs"]),i(Q,{style:{"margin-bottom":"16px"},title:n(e)("usage_guide.title")},{default:r(()=>[t("div",null,[t("p",null,o(n(e)("usage_guide.point_1")),1),t("p",null,o(n(e)("usage_guide.point_2")),1)])]),_:1},8,["title"]),t("div",at,[t("div",nt,[t("div",it,[t("h3",lt,o(n(e)("list.all"))+" ("+o(u.value.length)+")",1)]),t("div",rt,[$.value?(m(),L(c,{key:0,type:"primary",onClick:a[0]||(a[0]=l=>h())},{icon:r(()=>[i(n(U))]),default:r(()=>[j(" "+o(n(e)("list.create_btn")),1)]),_:1})):R("",!0)])]),t("div",ct,[(m(!0),b(B,null,q(u.value,l=>(m(),b("div",{class:"list-item-wrapper",key:l.id},[t("div",{class:"list-item",onClick:p(k=>S(l),["stop"])},[t("div",_t,[a[3]||(a[3]=t("img",{class:"library-icon",src:W,alt:""},null,-1)),t("div",mt,[t("div",pt,o(l.name),1)])]),t("div",ut,[t("div",ft,o(l.description),1)]),t("div",bt,[t("div",vt,[t("span",gt,o(n(e)("item.data_count"))+o(l.entry_count)+o(n(e)("item.count_unit")),1),t("span",ht,o(n(e)("item.related_apps"))+o(l.robot_nums||0),1)]),t("div",{class:"action-box",onClick:a[2]||(a[2]=p(()=>{},["stop"]))},[i(N,null,{overlay:r(()=>[i(M,null,{default:r(()=>[i(d,null,{default:r(()=>[t("a",{href:"javascript:;",onClick:p(k=>h(l),["stop"])},o(n(e)("item.edit")),9,kt)]),_:2},1024),i(d,null,{default:r(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:k=>F(l)},o(n(e)("item.delete")),9,yt)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("div",{class:"action-item",onClick:a[1]||(a[1]=p(()=>{},["stop"]))},[i(_,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,dt)]))),128))])])]),i(G,{onOk:f,ref_key:"addDataSheetRef",ref:g},null,512)],64)}}},Nt=O(xt,[["__scopeId","data-v-f62506c3"]]);export{Nt as default};
