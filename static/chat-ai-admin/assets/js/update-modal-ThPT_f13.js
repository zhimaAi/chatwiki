import{d as k}from"./index-BsqRrb1q.js";/* empty css                                                                     */import{_ as w}from"../../index-C1Xsov4S.js";import{M as y,a as B}from"./ui-antd-D64OvTpt.js";import{f as a,e as M,a1 as N,_ as d,a2 as U,a5 as e,G as b,Y as _,a7 as s}from"./vue-chunks-DCKTEHpB.js";const z={class:"plugin-box"},I={class:"base-info"},O=["src"],S={class:"info"},V={class:"head"},C={class:"name zm-line1"},D={key:0,class:"version-tag"},E={key:1,class:"version-tag"},G={class:"source"},J={class:"desc zm-line2"},P={__name:"update-modal",emits:["ok"],setup(T,{expose:p,emit:m}){const f=m,o=a(!1),i=a(!1),t=a({}),c=a({}),l=a(null),u=M(()=>l.value?{title:"更新插件",text:"更新"}:{title:"安装插件",text:"安装"});function h(v,n,r=null){t.value=v,c.value=n,l.value=r,o.value=!0}function x(){i.value=!0,k({download_data:JSON.stringify([{url:c.value.download_url,version_id:c.value.id}])}).then(()=>{f("ok"),o.value=!1,B.success(u.value.text+"完成")}).finally(()=>{i.value=!1})}return p({show:h}),(v,n)=>{const r=y;return d(),N(r,{open:o.value,"onUpdate:open":n[0]||(n[0]=g=>o.value=g),title:u.value.title,"ok-text":u.value.text,"confirm-loading":i.value,onOk:x},{default:U(()=>[e("div",z,[e("div",I,[e("img",{class:"avatar",src:t.value.icon},null,8,O),e("div",S,[e("div",V,[e("span",C,[b(s(t.value.title)+" ",1),l.value?(d(),_("span",D,"v"+s(l.value.version)+" → v"+s(t.value.latest_version),1)):(d(),_("span",E,"v"+s(t.value.latest_version),1))])]),e("div",G,s(t.value.author),1)])]),e("div",J,s(t.value.description),1)])]),_:1},8,["open","title","ok-text","confirm-loading"])}}},H=w(P,[["__scopeId","data-v-c6e2994a"]]);export{H as U};
