import{M as N,z as c,d as r}from"./vue-chunks-BRsu9_To.js";import{Q as x,g as S,c as v}from"./index-L62dqcZj.js";const h={accessRestrictionsType:1,logo:"",pageTitle:"",navbarShow:2,lang:"zh-CN",pageStyle:{navbarBackgroundColor:"#2475FC"}},O={headTitle:"",headSubTitle:"Based on LLM, free and open-source.",headImage:"",lang:"zh-CN",pageStyle:{headBackgroundColor:"linear-gradient,to right,#2435E7,#01A0FB"},floatBtn:{displayType:1,buttonText:"快来聊聊吧~",buttonIcon:"",bottomMargin:32,rightMargin:32,showUnreadCount:1,showNewMessageTip:1}},C=N("robot",()=>{const _=c({id:void 0,robot_key:"",fast_command_switch:"",yunpc_fast_command_switch:"",app_id:-1,app_id_embed:-2,robot_name:"",robot_intro:"",robot_avatar:void 0,robot_avatar_url:"",use_model:void 0,model_config_id:"",optimize_question_dialogue_background:"",optimize_question_model_config_id:"",optimize_question_use_model:"",rerank_status:0,rerank_use_model:void 0,rerank_model_config_id:void 0,temperature:0,max_token:0,context_pair:0,top_k:1,similarity:0,search_type:1,prompt:"",prompt_struct:{},prompt_struct_default:{},prompt_type:1,library_ids:"",form_ids:"",work_flow_ids:"",welcomes:{content:"",question:[]},h5_domain:"",h5_website:"",pc_domain:"",chat_type:"",library_qa_direct_reply_score:"",library_qa_direct_reply_switch:"",mixture_qa_direct_reply_score:"",mixture_qa_direct_reply_switch:"",unknown_question_prompt:{content:"",question:[]},wechat_ip:"",push_aeskey:"",push_token:"",push_wechat_kefu:"",show_type:1,enable_question_optimize:"false",enable_question_guide:"false",enable_common_question:"false",common_question_list:[],answer_source_switch:"false",feedback_switch:1,application_type:0,sensitive_words_switch:0,question_guide_num:"",start_node_key:"",unknown_summary_status:1,unknown_summary_similarity:"",unknown_summary_use_model:"",unknown_summary_model_config_id:"",default_library_id:"",cache_config:{cache_switch:0,valid_time:86400},prompt_role_type:"0",enable_thinking:0}),n=c(JSON.parse(JSON.stringify(h))),s=c(JSON.parse(JSON.stringify(O))),b=e=>{let o=JSON.parse(e.welcomes);o.question=o.question.map(t=>({content:t}));let i={content:"",question:[]};e.unknown_question_prompt&&(i=JSON.parse(e.unknown_question_prompt)),i.question=i.question.map(t=>({content:t}));let f={};e.prompt_struct&&(f=JSON.parse(e.prompt_struct));let y={};if(e.prompt_struct_default&&(y=JSON.parse(e.prompt_struct_default)),_.id=e.id,_.robot_key=e.robot_key,_.fast_command_switch=e.fast_command_switch,_.yunpc_fast_command_switch=e.yunpc_fast_command_switch,_.robot_name=e.robot_name,_.robot_intro=e.robot_intro,_.robot_avatar_url=e.robot_avatar,_.use_model=e.use_model,_.model_config_id=e.model_config_id,_.optimize_question_dialogue_background=e.optimize_question_dialogue_background,_.optimize_question_model_config_id=e.optimize_question_model_config_id,_.optimize_question_use_model=e.optimize_question_use_model,_.rerank_status=Number(e.rerank_status),_.rerank_use_model=e.rerank_use_model,_.rerank_model_config_id=e.rerank_model_config_id,_.prompt=e.prompt,_.prompt_struct=f,_.prompt_struct_default=y,_.prompt_type=+e.prompt_type,_.library_ids=e.library_ids||"",_.form_ids=e.form_ids||"",_.work_flow_ids=e.work_flow_ids||"",_.welcomes=o,_.unknown_question_prompt=i,_.show_type=Number(e.show_type),_.temperature=Number(e.temperature),_.max_token=Number(e.max_token),_.context_pair=Number(e.context_pair),_.top_k=Number(e.top_k),_.similarity=Number(e.similarity),_.search_type=Number(e.search_type),_.think_switch=Number(e.think_switch),_.wechat_ip=e.wechat_ip,_.push_token=e.push_token,_.push_aeskey=e.push_aeskey,_.push_wechat_kefu=e.push_wechat_kefu,_.pc_domain=e.pc_domain,_.chat_type=e.chat_type,_.library_qa_direct_reply_score=e.library_qa_direct_reply_score,_.library_qa_direct_reply_switch=e.library_qa_direct_reply_switch,_.mixture_qa_direct_reply_score=e.mixture_qa_direct_reply_score,_.mixture_qa_direct_reply_switch=e.mixture_qa_direct_reply_switch,_.h5_domain=e.h5_domain,_.h5_website=e.h5_domain+"/#/chat?robot_key="+e.robot_key,_.enable_question_optimize=e.enable_question_optimize,_.enable_question_guide=e.enable_question_guide,_.enable_common_question=e.enable_common_question,_.common_question_list=e.common_question_list,_.answer_source_switch=e.answer_source_switch,_.feedback_switch=+e.feedback_switch,_.application_type=e.application_type,_.sensitive_words_switch=+e.sensitive_words_switch,_.question_guide_num=+e.question_guide_num,_.enable_thinking=+e.enable_thinking||0,_.start_node_key=e.start_node_key,_.default_library_id=e.default_library_id,_.unknown_summary_status=e.unknown_summary_status,_.unknown_summary_similarity=e.unknown_summary_similarity,_.unknown_summary_use_model=e.unknown_summary_use_model,_.unknown_summary_model_config_id=e.unknown_summary_model_config_id,e.cache_config){let t={};try{t=typeof e.cache_config=="string"?JSON.parse(e.cache_config):e.cache_config}catch{t={}}_.cache_config={...t}}_.prompt_role_type=e.prompt_role_type||"0",e.external_config_h5!==""?Object.assign(n,JSON.parse(e.external_config_h5)):(Object.assign(n,JSON.parse(JSON.stringify(h))),n.pageTitle=_.robot_name,n.logo=_.robot_avatar_url),e.external_config_pc!==""?Object.assign(s,JSON.parse(e.external_config_pc)):(s.headTitle=_.robot_name,s.headImage=_.robot_avatar_url)},d=async e=>{const o=await x({id:e});if(o.code!==0)return!1;o.data.library_ids&&(o.data.library_ids=o.data.library_ids.split(",").filter(Boolean).join(","));let i=o.data;return b(i),o},u=r([]),g=async e=>{u.value=e||[]},m=r({}),w=e=>{m.value=e},p=r([]),k=e=>{p.value=e},l=r([]),q=()=>{S().then(e=>{l.value=e.data||[]})},a=r([]);return{robotInfo:_,getRobot:d,external_config_h5:n,external_config_pc:s,quickCommandLists:u,setQuickCommand:g,draftSaveTime:m,setDrafSaveTime:w,modelList:p,setModelList:k,robotList:l,getRobotLists:q,robotGroupList:a,getGroupList:()=>{v().then(e=>{a.value=e.data||[]})}}});export{C as u};
