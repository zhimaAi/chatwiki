import{e as i,ab as S,l as e,Y as l,_ as s,k as g,a2 as b,F as V,a9 as q,a1 as k,ae as w,G as I,a7 as A,u as K,af as h,d as T,a5 as u,ad as Y}from"./vue-chunks-Ci-XTWEs.js";import{b as L,aA as R,h as E,d as n,at as F,bg as O}from"../../index-CPkdGIiL.js";import{c as z,b as D}from"./ui-antd-Bw8cEW5z.js";import"./utils-ChQO-_r6.js";const G={class:"left-menu-box"},P={key:0,class:"sync-tag run"},U={key:1,class:"sync-tag fail"},j={__name:"left-menus",emits:["changeMenu"],setup(a,{emit:d}){const t=R(),r=i(()=>t.graph_switch),m=E(),p=d,_=S(),y=_.query,v=i(()=>m.getRobotNums),f=i(()=>[_.path.split("/")[3]]),$=i(()=>t.sync_official_content_status),x=i(()=>{let c=[{key:"knowledge-document",id:"knowledge-document",icon:()=>e("span",{},[e(n,{name:"doc-menu-icon",class:"menu-icon"}),e(n,{name:"doc-active-menu-icon",class:"menu-icon-active"})]),label:t.type==2?"知识管理":"知识库文档",title:"知识库文档",path:"/library/details/knowledge-document",syncStatus:Number($.value)},{key:"knowledge-graph",id:"knowledge-graph",hidden:r.value==0,icon:()=>e("span",{},[e(n,{name:"doc-menu-icon",class:"menu-icon"}),e(n,{name:"doc-active-menu-icon",class:"menu-icon-active"})]),label:"知识图谱",title:"知识图谱",path:"/library/details/knowledge-graph"},{key:"categary-manage",id:"categary-manage",icon:()=>e("span",{},[e(n,{name:"doc-menu-icon",class:"menu-icon"}),e(n,{name:"doc-active-menu-icon",class:"menu-icon-active"})]),label:"精选",title:"精选",path:"/library/details/categary-manage"},{key:"recall-testing",id:"recall-testing",icon:()=>e("span",{},[e(n,{name:"test-menu-icon",class:"menu-icon"}),e(n,{name:"test-active-menu-icon",class:"menu-icon-active"})]),label:"召回测试",title:"召回测试",path:"/library/details/recall-testing"},{key:"knowledge-config",id:"knowledge-config",icon:()=>e("span",{},[e(n,{name:"knowledge-config-icon",class:"menu-icon"}),e(n,{name:"knowledge-config-active-icon",class:"menu-icon-active"})]),label:"知识库配置",title:"知识库配置",path:"/library/details/knowledge-config"},{key:"related-robots",id:"related-robots",icon:()=>e("span",{},[e(n,{name:"knowledge-config-icon",class:"menu-icon"}),e(n,{name:"knowledge-config-active-icon",class:"menu-icon-active"})]),label:`关联机器人${v.value>0?` (${v.value})`:""}`,path:"/library/details/related-robots"}];return t.type==2?(c.push({key:"import-record",id:"import-record",icon:()=>e("span",{},[e(n,{name:"doc-menu-icon",class:"menu-icon"}),e(n,{name:"doc-active-menu-icon",class:"menu-icon-active"})]),label:"导入记录",title:"导入记录",path:"/library/details/import-record"}),c.push({key:"export-record",id:"export-record",icon:()=>e("span",{},[e(n,{name:"doc-menu-icon",class:"menu-icon"}),e(n,{name:"doc-active-menu-icon",class:"menu-icon-active"})]),label:"导出记录",title:"导出记录",path:"/library/details/export-record"})):c.push({key:"recycle-bin-record",id:"recycle-bin-record",icon:()=>e("span",{},[e(n,{name:"doc-menu-icon",class:"menu-icon"}),e(n,{name:"doc-active-menu-icon",class:"menu-icon-active"})]),label:"回收站",title:"回收站",path:"/library/details/recycle-bin-record"}),c}),M=({item:c})=>{f.value.includes(c.id)||p("changeMenu",c)};return(c,se)=>{const N=z,C=h("router-link"),B=D;return s(),l("div",G,[g(B,{class:"left-menu",selectedKeys:f.value,onClick:M},{default:b(()=>[(s(!0),l(V,null,q(x.value,o=>(s(),k(C,{class:"default-color",to:{path:o.path,query:K(y)},key:o.key},{default:b(()=>[o.hidden?w("",!0):(s(),k(N,{icon:o.icon,path:o.path,key:o.key},{default:b(()=>[I(A(o.label)+" ",1),o.syncStatus==2?(s(),l("span",P,"同步中")):o.syncStatus==3?(s(),l("span",U,"同步失败")):w("",!0)]),_:2},1032,["icon","path"]))]),_:2},1032,["to"]))),128))]),_:1},8,["selectedKeys"])])}}},H=L(j,[["__scopeId","data-v-c1b1c1c5"]]),J=T({components:{LeftMenus:H},async beforeRouteEnter(a,d,t){let r=O(a.query.id);if(r==0||r==1){t("/no-permission");return}t()},setup(){const a=R(),{getLibraryInfo:d}=a,t=S();t.query;const r=i(()=>t.meta.cuStyle),m=i(()=>a.library_name),p=i(()=>a.avatar);return{cuStyle:r,LIBRARY_NORMAL_AVATAR:F,rotue:t,library_name:m,avatar:p}}}),Q={class:"details-library-page"},W={class:"between-content-box"},X={class:"layout-left"},Z={class:"library-name-box"},ee=["src"],ne={class:"name"},ae={class:"left-menu-wrapper"},te={key:0,style:{flex:"1"}};function oe(a,d,t,r,m,p){const _=h("LeftMenus"),y=h("router-view");return s(),l("div",Q,[u("div",W,[u("div",X,[u("div",Z,[u("img",{class:"avatar",src:a.avatar||a.LIBRARY_NORMAL_AVATAR,alt:""},null,8,ee),u("div",ne,A(a.library_name),1)]),u("div",ae,[g(_)])]),a.cuStyle?(s(),l("div",te,[g(y)])):(s(),l("div",{key:1,class:Y(["right-content-box",["page-"+a.rotue.name]])},[g(y)],2))])])}const ue=L(J,[["render",oe],["__scopeId","data-v-94a24230"]]);export{ue as default};
