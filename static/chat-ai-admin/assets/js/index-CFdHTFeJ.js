var Kn=Object.defineProperty;var Wn=(l,i,s)=>i in l?Kn(l,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[i]=s;var le=(l,i,s)=>Wn(l,typeof i!="symbol"?i+"":i,s);import{f as Y,Y as X,_ as K,k as g,K as bn,a5 as u,ae as ne,a3 as Le,a7 as ee,a2 as E,o as qe,ab as Jn,ag as De,w as $e,r as ue,u as te,G as Q,a4 as qt,a1 as oe,J as he,e as pe,aa as Yn,F as Te,a9 as Fe,ad as Ze,c as Se,p as Gn,ah as Qn}from"./vue-chunks-BSjLwu6d.js";import{u as Oe}from"./robot-DwqmFfQP.js";import{b as ae,af as Xn,d as Ve,al as xe}from"../../index-0SFcfYGN.js";import{b as Zn,I as ge,F as _e,a9 as eo,ap as to,X as wn,B as ve,a8 as no,ab as oo,e as Ee,q as Cn,R as kn,Q as $n,M as me,a as se,H as je,p as ao,u as At,v as St,ay as so,z as An,O as io,be as ro,k as He}from"./ui-antd-BIopZvX3.js";import{x as lo,y as co,z as uo,A as po,B as fo,C as Sn,D as Et,E as Bt,F as It}from"./index-B4oOBcCh.js";import{u as En}from"./index-1KR-OfoX.js";import{C as Bn}from"./cu-upload-5avvzeMk.js";import{i as ho}from"./validate-8MtiUsxW.js";import{d as _o}from"./vuedraggable.umd-CLoFUBnR.js";import"./utils-BMKRjDTh.js";const mo={class:"top-menu-box"},go={__name:"top-meun",props:{value:{type:String,default:""}},emits:["change","update:value"],setup(l,{emit:i}){const s=i,e=Y([l.value]),t=Y([{key:"WebAPP",id:"WebAPP",label:"WebAPP",title:"WebAPP"},{key:"EmbedWebsite",id:"EmbedWebsite",label:"嵌入网站",title:"嵌入网站"},{key:"WeChatOfficialAccount",id:"WeChatOfficialAccount",label:"微信公众号",title:"微信公众号"},{key:"WeChatMiniProgram",id:"WeChatMiniProgram",label:"微信小程序",title:"微信小程序"},{key:"WeChatCustomerService",id:"WeChatCustomerService",label:"微信客服",title:"微信客服"}]),o=({item:c})=>{e.value.includes(c.id)||(s("update:value",c.id),s("change",c))};return(c,r)=>{const p=Zn;return K(),X("div",mo,[g(p,{class:"top-menu",items:t.value,selectedKeys:e.value,"onUpdate:selectedKeys":r[0]||(r[0]=k=>e.value=k),mode:"horizontal",onClick:o},null,8,["items","selectedKeys"])])}}},vo=ae(go,[["__scopeId","data-v-040b790f"]]);var ke={},et,Dt;function yo(){return Dt||(Dt=1,et=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),et}var tt={},fe={},Ft;function ye(){if(Ft)return fe;Ft=1;let l;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return fe.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},fe.getSymbolTotalCodewords=function(n){return i[n]},fe.getBCHDigit=function(s){let n=0;for(;s!==0;)n++,s>>>=1;return n},fe.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');l=n},fe.isKanjiModeEnabled=function(){return typeof l<"u"},fe.toSJIS=function(n){return l(n)},fe}var nt={},Ot;function Pt(){return Ot||(Ot=1,function(l){l.L={bit:1},l.M={bit:0},l.Q={bit:3},l.H={bit:2};function i(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return l.L;case"m":case"medium":return l.M;case"q":case"quartile":return l.Q;case"h":case"high":return l.H;default:throw new Error("Unknown EC Level: "+s)}}l.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},l.from=function(n,e){if(l.isValid(n))return n;try{return i(n)}catch{return e}}}(nt)),nt}var ot,Vt;function bo(){if(Vt)return ot;Vt=1;function l(){this.buffer=[],this.length=0}return l.prototype={get:function(i){const s=Math.floor(i/8);return(this.buffer[s]>>>7-i%8&1)===1},put:function(i,s){for(let n=0;n<s;n++)this.putBit((i>>>s-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),i&&(this.buffer[s]|=128>>>this.length%8),this.length++}},ot=l,ot}var at,jt;function wo(){if(jt)return at;jt=1;function l(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return l.prototype.set=function(i,s,n,e){const t=i*this.size+s;this.data[t]=n,e&&(this.reservedBit[t]=!0)},l.prototype.get=function(i,s){return this.data[i*this.size+s]},l.prototype.xor=function(i,s,n){this.data[i*this.size+s]^=n},l.prototype.isReserved=function(i,s){return this.reservedBit[i*this.size+s]},at=l,at}var st={},Ht;function Co(){return Ht||(Ht=1,function(l){const i=ye().getSymbolSize;l.getRowColCoords=function(n){if(n===1)return[];const e=Math.floor(n/7)+2,t=i(n),o=t===145?26:Math.ceil((t-13)/(2*e-2))*2,c=[t-7];for(let r=1;r<e-1;r++)c[r]=c[r-1]-o;return c.push(6),c.reverse()},l.getPositions=function(n){const e=[],t=l.getRowColCoords(n),o=t.length;for(let c=0;c<o;c++)for(let r=0;r<o;r++)c===0&&r===0||c===0&&r===o-1||c===o-1&&r===0||e.push([t[c],t[r]]);return e}}(st)),st}var it={},zt;function ko(){if(zt)return it;zt=1;const l=ye().getSymbolSize,i=7;return it.getPositions=function(n){const e=l(n);return[[0,0],[e-i,0],[0,e-i]]},it}var rt={},Kt;function $o(){return Kt||(Kt=1,function(l){l.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};l.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},l.from=function(e){return l.isValid(e)?parseInt(e,10):void 0},l.getPenaltyN1=function(e){const t=e.size;let o=0,c=0,r=0,p=null,k=null;for(let v=0;v<t;v++){c=r=0,p=k=null;for(let C=0;C<t;C++){let w=e.get(v,C);w===p?c++:(c>=5&&(o+=i.N1+(c-5)),p=w,c=1),w=e.get(C,v),w===k?r++:(r>=5&&(o+=i.N1+(r-5)),k=w,r=1)}c>=5&&(o+=i.N1+(c-5)),r>=5&&(o+=i.N1+(r-5))}return o},l.getPenaltyN2=function(e){const t=e.size;let o=0;for(let c=0;c<t-1;c++)for(let r=0;r<t-1;r++){const p=e.get(c,r)+e.get(c,r+1)+e.get(c+1,r)+e.get(c+1,r+1);(p===4||p===0)&&o++}return o*i.N2},l.getPenaltyN3=function(e){const t=e.size;let o=0,c=0,r=0;for(let p=0;p<t;p++){c=r=0;for(let k=0;k<t;k++)c=c<<1&2047|e.get(p,k),k>=10&&(c===1488||c===93)&&o++,r=r<<1&2047|e.get(k,p),k>=10&&(r===1488||r===93)&&o++}return o*i.N3},l.getPenaltyN4=function(e){let t=0;const o=e.data.length;for(let r=0;r<o;r++)t+=e.data[r];return Math.abs(Math.ceil(t*100/o/5)-10)*i.N4};function s(n,e,t){switch(n){case l.Patterns.PATTERN000:return(e+t)%2===0;case l.Patterns.PATTERN001:return e%2===0;case l.Patterns.PATTERN010:return t%3===0;case l.Patterns.PATTERN011:return(e+t)%3===0;case l.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case l.Patterns.PATTERN101:return e*t%2+e*t%3===0;case l.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case l.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}l.applyMask=function(e,t){const o=t.size;for(let c=0;c<o;c++)for(let r=0;r<o;r++)t.isReserved(r,c)||t.xor(r,c,s(e,r,c))},l.getBestMask=function(e,t){const o=Object.keys(l.Patterns).length;let c=0,r=1/0;for(let p=0;p<o;p++){t(p),l.applyMask(p,e);const k=l.getPenaltyN1(e)+l.getPenaltyN2(e)+l.getPenaltyN3(e)+l.getPenaltyN4(e);l.applyMask(p,e),k<r&&(r=k,c=p)}return c}}(rt)),rt}var Ue={},Wt;function In(){if(Wt)return Ue;Wt=1;const l=Pt(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ue.getBlocksCount=function(e,t){switch(t){case l.L:return i[(e-1)*4+0];case l.M:return i[(e-1)*4+1];case l.Q:return i[(e-1)*4+2];case l.H:return i[(e-1)*4+3];default:return}},Ue.getTotalCodewordsCount=function(e,t){switch(t){case l.L:return s[(e-1)*4+0];case l.M:return s[(e-1)*4+1];case l.Q:return s[(e-1)*4+2];case l.H:return s[(e-1)*4+3];default:return}},Ue}var lt={},Re={},Jt;function Ao(){if(Jt)return Re;Jt=1;const l=new Uint8Array(512),i=new Uint8Array(256);return function(){let n=1;for(let e=0;e<255;e++)l[e]=n,i[n]=e,n<<=1,n&256&&(n^=285);for(let e=255;e<512;e++)l[e]=l[e-255]}(),Re.log=function(n){if(n<1)throw new Error("log("+n+")");return i[n]},Re.exp=function(n){return l[n]},Re.mul=function(n,e){return n===0||e===0?0:l[i[n]+i[e]]},Re}var Yt;function So(){return Yt||(Yt=1,function(l){const i=Ao();l.mul=function(n,e){const t=new Uint8Array(n.length+e.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<e.length;c++)t[o+c]^=i.mul(n[o],e[c]);return t},l.mod=function(n,e){let t=new Uint8Array(n);for(;t.length-e.length>=0;){const o=t[0];for(let r=0;r<e.length;r++)t[r]^=i.mul(e[r],o);let c=0;for(;c<t.length&&t[c]===0;)c++;t=t.slice(c)}return t},l.generateECPolynomial=function(n){let e=new Uint8Array([1]);for(let t=0;t<n;t++)e=l.mul(e,new Uint8Array([1,i.exp(t)]));return e}}(lt)),lt}var ct,Gt;function Eo(){if(Gt)return ct;Gt=1;const l=So();function i(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(n){this.degree=n,this.genPoly=l.generateECPolynomial(this.degree)},i.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(n.length+this.degree);e.set(n);const t=l.mod(e,this.genPoly),o=this.degree-t.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(t,o),c}return t},ct=i,ct}var ut={},dt={},pt={},Qt;function Pn(){return Qt||(Qt=1,pt.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),pt}var de={},Xt;function Rn(){if(Xt)return de;Xt=1;const l="[0-9]+",i="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;de.KANJI=new RegExp(s,"g"),de.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),de.BYTE=new RegExp(n,"g"),de.NUMERIC=new RegExp(l,"g"),de.ALPHANUMERIC=new RegExp(i,"g");const e=new RegExp("^"+s+"$"),t=new RegExp("^"+l+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return de.testKanji=function(r){return e.test(r)},de.testNumeric=function(r){return t.test(r)},de.testAlphanumeric=function(r){return o.test(r)},de}var Zt;function be(){return Zt||(Zt=1,function(l){const i=Pn(),s=Rn();l.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},l.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},l.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},l.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},l.MIXED={bit:-1},l.getCharCountIndicator=function(t,o){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!i.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?t.ccBits[0]:o<27?t.ccBits[1]:t.ccBits[2]},l.getBestModeForData=function(t){return s.testNumeric(t)?l.NUMERIC:s.testAlphanumeric(t)?l.ALPHANUMERIC:s.testKanji(t)?l.KANJI:l.BYTE},l.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},l.isValid=function(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return l.NUMERIC;case"alphanumeric":return l.ALPHANUMERIC;case"kanji":return l.KANJI;case"byte":return l.BYTE;default:throw new Error("Unknown mode: "+e)}}l.from=function(t,o){if(l.isValid(t))return t;try{return n(t)}catch{return o}}}(dt)),dt}var en;function Bo(){return en||(en=1,function(l){const i=ye(),s=In(),n=Pt(),e=be(),t=Pn(),o=7973,c=i.getBCHDigit(o);function r(C,w,x){for(let O=1;O<=40;O++)if(w<=l.getCapacity(O,x,C))return O}function p(C,w){return e.getCharCountIndicator(C,w)+4}function k(C,w){let x=0;return C.forEach(function(O){const N=p(O.mode,w);x+=N+O.getBitsLength()}),x}function v(C,w){for(let x=1;x<=40;x++)if(k(C,x)<=l.getCapacity(x,w,e.MIXED))return x}l.from=function(w,x){return t.isValid(w)?parseInt(w,10):x},l.getCapacity=function(w,x,O){if(!t.isValid(w))throw new Error("Invalid QR Code version");typeof O>"u"&&(O=e.BYTE);const N=i.getSymbolTotalCodewords(w),P=s.getTotalCodewordsCount(w,x),V=(N-P)*8;if(O===e.MIXED)return V;const M=V-p(O,w);switch(O){case e.NUMERIC:return Math.floor(M/10*3);case e.ALPHANUMERIC:return Math.floor(M/11*2);case e.KANJI:return Math.floor(M/13);case e.BYTE:default:return Math.floor(M/8)}},l.getBestVersionForData=function(w,x){let O;const N=n.from(x,n.M);if(Array.isArray(w)){if(w.length>1)return v(w,N);if(w.length===0)return 1;O=w[0]}else O=w;return r(O.mode,O.getLength(),N)},l.getEncodedBits=function(w){if(!t.isValid(w)||w<7)throw new Error("Invalid QR Code version");let x=w<<12;for(;i.getBCHDigit(x)-c>=0;)x^=o<<i.getBCHDigit(x)-c;return w<<12|x}}(ut)),ut}var ft={},tn;function Io(){if(tn)return ft;tn=1;const l=ye(),i=1335,s=21522,n=l.getBCHDigit(i);return ft.getEncodedBits=function(t,o){const c=t.bit<<3|o;let r=c<<10;for(;l.getBCHDigit(r)-n>=0;)r^=i<<l.getBCHDigit(r)-n;return(c<<10|r)^s},ft}var ht={},_t,nn;function Po(){if(nn)return _t;nn=1;const l=be();function i(s){this.mode=l.NUMERIC,this.data=s.toString()}return i.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){let e,t,o;for(e=0;e+3<=this.data.length;e+=3)t=this.data.substr(e,3),o=parseInt(t,10),n.put(o,10);const c=this.data.length-e;c>0&&(t=this.data.substr(e),o=parseInt(t,10),n.put(o,c*3+1))},_t=i,_t}var mt,on;function Ro(){if(on)return mt;on=1;const l=be(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(n){this.mode=l.ALPHANUMERIC,this.data=n}return s.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=i.indexOf(this.data[t])*45;o+=i.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},mt=s,mt}var gt,an;function To(){if(an)return gt;an=1;const l=be();function i(s){this.mode=l.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return i.getBitsLength=function(n){return n*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(s){for(let n=0,e=this.data.length;n<e;n++)s.put(this.data[n],8)},gt=i,gt}var vt,sn;function xo(){if(sn)return vt;sn=1;const l=be(),i=ye();function s(n){this.mode=l.KANJI,this.data=n}return s.getBitsLength=function(e){return e*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=i.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}},vt=s,vt}var yt={exports:{}},rn;function Mo(){return rn||(rn=1,function(l){var i={single_source_shortest_paths:function(s,n,e){var t={},o={};o[n]=0;var c=i.PriorityQueue.make();c.push(n,0);for(var r,p,k,v,C,w,x,O,N;!c.empty();){r=c.pop(),p=r.value,v=r.cost,C=s[p]||{};for(k in C)C.hasOwnProperty(k)&&(w=C[k],x=v+w,O=o[k],N=typeof o[k]>"u",(N||O>x)&&(o[k]=x,c.push(k,x),t[k]=p))}if(typeof e<"u"&&typeof o[e]>"u"){var P=["Could not find a path from ",n," to ",e,"."].join("");throw new Error(P)}return t},extract_shortest_path_from_predecessor_list:function(s,n){for(var e=[],t=n;t;)e.push(t),s[t],t=s[t];return e.reverse(),e},find_path:function(s,n,e){var t=i.single_source_shortest_paths(s,n,e);return i.extract_shortest_path_from_predecessor_list(t,e)},PriorityQueue:{make:function(s){var n=i.PriorityQueue,e={},t;s=s||{};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.queue=[],e.sorter=s.sorter||n.default_sorter,e},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var e={value:s,cost:n};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};l.exports=i}(yt)),yt.exports}var ln;function No(){return ln||(ln=1,function(l){const i=be(),s=Po(),n=Ro(),e=To(),t=xo(),o=Rn(),c=ye(),r=Mo();function p(P){return unescape(encodeURIComponent(P)).length}function k(P,V,M){const B=[];let U;for(;(U=P.exec(M))!==null;)B.push({data:U[0],index:U.index,mode:V,length:U[0].length});return B}function v(P){const V=k(o.NUMERIC,i.NUMERIC,P),M=k(o.ALPHANUMERIC,i.ALPHANUMERIC,P);let B,U;return c.isKanjiModeEnabled()?(B=k(o.BYTE,i.BYTE,P),U=k(o.KANJI,i.KANJI,P)):(B=k(o.BYTE_KANJI,i.BYTE,P),U=[]),V.concat(M,B,U).sort(function(q,L){return q.index-L.index}).map(function(q){return{data:q.data,mode:q.mode,length:q.length}})}function C(P,V){switch(V){case i.NUMERIC:return s.getBitsLength(P);case i.ALPHANUMERIC:return n.getBitsLength(P);case i.KANJI:return t.getBitsLength(P);case i.BYTE:return e.getBitsLength(P)}}function w(P){return P.reduce(function(V,M){const B=V.length-1>=0?V[V.length-1]:null;return B&&B.mode===M.mode?(V[V.length-1].data+=M.data,V):(V.push(M),V)},[])}function x(P){const V=[];for(let M=0;M<P.length;M++){const B=P[M];switch(B.mode){case i.NUMERIC:V.push([B,{data:B.data,mode:i.ALPHANUMERIC,length:B.length},{data:B.data,mode:i.BYTE,length:B.length}]);break;case i.ALPHANUMERIC:V.push([B,{data:B.data,mode:i.BYTE,length:B.length}]);break;case i.KANJI:V.push([B,{data:B.data,mode:i.BYTE,length:p(B.data)}]);break;case i.BYTE:V.push([{data:B.data,mode:i.BYTE,length:p(B.data)}])}}return V}function O(P,V){const M={},B={start:{}};let U=["start"];for(let m=0;m<P.length;m++){const q=P[m],L=[];for(let R=0;R<q.length;R++){const S=q[R],f=""+m+R;L.push(f),M[f]={node:S,lastCount:0},B[f]={};for(let D=0;D<U.length;D++){const I=U[D];M[I]&&M[I].node.mode===S.mode?(B[I][f]=C(M[I].lastCount+S.length,S.mode)-C(M[I].lastCount,S.mode),M[I].lastCount+=S.length):(M[I]&&(M[I].lastCount=S.length),B[I][f]=C(S.length,S.mode)+4+i.getCharCountIndicator(S.mode,V))}}U=L}for(let m=0;m<U.length;m++)B[U[m]].end=0;return{map:B,table:M}}function N(P,V){let M;const B=i.getBestModeForData(P);if(M=i.from(V,B),M!==i.BYTE&&M.bit<B.bit)throw new Error('"'+P+'" cannot be encoded with mode '+i.toString(M)+`.
 Suggested mode is: `+i.toString(B));switch(M===i.KANJI&&!c.isKanjiModeEnabled()&&(M=i.BYTE),M){case i.NUMERIC:return new s(P);case i.ALPHANUMERIC:return new n(P);case i.KANJI:return new t(P);case i.BYTE:return new e(P)}}l.fromArray=function(V){return V.reduce(function(M,B){return typeof B=="string"?M.push(N(B,null)):B.data&&M.push(N(B.data,B.mode)),M},[])},l.fromString=function(V,M){const B=v(V,c.isKanjiModeEnabled()),U=x(B),m=O(U,M),q=r.find_path(m.map,"start","end"),L=[];for(let R=1;R<q.length-1;R++)L.push(m.table[q[R]].node);return l.fromArray(w(L))},l.rawSplit=function(V){return l.fromArray(v(V,c.isKanjiModeEnabled()))}}(ht)),ht}var cn;function Lo(){if(cn)return tt;cn=1;const l=ye(),i=Pt(),s=bo(),n=wo(),e=Co(),t=ko(),o=$o(),c=In(),r=Eo(),p=Bo(),k=Io(),v=be(),C=No();function w(m,q){const L=m.size,R=t.getPositions(q);for(let S=0;S<R.length;S++){const f=R[S][0],D=R[S][1];for(let I=-1;I<=7;I++)if(!(f+I<=-1||L<=f+I))for(let z=-1;z<=7;z++)D+z<=-1||L<=D+z||(I>=0&&I<=6&&(z===0||z===6)||z>=0&&z<=6&&(I===0||I===6)||I>=2&&I<=4&&z>=2&&z<=4?m.set(f+I,D+z,!0,!0):m.set(f+I,D+z,!1,!0))}}function x(m){const q=m.size;for(let L=8;L<q-8;L++){const R=L%2===0;m.set(L,6,R,!0),m.set(6,L,R,!0)}}function O(m,q){const L=e.getPositions(q);for(let R=0;R<L.length;R++){const S=L[R][0],f=L[R][1];for(let D=-2;D<=2;D++)for(let I=-2;I<=2;I++)D===-2||D===2||I===-2||I===2||D===0&&I===0?m.set(S+D,f+I,!0,!0):m.set(S+D,f+I,!1,!0)}}function N(m,q){const L=m.size,R=p.getEncodedBits(q);let S,f,D;for(let I=0;I<18;I++)S=Math.floor(I/3),f=I%3+L-8-3,D=(R>>I&1)===1,m.set(S,f,D,!0),m.set(f,S,D,!0)}function P(m,q,L){const R=m.size,S=k.getEncodedBits(q,L);let f,D;for(f=0;f<15;f++)D=(S>>f&1)===1,f<6?m.set(f,8,D,!0):f<8?m.set(f+1,8,D,!0):m.set(R-15+f,8,D,!0),f<8?m.set(8,R-f-1,D,!0):f<9?m.set(8,15-f-1+1,D,!0):m.set(8,15-f-1,D,!0);m.set(R-8,8,1,!0)}function V(m,q){const L=m.size;let R=-1,S=L-1,f=7,D=0;for(let I=L-1;I>0;I-=2)for(I===6&&I--;;){for(let z=0;z<2;z++)if(!m.isReserved(S,I-z)){let Z=!1;D<q.length&&(Z=(q[D]>>>f&1)===1),m.set(S,I-z,Z),f--,f===-1&&(D++,f=7)}if(S+=R,S<0||L<=S){S-=R,R=-R;break}}}function M(m,q,L){const R=new s;L.forEach(function(z){R.put(z.mode.bit,4),R.put(z.getLength(),v.getCharCountIndicator(z.mode,m)),z.write(R)});const S=l.getSymbolTotalCodewords(m),f=c.getTotalCodewordsCount(m,q),D=(S-f)*8;for(R.getLengthInBits()+4<=D&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const I=(D-R.getLengthInBits())/8;for(let z=0;z<I;z++)R.put(z%2?17:236,8);return B(R,m,q)}function B(m,q,L){const R=l.getSymbolTotalCodewords(q),S=c.getTotalCodewordsCount(q,L),f=R-S,D=c.getBlocksCount(q,L),I=R%D,z=D-I,Z=Math.floor(R/D),T=Math.floor(f/D),a=T+1,h=Z-T,_=new r(h);let $=0;const d=new Array(D),y=new Array(D);let b=0;const A=new Uint8Array(m.buffer);for(let J=0;J<D;J++){const G=J<z?T:a;d[J]=A.slice($,$+G),y[J]=_.encode(d[J]),$+=G,b=Math.max(b,G)}const F=new Uint8Array(R);let j=0,H,W;for(H=0;H<b;H++)for(W=0;W<D;W++)H<d[W].length&&(F[j++]=d[W][H]);for(H=0;H<h;H++)for(W=0;W<D;W++)F[j++]=y[W][H];return F}function U(m,q,L,R){let S;if(Array.isArray(m))S=C.fromArray(m);else if(typeof m=="string"){let Z=q;if(!Z){const T=C.rawSplit(m);Z=p.getBestVersionForData(T,L)}S=C.fromString(m,Z||40)}else throw new Error("Invalid data");const f=p.getBestVersionForData(S,L);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!q)q=f;else if(q<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);const D=M(q,L,S),I=l.getSymbolSize(q),z=new n(I);return w(z,q),x(z),O(z,q),P(z,L,0),q>=7&&N(z,q),V(z,D),isNaN(R)&&(R=o.getBestMask(z,P.bind(null,z,L))),o.applyMask(R,z),P(z,L,R),{modules:z,version:q,errorCorrectionLevel:L,maskPattern:R,segments:S}}return tt.create=function(q,L){if(typeof q>"u"||q==="")throw new Error("No input text");let R=i.M,S,f;return typeof L<"u"&&(R=i.from(L.errorCorrectionLevel,i.M),S=p.from(L.version),f=o.from(L.maskPattern),L.toSJISFunc&&l.setToSJISFunction(L.toSJISFunc)),U(q,S,R,f)},tt}var bt={},wt={},un;function Tn(){return un||(un=1,function(l){function i(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(t){return[t,t]}))),n.length===6&&n.push("F","F");const e=parseInt(n.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+n.slice(0,6).join("")}}l.getOptions=function(n){n||(n={}),n.color||(n.color={});const e=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,t=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:t,scale:t?4:o,margin:e,color:{dark:i(n.color.dark||"#000000ff"),light:i(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},l.getScale=function(n,e){return e.width&&e.width>=n+e.margin*2?e.width/(n+e.margin*2):e.scale},l.getImageWidth=function(n,e){const t=l.getScale(n,e);return Math.floor((n+e.margin*2)*t)},l.qrToImageData=function(n,e,t){const o=e.modules.size,c=e.modules.data,r=l.getScale(o,t),p=Math.floor((o+t.margin*2)*r),k=t.margin*r,v=[t.color.light,t.color.dark];for(let C=0;C<p;C++)for(let w=0;w<p;w++){let x=(C*p+w)*4,O=t.color.light;if(C>=k&&w>=k&&C<p-k&&w<p-k){const N=Math.floor((C-k)/r),P=Math.floor((w-k)/r);O=v[c[N*o+P]?1:0]}n[x++]=O.r,n[x++]=O.g,n[x++]=O.b,n[x]=O.a}}}(wt)),wt}var dn;function Uo(){return dn||(dn=1,function(l){const i=Tn();function s(e,t,o){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=o,t.width=o,t.style.height=o+"px",t.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}l.render=function(t,o,c){let r=c,p=o;typeof r>"u"&&(!o||!o.getContext)&&(r=o,o=void 0),o||(p=n()),r=i.getOptions(r);const k=i.getImageWidth(t.modules.size,r),v=p.getContext("2d"),C=v.createImageData(k,k);return i.qrToImageData(C.data,t,r),s(v,p,k),v.putImageData(C,0,0),p},l.renderToDataURL=function(t,o,c){let r=c;typeof r>"u"&&(!o||!o.getContext)&&(r=o,o=void 0),r||(r={});const p=l.render(t,o,r),k=r.type||"image/png",v=r.rendererOpts||{};return p.toDataURL(k,v.quality)}}(bt)),bt}var Ct={},pn;function qo(){if(pn)return Ct;pn=1;const l=Tn();function i(e,t){const o=e.a/255,c=t+'="'+e.hex+'"';return o<1?c+" "+t+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function s(e,t,o){let c=e+t;return typeof o<"u"&&(c+=" "+o),c}function n(e,t,o){let c="",r=0,p=!1,k=0;for(let v=0;v<e.length;v++){const C=Math.floor(v%t),w=Math.floor(v/t);!C&&!p&&(p=!0),e[v]?(k++,v>0&&C>0&&e[v-1]||(c+=p?s("M",C+o,.5+w+o):s("m",r,0),r=0,p=!1),C+1<t&&e[v+1]||(c+=s("h",k),k=0)):r++}return c}return Ct.render=function(t,o,c){const r=l.getOptions(o),p=t.modules.size,k=t.modules.data,v=p+r.margin*2,C=r.color.light.a?"<path "+i(r.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",w="<path "+i(r.color.dark,"stroke")+' d="'+n(k,p,r.margin)+'"/>',x='viewBox="0 0 '+v+" "+v+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+x+' shape-rendering="crispEdges">'+C+w+`</svg>
`;return typeof c=="function"&&c(null,N),N},Ct}var fn;function Do(){if(fn)return ke;fn=1;const l=yo(),i=Lo(),s=Uo(),n=qo();function e(t,o,c,r,p){const k=[].slice.call(arguments,1),v=k.length,C=typeof k[v-1]=="function";if(!C&&!l())throw new Error("Callback required as last argument");if(C){if(v<2)throw new Error("Too few arguments provided");v===2?(p=c,c=o,o=r=void 0):v===3&&(o.getContext&&typeof p>"u"?(p=r,r=void 0):(p=r,r=c,c=o,o=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(c=o,o=r=void 0):v===2&&!o.getContext&&(r=c,c=o,o=void 0),new Promise(function(w,x){try{const O=i.create(c,r);w(t(O,o,r))}catch(O){x(O)}})}try{const w=i.create(c,r);p(null,t(w,o,r))}catch(w){p(w)}}return ke.create=i.create,ke.toCanvas=e.bind(null,s.render),ke.toDataURL=e.bind(null,s.renderToDataURL),ke.toString=e.bind(null,function(t,o,c){return n.render(t,c)}),ke}var Fo=Do();const hn=bn(Fo),Oo={class:"card-box"},Vo={class:"card-box-header"},jo={class:"card-title"},Ho={key:0,class:"card-icon"},zo={class:"title-text"},Ko={class:"title-text"},Wo={class:"action"},Jo={class:"card-box-body"},Yo={__name:"card-box",props:{title:{type:String,default:""}},setup(l){const i=l;return(s,n)=>(K(),X("div",Oo,[u("div",Vo,[u("div",jo,[s.$slots.icon?(K(),X("span",Ho,[Le(s.$slots,"icon",{},void 0,!0)])):ne("",!0),u("span",zo,ee(i.title),1),u("span",Ko,[Le(s.$slots,"title",{},void 0,!0)])]),u("div",Wo,[Le(s.$slots,"action",{},void 0,!0)])]),u("div",Jo,[Le(s.$slots,"default",{},void 0,!0)])]))}},Ae=ae(Yo,[["__scopeId","data-v-13417dcd"]]),Go={class:"page-title-input"},Qo={class:"upload-logo"},Xo=["src"],Zo={__name:"page-title-input",props:{avatar:{type:String,default:""},value:{type:String,default:""},placeholder:{type:String,default:"请输入标题"},autoUpload:{type:Boolean,default:!0}},emits:["update:value","update:avatar","changeAvatar"],setup(l,{emit:i}){const s=i,n=l,e=o=>{s("update:value",o.srcElement.value)},t=o=>{let c={file:o[0],category:"icon"};n.autoUpload&&En(c).then(r=>{s("update:avatar",r.data.link)}),Xn(o[0]).then(r=>{s("changeAvatar",{file:o[0],url:r})})};return(o,c)=>{const r=ge;return K(),X("div",Go,[u("div",Qo,[g(Bn,{onChange:t},{default:E(()=>[u("img",{class:"avatar",src:n.avatar},null,8,Xo)]),_:1})]),g(r,{size:"large",value:n.value,placeholder:l.placeholder,onInput:e},null,8,["value","placeholder"])])}}},Me=ae(Zo,[["__scopeId","data-v-1a1bdb06"]]);var kt={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var _n;function ea(){return _n||(_n=1,function(l,i){(function(s,n){l.exports=n()})(self,()=>(()=>{var s={d:(T,a)=>{for(var h in a)s.o(a,h)&&!s.o(T,h)&&Object.defineProperty(T,h,{enumerable:!0,get:a[h]})},o:(T,a)=>Object.prototype.hasOwnProperty.call(T,a),r:T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})}},n={};s.d(n,{default:()=>z});var e={};function t(T,a,h,_,$={}){a instanceof HTMLCollection||a instanceof NodeList?a=Array.from(a):Array.isArray(a)||(a=[a]),Array.isArray(h)||(h=[h]);for(const d of a)for(const y of h)d[T](y,_,{capture:!1,...$});return Array.prototype.slice.call(arguments,1)}s.r(e),s.d(e,{adjustableInputNumbers:()=>C,createElementFromString:()=>r,createFromTemplate:()=>p,eventPath:()=>k,off:()=>c,on:()=>o,resolveElement:()=>v});const o=t.bind(null,"addEventListener"),c=t.bind(null,"removeEventListener");function r(T){const a=document.createElement("div");return a.innerHTML=T.trim(),a.firstElementChild}function p(T){const a=(_,$)=>{const d=_.getAttribute($);return _.removeAttribute($),d},h=(_,$={})=>{const d=a(_,":obj"),y=a(_,":ref"),b=d?$[d]={}:$;y&&($[y]=_);for(const A of Array.from(_.children)){const F=a(A,":arr"),j=h(A,F?{}:b);F&&(b[F]||(b[F]=[])).push(Object.keys(j).length?j:A)}return $};return h(r(T))}function k(T){let a=T.path||T.composedPath&&T.composedPath();if(a)return a;let h=T.target.parentElement;for(a=[T.target,h];h=h.parentElement;)a.push(h);return a.push(document,window),a}function v(T){return T instanceof Element?T:typeof T=="string"?T.split(/>>/g).reduce((a,h,_,$)=>(a=a.querySelector(h),_<$.length-1?a.shadowRoot:a),document):null}function C(T,a=h=>h){function h(_){const $=[.001,.01,.1][Number(_.shiftKey||2*_.ctrlKey)]*(_.deltaY<0?1:-1);let d=0,y=T.selectionStart;T.value=T.value.replace(/[\d.]+/g,(b,A)=>A<=y&&A+b.length>=y?(y=A,a(Number(b),$,d)):(d++,b)),T.focus(),T.setSelectionRange(y,y),_.preventDefault(),T.dispatchEvent(new Event("input"))}o(T,"focus",()=>o(window,"wheel",h,{passive:!1})),o(T,"blur",()=>c(window,"wheel",h))}const{min:w,max:x,floor:O,round:N}=Math;function P(T,a,h){a/=100,h/=100;const _=O(T=T/360*6),$=T-_,d=h*(1-a),y=h*(1-$*a),b=h*(1-(1-$)*a),A=_%6;return[255*[h,y,d,d,b,h][A],255*[b,h,h,y,d,d][A],255*[d,d,b,h,h,y][A]]}function V(T,a,h){const _=(2-(a/=100))*(h/=100)/2;return _!==0&&(a=_===1?0:_<.5?a*h/(2*_):a*h/(2-2*_)),[T,100*a,100*_]}function M(T,a,h){const _=w(T/=255,a/=255,h/=255),$=x(T,a,h),d=$-_;let y,b;if(d===0)y=b=0;else{b=d/$;const A=(($-T)/6+d/2)/d,F=(($-a)/6+d/2)/d,j=(($-h)/6+d/2)/d;T===$?y=j-F:a===$?y=1/3+A-j:h===$&&(y=2/3+F-A),y<0?y+=1:y>1&&(y-=1)}return[360*y,100*b,100*$]}function B(T,a,h,_){return a/=100,h/=100,[...M(255*(1-w(1,(T/=100)*(1-(_/=100))+_)),255*(1-w(1,a*(1-_)+_)),255*(1-w(1,h*(1-_)+_)))]}function U(T,a,h){a/=100;const _=2*(a*=(h/=100)<.5?h:1-h)/(h+a)*100,$=100*(h+a);return[T,isNaN(_)?0:_,$]}function m(T){return M(...T.match(/.{2}/g).map(a=>parseInt(a,16)))}function q(T){T=T.match(/^[a-zA-Z]+$/)?function($){if($.toLowerCase()==="black")return"#000";const d=document.createElement("canvas").getContext("2d");return d.fillStyle=$,d.fillStyle==="#000"?null:d.fillStyle}(T):T;const a={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},h=$=>$.map(d=>/^(|\d+)\.\d+|\d+$/.test(d)?Number(d):void 0);let _;e:for(const $ in a)if(_=a[$].exec(T))switch($){case"cmyk":{const[,d,y,b,A]=h(_);if(d>100||y>100||b>100||A>100)break e;return{values:B(d,y,b,A),type:$}}case"rgba":{let[,d,,y,,b,,,A]=h(_);if(d=_[2]==="%"?d/100*255:d,y=_[4]==="%"?y/100*255:y,b=_[6]==="%"?b/100*255:b,A=_[9]==="%"?A/100:A,d>255||y>255||b>255||A<0||A>1)break e;return{values:[...M(d,y,b),A],a:A,type:$}}case"hexa":{let[,d]=_;d.length!==4&&d.length!==3||(d=d.split("").map(A=>A+A).join(""));const y=d.substring(0,6);let b=d.substring(6);return b=b?parseInt(b,16)/255:void 0,{values:[...m(y),b],a:b,type:$}}case"hsla":{let[,d,y,b,,A]=h(_);if(A=_[6]==="%"?A/100:A,d>360||y>100||b>100||A<0||A>1)break e;return{values:[...U(d,y,b),A],a:A,type:$}}case"hsva":{let[,d,y,b,,A]=h(_);if(A=_[6]==="%"?A/100:A,d>360||y>100||b>100||A<0||A>1)break e;return{values:[d,y,b,A],a:A,type:$}}}return{values:null,type:null}}function L(T=0,a=0,h=0,_=1){const $=(y,b)=>(A=-1)=>b(~A?y.map(F=>Number(F.toFixed(A))):y),d={h:T,s:a,v:h,a:_,toHSVA(){const y=[d.h,d.s,d.v,d.a];return y.toString=$(y,b=>`hsva(${b[0]}, ${b[1]}%, ${b[2]}%, ${d.a})`),y},toHSLA(){const y=[...V(d.h,d.s,d.v),d.a];return y.toString=$(y,b=>`hsla(${b[0]}, ${b[1]}%, ${b[2]}%, ${d.a})`),y},toRGBA(){const y=[...P(d.h,d.s,d.v),d.a];return y.toString=$(y,b=>`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${d.a})`),y},toCMYK(){const y=function(b,A,F){const j=P(b,A,F),H=j[0]/255,W=j[1]/255,J=j[2]/255,G=w(1-H,1-W,1-J);return[100*(G===1?0:(1-H-G)/(1-G)),100*(G===1?0:(1-W-G)/(1-G)),100*(G===1?0:(1-J-G)/(1-G)),100*G]}(d.h,d.s,d.v);return y.toString=$(y,b=>`cmyk(${b[0]}%, ${b[1]}%, ${b[2]}%, ${b[3]}%)`),y},toHEXA(){const y=function(A,F,j){return P(A,F,j).map(H=>N(H).toString(16).padStart(2,"0"))}(d.h,d.s,d.v),b=d.a>=1?"":Number((255*d.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return b&&y.push(b),y.toString=()=>`#${y.join("").toUpperCase()}`,y},clone:()=>L(d.h,d.s,d.v,d.a)};return d}const R=T=>Math.max(Math.min(T,1),0);function S(T){const a={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},T),_keyboard(d){const{options:y}=a,{type:b,key:A}=d;if(document.activeElement===y.wrapper){const{lock:F}=a.options,j=A==="ArrowUp",H=A==="ArrowRight",W=A==="ArrowDown",J=A==="ArrowLeft";if(b==="keydown"&&(j||H||W||J)){let G=0,ie=0;F==="v"?G=j||H?1:-1:F==="h"?G=j||H?-1:1:(ie=j?-1:W?1:0,G=J?-1:H?1:0),a.update(R(a.cache.x+.01*G),R(a.cache.y+.01*ie)),d.preventDefault()}else A.startsWith("Arrow")&&(a.options.onstop(),d.preventDefault())}},_tapstart(d){o(document,["mouseup","touchend","touchcancel"],a._tapstop),o(document,["mousemove","touchmove"],a._tapmove),d.cancelable&&d.preventDefault(),a._tapmove(d)},_tapmove(d){const{options:y,cache:b}=a,{lock:A,element:F,wrapper:j}=y,H=j.getBoundingClientRect();let W=0,J=0;if(d){const we=d&&d.touches&&d.touches[0];W=d?(we||d).clientX:0,J=d?(we||d).clientY:0,W<H.left?W=H.left:W>H.left+H.width&&(W=H.left+H.width),J<H.top?J=H.top:J>H.top+H.height&&(J=H.top+H.height),W-=H.left,J-=H.top}else b&&(W=b.x*H.width,J=b.y*H.height);A!=="h"&&(F.style.left=`calc(${W/H.width*100}% - ${F.offsetWidth/2}px)`),A!=="v"&&(F.style.top=`calc(${J/H.height*100}% - ${F.offsetHeight/2}px)`),a.cache={x:W/H.width,y:J/H.height};const G=R(W/H.width),ie=R(J/H.height);switch(A){case"v":return y.onchange(G);case"h":return y.onchange(ie);default:return y.onchange(G,ie)}},_tapstop(){a.options.onstop(),c(document,["mouseup","touchend","touchcancel"],a._tapstop),c(document,["mousemove","touchmove"],a._tapmove)},trigger(){a._tapmove()},update(d=0,y=0){const{left:b,top:A,width:F,height:j}=a.options.wrapper.getBoundingClientRect();a.options.lock==="h"&&(y=d),a._tapmove({clientX:b+F*d,clientY:A+j*y})},destroy(){const{options:d,_tapstart:y,_keyboard:b}=a;c(document,["keydown","keyup"],b),c([d.wrapper,d.element],"mousedown",y),c([d.wrapper,d.element],"touchstart",y,{passive:!1})}},{options:h,_tapstart:_,_keyboard:$}=a;return o([h.wrapper,h.element],"mousedown",_),o([h.wrapper,h.element],"touchstart",_,{passive:!1}),o(document,["keydown","keyup"],$),a}function f(T={}){T=Object.assign({onchange:()=>0,className:"",elements:[]},T);const a=o(T.elements,"click",h=>{T.elements.forEach(_=>_.classList[h.target===_?"add":"remove"](T.className)),T.onchange(h),h.stopPropagation()});return{destroy:()=>c(...a)}}const D={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},I=(T,a,h)=>{const _=typeof T!="object"||T instanceof HTMLElement?{reference:T,popper:a,...h}:T;return{update($=_){const{reference:d,popper:y}=Object.assign(_,$);if(!y||!d)throw new Error("Popper- or reference-element missing.");return((b,A,F)=>{const{container:j,arrow:H,margin:W,padding:J,position:G,variantFlipOrder:ie,positionFlipOrder:we}={container:document.documentElement.getBoundingClientRect(),...D,...F},{left:ze,top:Ke}=A.style;A.style.left="0",A.style.top="0";const re=b.getBoundingClientRect(),ce=A.getBoundingClientRect(),Mn={t:re.top-ce.height-W,b:re.bottom+W,r:re.right+W,l:re.left-ce.width-W},Nn={vs:re.left,vm:re.left+re.width/2-ce.width/2,ve:re.left+re.width-ce.width,hs:re.top,hm:re.bottom-re.height/2-ce.height/2,he:re.bottom-ce.height},[Ln,Un="middle"]=G.split("-"),qn=we[Ln],Dn=ie[Un],{top:xt,left:Mt,bottom:Nt,right:Lt}=j;for(const Be of qn){const Ce=Be==="t"||Be==="b";let Ie=Mn[Be];const[We,Je]=Ce?["top","left"]:["left","top"],[Ye,Ge]=Ce?[ce.height,ce.width]:[ce.width,ce.height],[Fn,On]=Ce?[Nt,Lt]:[Lt,Nt],[Vn,jn]=Ce?[xt,Mt]:[Mt,xt];if(!(Ie<Vn||Ie+Ye+J>Fn))for(const Qe of Dn){let Pe=Nn[(Ce?"v":"h")+Qe];if(!(Pe<jn||Pe+Ge+J>On)){if(Pe-=ce[Je],Ie-=ce[We],A.style[Je]=`${Pe}px`,A.style[We]=`${Ie}px`,H){const Xe=Ce?re.width/2:re.height/2,Ne=Ge/2,Ut=Xe>Ne,Hn=Pe+{s:Ut?Ne:Xe,m:Ne,e:Ut?Ne:Ge-Xe}[Qe],zn=Ie+{t:Ye,b:0,r:0,l:Ye}[Be];H.style[Je]=`${Hn}px`,H.style[We]=`${zn}px`}return Be+Qe}}}return A.style.left=ze,A.style.top=Ke,null})(d,y,_)}}},Z=class Z{constructor(a){le(this,"_initializingActive",!0);le(this,"_recalc",!0);le(this,"_nanopop",null);le(this,"_root",null);le(this,"_color",L());le(this,"_lastColor",L());le(this,"_swatchColors",[]);le(this,"_setupAnimationFrame",null);le(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=a=Object.assign({...Z.DEFAULT_OPTIONS},a);const{swatches:h,components:_,theme:$,sliders:d,lockOpacity:y,padding:b}=a;["nano","monolith"].includes($)&&!d&&(a.sliders="h"),_.interaction||(_.interaction={});const{preview:A,opacity:F,hue:j,palette:H}=_;_.opacity=!y&&F,_.palette=H||A||F||j,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),h&&h.length&&h.forEach(ie=>this.addSwatch(ie));const{button:W,app:J}=this._root;this._nanopop=I(W,J,{margin:b}),W.setAttribute("role","button"),W.setAttribute("aria-label",this._t("btn:toggle"));const G=this;this._setupAnimationFrame=requestAnimationFrame(function ie(){if(!J.offsetWidth)return requestAnimationFrame(ie);G.setColor(a.default),G._rePositioningPicker(),a.defaultRepresentation&&(G._representation=a.defaultRepresentation,G.setColorRepresentation(G._representation)),a.showAlways&&G.show(),G._initializingActive=!1,G._emit("init")})}_preBuild(){const{options:a}=this;for(const h of["el","container"])a[h]=v(a[h]);this._root=(h=>{const{components:_,useAsButton:$,inline:d,appClass:y,theme:b,lockOpacity:A}=h.options,F=J=>J?"":'style="display:none" hidden',j=J=>h._t(J),H=p(`
      <div :ref="root" class="pickr">

        ${$?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${y||""}" data-theme="${b}" ${d?'style="position: unset"':""} aria-label="${j("ui:dialog")}" role="window">
          <div class="pcr-selection" ${F(_.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${F(_.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${j("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${j("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${F(_.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${j("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${F(_.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${j("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${_.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${F(Object.keys(_.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${F(_.interaction.input)} aria-label="${j("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${A?"HEX":"HEXA"}" type="button" ${F(_.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${A?"RGB":"RGBA"}" type="button" ${F(_.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${A?"HSL":"HSLA"}" type="button" ${F(_.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${A?"HSV":"HSVA"}" type="button" ${F(_.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${F(_.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${j("btn:save")}" type="button" ${F(_.interaction.save)} aria-label="${j("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${j("btn:cancel")}" type="button" ${F(_.interaction.cancel)} aria-label="${j("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${j("btn:clear")}" type="button" ${F(_.interaction.clear)} aria-label="${j("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),W=H.interaction;return W.options.find(J=>!J.hidden&&!J.classList.add("active")),W.type=()=>W.options.find(J=>J.classList.contains("active")),H})(this),a.useAsButton&&(this._root.button=a.el),a.container.appendChild(this._root.root)}_finalBuild(){const a=this.options,h=this._root;if(a.container.removeChild(h.root),a.inline){const _=a.el.parentElement;a.el.nextSibling?_.insertBefore(h.app,a.el.nextSibling):_.appendChild(h.app)}else a.container.appendChild(h.app);a.useAsButton?a.inline&&a.el.remove():a.el.parentNode.replaceChild(h.root,a.el),a.disabled&&this.disable(),a.comparison||(h.button.style.transition="none",a.useAsButton||(h.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const a=this,h=this.options.components,_=(a.options.sliders||"v").repeat(2),[$,d]=_.match(/^[vh]+$/g)?_:[],y=()=>this._color||(this._color=this._lastColor.clone()),b={palette:S({element:a._root.palette.picker,wrapper:a._root.palette.palette,onstop:()=>a._emit("changestop","slider",a),onchange(A,F){if(!h.palette)return;const j=y(),{_root:H,options:W}=a,{lastColor:J,currentColor:G}=H.preview;a._recalc&&(j.s=100*A,j.v=100-100*F,j.v<0&&(j.v=0),a._updateOutput("slider"));const ie=j.toRGBA().toString(0);this.element.style.background=ie,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${j.a}), transparent),
                        linear-gradient(to left, hsla(${j.h}, 100%, 50%, ${j.a}), rgba(255, 255, 255, ${j.a}))
                    `,W.comparison?W.useAsButton||a._lastColor||J.style.setProperty("--pcr-color",ie):(H.button.style.setProperty("--pcr-color",ie),H.button.classList.remove("clear"));const we=j.toHEXA().toString();for(const{el:ze,color:Ke}of a._swatchColors)ze.classList[we===Ke.toHEXA().toString()?"add":"remove"]("pcr-active");G.style.setProperty("--pcr-color",ie)}}),hue:S({lock:d==="v"?"h":"v",element:a._root.hue.picker,wrapper:a._root.hue.slider,onstop:()=>a._emit("changestop","slider",a),onchange(A){if(!h.hue||!h.palette)return;const F=y();a._recalc&&(F.h=360*A),this.element.style.backgroundColor=`hsl(${F.h}, 100%, 50%)`,b.palette.trigger()}}),opacity:S({lock:$==="v"?"h":"v",element:a._root.opacity.picker,wrapper:a._root.opacity.slider,onstop:()=>a._emit("changestop","slider",a),onchange(A){if(!h.opacity||!h.palette)return;const F=y();a._recalc&&(F.a=Math.round(100*A)/100),this.element.style.background=`rgba(0, 0, 0, ${F.a})`,b.palette.trigger()}}),selectable:f({elements:a._root.interaction.options,className:"active",onchange(A){a._representation=A.target.getAttribute("data-type").toUpperCase(),a._recalc&&a._updateOutput("swatch")}})};this._components=b}_bindEvents(){const{_root:a,options:h}=this,_=[o(a.interaction.clear,"click",()=>this._clearColor()),o([a.interaction.cancel,a.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),o(a.interaction.save,"click",()=>{!this.applyColor()&&!h.showAlways&&this.hide()}),o(a.interaction.result,["keyup","input"],$=>{this.setColor($.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),$.stopImmediatePropagation()}),o(a.interaction.result,["focus","blur"],$=>{this._recalc=$.type==="blur",this._recalc&&this._updateOutput(null)}),o([a.palette.palette,a.palette.picker,a.hue.slider,a.hue.picker,a.opacity.slider,a.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!h.showAlways){const $=h.closeWithKey;_.push(o(a.button,"click",()=>this.isOpen()?this.hide():this.show()),o(document,"keyup",d=>this.isOpen()&&(d.key===$||d.code===$)&&this.hide()),o(document,["touchstart","mousedown"],d=>{this.isOpen()&&!k(d).some(y=>y===a.app||y===a.button)&&this.hide()},{capture:!0}))}if(h.adjustableNumbers){const $={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};C(a.interaction.result,(d,y,b)=>{const A=$[this.getColorRepresentation().toLowerCase()];if(A){const F=A[b],j=d+(F>=100?1e3*y:y);return j<=0?0:Number((j<F?j:F).toPrecision(3))}return d})}if(h.autoReposition&&!h.inline){let $=null;const d=this;_.push(o(window,["scroll","resize"],()=>{d.isOpen()&&(h.closeOnScroll&&d.hide(),$===null?($=setTimeout(()=>$=null,100),requestAnimationFrame(function y(){d._rePositioningPicker(),$!==null&&requestAnimationFrame(y)})):(clearTimeout($),$=setTimeout(()=>$=null,100)))},{capture:!0}))}this._eventBindings=_}_rePositioningPicker(){const{options:a}=this;if(!a.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:a.position})){const h=this._root.app,_=h.getBoundingClientRect();h.style.top=(window.innerHeight-_.height)/2+"px",h.style.left=(window.innerWidth-_.width)/2+"px"}}_updateOutput(a){const{_root:h,_color:_,options:$}=this;if(h.interaction.type()){const d=`to${h.interaction.type().getAttribute("data-type")}`;h.interaction.result.value=typeof _[d]=="function"?_[d]().toString($.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",_,a,this)}_clearColor(a=!1){const{_root:h,options:_}=this;_.useAsButton||h.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),h.button.classList.add("clear"),_.showAlways||this.hide(),this._lastColor=null,this._initializingActive||a||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(a){const{values:h,type:_,a:$}=q(a),{lockOpacity:d}=this.options,y=$!==void 0&&$!==1;return h&&h.length===3&&(h[3]=void 0),{values:!h||d&&y?null:h,type:_}}_t(a){return this.options.i18n[a]||Z.I18N_DEFAULTS[a]}_emit(a,...h){this._eventListener[a].forEach(_=>_(...h,this))}on(a,h){return this._eventListener[a].push(h),this}off(a,h){const _=this._eventListener[a]||[],$=_.indexOf(h);return~$&&_.splice($,1),this}addSwatch(a){const{values:h}=this._parseLocalColor(a);if(h){const{_swatchColors:_,_root:$}=this,d=L(...h),y=r(`<button type="button" style="--pcr-color: ${d.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return $.swatches.appendChild(y),_.push({el:y,color:d}),this._eventBindings.push(o(y,"click",()=>{this.setHSVA(...d.toHSVA(),!0),this._emit("swatchselect",d),this._emit("change",d,"swatch",this)})),!0}return!1}removeSwatch(a){const h=this._swatchColors[a];if(h){const{el:_}=h;return this._root.swatches.removeChild(_),this._swatchColors.splice(a,1),!0}return!1}applyColor(a=!1){const{preview:h,button:_}=this._root,$=this._color.toRGBA().toString(0);return h.lastColor.style.setProperty("--pcr-color",$),this.options.useAsButton||_.style.setProperty("--pcr-color",$),_.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||a||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(a=>c(...a)),Object.keys(this._components).forEach(a=>this._components[a].destroy())}destroyAndRemove(){this.destroy();const{root:a,app:h}=this._root;a.parentElement&&a.parentElement.removeChild(a),h.parentElement.removeChild(h),Object.keys(this).forEach(_=>this[_]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(a=360,h=0,_=0,$=1,d=!1){const y=this._recalc;if(this._recalc=!1,a<0||a>360||h<0||h>100||_<0||_>100||$<0||$>1)return!1;this._color=L(a,h,_,$);const{hue:b,opacity:A,palette:F}=this._components;return b.update(a/360),A.update($),F.update(h/100,1-_/100),d||this.applyColor(),y&&this._updateOutput(),this._recalc=y,!0}setColor(a,h=!1){if(a===null)return this._clearColor(h),!0;const{values:_,type:$}=this._parseLocalColor(a);if(_){const d=$.toUpperCase(),{options:y}=this._root.interaction,b=y.find(A=>A.getAttribute("data-type")===d);if(b&&!b.hidden)for(const A of y)A.classList[A===b?"add":"remove"]("active");return!!this.setHSVA(..._,h)&&this.setColorRepresentation(d)}return!1}setColorRepresentation(a){return a=a.toUpperCase(),!!this._root.interaction.options.find(h=>h.getAttribute("data-type").startsWith(a)&&!h.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};le(Z,"utils",e),le(Z,"version","1.9.1"),le(Z,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),le(Z,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),le(Z,"create",a=>new Z(a));let z=Z;return n=n.default})())}(kt)),kt.exports}var ta=ea();const na=bn(ta),oa={class:"color-picker-wrapper"},aa={class:"color-picker-action"},sa={__name:"index",props:{value:{type:String,default:"#000000"}},emits:["update:value","change"],setup(l,{emit:i}){const s=i,n=l,e=Y(null);return qe(()=>{const t=na.create({el:e.value,container:"body",theme:"nano",default:n.value,defaultRepresentation:"HEX",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}});t.on("save",(o,c)=>{let r=o.toHEXA().toString();s("update:value",r),s("change",r),c.hide()}),t.on("show",()=>{const o=document.querySelectorAll(".pcr-save");o&&o.length&&o.forEach(function(c){c.tagName.toLowerCase()==="input"&&(c.value="保存")})})}),(t,o)=>{const c=ge;return K(),X("div",oa,[g(c,{value:n.value,readonly:!0,placeholder:"Basic usage"},null,8,["value"]),u("span",aa,[u("span",{ref_key:"colorPicker",ref:e},null,512)])])}}},$t=ae(sa,[["__scopeId","data-v-f2a9e7d0"]]),ia="/assets/img/quick-help-BZ3Cu-IE.png",ra={class:"quick-instructions-box"},la={class:"quick-action-right"},ca={class:"quick-list-box"},ua={class:"list-box-wrap"},da={class:"drag-btn"},pa={class:"left-box"},fa={class:"title"},ha={class:"content"},_a={class:"opration-box"},ma={class:"form-box"},ga={__name:"quick-instruction",props:{type:{type:Number,default:void 0}},emits:["updata"],setup(l,{emit:i}){const s=l,n=i,e=Jn(),t=Oe(),{robotInfo:o}=De(t),{getRobot:c}=t,r=Y([]),p=Y(parseInt(s.type==-1?o.value.fast_command_switch:o.value.yunpc_fast_command_switch)||0);$e(r,S=>{n("updata",{comand_list:S,fast_command_switch:p.value})});const k=()=>{lo({robot_key:o.value.robot_key,app_id:s.type}).then(S=>{r.value=S.data||[],t.setQuickCommand(S.data)})};k();const v=_e.useForm,C=Y(!1),w=Y("添加快捷指令"),x=ue({robot_id:e.query.id,app_id:s.type,title:"",typ:1,content:"",id:""}),O=S=>{const{id:f}=o.value;po({robot_key:o.value.robot_key,app_id:s.type}).then(D=>{p.value=S,n("updata",{comand_list:r.value,fast_command_switch:p.value}),c(f),se.success("修改成功")}).catch(D=>{p.value=!p.value})},N=()=>{x.content="",U(["content"])},P=S=>{C.value=!0,M(),w.value=S.id?"编辑快捷指令":"添加快捷指令",x.title=S.title||"",x.content=S.content||"",x.id=S.id||"",x.typ=+S.typ||1},V=ue({title:[{message:"请输入指令标题",required:!0}],content:[{message:"",required:!0},{validator:async(S,f)=>f==""?Promise.reject(new Error(`请输入${x.typ==1?"内容":"网址"}`)):x.typ==1||ho(f)?Promise.resolve():Promise.reject(new Error("请输入合法网页链接"))}]}),{resetFields:M,validate:B,clearValidate:U,validateInfos:m}=v(x,V),q=()=>{B().then(()=>{fo({...he(x)}).then(S=>{se.success("修改成功"),C.value=!1,k()})})},L=S=>{me.confirm({title:"提醒",icon:g(je),content:"确定要删除该快捷指令吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk(){uo({id:S}).then(f=>{se.success("删除成功"),k()})},onCancel(){}})},R=S=>{let f=r.value.map((D,I)=>({id:+D.id,sort:I+1}));co({data:f}).then(D=>{se.success("保存成功"),k()})};return(S,f)=>{const D=no,I=Ve,z=wn,Z=ve,T=ge,a=Ee,h=kn,_=Cn,$=$n,d=_e,y=me;return K(),X("div",ra,[g(Ae,null,{title:E(()=>[f[9]||(f[9]=Q(" 快捷指令设置 ")),g(D,{placement:"top"},{content:E(()=>f[8]||(f[8]=[u("div",{class:"help-box"},[u("div",null,"快捷指令是对话输入框上方的按钮,配置完成后,用户可以快速发起预设对话"),u("img",{src:ia,alt:""})],-1)])),default:E(()=>[g(te(oo),{class:"help-icon"})]),_:1})]),icon:E(()=>[g(I,{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[u("div",la,[g(z,{onChange:O,class:"switch-item",checkedValue:1,unCheckedValue:0,checked:p.value,"onUpdate:checked":f[0]||(f[0]=b=>p.value=b),"checked-children":"开","un-checked-children":"关"},null,8,["checked"]),g(Z,{onClick:P,size:"small",type:"primary"},{default:E(()=>f[10]||(f[10]=[Q("添加")])),_:1,__:[10]})])]),default:E(()=>[u("div",ca,[g(te(_o),{modelValue:r.value,"onUpdate:modelValue":f[1]||(f[1]=b=>r.value=b),"item-key":"id",onEnd:f[2]||(f[2]=b=>R(b)),handle:".drag-btn"},{item:E(({element:b,index:A})=>[u("div",ua,[(K(),X("div",{class:"list-item",key:b.id},[u("div",da,[g(I,{name:"drag"})]),u("div",pa,[u("div",fa,ee(b.title),1),u("div",ha,ee(b.content),1)]),u("div",_a,[g(te(eo),{onClick:F=>P(b)},null,8,["onClick"]),g(te(to),{onClick:F=>L(b.id)},null,8,["onClick"])])]))])]),_:1},8,["modelValue"])])]),_:1}),g(y,{open:C.value,"onUpdate:open":f[7]||(f[7]=b=>C.value=b),title:w.value,onOk:q,width:"576px"},{default:E(()=>[u("div",ma,[g(d,{layout:"vertical"},{default:E(()=>[g(a,qt({label:"指令标题"},te(m).title),{default:E(()=>[g(T,{placeholder:"请输入指令标题",maxLength:20,value:x.title,"onUpdate:value":f[3]||(f[3]=b=>x.title=b)},null,8,["value"])]),_:1},16),g(a,{label:"指令类型",required:""},{default:E(()=>[g(_,{value:x.typ,"onUpdate:value":f[4]||(f[4]=b=>x.typ=b),onChange:N},{default:E(()=>[g(h,{value:1},{default:E(()=>f[11]||(f[11]=[Q("输入内容")])),_:1,__:[11]}),g(h,{value:2},{default:E(()=>f[12]||(f[12]=[Q("跳转网页")])),_:1,__:[12]})]),_:1},8,["value"])]),_:1}),g(a,qt({label:x.typ==1?"指令内容":"网页链接",required:""},te(m).content),{default:E(()=>[x.typ==1?(K(),oe($,{key:0,style:{height:"100px"},value:x.content,"onUpdate:value":f[5]||(f[5]=b=>x.content=b),placeholder:"请输入指令内容"},null,8,["value"])):(K(),oe(T,{key:1,placeholder:"请输入网页链接",value:x.content,"onUpdate:value":f[6]||(f[6]=b=>x.content=b)},null,8,["value"]))]),_:1},16,["label"])]),_:1})])]),_:1},8,["open","title"])])}}},xn=ae(ga,[["__scopeId","data-v-9444f65b"]]),va={class:"web-app-box"},ya={class:"box-left"},ba={class:"box-wrapper"},wa={class:"web-app-info"},Ca={class:"web-app-link"},ka=["href"],$a={class:"link-action"},Aa=["src"],Sa={class:"card-title"},Ea={class:"web-app-link"},Ba=["href"],Ia={class:"link-action"},Pa=["src"],Ra={class:"access-restrictions form-box"},Ta={class:"form-item"},xa={class:"form-item-body"},Ma={class:"box-wrapper"},Na={class:"web-app-style form-box"},La={class:"box-wrapper"},Ua={class:"box-right"},qa={class:"demo-box"},Da=["src"],Fa={__name:"web-app",setup(l){const i=Yn(),s=Oe(),{robotInfo:n,external_config_h5:e}=De(s),{h5_website:t,h5_domain:o,robot_key:c}=n.value,{getRobot:r}=s,p=Y(""),k=Y(""),v=Y(),C=ue({logo:e.value.logo,pageTitle:e.value.pageTitle,navbarShow:e.value.navbarShow,lang:e.value.lang,pageStyle:e.value.pageStyle}),w=pe(()=>`${o}/#/chat/pc?robot_key=${c}`),x=pe(()=>`${o}/#/chat/h5?robot_key=${c}`),O=pe(()=>t);$e(C,S=>{P(S)});const N=S=>{P(S,"updataQuickComand")},P=(S,f)=>{document.getElementById("mobile-preview").contentWindow.postMessage({type:f||"onPreview",data:JSON.parse(JSON.stringify(S))},"*")},V={lang:[{required:!0,message:"请选择语言",trigger:"change"}],pageTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>C.logo?Promise.resolve():Promise.reject("请上传logo")}],navbarShow:[{required:!0,message:"请选择是否显示标题栏",trigger:"change"}],pageStyle:{navbarBackgroundColor:[{required:!0,message:"请选择标题栏颜色",trigger:"change"}]}},M=Y(e.value.accessRestrictionsType||1),B=()=>{let S={...he(e.value)};S.accessRestrictionsType=M.value,U(S)},U=S=>{const{id:f}=n.value;Sn({id:f,external_config_h5:JSON.stringify(S)}).then(()=>{r(f),se.success("保存成功"),i.go(0)})},m=()=>{v.value.validate().then(()=>{let S={...he(C)};S.accessRestrictionsType=M.value,U(S)}).catch(S=>{})},q=S=>{window.open(S)},L=S=>{xe(S),se.success("复制成功")},R=async()=>{try{p.value=await hn.toDataURL(w.value),k.value=await hn.toDataURL(x.value)}catch(S){console.error(S)}};return setTimeout(()=>{R()},300),(S,f)=>{const D=Ve,I=ve,z=ao,Z=kn,T=Cn,a=Ee,h=St,_=At,$=_e;return K(),X("div",va,[u("div",ya,[u("div",ba,[g(Ae,{title:"H5链接"},{icon:E(()=>[g(D,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),default:E(()=>[u("div",wa,[u("div",Ca,[u("a",{href:x.value,target:"_blank"},ee(x.value),9,ka)]),u("div",$a,[g(I,{class:"action-btn",type:"primary",ghost:"",onClick:f[0]||(f[0]=d=>L(x.value))},{default:E(()=>f[10]||(f[10]=[Q("复 制")])),_:1,__:[10]}),g(I,{class:"action-btn",onClick:f[1]||(f[1]=d=>q(x.value))},{default:E(()=>f[11]||(f[11]=[Q("预 览")])),_:1,__:[11]}),g(z,{color:"#fff",placement:"top"},{title:E(()=>[u("img",{style:{width:"180px"},src:k.value,alt:""},null,8,Aa)]),default:E(()=>[g(I,{class:"action-btn"},{default:E(()=>f[12]||(f[12]=[Q("二维码")])),_:1,__:[12]})]),_:1})]),u("div",Sa,[g(D,{name:"circularNeedle",style:{"font-size":"16px",color:"#262626"}}),f[13]||(f[13]=u("div",{class:"title-text"},"pc网页链接",-1))]),u("div",Ea,[u("a",{href:w.value,target:"_blank"},ee(w.value),9,Ba)]),u("div",Ia,[g(I,{class:"action-btn",type:"primary",ghost:"",onClick:f[2]||(f[2]=d=>L(w.value))},{default:E(()=>f[14]||(f[14]=[Q("复 制")])),_:1,__:[14]}),g(I,{class:"action-btn",onClick:f[3]||(f[3]=d=>q(w.value))},{default:E(()=>f[15]||(f[15]=[Q("预 览")])),_:1,__:[15]}),g(z,{color:"#fff",placement:"top"},{title:E(()=>[u("img",{style:{width:"180px"},src:p.value,alt:""},null,8,Pa)]),default:E(()=>[g(I,{class:"action-btn"},{default:E(()=>f[16]||(f[16]=[Q("二维码")])),_:1,__:[16]})]),_:1})]),u("div",Ra,[u("div",Ta,[f[20]||(f[20]=u("div",{class:"form-item-label"},"访问限制",-1)),u("div",xa,[g(T,{value:M.value,"onUpdate:value":f[4]||(f[4]=d=>M.value=d),onChange:B},{default:E(()=>[g(Z,{value:1},{default:E(()=>f[17]||(f[17]=[u("span",{class:"default-text-color"},"无限制",-1)])),_:1,__:[17]}),g(Z,{value:2},{default:E(()=>f[18]||(f[18]=[u("span",{class:"default-text-color"},"登录后才可访问",-1)])),_:1,__:[18]}),ne("",!0)]),_:1},8,["value"])])])])])]),_:1})]),u("div",Ma,[g(Ae,{title:"样式设置"},{icon:E(()=>[g(D,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[g(I,{onClick:m,size:"small",type:"primary"},{default:E(()=>f[21]||(f[21]=[Q("保存")])),_:1,__:[21]})]),default:E(()=>[u("div",Na,[g($,{ref_key:"formRef",ref:v,layout:"vertical",model:C,rules:V},{default:E(()=>[g(a,{class:"form-item",label:"是否显示标题栏",name:"navbarShow"},{default:E(()=>[g(T,{value:C.navbarShow,"onUpdate:value":f[5]||(f[5]=d=>C.navbarShow=d),name:"navbarShow"},{default:E(()=>[g(Z,{value:1},{default:E(()=>f[22]||(f[22]=[Q("显示")])),_:1,__:[22]}),g(Z,{value:2},{default:E(()=>f[23]||(f[23]=[Q("不显示")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),g(a,{class:"form-item",label:"页面标题",name:"pageTitle"},{default:E(()=>[g(Me,{avatar:C.logo,"onUpdate:avatar":f[6]||(f[6]=d=>C.logo=d),value:C.pageTitle,"onUpdate:value":f[7]||(f[7]=d=>C.pageTitle=d)},null,8,["avatar","value"])]),_:1}),g(a,{class:"form-item",label:"标题栏颜色",name:["pageStyle","navbarBackgroundColor"]},{default:E(()=>[g($t,{value:C.pageStyle.navbarBackgroundColor,"onUpdate:value":f[8]||(f[8]=d=>C.pageStyle.navbarBackgroundColor=d)},null,8,["value"])]),_:1}),g(a,{class:"form-item",label:"语言",name:"lang"},{default:E(()=>[g(_,{style:{width:"180px"},value:C.lang,"onUpdate:value":f[9]||(f[9]=d=>C.lang=d),placeholder:"请选择语言"},{default:E(()=>[g(h,{value:"zh-CN"},{default:E(()=>f[24]||(f[24]=[Q("简体中文")])),_:1,__:[24]}),g(h,{value:"en-US"},{default:E(()=>f[25]||(f[25]=[Q("English")])),_:1,__:[25]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1})]),u("div",La,[g(xn,{type:te(n).app_id,onUpdata:N},null,8,["type"])])]),u("div",Ua,[u("div",qa,[u("iframe",{id:"mobile-preview",src:O.value,frameborder:"0"},null,8,Da)])])])}}},Oa=ae(Fa,[["__scopeId","data-v-2faed53d"]]);function Va({pc_domain:l,robot_key:i}){var s=`<script>
  (function (z, h, i, m, a, j, s) {
    z[m] = z[m] || function () {
      (z[m].a = z[m].a || []).push(arguments);
    };
    (j = h.createElement(i)), (s = h.getElementsByTagName(i)[0]);
    j.async = true;
    j.charset = "UTF-8";
    j.setAttribute(
      "data-json",
      JSON.stringify({
        robot_key: "${i}",
        language: "zh-CN",
      })
    );
    j.id = "ai_chat_js";
    j.src = '${l}/sdk/ai-chat-sdk.umd.cjs';
    s.parentNode.insertBefore(j, s);
  })(window, document, "script", "_ai_chat");
<\/script>`;return s}const ja={class:"gradient-color-picker"},Ha={class:"color-picker-box"},za={class:"gradient-type-select"},Ka={class:"color-item"},Wa={class:"right-arrow"},Ja={class:"color-item"},Ya={__name:"gradient-color-picker",props:{value:{type:String,default:""}},emits:["update:value"],setup(l,{emit:i}){const s=i,n=l,e=_e.useInjectFormItemContext(),t=Y([{key:1,label:"单色",value:"color",type:"color"},{key:2,label:"线性渐变（横向）",value:"to right",type:"linear-gradient"},{key:3,label:"线性渐变（竖向）",value:"to bottom",type:"linear-gradient"},{key:4,label:"径向渐变",value:"circle",type:"radial-gradient"}]),o=Y("linear-gradient"),c=Y("to right"),r=Y("#2435E7"),p=Y("#01A0FB"),k=pe(()=>o.value=="color"?r.value:`${o.value}(${c.value}, ${r.value}, ${p.value})`);$e(()=>k.value,()=>{let C=[o.value,c.value,r.value,p.value].join(",");s("update:value",C),e.onFieldChange()}),$e(()=>n.value,()=>{const C=n.value.split(","),[w,x,O,N]=C;o.value=w,c.value=x,r.value=O,p.value=N},{immediate:!0});const v=(C,w)=>{o.value=w.type,c.value=C,e.onFieldChange()};return(C,w)=>{const x=St,O=At;return K(),X("div",ja,[u("div",Ha,[u("div",za,[g(O,{value:c.value,style:{width:"180px"},onChange:v},{default:E(()=>[(K(!0),X(Te,null,Fe(t.value,N=>(K(),oe(x,{value:N.value,type:N.type,key:N.key},{default:E(()=>[Q(ee(N.label),1)]),_:2},1032,["value","type"]))),128))]),_:1},8,["value"])]),u("div",Ka,[g($t,{value:r.value,"onUpdate:value":w[0]||(w[0]=N=>r.value=N)},null,8,["value"])]),o.value!="color"?(K(),X(Te,{key:0},[u("div",Wa,[g(te(so))]),u("div",Ja,[g($t,{value:p.value,"onUpdate:value":w[1]||(w[1]=N=>p.value=N)},null,8,["value"])])],64)):ne("",!0)])])}}},Ga=ae(Ya,[["__scopeId","data-v-dfea777d"]]),Qa="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20x='14'%20y='14'%20width='28'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3crect%20x='14.5'%20y='14.5'%20width='27'%20height='27'%20rx='13.5'%20stroke='black'%20stroke-opacity='0.04'/%3e%3cg%20clip-path='url(%23clip0_2269_42995)'%3e%3cpath%20d='M31.5%2030.3385C32.7887%2030.3385%2033.8333%2029.2939%2033.8333%2028.0052C33.8333%2026.7165%2032.7887%2025.6719%2031.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5013%2025.6719C23.2126%2025.6719%2022.168%2026.7165%2022.168%2028.0052C22.168%2029.2939%2023.2126%2030.3385%2024.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5%2030.3385V30.1927V29.4635V28.0052V25.6719C24.5%2023.7389%2026.067%2022.1719%2028%2022.1719C29.933%2022.1719%2031.5%2023.7389%2031.5%2025.6719V30.3385C31.5%2032.2715%2029.933%2033.8385%2028%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42995'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(21%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Xa="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20y='14'%20width='56'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3cg%20clip-path='url(%23clip0_2269_42985)'%3e%3cpath%20d='M19.5%2030.3385C20.7887%2030.3385%2021.8333%2029.2939%2021.8333%2028.0052C21.8333%2026.7165%2020.7887%2025.6719%2019.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5013%2025.6719C11.2126%2025.6719%2010.168%2026.7165%2010.168%2028.0052C10.168%2029.2939%2011.2126%2030.3385%2012.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5%2030.3385V30.1927V29.4635V28.0052V25.6719C12.5%2023.7389%2014.067%2022.1719%2016%2022.1719C17.933%2022.1719%2019.5%2023.7389%2019.5%2025.6719V30.3385C19.5%2032.2715%2017.933%2033.8385%2016%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cpath%20d='M24.5414%2024.224V25.088H26.3894C26.9294%2026.936%2027.8894%2028.544%2029.2814%2029.912C27.9854%2031.088%2026.3294%2031.94%2024.3134%2032.48L24.7694%2033.236C26.8094%2032.648%2028.5134%2031.724%2029.8814%2030.464C31.1774%2031.58%2032.8094%2032.504%2034.8014%2033.248L35.2694%2032.528C33.3494%2031.82%2031.7534%2030.932%2030.4814%2029.852C31.6574%2028.58%2032.5454%2026.984%2033.1334%2025.088H35.0054V24.224H30.4214C30.0374%2023.396%2029.6294%2022.688%2029.1734%2022.112L28.3094%2022.424C28.7894%2022.988%2029.1854%2023.588%2029.5094%2024.224H24.5414ZM27.2414%2025.088H32.2334C31.7294%2026.744%2030.9494%2028.148%2029.8814%2029.312C28.6334%2028.112%2027.7574%2026.708%2027.2414%2025.088ZM40.9574%2024.116C40.7174%2024.452%2040.4534%2024.8%2040.1774%2025.148H37.0094V25.844H39.6134C39.3254%2026.18%2039.0254%2026.516%2038.7134%2026.876C39.5414%2027.032%2040.3694%2027.212%2041.2094%2027.428C40.1534%2027.764%2038.7134%2027.932%2036.8894%2027.932L37.3574%2028.64C39.3974%2028.616%2041.0414%2028.304%2042.3014%2027.716C43.5134%2028.04%2044.7254%2028.412%2045.9254%2028.844L46.4294%2028.184C45.3134%2027.812%2044.2214%2027.488%2043.1654%2027.224C43.6574%2026.864%2044.1134%2026.408%2044.5454%2025.844H46.5614V25.148H41.1254C41.3174%2024.896%2041.5214%2024.632%2041.7374%2024.344L40.9574%2024.116ZM42.2054%2026.984C41.4494%2026.792%2040.7054%2026.636%2039.9734%2026.516C40.1534%2026.324%2040.3574%2026.096%2040.5734%2025.844H43.6214C43.2614%2026.276%2042.7814%2026.648%2042.2054%2026.984ZM46.5974%2023.144H42.2414C42.0974%2022.784%2041.9534%2022.448%2041.7854%2022.148L40.8854%2022.292C41.0654%2022.556%2041.2334%2022.832%2041.3894%2023.144H36.9494V24.836H37.7654V23.876H45.7814V24.836H46.5974V23.144ZM36.6374%2029.336V30.104H40.5854C39.8414%2030.872%2038.4734%2031.556%2036.4814%2032.156L36.9614%2032.924C39.1214%2032.132%2040.5854%2031.196%2041.3534%2030.116V33.176H42.2414V30.152C43.1294%2031.256%2044.6174%2032.156%2046.7054%2032.84L47.0774%2032.084C45.2414%2031.592%2043.8854%2030.932%2043.0214%2030.104H46.9214V29.336H42.2414V28.4H41.3534V29.336H36.6374Z'%20fill='white'/%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42985'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(9%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Za={class:"float-icon-setting"},es={class:"form-box"},ts={class:"form-item"},ns={class:"form-content"},os={class:"display-types"},as={class:"type-icon"},ss=["src"],is={key:1,class:"display-type"},rs={class:"type-icon"},ls={class:"type-name"},cs={key:0,class:"form-item"},us={class:"form-content"},ds={class:"form-item"},ps={class:"form-content"},fs={class:"number-input"},hs={class:"form-item"},_s={class:"form-content"},ms={class:"number-input"},gs={class:"form-item"},vs={class:"form-content"},ys={class:"form-item"},bs={class:"form-content"},ws={class:"form-item"},Cs={class:"form-content"},ks={__name:"float-icon-setting",props:{saveLoading:{type:Boolean,default:!1},form:{type:Object,default:()=>{}}},emits:["save"],setup(l,{expose:i,emit:s}){const n=l,e=s,t=ue({displayType:1,buttonText:"快来聊聊吧~",buttonIcon:"",bottomMargin:32,rightMargin:32,showUnreadCount:1,showNewMessageTip:1}),o=k=>{t.displayType=k},c=pe(()=>t.buttonIcon?t.displayType==3:!0),r=k=>{let v=k[0];o(3),En({file:v,category:"icon"}).then(C=>{t.buttonIcon=C.data.link})},p=()=>{t.rightMargin,(t.rightMargin==""||t.rightMargin==null)&&(t.rightMargin=0),(t.bottomMargin==""||t.rightMargin==null)&&(t.bottomMargin=0),e("save",he(t))};return $e(()=>n.form,k=>{Object.assign(t,k.floatBtn)},{immediate:!0}),i({handleSubmit:p}),(k,v)=>{const C=ge,w=io,x=wn,O=ve;return K(),oe(Ae,{title:"悬浮图标设置"},{icon:E(()=>[g(te(ro),{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),default:E(()=>[u("div",Za,[Q(ee(n.title)+" ",1),u("div",es,[u("div",ts,[v[11]||(v[11]=u("div",{class:"form-item-label"},"展示形式：",-1)),u("div",ns,[u("div",os,[u("div",{class:Ze(["display-type",{"is-checked":t.displayType==1}]),onClick:v[0]||(v[0]=N=>o(1))},v[8]||(v[8]=[u("div",{class:"type-icon"},[u("img",{src:Qa,alt:""})],-1),u("div",{class:"type-name"},"简洁",-1)]),2),u("div",{class:Ze(["display-type",{"is-checked":t.displayType==2}]),onClick:v[1]||(v[1]=N=>o(2))},v[9]||(v[9]=[u("div",{class:"type-icon"},[u("img",{src:Xa,alt:""})],-1),u("div",{class:"type-name"},"加文案",-1)]),2),t.buttonIcon?(K(),X("div",{key:0,class:Ze(["display-type",{"is-checked":t.displayType==3}]),onClick:v[2]||(v[2]=N=>o(3))},[u("div",as,[u("img",{src:t.buttonIcon,alt:"",title:""},null,8,ss)]),v[10]||(v[10]=u("div",{class:"type-name"},"自定义",-1))],2)):ne("",!0),c.value?(K(),X("div",is,[g(Bn,{onChange:r},{default:E(()=>[u("div",rs,[g(te(An),{style:{"font-size":"20px"}})])]),_:1}),u("div",ls,ee(t.buttonIcon?"上传图片":"自定义"),1)])):ne("",!0)])])]),t.displayType==2?(K(),X("div",cs,[v[12]||(v[12]=u("div",{class:"form-item-label"},"按钮文案：",-1)),u("div",us,[g(C,{placeholder:"请输入按钮文案",maxlength:15,style:{width:"315px"},value:t.buttonText,"onUpdate:value":v[3]||(v[3]=N=>t.buttonText=N)},null,8,["value"])])])):ne("",!0),u("div",ds,[v[14]||(v[14]=u("div",{class:"form-item-label"},"底边距：",-1)),u("div",ps,[u("div",fs,[g(w,{class:"input",value:t.bottomMargin,"onUpdate:value":v[4]||(v[4]=N=>t.bottomMargin=N)},null,8,["value"]),v[13]||(v[13]=u("span",{class:"unit"},"PX",-1))])])]),u("div",hs,[v[16]||(v[16]=u("div",{class:"form-item-label"},"右边距：",-1)),u("div",_s,[u("div",ms,[g(w,{class:"input",value:t.rightMargin,"onUpdate:value":v[5]||(v[5]=N=>t.rightMargin=N)},null,8,["value"]),v[15]||(v[15]=u("span",{class:"unit"},"PX",-1))])])]),u("div",gs,[v[17]||(v[17]=u("div",{class:"form-item-label"},"显示未读消息数：",-1)),u("div",vs,[g(x,{checked:t.showUnreadCount,"onUpdate:checked":v[6]||(v[6]=N=>t.showUnreadCount=N),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),u("div",ys,[v[18]||(v[18]=u("div",{class:"form-item-label"},"显示新消息提示：",-1)),u("div",bs,[g(x,{checked:t.showNewMessageTip,"onUpdate:checked":v[7]||(v[7]=N=>t.showNewMessageTip=N),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),u("div",ws,[v[20]||(v[20]=u("div",{class:"form-item-label"},null,-1)),u("div",Cs,[g(O,{type:"primary",loading:n.saveLoading,onClick:p},{default:E(()=>v[19]||(v[19]=[Q("保存")])),_:1,__:[19]},8,["loading"])])])])])]),_:1})}}},$s=ae(ks,[["__scopeId","data-v-a4615484"]]),As={class:"web-app-box"},Ss={class:"box-left"},Es={class:"box-wrapper"},Bs={class:"web-app-style form-box"},Is={class:"box-wrapper"},Ps={class:"sdk-code"},Rs={class:"box-wrapper"},Ts={class:"box-wrapper"},xs={class:"box-right"},Ms={class:"demo-box"},Ns=["src"],Ls={__name:"embed-website",setup(l){const i=Oe(),{robotInfo:s,external_config_pc:n}=De(i),{getRobot:e}=i,t=Va(s.value),o=()=>{xe(t),se.success("复制成功")},c=Y(),r=ue({headTitle:n.value.headTitle,headSubTitle:n.value.headSubTitle,headImage:n.value.headImage,lang:n.value.lang,pageStyle:n.value.pageStyle,floatBtn:n.value.floatBtn}),p=pe(()=>{let{pc_domain:N,robot_key:P}=s.value;return`${N}/web/#/chat?robot_key=${P}&language=zh-CN`});$e(r,N=>{v(N)});const k=N=>{v(N,"updataQuickComand")},v=(N,P)=>{document.getElementById("web-preview").contentWindow.postMessage({type:P||"onPreview",data:JSON.parse(JSON.stringify(N))},"*")},C={lang:[{required:!0,message:"请选择语言",trigger:"change"}],headTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>r.headImage?Promise.resolve():Promise.reject("请上传logo")}],pageStyle:{headBackgroundColor:[{required:!0,message:"请选择颜色",trigger:"change"}]}},w=()=>{const{id:N}=s.value;let P={...he(r)};Sn({id:N,external_config_pc:JSON.stringify(P)}).then(()=>{e(N),se.success("保存成功")})},x=()=>{c.value.validate().then(()=>{w()}).catch(N=>{})},O=N=>{r.floatBtn={...N},x()};return(N,P)=>{const V=Ve,M=ve,B=Ee,U=$n,m=St,q=At,L=_e;return K(),X("div",As,[u("div",Ss,[u("div",Es,[g(Ae,{title:"样式设置"},{icon:E(()=>[g(V,{name:"pc",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[g(M,{onClick:x,size:"small",type:"primary"},{default:E(()=>P[5]||(P[5]=[Q("保存")])),_:1,__:[5]})]),default:E(()=>[u("div",Bs,[g(L,{ref_key:"formRef",ref:c,layout:"vertical",model:r,rules:C},{default:E(()=>[g(B,{class:"form-item",label:"页面标题",name:"headTitle"},{default:E(()=>[g(Me,{avatar:r.headImage,"onUpdate:avatar":P[0]||(P[0]=R=>r.headImage=R),value:r.headTitle,"onUpdate:value":P[1]||(P[1]=R=>r.headTitle=R)},null,8,["avatar","value"])]),_:1}),g(B,{class:"form-item",label:"简介",name:"headSubTitle"},{default:E(()=>[g(U,{value:r.headSubTitle,"onUpdate:value":P[2]||(P[2]=R=>r.headSubTitle=R),placeholder:"简介将展示在客户端，不超过100个字符"},null,8,["value"])]),_:1}),g(B,{class:"form-item",label:"颜色",name:["pageStyle","headBackgroundColor"]},{default:E(()=>[g(Ga,{value:r.pageStyle.headBackgroundColor,"onUpdate:value":P[3]||(P[3]=R=>r.pageStyle.headBackgroundColor=R)},null,8,["value"])]),_:1}),g(B,{class:"form-item",label:"语言",name:"lang"},{default:E(()=>[g(q,{style:{width:"180px"},value:r.lang,"onUpdate:value":P[4]||(P[4]=R=>r.lang=R),placeholder:"请选择语言"},{default:E(()=>[g(m,{value:"zh-CN"},{default:E(()=>P[6]||(P[6]=[Q("简体中文")])),_:1,__:[6]}),g(m,{value:"en-US"},{default:E(()=>P[7]||(P[7]=[Q("English")])),_:1,__:[7]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1})]),u("div",Is,[g(Ae,{title:"将以下代码复制到网站代码的< /body>标签之前"},{icon:E(()=>[g(V,{name:"sdk",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[g(M,{onClick:o,size:"small"},{default:E(()=>P[8]||(P[8]=[Q("复制")])),_:1,__:[8]})]),default:E(()=>[u("div",Ps,[u("pre",null,[u("code",null,ee(te(t)),1)])])]),_:1})]),u("div",Rs,[g(xn,{type:te(s).app_id_embed,onUpdata:k},null,8,["type"])]),u("div",Ts,[g($s,{form:r,onSave:O},null,8,["form"])])]),u("div",xs,[u("div",Ms,[u("iframe",{id:"web-preview",src:p.value,frameborder:"0"},null,8,Ns)])])])}}},Us=ae(Ls,[["__scopeId","data-v-7e0969d7"]]),qs={class:"wechat-app-item"},Ds={class:"item-body"},Fs=["src"],Os={class:"app-info"},Vs={class:"app-name"},js={class:"app-desc"},Hs={class:"item-right"},zs={__name:"wechat-app-item",props:{item:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(l,{emit:i}){const s=i,n=l;function e(){s("edit",{...n.item})}function t(){s("delete",{...n.item})}return(o,c)=>{const r=Ve;return K(),X("div",qs,[u("div",Ds,[u("img",{class:"app-avatar",src:l.item.app_avatar,alt:""},null,8,Fs),u("div",Os,[u("div",Vs,ee(l.item.app_name),1),u("div",js,"Appid："+ee(l.item.app_id),1)])]),u("div",Hs,[u("span",{class:"action-btn edit-btn",onClick:e},[g(r,{name:"edit"})]),u("span",{class:"action-btn delete-btn",onClick:t},[g(r,{name:"delete"})])])])}}},Rt=ae(zs,[["__scopeId","data-v-5bc839ae"]]),Ks={class:"add-label"},Ws={__name:"add-wechat-app",props:{label:{type:String,default:""}},emits:["click"],setup(l,{emit:i}){const s=i,n=l,e=()=>{s("click")};return(t,o)=>(K(),X("div",{class:"add-wechat-app",onClick:e},[g(te(An),{class:"add-icon"}),u("span",Ks,ee(n.label),1)]))}},Tt=ae(Ws,[["__scopeId","data-v-9ff0b6b4"]]),Js="/assets/img/preview_01-MRp2-MBv.png",Ys="/assets/img/config_preview_01-BKZKQ3Os.png",Gs={key:0,class:"add-wechat-app-alert"},Qs={class:"alert-body"},Xs={class:"form-box"},Zs={class:"my-ip"},ei={class:"ip-text"},ti={key:1,class:"add-wechat-app-alert"},ni={class:"config-preview-box"},oi={class:"config-items"},ai={class:"config-item"},si={class:"config-value"},ii={class:"config-item"},ri={class:"config-value"},li={class:"config-item"},ci={class:"config-value"},mn="/upload/default/official_account_avatar.png",ui={__name:"add-wechat-official-account-alert",emits:["ok"],setup(l,{expose:i,emit:s}){const n=s,{robotInfo:e}=Se("robotInfo"),t=Y(!1),o=Y(1),c=Y(!1),r=Y(),p=ue({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:mn,app_type:"official_account"}),k={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>p.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},v=pe(()=>{let U=p.id?"编辑微信公众号":"添加微信公众号",m=o.value==1?"-填写公众号开发信息":"-服务器配置";return U+m}),C=({file:U,url:m})=>{p.app_avatar=U,p.app_avatar_url=m},w=ue({push_aeskey:"",push_token:"",push_url:""}),x=()=>{let U={...he(p)};delete U.app_avatar_url,Et(U).then(m=>{Object.assign(w,m.data),o.value=2,se.success("保存成功"),n("ok")})},O=()=>{r.value.validate().then(()=>{x()}).catch(U=>{})},N=()=>{t.value=!1},P=()=>{r.value.clearValidate(),r.value.resetFields(),t.value=!1},V=U=>{xe(U),se.success("复制成功")},M=()=>{V(e.wechat_ip)};return i({open:U=>{U?(U.app_avatar_url=U.app_avatar,U.app_avatar=""):U={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:mn,app_type:"official_account",wechat_ip:e.wechat_ip},o.value=1,Object.assign(p,U),t.value=!0}}),(U,m)=>{const q=ve,L=He,R=Ee,S=ge,f=_e,D=me;return K(),oe(D,{width:"1168px",open:t.value,"onUpdate:open":m[7]||(m[7]=I=>t.value=I),title:v.value,onCancel:P},{footer:E(()=>[o.value===1?(K(),oe(q,{key:"back",onClick:P},{default:E(()=>m[8]||(m[8]=[Q("取 消")])),_:1,__:[8]})):ne("",!0),o.value===1?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:O},{default:E(()=>m[9]||(m[9]=[Q("保存并进入下一步")])),_:1,__:[9]},8,["loading"])):ne("",!0),o.value===2?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:N},{default:E(()=>m[10]||(m[10]=[Q("已完成配置")])),_:1,__:[10]},8,["loading"])):ne("",!0)]),default:E(()=>[o.value===1?(K(),X("div",Gs,[g(L,{class:"tip-alert",message:"进入微信公众号后台（mp.weixin.qq.com），在【设置与开发-基本配置】获取开发者信息。",type:"info","show-icon":""}),u("div",Qs,[u("div",Xs,[g(f,{ref_key:"formRef",ref:r,layout:"vertical",model:p,rules:k},{default:E(()=>[g(R,{label:"公众号头像/名称",name:"app_name"},{default:E(()=>[g(Me,{autoUpload:!1,avatar:p.app_avatar_url,"onUpdate:avatar":m[0]||(m[0]=I=>p.app_avatar_url=I),value:p.app_name,"onUpdate:value":m[1]||(m[1]=I=>p.app_name=I),valueModifiers:{trim:!0},placeholder:"请输入您的公众号名称",onChangeAvatar:C},null,8,["avatar","value"])]),_:1}),g(R,{label:"AppId",name:"app_id"},{default:E(()=>[g(S,{value:p.app_id,"onUpdate:value":m[2]||(m[2]=I=>p.app_id=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),g(R,{label:"AppSecret",name:"app_secret"},{default:E(()=>[g(S,{value:p.app_secret,"onUpdate:value":m[3]||(m[3]=I=>p.app_secret=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1}),g(R,{label:"将以下IP添加到公众号IP白名单中",name:"wechat_ip",required:""},{default:E(()=>[u("div",Zs,[u("span",ei,ee(te(e).wechat_ip),1),u("a",{class:"copy-btn",onClick:M},"复 制")])]),_:1})]),_:1},8,["model"])]),m[11]||(m[11]=u("div",{class:"preview-box"},[u("img",{class:"preview-img",src:Js})],-1))])])):ne("",!0),o.value===2?(K(),X("div",ti,[g(L,{class:"tip-alert",message:"进入微信公众号后台（mp.weixin.qq.com），在【设置与开发-基本配置】中配置并启用服务器配置。请按照下图配置",type:"info","show-icon":""}),u("div",ni,[u("div",oi,[u("div",ai,[u("span",si,ee(w.push_url),1),u("span",{class:"copy-btn",onClick:m[4]||(m[4]=I=>V(w.push_url))},"复制")]),u("div",ii,[u("span",ri,ee(w.push_token),1),u("span",{class:"copy-btn",onClick:m[5]||(m[5]=I=>V(w.push_token))},"复制")]),u("div",li,[u("span",ci,ee(w.push_aeskey),1),u("span",{class:"copy-btn",onClick:m[6]||(m[6]=I=>V(w.push_aeskey))},"复制")])]),m[12]||(m[12]=u("img",{class:"config-preview-img",src:Ys},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},di=ae(ui,[["__scopeId","data-v-dcc62296"]]),pi={class:""},fi={class:"wechat-app-list"},hi={__name:"wechat-official-account",setup(l){const{robotInfo:i}=Se("robotInfo"),s=Y(),n=Y([]),e=()=>{Bt({robot_id:i.id,app_type:"official_account",app_name:""}).then(p=>{n.value=p.data})},t=()=>{s.value.open()},o=p=>{let k=3;const v=me.confirm({title:`确定移除${p.app_name}吗?`,icon:g(je),content:"移除后，机器人无法继续回复用户消息。",okText:k+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){It({id:p.id}).then(()=>{e(),se.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{k==1?(v.update({okText:"确定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(k-=1,v.update({okText:k+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},c=p=>{p.wechat_ip=i.wechat_ip,s.value.open({...p})},r=()=>{e()};return qe(()=>{e()}),(p,k)=>(K(),X("div",pi,[u("div",fi,[g(Tt,{label:"绑定公众号",onClick:t}),(K(!0),X(Te,null,Fe(n.value,v=>(K(),oe(Rt,{key:v.id,item:v,onEdit:c,onDelete:o},null,8,["item"]))),128))]),g(di,{ref_key:"addAppAlertRef",ref:s,onOk:r},null,512)]))}},_i=ae(hi,[["__scopeId","data-v-d9539ad9"]]),mi="/assets/img/preview_02-B1rWR-NK.png",gi="/assets/img/config_preview_02-BdpKevei.png",vi={key:0,class:"add-wechat-app-alert"},yi={class:"alert-body"},bi={class:"form-box"},wi={class:"my-ip"},Ci={class:"ip-text"},ki={key:1,class:"add-wechat-app-alert"},$i={class:"config-preview-box"},Ai={class:"config-items"},Si={class:"config-item"},Ei={class:"config-value"},Bi={class:"config-item"},Ii={class:"config-value"},Pi={class:"config-item"},Ri={class:"config-value"},gn="/upload/default/mini_program_avatar.png",Ti={__name:"add-wechat-mini-program-alert",emits:["ok"],setup(l,{expose:i,emit:s}){const n=s,{robotInfo:e}=Se("robotInfo"),t=Y(!1),o=Y(1),c=Y(!1),r=Y(),p=ue({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:gn,app_type:"mini_program"}),k={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>p.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},v=pe(()=>{let U=p.id?"编辑微信小程序":"添加微信小程序",m=o.value==1?"-填写小程序开发信息":"-服务器配置";return U+m}),C=({file:U,url:m})=>{p.app_avatar=U,p.app_avatar_url=m},w=ue({push_aeskey:"",push_token:"",push_url:""}),x=()=>{let U={...he(p)};delete U.app_avatar_url,Et(U).then(m=>{Object.assign(w,m.data),o.value=2,se.success("保存成功"),n("ok")})},O=()=>{r.value.validate().then(()=>{x()}).catch(U=>{})},N=()=>{t.value=!1},P=()=>{r.value.clearValidate(),r.value.resetFields(),t.value=!1},V=U=>{xe(U),se.success("复制成功")},M=()=>{V(e.wechat_ip)};return i({open:U=>{U?(U.app_avatar_url=U.app_avatar,U.app_avatar=""):U={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:gn,app_type:"mini_program",wechat_ip:e.wechat_ip},o.value=1,Object.assign(p,U),t.value=!0}}),(U,m)=>{const q=ve,L=He,R=Ee,S=ge,f=_e,D=me;return K(),oe(D,{width:"1168px",open:t.value,"onUpdate:open":m[7]||(m[7]=I=>t.value=I),title:v.value,onCancel:P},{footer:E(()=>[o.value===1?(K(),oe(q,{key:"back",onClick:P},{default:E(()=>m[8]||(m[8]=[Q("取 消")])),_:1,__:[8]})):ne("",!0),o.value===1?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:O},{default:E(()=>m[9]||(m[9]=[Q("保存并进入下一步")])),_:1,__:[9]},8,["loading"])):ne("",!0),o.value===2?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:N},{default:E(()=>m[10]||(m[10]=[Q("已完成配置")])),_:1,__:[10]},8,["loading"])):ne("",!0)]),default:E(()=>[o.value===1?(K(),X("div",vi,[g(L,{class:"tip-alert",message:"进入微信小程序后台（mp.weixin.qq.com），在【开发-开发管理-开发设置】中获取开发者信息",type:"info","show-icon":""}),u("div",yi,[u("div",bi,[g(f,{ref_key:"formRef",ref:r,layout:"vertical",model:p,rules:k},{default:E(()=>[g(R,{label:"小程序头像/名称",name:"app_name"},{default:E(()=>[g(Me,{autoUpload:!1,avatar:p.app_avatar_url,"onUpdate:avatar":m[0]||(m[0]=I=>p.app_avatar_url=I),value:p.app_name,"onUpdate:value":m[1]||(m[1]=I=>p.app_name=I),valueModifiers:{trim:!0},placeholder:"请输入您的小程序名称",onChangeAvatar:C},null,8,["avatar","value"])]),_:1}),g(R,{label:"AppId",name:"app_id"},{default:E(()=>[g(S,{value:p.app_id,"onUpdate:value":m[2]||(m[2]=I=>p.app_id=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),g(R,{label:"AppSecret",name:"app_secret"},{default:E(()=>[g(S,{value:p.app_secret,"onUpdate:value":m[3]||(m[3]=I=>p.app_secret=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1}),g(R,{label:"将以下IP添加到小程序IP白名单中，如未开启ip白名单保护可不添加",name:"wechat_ip",required:""},{default:E(()=>[u("div",wi,[u("span",Ci,ee(te(e).wechat_ip),1),u("a",{class:"copy-btn",onClick:M},"复 制")])]),_:1})]),_:1},8,["model"])]),m[11]||(m[11]=u("div",{class:"preview-box"},[u("img",{class:"preview-img",src:mi})],-1))])])):ne("",!0),o.value===2?(K(),X("div",ki,[g(L,{class:"tip-alert",message:"进入微信小程序后台（mp.weixin.qq.com），在【开发-开发管理-开发设置】中配置并启用消息推送。请按照下图配置。",type:"info","show-icon":""}),u("div",$i,[u("div",Ai,[u("div",Si,[u("span",Ei,ee(w.push_url),1),u("span",{class:"copy-btn",onClick:m[4]||(m[4]=I=>V(w.push_url))},"复制")]),u("div",Bi,[u("span",Ii,ee(w.push_token),1),u("span",{class:"copy-btn",onClick:m[5]||(m[5]=I=>V(w.push_token))},"复制")]),u("div",Pi,[u("span",Ri,ee(w.push_aeskey),1),u("span",{class:"copy-btn",onClick:m[6]||(m[6]=I=>V(w.push_aeskey))},"复制")])]),m[12]||(m[12]=u("img",{class:"config-preview-img",src:gi},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},xi=ae(Ti,[["__scopeId","data-v-7bbe77a3"]]),Mi={class:""},Ni={class:"wechat-app-list"},Li={__name:"wechat-mini-program",setup(l){const{robotInfo:i}=Se("robotInfo"),s=Y(),n=Y([]),e=()=>{Bt({robot_id:i.id,app_type:"mini_program",app_name:""}).then(p=>{n.value=p.data})},t=()=>{s.value.open()},o=p=>{let k=3;const v=me.confirm({title:`确定移除${p.app_name}吗?`,icon:g(je),content:"移除后，机器人无法继续回复用户消息。",okText:k+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){It({id:p.id}).then(()=>{e(),se.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{k==1?(v.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(k-=1,v.update({okText:k+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},c=p=>{p.wechat_ip=i.wechat_ip,s.value.open({...p})},r=()=>{e()};return qe(()=>{e()}),(p,k)=>(K(),X("div",Mi,[u("div",Ni,[g(Tt,{label:"绑定微信小程序",onClick:t}),(K(!0),X(Te,null,Fe(n.value,v=>(K(),oe(Rt,{key:v.id,item:v,onEdit:c,onDelete:o},null,8,["item"]))),128))]),g(xi,{ref_key:"addAppAlertRef",ref:s,onOk:r},null,512)]))}},Ui=ae(Li,[["__scopeId","data-v-ae8d32c8"]]),qi="/assets/img/preview_03-DXz9-3qW.png",Di="/assets/img/config_preview_03-DN1fPWUm.png",Fi={key:0,class:"add-wechat-app-alert"},Oi={class:"alert-body"},Vi={class:"form-box"},ji={key:1,class:"add-wechat-app-alert"},Hi={class:"config-preview-box"},zi={class:"config-items"},Ki={class:"config-item"},Wi={class:"config-value"},Ji={class:"config-item"},Yi={class:"config-value"},Gi={class:"config-item"},Qi={class:"config-value"},vn="/upload/default/wechat_kefu_avatar.png",Xi={__name:"add-wechat-customer-service-alert",emits:["ok"],setup(l,{expose:i,emit:s}){const n=s,{robotInfo:e}=Se("robotInfo"),t=Y(!1),o=Y(1),c=Y(!1),r=Y(),p=ue({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:vn,app_type:"wechat_kefu"}),k={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>p.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},v=pe(()=>{let M=p.id?"编辑微信客服":"添加微信客服",B=o.value==1?"-服务器配置":"-填写微信客服开发信息";return M+B}),C=({file:M,url:B})=>{p.app_avatar=M,p.app_avatar_url=B},w=ue({push_aeskey:"",push_token:"",push_url:""}),x=()=>{let M={...he(p)};delete M.app_avatar_url,Et(M).then(B=>{Object.assign(w,B.data),o.value=2,se.success("保存成功"),n("ok"),t.value=!1})},O=()=>{r.value.validate().then(()=>{x()}).catch(M=>{})},N=()=>{r.value&&(r.value.clearValidate(),r.value.resetFields()),t.value=!1},P=M=>{xe(M),se.success("复制成功")};return i({open:M=>{M?(M.app_avatar_url=M.app_avatar,M.app_avatar=""):M={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:vn,app_type:"wechat_kefu",wechat_ip:e.wechat_ip},o.value=1,Object.assign(p,M),t.value=!0}}),(M,B)=>{const U=ve,m=He,q=Ee,L=ge,R=_e,S=me;return K(),oe(S,{width:"1168px",open:t.value,"onUpdate:open":B[8]||(B[8]=f=>t.value=f),title:v.value,onCancel:N},{footer:E(()=>[g(U,{key:"back",onClick:N},{default:E(()=>B[9]||(B[9]=[Q("取 消")])),_:1,__:[9]}),o.value===1?(K(),oe(U,{key:"submit",type:"primary",loading:c.value,onClick:B[0]||(B[0]=f=>o.value=2)},{default:E(()=>B[10]||(B[10]=[Q("保存并进入下一步")])),_:1,__:[10]},8,["loading"])):ne("",!0),o.value===2?(K(),oe(U,{key:"submit",type:"primary",loading:c.value,onClick:O},{default:E(()=>B[11]||(B[11]=[Q("已完成配置")])),_:1,__:[11]},8,["loading"])):ne("",!0)]),default:E(()=>[o.value===2?(K(),X("div",Fi,[g(m,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入后获取开发者信息",type:"info","show-icon":""}),u("div",Oi,[u("div",Vi,[g(R,{ref_key:"formRef",ref:r,layout:"vertical",model:p,rules:k},{default:E(()=>[g(q,{label:"企业头像/名称",name:"app_name"},{default:E(()=>[g(Me,{autoUpload:!1,avatar:p.app_avatar_url,"onUpdate:avatar":B[1]||(B[1]=f=>p.app_avatar_url=f),value:p.app_name,"onUpdate:value":B[2]||(B[2]=f=>p.app_name=f),valueModifiers:{trim:!0},placeholder:"请输入您的企业名称",onChangeAvatar:C},null,8,["avatar","value"])]),_:1}),g(q,{label:"企业id",name:"app_id"},{default:E(()=>[g(L,{value:p.app_id,"onUpdate:value":B[3]||(B[3]=f=>p.app_id=f),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),g(q,{label:"企业Secret",name:"app_secret"},{default:E(()=>[g(L,{value:p.app_secret,"onUpdate:value":B[4]||(B[4]=f=>p.app_secret=f),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),B[12]||(B[12]=u("div",{class:"preview-box"},[u("img",{class:"preview-img",src:qi})],-1))])])):ne("",!0),o.value===1?(K(),X("div",ji,[g(m,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入。请按照下图配置",type:"info","show-icon":""}),u("div",Hi,[u("div",zi,[u("div",Ki,[u("span",Wi,ee(te(e).push_wechat_kefu),1),u("span",{class:"copy-btn",onClick:B[5]||(B[5]=f=>P(te(e).push_wechat_kefu))},"复制")]),u("div",Ji,[u("span",Yi,ee(te(e).push_token),1),u("span",{class:"copy-btn",onClick:B[6]||(B[6]=f=>P(te(e).push_token))},"复制")]),u("div",Gi,[u("span",Qi,ee(te(e).push_aeskey),1),u("span",{class:"copy-btn",onClick:B[7]||(B[7]=f=>P(te(e).push_aeskey))},"复制")])]),B[13]||(B[13]=u("img",{class:"config-preview-img",src:Di},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},Zi=ae(Xi,[["__scopeId","data-v-732d0ea4"]]),er={class:""},tr={class:"wechat-app-list"},nr={__name:"wechat-customer-service",setup(l){const{robotInfo:i}=Se("robotInfo"),s=Y(),n=Y([]),e=()=>{Bt({robot_id:i.id,app_type:"wechat_kefu",app_name:""}).then(p=>{n.value=p.data})},t=()=>{s.value.open()},o=p=>{let k=3;const v=me.confirm({title:`确定移除${p.app_name}吗?`,icon:g(je),content:"移除后，机器人无法继续回复用户消息。",okText:k+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){It({id:p.id}).then(()=>{e(),se.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{k==1?(v.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(k-=1,v.update({okText:k+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},c=p=>{p.wechat_ip=i.wechat_ip,s.value.open({...p})},r=()=>{e()};return qe(()=>{e()}),(p,k)=>{const v=He;return K(),X("div",er,[g(v,{class:"tip-alert",message:"绑定微信客服，用户通过微信客服咨询时由机器人自动回复",type:"info","show-icon":""}),u("div",tr,[g(Tt,{label:"绑定微信客服",onClick:t}),(K(!0),X(Te,null,Fe(n.value,C=>(K(),oe(Rt,{key:C.id,item:C,onEdit:c,onDelete:o},null,8,["item"]))),128))]),g(Zi,{ref_key:"addAppAlertRef",ref:s,onOk:r},null,512)])}}},or=ae(nr,[["__scopeId","data-v-826ac730"]]),ar={class:"external-services-page"},sr={class:"page-header"},ir={class:"page-body"},rr={class:"scroll-box"},yn="/robot/config/external-services/activeKey",lr={__name:"index",setup(l){const i=Oe(),{robotInfo:s}=De(i),{getRobot:n}=i,e={WebAPP:Oa,EmbedWebsite:Us,WeChatOfficialAccount:_i,WeChatMiniProgram:Ui,WeChatCustomerService:or},t=Y(localStorage.getItem(yn)||"WebAPP"),o=c=>{t.value=c.id,localStorage.setItem(yn,t.value)};return Gn("robotInfo",{robotInfo:s.value,getRobot:n}),(c,r)=>(K(),X("div",ar,[u("div",sr,[g(vo,{onChange:o,value:t.value,"onUpdate:value":r[0]||(r[0]=p=>t.value=p)},null,8,["value"])]),u("div",ir,[u("div",rr,[(K(),oe(Qn(e[t.value])))])])]))}},br=ae(lr,[["__scopeId","data-v-b2af2b70"]]);export{br as default};
