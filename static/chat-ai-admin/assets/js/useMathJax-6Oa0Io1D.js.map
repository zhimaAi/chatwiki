{"version":3,"file":"useMathJax-6Oa0Io1D.js","sources":["../../../../front-end/chat-ai-admin-vue/src/composables/useMathJax.js"],"sourcesContent":["// useMathJax.js\r\nimport { nextTick } from 'vue';\r\n\r\nconst MATHJAX_SRC = \"./libs/MathJax/es5/tex-mml-chtml.js\";\r\n\r\nexport function useMathJax() {\r\n\r\n  // 动态加载脚本的私有函数\r\n  const initMathJax = () => {\r\n    return new Promise((resolve, reject) => {\r\n      if (window.MathJax && window.MathJax.typesetPromise) {\r\n        resolve();\r\n        return;\r\n      }\r\n      const script = document.createElement('script');\r\n      script.src = MATHJAX_SRC;\r\n      script.async = true;\r\n      script.onload = () => resolve();\r\n      script.onerror = () => reject(new Error('MathJax 加载失败'));\r\n      document.head.appendChild(script);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 渲染函数\r\n   * @param {HTMLElement|string} target - 指定元素或选择器\r\n   */\r\n  const renderMath = async (target = null) => {\r\n    try {\r\n      await initMathJax(); // 确保脚本已加载\r\n      await nextTick();\r\n\r\n      if (window.MathJax.typesetPromise) {\r\n        const el = (target && target.value) ? target.value : target;\r\n\r\n        if (el instanceof HTMLElement) {\r\n          await window.MathJax.typesetPromise([el]);\r\n        } else {\r\n          // 首次进入或未传参时进行全局渲染\r\n          await window.MathJax.typesetPromise();\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('MathJax 渲染出错:', err);\r\n    }\r\n  };\r\n\r\n  return { renderMath };\r\n}\r\n"],"names":["MATHJAX_SRC","useMathJax","initMathJax","resolve","reject","script","target","nextTick","el","err"],"mappings":"6CAGA,MAAMA,EAAc,sCAEb,SAASC,GAAa,CAG3B,MAAMC,EAAc,IACX,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,GAAI,OAAO,SAAW,OAAO,QAAQ,eAAgB,CACnDD,IACA,MACF,CACA,MAAME,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,IAAML,EACbK,EAAO,MAAQ,GACfA,EAAO,OAAS,IAAMF,IACtBE,EAAO,QAAU,IAAMD,EAAO,IAAI,MAAM,cAAc,CAAC,EACvD,SAAS,KAAK,YAAYC,CAAM,CAClC,CAAC,EA2BH,MAAO,CAAE,WApBU,MAAOC,EAAS,OAAS,CAC1C,GAAI,CAIF,GAHA,MAAMJ,EAAW,EACjB,MAAMK,EAAQ,EAEV,OAAO,QAAQ,eAAgB,CACjC,MAAMC,EAAMF,GAAUA,EAAO,MAASA,EAAO,MAAQA,EAEjDE,aAAc,YAChB,MAAM,OAAO,QAAQ,eAAe,CAACA,CAAE,CAAC,EAGxC,MAAM,OAAO,QAAQ,gBAEzB,CACF,OAASC,EAAK,CACZ,QAAQ,MAAM,gBAAiBA,CAAG,CACpC,CACF,CAEmB,CACrB"}