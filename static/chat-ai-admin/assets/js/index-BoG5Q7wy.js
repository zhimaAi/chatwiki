import{b,j as C,f as x,X as D,Y as L,Z as y,$ as B}from"../../index-0TFHdij1.js";import{Y as W,al as q,a as c}from"./ui-antd-D3ZAJ1Vq.js";import{f as o,Y as r,ae as N,a5 as n,u,k as _,ad as T,a7 as V,_ as p}from"./vue-chunks-CXJTX1FC.js";import"./utils-yZpnICoG.js";const Y="/assets/img/client-download-pic-D_c9zEa_.png",z={class:"client-download-page"},E={key:0,class:"login-required-switch"},F={class:"page-body"},I={class:"app-info"},R={class:"banner"},j={__name:"index",setup(A){const m=C();let{role_type:f}=m;const{t:v}=x(),t=o(!1),w=()=>{B({client_side_login_switch:t.value?1:0}).then(()=>{c.success(v("common.saveSuccess"))})},g=o(""),i=o("Windows下载"),a=o(!1);let l=null;const d=()=>y({domain:""}).then(s=>(s.data.file_url?(a.value=!1,i.value="Windows下载",g.value=s.data.file_url,clearTimeout(l),l=null):(i.value="打包中...",a.value=!0,l=setTimeout(()=>{d()},5e3)),s)),h=()=>{a.value||d().then(s=>{s.data.file_url?L("",s.data.file_url):c.error("下载文件还没有准备好")})};return(()=>{D().then(s=>{t.value=s.data.client_side_login_switch==1})})(),(s,e)=>{const k=W;return p(),r("div",z,[u(f)!="3"?(p(),r("div",E,[e[1]||(e[1]=n("span",null,"需要登录：",-1)),_(k,{checked:t.value,"onUpdate:checked":e[0]||(e[0]=S=>t.value=S),onChange:w},null,8,["checked"])])):N("",!0),e[4]||(e[4]=n("h3",{class:"page-title"},"客户端下载",-1)),n("div",F,[n("div",I,[e[3]||(e[3]=n("div",{class:"app-name"},"ChatWiki电脑客户端",-1)),n("div",R,[e[2]||(e[2]=n("img",{src:Y,alt:""},null,-1)),n("div",{class:T(["download-btn",{disabled:a.value}]),onClick:h},[_(u(q),{class:"windows-icon"}),n("span",null,V(i.value),1)],2)])])])])}}},G=b(j,[["__scopeId","data-v-ab1de799"]]);export{G as default};
