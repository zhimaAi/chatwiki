import{_ as E}from"./cu-scroll-5W3_kglT.js";import{i as R,e as $,f as U}from"./index-CgXFvif9.js";import{A as z}from"./add-collaborator-yv3VkKUH.js";import{b as F,h as G,bG as H}from"../../index-CPkdGIiL.js";import{e as J,ab as L,f as r,r as Y,a1 as g,a2 as c,a5 as s,k as i,Y as o,ae as n,G as K,l as Q,u as l,a7 as P,F as f,_ as a}from"./vue-chunks-Ci-XTWEs.js";import{z as W,B as X,V as Z,U as B,a8 as tt,g as et,h as x,a9 as st,aa as at,y as ot,M as D,a as M,H as S}from"./ui-antd-Bw8cEW5z.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./utils-ChQO-_r6.js";const nt={class:"content-box"},it={key:0,class:"add-btn-block"},_t={class:"list-content"},lt={key:0,class:"user-block"},ct={class:"name-box"},dt={class:"name"},rt={class:"remark-text"},ut={key:0,class:"hover-btn-box"},pt={key:0},mt={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},ht=["onClick"],bt={class:"menu-header"},gt={key:0,class:"check-box"},ft=["onClick"],xt={class:"menu-header"},Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},Pt={key:0,class:"check-box"},Bt={class:"hover-btn-box"},Dt={key:0},Mt={key:1},St={key:2},Tt=["onClick"],It={__name:"index",setup(Nt){const T=G(),C=J(()=>T.user_name),u=L().query,p=r(H(u.form_id)),m=r([]),I=Y({object_id:u.form_id,object_type:3}),d=()=>{R({...I}).then(_=>{let t=_.data||[];m.value=t})};d();const j=r(null),N=()=>{j.value.show(m.value,[{object_id:+u.form_id,object_type:3,operate_rights:4}])},y=(_,t)=>{let k=t==4?"管理":t==2?"编辑":"查看";D.confirm({title:"提示?",icon:i(S),content:"确认修改该协作者权限为【"+k+"】",okText:"确认",cancelText:"取消",onOk:()=>{let v=[{object_id:+_.object_id,object_type:+_.object_type,operate_rights:+t}];$({identity_ids:_.identity_id,identity_type:_.identity_type,object_array:JSON.stringify(v)}).then(O=>{M.success("修改成功"),d()})},onCancel(){}})},V=_=>{D.confirm({title:"提示?",icon:i(S),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{U({identity_id:_.identity_id,identity_type:_.identity_type,object_id:_.object_id,object_type:_.object_type}).then(t=>{M.success("删除成功"),d()})},onCancel(){}})},q=r([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(_,t)=>{const k=X,v=Z,O=tt,w=ot,A=E;return a(),g(A,null,{default:c(()=>[s("div",nt,[t[7]||(t[7]=s("div",{class:"page-title"},"权限管理",-1)),p.value==4?(a(),o("div",it,[i(k,{type:"primary",onClick:N,icon:Q(l(W))},{default:c(()=>t[0]||(t[0]=[K("添加协助者")])),_:1,__:[0]},8,["icon"])])):n("",!0),s("div",_t,[i(w,{columns:q.value,"data-source":m.value,pagination:!1},{bodyCell:c(({column:h,record:e})=>[h.key==="name"?(a(),o("div",lt,[i(v,{shape:"square",src:e.avatar,size:40},{icon:c(()=>[e.avatar?n("",!0):(a(),g(l(B),{key:0}))]),_:2},1032,["src"]),s("div",ct,[s("div",dt,P(e.user_name),1),s("div",rt,P(e.name),1)])])):n("",!0),h.key==="operate_rights"?(a(),o(f,{key:1},[p.value==2||e.user_name==C.value?(a(),o("div",ut,[e.operate_rights==4?(a(),o("span",pt,"管理")):n("",!0),e.operate_rights==2?(a(),o("span",mt,"编辑")):n("",!0),e.operate_rights==1?(a(),o("span",yt,"查看")):n("",!0)])):e.role_type==1||e.is_creator==1?(a(),o("div",kt,"管理")):(a(),g(O,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:c(()=>[s("div",vt,[s("div",{class:"role-menu",onClick:b=>y(e,4)},[s("div",bt,[i(l(B)),t[1]||(t[1]=s("span",{class:"title"},"管理",-1))]),t[2]||(t[2]=s("div",{class:"desc"},"可编辑，可删除，可查看",-1)),e.operate_rights==4?(a(),o("div",gt,[i(l(x))])):n("",!0)],8,ht),s("div",{class:"role-menu",onClick:b=>y(e,2)},[s("div",xt,[i(l(st)),t[3]||(t[3]=s("span",{class:"title"},"编辑",-1))]),t[4]||(t[4]=s("div",{class:"desc"},"可编辑，可查看",-1)),e.operate_rights==2?(a(),o("div",Ct,[i(l(x))])):n("",!0)],8,ft),s("div",{class:"role-menu",onClick:b=>y(e,1)},[s("div",Ot,[i(l(at)),t[5]||(t[5]=s("span",{class:"title"},"查看",-1))]),t[6]||(t[6]=s("div",{class:"desc"},"仅查看",-1)),e.operate_rights==1?(a(),o("div",Pt,[i(l(x))])):n("",!0)],8,jt)])]),default:c(()=>[s("div",Bt,[e.operate_rights==4?(a(),o("span",Dt,"管理")):n("",!0),e.operate_rights==2?(a(),o("span",Mt,"编辑")):n("",!0),e.operate_rights==1?(a(),o("span",St,"查看")):n("",!0),i(l(et))])]),_:2},1024))],64)):n("",!0),h.key==="action"?(a(),o(f,{key:2},[p.value==4&&e.user_name!=C.value?(a(),o(f,{key:0},[e.role_type!=1&&e.is_creator!=1?(a(),o("a",{key:0,onClick:b=>V(e)},"移除",8,Tt)):n("",!0)],64)):n("",!0)],64)):n("",!0)]),_:1},8,["columns","data-source"])])]),i(z,{onOk:d,ref_key:"addCollaboratorRef",ref:j},null,512)]),_:1})}}},Ft=F(It,[["__scopeId","data-v-943909d0"]]);export{Ft as default};
