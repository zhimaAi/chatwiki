{"version":3,"file":"date-BMtcJDpd.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/export-record/components/date.vue"],"sourcesContent":["<template>\r\n  <div class=\"zm-date\">\r\n    <div class=\"date-btn\">\r\n      <a-radio-group v-model:value=\"create_time_type\" @change=\"handleTagChange\">\r\n        <a-radio-button\r\n          class=\"date-btn-button\"\r\n          v-for=\"item in tagDateArr\"\r\n          :value=\"item.key\"\r\n          :key=\"item.key\"\r\n        >\r\n          {{ item.label }}\r\n        </a-radio-button>\r\n      </a-radio-group>\r\n    </div>\r\n    <div class=\"date-content\">\r\n      <a-range-picker\r\n        v-model:value=\"range\"\r\n        @change=\"handleDateChange\"\r\n        format=\"YYYY-MM-DD\"\r\n        :disabledDate=\"disabledDate\"\r\n        :allowClear=\"false\"\r\n      ></a-range-picker>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport dayjs from 'dayjs'\r\nimport { ref, onMounted, reactive, watch } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { message } from 'ant-design-vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.export-record.components.date')\r\n\r\nconst props = defineProps({\r\n  datekey: {\r\n    type: String,\r\n    default: ''\r\n  }\r\n})\r\n\r\nconst create_time_type = ref(1)\r\n\r\nconst emit = defineEmits(['dateChange'])\r\n\r\nlet tagDateArr = reactive([\r\n  {\r\n    label: t('label_last_7_days'),\r\n    value: true,\r\n    key: 2,\r\n    start_date: dayjs().subtract(6, 'day'),\r\n    end_date: dayjs().subtract(0, 'day')\r\n  },\r\n  {\r\n    label: t('label_last_14_days'),\r\n    value: false,\r\n    key: 3,\r\n    start_date: dayjs().subtract(13, 'day'),\r\n    end_date: dayjs().subtract(0, 'day')\r\n  },\r\n  {\r\n    label: t('label_last_30_days'),\r\n    value: false,\r\n    key: 4,\r\n    start_date: dayjs().subtract(29, 'day'),\r\n    end_date: dayjs().subtract(0, 'day')\r\n  }\r\n])\r\n\r\nconst start_time = ref(null)\r\nconst end_time = ref(null)\r\nconst range = ref([])\r\n\r\n// 创建一个禁用今天之后日期的函数\r\nconst disabledDate = (current) => {\r\n  // 如果当前日期大于或等于今天，则禁用\r\n  return current >= dayjs().subtract(0, 'day')\r\n}\r\n\r\nconst handleTagChange = () => {\r\n  let key = create_time_type.value\r\n\r\n  let dateItem = null\r\n  tagDateArr.forEach((item) => {\r\n    if (item.key == key) {\r\n      dateItem = item\r\n    }\r\n  })\r\n\r\n  range.value = [dateItem.start_date, dateItem.end_date]\r\n  start_time.value = dateItem.start_date.startOf('day').unix()\r\n  end_time.value = dateItem.end_date.endOf('day').unix()\r\n  search()\r\n}\r\n\r\nconst handleDateChange = (dates, dateStrings) => {\r\n  start_time.value = dates[0].startOf('day').unix()\r\n  end_time.value = dates[1].endOf('day').unix()\r\n  create_time_type.value = 1\r\n  search()\r\n}\r\n\r\nconst search = () => {\r\n  emit('dateChange', { start_time: start_time.value, end_time: end_time.value })\r\n}\r\n\r\nonMounted(() => {\r\n  create_time_type.value = parseInt(props.datekey)\r\n  handleTagChange()\r\n})\r\n\r\nwatch(\r\n  () => props.datekey,\r\n  (newval, oldVla) => {\r\n    create_time_type.value = parseInt(props.datekey.split('-')[0])\r\n    handleTagChange()\r\n  }\r\n)\r\n</script>\r\n<style lang=\"less\">\r\n.zm-date {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .date-btn {\r\n    margin-right: 8px;\r\n\r\n    .date-btn-button {\r\n      padding-left: 16px;\r\n      padding-right: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","props","__props","create_time_type","ref","emit","__emit","tagDateArr","reactive","dayjs","start_time","end_time","range","disabledDate","current","handleTagChange","key","dateItem","item","search","handleDateChange","dates","dateStrings","onMounted","watch","newval","oldVla","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_a_radio_group","$event","_Fragment","_renderList","_unref","_createBlock","_component_a_radio_button","_createTextVNode","_toDisplayString","_hoisted_3","_component_a_range_picker"],"mappings":"ocA+BA,KAAM,CAAE,EAAAA,CAAC,EAAKC,EAAQ,wDAAwD,EAExEC,EAAQC,EAORC,EAAmBC,EAAI,CAAC,EAExBC,EAAOC,EAEb,IAAIC,EAAaC,EAAS,CACxB,CACE,MAAOT,EAAE,mBAAmB,EAC5B,MAAO,GACP,IAAK,EACL,WAAYU,EAAK,EAAG,SAAS,EAAG,KAAK,EACrC,SAAUA,EAAK,EAAG,SAAS,EAAG,KAAK,CACvC,EACE,CACE,MAAOV,EAAE,oBAAoB,EAC7B,MAAO,GACP,IAAK,EACL,WAAYU,EAAK,EAAG,SAAS,GAAI,KAAK,EACtC,SAAUA,EAAK,EAAG,SAAS,EAAG,KAAK,CACvC,EACE,CACE,MAAOV,EAAE,oBAAoB,EAC7B,MAAO,GACP,IAAK,EACL,WAAYU,EAAK,EAAG,SAAS,GAAI,KAAK,EACtC,SAAUA,EAAK,EAAG,SAAS,EAAG,KAAK,CACvC,CACA,CAAC,EAED,MAAMC,EAAaN,EAAI,IAAI,EACrBO,EAAWP,EAAI,IAAI,EACnBQ,EAAQR,EAAI,EAAE,EAGdS,EAAgBC,GAEbA,GAAWL,EAAK,EAAG,SAAS,EAAG,KAAK,EAGvCM,EAAkB,IAAM,CAC5B,IAAIC,EAAMb,EAAiB,MAEvBc,EAAW,KACfV,EAAW,QAASW,GAAS,CACvBA,EAAK,KAAOF,IACdC,EAAWC,EAEf,CAAC,EAEDN,EAAM,MAAQ,CAACK,EAAS,WAAYA,EAAS,QAAQ,EACrDP,EAAW,MAAQO,EAAS,WAAW,QAAQ,KAAK,EAAE,KAAI,EAC1DN,EAAS,MAAQM,EAAS,SAAS,MAAM,KAAK,EAAE,KAAI,EACpDE,EAAM,CACR,EAEMC,EAAmB,CAACC,EAAOC,IAAgB,CAC/CZ,EAAW,MAAQW,EAAM,CAAC,EAAE,QAAQ,KAAK,EAAE,KAAI,EAC/CV,EAAS,MAAQU,EAAM,CAAC,EAAE,MAAM,KAAK,EAAE,KAAI,EAC3ClB,EAAiB,MAAQ,EACzBgB,EAAM,CACR,EAEMA,EAAS,IAAM,CACnBd,EAAK,aAAc,CAAE,WAAYK,EAAW,MAAO,SAAUC,EAAS,MAAO,CAC/E,EAEA,OAAAY,EAAU,IAAM,CACdpB,EAAiB,MAAQ,SAASF,EAAM,OAAO,EAC/Cc,EAAe,CACjB,CAAC,EAEDS,EACE,IAAMvB,EAAM,QACZ,CAACwB,EAAQC,IAAW,CAClBvB,EAAiB,MAAQ,SAASF,EAAM,QAAQ,MAAM,GAAG,EAAE,CAAC,CAAC,EAC7Dc,EAAe,CACjB,CACF,4BAnHE,OAAAY,EAAA,EAAAC,EAsBM,MAtBNC,EAsBM,CArBJC,EAWM,MAXNC,EAWM,CAVJC,EASgBC,EAAA,CATO,MAAO9B,EAAA,sCAAAA,EAAgB,MAAA+B,GAAG,SAAQnB,cAGrD,IAA0B,QAF5Ba,EAOiBO,EAAA,KAAAC,EALAC,EAAA9B,CAAA,EAARW,QAFToB,EAOiBC,EAAA,CANf,MAAM,kBAEL,MAAOrB,EAAK,IACZ,IAAKA,EAAK,gBAEX,IAAgB,CAAbsB,EAAAC,EAAAvB,EAAK,KAAK,EAAA,CAAA,uDAInBY,EAQM,MARNY,EAQM,CAPJV,EAMkBW,EAAA,CALR,MAAO/B,EAAA,sCAAAA,EAAK,MAAAsB,GACnB,SAAQd,EACT,OAAO,aACN,aAAcP,EACd,WAAY"}