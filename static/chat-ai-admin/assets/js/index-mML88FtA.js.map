{"version":3,"file":"index-mML88FtA.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/components/left-menus.vue","../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"left-menu-box\">\r\n    <a-menu class=\"left-menu\" :selectedKeys=\"selectedKeys\" @click=\"handleChangeMenu\">\r\n      <router-link\r\n        class=\"default-color\"\r\n        :to=\"{ path: item.path, query: query }\"\r\n        v-for=\"item in items\"\r\n        :key=\"item.key\"\r\n      >\r\n        <a-menu-item :icon=\"item.icon\" :path=\"item.path\" :key=\"item.key\">{{\r\n          item.label\r\n        }}</a-menu-item>\r\n      </router-link>\r\n    </a-menu>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, h, computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport SvgIcon from '@/components/svg-icon/index.vue'\r\nimport { UserOutlined } from '@ant-design/icons-vue'\r\n\r\nconst { t } = useI18n('views.database.database-detail.components.left-menus')\r\n\r\nconst emit = defineEmits(['changeMenu'])\r\nconst route = useRoute()\r\nconst query = route.query\r\nconst selectedKeys = computed(() => {\r\n  return [route.path.split('/')[3]]\r\n})\r\n\r\nconst items = ref([\r\n  {\r\n    key: 'field-manage',\r\n    id: 'field-manage',\r\n    icon: () =>\r\n      h('span', {}, [\r\n        h(SvgIcon, {\r\n          name: 'field-menu-icon',\r\n          class: 'menu-icon'\r\n        }),\r\n      ]),\r\n    label: t('menu_field_manage'),\r\n\r\n    title: t('menu_field_manage'),\r\n    path: '/database/details/field-manage'\r\n  },\r\n  {\r\n    key: 'database-manage',\r\n    id: 'database-manage',\r\n    icon: () =>\r\n      h('span', {}, [\r\n        h(SvgIcon, {\r\n          name: 'database-menu-icon',\r\n          class: 'menu-icon'\r\n        }),\r\n      ]),\r\n    label: t('menu_database_manage'),\r\n    title: t('menu_database_manage'),\r\n    path: '/database/details/database-manage'\r\n  },\r\n  // {\r\n  //   key: 'role-permission',\r\n  //   id: 'role-permission',\r\n  //   icon: () =>\r\n  //     h('span', {}, [\r\n  //       h(UserOutlined),\r\n  //     ]),\r\n  //   label: '权限管理',\r\n  //   title: '权限管理',\r\n  //   path: '/database/details/role-permission'\r\n  // }\r\n])\r\n\r\nconst handleChangeMenu = ({ item }) => {\r\n  if (selectedKeys.value.includes(item.id)) {\r\n    return\r\n  }\r\n\r\n  emit('changeMenu', item)\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.left-menu-box {\r\n  .default-color {\r\n    color: inherit;\r\n  }\r\n  .left-menu {\r\n    border-right: 0;\r\n\r\n    ::v-deep(.menu-icon) {\r\n      color: #a1a7b3;\r\n      font-size: 16px;\r\n      vertical-align: -3px;\r\n    }\r\n    ::v-deep(.ant-menu-item-selected .menu-icon) {\r\n      color: #2475fc;\r\n    }\r\n    ::v-deep(.ant-menu-item-icon +span){\r\n      margin-left: 4px;\r\n    }\r\n    ::v-deep(.ant-menu-item-icon){\r\n      vertical-align: -3px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"details-library-page\">\r\n    <div class=\"between-content-box\">\r\n      <div class=\"layout-left\">\r\n        <div class=\"library-name-box\">\r\n          <img class=\"avatar\" src=\"@/assets/img/database/base-icon.svg\" alt=\"\" />\r\n          <div class=\"name\">\r\n            {{ dataBaseInfo.name }}\r\n          </div>\r\n          <svg-icon @click=\"toEdit\" name=\"edit\"></svg-icon>\r\n        </div>\r\n        <div class=\"left-menu-box\">\r\n          <LeftMenus></LeftMenus>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"right-content-box\">\r\n        <router-view></router-view>\r\n      </div>\r\n    </div>\r\n    <AddDataSheet @ok=\"getInfo\" ref=\"addDataSheetRef\"></AddDataSheet>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from 'vue-router'\r\nimport { EditOutlined } from '@ant-design/icons-vue'\r\nimport LeftMenus from './components/left-menus.vue'\r\nimport { useDatabaseStore } from '@/stores/modules/database'\r\nimport { computed, ref, defineComponent } from 'vue'\r\nimport AddDataSheet from '../database-list/components/add-data-sheet.vue'\r\nimport { getDatabasePermission } from '@/utils/permission'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    LeftMenus,\r\n    AddDataSheet,\r\n    EditOutlined\r\n  },\r\n\r\n  async beforeRouteEnter(to, from, next) {\r\n    let key = getDatabasePermission(to.query.form_id)\r\n    if (key == 0 || key == 1) {\r\n      next(`/no-permission`)\r\n      return\r\n    }\r\n    next()\r\n  },\r\n\r\n  setup() {\r\n    const databaseStore = useDatabaseStore()\r\n    const rotue = useRoute()\r\n    const query = rotue.query\r\n\r\n    const dataBaseInfo = computed(() => {\r\n      return databaseStore.databaseInfo\r\n    })\r\n    const getInfo = () => {\r\n      databaseStore.getDatabaseInfo({ id: query.form_id })\r\n    }\r\n    getInfo()\r\n\r\n    const addDataSheetRef = ref(null)\r\n    const toEdit = () => {\r\n      addDataSheetRef.value.show({\r\n        ...databaseStore.databaseInfo\r\n      })\r\n    }\r\n\r\n    return {\r\n      dataBaseInfo,\r\n      getInfo,\r\n      toEdit,\r\n      addDataSheetRef\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<!-- <script setup>\r\nimport { useRoute } from 'vue-router'\r\nimport { EditOutlined } from '@ant-design/icons-vue'\r\nimport LeftMenus from './components/left-menus.vue'\r\nimport { useDatabaseStore } from '@/stores/modules/database'\r\nimport { computed, ref } from 'vue'\r\nimport AddDataSheet from '../database-list/components/add-data-sheet.vue'\r\nconst databaseStore = useDatabaseStore()\r\nconst rotue = useRoute()\r\nconst query = rotue.query\r\n\r\nconst dataBaseInfo = computed(() => {\r\n  return databaseStore.databaseInfo\r\n})\r\nconst getInfo = () => {\r\n  databaseStore.getDatabaseInfo({ id: query.form_id })\r\n}\r\ngetInfo()\r\n\r\nconst addDataSheetRef = ref(null)\r\nconst toEdit = () => {\r\n  addDataSheetRef.value.show({\r\n    ...databaseStore.databaseInfo\r\n  })\r\n}\r\n</script> -->\r\n\r\n<style lang=\"less\" scoped>\r\n.details-library-page {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #fff;\r\n  border-radius: 2px;\r\n}\r\n.layout-left {\r\n  width: 256px;\r\n  border-right: 1px solid rgba(5, 5, 5, 0.06);\r\n  .library-name-box {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 24px 24px 16px 24px;\r\n    gap: 8px;\r\n    .avatar {\r\n      width: 20px;\r\n      height: 20px;\r\n      border-radius: 2px;\r\n    }\r\n    .name {\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      color: #262626;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      max-width: 158px;\r\n    }\r\n    .svg-action {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n.between-content-box {\r\n  display: flex;\r\n  flex: 1;\r\n  overflow: hidden;\r\n  .left-menu-box {\r\n    width: 100%;\r\n    ::v-deep(.ant-menu-vertical) {\r\n      border-right: none;\r\n    }\r\n  }\r\n  .right-content-box {\r\n    flex: 1;\r\n    overflow: hidden;\r\n    padding: 24px;\r\n    padding-right: 0;\r\n  }\r\n}\r\n</style>\r\n"],"names":["useI18n","emit","__emit","route","useRoute","query","selectedKeys","computed","items","ref","h","SvgIcon","handleChangeMenu","item","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_menu","_Fragment","_renderList","_createBlock","_component_router_link","_unref","_component_a_menu_item","_createTextVNode","_toDisplayString","_sfc_main","defineComponent","LeftMenus","AddDataSheet","EditOutlined","to","from","next","key","getDatabasePermission","databaseStore","useDatabaseStore","dataBaseInfo","getInfo","addDataSheetRef","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementVNode","_imports_0","_ctx","_component_svg_icon","_component_LeftMenus","_component_router_view","_component_AddDataSheet"],"mappings":"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"}