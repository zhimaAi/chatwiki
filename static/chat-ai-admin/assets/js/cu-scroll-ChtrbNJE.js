const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/auto-track-Dez9l_v8.js","assets/js/vue-chunks-yZ4gwLzA.js","assets/js/utils-smNh_pj2.js","index-CuFGOJXl.js","assets/js/ui-antd-BKjlZQNA.js","assets/css/index-BHsIhMsI.css","assets/js/pull-up.esm-DIiTC7VE.js","assets/js/observe-dom.esm-B25JyVKH.js","assets/js/index-M6XOATGj.js","assets/js/index-Bh62dvhH.js","assets/js/is-plan-event-enabled-DS1Agtkw.js","assets/js/index-DcCxEPNh.js","assets/js/index-CKuPApdr.js","assets/js/index-e6sRI4Lz.js"])))=>i.map(i=>d[i]);
var Hq=Object.defineProperty;var Yq=(r,e,t)=>e in r?Hq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var wr=(r,e,t)=>Yq(r,typeof e!="symbol"?e+"":e,t);import{K as G0,S as Qu,R as Xq,Y as op,_ as ap,a5 as Ju,n as $q,a7 as qP,A as Kq,F as Zq,a9 as Qq,e as Jq,k as N_,f as ez,o as tz,y as rz,D as nz,a3 as iz}from"./vue-chunks-yZ4gwLzA.js";import{c as oz}from"./utils-smNh_pj2.js";import{a as Ta,b as zC,d as az}from"../../index-CuFGOJXl.js";import{B as yh,M as sz,S as uz,P as lz}from"./pull-up.esm-DIiTC7VE.js";import{O as cz}from"./observe-dom.esm-B25JyVKH.js";function RT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function fz(r){if(Array.isArray(r))return r}function hz(r){if(Array.isArray(r))return RT(r)}function xl(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function dz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,M5(n.key),n)}}function Sl(r,e,t){return e&&dz(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function po(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=GC(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function D5(r,e,t){return(e=M5(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vz(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function pz(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function gz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fn(r,e){return fz(r)||pz(r,e)||GC(r,e)||gz()}function d0(r){return hz(r)||vz(r)||GC(r)||yz()}function mz(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function M5(r){var e=mz(r,"string");return typeof e=="symbol"?e:e+""}function Wn(r){"@babel/helpers - typeof";return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(r)}function GC(r,e){if(r){if(typeof r=="string")return RT(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?RT(r,e):void 0}}var zn=typeof window>"u"?null:window,zP=zn?zn.navigator:null;zn&&zn.document;var bz=Wn(""),L5=Wn({}),_z=Wn(function(){}),wz=typeof HTMLElement>"u"?"undefined":Wn(HTMLElement),fg=function(e){return e&&e.instanceString&&gn(e.instanceString)?e.instanceString():null},Ct=function(e){return e!=null&&Wn(e)==bz},gn=function(e){return e!=null&&Wn(e)===_z},Gr=function(e){return!Lo(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},xr=function(e){return e!=null&&Wn(e)===L5&&!Gr(e)&&e.constructor===Object},Ez=function(e){return e!=null&&Wn(e)===L5},ot=function(e){return e!=null&&Wn(e)===Wn(1)&&!isNaN(e)},Oz=function(e){return ot(e)&&Math.floor(e)===e},v0=function(e){if(wz!=="undefined")return e!=null&&e instanceof HTMLElement},Lo=function(e){return hg(e)||N5(e)},hg=function(e){return fg(e)==="collection"&&e._private.single},N5=function(e){return fg(e)==="collection"&&!e._private.single},VC=function(e){return fg(e)==="core"},j5=function(e){return fg(e)==="stylesheet"},xz=function(e){return fg(e)==="event"},vl=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Sz=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Tz=function(e){return xr(e)&&ot(e.x1)&&ot(e.x2)&&ot(e.y1)&&ot(e.y2)},Cz=function(e){return Ez(e)&&gn(e.then)},Pz=function(){return zP&&zP.userAgent.match(/msie|trident|edge/i)},nd=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var n=function(){var o=this,a=arguments,s,u=t.apply(o,a),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return n.cache={},n},WC=nd(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),V0=nd(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),F5=nd(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),GP=function(e){return vl(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},el=function(e,t){return e.slice(-1*t.length)===t},Gn="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Az="rgb[a]?\\(("+Gn+"[%]?)\\s*,\\s*("+Gn+"[%]?)\\s*,\\s*("+Gn+"[%]?)(?:\\s*,\\s*("+Gn+"))?\\)",Rz="rgb[a]?\\((?:"+Gn+"[%]?)\\s*,\\s*(?:"+Gn+"[%]?)\\s*,\\s*(?:"+Gn+"[%]?)(?:\\s*,\\s*(?:"+Gn+"))?\\)",Iz="hsl[a]?\\(("+Gn+")\\s*,\\s*("+Gn+"[%])\\s*,\\s*("+Gn+"[%])(?:\\s*,\\s*("+Gn+"))?\\)",kz="hsl[a]?\\((?:"+Gn+")\\s*,\\s*(?:"+Gn+"[%])\\s*,\\s*(?:"+Gn+"[%])(?:\\s*,\\s*(?:"+Gn+"))?\\)",Dz="\\#[0-9a-fA-F]{3}",Mz="\\#[0-9a-fA-F]{6}",B5=function(e,t){return e<t?-1:e>t?1:0},Lz=function(e,t){return-1*B5(e,t)},jt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o];r[a]=n[a]}}return r},Nz=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,o,a=16;return t?(n=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(n=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[n,i,o]}},jz=function(e){var t,n,i,o,a,s,u,l;function c(v,p,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?v+(p-v)*6*m:m<1/2?p:m<2/3?v+(p-v)*(2/3-m)*6:v}var f=new RegExp("^"+Iz+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,o=parseFloat(f[3]),o<0||o>100)||(o=o/100,a=f[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var h=o<.5?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*c(d,h,n+1/3)),u=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}t=[s,u,l,a]}return t},Fz=function(e){var t,n=new RegExp("^"+Az+"$").exec(e);if(n){t=[];for(var i=[],o=1;o<=3;o++){var a=n[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},Bz=function(e){return Uz[e.toLowerCase()]},U5=function(e){return(Gr(e)?e:null)||Bz(e)||Nz(e)||Fz(e)||jz(e)},Uz={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q5=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(xr(a))throw Error("Tried to set map with object key");o<n.length-1?(t[a]==null&&(t[a]={}),t=t[a]):t[a]=e.value}},z5=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(xr(a))throw Error("Tried to get map with object key");if(t=t[a],t==null)return t}return t},Ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var j_,VP;function vg(){if(VP)return j_;VP=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return j_=r,j_}var F_,WP;function qz(){if(WP)return F_;WP=1;var r=typeof Ky=="object"&&Ky&&Ky.Object===Object&&Ky;return F_=r,F_}var B_,HP;function W0(){if(HP)return B_;HP=1;var r=qz(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return B_=t,B_}var U_,YP;function zz(){if(YP)return U_;YP=1;var r=W0(),e=function(){return r.Date.now()};return U_=e,U_}var q_,XP;function Gz(){if(XP)return q_;XP=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return q_=e,q_}var z_,$P;function Vz(){if($P)return z_;$P=1;var r=Gz(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return z_=t,z_}var G_,KP;function HC(){if(KP)return G_;KP=1;var r=W0(),e=r.Symbol;return G_=e,G_}var V_,ZP;function Wz(){if(ZP)return V_;ZP=1;var r=HC(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return V_=o,V_}var W_,QP;function Hz(){if(QP)return W_;QP=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return W_=t,W_}var H_,JP;function G5(){if(JP)return H_;JP=1;var r=HC(),e=Wz(),t=Hz(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return H_=a,H_}var Y_,eA;function Yz(){if(eA)return Y_;eA=1;function r(e){return e!=null&&typeof e=="object"}return Y_=r,Y_}var X_,tA;function pg(){if(tA)return X_;tA=1;var r=G5(),e=Yz(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return X_=n,X_}var $_,rA;function Xz(){if(rA)return $_;rA=1;var r=Vz(),e=vg(),t=pg(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=o.test(l);return f||a.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return $_=u,$_}var K_,nA;function $z(){if(nA)return K_;nA=1;var r=vg(),e=zz(),t=Xz(),n="Expected a function",i=Math.max,o=Math.min;function a(s,u,l){var c,f,h,d,v,p,m=0,y=!1,b=!1,g=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(y=!!l.leading,b="maxWait"in l,h=b?i(t(l.maxWait)||0,u):h,g="trailing"in l?!!l.trailing:g);function _(D){var L=c,j=f;return c=f=void 0,m=D,d=s.apply(j,L),d}function w(D){return m=D,v=setTimeout(O,u),y?_(D):d}function x(D){var L=D-p,j=D-m,q=u-L;return b?o(q,h-j):q}function E(D){var L=D-p,j=D-m;return p===void 0||L>=u||L<0||b&&j>=h}function O(){var D=e();if(E(D))return C(D);v=setTimeout(O,x(D))}function C(D){return v=void 0,g&&c?_(D):(c=f=void 0,d)}function A(){v!==void 0&&clearTimeout(v),m=0,c=p=f=v=void 0}function R(){return v===void 0?d:C(e())}function k(){var D=e(),L=E(D);if(c=arguments,f=this,p=D,L){if(v===void 0)return w(p);if(b)return clearTimeout(v),v=setTimeout(O,u),_(p)}return v===void 0&&(v=setTimeout(O,u)),d}return k.cancel=A,k.flush=R,k}return K_=a,K_}var Kz=$z(),gg=dg(Kz),Z_=zn?zn.performance:null,V5=Z_&&Z_.now?function(){return Z_.now()}:function(){return Date.now()},Zz=(function(){if(zn){if(zn.requestAnimationFrame)return function(r){zn.requestAnimationFrame(r)};if(zn.mozRequestAnimationFrame)return function(r){zn.mozRequestAnimationFrame(r)};if(zn.webkitRequestAnimationFrame)return function(r){zn.webkitRequestAnimationFrame(r)};if(zn.msRequestAnimationFrame)return function(r){zn.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(V5())},1e3/60)}})(),p0=function(e){return Zz(e)},eu=V5,Uc=9261,W5=65599,jh=5381,H5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Uc,n=t,i;i=e.next(),!i.done;)n=n*W5+i.value|0;return n},Vp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Uc;return t*W5+e|0},Wp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jh;return(t<<5)+t+e|0},Qz=function(e,t){return e*2097152+t},qu=function(e){return e[0]*2097152+e[1]},Zy=function(e,t){return[Vp(e[0],t[0]),Wp(e[1],t[1])]},iA=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e[i++]:n.done=!0,n}};return H5(a,t)},Yc=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e.charCodeAt(i++):n.done=!0,n}};return H5(a,t)},Y5=function(){return Jz(arguments)},Jz=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=Yc(i):t=Yc(i,t)}return t};function e9(r,e,t,n,i){var o=i*Math.PI/180,a=Math.cos(o)*(r-t)-Math.sin(o)*(e-n)+t,s=Math.sin(o)*(r-t)+Math.cos(o)*(e-n)+n;return{x:a,y:s}}var t9=function(e,t,n,i,o,a){return{x:(e-n)*o+n,y:(t-i)*a+i}};function r9(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,i=(e.y1+e.y2)/2,o=e.w/e.h,a=1/o,s=e9(r.x,r.y,n,i,t),u=t9(s.x,s.y,n,i,o,a);return{x:u.x,y:u.y}}var oA=!0,n9=console.warn!=null,i9=console.trace!=null,YC=Number.MAX_SAFE_INTEGER||9007199254740991,X5=function(){return!0},g0=function(){return!1},aA=function(){return 0},XC=function(){},ln=function(e){throw new Error(e)},$5=function(e){if(e!==void 0)oA=!!e;else return oA},Nr=function(e){$5()&&(n9?console.warn(e):i9&&console.trace())},o9=function(e){return jt({},e)},ds=function(e){return e==null?e:Gr(e)?e.slice():xr(e)?o9(e):e},a9=function(e){return e.slice()},K5=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},s9={},Z5=function(){return s9},bi=function(e){var t=Object.keys(e);return function(n){for(var i={},o=0;o<t.length;o++){var a=t[o],s=n==null?void 0:n[a];i[a]=s===void 0?e[a]:s}return i}},pl=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},$C=function(e){e.splice(0,e.length)},u9=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},fo=function(e,t,n){return n&&(t=F5(n,t)),e[t]},Ws=function(e,t,n,i){n&&(t=F5(n,t)),e[t]=i},l9=(function(){function r(){xl(this,r),this._obj={}}return Sl(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])})(),Xs=typeof Map<"u"?Map:l9,c9="undefined",f9=(function(){function r(e){if(xl(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Sl(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])})(),hd=(typeof Set>"u"?"undefined":Wn(Set))!==c9?Set:f9,H0=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!VC(e)){ln("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){ln("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new hd,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),t.renderedPosition){var a=t.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];Gr(t.classes)?l=t.classes:Ct(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||o.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=t.style||t.css;d&&(Nr("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},sA=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,o){var a;xr(n)&&!Lo(n)&&(a=n,n=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!gn(i)?i:o,i=gn(i)?i:function(){};for(var s=this._private.cy,u=n=Ct(n)?this.filter(n):n,l=[],c=[],f={},h={},d={},v=0,p,m=this.byGroup(),y=m.nodes,b=m.edges,g=0;g<u.length;g++){var _=u[g],w=_.id();_.isNode()&&(l.unshift(_),e.bfs&&(d[w]=!0,c.push(_)),h[w]=0)}for(var x=function(){var D=e.bfs?l.shift():l.pop(),L=D.id();if(e.dfs){if(d[L])return 0;d[L]=!0,c.push(D)}var j=h[L],q=f[L],B=q!=null?q.source():null,U=q!=null?q.target():null,W=q==null?void 0:D.same(B)?U[0]:B[0],H;if(H=i(D,q,W,v++,j),H===!0)return p=D,1;if(H===!1)return 1;for(var Y=D.connectedEdges().filter(function(ie){return(!o||ie.source().same(D))&&b.has(ie)}),Z=0;Z<Y.length;Z++){var ce=Y[Z],$=ce.connectedNodes().filter(function(ie){return!ie.same(D)&&y.has(ie)}),K=$.id();$.length!==0&&!d[K]&&($=$[0],l.push($),e.bfs&&(d[K]=!0,c.push($)),f[K]=ce,h[K]=h[L]+1)}},E;l.length!==0&&(E=x(),!(E!==0&&E===1)););for(var O=s.collection(),C=0;C<c.length;C++){var A=c[C],R=f[A.id()];R!=null&&O.push(R),O.push(A)}return{path:s.collection(O),found:s.collection(p)}}},Hp={breadthFirstSearch:sA({bfs:!0}),depthFirstSearch:sA({dfs:!0})};Hp.bfs=Hp.breadthFirstSearch;Hp.dfs=Hp.depthFirstSearch;var Gm={exports:{}},h9=Gm.exports,uA;function d9(){return uA||(uA=1,(function(r,e){(function(){var t,n,i,o,a,s,u,l,c,f,h,d,v,p,m;i=Math.floor,f=Math.min,n=function(y,b){return y<b?-1:y>b?1:0},c=function(y,b,g,_,w){var x;if(g==null&&(g=0),w==null&&(w=n),g<0)throw new Error("lo must be non-negative");for(_==null&&(_=y.length);g<_;)x=i((g+_)/2),w(b,y[x])<0?_=x:g=x+1;return[].splice.apply(y,[g,g-g].concat(b)),b},s=function(y,b,g){return g==null&&(g=n),y.push(b),p(y,0,y.length-1,g)},a=function(y,b){var g,_;return b==null&&(b=n),g=y.pop(),y.length?(_=y[0],y[0]=g,m(y,0,b)):_=g,_},l=function(y,b,g){var _;return g==null&&(g=n),_=y[0],y[0]=b,m(y,0,g),_},u=function(y,b,g){var _;return g==null&&(g=n),y.length&&g(y[0],b)<0&&(_=[y[0],b],b=_[0],y[0]=_[1],m(y,0,g)),b},o=function(y,b){var g,_,w,x,E,O;for(b==null&&(b=n),x=(function(){O=[];for(var C=0,A=i(y.length/2);0<=A?C<A:C>A;0<=A?C++:C--)O.push(C);return O}).apply(this).reverse(),E=[],_=0,w=x.length;_<w;_++)g=x[_],E.push(m(y,g,b));return E},v=function(y,b,g){var _;if(g==null&&(g=n),_=y.indexOf(b),_!==-1)return p(y,0,_,g),m(y,_,g)},h=function(y,b,g){var _,w,x,E,O;if(g==null&&(g=n),w=y.slice(0,b),!w.length)return w;for(o(w,g),O=y.slice(b),x=0,E=O.length;x<E;x++)_=O[x],u(w,_,g);return w.sort(g).reverse()},d=function(y,b,g){var _,w,x,E,O,C,A,R,k;if(g==null&&(g=n),b*10<=y.length){if(x=y.slice(0,b).sort(g),!x.length)return x;for(w=x[x.length-1],A=y.slice(b),E=0,C=A.length;E<C;E++)_=A[E],g(_,w)<0&&(c(x,_,0,null,g),x.pop(),w=x[x.length-1]);return x}for(o(y,g),k=[],O=0,R=f(b,y.length);0<=R?O<R:O>R;0<=R?++O:--O)k.push(a(y,g));return k},p=function(y,b,g,_){var w,x,E;for(_==null&&(_=n),w=y[g];g>b;){if(E=g-1>>1,x=y[E],_(w,x)<0){y[g]=x,g=E;continue}break}return y[g]=w},m=function(y,b,g){var _,w,x,E,O;for(g==null&&(g=n),w=y.length,O=b,x=y[b],_=2*b+1;_<w;)E=_+1,E<w&&!(g(y[_],y[E])<0)&&(_=E),y[b]=y[_],b=_,_=2*b+1;return y[b]=x,p(y,O,b,g)},t=(function(){y.push=s,y.pop=a,y.replace=l,y.pushpop=u,y.heapify=o,y.updateItem=v,y.nlargest=h,y.nsmallest=d;function y(b){this.cmp=b??n,this.nodes=[]}return y.prototype.push=function(b){return s(this.nodes,b,this.cmp)},y.prototype.pop=function(){return a(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},y.prototype.replace=function(b){return l(this.nodes,b,this.cmp)},y.prototype.pushpop=function(b){return u(this.nodes,b,this.cmp)},y.prototype.heapify=function(){return o(this.nodes,this.cmp)},y.prototype.updateItem=function(b){return v(this.nodes,b,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var b;return b=new y,b.nodes=this.nodes.slice(0),b},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y})(),(function(y,b){return r.exports=b()})(this,function(){return t})}).call(h9)})(Gm)),Gm.exports}var Q_,lA;function v9(){return lA||(lA=1,Q_=d9()),Q_}var p9=v9(),yg=dg(p9),g9=bi({root:null,weight:function(e){return 1},directed:!1}),y9={dijkstra:function(e){if(!xr(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=g9(e),i=n.root,o=n.weight,a=n.directed,s=this,u=o,l=Ct(i)?this.filter(i)[0]:i[0],c={},f={},h={},d=this.byGroup(),v=d.nodes,p=d.edges;p.unmergeBy(function(j){return j.isLoop()});for(var m=function(q){return c[q.id()]},y=function(q,B){c[q.id()]=B,b.updateItem(q)},b=new yg(function(j,q){return m(j)-m(q)}),g=0;g<v.length;g++){var _=v[g];c[_.id()]=_.same(l)?0:1/0,b.push(_)}for(var w=function(q,B){for(var U=(a?q.edgesTo(B):q.edgesWith(B)).intersect(p),W=1/0,H,Y=0;Y<U.length;Y++){var Z=U[Y],ce=u(Z);(ce<W||!H)&&(W=ce,H=Z)}return{edge:H,dist:W}};b.size()>0;){var x=b.pop(),E=m(x),O=x.id();if(h[O]=E,E!==1/0)for(var C=x.neighborhood().intersect(v),A=0;A<C.length;A++){var R=C[A],k=R.id(),D=w(x,R),L=E+D.dist;L<m(R)&&(y(R,L),f[k]={node:x,edge:D.edge})}}return{distanceTo:function(q){var B=Ct(q)?v.filter(q)[0]:q[0];return h[B.id()]},pathTo:function(q){var B=Ct(q)?v.filter(q)[0]:q[0],U=[],W=B,H=W.id();if(B.length>0)for(U.unshift(B);f[H];){var Y=f[H];U.unshift(Y.edge),U.unshift(Y.node),W=Y.node,H=W.id()}return s.spawn(U)}}}},m9={kruskal:function(e){e=e||function(g){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,o=n.length,a=new Array(o),s=n,u=function(_){for(var w=0;w<a.length;w++){var x=a[w];if(x.has(_))return w}},l=0;l<o;l++)a[l]=this.spawn(n[l]);for(var c=i.sort(function(g,_){return e(g)-e(_)}),f=0;f<c.length;f++){var h=c[f],d=h.source()[0],v=h.target()[0],p=u(d),m=u(v),y=a[p],b=a[m];p!==m&&(s.merge(h),y.merge(b),a.splice(m,1))}return s}},b9=bi({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),_9={aStar:function(e){var t=this.cy(),n=b9(e),i=n.root,o=n.goal,a=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],o=t.collection(o)[0];var l=i.id(),c=o.id(),f={},h={},d={},v=new yg(function(H,Y){return h[H.id()]-h[Y.id()]}),p=new hd,m={},y={},b=function(Y,Z){v.push(Y),p.add(Z)},g,_,w=function(){g=v.pop(),_=g.id(),p.delete(_)},x=function(Y){return p.has(Y)};b(i,l),f[l]=0,h[l]=a(i);for(var E=0;v.size()>0;){if(w(),E++,_===c){for(var O=[],C=o,A=c,R=y[A];O.unshift(C),R!=null&&O.unshift(R),C=m[A],C!=null;)A=C.id(),R=y[A];return{found:!0,distance:f[_],path:this.spawn(O),steps:E}}d[_]=!0;for(var k=g._private.edges,D=0;D<k.length;D++){var L=k[D];if(this.hasElementWithId(L.id())&&!(s&&L.data("source")!==_)){var j=L.source(),q=L.target(),B=j.id()!==_?j:q,U=B.id();if(this.hasElementWithId(U)&&!d[U]){var W=f[_]+u(L);if(!x(U)){f[U]=W,h[U]=W+a(B),b(B,U),m[U]=g,y[U]=L;continue}W<f[U]&&(f[U]=W,h[U]=W+a(B),m[U]=g,y[U]=L)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},w9=bi({weight:function(e){return 1},directed:!1}),E9={floydWarshall:function(e){for(var t=this.cy(),n=w9(e),i=n.weight,o=n.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,h=function(ce){return u.indexOf(ce)},d=function(ce){return u[ce]},v=new Array(f),p=0;p<f;p++){var m=p%c,y=(p-m)/c;y===m?v[p]=0:v[p]=1/0}for(var b=new Array(f),g=new Array(f),_=0;_<l.length;_++){var w=l[_],x=w.source()[0],E=w.target()[0];if(x!==E){var O=h(x),C=h(E),A=O*c+C,R=a(w);if(v[A]>R&&(v[A]=R,b[A]=C,g[A]=w),!o){var k=C*c+O;!o&&v[k]>R&&(v[k]=R,b[k]=O,g[k]=w)}}}for(var D=0;D<c;D++)for(var L=0;L<c;L++)for(var j=L*c+D,q=0;q<c;q++){var B=L*c+q,U=D*c+q;v[j]+v[U]<v[B]&&(v[B]=v[j]+v[U],b[B]=b[j])}var W=function(ce){return(Ct(ce)?t.filter(ce):ce)[0]},H=function(ce){return h(W(ce))},Y={distance:function(ce,$){var K=H(ce),ie=H($);return v[K*c+ie]},path:function(ce,$){var K=H(ce),ie=H($),ae=d(K);if(K===ie)return ae.collection();if(b[K*c+ie]==null)return t.collection();var le=t.collection(),te=K,ee;for(le.merge(ae);K!==ie;)te=K,K=b[K*c+ie],ee=g[te*c+K],le.merge(ee),le.merge(d(K));return le}};return Y}},O9=bi({weight:function(e){return 1},directed:!1,root:null}),x9={bellmanFord:function(e){var t=this,n=O9(e),i=n.weight,o=n.directed,a=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,d=h.length,v=new Xs,p=!1,m=[];a=l.collection(a)[0],f.unmergeBy(function(me){return me.isLoop()});for(var y=f.length,b=function(F){var G=v.get(F.id());return G||(G={},v.set(F.id(),G)),G},g=function(F){return(Ct(F)?l.$(F):F)[0]},_=function(F){return b(g(F)).dist},w=function(F){for(var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,X=g(F),se=[],pe=X;;){if(pe==null)return t.spawn();var ge=b(pe),xe=ge.edge,Ne=ge.pred;if(se.unshift(pe[0]),pe.same(G)&&se.length>0)break;xe!=null&&se.unshift(xe),pe=Ne}return u.spawn(se)},x=0;x<d;x++){var E=h[x],O=b(E);E.same(a)?O.dist=0:O.dist=1/0,O.pred=null,O.edge=null}for(var C=!1,A=function(F,G,X,se,pe,ge){var xe=se.dist+ge;xe<pe.dist&&!X.same(se.edge)&&(pe.dist=xe,pe.pred=F,pe.edge=X,C=!0)},R=1;R<d;R++){C=!1;for(var k=0;k<y;k++){var D=f[k],L=D.source(),j=D.target(),q=s(D),B=b(L),U=b(j);A(L,j,D,B,U,q),o||A(j,L,D,U,B,q)}if(!C)break}if(C)for(var W=[],H=0;H<y;H++){var Y=f[H],Z=Y.source(),ce=Y.target(),$=s(Y),K=b(Z).dist,ie=b(ce).dist;if(K+$<ie||!o&&ie+$<K)if(p||(Nr("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var ae=[];K+$<ie&&ae.push(Z),!o&&ie+$<K&&ae.push(ce);for(var le=ae.length,te=0;te<le;te++){var ee=ae[te],re=[ee];re.push(b(ee).edge);for(var he=b(ee).pred;re.indexOf(he)===-1;)re.push(he),re.push(b(he).edge),he=b(he).pred;re=re.slice(re.indexOf(he));for(var ve=re[0].id(),_e=0,Oe=2;Oe<re.length;Oe+=2)re[Oe].id()<ve&&(ve=re[Oe].id(),_e=Oe);re=re.slice(_e).concat(re.slice(0,_e)),re.push(re[0]);var Pe=re.map(function(me){return me.id()}).join(",");W.indexOf(Pe)===-1&&(m.push(u.spawn(re)),W.push(Pe))}}else break}return{distanceTo:_,pathTo:w,hasNegativeWeightCycle:p,negativeWeightCycles:m}}},S9=Math.sqrt(2),T9=function(e,t,n){n.length===0&&ln("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],o=i[1],a=i[2],s=t[o],u=t[a],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],d=f[2];(t[h]===s&&t[d]===u||t[h]===u&&t[d]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var p=l[v];p[1]===u?(l[v]=p.slice(),l[v][1]=s):p[2]===u&&(l[v]=p.slice(),l[v][2]=s)}for(var m=0;m<t.length;m++)t[m]===u&&(t[m]=s);return l},J_=function(e,t,n,i){for(;n>i;){var o=Math.floor(Math.random()*t.length);t=T9(o,e,t),n--}return t},C9={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(U){return U.isLoop()});var o=n.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/S9);if(o<2){ln("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,d=[],v=new Array(o),p=new Array(o),m=new Array(o),y=function(W,H){for(var Y=0;Y<o;Y++)H[Y]=W[Y]},b=0;b<=s;b++){for(var g=0;g<o;g++)p[g]=g;var _=J_(p,l.slice(),o,u),w=_.slice();y(p,m);var x=J_(p,_,u,2),E=J_(m,w,u,2);x.length<=E.length&&x.length<h?(h=x.length,d=x,y(p,v)):E.length<=x.length&&E.length<h&&(h=E.length,d=E,y(m,v))}for(var O=this.spawn(d.map(function(U){return i[U[0]]})),C=this.spawn(),A=this.spawn(),R=v[0],k=0;k<v.length;k++){var D=v[k],L=n[k];D===R?C.merge(L):A.merge(L)}var j=function(W){var H=e.spawn();return W.forEach(function(Y){H.merge(Y),Y.connectedEdges().forEach(function(Z){e.contains(Z)&&!O.contains(Z)&&H.merge(Z)})}),H},q=[j(C),j(A)],B={cut:O,components:q,partition1:C,partition2:A};return B}},e1,P9=function(e){return{x:e.x,y:e.y}},Y0=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Q5=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Uh=function(e){return{x:e[0],y:e[1]}},A9=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},R9=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},I9=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=t;a<n;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},k9=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(h,d){return h-d});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},D9=function(e){return Math.PI*e/180},Qy=function(e,t){return Math.atan2(t,e)-Math.PI/2},KC=Math.log2||function(r){return Math.log(r)/Math.log(2)},ZC=function(e){return e>0?1:e<0?-1:0},Xc=function(e,t){return Math.sqrt(Mc(e,t))},Mc=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},M9=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var o=0;o<t;o++)e[o]=e[o]/n;return e},ri=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},Hh=function(e,t,n,i){return{x:ri(e.x,t.x,n.x,i),y:ri(e.y,t.y,n.y,i)}},L9=function(e,t,n,i){var o={x:t.x-e.x,y:t.y-e.y},a=Xc(e,t),s={x:o.x/a,y:o.y/a};return n=n??0,i=i??n*a,{x:e.x+s.x*i,y:e.y+s.y*i}},Yp=function(e,t,n){return Math.max(e,Math.min(n,t))},$i=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},N9=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},j9=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},F9=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},J5=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Vm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Wm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,o,a;if(t.length===1)n=i=o=a=t[0];else if(t.length===2)n=o=t[0],a=i=t[1];else if(t.length===4){var s=Fn(t,4);n=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},cA=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},QC=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},tl=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},fA=function(e,t){return tl(e,t.x,t.y)},e3=function(e,t){return tl(e,t.x1,t.y1)&&tl(e,t.x2,t.y2)},B9=(e1=Math.hypot)!==null&&e1!==void 0?e1:function(r,e){return Math.sqrt(r*r+e*e)};function U9(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(O,C){return{x:O.x+C.x,y:O.y+C.y}},n=function(O,C){return{x:O.x-C.x,y:O.y-C.y}},i=function(O,C){return{x:O.x*C,y:O.y*C}},o=function(O,C){return O.x*C.y-O.y*C.x},a=function(O){var C=B9(O.x,O.y);return C===0?{x:0,y:0}:{x:O.x/C,y:O.y/C}},s=function(O){for(var C=0,A=0;A<O.length;A++){var R=O[A],k=O[(A+1)%O.length];C+=R.x*k.y-k.x*R.y}return C/2},u=function(O,C,A,R){var k=n(C,O),D=n(R,A),L=o(k,D);if(Math.abs(L)<1e-9)return t(O,i(k,.5));var j=o(n(A,O),D)/L;return t(O,i(k,j))},l=r.map(function(E){return{x:E.x,y:E.y}});s(l)<0&&l.reverse();for(var c=l.length,f=[],h=0;h<c;h++){var d=l[h],v=l[(h+1)%c],p=n(v,d),m=a({x:p.y,y:-p.x});f.push(m)}for(var y=f.map(function(E,O){var C=t(l[O],i(E,e)),A=t(l[(O+1)%c],i(E,e));return{p1:C,p2:A}}),b=[],g=0;g<c;g++){var _=y[(g-1+c)%c],w=y[g],x=u(_.p1,_.p2,w.p1,w.p2);b.push(x)}return b}function q9(r,e,t,n,i,o){var a=K9(r,e,t,n,i),s=U9(a,o),u=$i();return s.forEach(function(l){return J5(u,l.x,l.y)}),u}var t3=function(e,t,n,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?gl(o,a):u,c=o/2,f=a/2;l=Math.min(l,c,f);var h=l!==c,d=l!==f,v;if(h){var p=n-c+l-s,m=i-f-s,y=n+c-l+s,b=m;if(v=rl(e,t,n,i,p,m,y,b,!1),v.length>0)return v}if(d){var g=n+c+s,_=i-f+l-s,w=g,x=i+f-l+s;if(v=rl(e,t,n,i,g,_,w,x,!1),v.length>0)return v}if(h){var E=n-c+l-s,O=i+f+s,C=n+c-l+s,A=O;if(v=rl(e,t,n,i,E,O,C,A,!1),v.length>0)return v}if(d){var R=n-c-s,k=i-f+l-s,D=R,L=i+f-l+s;if(v=rl(e,t,n,i,R,k,D,L,!1),v.length>0)return v}var j;{var q=n-c+l,B=i-f+l;if(j=Gv(e,t,n,i,q,B,l+s),j.length>0&&j[0]<=q&&j[1]<=B)return[j[0],j[1]]}{var U=n+c-l,W=i-f+l;if(j=Gv(e,t,n,i,U,W,l+s),j.length>0&&j[0]>=U&&j[1]<=W)return[j[0],j[1]]}{var H=n+c-l,Y=i+f-l;if(j=Gv(e,t,n,i,H,Y,l+s),j.length>0&&j[0]>=H&&j[1]>=Y)return[j[0],j[1]]}{var Z=n-c+l,ce=i+f-l;if(j=Gv(e,t,n,i,Z,ce,l+s),j.length>0&&j[0]<=Z&&j[1]>=ce)return[j[0],j[1]]}return[]},z9=function(e,t,n,i,o,a,s){var u=s,l=Math.min(n,o),c=Math.max(n,o),f=Math.min(i,a),h=Math.max(i,a);return l-u<=e&&e<=c+u&&f-u<=t&&t<=h+u},G9=function(e,t,n,i,o,a,s,u,l){var c={x1:Math.min(n,s,o)-l,x2:Math.max(n,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},V9=function(e,t,n,i){n-=i;var o=t*t-4*e*n;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-t+a)/s,l=(-t-a)/s;return[u,l]},W9=function(e,t,n,i,o){var a=1e-5;e===0&&(e=a),t/=e,n/=e,i/=e;var s,u,l,c,f,h,d,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,o[1]=0,d=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),o[0]=-d+f+h,d+=(f+h)/2,o[4]=o[2]=-d,d=Math.sqrt(3)*(-h+f)/2,o[3]=d,o[5]=-d;return}if(o[5]=o[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-d+2*v,o[4]=o[2]=-(v+d);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),o[0]=-d+v*Math.cos(c/3),o[2]=-d+v*Math.cos((c+2*Math.PI)/3),o[4]=-d+v*Math.cos((c+4*Math.PI)/3)},H9=function(e,t,n,i,o,a,s,u){var l=1*n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=9*n*o-3*n*n-3*n*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,f=3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*t+2*a*a+2*a*t-u*t,h=1*n*o-n*n+n*e-o*e+i*a-i*i+i*t-a*t,d=[];W9(l,c,f,h,d);for(var v=1e-7,p=[],m=0;m<6;m+=2)Math.abs(d[m+1])<v&&d[m]>=0&&d[m]<=1&&p.push(d[m]);p.push(1),p.push(0);for(var y=-1,b,g,_,w=0;w<p.length;w++)b=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*o+p[w]*p[w]*s,g=Math.pow(1-p[w],2)*i+2*(1-p[w])*p[w]*a+p[w]*p[w]*u,_=Math.pow(b-e,2)+Math.pow(g-t,2),y>=0?_<y&&(y=_):y=_;return y},Y9=function(e,t,n,i,o,a){var s=[e-n,t-i],u=[o-n,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-o)*(e-o)+(t-a)*(t-a):c-h},ho=function(e,t,n){for(var i,o,a,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],o=n[c*2+1],c+1<n.length/2?(a=n[(c+1)*2],s=n[(c+1)*2+1]):(a=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>t&&l++;else continue;return l%2!==0},tu=function(e,t,n,i,o,a,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),d=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=a/2*(n[v*2]*h-n[v*2+1]*d),c[v*2+1]=s/2*(n[v*2+1]*h+n[v*2]*d),c[v*2]+=i,c[v*2+1]+=o;var p;if(l>0){var m=m0(c,-l);p=y0(m)}else p=c;return ho(e,t,p)},X9=function(e,t,n,i,o,a,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var h=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(h<=Math.pow(f.radius,2))return!0}return ho(e,t,l)},y0=function(e){for(var t=new Array(e.length/2),n,i,o,a,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],o=e[f*4+2],a=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var h=rl(n,i,o,a,s,u,l,c,!0);t[f*2]=h[0],t[f*2+1]=h[1]}return t},m0=function(e,t){for(var n=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),f=Math.sqrt(l*l+c*c),h=l/f,d=c/f;n[u*4]=i+h*t,n[u*4+1]=o+d*t,n[u*4+2]=a+h*t,n[u*4+3]=s+d*t}return n},$9=function(e,t,n,i,o,a){var s=n-e,u=i-t;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-t)*f+t]},zc=function(e,t,n,i,o,a,s){return e-=o,t-=a,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},Gv=function(e,t,n,i,o,a,s){var u=[n-e,i-t],l=[e-o,t-a],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-s*s,d=f*f-4*c*h;if(d<0)return[];var v=(-f+Math.sqrt(d))/(2*c),p=(-f-Math.sqrt(d))/(2*c),m=Math.min(v,p),y=Math.max(v,p),b=[];if(m>=0&&m<=1&&b.push(m),y>=0&&y<=1&&b.push(y),b.length===0)return[];var g=b[0]*u[0]+e,_=b[0]*u[1]+t;if(b.length>1){if(b[0]==b[1])return[g,_];var w=b[1]*u[0]+e,x=b[1]*u[1]+t;return[g,_,w,x]}else return[g,_]},t1=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},rl=function(e,t,n,i,o,a,s,u,l){var c=e-o,f=n-e,h=s-o,d=t-a,v=i-t,p=u-a,m=h*d-p*c,y=f*d-v*c,b=p*f-h*v;if(b!==0){var g=m/b,_=y/b,w=.001,x=0-w,E=1+w;return x<=g&&g<=E&&x<=_&&_<=E?[e+g*f,t+g*v]:l?[e+g*f,t+g*v]:[]}else return m===0||y===0?t1(e,n,s)===s?[s,u]:t1(e,n,o)===o?[o,a]:t1(o,s,n)===n?[n,i]:[]:[]},K9=function(e,t,n,i,o){var a=[],s=i/2,u=o/2,l=t,c=n;a.push({x:l+s*e[0],y:c+u*e[1]});for(var f=1;f<e.length/2;f++)a.push({x:l+s*e[f*2],y:c+u*e[f*2+1]});return a},Xp=function(e,t,n,i,o,a,s,u){var l=[],c,f=new Array(n.length),h=!0;a==null&&(h=!1);var d;if(h){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*a+i,f[v*2+1]=n[v*2+1]*s+o;if(u>0){var p=m0(f,-u);d=y0(p)}else d=f}else d=n;for(var m,y,b,g,_=0;_<d.length/2;_++)m=d[_*2],y=d[_*2+1],_<d.length/2-1?(b=d[(_+1)*2],g=d[(_+1)*2+1]):(b=d[0],g=d[1]),c=rl(e,t,i,o,m,y,b,g),c.length!==0&&l.push(c[0],c[1]);return l},Z9=function(e,t,n,i,o,a,s,u,l){var c=[],f,h=new Array(n.length*2);l.forEach(function(b,g){g===0?(h[h.length-2]=b.startX,h[h.length-1]=b.startY):(h[g*4-2]=b.startX,h[g*4-1]=b.startY),h[g*4]=b.stopX,h[g*4+1]=b.stopY,f=Gv(e,t,i,o,b.cx,b.cy,b.radius),f.length!==0&&c.push(f[0],f[1])});for(var d=0;d<h.length/4;d++)f=rl(e,t,i,o,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),m=1;m<c.length/2;m++){var y=Math.pow(c[m*2]-e,2)+Math.pow(c[m*2+1]-t,2);y<=p&&(v[0]=c[m*2],v[1]=c[m*2+1],p=y)}return v}return c},Jy=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-n)/o;return a<0&&(a=1e-5),[t[0]+a*i[0],t[1]+a*i[1]]},Hi=function(e,t){var n=IT(e,t);return n=r3(n),n},r3=function(e){for(var t,n,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);for(var c=2/(s-o),f=2/(u-a),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);if(a<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-a);return e},IT=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*n+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},gl=function(e,t){return Math.min(e/4,t/4,8)},n3=function(e,t){return Math.min(e/10,t/10,8)},JC=function(){return 8},Q9=function(e,t,n){return[e-2*t+n,2*(t-e),e]},kT=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function r1(r,e){function t(f){for(var h=[],d=0;d<f.length;d++){var v=f[d],p=f[(d+1)%f.length],m={x:p.x-v.x,y:p.y-v.y},y={x:-m.y,y:m.x},b=Math.sqrt(y.x*y.x+y.y*y.y);h.push({x:y.x/b,y:y.y/b})}return h}function n(f,h){var d=1/0,v=-1/0,p=po(f),m;try{for(p.s();!(m=p.n()).done;){var y=m.value,b=y.x*h.x+y.y*h.y;d=Math.min(d,b),v=Math.max(v,b)}}catch(g){p.e(g)}finally{p.f()}return{min:d,max:v}}function i(f,h){return!(f.max<h.min||h.max<f.min)}var o=[].concat(d0(t(r)),d0(t(e))),a=po(o),s;try{for(a.s();!(s=a.n()).done;){var u=s.value,l=n(r,u),c=n(e,u);if(!i(l,c))return!1}}catch(f){a.e(f)}finally{a.f()}return!0}var J9=bi({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),eG={pageRank:function(e){for(var t=J9(e),n=t.dampingFactor,i=t.precision,o=t.iterations,a=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,d=c.length,v=new Array(h),p=new Array(f),m=(1-n)/f,y=0;y<f;y++){for(var b=0;b<f;b++){var g=y*f+b;v[g]=0}p[y]=0}for(var _=0;_<d;_++){var w=c[_],x=w.data("source"),E=w.data("target");if(x!==E){var O=l.indexOfId(x),C=l.indexOfId(E),A=a(w),R=C*f+O;v[R]+=A,p[O]+=A}}for(var k=1/f+m,D=0;D<f;D++)if(p[D]===0)for(var L=0;L<f;L++){var j=L*f+D;v[j]=k}else for(var q=0;q<f;q++){var B=q*f+D;v[B]=v[B]/p[D]+m}for(var U=new Array(f),W=new Array(f),H,Y=0;Y<f;Y++)U[Y]=1;for(var Z=0;Z<o;Z++){for(var ce=0;ce<f;ce++)W[ce]=0;for(var $=0;$<f;$++)for(var K=0;K<f;K++){var ie=$*f+K;W[$]+=v[ie]*U[K]}M9(W),H=U,U=W,W=H;for(var ae=0,le=0;le<f;le++){var te=H[le]-U[le];ae+=te*te}if(ae<i)break}var ee={rank:function(he){return he=s.collection(he)[0],U[l.indexOf(he)]}};return ee}},hA=bi({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Yh={degreeCentralityNormalized:function(e){e=hA(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},h=0,d=0,v=0;v<i;v++){var p=n[v],m=p.id();e.root=p;var y=this.degreeCentrality(e);h<y.indegree&&(h=y.indegree),d<y.outdegree&&(d=y.outdegree),c[m]=y.indegree,f[m]=y.outdegree}return{indegree:function(g){return h==0?0:(Ct(g)&&(g=t.filter(g)),c[g.id()]/h)},outdegree:function(g){return d===0?0:(Ct(g)&&(g=t.filter(g)),f[g.id()]/d)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(g){return a===0?0:(Ct(g)&&(g=t.filter(g)),o[g.id()]/a)}}}},degreeCentrality:function(e){e=hA(e);var t=this.cy(),n=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=t.collection(o)[0],s){for(var d=o.connectedEdges(),v=d.filter(function(x){return x.target().same(o)&&n.has(x)}),p=d.filter(function(x){return x.source().same(o)&&n.has(x)}),m=v.length,y=p.length,b=0,g=0,_=0;_<v.length;_++)b+=a(v[_]);for(var w=0;w<p.length;w++)g+=a(p[w]);return{indegree:Math.pow(m,1-u)*Math.pow(b,u),outdegree:Math.pow(y,1-u)*Math.pow(g,u)}}else{for(var l=o.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=a(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Yh.dc=Yh.degreeCentrality;Yh.dcn=Yh.degreeCentralityNormalised=Yh.degreeCentralityNormalized;var dA=bi({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Xh={closenessCentralityNormalized:function(e){for(var t=dA(e),n=t.harmonic,i=t.weight,o=t.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),f=0;f<l.length;f++){for(var h=0,d=l[f],v=0;v<l.length;v++)if(f!==v){var p=c.distance(d,l[v]);n?h+=1/p:h+=p}n||(h=1/h),u<h&&(u=h),s[d.id()]=h}return{closeness:function(y){return u==0?0:(Ct(y)?y=a.filter(y)[0].id():y=y.id(),s[y]/u)}}},closenessCentrality:function(e){var t=dA(e),n=t.root,i=t.weight,o=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=s.distanceTo(f);a?u+=1/h:u+=h}}return a?u:1/u}};Xh.cc=Xh.closenessCentrality;Xh.ccn=Xh.closenessCentralityNormalised=Xh.closenessCentralityNormalized;var tG=bi({weight:null,directed:!1}),DT={betweennessCentrality:function(e){for(var t=tG(e),n=t.directed,i=t.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(g,_){l[g]=_,_>c&&(c=_)},get:function(g){return l[g]}},h=0;h<s.length;h++){var d=s[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),f.set(v,0)}for(var p=function(){for(var g=s[m].id(),_=[],w={},x={},E={},O=new yg(function($,K){return E[$]-E[K]}),C=0;C<s.length;C++){var A=s[C].id();w[A]=[],x[A]=0,E[A]=1/0}for(x[g]=1,E[g]=0,O.push(g);!O.empty();){var R=O.pop();if(_.push(R),o)for(var k=0;k<u[R].length;k++){var D=u[R][k],L=a.getElementById(R),j=void 0;L.edgesTo(D).length>0?j=L.edgesTo(D)[0]:j=D.edgesTo(L)[0];var q=i(j);D=D.id(),E[D]>E[R]+q&&(E[D]=E[R]+q,O.nodes.indexOf(D)<0?O.push(D):O.updateItem(D),x[D]=0,w[D]=[]),E[D]==E[R]+q&&(x[D]=x[D]+x[R],w[D].push(R))}else for(var B=0;B<u[R].length;B++){var U=u[R][B].id();E[U]==1/0&&(O.push(U),E[U]=E[R]+1),E[U]==E[R]+1&&(x[U]=x[U]+x[R],w[U].push(R))}}for(var W={},H=0;H<s.length;H++)W[s[H].id()]=0;for(;_.length>0;){for(var Y=_.pop(),Z=0;Z<w[Y].length;Z++){var ce=w[Y][Z];W[ce]=W[ce]+x[ce]/x[Y]*(1+W[Y])}Y!=s[m].id()&&f.set(Y,f.get(Y)+W[Y])}},m=0;m<s.length;m++)p();var y={betweenness:function(g){var _=a.collection(g).id();return f.get(_)},betweennessNormalized:function(g){if(c==0)return 0;var _=a.collection(g).id();return f.get(_)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};DT.bc=DT.betweennessCentrality;var rG=bi({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),nG=function(e){return rG(e)},iG=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},oG=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},i3=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var o=0;o<t;o++)n+=e[o*t+i];for(var a=0;a<t;a++)e[a*t+i]=e[a*t+i]/n}},aG=function(e,t,n){for(var i=new Array(n*n),o=0;o<n;o++){for(var a=0;a<n;a++)i[o*n+a]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[o*n+u]+=e[o*n+s]*t[s*n+u]}return i},sG=function(e,t,n){for(var i=e.slice(0),o=1;o<n;o++)e=aG(e,i,t);return e},uG=function(e,t,n){for(var i=new Array(t*t),o=0;o<t*t;o++)i[o]=Math.pow(e[o],n);return i3(i,t),i},lG=function(e,t,n,i){for(var o=0;o<n;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},cG=function(e,t,n,i){for(var o=[],a=0;a<t;a++){for(var s=[],u=0;u<t;u++)Math.round(e[a*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&o.push(i.collection(s))}return o},fG=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},hG=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&fG(e[t],e[n])&&e.splice(n,1);return e},vA=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),o=nG(e),a={},s=0;s<t.length;s++)a[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var v=n[d],p=a[v.source().id()],m=a[v.target().id()],y=iG(v,o.attributes);c[p*u+m]+=y,c[m*u+p]+=y}oG(c,u,o.multFactor),i3(c,u);for(var b=!0,g=0;b&&g<o.maxIterations;)b=!1,f=sG(c,u,o.expandFactor),c=uG(f,u,o.inflateFactor),lG(c,f,l,4)||(b=!0),g++;var _=cG(c,u,t,i);return _=hG(_),_},dG={markovClustering:vA,mcl:vA},vG=function(e){return e},o3=function(e,t){return Math.abs(t-e)},pA=function(e,t,n){return e+o3(t,n)},gA=function(e,t,n){return e+Math.pow(n-t,2)},pG=function(e){return Math.sqrt(e)},gG=function(e,t,n){return Math.max(e,o3(t,n))},xv=function(e,t,n,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:vG,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=o(s,u,l);return a(s)},id={euclidean:function(e,t,n){return e>=2?xv(e,t,n,0,gA,pG):xv(e,t,n,0,pA)},squaredEuclidean:function(e,t,n){return xv(e,t,n,0,gA)},manhattan:function(e,t,n){return xv(e,t,n,0,pA)},max:function(e,t,n){return xv(e,t,n,-1/0,gG)}};id["squared-euclidean"]=id.squaredEuclidean;id.squaredeuclidean=id.squaredEuclidean;function X0(r,e,t,n,i,o){var a;return gn(r)?a=r:a=id[r]||id.euclidean,e===0&&gn(r)?a(i,o):a(e,t,n,i,o)}var yG=bi({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),e2=function(e){return yG(e)},b0=function(e,t,n,i,o){var a=o!=="kMedoids",s=a?function(f){return n[f]}:function(f){return i[f](n)},u=function(h){return i[h](t)},l=n,c=t;return X0(e,i.length,s,u,l,c)},n1=function(e,t,n){for(var i=n.length,o=new Array(i),a=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)o[l]=e.min(n[l]).value,a[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(a[f]-o[f])+o[f];s[c]=u}return s},a3=function(e,t,n,i,o){for(var a=1/0,s=0,u=0;u<t.length;u++){var l=b0(n,e,t[u],i,o);l<a&&(a=l,s=u)}return s},s3=function(e,t,n){for(var i=[],o=null,a=0;a<t.length;a++)o=t[a],n[o.id()]===e&&i.push(o);return i},mG=function(e,t,n){return Math.abs(t-e)<=n},bG=function(e,t,n){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-t[i][o]);if(a>n)return!1}return!0},_G=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},yA=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var o=e[Math.floor(Math.random()*e.length)];_G(o,n,i);)o=e[Math.floor(Math.random()*e.length)];n[i]=o}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},mA=function(e,t,n){for(var i=0,o=0;o<t.length;o++)i+=b0("manhattan",t[o],e,n,"kMedoids");return i},wG=function(e){var t=this.cy(),n=this.nodes(),i=null,o=e2(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=n1(n,o.k,o.attributes)):Wn(o.testCentroids)==="object"?u=o.testCentroids:u=n1(n,o.k,o.attributes):u=n1(n,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=a3(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var h=0;h<o.k;h++){var d=s3(h,n,s);if(d.length!==0){for(var v=o.attributes.length,p=u[h],m=new Array(v),y=new Array(v),b=0;b<v;b++){y[b]=0;for(var g=0;g<d.length;g++)i=d[g],y[b]+=o.attributes[b](i);m[b]=y[b]/d.length,mG(m[b],p[b],o.sensitivityThreshold)||(l=!0)}u[h]=m,a[h]=t.collection(d)}}c++}return a},EG=function(e){var t=this.cy(),n=this.nodes(),i=null,o=e2(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(Wn(o.testCentroids)==="object"?s=o.testCentroids:s=yA(n,o.k)):s=yA(n,o.k);for(var f=!0,h=0;f&&h<o.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],u[i.id()]=a3(i,s,o.distance,o.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var p=s3(v,n,u);if(p.length!==0){c[v]=mA(s[v],p,o.attributes);for(var m=0;m<p.length;m++)l=mA(p[m],p,o.attributes),l<c[v]&&(c[v]=l,s[v]=p[m],f=!0);a[v]=t.collection(p)}}h++}return a},OG=function(e,t,n,i,o){for(var a,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],o.m);for(var c=0;c<e.length;c++)for(var f=0;f<o.attributes.length;f++){a=0,s=0;for(var h=0;h<t.length;h++)a+=i[h][c]*o.attributes[f](t[h]),s+=i[h][c];e[c][f]=a/s}},xG=function(e,t,n,i,o){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),f=0;f<n.length;f++)for(var h=0;h<i.length;h++){s=0;for(var d=0;d<n.length;d++)u=b0(o.distance,i[h],n[f],o.attributes,"cmeans"),l=b0(o.distance,i[h],n[d],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[h][f]=1/s}},SG=function(e,t,n,i){for(var o=new Array(n.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);o[u].push(e[l])}for(var f=0;f<o.length;f++)o[f]=i.collection(o[f]);return o},bA=function(e){var t=this.cy(),n=this.nodes(),i=e2(e),o,a,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<i.k;v++)s[h][v]=Math.random(),d+=s[h][v];for(var p=0;p<i.k;p++)s[h][p]=s[h][p]/d}a=new Array(i.k);for(var m=0;m<i.k;m++)a[m]=new Array(i.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(i.k);for(var b=!0,g=0;b&&g<i.maxIterations;)b=!1,OG(a,n,s,l,i),xG(s,u,a,n,i),bG(s,u,i.sensitivityThreshold)||(b=!0),g++;return o=SG(n,s,i,t),{clusters:o,degreeOfMembership:s}},TG={kMeans:wG,kMedoids:EG,fuzzyCMeans:bA,fcm:bA},CG=bi({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),PG={single:"min",complete:"max"},AG=function(e){var t=CG(e),n=PG[t.linkage];return n!=null&&(t.linkage=n),t},_A=function(e,t,n,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(C,A){return X0(o.distance,l.length,function(R){return l[R](C)},function(R){return l[R](A)},C,A)},f=0;f<e.length;f++){var h=e[f].key,d=n[h][i[h]];d<s&&(a=h,s=d)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var v=t[a],p=t[i[a]],m;o.mode==="dendrogram"?m={left:v,right:p,key:v.key}:m={value:v.value.concat(p.value),key:v.key},e[v.index]=m,e.splice(p.index,1),t[v.key]=m;for(var y=0;y<e.length;y++){var b=e[y];v.key===b.key?u=1/0:o.linkage==="min"?(u=n[v.key][b.key],n[v.key][b.key]>n[p.key][b.key]&&(u=n[p.key][b.key])):o.linkage==="max"?(u=n[v.key][b.key],n[v.key][b.key]<n[p.key][b.key]&&(u=n[p.key][b.key])):o.linkage==="mean"?u=(n[v.key][b.key]*v.size+n[p.key][b.key]*p.size)/(v.size+p.size):o.mode==="dendrogram"?u=c(b.value,v.value):u=c(b.value[0],v.value[0]),n[v.key][b.key]=n[b.key][v.key]=u}for(var g=0;g<e.length;g++){var _=e[g].key;if(i[_]===v.key||i[_]===p.key){for(var w=_,x=0;x<e.length;x++){var E=e[x].key;n[_][E]<n[_][w]&&(w=E)}i[_]=w}e[g].index=g}return v.key=p.key=v.index=p.index=null,!0},qh=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&qh(e.left,t),e.right&&qh(e.right,t)))},MT=function(e,t){if(!e)return"";if(e.left&&e.right){var n=MT(e.left,t),i=MT(e.right,t),o=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:o.id()}}),t.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},LT=function(e,t,n){if(!e)return[];var i=[],o=[],a=[];return t===0?(e.left&&qh(e.left,i),e.right&&qh(e.right,o),a=i.concat(o),[n.collection(a)]):t===1?e.value?[n.collection(e.value)]:(e.left&&qh(e.left,i),e.right&&qh(e.right,o),[n.collection(i),n.collection(o)]):e.value?[n.collection(e.value)]:(e.left&&(i=LT(e.left,t-1,n)),e.right&&(o=LT(e.right,t-1,n)),i.concat(o))},wA=function(e){for(var t=this.cy(),n=this.nodes(),i=AG(e),o=i.attributes,a=function(g,_){return X0(i.distance,o.length,function(w){return o[w](g)},function(w){return o[w](_)},g,_)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var d=0;d<s.length;d++)for(var v=0;v<=d;v++){var p=void 0;i.mode==="dendrogram"?p=d===v?1/0:a(s[d].value,s[v].value):p=d===v?1/0:a(s[d].value[0],s[v].value[0]),u[d][v]=p,u[v][d]=p,p<u[d][l[d]]&&(l[d]=v)}for(var m=_A(s,c,u,l,i);m;)m=_A(s,c,u,l,i);var y;return i.mode==="dendrogram"?(y=LT(s[0],i.dendrogramDepth,t),i.addDendrogram&&MT(s[0],t)):(y=new Array(s.length),s.forEach(function(b,g){b.key=b.index=null,y[g]=t.collection(b.value)})),y},RG={hierarchicalClustering:wA,hca:wA},IG=bi({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),kG=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ln("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(o){return o===n})||ot(n)||ln("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(n)),IG(e)},DG=function(e,t,n,i){var o=function(s,u){return i[u](s)};return-X0(e,i.length,function(a){return o(t,a)},function(a){return o(n,a)},t,n)},MG=function(e,t){var n=null;return t==="median"?n=k9(e):t==="mean"?n=I9(e):t==="min"?n=A9(e):t==="max"?n=R9(e):n=t,n},LG=function(e,t,n){for(var i=[],o=0;o<e;o++)t[o*e+o]+n[o*e+o]>0&&i.push(o);return i},EA=function(e,t,n){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[o*e+l]>s&&(a=l,s=t[o*e+l])}a>0&&i.push(a)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},NG=function(e,t,n){for(var i=EA(e,t,n),o=0;o<n.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===n[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var f=0,h=0;h<a.length;h++)f+=t[a[h]*e+a[c]];f>l&&(u=c,l=f)}n[o]=a[u]}return i=EA(e,t,n),i},OA=function(e){for(var t=this.cy(),n=this.nodes(),i=kG(e),o={},a=0;a<n.length;a++)o[n[a].id()]=a;var s,u,l,c,f,h;s=n.length,u=s*s,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<s;v++)for(var p=0;p<s;p++)v!==p&&(l[v*s+p]=DG(i.distance,n[v],n[p],i.attributes));c=MG(l,i.preference);for(var m=0;m<s;m++)l[m*s+m]=c;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;h=new Array(u);for(var b=0;b<u;b++)h[b]=0;for(var g=new Array(s),_=new Array(s),w=new Array(s),x=0;x<s;x++)g[x]=0,_[x]=0,w[x]=0;for(var E=new Array(s*i.minIterations),O=0;O<E.length;O++)E[O]=0;var C;for(C=0;C<i.maxIterations;C++){for(var A=0;A<s;A++){for(var R=-1/0,k=-1/0,D=-1,L=0,j=0;j<s;j++)g[j]=f[A*s+j],L=h[A*s+j]+l[A*s+j],L>=R?(k=R,R=L,D=j):L>k&&(k=L);for(var q=0;q<s;q++)f[A*s+q]=(1-i.damping)*(l[A*s+q]-R)+i.damping*g[q];f[A*s+D]=(1-i.damping)*(l[A*s+D]-k)+i.damping*g[D]}for(var B=0;B<s;B++){for(var U=0,W=0;W<s;W++)g[W]=h[W*s+B],_[W]=Math.max(0,f[W*s+B]),U+=_[W];U-=_[B],_[B]=f[B*s+B],U+=_[B];for(var H=0;H<s;H++)h[H*s+B]=(1-i.damping)*Math.min(0,U-_[H])+i.damping*g[H];h[B*s+B]=(1-i.damping)*(U-_[B])+i.damping*g[B]}for(var Y=0,Z=0;Z<s;Z++){var ce=h[Z*s+Z]+f[Z*s+Z]>0?1:0;E[C%i.minIterations*s+Z]=ce,Y+=ce}if(Y>0&&(C>=i.minIterations-1||C==i.maxIterations-1)){for(var $=0,K=0;K<s;K++){w[K]=0;for(var ie=0;ie<i.minIterations;ie++)w[K]+=E[ie*s+K];(w[K]===0||w[K]===i.minIterations)&&$++}if($===s)break}}for(var ae=LG(s,f,h),le=NG(s,l,ae),te={},ee=0;ee<ae.length;ee++)te[ae[ee]]=[];for(var re=0;re<n.length;re++){var he=o[n[re].id()],ve=le[he];ve!=null&&te[ve].push(n[re])}for(var _e=new Array(ae.length),Oe=0;Oe<ae.length;Oe++)_e[Oe]=t.collection(te[ae[Oe]]);return _e},jG={affinityPropagation:OA,ap:OA},FG=bi({root:void 0,directed:!1}),BG={hierholzer:function(e){if(!xr(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=FG(e),i=n.root,o=n.directed,a=this,s=!1,u,l,c;i&&(c=Ct(i)?this.filter(i)[0].id():i[0].id());var f={},h={};o?a.forEach(function(b){var g=b.id();if(b.isNode()){var _=b.indegree(!0),w=b.outdegree(!0),x=_-w,E=w-_;x==1?u?s=!0:u=g:E==1?l?s=!0:l=g:(E>1||x>1)&&(s=!0),f[g]=[],b.outgoers().forEach(function(O){O.isEdge()&&f[g].push(O.id())})}else h[g]=[void 0,b.target().id()]}):a.forEach(function(b){var g=b.id();if(b.isNode()){var _=b.degree(!0);_%2&&(u?l?s=!0:l=g:u=g),f[g]=[],b.connectedEdges().forEach(function(w){return f[g].push(w.id())})}else h[g]=[b.source().id(),b.target().id()]});var d={found:!1,trail:void 0};if(s)return d;if(l&&u)if(o){if(c&&l!=c)return d;c=l}else{if(c&&l!=c&&u!=c)return d;c||(c=l)}else c||(c=a[0].id());var v=function(g){for(var _=g,w=[g],x,E,O;f[_].length;)x=f[_].shift(),E=h[x][0],O=h[x][1],_!=O?(f[O]=f[O].filter(function(C){return C!=x}),_=O):!o&&_!=E&&(f[E]=f[E].filter(function(C){return C!=x}),_=E),w.unshift(x),w.unshift(_);return w},p=[],m=[];for(m=v(c);m.length!=1;)f[m[0]].length==0?(p.unshift(a.getElementById(m.shift())),p.unshift(a.getElementById(m.shift()))):m=v(m.shift()).concat(m);p.unshift(a.getElementById(m.shift()));for(var y in f)if(f[y].length)return d;return d.found=!0,d.trail=this.spawn(p,!0),d}},em=function(){var e=this,t={},n=0,i=0,o=[],a=[],s={},u=function(h,d){for(var v=a.length-1,p=[],m=e.spawn();a[v].x!=h||a[v].y!=d;)p.push(a.pop().edge),v--;p.push(a.pop().edge),p.forEach(function(y){var b=y.connectedNodes().intersection(e);m.merge(y),b.forEach(function(g){var _=g.id(),w=g.connectedEdges().intersection(e);m.merge(g),t[_].cutVertex?m.merge(w.filter(function(x){return x.isLoop()})):m.merge(w)})}),o.push(m)},l=function(h,d,v){h===v&&(i+=1),t[d]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(d).connectedEdges().intersection(e);if(p.size()===0)o.push(e.spawn(e.getElementById(d)));else{var m,y,b,g;p.forEach(function(_){m=_.source().id(),y=_.target().id(),b=m===d?y:m,b!==v&&(g=_.id(),s[g]||(s[g]=!0,a.push({x:d,y:b,edge:_})),b in t?t[d].low=Math.min(t[d].low,t[b].id):(l(h,b,d),t[d].low=Math.min(t[d].low,t[b].low),t[d].id<=t[b].low&&(t[d].cutVertex=!0,u(d,b))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in t||(i=0,l(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:o}},UG={hopcroftTarjanBiconnected:em,htbc:em,htb:em,hopcroftTarjanBiconnectedComponents:em},tm=function(){var e=this,t={},n=0,i=[],o=[],a=e.spawn(e),s=function(l){o.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(p){var m=p.target().id();m!==l&&(m in t||s(m),t[m].explored||(t[l].low=Math.min(t[l].low,t[m].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var h=o.pop();if(f.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var d=f.edgesWith(f),v=f.merge(d);i.push(v),a=a.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:a,components:i}},qG={tarjanStronglyConnected:tm,tsc:tm,tscc:tm,tarjanStronglyConnectedComponents:tm},u3={};[Hp,y9,m9,_9,E9,x9,C9,eG,Yh,Xh,DT,dG,TG,RG,jG,BG,UG,qG].forEach(function(r){jt(u3,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var l3=0,c3=1,f3=2,Da=function(e){if(!(this instanceof Da))return new Da(e);this.id="Thenable/1.0.7",this.state=l3,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Da.prototype={fulfill:function(e){return xA(this,c3,"fulfillValue",e)},reject:function(e){return xA(this,f3,"rejectReason",e)},then:function(e,t){var n=this,i=new Da;return n.onFulfilled.push(TA(e,i,"fulfill")),n.onRejected.push(TA(t,i,"reject")),h3(n),i.proxy}};var xA=function(e,t,n,i){return e.state===l3&&(e.state=t,e[n]=i,h3(e)),e},h3=function(e){e.state===c3?SA(e,"onFulfilled",e.fulfillValue):e.state===f3&&SA(e,"onRejected",e.rejectReason)},SA=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},TA=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var o;try{o=e(i)}catch(a){t.reject(a);return}d3(t,o)}}},d3=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Wn(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(o){e.reject(o);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(o){i||(i=!0,o===t?e.reject(new TypeError("circular thenable chain")):d3(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(t)};Da.all=function(r){return new Da(function(e,t){for(var n=new Array(r.length),i=0,o=function(u,l){n[u]=l,i++,i===r.length&&e(n)},a=0;a<r.length;a++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){o(s,f)},function(f){t(f)});else{var c=u;o(s,c)}})(a)})};Da.resolve=function(r){return new Da(function(e,t){e(r)})};Da.reject=function(r){return new Da(function(e,t){t(r)})};var dd=typeof Promise<"u"?Promise:Da,NT=function(e,t,n){var i=VC(e),o=!i,a=this._private=jt({duration:1e3},t,n);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&gn(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},$c=NT.prototype;jt($c,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Lo(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new dd(function(i,o){n.push(function(){i()})})}});$c.complete=$c.completed;$c.run=$c.play;$c.running=$c.playing;var zG={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=jt({},t,n);var f=Object.keys(t).length===0;if(f)return new NT(a[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var h=t.renderedPosition,d=s.pan(),v=s.zoom();t.position=Q5(h,v,d)}if(u&&t.panBy!=null){var p=t.panBy,m=s.pan();t.pan={x:m.x+p.x,y:m.y+p.y}}var y=t.center||t.centre;if(u&&y!=null){var b=s.getCenterPan(y.eles,t.zoom);b!=null&&(t.pan=b)}if(u&&t.fit!=null){var g=t.fit,_=s.getFitViewport(g.eles||g.boundingBox,g.padding);_!=null&&(t.pan=_.pan,t.zoom=_.zoom)}if(u&&xr(t.zoom)){var w=s.getZoomedViewport(t.zoom);w!=null?(w.zoomed&&(t.zoom=w.zoom),w.panned&&(t.pan=w.pan)):t.zoom=null}return new NT(a[0],t)}},animate:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=jt({},t,n));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var d=f[h],v=d._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},i1,CA;function $0(){if(CA)return i1;CA=1;var r=Array.isArray;return i1=r,i1}var o1,PA;function GG(){if(PA)return o1;PA=1;var r=$0(),e=pg(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return o1=i,o1}var a1,AA;function VG(){if(AA)return a1;AA=1;var r=G5(),e=vg(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return a1=a,a1}var s1,RA;function WG(){if(RA)return s1;RA=1;var r=W0(),e=r["__core-js_shared__"];return s1=e,s1}var u1,IA;function HG(){if(IA)return u1;IA=1;var r=WG(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return u1=t,u1}var l1,kA;function YG(){if(kA)return l1;kA=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return l1=t,l1}var c1,DA;function XG(){if(DA)return c1;DA=1;var r=VG(),e=HG(),t=vg(),n=YG(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return c1=f,c1}var f1,MA;function $G(){if(MA)return f1;MA=1;function r(e,t){return e==null?void 0:e[t]}return f1=r,f1}var h1,LA;function t2(){if(LA)return h1;LA=1;var r=XG(),e=$G();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return h1=t,h1}var d1,NA;function K0(){if(NA)return d1;NA=1;var r=t2(),e=r(Object,"create");return d1=e,d1}var v1,jA;function KG(){if(jA)return v1;jA=1;var r=K0();function e(){this.__data__=r?r(null):{},this.size=0}return v1=e,v1}var p1,FA;function ZG(){if(FA)return p1;FA=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return p1=r,p1}var g1,BA;function QG(){if(BA)return g1;BA=1;var r=K0(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return g1=i,g1}var y1,UA;function JG(){if(UA)return y1;UA=1;var r=K0(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return y1=n,y1}var m1,qA;function e7(){if(qA)return m1;qA=1;var r=K0(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return m1=t,m1}var b1,zA;function t7(){if(zA)return b1;zA=1;var r=KG(),e=ZG(),t=QG(),n=JG(),i=e7();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,b1=o,b1}var _1,GA;function r7(){if(GA)return _1;GA=1;function r(){this.__data__=[],this.size=0}return _1=r,_1}var w1,VA;function v3(){if(VA)return w1;VA=1;function r(e,t){return e===t||e!==e&&t!==t}return w1=r,w1}var E1,WA;function Z0(){if(WA)return E1;WA=1;var r=v3();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return E1=e,E1}var O1,HA;function n7(){if(HA)return O1;HA=1;var r=Z0(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return O1=n,O1}var x1,YA;function i7(){if(YA)return x1;YA=1;var r=Z0();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return x1=e,x1}var S1,XA;function o7(){if(XA)return S1;XA=1;var r=Z0();function e(t){return r(this.__data__,t)>-1}return S1=e,S1}var T1,$A;function a7(){if($A)return T1;$A=1;var r=Z0();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return T1=e,T1}var C1,KA;function s7(){if(KA)return C1;KA=1;var r=r7(),e=n7(),t=i7(),n=o7(),i=a7();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,C1=o,C1}var P1,ZA;function u7(){if(ZA)return P1;ZA=1;var r=t2(),e=W0(),t=r(e,"Map");return P1=t,P1}var A1,QA;function l7(){if(QA)return A1;QA=1;var r=t7(),e=s7(),t=u7();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return A1=n,A1}var R1,JA;function c7(){if(JA)return R1;JA=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return R1=r,R1}var I1,eR;function Q0(){if(eR)return I1;eR=1;var r=c7();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return I1=e,I1}var k1,tR;function f7(){if(tR)return k1;tR=1;var r=Q0();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return k1=e,k1}var D1,rR;function h7(){if(rR)return D1;rR=1;var r=Q0();function e(t){return r(this,t).get(t)}return D1=e,D1}var M1,nR;function d7(){if(nR)return M1;nR=1;var r=Q0();function e(t){return r(this,t).has(t)}return M1=e,M1}var L1,iR;function v7(){if(iR)return L1;iR=1;var r=Q0();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return L1=e,L1}var N1,oR;function p7(){if(oR)return N1;oR=1;var r=l7(),e=f7(),t=h7(),n=d7(),i=v7();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,N1=o,N1}var j1,aR;function g7(){if(aR)return j1;aR=1;var r=p7(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,j1=t,j1}var F1,sR;function y7(){if(sR)return F1;sR=1;var r=g7(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return F1=t,F1}var B1,uR;function p3(){if(uR)return B1;uR=1;var r=y7(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return B1=n,B1}var U1,lR;function g3(){if(lR)return U1;lR=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return U1=r,U1}var q1,cR;function m7(){if(cR)return q1;cR=1;var r=HC(),e=g3(),t=$0(),n=pg(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return q1=a,q1}var z1,fR;function y3(){if(fR)return z1;fR=1;var r=m7();function e(t){return t==null?"":r(t)}return z1=e,z1}var G1,hR;function m3(){if(hR)return G1;hR=1;var r=$0(),e=GG(),t=p3(),n=y3();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return G1=i,G1}var V1,dR;function r2(){if(dR)return V1;dR=1;var r=pg();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return V1=e,V1}var W1,vR;function b7(){if(vR)return W1;vR=1;var r=m3(),e=r2();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return W1=t,W1}var H1,pR;function _7(){if(pR)return H1;pR=1;var r=b7();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return H1=e,H1}var w7=_7(),E7=dg(w7),Y1,gR;function O7(){if(gR)return Y1;gR=1;var r=t2(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Y1=e,Y1}var X1,yR;function x7(){if(yR)return X1;yR=1;var r=O7();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return X1=e,X1}var $1,mR;function S7(){if(mR)return $1;mR=1;var r=x7(),e=v3(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return $1=i,$1}var K1,bR;function T7(){if(bR)return K1;bR=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return K1=t,K1}var Z1,_R;function C7(){if(_R)return Z1;_R=1;var r=S7(),e=m3(),t=T7(),n=vg(),i=r2();function o(a,s,u,l){if(!n(a))return a;s=e(s,a);for(var c=-1,f=s.length,h=f-1,d=a;d!=null&&++c<f;){var v=i(s[c]),p=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return a;if(c!=h){var m=d[v];p=l?l(m,v,d):void 0,p===void 0&&(p=n(m)?m:t(s[c+1])?[]:{})}r(d,v,p),d=d[v]}return a}return Z1=o,Z1}var Q1,wR;function P7(){if(wR)return Q1;wR=1;var r=C7();function e(t,n,i){return t==null?t:r(t,n,i)}return Q1=e,Q1}var A7=P7(),R7=dg(A7),J1,ER;function I7(){if(ER)return J1;ER=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return J1=r,J1}var ew,OR;function k7(){if(OR)return ew;OR=1;var r=g3(),e=I7(),t=$0(),n=pg(),i=p3(),o=r2(),a=y3();function s(u){return t(u)?r(u,o):n(u)?[u]:e(i(a(u)))}return ew=s,ew}var D7=k7(),M7=dg(D7),L7={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=jt({},t,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Ct(i)){var f=i.indexOf(".")!==-1,h=f&&M7(i);if(a.allowGetting&&o===void 0){var d;return c&&(a.beforeGet(c),h&&c._private[a.field][i]===void 0?d=E7(c._private[a.field],h):d=c._private[a.field][i]),d}else if(a.allowSetting&&o!==void 0){var v=!a.immutableKeys[i];if(v){var p=D5({},i,o);a.beforeSet(s,p);for(var m=0,y=l.length;m<y;m++){var b=l[m];a.canSet(b)&&(h&&c._private[a.field][i]===void 0?R7(b._private[a.field],h,o):b._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&xr(i)){var g=i,_,w,x=Object.keys(g);a.beforeSet(s,g);for(var E=0;E<x.length;E++){_=x[E],w=g[_];var O=!a.immutableKeys[_];if(O)for(var C=0;C<l.length;C++){var A=l[C];a.canSet(A)&&(A._private[a.field][_]=w)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&gn(i)){var R=i;s.on(a.bindingEvent,R)}else if(a.allowGetting&&i===void 0){var k;return c&&(a.beforeGet(c),k=c._private[a.field]),k}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=jt({},t,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(Ct(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!vl(h)){var d=!o.immutableKeys[h];if(d)for(var v=0,p=u.length;v<p;v++)u[v]._private[o.field][h]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var m=0,y=u.length;m<y;m++)for(var b=u[m]._private[o.field],g=Object.keys(b),_=0;_<g.length;_++){var w=g[_],x=!o.immutableKeys[w];x&&(b[w]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},N7={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new dd(function(s,u){var l=function(d){o.off.apply(o,f),s(d)},c=a.concat([l]),f=c.concat([]);o.on.apply(o,c)})}}},Lr={};[zG,L7,N7].forEach(function(r){jt(Lr,r)});var j7={animate:Lr.animate(),animation:Lr.animation(),animated:Lr.animated(),clearQueue:Lr.clearQueue(),delay:Lr.delay(),delayAnimation:Lr.delayAnimation(),stop:Lr.stop()},Hm={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else Gr(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new hd(e),a=0;a<t.length;a++){for(var s=t[a],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h);if(!d){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){Gr(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,o=[],a=0,s=n.length;a<s;a++)for(var u=n[a],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h),v=!1;t||i&&!d?(l.add(h),v=!0):(!t||i&&d)&&(l.delete(h),v=!0),!c&&v&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Hm.className=Hm.classNames=Hm.classes;var Er={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Gn,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Er.variable="(?:[\\w-.]|(?:\\\\"+Er.metaChar+"))+";Er.className="(?:[\\w-]|(?:\\\\"+Er.metaChar+"))+";Er.value=Er.string+"|"+Er.number;Er.id=Er.variable;(function(){var r,e,t;for(r=Er.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Er.comparatorOp+="|@"+e;for(r=Er.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Er.comparatorOp+="|\\!"+e)})();var Ur=function(){return{checks:[]}},vt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},jT=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return Lz(r.selector,e.selector)}),F7=(function(){for(var r={},e,t=0;t<jT.length;t++)e=jT[t],r[e.selector]=e.matches;return r})(),B7=function(e,t){return F7[e](t)},U7="("+jT.map(function(r){return r.selector}).join("|")+")",mh=function(e){return e.replace(new RegExp("\\\\("+Er.metaChar+")","g"),function(t,n){return n})},zu=function(e,t,n){e[e.length-1]=n},FT=[{name:"group",query:!0,regex:"("+Er.group+")",populate:function(e,t,n){var i=Fn(n,1),o=i[0];t.checks.push({type:vt.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:U7,populate:function(e,t,n){var i=Fn(n,1),o=i[0];t.checks.push({type:vt.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+Er.id+")",populate:function(e,t,n){var i=Fn(n,1),o=i[0];t.checks.push({type:vt.ID,value:mh(o)})}},{name:"className",query:!0,regex:"\\.("+Er.className+")",populate:function(e,t,n){var i=Fn(n,1),o=i[0];t.checks.push({type:vt.CLASS,value:mh(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Er.variable+")\\s*\\]",populate:function(e,t,n){var i=Fn(n,1),o=i[0];t.checks.push({type:vt.DATA_EXIST,field:mh(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Er.variable+")\\s*("+Er.comparatorOp+")\\s*("+Er.value+")\\s*\\]",populate:function(e,t,n){var i=Fn(n,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+Er.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:vt.DATA_COMPARE,field:mh(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Er.boolOp+")\\s*("+Er.variable+")\\s*\\]",populate:function(e,t,n){var i=Fn(n,2),o=i[0],a=i[1];t.checks.push({type:vt.DATA_BOOL,field:mh(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Er.meta+")\\s*("+Er.comparatorOp+")\\s*("+Er.number+")\\s*\\]\\]",populate:function(e,t,n){var i=Fn(n,3),o=i[0],a=i[1],s=i[2];t.checks.push({type:vt.META_COMPARE,field:mh(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Er.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];n!=null&&(a.subject=n,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Ur();return s}},{name:"directedEdge",separator:!0,regex:Er.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Ur(),i=t,o=Ur();return n.checks.push({type:vt.DIRECTED_EDGE,source:i,target:o}),zu(e,t,n),e.edgeCount++,o}else{var a=Ur(),s=t,u=Ur();return a.checks.push({type:vt.NODE_SOURCE,source:s,target:u}),zu(e,t,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Er.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Ur(),i=t,o=Ur();return n.checks.push({type:vt.UNDIRECTED_EDGE,nodes:[i,o]}),zu(e,t,n),e.edgeCount++,o}else{var a=Ur(),s=t,u=Ur();return a.checks.push({type:vt.NODE_NEIGHBOR,node:s,neighbor:u}),zu(e,t,a),u}}},{name:"child",separator:!0,regex:Er.child,populate:function(e,t){if(e.currentSubject==null){var n=Ur(),i=Ur(),o=e[e.length-1];return n.checks.push({type:vt.CHILD,parent:o,child:i}),zu(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=Ur(),s=e[e.length-1],u=Ur(),l=Ur(),c=Ur(),f=Ur();return a.checks.push({type:vt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:vt.TRUE}],f.checks.push({type:vt.TRUE}),u.checks.push({type:vt.PARENT,parent:f,child:c}),zu(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=Ur(),d=Ur(),v=[{type:vt.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:Er.descendant,populate:function(e,t){if(e.currentSubject==null){var n=Ur(),i=Ur(),o=e[e.length-1];return n.checks.push({type:vt.DESCENDANT,ancestor:o,descendant:i}),zu(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=Ur(),s=e[e.length-1],u=Ur(),l=Ur(),c=Ur(),f=Ur();return a.checks.push({type:vt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:vt.TRUE}],f.checks.push({type:vt.TRUE}),u.checks.push({type:vt.ANCESTOR,ancestor:f,descendant:c}),zu(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=Ur(),d=Ur(),v=[{type:vt.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:Er.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Nr("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],o=i==null?null:i.type;o===vt.DIRECTED_EDGE?i.type=vt.NODE_TARGET:o===vt.UNDIRECTED_EDGE&&(i.type=vt.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];FT.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var q7=function(e){for(var t,n,i,o=0;o<FT.length;o++){var a=FT[o],s=a.name,u=e.match(a.regexObj);if(u!=null){n=u,t=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},z7=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},G7=function(e){var t=this,n=t.inputText=e,i=t[0]=Ur();for(t.length=1,n=z7(n);;){var o=q7(n);if(o.expr==null)return Nr("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(t,i,a);if(s===!1)return!1;if(s!=null&&(i=s),n=o.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Nr("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Nr("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Nr("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},V7=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return Ct(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var h=c.type,d=c.value;switch(h){case vt.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case vt.DATA_COMPARE:{var p=c.field,m=c.operator;return"["+p+n(e(m))+t(d)+"]"}case vt.DATA_BOOL:{var y=c.operator,b=c.field;return"["+e(y)+b+"]"}case vt.DATA_EXIST:{var g=c.field;return"["+g+"]"}case vt.META_COMPARE:{var _=c.operator,w=c.field;return"[["+w+n(e(_))+t(d)+"]]"}case vt.STATE:return d;case vt.ID:return"#"+d;case vt.CLASS:return"."+d;case vt.PARENT:case vt.CHILD:return o(c.parent,f)+n(">")+o(c.child,f);case vt.ANCESTOR:case vt.DESCENDANT:return o(c.ancestor,f)+" "+o(c.descendant,f);case vt.COMPOUND_SPLIT:{var x=o(c.left,f),E=o(c.subject,f),O=o(c.right,f);return x+(x.length>0?" ":"")+E+O}case vt.TRUE:return""}},o=function(c,f){return c.checks.reduce(function(h,d,v){return h+(f===c&&v===0?"$":"")+i(d,f)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},W7={parse:G7,toString:V7},b3=function(e,t,n){var i,o=Ct(e),a=ot(e),s=Ct(n),u,l,c=!1,f=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!h)&&(i=!i),i},H7=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Y7=function(e){return e!==void 0},n2=function(e,t){return e.data(t)},X7=function(e,t){return e[t]()},xn=[],rn=function(e,t){return e.checks.every(function(n){return xn[n.type](n,t)})};xn[vt.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};xn[vt.STATE]=function(r,e){var t=r.value;return B7(t,e)};xn[vt.ID]=function(r,e){var t=r.value;return e.id()===t};xn[vt.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};xn[vt.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return b3(X7(e,t),n,i)};xn[vt.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return b3(n2(e,t),n,i)};xn[vt.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return H7(n2(e,t),n)};xn[vt.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,Y7(n2(e,t))};xn[vt.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),o=e.target();return rn(t,i)&&rn(n,o)||rn(n,i)&&rn(t,o)};xn[vt.NODE_NEIGHBOR]=function(r,e){return rn(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&rn(r.neighbor,t)})};xn[vt.DIRECTED_EDGE]=function(r,e){return rn(r.source,e.source())&&rn(r.target,e.target())};xn[vt.NODE_SOURCE]=function(r,e){return rn(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&rn(r.target,t)})};xn[vt.NODE_TARGET]=function(r,e){return rn(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&rn(r.source,t)})};xn[vt.CHILD]=function(r,e){return rn(r.child,e)&&rn(r.parent,e.parent())};xn[vt.PARENT]=function(r,e){return rn(r.parent,e)&&e.children().some(function(t){return rn(r.child,t)})};xn[vt.DESCENDANT]=function(r,e){return rn(r.descendant,e)&&e.ancestors().some(function(t){return rn(r.ancestor,t)})};xn[vt.ANCESTOR]=function(r,e){return rn(r.ancestor,e)&&e.descendants().some(function(t){return rn(r.descendant,t)})};xn[vt.COMPOUND_SPLIT]=function(r,e){return rn(r.subject,e)&&rn(r.left,e)&&rn(r.right,e)};xn[vt.TRUE]=function(){return!0};xn[vt.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};xn[vt.FILTER]=function(r,e){var t=r.value;return t(e)};var $7=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===vt.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(o){for(var a=0;a<t.length;a++){var s=t[a];if(rn(s,o))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},K7=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(rn(i,e))return!0}return!1},Z7={matches:K7,filter:$7},yl=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ct(e)&&e.match(/^\s*$/)||(Lo(e)?this.addQuery({checks:[{type:vt.COLLECTION,value:e.collection()}]}):gn(e)?this.addQuery({checks:[{type:vt.FILTER,value:e}]}):Ct(e)?this.parse(e)||(this.invalid=!0):ln("A selector must be created from a string; found "))},ml=yl.prototype;[W7,Z7].forEach(function(r){return jt(ml,r)});ml.text=function(){return this.inputText};ml.size=function(){return this.length};ml.eq=function(r){return this[r]};ml.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};ml.addQuery=function(r){this[this.length++]=r};ml.selector=ml.toString;var ul={allAre:function(e){var t=new yl(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new yl(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ul.allAreNeighbours=ul.allAreNeighbors;ul.has=ul.contains;ul.equal=ul.equals=ul.same;var aa=function(e,t){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":Lo(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},d=h[t]=h[t]||[],v=Yc(c),p=d[v];return p||(d[v]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},od={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&t.push(a)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var o=n[i];t.push(o)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],o=i.parents();t=t||o,t=t.intersect(o)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:aa(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var o=0;o<i.length;o++){var a=i[o];t.push(a),a.children().nonempty()&&n(a.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function i2(r,e,t,n){for(var i=[],o=new hd,a=r.cy(),s=a.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&n(i,o,c)}return r}function _3(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var o=n[i];e.has(o.id())||r.push(o)}}od.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i2(this,r,e,_3)};function w3(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}od.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i2(this,r,e,w3)};function Q7(r,e,t){w3(r,e,t),_3(r,e,t)}od.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i2(this,r,e,Q7)};od.ancestors=od.parents;var $p,E3;$p=E3={data:Lr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Lr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Lr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Lr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Lr.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Lr.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};$p.attr=$p.data;$p.removeAttr=$p.removeData;var J7=E3,J0={};function tw(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}jt(J0,{degree:tw(function(r,e){return e.source().same(e.target())?2:1}),indegree:tw(function(r,e){return e.target().same(r)?1:0}),outdegree:tw(function(r,e){return e.source().same(r)?1:0})});function bh(r,e){return function(t){for(var n,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}jt(J0,{minDegree:bh("degree",function(r,e){return r<e}),maxDegree:bh("degree",function(r,e){return r>e}),minIndegree:bh("indegree",function(r,e){return r<e}),maxIndegree:bh("indegree",function(r,e){return r>e}),minOutdegree:bh("outdegree",function(r,e){return r<e}),maxOutdegree:bh("outdegree",function(r,e){return r>e})});jt(J0,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var Ra,O3,x3=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:t.x!=null?t.x-a.x:0,y:t.y!=null?t.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,n),o.dirtyBoundingBoxCache()}}},xR={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){x3(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Ra=O3={position:Lr.data(xR),silentPosition:Lr.data(jt({},xR,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){x3(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(xr(e))t?this.silentPosition(e):this.position(e);else if(gn(e)){var n=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=n(a,o))&&(t?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(xr(e)?(i={x:ot(e.x)?e.x:0,y:ot(e.y)?e.y:0},n=t):Ct(e)&&ot(t)&&(i={x:0,y:0},i[e]=t),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,t){return xr(e)?this.shift(e,!0):Ct(e)&&ot(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=xr(e)?e:void 0,u=s!==void 0||t!==void 0&&Ct(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-a[e])/o):s!==void 0&&c.position(Q5(s,o,a))}else{var f=n.position();return s=Y0(f,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),o=xr(e)?e:void 0,a=o!==void 0||t!==void 0&&Ct(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var d=h?c.position():{x:0,y:0};t!==void 0?l.position(e,t+d[e]):o!==void 0&&l.position({x:o.x+d.x,y:o.y+d.y})}else{var v=n.position(),p=s?n.parent():null,m=p&&p.length>0,y=m;m&&(p=p[0]);var b=y?p.position():{x:0,y:0};return o={x:v.x-b.x,y:v.y-b.y},e===void 0?o:o[e]}else if(!a)return;return this}};Ra.modelPosition=Ra.point=Ra.position;Ra.modelPositions=Ra.points=Ra.positions;Ra.renderedPoint=Ra.renderedPosition;Ra.relativePoint=Ra.relativePosition;var eV=O3,$h,Tl;$h=Tl={};Tl.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),o=e.x1*n+i.x,a=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};Tl.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Tl.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=s.position;(f.w===0||f.h===0)&&(f={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function d(C,A,R){var k=0,D=0,L=A+R;return C>0&&L>0&&(k=A/L*C,D=R/L*C),{biasDiff:k,biasComplementDiff:D}}function v(C,A,R,k){if(R.units==="%")switch(k){case"width":return C>0?R.pfValue*C:0;case"height":return A>0?R.pfValue*A:0;case"average":return C>0&&A>0?R.pfValue*(C+A)/2:0;case"min":return C>0&&A>0?C>A?R.pfValue*A:R.pfValue*C:0;case"max":return C>0&&A>0?C>A?R.pfValue*C:R.pfValue*A:0;default:return 0}else return R.units==="px"?R.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var m=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var y=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var g=d(c.width.val-f.w,p,m),_=g.biasDiff,w=g.biasComplementDiff,x=d(c.height.val-f.h,y,b),E=x.biasDiff,O=x.biasComplementDiff;s.autoPadding=v(f.w,f.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),h.x=(-_+f.x1+f.x2+w)/2,s.autoHeight=Math.max(f.h,c.height.val),h.y=(-E+f.y1+f.y2+O)/2}for(var n=0;n<this.length;n++){var i=this[n],o=i._private;(!o.compoundBoundsClean||r)&&(t(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var ia=function(e){return e===1/0||e===-1/0?0:e},Sa=function(e,t,n,i,o){i-t===0||o-n===0||t==null||n==null||i==null||o==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Zu=function(e,t){return t==null?e:Sa(e,t.x1,t.y1,t.x2,t.y2)},Sv=function(e,t,n){return fo(e,t,n)},rm=function(e,t,n){if(!t.cy().headless()){var i=t._private,o=i.rstyle,a=o.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=o.srcX,l=o.srcY):n==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-a,f.y1=l-a,f.x2=u+a,f.y2=l+a,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Vm(f,1),Sa(e,f.x1,f.y1,f.x2,f.y2)}}},rw=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var o=t._private,a=o.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=Sv(a,"labelWidth",n),f=Sv(a,"labelHeight",n),h=Sv(a,"labelX",n),d=Sv(a,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,p=t.pstyle(i+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle(i+"text-rotation"),b=t.pstyle("text-outline-width").pfValue,g=t.pstyle("text-border-width").pfValue,_=g/2,w=t.pstyle("text-background-padding").pfValue,x=2,E=f,O=c,C=O/2,A=E/2,R,k,D,L;if(m)R=h-C,k=h+C,D=d-A,L=d+A;else{switch(u.value){case"left":R=h-O,k=h;break;case"center":R=h-C,k=h+C;break;case"right":R=h,k=h+O;break}switch(l.value){case"top":D=d-E,L=d;break;case"center":D=d-A,L=d+A;break;case"bottom":D=d,L=d+E;break}}var j=v-Math.max(b,_)-w-x,q=v+Math.max(b,_)+w+x,B=p-Math.max(b,_)-w-x,U=p+Math.max(b,_)+w+x;R+=j,k+=q,D+=B,L+=U;var W=n||"main",H=o.labelBounds,Y=H[W]=H[W]||{};Y.x1=R,Y.y1=D,Y.x2=k,Y.y2=L,Y.w=k-R,Y.h=L-D,Y.leftPad=j,Y.rightPad=q,Y.topPad=B,Y.botPad=U;var Z=m&&y.strValue==="autorotate",ce=y.pfValue!=null&&y.pfValue!==0;if(Z||ce){var $=Z?Sv(o.rstyle,"labelAngle",n):y.pfValue,K=Math.cos($),ie=Math.sin($),ae=(R+k)/2,le=(D+L)/2;if(!m){switch(u.value){case"left":ae=k;break;case"right":ae=R;break}switch(l.value){case"top":le=L;break;case"bottom":le=D;break}}var te=function(me,F){return me=me-ae,F=F-le,{x:me*K-F*ie+ae,y:me*ie+F*K+le}},ee=te(R,D),re=te(R,L),he=te(k,D),ve=te(k,L);R=Math.min(ee.x,re.x,he.x,ve.x),k=Math.max(ee.x,re.x,he.x,ve.x),D=Math.min(ee.y,re.y,he.y,ve.y),L=Math.max(ee.y,re.y,he.y,ve.y)}var _e=W+"Rot",Oe=H[_e]=H[_e]||{};Oe.x1=R,Oe.y1=D,Oe.x2=k,Oe.y2=L,Oe.w=k-R,Oe.h=L-D,Sa(e,R,D,k,L),Sa(o.labelBounds.all,R,D,k,L)}return e}},SR=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value,o=t.pstyle("outline-offset").value,a=i+o;S3(e,t,n,a,"outside",a/2)}},S3=function(e,t,n,i,o,a){if(!(n===0||i<=0||o==="inside")){var s=t.cy(),u=t.pstyle("shape").value,l=s.renderer().nodeShapes[u],c=t.position(),f=c.x,h=c.y,d=t.width(),v=t.height();if(l.hasMiterBounds){o==="center"&&(i/=2);var p=l.miterBounds(f,h,d,v,i);Zu(e,p)}else a!=null&&a>0&&Wm(e,[a,a,a,a])}},tV=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,i=t.pstyle("border-width").pfValue,o=t.pstyle("border-position").value;S3(e,t,n,i,o)}},rV=function(e,t){var n=e._private.cy,i=n.styleEnabled(),o=n.headless(),a=$i(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,d,v,p,m=s.rstyle,y=u&&i?e.pstyle("bounds-expansion").pfValue:[0],b=function(Pe){return Pe.pstyle("display").value!=="none"},g=!i||b(e)&&(!l||b(e.source())&&b(e.target()));if(g){var _=0,w=0;i&&t.includeOverlays&&(_=e.pstyle("overlay-opacity").value,_!==0&&(w=e.pstyle("overlay-padding").value));var x=0,E=0;i&&t.includeUnderlays&&(x=e.pstyle("underlay-opacity").value,x!==0&&(E=e.pstyle("underlay-padding").value));var O=Math.max(w,E),C=0,A=0;if(i&&(C=e.pstyle("width").pfValue,A=C/2),u&&t.includeNodes){var R=e.position();v=R.x,p=R.y;var k=e.outerWidth(),D=k/2,L=e.outerHeight(),j=L/2;c=v-D,f=v+D,h=p-j,d=p+j,Sa(a,c,h,f,d),i&&SR(a,e),i&&t.includeOutlines&&!o&&SR(a,e),i&&tV(a,e)}else if(l&&t.includeEdges)if(i&&!o){var q=e.pstyle("curve-style").strValue;if(c=Math.min(m.srcX,m.midX,m.tgtX),f=Math.max(m.srcX,m.midX,m.tgtX),h=Math.min(m.srcY,m.midY,m.tgtY),d=Math.max(m.srcY,m.midY,m.tgtY),c-=A,f+=A,h-=A,d+=A,Sa(a,c,h,f,d),q==="haystack"){var B=m.haystackPts;if(B&&B.length===2){if(c=B[0].x,h=B[0].y,f=B[1].x,d=B[1].y,c>f){var U=c;c=f,f=U}if(h>d){var W=h;h=d,d=W}Sa(a,c-A,h-A,f+A,d+A)}}else if(q==="bezier"||q==="unbundled-bezier"||el(q,"segments")||el(q,"taxi")){var H;switch(q){case"bezier":case"unbundled-bezier":H=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":H=m.linePts;break}if(H!=null)for(var Y=0;Y<H.length;Y++){var Z=H[Y];c=Z.x-A,f=Z.x+A,h=Z.y-A,d=Z.y+A,Sa(a,c,h,f,d)}}}else{var ce=e.source(),$=ce.position(),K=e.target(),ie=K.position();if(c=$.x,f=ie.x,h=$.y,d=ie.y,c>f){var ae=c;c=f,f=ae}if(h>d){var le=h;h=d,d=le}c-=A,f+=A,h-=A,d+=A,Sa(a,c,h,f,d)}if(i&&t.includeEdges&&l&&(rm(a,e,"mid-source"),rm(a,e,"mid-target"),rm(a,e,"source"),rm(a,e,"target")),i){var te=e.pstyle("ghost").value==="yes";if(te){var ee=e.pstyle("ghost-offset-x").pfValue,re=e.pstyle("ghost-offset-y").pfValue;Sa(a,a.x1+ee,a.y1+re,a.x2+ee,a.y2+re)}}var he=s.bodyBounds=s.bodyBounds||{};cA(he,a),Wm(he,y),Vm(he,1),i&&(c=a.x1,f=a.x2,h=a.y1,d=a.y2,Sa(a,c-O,h-O,f+O,d+O));var ve=s.overlayBounds=s.overlayBounds||{};cA(ve,a),Wm(ve,y),Vm(ve,1);var _e=s.labelBounds=s.labelBounds||{};_e.all!=null?j9(_e.all):_e.all=$i(),i&&t.includeLabels&&(t.includeMainLabels&&rw(a,e,null),l&&(t.includeSourceLabels&&rw(a,e,"source"),t.includeTargetLabels&&rw(a,e,"target")))}return a.x1=ia(a.x1),a.y1=ia(a.y1),a.x2=ia(a.x2),a.y2=ia(a.y2),a.w=ia(a.x2-a.x1),a.h=ia(a.y2-a.y1),a.w>0&&a.h>0&&g&&(Wm(a,y),Vm(a,1)),a},T3=function(e){var t=0,n=function(a){return(a?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},C3=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return iA([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var o=e.position();return iA([t(o.x),t(o.y)])}},TR=function(e,t){var n=e._private,i,o=e.isEdge(),a=t==null?CR:T3(t),s=a===CR;if(n.bbCache==null?(i=rV(e,Kp),n.bbCache=i,n.bbCachePosKey=C3(e)):i=n.bbCache,!s){var u=e.isNode();i=$i(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Zu(i,n.overlayBounds):Zu(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!o||t.includeSourceLabels&&t.includeTargetLabels)?Zu(i,n.labelBounds.all):(t.includeMainLabels&&Zu(i,n.labelBounds.mainRot),t.includeSourceLabels&&Zu(i,n.labelBounds.sourceRot),t.includeTargetLabels&&Zu(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Kp={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},CR=T3(Kp),PR=bi(Kp);Tl.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=nd(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==C3(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=Kp:r=PR(r),e=TR(this[0],r);else{e=$i(),r=r||Kp;var i=PR(r),o=this,a=o.cy(),s=a.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<o.length;u++){var l=o[u];n(l)&&l.dirtyBoundingBoxCache(),Zu(e,TR(l,i))}}return e.x1=ia(e.x1),e.y1=ia(e.y1),e.x2=ia(e.x2),e.y2=ia(e.y2),e.w=ia(e.x2-e.x1),e.h=ia(e.y2-e.y1),e};Tl.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Tl.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),xr(r)){var o=r;r=function(){return o}}var a=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(a).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=N9(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};$h.boundingbox=$h.bb=$h.boundingBox;$h.renderedBoundingbox=$h.renderedBoundingBox;var nV=Tl,Vv,mg;Vv=mg={};var P3=function(e){e.uppercaseName=GP(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=GP(e.outerName),Vv[e.name]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Vv["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},Vv["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},Vv["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};P3({name:"width"});P3({name:"height"});mg.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};mg.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};mg.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var iV=mg,oV=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},aV=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Y0(t(e),n.zoom(),n.pan())}},sV=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),o=n.zoom();return t(e).map(function(a){return Y0(a,o,i)})}},uV=function(e){return e.renderer().getControlPoints(e)},lV=function(e){return e.renderer().getSegmentPoints(e)},cV=function(e){return e.renderer().getSourceEndpoint(e)},fV=function(e){return e.renderer().getTargetEndpoint(e)},hV=function(e){return e.renderer().getEdgeMidpoint(e)},AR={controlPoints:{get:uV,mult:!0},segmentPoints:{get:lV,mult:!0},sourceEndpoint:{get:cV},targetEndpoint:{get:fV},midpoint:{get:hV}},dV=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},vV=Object.keys(AR).reduce(function(r,e){var t=AR[e],n=dV(e);return r[e]=function(){return oV(this,t.get)},t.mult?r[n]=function(){return sV(this,t.get)}:r[n]=function(){return aV(this,t.get)},r},{}),pV=jt({},eV,nV,iV,vV);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var A3=function(e,t){this.recycle(e,t)};function Tv(){return!1}function nm(){return!0}A3.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Tv,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?nm:Tv):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*i+o.x,y:n.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=nm;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=nm;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nm,this.stopPropagation()},isDefaultPrevented:Tv,isPropagationStopped:Tv,isImmediatePropagationStopped:Tv};var R3=/^([^.]+)(\.(?:[^.]+))?$/,gV=".*",I3={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},RR=Object.keys(I3),yV={};function eb(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yV,e=arguments.length>1?arguments[1]:void 0,t=0;t<RR.length;t++){var n=RR[t];this[n]=r[n]||I3[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var bl=eb.prototype,k3=function(e,t,n,i,o,a,s){gn(i)&&(o=i,i=null),s&&(a==null?a=s:a=jt({},a,s));for(var u=Gr(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!vl(c)){var f=c.match(R3);if(f){var h=f[1],d=f[2]?f[2]:null,v=t(e,c,h,d,i,o,a);if(v===!1)break}}}},IR=function(e,t){return e.addEventFields(e.context,t),new A3(t.type,t)},mV=function(e,t,n){if(xz(n)){t(e,n);return}else if(xr(n)){t(e,IR(e,n));return}for(var i=Gr(n)?n:n.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!vl(a)){var s=a.match(R3);if(s){var u=s[1],l=s[2]?s[2]:null,c=IR(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};bl.on=bl.addListener=function(r,e,t,n,i){return k3(this,function(o,a,s,u,l,c,f){gn(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,i),this};bl.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};bl.removeListener=bl.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=a9(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];k3(i,function(f,h,d,v,p,m){if((c.type===d||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!m||c.callback===m))return o.splice(l,1),!1},r,e,t,n)},s=o.length-1;s>=0;s--)a(s);return this};bl.removeAllListeners=function(){return this.removeListener("*")};bl.emit=bl.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,Gr(e)||(e=[e]),mV(this,function(o,a){t!=null&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===gV)&&o.eventMatches(o.context,c,a)){var f=[a];e!=null&&u9(f,e),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(v){return v!==c}));var h=o.callbackContext(o.context,c,a),d=c.callback.apply(h,f);o.afterEmit(o.context,c,a),d===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s();o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},r),this.emitting--,this};var bV={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&hg(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},im=function(e){return Ct(e)?new yl(e):e},D3={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new eb(bV,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=im(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=im(t),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=im(t),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=im(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Lr.eventAliasesOn(D3);var M3={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Ct(e)||Lo(e))return new yl(e).filter(this);if(gn(e)){for(var n=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s&&n.push(a)}return n}return this.spawn()},not:function(e){if(e){Ct(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],o=e.has(i);o||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ct(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;Ct(e)&&(e=t.$(e));var n=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,d=l.hasElementWithId(h);d||n.push(f)}};return a(i,o),a(o,i),n},diff:function(e){var t=this._private.cy;Ct(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,f,h){for(var d=0;d<c.length;d++){var v=c[d],p=v._private.data.id,m=f.hasElementWithId(p);m?o.merge(v):h.push(v)}};return u(a,s,n),u(s,a,i),{left:n,right:i,both:o}},add:function(e){var t=this._private.cy;if(!e)return this;if(Ct(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Ct(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(n);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,o=i.get(n);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Ct(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,o=0;o<i.length;o++)n=e(n,i[o],o,i);return n},max:function(e,t){for(var n=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Ar=M3;Ar.u=Ar["|"]=Ar["+"]=Ar.union=Ar.or=Ar.add;Ar["\\"]=Ar["!"]=Ar["-"]=Ar.difference=Ar.relativeComplement=Ar.subtract=Ar.not;Ar.n=Ar["&"]=Ar["."]=Ar.and=Ar.intersection=Ar.intersect;Ar["^"]=Ar["(+)"]=Ar["(-)"]=Ar.symmetricDifference=Ar.symdiff=Ar.xor;Ar.fnFilter=Ar.filterFn=Ar.stdFilter=Ar.filter;Ar.complement=Ar.abscomp=Ar.absoluteComplement;var _V={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},L3=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function o(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?YC:0}var a=o(e)-o(t);if(a!==0)return a;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},_0={forEach:function(e,t){if(gn(e))for(var n=this.length,i=0;i<n;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var o=e;o>=0&&o<t&&o<i;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!gn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(L3)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:YC-1}else{var o=t.source,a=t.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};_0.each=_0.forEach;var wV=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Wn(Symbol))!=e&&Wn(Symbol.iterator)!=e;t&&(_0[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},o=0,a=this.length;return D5({next:function(){return o<a?i.value=n[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};wV();var EV=bi({nodeDimensionsIncludeLabels:!1}),Ym={layoutDimensions:function(e){e=EV(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(w){return!w.isParent()}),o=this.cy(),a=t.eles,s=function(x){return x.id()},u=nd(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(x,E,O){var C={x:E.x1+E.w/2,y:E.y1+E.h/2},A={x:(O.x-C.x)*x,y:(O.y-C.y)*x};return{x:C.x+A.x,y:C.y+A.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var x=$i(),E=0;E<i.length;E++){var O=i[E],C=u(O,E);J5(x,C.x,C.y)}return x},h=f(),d=nd(function(w,x){var E=u(w,x);if(c){var O=Math.abs(t.spacingFactor);E=l(O,h,E)}return t.transform!=null&&(E=t.transform(w,E)),E},s);if(t.animate){for(var v=0;v<i.length;v++){var p=i[v],m=d(p,v),y=t.animateFilter==null||t.animateFilter(p,v);if(y){var b=p.animation({position:m,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}else p.position(m)}if(t.fit){var g=o.animation({fit:{boundingBox:a.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(t.zoom!==void 0&&t.pan!==void 0){var _=o.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}e.animations.forEach(function(w){return w.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),dd.all(e.animations.map(function(w){return w.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),t.fit&&o.fit(t.eles,t.padding),t.zoom!=null&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(jt({},e,{eles:this}))}};Ym.createLayout=Ym.makeLayout=Ym.layout;function N3(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],o;return(o=i[r])!=null||(o=i[r]=e(t)),o}function tb(r,e){return r=Yc(r),function(n){return N3(r,e,n)}}function rb(r,e){r=Yc(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return N3(r,t,i)}}var pi={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var o=n._private.style[e];return o??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style();if(xr(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(Ct(e))if(t===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,o=n.pstyle("opacity").value;if(!t)return o;var a=i.data.parent?n.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function nw(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(!e(o))return!1}return!0}function o2(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||nw(o,n);var u=s.source,l=s.target;return t(u)&&(!a||nw(u,t))&&(u===l||t(l)&&(!a||nw(l,t)))}}}var vd=tb("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});pi.takesUpSpace=rb("takesUpSpace",o2({ok:vd}));var OV=tb("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&vd(r)}),xV=tb("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&vd(r)});pi.interactive=rb("interactive",o2({ok:OV,parentOk:xV,edgeOkViaNode:vd}));pi.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var SV=tb("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&vd(r)}),TV=vd;pi.visible=rb("visible",o2({ok:SV,edgeOkViaNode:TV}));pi.hidden=function(){var r=this[0];if(r)return!r.visible()};pi.isBundledBezier=rb("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});pi.bypass=pi.css=pi.style;pi.renderedCss=pi.renderedStyle;pi.removeBypass=pi.removeCss=pi.removeStyle;pi.pstyle=pi.parsedStyle;var ll={};function kR(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&gn(e[0])){var o=e[0];this.on(r.event,o)}else if(e.length===0||e.length===1&&Gr(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),a&&h.emit(a)}return this}}function pd(r){ll[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},ll[r.on]=kR({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),ll[r.off]=kR({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}pd({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});pd({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});pd({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});pd({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ll.deselect=ll.unselect;ll.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};pd({field:"active",on:"activate",off:"unactivate"});pd({field:"pannable",on:"panify",off:"unpanify"});ll.inactive=function(){var r=this[0];if(r)return!r._private.active};var Ri={},DR=function(e){return function(n){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),d=f.target();if(e.noIncomingEdges&&d===s&&h!==s||e.noOutgoingEdges&&h===s&&d!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(n)}},MR=function(e){return function(t){for(var n=this,i=[],o=0;o<n.length;o++){var a=n[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===a?(i.push(l),i.push(f)):e.incoming&&f===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},LR=function(e){return function(t){for(var n=this,i=[],o={};;){var a=e.outgoing?n.outgoers():n.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;n=a}return this.spawn(i,!0).filter(t)}};Ri.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};jt(Ri,{roots:DR({noIncomingEdges:!0}),leaves:DR({noOutgoingEdges:!0}),outgoers:aa(MR({outgoing:!0}),"outgoers"),successors:LR({outgoing:!0}),incomers:aa(MR({incoming:!0}),"incomers"),predecessors:LR({})});jt(Ri,{neighborhood:aa(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ri.neighbourhood=Ri.neighborhood;Ri.closedNeighbourhood=Ri.closedNeighborhood;Ri.openNeighbourhood=Ri.openNeighborhood;jt(Ri,{source:aa(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:aa(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:NR({attr:"source"}),targets:NR({attr:"target"})});function NR(r){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i],a=o._private[r.attr];a&&n.push(a)}return this.spawn(n,!0).filter(t)}}jt(Ri,{edgesWith:aa(jR(),"edgesWith"),edgesTo:aa(jR({thisIsSrc:!0}),"edgesTo")});function jR(r){return function(t){var n=[],i=this._private.cy,o=r||{};Ct(t)&&(t=i.$(t));for(var a=0;a<t.length;a++)for(var s=t[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=f||h;d&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!f||o.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}jt(Ri,{connectedEdges:aa(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:aa(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:aa(FR(),"parallelEdges"),codirectedEdges:aa(FR({codirected:!0}),"codirectedEdges")});function FR(r){var e={codirected:!1};return r=jt({},e,r),function(n){for(var i=[],o=this.edges(),a=r,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,d=c._private.edges,v=0;v<d.length;v++){var p=d[v],m=p._private.data,y=m.target,b=m.source,g=y===h&&b===f,_=f===y&&h===b;(a.codirected&&g||!a.codirected&&(g||_))&&i.push(p)}return this.spawn(i,!0).filter(n)}}jt(Ri,{components:function(e){var t=this,n=t.cy(),i=n.collection(),o=e==null?t.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,f){i.merge(c),o.unmerge(c),f.merge(c)};if(o.empty())return t.spawn();var u=function(){var c=n.collection();a.push(c);var f=o[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(d){return s(d,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(d){t.has(d)&&c.has(d.source())&&c.has(d.target())&&c.merge(d)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ri.componentsOf=Ri.components;var gi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){ln("A collection must have a reference to the core");return}var o=new Xs,a=!1;if(!t)t=[];else if(t.length>0&&xr(t[0])&&!hg(t[0])){a=!0;for(var s=[],u=new hd,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=K5();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new H0(e,f,!1);s.push(d),u.add(h.id)}t=s}this.length=0;for(var v=0,p=t.length;v<p;v++){var m=t[v][0];if(m!=null){var y=m._private.data.id;(!n||!o.has(y))&&(n&&o.set(y,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(b){this.lazyMap=b},rebuildMap:function(){for(var g=this.lazyMap=new Xs,_=this.eles,w=0;w<_.length;w++){var x=_[w];g.set(x.id(),{index:w,ele:x})}}},n&&(this._private.map=o),a&&!i&&this.restore()},$r=H0.prototype=gi.prototype=Object.create(Array.prototype);$r.instanceString=function(){return"collection"};$r.spawn=function(r,e){return new gi(this.cy(),r,e)};$r.spawnSelf=function(){return this.spawn(this)};$r.cy=function(){return this._private.cy};$r.renderer=function(){return this._private.cy.renderer()};$r.element=function(){return this[0]};$r.collection=function(){return N5(this)?this:new gi(this._private.cy,[this])};$r.unique=function(){return new gi(this._private.cy,this,!0)};$r.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};$r.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new gi(e)};$r.$id=$r.getElementById;$r.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};$r.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};$r.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};$r.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(xr(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var o=!1,a={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(p,m,y){var b=r[p];b!=null&&b!==n[p]&&(b?e[m]():e[y]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:ds(n.data),position:ds(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};$r.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};$r.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),o=new H0(r,i,!1);e.push(o)}return new gi(r,e)};$r.copy=$r.clone;$r.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,o=[],a=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var f,h=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var d=s[f],v=d._private,p=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=K5();else if(ot(p.id))p.id=""+p.id;else if(vl(p.id)||!Ct(p.id)){ln("Can not create element with invalid string ID `"+p.id+"`"),h();continue}else if(n.hasElementWithId(p.id)){ln("Can not create second element with ID `"+p.id+"`"),h();continue}}var m=p.id;if(d.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(d.isEdge()){for(var b=d,g=["source","target"],_=g.length,w=!1,x=0;x<_;x++){var E=g[x],O=p[E];ot(O)&&(O=p[E]=""+p[E]),O==null||O===""?(ln("Can not create edge `"+m+"` with unspecified "+E),w=!0):n.hasElementWithId(O)||(ln("Can not create edge `"+m+"` with nonexistant "+E+" `"+O+"`"),w=!0)}if(w){h();continue}var C=n.getElementById(p.source),A=n.getElementById(p.target);C.same(A)?C._private.edges.push(b):(C._private.edges.push(b),A._private.edges.push(b)),b._private.source=C,b._private.target=A}v.map=new Xs,v.map.set(m,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var R=0;R<o.length;R++){var k=o[R],D=k._private.data;ot(D.parent)&&(D.parent=""+D.parent);var L=D.parent,j=L!=null;if(j||k._private.parent){var q=k._private.parent?n.collection().merge(k._private.parent):n.getElementById(L);if(q.empty())D.parent=void 0;else if(q[0].removed())Nr("Node added with missing parent, reference to parent removed"),D.parent=void 0,k._private.parent=null;else{for(var B=!1,U=q;!U.empty();){if(k.same(U)){B=!0,D.parent=void 0;break}U=U.parent()}B||(q[0]._private.children.push(k),k._private.parent=q[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var W=s.length===t.length?t:new gi(n,s),H=0;H<W.length;H++){var Y=W[H];Y.isNode()||(Y.parallelEdges().clearTraversalCache(),Y.source().clearTraversalCache(),Y.target().clearTraversalCache())}var Z;i.hasCompoundNodes?Z=n.collection().merge(W).merge(W.connectedNodes()).merge(W.parent()):Z=W,Z.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?W.emitAndNotify("add"):e&&W.emit("add")}return t};$r.removed=function(){var r=this[0];return r&&r._private.removed};$r.inside=function(){var r=this[0];return r&&!r._private.removed};$r.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},o=t._private.cy;function a(L){for(var j=L._private.edges,q=0;q<j.length;q++)u(j[q])}function s(L){for(var j=L._private.children,q=0;q<j.length;q++)u(j[q])}function u(L){var j=i[L.id()];e&&L.removed()||j||(i[L.id()]=!0,L.isNode()?(n.push(L),a(L),s(L)):n.unshift(L))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function h(L,j){var q=L._private.edges;pl(q,j),L.clearTraversalCache()}function d(L){L.clearTraversalCache()}var v=[];v.ids={};function p(L,j){j=j[0],L=L[0];var q=L._private.children,B=L.id();pl(q,j),j._private.parent=null,v.ids[B]||(v.ids[B]=!0,v.push(L))}t.dirtyCompoundBoundsCache(),e&&o.removeFromPool(n);for(var m=0;m<n.length;m++){var y=n[m];if(y.isEdge()){var b=y.source()[0],g=y.target()[0];h(b,y),h(g,y);for(var _=y.parallelEdges(),w=0;w<_.length;w++){var x=_[w];d(x),x.isBundledBezier()&&x.dirtyBoundingBoxCache()}}else{var E=y.parent();E.length!==0&&p(E,y)}e&&(y._private.removed=!0)}var O=o._private.elements;o._private.hasCompoundNodes=!1;for(var C=0;C<O.length;C++){var A=O[C];if(A.isParent()){o._private.hasCompoundNodes=!0;break}}var R=new gi(this.cy(),n);R.size()>0&&(r?R.emitAndNotify("remove"):e&&R.emit("remove"));for(var k=0;k<v.length;k++){var D=v[k];(!e||!D.removed())&&D.updateStyle()}return R};$r.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,o=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var a=o(r.source),s=o(r.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var d=0;d<t.length;d++){var v=t[d],p=v._private.data;v.isEdge()&&(u&&(p.source=a),l&&(p.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=o(r.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var d=t.remove(n,i);d.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var p=t[v],m=p._private.data;p.isNode()&&(m.parent=h)}d.restore(n,i)}),t.emitAndNotify("move")}}return this};[u3,j7,Hm,ul,od,J7,J0,pV,D3,M3,_V,_0,Ym,pi,ll,Ri].forEach(function(r){jt($r,r)});var CV={add:function(e){var t,n=this;if(Lo(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}t=new gi(n,o)}}else if(Gr(e)){var u=e;t=new gi(n,u)}else if(xr(e)&&(Gr(e.nodes)||Gr(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,d=f.length;h<d;h++){var v=f[h],p=l[v];if(Gr(p))for(var m=0,y=p.length;m<y;m++){var b=jt({group:v},p[m]);c.push(b)}}t=new gi(n,c)}else{var g=e;t=new H0(n,g).collection()}return t},remove:function(e){if(!Lo(e)){if(Ct(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function PV(r,e,t,n){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(u):new Array(u);function d(A,R){return 1-3*R+3*A}function v(A,R){return 3*R-6*A}function p(A){return 3*A}function m(A,R,k){return((d(R,k)*A+v(R,k))*A+p(R))*A}function y(A,R,k){return 3*d(R,k)*A*A+2*v(R,k)*A+p(R)}function b(A,R){for(var k=0;k<i;++k){var D=y(R,r,t);if(D===0)return R;var L=m(R,r,t)-A;R-=L/D}return R}function g(){for(var A=0;A<u;++A)h[A]=m(A*l,r,t)}function _(A,R,k){var D,L,j=0;do L=R+(k-R)/2,D=m(L,r,t)-A,D>0?k=L:R=L;while(Math.abs(D)>a&&++j<s);return L}function w(A){for(var R=0,k=1,D=u-1;k!==D&&h[k]<=A;++k)R+=l;--k;var L=(A-h[k])/(h[k+1]-h[k]),j=R+L*l,q=y(j,r,t);return q>=o?b(A,j):q===0?j:_(A,R,R+l)}var x=!1;function E(){x=!0,(r!==e||t!==n)&&g()}var O=function(R){return x||E(),r===e&&t===n?R:R===0?0:R===1?1:m(w(R),e,n)};O.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var C="generateBezier("+[r,e,t,n]+")";return O.toString=function(){return C},O}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var AV=(function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,o){var a={x:n.x+o.dx*i,v:n.v+o.dv*i,tension:n.tension,friction:n.friction};return{dx:a.v,dv:r(a)}}function t(n,i){var o={dx:n.v,dv:r(n)},a=e(n,i*.5,o),s=e(n,i*.5,a),u=e(n,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,d,v;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,h=a!==null,h?(l=n(i,o),d=l/a*f):d=f;v=t(v||s,d),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(p){return u[p*(u.length-1)|0]}:l}})(),Xr=function(e,t,n,i){var o=PV(e,t,n,i);return function(a,s,u){return a+(s-a)*o(u)}},Xm={linear:function(e,t,n){return e+(t-e)*n},ease:Xr(.25,.1,.25,1),"ease-in":Xr(.42,0,1,1),"ease-out":Xr(0,0,.58,1),"ease-in-out":Xr(.42,0,.58,1),"ease-in-sine":Xr(.47,0,.745,.715),"ease-out-sine":Xr(.39,.575,.565,1),"ease-in-out-sine":Xr(.445,.05,.55,.95),"ease-in-quad":Xr(.55,.085,.68,.53),"ease-out-quad":Xr(.25,.46,.45,.94),"ease-in-out-quad":Xr(.455,.03,.515,.955),"ease-in-cubic":Xr(.55,.055,.675,.19),"ease-out-cubic":Xr(.215,.61,.355,1),"ease-in-out-cubic":Xr(.645,.045,.355,1),"ease-in-quart":Xr(.895,.03,.685,.22),"ease-out-quart":Xr(.165,.84,.44,1),"ease-in-out-quart":Xr(.77,0,.175,1),"ease-in-quint":Xr(.755,.05,.855,.06),"ease-out-quint":Xr(.23,1,.32,1),"ease-in-out-quint":Xr(.86,0,.07,1),"ease-in-expo":Xr(.95,.05,.795,.035),"ease-out-expo":Xr(.19,1,.22,1),"ease-in-out-expo":Xr(1,0,0,1),"ease-in-circ":Xr(.6,.04,.98,.335),"ease-out-circ":Xr(.075,.82,.165,1),"ease-in-out-circ":Xr(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return Xm.linear;var i=AV(e,t,n);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":Xr};function BR(r,e,t,n,i){if(n===1||e===t)return t;var o=i(e,t,n);return r==null||((r.roundValue||r.color)&&(o=Math.round(o)),r.min!==void 0&&(o=Math.max(o,r.min)),r.max!==void 0&&(o=Math.min(o,r.max))),o}function UR(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function _h(r,e,t,n,i){var o=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var a=UR(r,i),s=UR(e,i);if(ot(a)&&ot(s))return BR(o,a,s,t,n);if(Gr(a)&&Gr(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],f=s[l];if(c!=null&&f!=null){var h=BR(o,c,f,t,n);u.push(h)}else u.push(f)}return u}}function RV(r,e,t,n){var i=!n,o=r._private,a=e._private,s=a.easing,u=a.startTime,l=n?r:r.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=Xm.linear;else{var f;if(Ct(s)){var h=c.parse("transition-timing-function",s);f=h.value}else f=s;var d,v;Ct(f)?(d=f,v=[]):(d=f[1],v=f.slice(2).map(function(W){return+W})),v.length>0?(d==="spring"&&v.push(a.duration),a.easingImpl=Xm[d].apply(null,v)):a.easingImpl=Xm[d]}var p=a.easingImpl,m;if(a.duration===0?m=1:m=(t-u)/a.duration,a.applying&&(m=a.progress),m<0?m=0:m>1&&(m=1),a.delay==null){var y=a.startPosition,b=a.position;if(b&&i&&!r.locked()){var g={};Cv(y.x,b.x)&&(g.x=_h(y.x,b.x,m,p)),Cv(y.y,b.y)&&(g.y=_h(y.y,b.y,m,p)),r.position(g)}var _=a.startPan,w=a.pan,x=o.pan,E=w!=null&&n;E&&(Cv(_.x,w.x)&&(x.x=_h(_.x,w.x,m,p)),Cv(_.y,w.y)&&(x.y=_h(_.y,w.y,m,p)),r.emit("pan"));var O=a.startZoom,C=a.zoom,A=C!=null&&n;A&&(Cv(O,C)&&(o.zoom=Yp(o.minZoom,_h(O,C,m,p),o.maxZoom)),r.emit("zoom")),(E||A)&&r.emit("viewport");var R=a.style;if(R&&R.length>0&&i){for(var k=0;k<R.length;k++){var D=R[k],L=D.name,j=D,q=a.startStyle[L],B=c.properties[q.name],U=_h(q,j,m,p,B);c.overrideBypass(r,L,U)}r.emit("style")}}return a.progress=m,m}function Cv(r,e){return r==null||e==null?!1:ot(r)&&ot(e)?!0:!!(r&&e)}function IV(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function qR(r,e){var t=e._private.aniEles,n=[];function i(c,f){var h=c._private,d=h.animation.current,v=h.animation.queue,p=!1;if(d.length===0){var m=v.shift();m&&d.push(m)}for(var y=function(x){for(var E=x.length-1;E>=0;E--){var O=x[E];O()}x.splice(0,x.length)},b=d.length-1;b>=0;b--){var g=d[b],_=g._private;if(_.stopped){d.splice(b,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.frames);continue}!_.playing&&!_.applying||(_.playing&&_.applying&&(_.applying=!1),_.started||IV(c,g,r),RV(c,g,r,f),_.applying&&(_.applying=!1),y(_.frames),_.step!=null&&_.step(r),g.completed()&&(d.splice(b,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.completes)),p=!0)}return!f&&d.length===0&&v.length===0&&n.push(c),p}for(var o=!1,a=0;a<t.length;a++){var s=t[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var kV={animate:Lr.animate(),animation:Lr.animation(),animated:Lr.animated(),clearQueue:Lr.clearQueue(),delay:Lr.delay(),delayAnimation:Lr.delayAnimation(),stop:Lr.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&p0(function(o){qR(o,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(o,a){qR(a,e)},n.beforeRenderPriorities.animations):t()}},DV={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&hg(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},om=function(e){return Ct(e)?new yl(e):e},j3={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new eb(DV,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,om(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,om(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,om(t),n),this},once:function(e,t,n){return this.emitter().one(e,om(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Lr.eventAliasesOn(j3);var BT={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};BT.jpeg=BT.jpg;var $m={layout:function(e){var t=this;if(e==null){ln("Layout options must be specified to make a layout");return}if(e.name==null){ln("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){ln("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;Ct(e.eles)?o=t.$(e.eles):o=e.eles!=null?e.eles:t.$();var a=new i(jt({},e,{cy:t,eles:o}));return a}};$m.createLayout=$m.makeLayout=$m.layout;var MV={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],a=e[o],s=t.getElementById(o);s.data(a)}})}},LV=bi({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),UT={renderTo:function(e,t,n,i){var o=this._private.renderer;return o.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){ln("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Nr("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=LV(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};UT.invalidateDimensions=UT.resize;var Km={collection:function(e,t){return Ct(e)?this.$(e):Lo(e)?e.collection():Gr(e)?(t||(t={}),new gi(this,e,t.unique,t.removed)):new gi(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Km.elements=Km.filter=Km.$;var ii={},sp="t",NV="f";ii.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),o=0;o<r.length;o++){var a=r[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};ii.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,o=n[i];if(o)return o;for(var a=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===sp,f=e[u]===sp,h=c!==f,d=l.mappedProperties.length>0;if(h||f&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var p=0;p<v.length;p++){for(var m=v[p],y=m.name,b=!1,g=u+1;g<t.length;g++){var _=t[g],w=e[g]===sp;if(w&&(b=_.properties[m.name]!=null,b))break}!s[y]&&!b&&(s[y]=!0,a.push(y))}}}return n[i]=a,a};ii.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(r);s?t+=sp:t+=NV}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};ii.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},o=0;o<t.length;o++){var a=t[o],s=e[o]===sp;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return n[e]=i,i};ii.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,o={},a=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(t);if(h===f.prevFnValue)continue}var d=o[u]={prev:c};n.applyParsedProperty(t,l),d.next=t.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:o}};ii.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,o=function(he,ve,_e){return t.getPropertiesHash(he,ve,_e)},a=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[Uc,jh]}for(var f=function(he,ve){return e.styleKeys[ve][0]=Vp(he,e.styleKeys[ve][0])},h=function(he,ve){return e.styleKeys[ve][1]=Wp(he,e.styleKeys[ve][1])},d=function(he,ve){f(he,ve),h(he,ve)},v=function(he,ve){for(var _e=0;_e<he.length;_e++){var Oe=he.charCodeAt(_e);f(Oe,ve),h(Oe,ve)}},p=2e9,m=function(he){return-128<he&&he<128&&Math.floor(he)!==he?p-(he*1024|0):he},y=0;y<n.length;y++){var b=n[y],g=u[b];if(g!=null){var _=this.properties[b],w=_.type,x=_.groupKey,E=void 0;_.hashOverride!=null?E=_.hashOverride(r,g):g.pfValue!=null&&(E=g.pfValue);var O=_.enums==null?g.value:null,C=E!=null,A=O!=null,R=C||A,k=g.units;if(w.number&&R&&!w.multiple){var D=C?E:O;d(m(D),x),!C&&k!=null&&v(k,x)}else v(g.strValue,x)}}for(var L=[Uc,jh],j=0;j<i.length;j++){var q=i[j],B=e.styleKeys[q];L[0]=Vp(B[0],L[0]),L[1]=Wp(B[1],L[1])}e.styleKey=Qz(L[0],L[1]);var U=e.styleKeys;e.labelDimsKey=qu(U.labelDimensions);var W=o(r,["label"],U.labelDimensions);if(e.labelKey=qu(W),e.labelStyleKey=qu(Zy(U.commonLabel,W)),!s){var H=o(r,["source-label"],U.labelDimensions);e.sourceLabelKey=qu(H),e.sourceLabelStyleKey=qu(Zy(U.commonLabel,H));var Y=o(r,["target-label"],U.labelDimensions);e.targetLabelKey=qu(Y),e.targetLabelStyleKey=qu(Zy(U.commonLabel,Y))}if(s){var Z=e.styleKeys,ce=Z.nodeBody,$=Z.nodeBorder,K=Z.nodeOutline,ie=Z.backgroundImage,ae=Z.compound,le=Z.pie,te=Z.stripe,ee=[ce,$,K,ie,ae,le,te].filter(function(re){return re!=null}).reduce(Zy,[Uc,jh]);e.nodeKey=qu(ee),e.hasPie=le!=null&&le[0]!==Uc&&le[1]!==jh,e.hasStripe=te!=null&&te[0]!==Uc&&te[1]!==jh}return a!==e.styleKey};ii.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};ii.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,o,a=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=r._private,h="mapping",d=function(ce){return ce==null?null:ce.pfValue!=null?ce.pfValue:ce.value},v=function(){var ce=d(l),$=d(n);t.checkTriggers(r,n.name,ce,$)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var p=function(){Nr("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case a.mapData:{for(var m=n.field.split("."),y=f.data,b=0;b<m.length&&y;b++){var g=m[b];y=y[g]}if(y==null)return p(),!1;var _;if(ot(y)){var w=n.fieldMax-n.fieldMin;w===0?_=0:_=(y-n.fieldMin)/w}else return Nr("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+r.id()+"` is non-numeric)"),!1;if(_<0?_=0:_>1&&(_=1),s.color){var x=n.valueMin[0],E=n.valueMax[0],O=n.valueMin[1],C=n.valueMax[1],A=n.valueMin[2],R=n.valueMax[2],k=n.valueMin[3]==null?1:n.valueMin[3],D=n.valueMax[3]==null?1:n.valueMax[3],L=[Math.round(x+(E-x)*_),Math.round(O+(C-O)*_),Math.round(A+(R-A)*_),Math.round(k+(D-k)*_)];o={bypass:n.bypass,name:n.name,value:L,strValue:"rgb("+L[0]+", "+L[1]+", "+L[2]+")"}}else if(s.number){var j=n.valueMin+(n.valueMax-n.valueMin)*_;o=this.parse(n.name,j,n.bypass,h)}else return!1;if(!o)return p(),!1;o.mapping=n,n=o;break}case a.data:{for(var q=n.field.split("."),B=f.data,U=0;U<q.length&&B;U++){var W=q[U];B=B[W]}if(B!=null&&(o=this.parse(n.name,B,n.bypass,h)),!o)return p(),!1;o.mapping=n,n=o;break}case a.fn:{var H=n.value,Y=n.fnValue!=null?n.fnValue:H(r);if(n.prevFnValue=Y,Y==null)return Nr("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(o=this.parse(n.name,Y,n.bypass,h),!o)return Nr("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;o.mapping=ds(n),n=o;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};ii.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};ii.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};ii.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,o=r.pstyle("transition-duration").pfValue,a=r.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=r.pstyle(c),h=e[c];if(h){var d=h.prev,v=d,p=h.next!=null?h.next:f,m=!1,y=void 0,b=1e-6;v&&(ot(v.pfValue)&&ot(p.pfValue)?(m=p.pfValue-v.pfValue,y=v.pfValue+b*m):ot(v.value)&&ot(p.value)?(m=p.value-v.value,y=v.value+b*m):Gr(v.value)&&Gr(p.value)&&(m=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],y=v.strValue),m&&(s[c]=p.strValue,this.applyBypass(r,c,y),u=!0))}}if(!u)return;n.transitioning=!0,new dd(function(g){a>0?r.delayAnimation(a).play().promise().then(g):g()}).then(function(){return r.animation({style:s,duration:o,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};ii.checkTrigger=function(r,e,t,n,i,o){var a=this.properties[e],s=i(a);r.removed()||s!=null&&s(t,n,r)&&o(a)};ii.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};ii.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};ii.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};ii.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};ii.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var bg={};bg.applyBypass=function(r,e,t,n){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&o.push(c)}}else if(Ct(e)){var f=this.parse(e,t,!0);f&&o.push(f)}else if(xr(e)){var h=e;n=t;for(var d=Object.keys(h),v=0;v<d.length;v++){var p=d[v],m=h[p];if(m===void 0&&(m=h[V0(p)]),m!==void 0){var y=this.parse(p,m,!0);y&&o.push(y)}}}else return!1;if(o.length===0)return!1;for(var b=!1,g=0;g<r.length;g++){for(var _=r[g],w={},x=void 0,E=0;E<o.length;E++){var O=o[E];if(n){var C=_.pstyle(O.name);x=w[O.name]={prev:C}}b=this.applyParsedProperty(_,ds(O))||b,n&&(x.next=_.pstyle(O.name))}b&&this.updateStyleHints(_),n&&this.updateTransitions(_,w,a)}return b};bg.overrideBypass=function(r,e,t){e=WC(e);for(var n=0;n<r.length;n++){var i=r[n],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,t):(o.value=t,o.pfValue!=null&&(o.pfValue=t),s?o.strValue="rgb("+t.join(",")+")":u?o.strValue=t.join(" "):o.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};bg.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};bg.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var o=r[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),d=a[l.name]={prev:c};this.applyParsedProperty(o,h),d.next=o.pstyle(l.name)}}this.updateStyleHints(o),t&&this.updateTransitions(o,a,n)}};var a2={};a2.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};a2.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var ps={};ps.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};ps.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var o=t.properties[i],a=t.getStylePropertyValue(r,o.name,e);a!=null&&(n[o.name]=a,n[V0(o.name)]=a)}return n}};ps.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};ps.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=r.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(t&&o.number&&s!=null&&ot(s)){var c=r.cy().zoom(),f=function(m){return m*c},h=function(m,y){return f(m)+y},d=Gr(s),v=d?u.every(function(p){return p!=null}):u!=null;return v?d?s.map(function(p,m){return h(p,u[m])}).join(" "):h(s,u):d?s.map(function(p){return Ct(p)?p:""+f(p)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};ps.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=i.name,a=r.pstyle(o);a!==void 0&&(xr(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(t[o]=a)}return t};ps.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],u=n[s],l=i[s]||i[WC(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};ps.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=r.pstyle(i,!1),o!=null)if(o.pfValue!=null)n[0]=Vp(s,n[0]),n[1]=Wp(s,n[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),n[0]=Vp(s,n[0]),n[1]=Wp(s,n[1]);return n};ps.getPropertiesHash=ps.getNonDefaultPropertiesHash;var nb={};nb.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,o=n.style||n.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};nb.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};nb.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:o})}return r};var s2={};s2.appendFromString=function(r){var e=this,t=this,n=""+r,i,o,a;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Nr("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var h=new yl(f);if(h.invalid){Nr("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var d=c[2],v=!1;o=d;for(var p=[];;){var m=o.match(/^\s*$/);if(m)break;var y=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Nr("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}a=y[0];var b=y[1],g=y[2],_=e.properties[b];if(!_){Nr("Skipping property: Invalid property name in: "+a),u();continue}var w=t.parse(b,g);if(!w){Nr("Skipping property: Invalid property definition in: "+a),u();continue}p.push({name:b,val:g}),u()}if(v){s();break}t.selector(f);for(var x=0;x<p.length;x++){var E=p[x];t.css(E.name,E.val)}s()}return t};s2.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var jn={};(function(){var r=Gn,e=Rz,t=kz,n=Dz,i=Mz,o=function(re){return"^"+re+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(re){var he=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+re+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+he+")\\s*\\,\\s*("+he+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];jn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(re,he){switch(re.length){case 2:return he[0]!=="deg"&&he[0]!=="rad"&&he[1]!=="deg"&&he[1]!=="rad";case 1:return Ct(re[0])||he[0]==="deg"||he[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(re){var he=re.length;return he===1||he===2||he===4}}};var u={zeroNonZero:function(re,he){return(re==null||he==null)&&re!==he||re==0&&he!=0?!0:re!=0&&he==0},any:function(re,he){return re!=he},emptyNonEmpty:function(re,he){var ve=vl(re),_e=vl(he);return ve&&!_e||!ve&&_e}},l=jn.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],m=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(re,he,ve){return re===he?!1:ve.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],b=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],g=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],_=function(re,he){return he.value==="label"?-re.poolIndex():he.pfValue},w=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],x=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],E=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],O=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],C=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],A=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(re,he){return re===he?!1:re==="bezier"||he==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],R=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],k=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],D=[];jn.pieBackgroundN=16,D.push({name:"pie-size",type:l.sizeMaybePercent}),D.push({name:"pie-hole",type:l.sizeMaybePercent}),D.push({name:"pie-start-angle",type:l.angle});for(var L=1;L<=jn.pieBackgroundN;L++)D.push({name:"pie-"+L+"-background-color",type:l.color}),D.push({name:"pie-"+L+"-background-size",type:l.percent}),D.push({name:"pie-"+L+"-background-opacity",type:l.zeroOneNumber});var j=[];jn.stripeBackgroundN=16,j.push({name:"stripe-size",type:l.sizeMaybePercent}),j.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var q=1;q<=jn.stripeBackgroundN;q++)j.push({name:"stripe-"+q+"-background-color",type:l.color}),j.push({name:"stripe-"+q+"-background-size",type:l.percent}),j.push({name:"stripe-"+q+"-background-opacity",type:l.zeroOneNumber});var B=[],U=jn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(ee){U.forEach(function(re){var he=re+"-"+ee.name,ve=ee.type,_e=ee.triggersBounds;B.push({name:he,type:ve,triggersBounds:_e})})},{});var W=jn.properties=[].concat(p,g,m,y,b,R,v,d,c,f,h,w,x,E,O,D,j,C,A,B,k),H=jn.propertyGroups={behavior:p,transition:g,visibility:m,overlay:y,underlay:b,ghost:R,commonLabel:v,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:w,nodeBorder:x,nodeOutline:E,backgroundImage:O,pie:D,stripe:j,compound:C,edgeLine:A,edgeArrow:B,core:k},Y=jn.propertyGroupNames={},Z=jn.propertyGroupKeys=Object.keys(H);Z.forEach(function(ee){Y[ee]=H[ee].map(function(re){return re.name}),H[ee].forEach(function(re){return re.groupKey=ee})});var ce=jn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];jn.propertyNames=W.map(function(ee){return ee.name});for(var $=0;$<W.length;$++){var K=W[$];W[K.name]=K}for(var ie=0;ie<ce.length;ie++){var ae=ce[ie],le=W[ae.pointsTo],te={name:ae.name,alias:!0,pointsTo:le};W.push(te),W[ae.name]=te}})();jn.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};jn.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=jt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=jn.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=jn.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return jn.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);t[o]=s}}return r.defaultProperties=t,r.defaultProperties};jn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var ib={};ib.parse=function(r,e,t,n){var i=this;if(gn(e))return i.parseImplWarn(r,e,t,n);var o=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,a=t?"t":"f",s=""+e,u=Y5(r,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=ds(c),c&&(c.value=ds(c.value))),c};ib.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Nr("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Nr("The style value of `label` is deprecated for `"+i.name+"`"),i};ib.parseImpl=function(r,e,t,n){var i=this;r=WC(r);var o=i.properties[r],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,r=o.name);var u=Ct(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(gn(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var d=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var p=this.parse(r,f[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return Nr("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var m=v.value,y=p.value,b=m[0]===y[0]&&m[1]===y[1]&&m[2]===y[2]&&(m[3]===y[3]||(m[3]==null||m[3]===1)&&(y[3]==null||y[3]===1));if(b)return!1}return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:p.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var g;if(u?g=e.split(/\s+/):Gr(e)?g=e:g=[e],l.evenMultiple&&g.length%2!==0)return null;for(var _=[],w=[],x=[],E="",O=!1,C=0;C<g.length;C++){var A=i.parse(r,g[C],t,"multiple");O=O||Ct(A.value),_.push(A.value),x.push(A.pfValue!=null?A.pfValue:A.value),w.push(A.units),E+=(C>0?" ":"")+A.strValue}return l.validate&&!l.validate(_,w)?null:l.singleEnum&&O?_.length===1&&Ct(_[0])?{name:r,value:_[0],strValue:_[0],bypass:t}:null:{name:r,value:_,pfValue:x,strValue:E,bypass:t,units:w}}var R=function(){for(var te=0;te<l.enums.length;te++){var ee=l.enums[te];if(ee===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var k,D="px";if(l.units&&(k=l.units),l.implicitUnits&&(D=l.implicitUnits),!l.unitless)if(u){var L="px|em"+(l.allowPercent?"|\\%":"");k&&(L=k);var j=e.match("^("+Gn+")("+L+")?$");j&&(e=j[1],k=j[2]||D)}else(!k||l.implicitUnits)&&(k=D);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,R();if(l.integer&&!Oz(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var q={name:r,value:e,strValue:""+e+(k||""),units:k,bypass:t};return l.unitless||k!=="px"&&k!=="em"?q.pfValue=e:q.pfValue=k==="px"||!k?e:this.getEmSizeInPixels()*e,(k==="ms"||k==="s")&&(q.pfValue=k==="ms"?e:1e3*e),(k==="deg"||k==="rad")&&(q.pfValue=k==="rad"?e:D9(e)),k==="%"&&(q.pfValue=e/100),q}else if(l.propList){var B=[],U=""+e;if(U!=="none"){for(var W=U.split(/\s*,\s*|\s+/),H=0;H<W.length;H++){var Y=W[H].trim();i.properties[Y]?B.push(Y):Nr("`"+Y+"` is not a valid property name")}if(B.length===0)return null}return{name:r,value:B,strValue:B.length===0?"none":B.join(" "),bypass:t}}else if(l.color){var Z=U5(e);return Z?{name:r,value:Z,pfValue:Z,strValue:"rgb("+Z[0]+","+Z[1]+","+Z[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var ce=R();if(ce)return ce}for(var $=l.regexes?l.regexes:[l.regex],K=0;K<$.length;K++){var ie=new RegExp($[K]),ae=ie.exec(e);if(ae)return{name:r,value:l.singleRegexMatchValue?ae[1]:ae,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?R():null};var ni=function(e){if(!(this instanceof ni))return new ni(e);if(!VC(e)){ln("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Ii=ni.prototype;Ii.instanceString=function(){return"style"};Ii.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};Ii.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Ii.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Ii.selector=function(r){var e=r==="core"?null:new yl(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Ii.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],o=t[i.name];o===void 0&&(o=t[V0(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Ii.style=Ii.css;Ii.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};Ii.append=function(r){return j5(r)?r.appendToStyle(this):Gr(r)?this.appendFromJson(r):Ct(r)&&this.appendFromString(r),this};ni.fromJson=function(r,e){var t=new ni(r);return t.fromJson(e),t};ni.fromString=function(r,e){return new ni(r).fromString(e)};[ii,bg,a2,ps,nb,s2,jn,ib].forEach(function(r){jt(Ii,r)});ni.types=Ii.types;ni.properties=Ii.properties;ni.propertyGroups=Ii.propertyGroups;ni.propertyGroupNames=Ii.propertyGroupNames;ni.propertyGroupKeys=Ii.propertyGroupKeys;var jV={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return j5(e)?t.style=e.generateStyle(this):Gr(e)?t.style=ni.fromJson(this,e):Ct(e)?t.style=ni.fromString(this,e):t.style=ni(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},FV="single",Kc={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=FV),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,o,a,s;switch(e.length){case 0:return t;case 1:if(Ct(e[0]))return n=e[0],t[n];if(xr(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,ot(a)&&(t.x=a),ot(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&ot(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:xr(e)&&(s=n[0],u=s.x,l=s.y,ot(u)&&(i.x+=u),ot(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=t,(o==="x"||o==="y")&&ot(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(ot(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ct(e)){var i=e;e=this.$(i)}else if(Tz(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Lo(e)||(e=this.mutableElements());if(!(Lo(e)&&e.empty())){n=n||e.boundingBox();var a=this.width(),s=this.height(),u;if(t=ot(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((a-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return ot(e)&&ot(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):ot(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:ot(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,o,a,s=!1;if(t.zoomingEnabled||(s=!0),ot(e)?a=e:xr(e)&&(a=e.level,e.position!=null?o=Y0(e.position,i,n):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!t.panningEnabled&&(s=!0)),a=a>t.maxZoom?t.maxZoom:a,a=a<t.minZoom?t.minZoom:a,s||!ot(a)||a===i||o!=null&&(!ot(o.x)||!ot(o.y)))return null;if(o!=null){var u=n,l=i,c=a,f={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:a,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(ot(e.zoom)||(n=!1),xr(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;ot(l.x)&&(t.pan.x=l.x,s=!1),ot(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Ct(e)){var n=e;e=this.mutableElements().filter(n)}else Lo(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();t=t===void 0?this._private.zoom:t;var s={x:(o-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?(function(){var i=n.window().getComputedStyle(t),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-o("padding-left")-o("padding-right"),height:t.clientHeight-o("padding-top")-o("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Kc.centre=Kc.center;Kc.autolockNodes=Kc.autolock;Kc.autoungrabifyNodes=Kc.autoungrabify;var Zp={data:Lr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Lr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Lr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Lr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Zp.attr=Zp.data;Zp.removeAttr=Zp.removeData;var Qp=function(e){var t=this;e=jt({},e);var n=e.container;n&&!v0(n)&&v0(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var a=zn!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=jt({name:a?"grid":"null"},s.layout),s.renderer=jt({name:a?"canvas":"null"},s.renderer);var u=function(v,p,m){return p!==void 0?p:m!==void 0?m:v},l=this._private={container:n,ready:!1,options:s,elements:new gi(this),listeners:[],aniEles:new gi(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:ot(s.zoom)?s.zoom:1,pan:{x:xr(s.pan)&&ot(s.pan.x)?s.pan.x:0,y:xr(s.pan)&&ot(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,p){var m=v.some(Cz);if(m)return dd.all(v).then(p);p(v)};l.styleEnabled&&t.setStyle([]);var f=jt({},s,s.renderer);t.initRenderer(f);var h=function(v,p,m){t.notifications(!1);var y=t.mutableElements();y.length>0&&y.remove(),v!=null&&(xr(v)||Gr(v))&&t.add(v),t.one("layoutready",function(g){t.notifications(!0),t.emit(g),t.one("load",p),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",m),t.emit("done")});var b=jt({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()};c([s.style,s.elements],function(d){var v=d[0],p=d[1];l.styleEnabled&&t.style().append(v),h(p,function(){t.startAnimationLoop(),l.ready=!0,gn(s.ready)&&t.on("ready",s.ready);for(var m=0;m<o.length;m++){var y=o[m];t.on("ready",y)}i&&(i.readies=[]),t.emit("ready")},s.done)})},w0=Qp.prototype;jt(w0,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return zn;var t=this._private.container.ownerDocument;return t===void 0||t==null?zn:t.defaultView||zn},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!v0(e)&&v0(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(jt({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return ds(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),o=function(_){return t.getElementById(_.id())};if(xr(e)){if(t.startBatch(),e.elements){var a={},s=function(_,w){for(var x=[],E=[],O=0;O<_.length;O++){var C=_[O];if(!C.data.id){Nr("cy.json() cannot handle elements without an ID attribute");continue}var A=""+C.data.id,R=t.getElementById(A);a[A]=!0,R.length!==0?E.push({ele:R,json:C}):(w&&(C.group=w),x.push(C))}t.add(x);for(var k=0;k<E.length;k++){var D=E[k],L=D.ele,j=D.json;L.json(j)}};if(Gr(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];Gr(f)&&s(f,c)}var h=t.collection();i.filter(function(g){return!a[g.id()]}).forEach(function(g){g.isParent()?h.merge(g):g.remove()}),h.forEach(function(g){return g.children().move({parent:null})}),h.forEach(function(g){return o(g).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var p=d[v];e[p]!=null&&t[p](e[p])}return t.endBatch(),this}else{var m=!!e,y={};m?y.elements=this.elements().map(function(g){return g.json()}):(y.elements={},i.forEach(function(g){var _=g.group();y.elements[_]||(y.elements[_]=[]),y.elements[_].push(g.json())})),this._private.styleEnabled&&(y.style=t.style().json()),y.data=ds(t.data());var b=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=ds(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=ds(b.renderer),y.hideEdgesOnViewport=b.hideEdgesOnViewport,y.textureOnViewport=b.textureOnViewport,y.wheelSensitivity=b.wheelSensitivity,y.motionBlur=b.motionBlur,y.multiClickDebounceTime=b.multiClickDebounceTime,y}}});w0.$id=w0.getElementById;[CV,kV,j3,BT,$m,MV,UT,Km,jV,Kc,Zp].forEach(function(r){jt(w0,r)});var BV={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},UV={maximal:!1,acyclic:!1},wh=function(e){return e.scratch("breadthfirst")},zR=function(e,t){return e.scratch("breadthfirst",t)};function F3(r){this.options=jt({},BV,UV,r)}F3.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(G){return G.isChildless()}),i=t,o=r.directed,a=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=$i(s?r.boundingBox:structuredClone(e.extent())),l;if(Lo(r.roots))l=r.roots;else if(Gr(r.roots)){for(var c=[],f=0;f<r.roots.length;f++){var h=r.roots[f],d=e.getElementById(h);c.push(d)}l=e.collection(c)}else if(Ct(r.roots))l=e.$(r.roots);else if(o)l=n.roots();else{var v=t.components();l=e.collection();for(var p=function(){var X=v[m],se=X.maxDegree(!1),pe=X.filter(function(ge){return ge.degree(!1)===se});l=l.add(pe)},m=0;m<v.length;m++)p()}var y=[],b={},g=function(X,se){y[se]==null&&(y[se]=[]);var pe=y[se].length;y[se].push(X),zR(X,{index:pe,depth:se})},_=function(X,se){var pe=wh(X),ge=pe.depth,xe=pe.index;y[ge][xe]=null,X.isChildless()&&g(X,se)};i.bfs({roots:l,directed:r.directed,visit:function(X,se,pe,ge,xe){var Ne=X[0],He=Ne.id();Ne.isChildless()&&g(Ne,xe),b[He]=!0}});for(var w=[],x=0;x<n.length;x++){var E=n[x];b[E.id()]||w.push(E)}var O=function(X){for(var se=y[X],pe=0;pe<se.length;pe++){var ge=se[pe];if(ge==null){se.splice(pe,1),pe--;continue}zR(ge,{depth:X,index:pe})}},C=function(X,se){for(var pe=wh(X),ge=X.incomers().filter(function(Qe){return Qe.isNode()&&t.has(Qe)}),xe=-1,Ne=X.id(),He=0;He<ge.length;He++){var at=ge[He],Ze=wh(at);xe=Math.max(xe,Ze.depth)}if(pe.depth<=xe){if(!r.acyclic&&se[Ne])return null;var et=xe+1;return _(X,et),se[Ne]=et,!0}return!1};if(o&&a){var A=[],R={},k=function(X){return A.push(X)},D=function(){return A.shift()};for(n.forEach(function(G){return A.push(G)});A.length>0;){var L=D(),j=C(L,R);if(j)L.outgoers().filter(function(G){return G.isNode()&&t.has(G)}).forEach(k);else if(j===null){Nr("Detected double maximal shift for node `"+L.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var q=0;if(r.avoidOverlap)for(var B=0;B<n.length;B++){var U=n[B],W=U.layoutDimensions(r),H=W.w,Y=W.h;q=Math.max(q,H,Y)}var Z={},ce=function(X){if(Z[X.id()])return Z[X.id()];for(var se=wh(X).depth,pe=X.neighborhood(),ge=0,xe=0,Ne=0;Ne<pe.length;Ne++){var He=pe[Ne];if(!(He.isEdge()||He.isParent()||!n.has(He))){var at=wh(He);if(at!=null){var Ze=at.index,et=at.depth;if(!(Ze==null||et==null)){var Qe=y[et].length;et<se&&(ge+=Ze/Qe,xe++)}}}}return xe=Math.max(1,xe),ge=ge/xe,xe===0&&(ge=0),Z[X.id()]=ge,ge},$=function(X,se){var pe=ce(X),ge=ce(se),xe=pe-ge;return xe===0?B5(X.id(),se.id()):xe};r.depthSort!==void 0&&($=r.depthSort);for(var K=y.length,ie=0;ie<K;ie++)y[ie].sort($),O(ie);for(var ae=[],le=0;le<w.length;le++)ae.push(w[le]);var te=function(){for(var X=0;X<K;X++)O(X)};ae.length&&(y.unshift(ae),K=y.length,te());for(var ee=0,re=0;re<K;re++)ee=Math.max(y[re].length,ee);var he={x:u.x1+u.w/2,y:u.y1+u.h/2},ve=n.reduce(function(G,X){return(function(se){return{w:G.w===-1?se.w:(G.w+se.w)/2,h:G.h===-1?se.h:(G.h+se.h)/2}})(X.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),_e=Math.max(K===1?0:s?(u.h-r.padding*2-ve.h)/(K-1):(u.h-r.padding*2-ve.h)/(K+1),q),Oe=y.reduce(function(G,X){return Math.max(G,X.length)},0),Pe=function(X){var se=wh(X),pe=se.depth,ge=se.index;if(r.circle){var xe=Math.min(u.w/2/K,u.h/2/K);xe=Math.max(xe,q);var Ne=xe*pe+xe-(K>0&&y[0].length<=3?xe/2:0),He=2*Math.PI/y[pe].length*ge;return pe===0&&y[0].length===1&&(Ne=1),{x:he.x+Ne*Math.cos(He),y:he.y+Ne*Math.sin(He)}}else{var at=y[pe].length,Ze=Math.max(at===1?0:s?(u.w-r.padding*2-ve.w)/((r.grid?Oe:at)-1):(u.w-r.padding*2-ve.w)/((r.grid?Oe:at)+1),q),et={x:he.x+(ge+1-(at+1)/2)*Ze,y:he.y+(pe+1-(K+1)/2)*_e};return et}},me={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(me).indexOf(r.direction)===-1&&ln("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(me).join(", ")));var F=function(X){return r9(Pe(X),u,me[r.direction])};return t.nodes().layoutPositions(this,r,F),this};var qV={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function B3(r){this.options=jt({},qV,r)}B3.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=$i(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,f=0,h=0;h<o.length;h++){var d=o[h],v=d.layoutDimensions(e),p=v.w,m=v.h;f=Math.max(f,p,m)}if(ot(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-f,o.length>1&&e.avoidOverlap){f*=1.75;var y=Math.cos(l)-Math.cos(0),b=Math.sin(l)-Math.sin(0),g=Math.sqrt(f*f/(y*y+b*b));c=Math.max(g,c)}var _=function(x,E){var O=e.startAngle+E*l*(i?1:-1),C=c*Math.cos(O),A=c*Math.sin(O),R={x:s.x+C,y:s.y+A};return R};return n.nodes().layoutPositions(this,e,_),this};var zV={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function U3(r){this.options=jt({},zV,r)}U3.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,o=i.nodes().not(":parent"),a=$i(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var f=o[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}o.updateStyle();for(var d=0;d<o.length;d++){var v=o[d],p=v.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(_e,Oe){return Oe.value-_e.value});for(var m=e.levelWidth(o),y=[[]],b=y[0],g=0;g<u.length;g++){var _=u[g];if(b.length>0){var w=Math.abs(b[0].value-_.value);w>=m&&(b=[],y.push(b))}b.push(_)}var x=l+e.minNodeSpacing;if(!e.avoidOverlap){var E=y.length>0&&y[0].length>1,O=Math.min(a.w,a.h)/2-x,C=O/(y.length+E?1:0);x=Math.min(x,C)}for(var A=0,R=0;R<y.length;R++){var k=y[R],D=e.sweep===void 0?2*Math.PI-2*Math.PI/k.length:e.sweep,L=k.dTheta=D/Math.max(1,k.length-1);if(k.length>1&&e.avoidOverlap){var j=Math.cos(L)-Math.cos(0),q=Math.sin(L)-Math.sin(0),B=Math.sqrt(x*x/(j*j+q*q));A=Math.max(B,A)}k.r=A,A+=x}if(e.equidistant){for(var U=0,W=0,H=0;H<y.length;H++){var Y=y[H],Z=Y.r-W;U=Math.max(U,Z)}W=0;for(var ce=0;ce<y.length;ce++){var $=y[ce];ce===0&&(W=$.r),$.r=W,W+=U}}for(var K={},ie=0;ie<y.length;ie++)for(var ae=y[ie],le=ae.dTheta,te=ae.r,ee=0;ee<ae.length;ee++){var re=ae[ee],he=e.startAngle+(t?1:-1)*le*ee,ve={x:s.x+te*Math.cos(he),y:s.y+te*Math.sin(he)};K[re.node.id()]=ve}return i.nodes().layoutPositions(this,e,function(_e){var Oe=_e.id();return K[Oe]}),this};var iw,GV={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function ob(r){this.options=jt({},GV,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(n)}ob.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?iw=!0:iw=!1;var n=VV(e,t,r);iw&&HV(n),r.randomize&&YV(n);var i=eu(),o=function(){XV(n,e,r),r.fit===!0&&e.fit(r.padding)},a=function(h){return!(t.stopped||h>=r.numIter||($V(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)o(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),d=z3(n,r,h);h.layoutPositions(t,r,d)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var h=0;l&&h<r.refresh;)l=a(u),u++,h++;if(!l)VR(n,r),s();else{var d=eu();d-i>=r.animationThreshold&&o(),p0(c)}};c()}else{for(;l;)l=a(u),u++;VR(n,r),s()}return this};ob.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};ob.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var VV=function(e,t,n){for(var i=n.eles.edges(),o=n.eles.nodes(),a=$i(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var d=f[h];l[d.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=o[c],p=v.layoutDimensions(n),m={};m.isLocked=v.locked(),m.id=v.data("id"),m.parentId=v.data("parent"),m.cmptId=l[v.id()],m.children=[],m.positionX=v.position("x"),m.positionY=v.position("y"),m.offsetX=0,m.offsetY=0,m.height=p.w,m.width=p.h,m.maxX=m.positionX+m.width/2,m.minX=m.positionX-m.width/2,m.maxY=m.positionY+m.height/2,m.minY=m.positionY-m.height/2,m.padLeft=parseFloat(v.style("padding")),m.padRight=parseFloat(v.style("padding")),m.padTop=parseFloat(v.style("padding")),m.padBottom=parseFloat(v.style("padding")),m.nodeRepulsion=gn(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(m),s.idToIndex[m.id]=c}for(var y=[],b=0,g=-1,_=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],w=v.parentId;w!=null?s.layoutNodes[s.idToIndex[w]].children.push(v.id):(y[++g]=v.id,_.push(v.id))}for(s.graphSet.push(_);b<=g;){var x=y[b++],E=s.idToIndex[x],d=s.layoutNodes[E],O=d.children;if(O.length>0){s.graphSet.push(O);for(var c=0;c<O.length;c++)y[++g]=O[c]}}for(var c=0;c<s.graphSet.length;c++)for(var C=s.graphSet[c],h=0;h<C.length;h++){var A=s.idToIndex[C[h]];s.indexToGraph[A]=c}for(var c=0;c<s.edgeSize;c++){var R=i[c],k={};k.id=R.data("id"),k.sourceId=R.data("source"),k.targetId=R.data("target");var D=gn(n.idealEdgeLength)?n.idealEdgeLength(R):n.idealEdgeLength,L=gn(n.edgeElasticity)?n.edgeElasticity(R):n.edgeElasticity,j=s.idToIndex[k.sourceId],q=s.idToIndex[k.targetId],B=s.indexToGraph[j],U=s.indexToGraph[q];if(B!=U){for(var W=WV(k.sourceId,k.targetId,s),H=s.graphSet[W],Y=0,m=s.layoutNodes[j];H.indexOf(m.id)===-1;)m=s.layoutNodes[s.idToIndex[m.parentId]],Y++;for(m=s.layoutNodes[q];H.indexOf(m.id)===-1;)m=s.layoutNodes[s.idToIndex[m.parentId]],Y++;D*=Y*n.nestingFactor}k.idealLength=D,k.elasticity=L,s.layoutEdges.push(k)}return s},WV=function(e,t,n){var i=q3(e,t,0,n);return 2>i.count?0:i.graph},q3=function(e,t,n,i){var o=i.graphSet[n];if(-1<o.indexOf(e)&&-1<o.indexOf(t))return{count:2,graph:n};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],h=q3(e,t,f,i);if(h.count!==0)if(h.count===1){if(a++,a===2)break}else return h}}return{count:a,graph:n}},HV,YV=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*n,a.positionY=Math.random()*i)}},z3=function(e,t,n){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(t.boundingBox){var l=o.w===0?.5:(u.positionX-o.x1)/o.w,c=o.h===0?.5:(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},XV=function(e,t,n){var i=n.layout,o=n.eles.nodes(),a=z3(e,n,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},$V=function(e,t,n){KV(e,t),JV(e),eW(e,t),tW(e),rW(e)},KV=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];ZV(s,l,e,t)}},GR=function(e){return-1+2*e*Math.random()},ZV=function(e,t,n,i){var o=e.cmptId,a=t.cmptId;if(!(o!==a&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=GR(l),u=GR(l));var c=QV(e,t,s,u);if(c>0)var f=i.nodeOverlap*c,h=Math.sqrt(s*s+u*u),d=f*s/h,v=f*u/h;else var p=E0(e,s,u),m=E0(t,-1*s,-1*u),y=m.x-p.x,b=m.y-p.y,g=y*y+b*b,h=Math.sqrt(g),f=(e.nodeRepulsion+t.nodeRepulsion)/g,d=f*y/h,v=f*b/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),t.isLocked||(t.offsetX+=d,t.offsetY+=v)}},QV=function(e,t,n,i){if(n>0)var o=e.maxX-t.minX;else var o=t.maxX-e.minX;if(i>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},E0=function(e,t,n){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=n/t,l=a/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=o+a/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+a*t/2/n,c.y=o+a/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-a*t/2/n,c.y=o-a/2),c)},JV=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var f=E0(a,l,c),h=E0(u,-1*l,-1*c),d=h.x-f.x,v=h.y-f.y,p=Math.sqrt(d*d+v*v),m=Math.pow(i.idealLength-p,2)/i.elasticity;if(p!==0)var y=m*d/p,b=m*v/p;else var y=0,b=0;a.isLocked||(a.offsetX+=y,a.offsetY+=b),u.isLocked||(u.offsetX-=y,u.offsetY-=b)}}},eW=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<a;f++){var h=e.layoutNodes[e.idToIndex[o[f]]];if(!h.isLocked){var d=s-h.positionX,v=u-h.positionY,p=Math.sqrt(d*d+v*v);if(p>n){var m=t.gravity*d/p,y=t.gravity*v/p;h.offsetX+=m,h.offsetY+=y}}}}},tW=function(e,t){var n=[],i=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=n[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=f,n[++o]=l[h]}u.offsetX=0,u.offsetY=0}}},rW=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var o=nW(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,G3(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},nW=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var o={x:n*e/i,y:n*t/i};else var o={x:e,y:t};return o},G3=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return G3(i,t)}},VR=function(e,t){for(var n=e.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(b,g){return g.w*g.h-b.w*b.h});for(var d=0,v=0,p=0,m=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d-c.x1,h.positionY+=v-c.y1)}d+=c.w+t.componentSpacing,p+=c.w+t.componentSpacing,m=Math.max(m,c.h),p>y&&(v+=m+t.componentSpacing,d=0,p=0,m=0)}}},iW={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function V3(r){this.options=jt({},iW,r)}V3.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=$i(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,e,function(ce){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function($){if($==null)return Math.min(u,l);var K=Math.min(u,l);K==u?u=$:l=$},f=function($){if($==null)return Math.max(u,l);var K=Math.max(u,l);K==u?u=$:l=$},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(a/u);else if(h==null&&d!=null)l=d,u=Math.ceil(a/l);else if(l*u>a){var v=c(),p=f();(v-1)*p>=a?c(v-1):(p-1)*v>=a&&f(p-1)}else for(;l*u<a;){var m=c(),y=f();(y+1)*m>=a?f(y+1):c(m+1)}var b=o.w/l,g=o.h/u;if(e.condense&&(b=0,g=0),e.avoidOverlap)for(var _=0;_<i.length;_++){var w=i[_],x=w._private.position;(x.x==null||x.y==null)&&(x.x=0,x.y=0);var E=w.layoutDimensions(e),O=e.avoidOverlapPadding,C=E.w+O,A=E.h+O;b=Math.max(b,C),g=Math.max(g,A)}for(var R={},k=function($,K){return!!R["c-"+$+"-"+K]},D=function($,K){R["c-"+$+"-"+K]=!0},L=0,j=0,q=function(){j++,j>=l&&(j=0,L++)},B={},U=0;U<i.length;U++){var W=i[U],H=e.position(W);if(H&&(H.row!==void 0||H.col!==void 0)){var Y={row:H.row,col:H.col};if(Y.col===void 0)for(Y.col=0;k(Y.row,Y.col);)Y.col++;else if(Y.row===void 0)for(Y.row=0;k(Y.row,Y.col);)Y.row++;B[W.id()]=Y,D(Y.row,Y.col)}}var Z=function($,K){var ie,ae;if($.locked()||$.isParent())return!1;var le=B[$.id()];if(le)ie=le.col*b+b/2+o.x1,ae=le.row*g+g/2+o.y1;else{for(;k(L,j);)q();ie=j*b+b/2+o.x1,ae=L*g+g/2+o.y1,D(L,j),q()}return{x:ie,y:ae}};i.layoutPositions(this,e,Z)}return this};var oW={ready:function(){},stop:function(){}};function u2(r){this.options=jt({},oW,r)}u2.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};u2.prototype.stop=function(){return this};var aW={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function W3(r){this.options=jt({},aW,r)}W3.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=gn(r.positions);function i(o){if(r.positions==null)return P9(o.position());if(n)return r.positions(o);var a=r.positions[o._private.data.id];return a??null}return t.layoutPositions(this,r,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var sW={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function H3(r){this.options=jt({},sW,r)}H3.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=$i(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var uW=[{name:"breadthfirst",impl:F3},{name:"circle",impl:B3},{name:"concentric",impl:U3},{name:"cose",impl:ob},{name:"grid",impl:V3},{name:"null",impl:u2},{name:"preset",impl:W3},{name:"random",impl:H3}];function Y3(r){this.options=r,this.notifications=0}var WR=function(){},HR=function(){throw new Error("A headless instance can not render images")};Y3.prototype={recalculateRenderedStyle:WR,notify:function(){this.notifications++},init:WR,isHeadless:function(){return!0},png:HR,jpg:HR};var l2={};l2.arrowShapeWidth=.3;l2.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,h,d,v,p){var m=d.x-f/2-p,y=d.x+f/2+p,b=d.y-f/2-p,g=d.y+f/2+p,_=m<=l&&l<=y&&b<=c&&c<=g;return _},n=function(l,c,f,h,d){var v=l*Math.cos(h)-c*Math.sin(h),p=l*Math.sin(h)+c*Math.cos(h),m=v*f,y=p*f,b=m+d.x,g=y+d.y;return{x:b,y:g}},i=function(l,c,f,h){for(var d=[],v=0;v<l.length;v+=2){var p=l[v],m=l[v+1];d.push(n(p,m,c,f,h))}return d},o=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Ct(c)&&(c=r[c]),r[l]=jt({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,p,m,y){var b=o(i(this.points,v+2*y,p,m)),g=ho(h,d,b);return g},roughCollide:t,draw:function(h,d,v,p){var m=i(this.points,d,v,p);e.arrowShapeImpl("polygon")(h,m)},spacing:function(h){return 0},gap:a},c)};s("none",{collide:g0,roughCollide:g0,draw:XC,spacing:aA,gap:aA}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),p=this.controlPoint,m=n(p[0],p[1],c,f,h);e.arrowShapeImpl(this.name)(l,v,m)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,d,v,p){var m=o(i(this.points,f+2*p,h,d)),y=o(i(this.pointsTee,f+2*p,h,d)),b=ho(l,c,m)||ho(l,c,y);return b},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),p=i(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,v,p)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,d,v,p){var m=d,y=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2),b=o(i(this.points,f+2*p,h,d));return ho(l,c,b)||y},draw:function(l,c,f,h,d){var v=i(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,d=3,v=5;return f[d]=f[d]-h,f[v]=f[v]-h,f},collide:function(l,c,f,h,d,v,p){var m=o(i(this.points,f+2*p,h,d)),y=o(i(this.crossLinePts(f,v),f+2*p,h,d)),b=ho(l,c,m)||ho(l,c,y);return b},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),p=i(this.crossLinePts(c,d),c,f,h);e.arrowShapeImpl(this.name)(l,v,p)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,h,d,v,p){var m=d,y=Math.pow(m.x-l,2)+Math.pow(m.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return y},draw:function(l,c,f,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var nf={};nf.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],o=n[1],a=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};nf.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(y){return parseFloat(t.getPropertyValue(y))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},o={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},a=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,f=e.width/(a+c),h=a-u,d=s-l,v=e.left+i.left+o.left,p=e.top+i.top+o.top;return this.containerBB=[v,p,h,d,f]};nf.invalidateContainerClientCoordsCache=function(){this.containerBB=null};nf.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};nf.findNearestElements=function(r,e,t,n){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,p;t&&(a=a.interactive);function m(E,O){if(E.isNode()){if(p)return;p=E,s.push(E)}if(E.isEdge()&&(O==null||O<d))if(v){if(v.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var C=0;C<s.length;C++)if(s[C].isEdge()){s[C]=E,v=E,d=O??d;break}}}else s.push(E),v=E,d=O??d}function y(E){var O=E.outerWidth()+2*f,C=E.outerHeight()+2*f,A=O/2,R=C/2,k=E.position(),D=E.pstyle("corner-radius").value==="auto"?"auto":E.pstyle("corner-radius").pfValue,L=E._private.rscratch;if(k.x-A<=r&&r<=k.x+A&&k.y-R<=e&&e<=k.y+R){var j=o.nodeShapes[i.getNodeShape(E)];if(j.checkPoint(r,e,0,O,C,k.x,k.y,D,L))return m(E,0),!0}}function b(E){var O=E._private,C=O.rscratch,A=E.pstyle("width").pfValue,R=E.pstyle("arrow-scale").value,k=A/2+c,D=k*k,L=k*2,U=O.source,W=O.target,j;if(C.edgeType==="segments"||C.edgeType==="straight"||C.edgeType==="haystack"){for(var q=C.allpts,B=0;B+3<q.length;B+=2)if(z9(r,e,q[B],q[B+1],q[B+2],q[B+3],L)&&D>(j=Y9(r,e,q[B],q[B+1],q[B+2],q[B+3])))return m(E,j),!0}else if(C.edgeType==="bezier"||C.edgeType==="multibezier"||C.edgeType==="self"||C.edgeType==="compound"){for(var q=C.allpts,B=0;B+5<C.allpts.length;B+=4)if(G9(r,e,q[B],q[B+1],q[B+2],q[B+3],q[B+4],q[B+5],L)&&D>(j=H9(r,e,q[B],q[B+1],q[B+2],q[B+3],q[B+4],q[B+5])))return m(E,j),!0}for(var U=U||O.source,W=W||O.target,H=i.getArrowWidth(A,R),Y=[{name:"source",x:C.arrowStartX,y:C.arrowStartY,angle:C.srcArrowAngle},{name:"target",x:C.arrowEndX,y:C.arrowEndY,angle:C.tgtArrowAngle},{name:"mid-source",x:C.midX,y:C.midY,angle:C.midsrcArrowAngle},{name:"mid-target",x:C.midX,y:C.midY,angle:C.midtgtArrowAngle}],B=0;B<Y.length;B++){var Z=Y[B],ce=o.arrowShapes[E.pstyle(Z.name+"-arrow-shape").value],$=E.pstyle("width").pfValue;if(ce.roughCollide(r,e,H,Z.angle,{x:Z.x,y:Z.y},$,c)&&ce.collide(r,e,H,Z.angle,{x:Z.x,y:Z.y},$,c))return m(E),!0}l&&s.length>0&&(y(U),y(W))}function g(E,O,C){return fo(E,O,C)}function _(E,O){var C=E._private,A=h,R;O?R=O+"-":R="",E.boundingBox();var k=C.labelBounds[O||"main"],D=E.pstyle(R+"label").value,L=E.pstyle("text-events").strValue==="yes";if(!(!L||!D)){var j=g(C.rscratch,"labelX",O),q=g(C.rscratch,"labelY",O),B=g(C.rscratch,"labelAngle",O),U=E.pstyle(R+"text-margin-x").pfValue,W=E.pstyle(R+"text-margin-y").pfValue,H=k.x1-A-U,Y=k.x2+A-U,Z=k.y1-A-W,ce=k.y2+A-W;if(B){var $=Math.cos(B),K=Math.sin(B),ie=function(ve,_e){return ve=ve-j,_e=_e-q,{x:ve*$-_e*K+j,y:ve*K+_e*$+q}},ae=ie(H,Z),le=ie(H,ce),te=ie(Y,Z),ee=ie(Y,ce),re=[ae.x+U,ae.y+W,te.x+U,te.y+W,ee.x+U,ee.y+W,le.x+U,le.y+W];if(ho(r,e,re))return m(E),!0}else if(tl(k,r,e))return m(E),!0}}for(var w=a.length-1;w>=0;w--){var x=a[w];x.isNode()?y(x)||_(x):b(x)||_(x)||_(x,"source")||_(x,"target")}return s};nf.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,o=this.cy.zoom(),a=2/o,s=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),f=Math.max(e,n);r=u,t=l,e=c,n=f;var h=$i({x1:r,y1:e,x2:t,y2:n}),d=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],v=[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]];function p(ve,_e,Oe){return fo(ve,_e,Oe)}function m(ve,_e){var Oe=ve._private,Pe=a,me="";ve.boundingBox();var F=Oe.labelBounds.main;if(!F)return null;var G=p(Oe.rscratch,"labelX",_e),X=p(Oe.rscratch,"labelY",_e),se=p(Oe.rscratch,"labelAngle",_e),pe=ve.pstyle(me+"text-margin-x").pfValue,ge=ve.pstyle(me+"text-margin-y").pfValue,xe=F.x1-Pe-pe,Ne=F.x2+Pe-pe,He=F.y1-Pe-ge,at=F.y2+Pe-ge;if(se){var Ze=Math.cos(se),et=Math.sin(se),Qe=function(ke,oe){return ke=ke-G,oe=oe-X,{x:ke*Ze-oe*et+G,y:ke*et+oe*Ze+X}};return[Qe(xe,He),Qe(Ne,He),Qe(Ne,at),Qe(xe,at)]}else return[{x:xe,y:He},{x:Ne,y:He},{x:Ne,y:at},{x:xe,y:at}]}function y(ve,_e,Oe,Pe){function me(F,G,X){return(X.y-F.y)*(G.x-F.x)>(G.y-F.y)*(X.x-F.x)}return me(ve,Oe,Pe)!==me(_e,Oe,Pe)&&me(ve,_e,Oe)!==me(ve,_e,Pe)}for(var b=0;b<i.length;b++){var g=i[b];if(g.isNode()){var _=g,w=_.pstyle("text-events").strValue==="yes",x=_.pstyle("box-selection").strValue,E=_.pstyle("box-select-labels").strValue==="yes";if(x==="none")continue;var O=(x==="overlap"||E)&&w,C=_.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:O});if(x==="contain"){var A=!1;if(E&&w){var R=m(_);R&&r1(R,d)&&(s.push(_),A=!0)}!A&&e3(h,C)&&s.push(_)}else if(x==="overlap"&&QC(h,C)){var k=_.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),D=[{x:k.x1,y:k.y1},{x:k.x2,y:k.y1},{x:k.x2,y:k.y2},{x:k.x1,y:k.y2}];if(r1(D,d))s.push(_);else{var L=m(_);L&&r1(L,d)&&s.push(_)}}}else{var j=g,q=j._private,B=q.rscratch,U=j.pstyle("box-selection").strValue;if(U==="none")continue;if(U==="contain"){if(B.startX!=null&&B.startY!=null&&!tl(h,B.startX,B.startY)||B.endX!=null&&B.endY!=null&&!tl(h,B.endX,B.endY))continue;if(B.edgeType==="bezier"||B.edgeType==="multibezier"||B.edgeType==="self"||B.edgeType==="compound"||B.edgeType==="segments"||B.edgeType==="haystack"){for(var W=q.rstyle.bezierPts||q.rstyle.linePts||q.rstyle.haystackPts,H=!0,Y=0;Y<W.length;Y++)if(!fA(h,W[Y])){H=!1;break}H&&s.push(j)}else B.edgeType==="straight"&&s.push(j)}else if(U==="overlap"){var Z=!1;if(B.startX!=null&&B.startY!=null&&B.endX!=null&&B.endY!=null&&(tl(h,B.startX,B.startY)||tl(h,B.endX,B.endY)))s.push(j),Z=!0;else if(!Z&&B.edgeType==="haystack"){for(var ce=q.rstyle.haystackPts,$=0;$<ce.length;$++)if(fA(h,ce[$])){s.push(j),Z=!0;break}}if(!Z){var K=q.rstyle.bezierPts||q.rstyle.linePts||q.rstyle.haystackPts;if((!K||K.length<2)&&B.edgeType==="straight"&&B.startX!=null&&B.startY!=null&&B.endX!=null&&B.endY!=null&&(K=[{x:B.startX,y:B.startY},{x:B.endX,y:B.endY}]),!K||K.length<2)continue;for(var ie=0;ie<K.length-1;ie++){for(var ae=K[ie],le=K[ie+1],te=0;te<v.length;te++){var ee=Fn(v[te],2),re=ee[0],he=ee[1];if(y(ae,le,re,he)){s.push(j),Z=!0;break}}if(Z)break}}}}}return s};var O0={};O0.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,h,d,y,b;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),y=e.midX,b=e.midY,o)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||a||s||n){var v=e.allpts,p=ri(v[0],v[2],v[4],.1),m=ri(v[1],v[3],v[5],.1);u=c-p,l=f-m}else u=c-y,l=f-b;e.srcArrowAngle=Qy(u,l);var y=e.midX,b=e.midY;if(t&&(y=(c+h)/2,b=(f+d)/2),u=h-c,l=d-f,o){var v=e.allpts;if(v.length/2%2===0){var g=v.length/2,_=g-2;u=v[g]-v[_],l=v[g+1]-v[_+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var g=v.length/2-1,_=g-2;u=v[g]-v[_],l=v[g+1]-v[_+1]}}else if(i||a||s){var v=e.allpts,w=e.ctrlpts,x,E,O,C;if(w.length/2%2===0){var A=v.length/2-1,R=A+2,k=R+2;x=ri(v[A],v[R],v[k],0),E=ri(v[A+1],v[R+1],v[k+1],0),O=ri(v[A],v[R],v[k],1e-4),C=ri(v[A+1],v[R+1],v[k+1],1e-4)}else{var R=v.length/2-1,A=R-2,k=R+2;x=ri(v[A],v[R],v[k],.4999),E=ri(v[A+1],v[R+1],v[k+1],.4999),O=ri(v[A],v[R],v[k],.5),C=ri(v[A+1],v[R+1],v[k+1],.5)}u=O-x,l=C-E}if(e.midtgtArrowAngle=Qy(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var g=v.length/2-1,D=g+2;u=-(v[D]-v[g]),l=-(v[D+1]-v[g+1])}}}if(e.midsrcArrowAngle=Qy(u,l),o)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(i||a||s||n){var v=e.allpts,L=v.length,p=ri(v[L-6],v[L-4],v[L-2],.9),m=ri(v[L-5],v[L-3],v[L-1],.9);u=h-p,l=d-m}else u=h-y,l=d-b;e.tgtArrowAngle=Qy(u,l)};O0.getArrowWidth=O0.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var qT,zT,hs={},na={},YR,XR,qc,Zm,zs,wc,Lc,is,Eh,am,X3,$3,GT,VT,$R,KR=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},lW=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},cW=function(e,t,n,i,o){if(e!==$R?KR(t,e,hs):lW(na,hs),KR(t,n,na),YR=hs.nx*na.ny-hs.ny*na.nx,XR=hs.nx*na.nx-hs.ny*-na.ny,zs=Math.asin(Math.max(-1,Math.min(1,YR))),Math.abs(zs)<1e-6){qT=t.x,zT=t.y,Lc=Eh=0;return}qc=1,Zm=!1,XR<0?zs<0?zs=Math.PI+zs:(zs=Math.PI-zs,qc=-1,Zm=!0):zs>0&&(qc=-1,Zm=!0),t.radius!==void 0?Eh=t.radius:Eh=i,wc=zs/2,am=Math.min(hs.len/2,na.len/2),o?(is=Math.abs(Math.cos(wc)*Eh/Math.sin(wc)),is>am?(is=am,Lc=Math.abs(is*Math.sin(wc)/Math.cos(wc))):Lc=Eh):(is=Math.min(am,Eh),Lc=Math.abs(is*Math.sin(wc)/Math.cos(wc))),GT=t.x+na.nx*is,VT=t.y+na.ny*is,qT=GT-na.ny*Lc*qc,zT=VT+na.nx*Lc*qc,X3=t.x+hs.nx*is,$3=t.y+hs.ny*is,$R=t};function K3(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function c2(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(cW(r,e,t,n,i),{cx:qT,cy:zT,radius:Lc,startX:X3,startY:$3,stopX:GT,stopY:VT,startAngle:hs.ang+Math.PI/2*qc,endAngle:na.ang-Math.PI/2*qc,counterClockwise:Zm})}var Jp=.01,fW=Math.sqrt(2*Jp),ki={};ki.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,o,a=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(w,x,E,O){var C=O-x,A=E-w,R=Math.sqrt(A*A+C*C);return{x:-C/R,y:A/R}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":o=t;break;case"intersection":o=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],a),h=Fn(f,2),d=h[0],v=h[1],p=this.manualEndptToPx(r.target()[0],s),m=Fn(p,2),y=m[0],b=m[1],g={x1:d,y1:v,x2:y,y2:b};i=l(d,v,y,b),o=g}else Nr("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=n;break}}return{midptPts:o,vectorNormInverse:i}};ki.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=n.source,s=n.target,u=a.position(),l=s.position(),c=a.width(),f=s.width(),h=a.height(),d=s.height(),v=t.pstyle("haystack-radius").value,p=v/2;i.haystackPts=i.allpts=[i.source.x*c*p+u.x,i.source.y*h*p+u.y,i.target.x*f*p+l.x,i.target.y*d*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};ki.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),o=r.pstyle("segment-radii"),a=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],h=i.pfValue[c],d=1-f,v=f,p=this.findMidptPtsEtc(r,e),m=p.midptPts,y=p.vectorNormInverse,b={x:m.x1*d+m.x2*v,y:m.y1*d+m.y2*v};t.segpts.push(b.x+y.x*h,b.y+y.y*h),t.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),t.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};ki.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,o=e.dirCounts,a=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,d=f;n&&(h=0,d=u);var v=l-Math.PI/2,p=v-c/2,m=v+c/2,y=l+"_"+c;h=o[y]===void 0?o[y]=0:++o[y],i.ctrlpts=[a.x+Math.cos(p)*1.4*d*(h/3+1),a.y+Math.sin(p)*1.4*d*(h/3+1),a.x+Math.cos(m)*1.4*d*(h/3+1),a.y+Math.sin(m)*1.4*d*(h/3+1)]};ki.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=t,p=f;n&&(v=0,p=d);var m=50,y={x:o.x-s/2,y:o.y-u/2},b={x:a.x-l/2,y:a.y-c/2},g={x:Math.min(y.x,b.x),y:Math.min(y.y,b.y)},_=.5,w=Math.max(_,Math.log(s*Jp)),x=Math.max(_,Math.log(l*Jp));i.ctrlpts=[g.x,g.y-(1+Math.pow(m,1.12)/100)*p*(v/3+1)*w,g.x-(1+Math.pow(m,1.12)/100)*p*(v/3+1)*x,g.y]};ki.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};ki.findBezierPoints=function(r,e,t,n,i){var o=r._private.rscratch,a=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],h=n;o.edgeType=h?"multibezier":"bezier",o.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+t)*a*(i?-1:1),p=void 0,m=ZC(v);h&&(c=s?s.pfValue[d]:a,f=u.value[d]),n?p=c:p=c!==void 0?m*c:void 0;var y=p!==void 0?p:v,b=1-f,g=f,_=this.findMidptPtsEtc(r,e),w=_.midptPts,x=_.vectorNormInverse,E={x:w.x1*b+w.x2*g,y:w.y1*b+w.y2*g};o.ctrlpts.push(E.x+x.x*y,E.y+x.y*y)}};ki.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,p=r.pstyle("edge-distances").value,m=p!=="node-position",y=r.pstyle("taxi-direction").value,b=y,g=r.pstyle("taxi-turn"),_=g.units==="%",w=g.pfValue,x=w<0,E=r.pstyle("taxi-turn-min-distance").pfValue,O=m?(f+d)/2:0,C=m?(h+v)/2:0,A=c.x2-c.x1,R=c.y2-c.y1,k=function(oe,Ee){return oe>0?Math.max(oe-Ee,0):Math.min(oe+Ee,0)},D=k(A,O),L=k(R,C),j=!1;b===l?y=Math.abs(D)>Math.abs(L)?i:n:b===u||b===s?(y=n,j=!0):(b===o||b===a)&&(y=i,j=!0);var q=y===n,B=q?L:D,U=q?R:A,W=ZC(U),H=!1;!(j&&(_||x))&&(b===s&&U<0||b===u&&U>0||b===o&&U>0||b===a&&U<0)&&(W*=-1,B=W*Math.abs(B),H=!0);var Y;if(_){var Z=w<0?1+w:w;Y=Z*B}else{var ce=w<0?B:0;Y=ce+w*W}var $=function(oe){return Math.abs(oe)<E||Math.abs(oe)>=Math.abs(B)},K=$(Y),ie=$(Math.abs(B)-Math.abs(Y)),ae=K||ie;if(ae&&!H)if(q){var le=Math.abs(U)<=h/2,te=Math.abs(A)<=d/2;if(le){var ee=(c.x1+c.x2)/2,re=c.y1,he=c.y2;t.segpts=[ee,re,ee,he]}else if(te){var ve=(c.y1+c.y2)/2,_e=c.x1,Oe=c.x2;t.segpts=[_e,ve,Oe,ve]}else t.segpts=[c.x1,c.y2]}else{var Pe=Math.abs(U)<=f/2,me=Math.abs(R)<=v/2;if(Pe){var F=(c.y1+c.y2)/2,G=c.x1,X=c.x2;t.segpts=[G,F,X,F]}else if(me){var se=(c.x1+c.x2)/2,pe=c.y1,ge=c.y2;t.segpts=[se,pe,se,ge]}else t.segpts=[c.x2,c.y1]}else if(q){var xe=c.y1+Y+(m?h/2*W:0),Ne=c.x1,He=c.x2;t.segpts=[Ne,xe,He,xe]}else{var at=c.x1+Y+(m?f/2*W:0),Ze=c.y1,et=c.y2;t.segpts=[at,Ze,at,et]}if(t.isRound){var Qe=r.pstyle("taxi-radius").value,Xe=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Qe),t.isArcRadius=new Array(t.segpts.length/2).fill(Xe)}};ki.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,p=!ot(t.startX)||!ot(t.startY),m=!ot(t.arrowStartX)||!ot(t.arrowStartY),y=!ot(t.endX)||!ot(t.endY),b=!ot(t.arrowEndX)||!ot(t.arrowEndY),g=3,_=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,w=g*_,x=Xc({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),E=x<w,O=Xc({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),C=O<w,A=!1;if(p||m||E){A=!0;var R={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},k=Math.sqrt(R.x*R.x+R.y*R.y),D={x:R.x/k,y:R.y/k},L=Math.max(o,a),j={x:t.ctrlpts[0]+D.x*2*L,y:t.ctrlpts[1]+D.y*2*L},q=l.intersectLine(n.x,n.y,o,a,j.x,j.y,0,f,d);E?(t.ctrlpts[0]=t.ctrlpts[0]+D.x*(w-x),t.ctrlpts[1]=t.ctrlpts[1]+D.y*(w-x)):(t.ctrlpts[0]=q[0]+D.x*w,t.ctrlpts[1]=q[1]+D.y*w)}if(y||b||C){A=!0;var B={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},U=Math.sqrt(B.x*B.x+B.y*B.y),W={x:B.x/U,y:B.y/U},H=Math.max(o,a),Y={x:t.ctrlpts[0]+W.x*2*H,y:t.ctrlpts[1]+W.y*2*H},Z=c.intersectLine(i.x,i.y,s,u,Y.x,Y.y,0,h,v);C?(t.ctrlpts[0]=t.ctrlpts[0]+W.x*(w-O),t.ctrlpts[1]=t.ctrlpts[1]+W.y*(w-O)):(t.ctrlpts[0]=Z[0]+W.x*w,t.ctrlpts[1]=Z[1]+W.y*w)}A&&this.findEndpoints(r)}};ki.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=ri(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=ri(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(c2({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2];if(h.radius===0){var d={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-d.y,d.x-f.x]}else{var v=[f.x-h.cx,f.y-h.cy],p=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(m){return m*p}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};ki.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||ot(e.startX)&&ot(e.startY)&&ot(e.endX)&&ot(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Nr("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};ki.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),o=new Xs,a=function(C,A){return[].concat(d0(C),[A?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){u.push(c);continue}var d=h==="unbundled-bezier"||el(h,"segments")||h==="straight"||h==="straight-triangle"||el(h,"taxi"),v=h==="unbundled-bezier"||h==="bezier",p=f.source,m=f.target,y=p.poolIndex(),b=m.poolIndex(),g=[y,b].sort(),_=a(g,d),w=o.get(_);w==null&&(w={eles:[]},s.push({pairId:g,edgeIsUnbundled:d}),o.set(_,w)),w.eles.push(c),d&&(w.hasUnbundled=!0),v&&(w.hasBezier=!0)}}for(var x=function(){var C=s[E],A=C.pairId,R=C.edgeIsUnbundled,k=a(A,R),D=o.get(k),L;if(!D.hasUnbundled){var j=D.eles[0].parallelEdges().filter(function(Xe){return Xe.isBundledBezier()});$C(D.eles),j.forEach(function(Xe){return D.eles.push(Xe)}),D.eles.sort(function(Xe,ke){return Xe.poolIndex()-ke.poolIndex()})}var q=D.eles[0],B=q.source(),U=q.target();if(B.poolIndex()>U.poolIndex()){var W=B;B=U,U=W}var H=D.srcPos=B.position(),Y=D.tgtPos=U.position(),Z=D.srcW=B.outerWidth(),ce=D.srcH=B.outerHeight(),$=D.tgtW=U.outerWidth(),K=D.tgtH=U.outerHeight(),ie=D.srcShape=t.nodeShapes[e.getNodeShape(B)],ae=D.tgtShape=t.nodeShapes[e.getNodeShape(U)],le=D.srcCornerRadius=B.pstyle("corner-radius").value==="auto"?"auto":B.pstyle("corner-radius").pfValue,te=D.tgtCornerRadius=U.pstyle("corner-radius").value==="auto"?"auto":U.pstyle("corner-radius").pfValue,ee=D.tgtRs=U._private.rscratch,re=D.srcRs=B._private.rscratch;D.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var he=0;he<D.eles.length;he++){var ve=D.eles[he],_e=ve[0]._private.rscratch,Oe=ve.pstyle("curve-style").value,Pe=Oe==="unbundled-bezier"||el(Oe,"segments")||el(Oe,"taxi"),me=!B.same(ve.source());if(!D.calculatedIntersection&&B!==U&&(D.hasBezier||D.hasUnbundled)){D.calculatedIntersection=!0;var F=ie.intersectLine(H.x,H.y,Z,ce,Y.x,Y.y,0,le,re),G=D.srcIntn=F,X=ae.intersectLine(Y.x,Y.y,$,K,H.x,H.y,0,te,ee),se=D.tgtIntn=X,pe=D.intersectionPts={x1:F[0],x2:X[0],y1:F[1],y2:X[1]},ge=D.posPts={x1:H.x,x2:Y.x,y1:H.y,y2:Y.y},xe=X[1]-F[1],Ne=X[0]-F[0],He=Math.sqrt(Ne*Ne+xe*xe);ot(He)&&He>=fW||(He=Math.sqrt(Math.max(Ne*Ne,Jp)+Math.max(xe*xe,Jp)));var at=D.vector={x:Ne,y:xe},Ze=D.vectorNorm={x:at.x/He,y:at.y/He},et={x:-Ze.y,y:Ze.x};D.nodesOverlap=!ot(He)||ae.checkPoint(F[0],F[1],0,$,K,Y.x,Y.y,te,ee)||ie.checkPoint(X[0],X[1],0,Z,ce,H.x,H.y,le,re),D.vectorNormInverse=et,L={nodesOverlap:D.nodesOverlap,dirCounts:D.dirCounts,calculatedIntersection:!0,hasBezier:D.hasBezier,hasUnbundled:D.hasUnbundled,eles:D.eles,srcPos:Y,srcRs:ee,tgtPos:H,tgtRs:re,srcW:$,srcH:K,tgtW:Z,tgtH:ce,srcIntn:se,tgtIntn:G,srcShape:ae,tgtShape:ie,posPts:{x1:ge.x2,y1:ge.y2,x2:ge.x1,y2:ge.y1},intersectionPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},vector:{x:-at.x,y:-at.y},vectorNorm:{x:-Ze.x,y:-Ze.y},vectorNormInverse:{x:-et.x,y:-et.y}}}var Qe=me?L:D;_e.nodesOverlap=Qe.nodesOverlap,_e.srcIntn=Qe.srcIntn,_e.tgtIntn=Qe.tgtIntn,_e.isRound=Oe.startsWith("round"),i&&(B.isParent()||B.isChild()||U.isParent()||U.isChild())&&(B.parents().anySame(U)||U.parents().anySame(B)||B.same(U)&&B.isParent())?e.findCompoundLoopPoints(ve,Qe,he,Pe):B===U?e.findLoopPoints(ve,Qe,he,Pe):Oe.endsWith("segments")?e.findSegmentsPoints(ve,Qe):Oe.endsWith("taxi")?e.findTaxiPoints(ve,Qe):Oe==="straight"||!Pe&&D.eles.length%2===1&&he===Math.floor(D.eles.length/2)?e.findStraightEdgePoints(ve):e.findBezierPoints(ve,Qe,he,Pe,me),e.findEndpoints(ve),e.tryToCorrectInvalidPoints(ve,Qe),e.checkForInvalidEdgeWarning(ve),e.storeAllpts(ve),e.storeEdgeProjections(ve),e.calculateArrowAngles(ve),e.recalculateEdgeLabelProjections(ve),e.calculateLabelAngles(ve)}},E=0;E<s.length;E++)x();this.findHaystackPoints(u)}};function Z3(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}ki.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return Z3(e.segpts)};ki.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return Z3(e.ctrlpts)};ki.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var _g={};_g.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),o=r.outerHeight(),a=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,o,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,a)}};_g.findEndpoints=function(r){var e,t,n,i,o=this,a,s=r.source()[0],u=r.target()[0],l=s.position(),c=u.position(),f=r.pstyle("target-arrow-shape").value,h=r.pstyle("source-arrow-shape").value,d=r.pstyle("target-distance-from-node").pfValue,v=r.pstyle("source-distance-from-node").pfValue,p=s._private.rscratch,m=u._private.rscratch,y=r.pstyle("curve-style").value,b=r._private.rscratch,g=b.edgeType,_=el(y,"taxi"),w=g==="self"||g==="compound",x=g==="bezier"||g==="multibezier"||w,E=g!=="bezier",O=g==="straight"||g==="segments",C=g==="segments",A=x||E||O,R=w||_,k=r.pstyle("source-endpoint"),D=R?"outside-to-node":k.value,L=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue,j=r.pstyle("target-endpoint"),q=R?"outside-to-node":j.value,B=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;b.srcManEndpt=k,b.tgtManEndpt=j;var U,W,H,Y,Z=(e=(j==null||(t=j.pfValue)===null||t===void 0?void 0:t.length)===2?j.pfValue:null)!==null&&e!==void 0?e:[0,0],ce=(n=(k==null||(i=k.pfValue)===null||i===void 0?void 0:i.length)===2?k.pfValue:null)!==null&&n!==void 0?n:[0,0];if(x){var $=[b.ctrlpts[0],b.ctrlpts[1]],K=E?[b.ctrlpts[b.ctrlpts.length-2],b.ctrlpts[b.ctrlpts.length-1]]:$;U=K,W=$}else if(O){var ie=C?b.segpts.slice(0,2):[c.x+Z[0],c.y+Z[1]],ae=C?b.segpts.slice(b.segpts.length-2):[l.x+ce[0],l.y+ce[1]];U=ae,W=ie}if(q==="inside-to-node")a=[c.x,c.y];else if(j.units)a=this.manualEndptToPx(u,j);else if(q==="outside-to-line")a=b.tgtIntn;else if(q==="outside-to-node"||q==="outside-to-node-or-label"?H=U:(q==="outside-to-line"||q==="outside-to-line-or-label")&&(H=[l.x,l.y]),a=o.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),H[0],H[1],0,B,m),q==="outside-to-node-or-label"||q==="outside-to-line-or-label"){var le=u._private.rscratch,te=le.labelWidth,ee=le.labelHeight,re=le.labelX,he=le.labelY,ve=te/2,_e=ee/2,Oe=u.pstyle("text-valign").value;Oe==="top"?he-=_e:Oe==="bottom"&&(he+=_e);var Pe=u.pstyle("text-halign").value;Pe==="left"?re-=ve:Pe==="right"&&(re+=ve);var me=Xp(H[0],H[1],[re-ve,he-_e,re+ve,he-_e,re+ve,he+_e,re-ve,he+_e],c.x,c.y);if(me.length>0){var F=l,G=Mc(F,Uh(a)),X=Mc(F,Uh(me)),se=G;if(X<G&&(a=me,se=X),me.length>2){var pe=Mc(F,{x:me[2],y:me[3]});pe<se&&(a=[me[2],me[3]])}}}var ge=Jy(a,U,o.arrowShapes[f].spacing(r)+d),xe=Jy(a,U,o.arrowShapes[f].gap(r)+d);if(b.endX=xe[0],b.endY=xe[1],b.arrowEndX=ge[0],b.arrowEndY=ge[1],D==="inside-to-node")a=[l.x,l.y];else if(k.units)a=this.manualEndptToPx(s,k);else if(D==="outside-to-line")a=b.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?Y=W:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(Y=[c.x,c.y]),a=o.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),Y[0],Y[1],0,L,p),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var Ne=s._private.rscratch,He=Ne.labelWidth,at=Ne.labelHeight,Ze=Ne.labelX,et=Ne.labelY,Qe=He/2,Xe=at/2,ke=s.pstyle("text-valign").value;ke==="top"?et-=Xe:ke==="bottom"&&(et+=Xe);var oe=s.pstyle("text-halign").value;oe==="left"?Ze-=Qe:oe==="right"&&(Ze+=Qe);var Ee=Xp(Y[0],Y[1],[Ze-Qe,et-Xe,Ze+Qe,et-Xe,Ze+Qe,et+Xe,Ze-Qe,et+Xe],l.x,l.y);if(Ee.length>0){var Re=c,De=Mc(Re,Uh(a)),Me=Mc(Re,Uh(Ee)),it=De;if(Me<De&&(a=[Ee[0],Ee[1]],it=Me),Ee.length>2){var Fe=Mc(Re,{x:Ee[2],y:Ee[3]});Fe<it&&(a=[Ee[2],Ee[3]])}}}var ut=Jy(a,W,o.arrowShapes[h].spacing(r)+v),rt=Jy(a,W,o.arrowShapes[h].gap(r)+v);b.startX=rt[0],b.startY=rt[1],b.arrowStartX=ut[0],b.arrowStartY=ut[1],A&&(!ot(b.startX)||!ot(b.startY)||!ot(b.endX)||!ot(b.endY)?b.badLine=!0:b.badLine=!1)};_g.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};_g.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var f2={};function hW(r,e,t){for(var n=function(l,c,f,h){return ri(l,c,f,h)},i=e._private,o=i.rstyle.bezierPts,a=0;a<r.bezierProjPcts.length;a++){var s=r.bezierProjPcts[a];o.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}f2.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)hW(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)o.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var a=t.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};f2.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var ms={};ms.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!vl(e)){var t,n,i=r._private,o=r.width(),a=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":t=u.x-o/2-s;break;case"right":t=u.x+o/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-a/2-s;break;case"bottom":n=u.y+a/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Q3=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},J3=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Q3(n,i)},dW=function(e,t,n,i){var o=Yp(0,i-.001,1),a=Yp(0,i+.001,1),s=Hh(e,t,n,o),u=Hh(e,t,n,a);return J3(s,u)};ms.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,o={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:n.midX,y:n.midY};var a=function(f,h,d){Ws(t.rscratch,f,h,d),Ws(t.rstyle,f,h,d)};a("labelX",null,e.x),a("labelY",null,e.y);var s=Q3(n.midDispX,n.midDispY);a("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},p={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:d,p1:v,p2:p,startDist:0,length:0,segments:[]})}var m=t.rstyle.bezierPts,y=i.bezierProjPcts.length;function b(E,O,C,A,R){var k=Xc(O,C),D=E.segments[E.segments.length-1],L={p0:O,p1:C,t0:A,t1:R,startDist:D?D.startDist+D.length:0,length:k};E.segments.push(L),E.length+=k}for(var g=0;g<f.length;g++){var _=f[g],w=f[g-1];w&&(_.startDist=w.startDist+w.length),b(_,_.p0,m[g*y],0,i.bezierProjPcts[0]);for(var x=0;x<y-1;x++)b(_,m[g*y+x],m[g*y+x+1],i.bezierProjPcts[x],i.bezierProjPcts[x+1]);b(_,m[g*y+y-1],_.p2,i.bezierProjPcts[y-1],1)}return u.cache=f},l=function(f){var h,d=f==="source";if(o[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),m,y=0,b=0,g=0;g<p.length;g++){for(var _=p[d?g:p.length-1-g],w=0;w<_.segments.length;w++){var x=_.segments[d?w:_.segments.length-1-w],E=g===p.length-1&&w===_.segments.length-1;if(y=b,b+=x.length,b>=v||E){m={cp:_,segment:x};break}}if(m)break}var O=m.cp,C=m.segment,A=(v-y)/C.length,R=C.t1-C.t0,k=d?C.t0+R*A:C.t1-R*A;k=Yp(0,k,1),e=Hh(O.p0,O.p1,O.p2,k),h=dW(O.p0,O.p1,O.p2,k);break}case"straight":case"segments":case"haystack":{for(var D=0,L,j,q,B,U=n.allpts.length,W=0;W+3<U&&(d?(q={x:n.allpts[W],y:n.allpts[W+1]},B={x:n.allpts[W+2],y:n.allpts[W+3]}):(q={x:n.allpts[U-2-W],y:n.allpts[U-1-W]},B={x:n.allpts[U-4-W],y:n.allpts[U-3-W]}),L=Xc(q,B),j=D,D+=L,!(D>=v));W+=2);var H=v-j,Y=H/L;Y=Yp(0,Y,1),e=L9(q,B,Y),h=J3(q,B);break}}a("labelX",f,e.x),a("labelY",f,e.y),a("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(r)}};ms.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};ms.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=Yc(n,r._private.labelDimsKey);if(fo(t.rscratch,"prefixedLabelDimsKey",e)!==i){Ws(t.rscratch,"prefixedLabelDimsKey",e,i);var o=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=fo(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=o.height/l,f=c*a,h=o.width,d=o.height+(l-1)*(a-1)*c;Ws(t.rstyle,"labelWidth",e,h),Ws(t.rscratch,"labelWidth",e,h),Ws(t.rstyle,"labelHeight",e,d),Ws(t.rscratch,"labelHeight",e,d),Ws(t.rscratch,"labelLineHeight",e,f)}};ms.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,o=r.pstyle("text-transform").value,a=function(ce,$){return $?(Ws(t.rscratch,ce,e,$),$):fo(t.rscratch,ce,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="",c=i.split(`
`),f=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],p=/[\s\u200b]+|$/g,m=0;m<c.length;m++){var y=c[m],b=this.calculateLabelDimensions(r,y),g=b.width;if(d){var _=y.split("").join(l);y=_}if(g>f){var w=y.matchAll(p),x="",E=0,O=po(w),C;try{for(O.s();!(C=O.n()).done;){var A=C.value,R=A[0],k=y.substring(E,A.index);E=A.index+R.length;var D=x.length===0?k:x+k+R,L=this.calculateLabelDimensions(r,D),j=L.width;j<=f?x+=k+R:(x&&v.push(x),x=k+R)}}catch(Z){O.e(Z)}finally{O.f()}x.match(/^[\s\u200b]+$/)||v.push(x)}else v.push(y)}a("labelWrapCachedLines",v),i=a("labelWrapCachedText",v.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var q=r.pstyle("text-max-width").pfValue,B="",U="",W=!1;if(this.calculateLabelDimensions(r,i).width<q)return i;for(var H=0;H<i.length;H++){var Y=this.calculateLabelDimensions(r,B+i[H]+U).width;if(Y>q)break;B+=i[H],H===i.length-1&&(W=!0)}return W||(B+=U),B}return i};ms.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};ms.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,o=0,a=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}f.font="".concat(a," ").concat(l," ").concat(s,"px ").concat(u);for(var d=0,v=0,p=e.split(`
`),m=0;m<p.length;m++){var y=p[m],b=f.measureText(y),g=Math.ceil(b.width),_=s;d=Math.max(g,d),v+=_}return d+=o,v+=o,{width:d,height:v}};ms.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),o=e?e+"-":"",a=r.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:a.pfValue};ms.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var e4={},ZR=28,QR=!1;e4.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<ZR||r.height()<ZR))return QR||(Nr("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),QR=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var ab={};ab.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(a){var s=a.target;n(s)}).on("style.* background.*",function(a){var s=a.target;n(s,!1)});var i=function(a){if(a){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var h=s[f];h(a,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};ab.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};ab.recalculateRenderedStyle=function(r,e){var t=function(_){return _._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<r.length;o++){var a=r[o],s=a._private,u=s.rstyle;a.isEdge()&&(!t(a.source())||!t(a.target()))&&(u.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(g){return!g._private.rstyle.clean&&g.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):n.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,h=f.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],m=p._private,y=m.rstyle,b=m.rscratch;y.srcX=b.arrowStartX,y.srcY=b.arrowStartY,y.tgtX=b.arrowEndX,y.tgtY=b.arrowEndY,y.midX=b.midX,y.midY=b.midY,y.labelAngle=b.labelAngle,y.sourceLabelAngle=b.sourceLabelAngle,y.targetLabelAngle=b.targetLabelAngle}}}};var sb={};sb.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};sb.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};sb.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(L3),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var t4={};[nf,O0,ki,_g,f2,ms,e4,ab,sb].forEach(function(r){jt(t4,r)});var r4={};r4.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},o=i[r];if(o)return o.image.complete||o.image.addEventListener("load",t),o.image;o=i[r]=i[r]||{};var a=o.image=new Image;a.addEventListener("load",t),a.addEventListener("error",function(){a.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=r,a};var gd={};gd.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(r);return u.on.apply(u,i)};gd.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||Sz(r);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:a,addEventListener:a,addListener:a,bind:a}};gd.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};gd.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};gd.load=function(){var r=this,e=r.cy.window(),t=function(oe){return oe.selected()},n=function(oe){var Ee=oe.getRootNode();if(Ee&&Ee.nodeType===11&&Ee.host!==void 0)return Ee},i=function(oe,Ee,Re,De){oe==null&&(oe=r.cy);for(var Me=0;Me<Ee.length;Me++){var it=Ee[Me];oe.emit({originalEvent:Re,type:it,position:De})}},o=function(oe){return oe.shiftKey||oe.metaKey||oe.ctrlKey},a=function(oe,Ee){var Re=!0;if(r.cy.hasCompoundNodes()&&oe&&oe.pannable())for(var De=0;Ee&&De<Ee.length;De++){var oe=Ee[De];if(oe.isNode()&&oe.isParent()&&!oe.pannable()){Re=!1;break}}else Re=!0;return Re},s=function(oe){oe[0]._private.grabbed=!0},u=function(oe){oe[0]._private.grabbed=!1},l=function(oe){oe[0]._private.rscratch.inDragLayer=!0},c=function(oe){oe[0]._private.rscratch.inDragLayer=!1},f=function(oe){oe[0]._private.rscratch.isGrabTarget=!0},h=function(oe){oe[0]._private.rscratch.isGrabTarget=!1},d=function(oe,Ee){var Re=Ee.addToList,De=Re.has(oe);!De&&oe.grabbable()&&!oe.locked()&&(Re.merge(oe),s(oe))},v=function(oe,Ee){if(oe.cy().hasCompoundNodes()&&!(Ee.inDragLayer==null&&Ee.addToList==null)){var Re=oe.descendants();Ee.inDragLayer&&(Re.forEach(l),Re.connectedEdges().forEach(l)),Ee.addToList&&d(Re,Ee)}},p=function(oe,Ee){Ee=Ee||{};var Re=oe.cy().hasCompoundNodes();Ee.inDragLayer&&(oe.forEach(l),oe.neighborhood().stdFilter(function(De){return!Re||De.isEdge()}).forEach(l)),Ee.addToList&&oe.forEach(function(De){d(De,Ee)}),v(oe,Ee),b(oe,{inDragLayer:Ee.inDragLayer}),r.updateCachedGrabbedEles()},m=p,y=function(oe){oe&&(r.getCachedZSortedEles().forEach(function(Ee){u(Ee),c(Ee),h(Ee)}),r.updateCachedGrabbedEles())},b=function(oe,Ee){if(!(Ee.inDragLayer==null&&Ee.addToList==null)&&oe.cy().hasCompoundNodes()){var Re=oe.ancestors().orphans();if(!Re.same(oe)){var De=Re.descendants().spawnSelf().merge(Re).unmerge(oe).unmerge(oe.descendants()),Me=De.connectedEdges();Ee.inDragLayer&&(Me.forEach(l),De.forEach(l)),Ee.addToList&&De.forEach(function(it){d(it,Ee)})}}},g=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},_=typeof MutationObserver<"u",w=typeof ResizeObserver<"u";_?(r.removeObserver=new MutationObserver(function(ke){for(var oe=0;oe<ke.length;oe++){var Ee=ke[oe],Re=Ee.removedNodes;if(Re)for(var De=0;De<Re.length;De++){var Me=Re[De];if(Me===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(ke){r.destroy()});var x=gg(function(){r.cy.resize()},100);_&&(r.styleObserver=new MutationObserver(x),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",x),w&&(r.resizeObserver=new ResizeObserver(x),r.resizeObserver.observe(r.container));var E=function(oe,Ee){for(;oe!=null;)Ee(oe),oe=oe.parentNode},O=function(){r.invalidateContainerClientCoordsCache()};E(r.container,function(ke){r.registerBinding(ke,"transitionend",O),r.registerBinding(ke,"animationend",O),r.registerBinding(ke,"scroll",O)}),r.registerBinding(r.container,"contextmenu",function(ke){ke.preventDefault()});var C=function(){return r.selection[4]!==0},A=function(oe){for(var Ee=r.findContainerClientCoords(),Re=Ee[0],De=Ee[1],Me=Ee[2],it=Ee[3],Fe=oe.touches?oe.touches:[oe],ut=!1,rt=0;rt<Fe.length;rt++){var ft=Fe[rt];if(Re<=ft.clientX&&ft.clientX<=Re+Me&&De<=ft.clientY&&ft.clientY<=De+it){ut=!0;break}}if(!ut)return!1;for(var xt=r.container,yt=oe.target,nt=yt.parentNode,It=!1;nt;){if(nt===xt){It=!0;break}nt=nt.parentNode}return!!It};r.registerBinding(r.container,"mousedown",function(oe){if(A(oe)&&!(r.hoverData.which===1&&oe.which!==1)){oe.preventDefault(),g(),r.hoverData.capture=!0,r.hoverData.which=oe.which;var Ee=r.cy,Re=[oe.clientX,oe.clientY],De=r.projectIntoViewport(Re[0],Re[1]),Me=r.selection,it=r.findNearestElements(De[0],De[1],!0,!1),Fe=it[0],ut=r.dragData.possibleDragElements;r.hoverData.mdownPos=De,r.hoverData.mdownGPos=Re;var rt=function(St){return{originalEvent:oe,type:St,position:{x:De[0],y:De[1]}}},ft=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var St=r.hoverData.down;St?St.emit(rt("taphold")):Ee.emit(rt("taphold"))}},r.tapholdDuration)};if(oe.which==3){r.hoverData.cxtStarted=!0;var xt={originalEvent:oe,type:"cxttapstart",position:{x:De[0],y:De[1]}};Fe?(Fe.activate(),Fe.emit(xt),r.hoverData.down=Fe):Ee.emit(xt),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(oe.which==1){Fe&&Fe.activate();{if(Fe!=null&&r.nodeIsGrabbable(Fe)){var yt=function(St){St.emit(rt("grab"))};if(f(Fe),!Fe.selected())ut=r.dragData.possibleDragElements=Ee.collection(),m(Fe,{addToList:ut}),Fe.emit(rt("grabon")).emit(rt("grab"));else{ut=r.dragData.possibleDragElements=Ee.collection();var nt=Ee.$(function(It){return It.isNode()&&It.selected()&&r.nodeIsGrabbable(It)});p(nt,{addToList:ut}),Fe.emit(rt("grabon")),nt.forEach(yt)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Fe,r.hoverData.downs=it,r.hoverData.downTime=new Date().getTime()}i(Fe,["mousedown","tapstart","vmousedown"],oe,{x:De[0],y:De[1]}),Fe==null?(Me[4]=1,r.data.bgActivePosistion={x:De[0],y:De[1]},r.redrawHint("select",!0),r.redraw()):Fe.pannable()&&(Me[4]=1),ft()}Me[0]=Me[2]=De[0],Me[1]=Me[3]=De[1]}},!1);var R=n(r.container);r.registerBinding([e,R],"mousemove",function(oe){var Ee=r.hoverData.capture;if(!(!Ee&&!A(oe))){var Re=!1,De=r.cy,Me=De.zoom(),it=[oe.clientX,oe.clientY],Fe=r.projectIntoViewport(it[0],it[1]),ut=r.hoverData.mdownPos,rt=r.hoverData.mdownGPos,ft=r.selection,xt=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(xt=r.findNearestElement(Fe[0],Fe[1],!0,!1));var yt=r.hoverData.last,nt=r.hoverData.down,It=[Fe[0]-ft[2],Fe[1]-ft[3]],St=r.dragData.possibleDragElements,or;if(rt){var rr=it[0]-rt[0],Gt=rr*rr,Pt=it[1]-rt[1],ur=Pt*Pt,nr=Gt+ur;r.hoverData.isOverThresholdDrag=or=nr>=r.desktopTapThreshold2}var Ir=o(oe);or&&(r.hoverData.tapholdCancelled=!0);var Kr=function(){var Dn=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Dn.length===0?(Dn.push(It[0]),Dn.push(It[1])):(Dn[0]+=It[0],Dn[1]+=It[1])};Re=!0,i(xt,["mousemove","vmousemove","tapdrag"],oe,{x:Fe[0],y:Fe[1]});var Dt=function(Dn){return{originalEvent:oe,type:Dn,position:{x:Fe[0],y:Fe[1]}}},fr=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||De.emit(Dt("boxstart")),ft[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(or){var Br=Dt("cxtdrag");nt?nt.emit(Br):De.emit(Br),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||xt!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(Dt("cxtdragout")),r.hoverData.cxtOver=xt,xt&&xt.emit(Dt("cxtdragover")))}}else if(r.hoverData.dragging){if(Re=!0,De.panningEnabled()&&De.userPanningEnabled()){var Wr;if(r.hoverData.justStartedPan){var yn=r.hoverData.mdownPos;Wr={x:(Fe[0]-yn[0])*Me,y:(Fe[1]-yn[1])*Me},r.hoverData.justStartedPan=!1}else Wr={x:It[0]*Me,y:It[1]*Me};De.panBy(Wr),De.emit(Dt("dragpan")),r.hoverData.dragged=!0}Fe=r.projectIntoViewport(oe.clientX,oe.clientY)}else if(ft[4]==1&&(nt==null||nt.pannable())){if(or){if(!r.hoverData.dragging&&De.boxSelectionEnabled()&&(Ir||!De.panningEnabled()||!De.userPanningEnabled()))fr();else if(!r.hoverData.selecting&&De.panningEnabled()&&De.userPanningEnabled()){var cn=a(nt,r.hoverData.downs);cn&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,ft[4]=0,r.data.bgActivePosistion=Uh(ut),r.redrawHint("select",!0),r.redraw())}nt&&nt.pannable()&&nt.active()&&nt.unactivate()}}else{if(nt&&nt.pannable()&&nt.active()&&nt.unactivate(),(!nt||!nt.grabbed())&&xt!=yt&&(yt&&i(yt,["mouseout","tapdragout"],oe,{x:Fe[0],y:Fe[1]}),xt&&i(xt,["mouseover","tapdragover"],oe,{x:Fe[0],y:Fe[1]}),r.hoverData.last=xt),nt)if(or){if(De.boxSelectionEnabled()&&Ir)nt&&nt.grabbed()&&(y(St),nt.emit(Dt("freeon")),St.emit(Dt("free")),r.dragData.didDrag&&(nt.emit(Dt("dragfreeon")),St.emit(Dt("dragfree")))),fr();else if(nt&&nt.grabbed()&&r.nodeIsDraggable(nt)){var mr=!r.dragData.didDrag;mr&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||p(St,{inDragLayer:!0});var Sr={x:0,y:0};if(ot(It[0])&&ot(It[1])&&(Sr.x+=It[0],Sr.y+=It[1],mr)){var gr=r.hoverData.dragDelta;gr&&ot(gr[0])&&ot(gr[1])&&(Sr.x+=gr[0],Sr.y+=gr[1])}r.hoverData.draggingEles=!0,St.silentShift(Sr).emit(Dt("position")).emit(Dt("drag")),r.redrawHint("drag",!0),r.redraw()}}else Kr();Re=!0}if(ft[2]=Fe[0],ft[3]=Fe[1],Re)return oe.stopPropagation&&oe.stopPropagation(),oe.preventDefault&&oe.preventDefault(),!1}},!1);var k,D,L;r.registerBinding(e,"mouseup",function(oe){if(!(r.hoverData.which===1&&oe.which!==1&&r.hoverData.capture)){var Ee=r.hoverData.capture;if(Ee){r.hoverData.capture=!1;var Re=r.cy,De=r.projectIntoViewport(oe.clientX,oe.clientY),Me=r.selection,it=r.findNearestElement(De[0],De[1],!0,!1),Fe=r.dragData.possibleDragElements,ut=r.hoverData.down,rt=o(oe);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,ut&&ut.unactivate();var ft=function(rr){return{originalEvent:oe,type:rr,position:{x:De[0],y:De[1]}}};if(r.hoverData.which===3){var xt=ft("cxttapend");if(ut?ut.emit(xt):Re.emit(xt),!r.hoverData.cxtDragged){var yt=ft("cxttap");ut?ut.emit(yt):Re.emit(yt)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(it,["mouseup","tapend","vmouseup"],oe,{x:De[0],y:De[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(ut,["click","tap","vclick"],oe,{x:De[0],y:De[1]}),D=!1,oe.timeStamp-L<=Re.multiClickDebounceTime()?(k&&clearTimeout(k),D=!0,L=null,i(ut,["dblclick","dbltap","vdblclick"],oe,{x:De[0],y:De[1]})):(k=setTimeout(function(){D||i(ut,["oneclick","onetap","voneclick"],oe,{x:De[0],y:De[1]})},Re.multiClickDebounceTime()),L=oe.timeStamp)),ut==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!o(oe)&&(Re.$(t).unselect(["tapunselect"]),Fe.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Fe=Re.collection()),it==ut&&!r.dragData.didDrag&&!r.hoverData.selecting&&it!=null&&it._private.selectable&&(r.hoverData.dragging||(Re.selectionType()==="additive"||rt?it.selected()?it.unselect(["tapunselect"]):it.select(["tapselect"]):rt||(Re.$(t).unmerge(it).unselect(["tapunselect"]),it.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var nt=Re.collection(r.getAllInBox(Me[0],Me[1],Me[2],Me[3]));r.redrawHint("select",!0),nt.length>0&&r.redrawHint("eles",!0),Re.emit(ft("boxend"));var It=function(rr){return rr.selectable()&&!rr.selected()};Re.selectionType()==="additive"||rt||Re.$(t).unmerge(nt).unselect(),nt.emit(ft("box")).stdFilter(It).select().emit(ft("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!Me[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var St=ut&&ut.grabbed();y(Fe),St&&(ut.emit(ft("freeon")),Fe.emit(ft("free")),r.dragData.didDrag&&(ut.emit(ft("dragfreeon")),Fe.emit(ft("dragfree"))))}}Me[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var j=[],q=4,B,U=1e5,W=function(oe,Ee){for(var Re=0;Re<oe.length;Re++)if(oe[Re]%Ee!==0)return!1;return!0},H=function(oe){for(var Ee=Math.abs(oe[0]),Re=1;Re<oe.length;Re++)if(Math.abs(oe[Re])!==Ee)return!1;return!0},Y=function(oe){var Ee=!1,Re=oe.deltaY;if(Re==null&&(oe.wheelDeltaY!=null?Re=oe.wheelDeltaY/4:oe.wheelDelta!=null&&(Re=oe.wheelDelta/4)),Re!==0){if(B==null)if(j.length>=q){var De=j;if(B=W(De,5),!B){var Me=Math.abs(De[0]);B=H(De)&&Me>5}if(B)for(var it=0;it<De.length;it++)U=Math.min(Math.abs(De[it]),U)}else j.push(Re),Ee=!0;else B&&(U=Math.min(Math.abs(Re),U));if(!r.scrollingPage){var Fe=r.cy,ut=Fe.zoom(),rt=Fe.pan(),ft=r.projectIntoViewport(oe.clientX,oe.clientY),xt=[ft[0]*ut+rt.x,ft[1]*ut+rt.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||C()){oe.preventDefault();return}if(Fe.panningEnabled()&&Fe.userPanningEnabled()&&Fe.zoomingEnabled()&&Fe.userZoomingEnabled()){oe.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var yt;Ee&&Math.abs(Re)>5&&(Re=ZC(Re)*5),yt=Re/-250,B&&(yt/=U,yt*=3),yt=yt*r.wheelSensitivity;var nt=oe.deltaMode===1;nt&&(yt*=33);var It=Fe.zoom()*Math.pow(10,yt);oe.type==="gesturechange"&&(It=r.gestureStartZoom*oe.scale),Fe.zoom({level:It,renderedPosition:{x:xt[0],y:xt[1]}}),Fe.emit({type:oe.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:oe,position:{x:ft[0],y:ft[1]}})}}}};r.registerBinding(r.container,"wheel",Y,!0),r.registerBinding(e,"scroll",function(oe){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(oe){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||oe.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(ke){r.hasTouchStarted||Y(ke)},!0),r.registerBinding(r.container,"mouseout",function(oe){var Ee=r.projectIntoViewport(oe.clientX,oe.clientY);r.cy.emit({originalEvent:oe,type:"mouseout",position:{x:Ee[0],y:Ee[1]}})},!1),r.registerBinding(r.container,"mouseover",function(oe){var Ee=r.projectIntoViewport(oe.clientX,oe.clientY);r.cy.emit({originalEvent:oe,type:"mouseover",position:{x:Ee[0],y:Ee[1]}})},!1);var Z,ce,$,K,ie,ae,le,te,ee,re,he,ve,_e,Oe=function(oe,Ee,Re,De){return Math.sqrt((Re-oe)*(Re-oe)+(De-Ee)*(De-Ee))},Pe=function(oe,Ee,Re,De){return(Re-oe)*(Re-oe)+(De-Ee)*(De-Ee)},me;r.registerBinding(r.container,"touchstart",me=function(oe){if(r.hasTouchStarted=!0,!!A(oe)){g(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var Ee=r.cy,Re=r.touchData.now,De=r.touchData.earlier;if(oe.touches[0]){var Me=r.projectIntoViewport(oe.touches[0].clientX,oe.touches[0].clientY);Re[0]=Me[0],Re[1]=Me[1]}if(oe.touches[1]){var Me=r.projectIntoViewport(oe.touches[1].clientX,oe.touches[1].clientY);Re[2]=Me[0],Re[3]=Me[1]}if(oe.touches[2]){var Me=r.projectIntoViewport(oe.touches[2].clientX,oe.touches[2].clientY);Re[4]=Me[0],Re[5]=Me[1]}var it=function(Ir){return{originalEvent:oe,type:Ir,position:{x:Re[0],y:Re[1]}}};if(oe.touches[1]){r.touchData.singleTouchMoved=!0,y(r.dragData.touchDragEles);var Fe=r.findContainerClientCoords();ee=Fe[0],re=Fe[1],he=Fe[2],ve=Fe[3],Z=oe.touches[0].clientX-ee,ce=oe.touches[0].clientY-re,$=oe.touches[1].clientX-ee,K=oe.touches[1].clientY-re,_e=0<=Z&&Z<=he&&0<=$&&$<=he&&0<=ce&&ce<=ve&&0<=K&&K<=ve;var ut=Ee.pan(),rt=Ee.zoom();ie=Oe(Z,ce,$,K),ae=Pe(Z,ce,$,K),le=[(Z+$)/2,(ce+K)/2],te=[(le[0]-ut.x)/rt,(le[1]-ut.y)/rt];var ft=200,xt=ft*ft;if(ae<xt&&!oe.touches[2]){var yt=r.findNearestElement(Re[0],Re[1],!0,!0),nt=r.findNearestElement(Re[2],Re[3],!0,!0);yt&&yt.isNode()?(yt.activate().emit(it("cxttapstart")),r.touchData.start=yt):nt&&nt.isNode()?(nt.activate().emit(it("cxttapstart")),r.touchData.start=nt):Ee.emit(it("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(oe.touches[2])Ee.boxSelectionEnabled()&&oe.preventDefault();else if(!oe.touches[1]){if(oe.touches[0]){var It=r.findNearestElements(Re[0],Re[1],!0,!0),St=It[0];if(St!=null&&(St.activate(),r.touchData.start=St,r.touchData.starts=It,r.nodeIsGrabbable(St))){var or=r.dragData.touchDragEles=Ee.collection(),rr=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),St.selected()?(rr=Ee.$(function(nr){return nr.selected()&&r.nodeIsGrabbable(nr)}),p(rr,{addToList:or})):m(St,{addToList:or}),f(St),St.emit(it("grabon")),rr?rr.forEach(function(nr){nr.emit(it("grab"))}):St.emit(it("grab"))}i(St,["touchstart","tapstart","vmousedown"],oe,{x:Re[0],y:Re[1]}),St==null&&(r.data.bgActivePosistion={x:Me[0],y:Me[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],oe,{x:Re[0],y:Re[1]})},r.tapholdDuration)}}if(oe.touches.length>=1){for(var Gt=r.touchData.startPosition=[null,null,null,null,null,null],Pt=0;Pt<Re.length;Pt++)Gt[Pt]=De[Pt]=Re[Pt];var ur=oe.touches[0];r.touchData.startGPosition=[ur.clientX,ur.clientY]}}},!1);var F;r.registerBinding(e,"touchmove",F=function(oe){var Ee=r.touchData.capture;if(!(!Ee&&!A(oe))){var Re=r.selection,De=r.cy,Me=r.touchData.now,it=r.touchData.earlier,Fe=De.zoom();if(oe.touches[0]){var ut=r.projectIntoViewport(oe.touches[0].clientX,oe.touches[0].clientY);Me[0]=ut[0],Me[1]=ut[1]}if(oe.touches[1]){var ut=r.projectIntoViewport(oe.touches[1].clientX,oe.touches[1].clientY);Me[2]=ut[0],Me[3]=ut[1]}if(oe.touches[2]){var ut=r.projectIntoViewport(oe.touches[2].clientX,oe.touches[2].clientY);Me[4]=ut[0],Me[5]=ut[1]}var rt=function(Sn){return{originalEvent:oe,type:Sn,position:{x:Me[0],y:Me[1]}}},ft=r.touchData.startGPosition,xt;if(Ee&&oe.touches[0]&&ft){for(var yt=[],nt=0;nt<Me.length;nt++)yt[nt]=Me[nt]-it[nt];var It=oe.touches[0].clientX-ft[0],St=It*It,or=oe.touches[0].clientY-ft[1],rr=or*or,Gt=St+rr;xt=Gt>=r.touchTapThreshold2}if(Ee&&r.touchData.cxt){oe.preventDefault();var Pt=oe.touches[0].clientX-ee,ur=oe.touches[0].clientY-re,nr=oe.touches[1].clientX-ee,Ir=oe.touches[1].clientY-re,Kr=Pe(Pt,ur,nr,Ir),Dt=Kr/ae,fr=150,Br=fr*fr,Wr=1.5,yn=Wr*Wr;if(Dt>=yn||Kr>=Br){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var cn=rt("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(cn),r.touchData.start=null):De.emit(cn)}}if(Ee&&r.touchData.cxt){var cn=rt("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(cn):De.emit(cn),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var mr=r.findNearestElement(Me[0],Me[1],!0,!0);(!r.touchData.cxtOver||mr!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit(rt("cxtdragout")),r.touchData.cxtOver=mr,mr&&mr.emit(rt("cxtdragover")))}else if(Ee&&oe.touches[2]&&De.boxSelectionEnabled())oe.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||De.emit(rt("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,Re[4]=1,!Re||Re.length===0||Re[0]===void 0?(Re[0]=(Me[0]+Me[2]+Me[4])/3,Re[1]=(Me[1]+Me[3]+Me[5])/3,Re[2]=(Me[0]+Me[2]+Me[4])/3+1,Re[3]=(Me[1]+Me[3]+Me[5])/3+1):(Re[2]=(Me[0]+Me[2]+Me[4])/3,Re[3]=(Me[1]+Me[3]+Me[5])/3),r.redrawHint("select",!0),r.redraw();else if(Ee&&oe.touches[1]&&!r.touchData.didSelect&&De.zoomingEnabled()&&De.panningEnabled()&&De.userZoomingEnabled()&&De.userPanningEnabled()){oe.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Sr=r.dragData.touchDragEles;if(Sr){r.redrawHint("drag",!0);for(var gr=0;gr<Sr.length;gr++){var wi=Sr[gr]._private;wi.grabbed=!1,wi.rscratch.inDragLayer=!1}}var Dn=r.touchData.start,Pt=oe.touches[0].clientX-ee,ur=oe.touches[0].clientY-re,nr=oe.touches[1].clientX-ee,Ir=oe.touches[1].clientY-re,Ma=Oe(Pt,ur,nr,Ir),ws=Ma/ie;if(_e){var No=Pt-Z,ca=ur-ce,jo=nr-$,Es=Ir-K,Os=(No+jo)/2,xs=(ca+Es)/2,Zi=De.zoom(),hr=Zi*ws,ar=De.pan(),La=te[0]*Zi+ar.x,Na=te[1]*Zi+ar.y,Al={x:-hr/Zi*(La-ar.x-Os)+La,y:-hr/Zi*(Na-ar.y-xs)+Na};if(Dn&&Dn.active()){var Sr=r.dragData.touchDragEles;y(Sr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Dn.unactivate().emit(rt("freeon")),Sr.emit(rt("free")),r.dragData.didDrag&&(Dn.emit(rt("dragfreeon")),Sr.emit(rt("dragfree")))}De.viewport({zoom:hr,pan:Al,cancelOnFailedZoom:!0}),De.emit(rt("pinchzoom")),ie=Ma,Z=Pt,ce=ur,$=nr,K=Ir,r.pinching=!0}if(oe.touches[0]){var ut=r.projectIntoViewport(oe.touches[0].clientX,oe.touches[0].clientY);Me[0]=ut[0],Me[1]=ut[1]}if(oe.touches[1]){var ut=r.projectIntoViewport(oe.touches[1].clientX,oe.touches[1].clientY);Me[2]=ut[0],Me[3]=ut[1]}if(oe.touches[2]){var ut=r.projectIntoViewport(oe.touches[2].clientX,oe.touches[2].clientY);Me[4]=ut[0],Me[5]=ut[1]}}else if(oe.touches[0]&&!r.touchData.didSelect){var Yn=r.touchData.start,ja=r.touchData.last,mr;if(!r.hoverData.draggingEles&&!r.swipePanning&&(mr=r.findNearestElement(Me[0],Me[1],!0,!0)),Ee&&Yn!=null&&oe.preventDefault(),Ee&&Yn!=null&&r.nodeIsDraggable(Yn))if(xt){var Sr=r.dragData.touchDragEles,Zr=!r.dragData.didDrag;Zr&&p(Sr,{inDragLayer:!0}),r.dragData.didDrag=!0;var mo={x:0,y:0};if(ot(yt[0])&&ot(yt[1])&&(mo.x+=yt[0],mo.y+=yt[1],Zr)){r.redrawHint("eles",!0);var fn=r.touchData.dragDelta;fn&&ot(fn[0])&&ot(fn[1])&&(mo.x+=fn[0],mo.y+=fn[1])}r.hoverData.draggingEles=!0,Sr.silentShift(mo).emit(rt("position")).emit(rt("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==it[0]&&r.touchData.startPosition[1]==it[1]&&r.redrawHint("eles",!0),r.redraw()}else{var fn=r.touchData.dragDelta=r.touchData.dragDelta||[];fn.length===0?(fn.push(yt[0]),fn.push(yt[1])):(fn[0]+=yt[0],fn[1]+=yt[1])}if(i(Yn||mr,["touchmove","tapdrag","vmousemove"],oe,{x:Me[0],y:Me[1]}),(!Yn||!Yn.grabbed())&&mr!=ja&&(ja&&ja.emit(rt("tapdragout")),mr&&mr.emit(rt("tapdragover"))),r.touchData.last=mr,Ee)for(var gr=0;gr<Me.length;gr++)Me[gr]&&r.touchData.startPosition[gr]&&xt&&(r.touchData.singleTouchMoved=!0);if(Ee&&(Yn==null||Yn.pannable())&&De.panningEnabled()&&De.userPanningEnabled()){var su=a(Yn,r.touchData.starts);su&&(oe.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=Uh(r.touchData.startPosition)),r.swipePanning?(De.panBy({x:yt[0]*Fe,y:yt[1]*Fe}),De.emit(rt("dragpan"))):xt&&(r.swipePanning=!0,De.panBy({x:It*Fe,y:or*Fe}),De.emit(rt("dragpan")),Yn&&(Yn.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var ut=r.projectIntoViewport(oe.touches[0].clientX,oe.touches[0].clientY);Me[0]=ut[0],Me[1]=ut[1]}}for(var nt=0;nt<Me.length;nt++)it[nt]=Me[nt];Ee&&oe.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var G;r.registerBinding(e,"touchcancel",G=function(oe){var Ee=r.touchData.start;r.touchData.capture=!1,Ee&&Ee.unactivate()});var X,se,pe,ge;if(r.registerBinding(e,"touchend",X=function(oe){var Ee=r.touchData.start,Re=r.touchData.capture;if(Re)oe.touches.length===0&&(r.touchData.capture=!1),oe.preventDefault();else return;var De=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var Me=r.cy,it=Me.zoom(),Fe=r.touchData.now,ut=r.touchData.earlier;if(oe.touches[0]){var rt=r.projectIntoViewport(oe.touches[0].clientX,oe.touches[0].clientY);Fe[0]=rt[0],Fe[1]=rt[1]}if(oe.touches[1]){var rt=r.projectIntoViewport(oe.touches[1].clientX,oe.touches[1].clientY);Fe[2]=rt[0],Fe[3]=rt[1]}if(oe.touches[2]){var rt=r.projectIntoViewport(oe.touches[2].clientX,oe.touches[2].clientY);Fe[4]=rt[0],Fe[5]=rt[1]}var ft=function(Br){return{originalEvent:oe,type:Br,position:{x:Fe[0],y:Fe[1]}}};Ee&&Ee.unactivate();var xt;if(r.touchData.cxt){if(xt=ft("cxttapend"),Ee?Ee.emit(xt):Me.emit(xt),!r.touchData.cxtDragged){var yt=ft("cxttap");Ee?Ee.emit(yt):Me.emit(yt)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!oe.touches[2]&&Me.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var nt=Me.collection(r.getAllInBox(De[0],De[1],De[2],De[3]));De[0]=void 0,De[1]=void 0,De[2]=void 0,De[3]=void 0,De[4]=0,r.redrawHint("select",!0),Me.emit(ft("boxend"));var It=function(Br){return Br.selectable()&&!Br.selected()};nt.emit(ft("box")).stdFilter(It).select().emit(ft("boxselect")),nt.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(Ee!=null&&Ee.unactivate(),oe.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!oe.touches[1]){if(!oe.touches[0]){if(!oe.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var St=r.dragData.touchDragEles;if(Ee!=null){var or=Ee._private.grabbed;y(St),r.redrawHint("drag",!0),r.redrawHint("eles",!0),or&&(Ee.emit(ft("freeon")),St.emit(ft("free")),r.dragData.didDrag&&(Ee.emit(ft("dragfreeon")),St.emit(ft("dragfree")))),i(Ee,["touchend","tapend","vmouseup","tapdragout"],oe,{x:Fe[0],y:Fe[1]}),Ee.unactivate(),r.touchData.start=null}else{var rr=r.findNearestElement(Fe[0],Fe[1],!0,!0);i(rr,["touchend","tapend","vmouseup","tapdragout"],oe,{x:Fe[0],y:Fe[1]})}var Gt=r.touchData.startPosition[0]-Fe[0],Pt=Gt*Gt,ur=r.touchData.startPosition[1]-Fe[1],nr=ur*ur,Ir=Pt+nr,Kr=Ir*it*it;r.touchData.singleTouchMoved||(Ee||Me.$(":selected").unselect(["tapunselect"]),i(Ee,["tap","vclick"],oe,{x:Fe[0],y:Fe[1]}),se=!1,oe.timeStamp-ge<=Me.multiClickDebounceTime()?(pe&&clearTimeout(pe),se=!0,ge=null,i(Ee,["dbltap","vdblclick"],oe,{x:Fe[0],y:Fe[1]})):(pe=setTimeout(function(){se||i(Ee,["onetap","voneclick"],oe,{x:Fe[0],y:Fe[1]})},Me.multiClickDebounceTime()),ge=oe.timeStamp)),Ee!=null&&!r.dragData.didDrag&&Ee._private.selectable&&Kr<r.touchTapThreshold2&&!r.pinching&&(Me.selectionType()==="single"?(Me.$(t).unmerge(Ee).unselect(["tapunselect"]),Ee.select(["tapselect"])):Ee.selected()?Ee.unselect(["tapunselect"]):Ee.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Dt=0;Dt<Fe.length;Dt++)ut[Dt]=Fe[Dt];r.dragData.didDrag=!1,oe.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),oe.touches.length<2&&(oe.touches.length===1&&(r.touchData.startGPosition=[oe.touches[0].clientX,oe.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var xe=[],Ne=function(oe){return{clientX:oe.clientX,clientY:oe.clientY,force:1,identifier:oe.pointerId,pageX:oe.pageX,pageY:oe.pageY,radiusX:oe.width/2,radiusY:oe.height/2,screenX:oe.screenX,screenY:oe.screenY,target:oe.target}},He=function(oe){return{event:oe,touch:Ne(oe)}},at=function(oe){xe.push(He(oe))},Ze=function(oe){for(var Ee=0;Ee<xe.length;Ee++){var Re=xe[Ee];if(Re.event.pointerId===oe.pointerId){xe.splice(Ee,1);return}}},et=function(oe){var Ee=xe.filter(function(Re){return Re.event.pointerId===oe.pointerId})[0];Ee.event=oe,Ee.touch=Ne(oe)},Qe=function(oe){oe.touches=xe.map(function(Ee){return Ee.touch})},Xe=function(oe){return oe.pointerType==="mouse"||oe.pointerType===4};r.registerBinding(r.container,"pointerdown",function(ke){Xe(ke)||(ke.preventDefault(),at(ke),Qe(ke),me(ke))}),r.registerBinding(r.container,"pointerup",function(ke){Xe(ke)||(Ze(ke),Qe(ke),X(ke))}),r.registerBinding(r.container,"pointercancel",function(ke){Xe(ke)||(Ze(ke),Qe(ke),G(ke))}),r.registerBinding(r.container,"pointermove",function(ke){Xe(ke)||(ke.preventDefault(),et(ke),Qe(ke),F(ke))})}};var iu={};iu.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",n,i,o,a,s,this.points)},intersectLine:function(n,i,o,a,s,u,l,c){return Xp(s,u,this.points,n,i,o/2,a/2,l)},checkPoint:function(n,i,o,a,s,u,l,c){return tu(n,i,this.points,u,l,a,s,[0,-1],o)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,i,o,a,s,u){return q9(this.points,n,i,o,a,s)}}};iu.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){return $9(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,a,s,u){return zc(e,t,i,o,a,s,n)}}};iu.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=o/2,f=a/2;s=s==="auto"?n3(o,a):s;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+c*e[d*2],y:i+f*e[d*2+1]};var v,p,m,y,b=h.length;for(p=h[b-1],v=0;v<b;v++)m=h[v%b],y=h[(v+1)%b],u[l][v]=c2(p,m,y,s),p=m,m=y;return u[l]},draw:function(n,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(n,i,o,a,s,u,l,c,f){return Z9(s,u,this.points,n,i,o,a,l,this.getOrCreateCorners(n,i,o,a,c,f,"corners"))},checkPoint:function(n,i,o,a,s,u,l,c,f){return X9(n,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,f,"corners"))}}};iu.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Hi(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){return t3(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?gl(i,o):u,u=Math.min(l,c,u);var f=u*2;return!!(tu(e,t,this.points,a,s,i,o-f,[0,-1],n)||tu(e,t,this.points,a,s,i-f,o,[0,-1],n)||zc(e,t,f,f,a-l+u,s-c+u,n)||zc(e,t,f,f,a+l-u,s-c+u,n)||zc(e,t,f,f,a+l-u,s+c-u,n)||zc(e,t,f,f,a-l+u,s+c-u,n))}}};iu.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:JC(),points:Hi(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,null,a)},generateCutTrianglePts:function(e,t,n,i,o){var a=o==="auto"?this.cornerLength:o,s=t/2,u=e/2,l=n-u,c=n+u,f=i-s,h=i+s;return{topLeft:[l,f+a,l+a,f,l+a,f+a],topRight:[c-a,f,c,f+a,c-a,f+a],bottomRight:[c,h-a,c-a,h,c-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}},intersectLine:function(e,t,n,i,o,a,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Xp(o,a,c,e,t)},checkPoint:function(e,t,n,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(tu(e,t,this.points,a,s,i,o-2*l,[0,-1],n)||tu(e,t,this.points,a,s,i-2*l,o,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return ho(e,t,c.topLeft)||ho(e,t,c.topRight)||ho(e,t,c.bottomRight)||ho(e,t,c.bottomLeft)}}};iu.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Hi(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){var l=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),d=function(m){var y=Hh({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},l),b=Hh({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},c),g=Hh({x:m[0],y:m[1]},{x:m[2],y:m[3]},{x:m[4],y:m[5]},f);return[m[0],m[1],y.x,y.y,b.x,b.y,g.x,g.y,m[4],m[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return Xp(o,a,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,a=e/2,s=n-a,u=n+a,l=i-o,c=i+o,f=kT(e,t),h=f.heightOffset,d=f.widthOffset,v=f.ctrlPtOffsetPct*e,p={topLeft:[s,l+h,s+v,l,s+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-d,c],bottomLeft:[s+d,c,s+v,c,s,c-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,i,o,a,s,u){var l=kT(i,o),c=l.heightOffset,f=l.widthOffset;if(tu(e,t,this.points,a,s,i,o-2*c,[0,-1],n)||tu(e,t,this.points,a,s,i-2*f,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,o,a,s),d=function(O,C,A){var R=A[4],k=A[2],D=A[0],L=A[5],j=A[1],q=Math.min(R,D),B=Math.max(R,D),U=Math.min(L,j),W=Math.max(L,j);if(q<=O&&O<=B&&U<=C&&C<=W){var H=Q9(R,k,D),Y=V9(H[0],H[1],H[2],O),Z=Y.filter(function(ce){return 0<=ce&&ce<=1});if(Z.length>0)return Z[0]}return null},v=Object.keys(h),p=0;p<v.length;p++){var m=v[p],y=h[m],b=d(e,t,y);if(b!=null){var g=y[5],_=y[3],w=y[1],x=ri(g,_,w,b);if(y.isTop&&x<=t||y.isBottom&&t<=x)return!0}}return!1}}};iu.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Hi(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){var l=e-(n/2+s),c=t-(i/2+s),f=c,h=e+(n/2+s),d=rl(o,a,e,t,l,c,h,f,!1);return d.length>0?d:t3(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){u=u==="auto"?gl(i,o):u;var l=2*u;if(tu(e,t,this.points,a,s,i,o-l,[0,-1],n)||tu(e,t,this.points,a,s,i-l,o,[0,-1],n))return!0;var c=i/2+2*n,f=o/2+2*n,h=[a-c,s-f,a-c,s,a+c,s,a+c,s-f];return!!(ho(e,t,h)||zc(e,t,l,l,a+i/2-u,s+o/2-u,n)||zc(e,t,l,l,a-i/2+u,s+o/2-u,n))}}};iu.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Hi(3,0)),this.generateRoundPolygon("round-triangle",Hi(3,0)),this.generatePolygon("rectangle",Hi(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Hi(5,0)),this.generateRoundPolygon("round-pentagon",Hi(5,0)),this.generatePolygon("hexagon",Hi(6,0)),this.generateRoundPolygon("round-hexagon",Hi(6,0)),this.generatePolygon("heptagon",Hi(7,0)),this.generateRoundPolygon("round-heptagon",Hi(7,0)),this.generatePolygon("octagon",Hi(8,0)),this.generateRoundPolygon("round-octagon",Hi(8,0));var n=new Array(20);{var i=IT(5,0),o=IT(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=o[s*2],n[s*4+3]=o[s*2+1]}n=r3(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var wg={};wg.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};wg.redraw=function(r){r=r||Z5();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};wg.beforeRender=function(r,e){if(!this.destroyed){e==null&&ln("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var JR=function(e,t,n){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(t,n)};wg.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){JR(r,!0,i);var o=eu();r.render(r.renderOptions);var a=r.lastDrawTime=eu();r.averageRedrawTime===void 0&&(r.averageRedrawTime=a-o),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=a-o;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else JR(r,!1,i);r.skipFrame=!1,p0(t)}};p0(t)}};var vW=function(e){this.init(e)},n4=vW,yd=n4.prototype;yd.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];yd.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Nr("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=ot(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};yd.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};yd.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};yd.isHeadless=function(){return!1};[l2,t4,r4,gd,iu,wg].forEach(function(r){jt(yd,r)});var ow=1e3/60,i4={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=gg(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var f=eu(),h=i.averageRedrawTime,d=i.lastRedrawTime,v=[],p=i.cy.extent(),m=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var y=eu(),b=y-f,g=y-c;if(d<ow){var _=ow-(l?h:0);if(g>=e.deqFastCost*_)break}else if(l){if(b>=e.deqCost*d||b>=e.deqAvgCost*h)break}else if(g>=e.deqNoDrawCost*ow)break;var w=e.deq(n,m,p);if(w.length>0)for(var x=0;x<w.length;x++)v.push(w[x]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,m,p)&&o())},s=e.priority||XC;i.beforeRender(a,s(n))}}}},pW=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g0;xl(this,r),this.idsByKey=new Xs,this.keyForId=new Xs,this.cachesByLvl=new Xs,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Sl(r,[{key:"getIdsFor",value:function(t){t==null&&ln("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new hd,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(o,n),this.keyForId.set(n,o)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);return i!==o}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,o=n.get(t);return o||(o=new Xs,n.set(t,o),i.push(t)),o}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),o=this.getCache(i,n);return o!=null&&this.updateKeyMappingFor(t),o}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),o=this.getCache(i,n);return o}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var o=this.getKey(t);this.setCache(o,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var o=this.doesEleInvalidateKey(t);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}])})(),eI=25,sm=50,Qm=-4,WT=3,o4=7.99,gW=8,yW=1024,mW=1024,bW=1024,_W=.2,wW=.8,EW=10,OW=.15,xW=.1,SW=.9,TW=.9,CW=100,PW=1,zh={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},AW=bi({getKey:null,doesEleInvalidateKey:g0,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:X5,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Wv=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=AW(t);jt(n,i),n.lookup=new pW(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Hn=Wv.prototype;Hn.reasons=zh;Hn.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Hn.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Hn.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new yg(function(t,n){return n.reqs-t.reqs});return e};Hn.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Hn.getElement=function(r,e,t,n,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!o.allowEdgeTxrCaching&&r.isEdge()||!o.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(KC(s*t))),n<Qm)n=Qm;else if(s>=o4||n>WT)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=a.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,h))return null;var d=u.get(r,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(c<=eI?v=eI:c<=sm?v=sm:v=Math.ceil(c/sm)*sm,c>bW||f>mW)return null;var p=o.getTextureQueue(v),m=p[p.length-2],y=function(){return o.recycleTexture(v,f)||o.addTexture(v,f)};m||(m=p[p.length-1]),m||(m=y()),m.width-m.usedWidth<f&&(m=y());for(var b=function(q){return q&&q.scaledLabelShown===h},g=i&&i===zh.dequeue,_=i&&i===zh.highQuality,w=i&&i===zh.downscale,x,E=n+1;E<=WT;E++){var O=u.get(r,E);if(O){x=O;break}}var C=x&&x.level===n+1?x:null,A=function(){m.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,m.usedWidth,0,f,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,v),b(C))A();else if(b(x))if(_){for(var R=x.level;R>n;R--)C=o.getElement(r,e,t,R,zh.downscale);A()}else return o.queueElement(r,x.level-1),x;else{var k;if(!g&&!_&&!w)for(var D=n-1;D>=Qm;D--){var L=u.get(r,D);if(L){k=L;break}}if(b(k))return o.queueElement(r,n),k;m.context.translate(m.usedWidth,0),m.context.scale(l,l),this.drawElement(m.context,r,e,h,!1),m.context.scale(1/l,1/l),m.context.translate(-m.usedWidth,0)}return d={x:m.usedWidth,texture:m,level:n,scale:l,width:f,height:c,scaledLabelShown:h},m.usedWidth+=Math.ceil(f+gW),m.eleCaches.push(d),u.set(r,n,d),o.checkTextureFullness(m),d};Hn.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Hn.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var o=Qm;o<=WT;o++){var a=t.getForCachedKey(r,o);a&&n.push(a)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};Hn.checkTextureUtility=function(r){r.invalidatedWidth>=_W*r.width&&this.retireTexture(r)};Hn.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>wW&&r.fullnessChecks>=EW?pl(t,r):r.fullnessChecks++};Hn.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;pl(n,r),r.retired=!0;for(var o=r.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}$C(o);var u=e.getRetiredTextureQueue(t);u.push(r)};Hn.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(yW,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Hn.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,$C(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),pl(i,a),n.push(a),a}};Hn.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),o=this.getKey(r),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(r),a.reqs++,n.updateItem(a);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:o};n.push(s),i[o]=s}};Hn.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<PW&&t.size()>0;a++){var s=t.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,zh.dequeue)}return i};Hn.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),o=n[i];o!=null&&(o.eles.length===1?(o.reqs=YC,t.updateItem(o),t.pop(),n[i]=null):o.eles.unmerge(r))};Hn.onDequeue=function(r){this.onDequeues.push(r)};Hn.offDequeue=function(r){pl(this.onDequeues,r)};Hn.setupDequeueing=i4.setupDequeueing({deqRedrawThreshold:CW,deqCost:OW,deqAvgCost:xW,deqNoDrawCost:SW,deqFastCost:TW,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++)for(var a=t[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(QC(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var RW=1,up=-4,x0=2,IW=3.99,kW=50,DW=50,MW=.15,LW=.1,NW=.9,jW=.9,FW=1,tI=250,BW=4e3*4e3,rI=32767,UW=!0,a4=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=eu()-2*tI,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=gg(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},DW),n.beforeRender(function(a,s){s-t.lastInvalidationTime<=tI?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};t.layersQueue=new yg(o),t.setupDequeueing()},_i=a4.prototype,nI=0,qW=Math.pow(2,53)-1;_i.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),o=this.renderer.makeOffscreenCanvas(n,i),a={id:nI=++nI%qW,bb:r,level:e,width:n,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(t,t),s.translate(u,l),a};_i.getLayers=function(r,e,t){var n=this,i=n.renderer,o=i.cy,a=o.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(KC(a*e)),t<up)t=up;else if(a>=IW||t>x0)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,h=n.levelIsComplete(t,r),d,v=function(){var A=function(j){if(n.validateLayersElesOrdering(j,r),n.levelIsComplete(j,r))return d=u[j],!0},R=function(j){if(!d)for(var q=t+j;up<=q&&q<=x0&&!A(q);q+=j);};R(1),R(-1);for(var k=c.length-1;k>=0;k--){var D=c[k];D.invalid&&pl(c,D)}};if(!h)v();else return c;var p=function(){if(!f){f=$i();for(var A=0;A<r.length;A++)F9(f,r[A].boundingBox())}return f},m=function(A){A=A||{};var R=A.after;p();var k=Math.ceil(f.w*l),D=Math.ceil(f.h*l);if(k>rI||D>rI)return null;var L=k*D;if(L>BW)return null;var j=n.makeLayer(f,t);if(R!=null){var q=c.indexOf(R)+1;c.splice(q,0,j)}else(A.insert===void 0||A.insert)&&c.unshift(j);return j};if(n.skipping&&!s)return null;for(var y=null,b=r.length/RW,g=!s,_=0;_<r.length;_++){var w=r[_],x=w._private.rscratch,E=x.imgLayerCaches=x.imgLayerCaches||{},O=E[t];if(O){y=O;continue}if((!y||y.eles.length>=b||!e3(y.bb,w.boundingBox()))&&(y=m({insert:!0,after:y}),!y))return null;d||g?n.queueLayer(y,w):n.drawEleInLayer(y,w,t,e),y.eles.push(w),E[t]=y}return d||(g?null:c)};_i.getEleLevelForLayerLevel=function(r,e){return r};_i.drawEleInLayer=function(r,e,t,n){var i=this,o=this.renderer,a=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,t,UW),o.setImgSmoothing(a,!0))};_i.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,o=0;o<n.length;o++){var a=n[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};_i.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};_i.updateElementsInLayers=function(r,e){for(var t=this,n=hg(r[0]),i=0;i<r.length;i++)for(var o=n?null:r[i],a=n?r[i]:r[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=up;l<=x0;l++){var c=u[l];c&&(o&&t.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};_i.haveLayers=function(){for(var r=this,e=!1,t=up;t<=x0;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};_i.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=eu(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,o){e.invalidateLayer(n)}))};_i.invalidateLayer=function(r){if(this.lastInvalidationTime=eu(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];pl(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var o=t[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};_i.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,o){var a=n.replacement;if(a||(a=n.replacement=e.makeLayer(n.bb,n.level),a.replaces=n,a.eles=n.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};_i.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};_i.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,o=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};_i.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<FW&&t.size()!==0;){var o=t.peek();if(o.replacement){t.pop();continue}if(o.replaces&&o!==o.replaces.replacement){t.pop();continue}if(o.invalid){t.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,r),i++),n.length===0&&n.push(!0),o.elesQueue.length===0&&(t.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return n};_i.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var o=0;o<r.eles.length;o++){var a=r.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};_i.requestRedraw=gg(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);_i.setupDequeueing=i4.setupDequeueing({deqRedrawThreshold:kW,deqCost:MW,deqAvgCost:LW,deqNoDrawCost:NW,deqFastCost:jW,deq:function(e,t){return e.dequeue(t)},onDeqd:XC,shouldRedraw:X5,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var s4={},iI;function zW(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function GW(r,e,t){for(var n,i=0;i<e.length;i++){var o=e[i];i===0&&(n=o),r.lineTo(o.x,o.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function oI(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var o=n[i];r.lineTo(o.x,o.y)}var a=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];r.lineTo(o.x,o.y)}r.closePath&&r.closePath()}function VW(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var o=e,a=o[0];r.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function WW(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}s4.arrowShapeImpl=function(r){return(iI||(iI={polygon:zW,"triangle-backcurve":GW,"triangle-tee":oI,"circle-triangle":VW,"triangle-cross":oI,circle:WW}))[r]};var bs={};bs.drawElement=function(r,e,t,n,i,o){var a=this;e.isNode()?a.drawNode(r,e,t,n,i,o):a.drawEdge(r,e,t,n,i,o)};bs.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};bs.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};bs.drawCachedElementPortion=function(r,e,t,n,i,o,a,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,o);if(c!=null){var f=s(u,e);if(f===0)return;var h=a(u,e),d=l.x1,v=l.y1,p=l.w,m=l.h,y,b,g,_,w;if(h!==0){var x=t.getRotationPoint(e);g=x.x,_=x.y,r.translate(g,_),r.rotate(h),w=u.getImgSmoothing(r),w||u.setImgSmoothing(r,!0);var E=t.getRotationOffset(e);y=E.x,b=E.y}else y=d,b=v;var O;f!==1&&(O=r.globalAlpha,r.globalAlpha=O*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,b,p,m),f!==1&&(r.globalAlpha=O),h!==0&&(r.rotate(-h),r.translate(-g,-_),w||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var HW=function(){return 0},YW=function(e,t){return e.getTextAngle(t,null)},XW=function(e,t){return e.getTextAngle(t,"source")},$W=function(e,t){return e.getTextAngle(t,"target")},KW=function(e,t){return t.effectiveOpacity()},aw=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};bs.drawCachedElement=function(r,e,t,n,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=e.boundingBox(),d=o===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||QC(h,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;a.drawElementUnderlay(r,e),a.drawCachedElementPortion(r,e,u,t,i,d,HW,KW),(!v||!p)&&a.drawCachedElementPortion(r,e,l,t,i,d,YW,aw),v&&!p&&(a.drawCachedElementPortion(r,e,c,t,i,d,XW,aw),a.drawCachedElementPortion(r,e,f,t,i,d,$W,aw)),a.drawElementOverlay(r,e)}};bs.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};bs.drawCachedElements=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(r,a,t,n)}};bs.drawCachedNodes=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(r,a,t,n)}};bs.drawLayeredElements=function(r,e,t,n){var i=this,o=i.data.lyrTxrCache.getLayers(e,t);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var ou={};ou.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,m=e.pstyle("line-outline-color").value,y=l*c,b=l*c,g=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;f==="straight-triangle"?(a.eleStrokeStyle(r,e,j),a.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=d,r.lineCap=v,a.eleStrokeStyle(r,e,j),a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},_=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(r.lineWidth=d+p,r.lineCap=v,p>0)a.colorStrokeStyle(r,m[0],m[1],m[2],j);else{r.lineCap="butt";return}f==="straight-triangle"?a.drawEdgeTrianglePath(e,r,s.allpts):(a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},w=function(){i&&a.drawEdgeOverlay(r,e)},x=function(){i&&a.drawEdgeUnderlay(r,e)},E=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;a.drawArrowheads(r,e,j)},O=function(){a.drawElementText(r,e,null,n)};r.lineJoin="round";var C=e.pstyle("ghost").value==="yes";if(C){var A=e.pstyle("ghost-offset-x").pfValue,R=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,D=y*k;r.translate(A,R),g(D),E(D),r.translate(-A,-R)}else _();x(),g(),E(),w(),O(),t&&r.translate(u.x1,u.y1)}};var u4=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!a?t.lineCap="butt":t.lineCap="round",o.colorStrokeStyle(t,c[0],c[1],c[2],i),o.drawEdgePath(n,t,s.allpts,"solid")}}}};ou.drawEdgeOverlay=u4("overlay");ou.drawEdgeUnderlay=u4("underlay");ou.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===f;h?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=f,i.pathCache=a)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<t.length;d+=4)e.quadraticCurveTo(t[d],t[d+1],t[d+2],t[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var p=po(i.roundCorners),m;try{for(p.s();!(m=p.n()).done;){var y=m.value;K3(e,y)}}catch(g){p.e(g)}finally{p.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var b=2;b+1<t.length;b+=2)e.lineTo(t[b],t[b+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};ou.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var o=[t[i+2]-t[i],t[i+3]-t[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};ou.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};ou.drawArrowhead=function(r,e,t,n,i,o,a){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),d=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(d*=f);var v=e.pstyle("opacity").value;a===void 0&&(a=v);var p=r.globalCompositeOperation;(a!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,d,n,i,o),r.globalCompositeOperation=p);var m=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,m[0],m[1],m[2],a),s.colorStrokeStyle(r,m[0],m[1],m[2],a),s.drawArrowShape(e,r,c,f,u,d,n,i,o)}}};ou.drawArrowShape=function(r,e,t,n,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,h,d=e,v={x:a,y:s},p=r.pstyle("arrow-scale").value,m=this.getArrowWidth(n,p),y=l.arrowShapes[i];if(c){var b=l.arrowPathCache=l.arrowPathCache||[],g=Yc(i),_=b[g];_!=null?(h=e=_,f=!0):(h=e=new Path2D,b[g]=h)}f||(e.beginPath&&e.beginPath(),c?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,m,u,v,n),e.closePath&&e.closePath()),e=d,c&&(e.translate(a,s),e.rotate(u),e.scale(m,m)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=o/(c?m:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/m,1/m),e.rotate(-u),e.translate(-a,-s))};var h2={};h2.safeDrawImage=function(r,e,t,n,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,o,a,s,u,l)}catch(c){Nr(c)}};h2.drawInscribedImage=function(r,e,t,n,i){var o=this,a=t.position(),s=a.x,u=a.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),d=t.width(),v=t.height(),p=t.padding()*2,m=d+(c(t,"background-width-relative-to","value",n)==="inner"?0:p),y=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:p),b=t._private.rscratch,g=c(t,"background-clip","value",n),_=g==="node",w=c(t,"background-image-opacity","value",n)*i,x=c(t,"background-image-smoothing","value",n),E=t.pstyle("corner-radius").value;E!=="auto"&&(E=t.pstyle("corner-radius").pfValue);var O=e.width||e.cachedW,C=e.height||e.cachedH;(O==null||C==null)&&(document.body.appendChild(e),O=e.cachedW=e.width||e.offsetWidth,C=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var A=O,R=C;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?A=c(t,"background-width","pfValue",n)*m:A=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?R=c(t,"background-height","pfValue",n)*y:R=c(t,"background-height","pfValue",n)),!(A===0||R===0)){if(f==="contain"){var k=Math.min(m/A,y/R);A*=k,R*=k}else if(f==="cover"){var k=Math.max(m/A,y/R);A*=k,R*=k}var D=s-m/2,L=c(t,"background-position-x","units",n),j=c(t,"background-position-x","pfValue",n);L==="%"?D+=(m-A)*j:D+=j;var q=c(t,"background-offset-x","units",n),B=c(t,"background-offset-x","pfValue",n);q==="%"?D+=(m-A)*B:D+=B;var U=u-y/2,W=c(t,"background-position-y","units",n),H=c(t,"background-position-y","pfValue",n);W==="%"?U+=(y-R)*H:U+=H;var Y=c(t,"background-offset-y","units",n),Z=c(t,"background-offset-y","pfValue",n);Y==="%"?U+=(y-R)*Z:U+=Z,b.pathCache&&(D-=s,U-=u,s=0,u=0);var ce=r.globalAlpha;r.globalAlpha=w;var $=o.getImgSmoothing(r),K=!1;if(x==="no"&&$?(o.setImgSmoothing(r,!1),K=!0):x==="yes"&&!$&&(o.setImgSmoothing(r,!0),K=!0),h==="no-repeat")_&&(r.save(),b.pathCache?r.clip(b.pathCache):(o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,m,y,E,b),r.clip())),o.safeDrawImage(r,e,0,0,O,C,D,U,A,R),_&&r.restore();else{var ie=r.createPattern(e,h);r.fillStyle=ie,o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,m,y,E,b),r.translate(D,U),r.fill(),r.translate(-D,-U)}r.globalAlpha=ce,K&&o.setImgSmoothing(r,$)}};var of={};of.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(KC(t*n));e=Math.pow(2,i)}var o=r.pstyle("font-size").pfValue*e,a=r.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};of.drawElementText=function(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(n==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var d=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(a.drawText(r,e,null,d,o),e.isEdge()&&(a.drawText(r,e,"source",d,o),a.drawText(r,e,"target",d,o))):a.drawText(r,e,i,d,o),t&&r.translate(v.x1,v.y1)};of.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};of.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+a+" "+i+" "+o,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function ZW(r,e,t,n,i){var o=Math.min(n,i),a=o/2,s=e+n/2,u=t+i/2;r.beginPath(),r.arc(s,u,a,0,Math.PI*2),r.closePath()}function aI(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=Math.min(o,n/2,i/2);r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.quadraticCurveTo(e+n,t,e+n,t+a),r.lineTo(e+n,t+i-a),r.quadraticCurveTo(e+n,t+i,e+n-a,t+i),r.lineTo(e+a,t+i),r.quadraticCurveTo(e,t+i,e,t+i-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath()}of.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,o=e?e+"-":"",a=r.pstyle(o+"text-rotation");if(a.strValue==="autorotate"){var s=fo(i,"labelAngle",e);t=r.isEdge()?s:0}else a.strValue==="none"?t=0:t=a.pfValue;return t};of.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=fo(a,"labelX",t),l=fo(a,"labelY",t),c,f,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var d=t?t+"-":"",v=fo(a,"labelWidth",t),p=fo(a,"labelHeight",t),m=e.pstyle(d+"text-margin-x").pfValue,y=e.pstyle(d+"text-margin-y").pfValue,b=e.isEdge(),g=e.pstyle("text-halign").value,_=e.pstyle("text-valign").value;b&&(g="center",_="center"),u+=m,l+=y;var w;switch(n?w=this.getTextAngle(e,t):w=0,w!==0&&(c=u,f=l,r.translate(c,f),r.rotate(w),u=0,l=0),_){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var x=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,O=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue,A=e.pstyle("text-background-shape").strValue,R=A==="round-rectangle"||A==="roundrectangle",k=A==="circle",D=2;if(x>0||O>0&&E>0){var L=r.fillStyle,j=r.strokeStyle,q=r.lineWidth,B=e.pstyle("text-background-color").value,U=e.pstyle("text-border-color").value,W=e.pstyle("text-border-style").value,H=x>0,Y=O>0&&E>0,Z=u-C;switch(g){case"left":Z-=v;break;case"center":Z-=v/2;break}var ce=l-p-C,$=v+2*C,K=p+2*C;if(H&&(r.fillStyle="rgba(".concat(B[0],",").concat(B[1],",").concat(B[2],",").concat(x*s,")")),Y&&(r.strokeStyle="rgba(".concat(U[0],",").concat(U[1],",").concat(U[2],",").concat(E*s,")"),r.lineWidth=O,r.setLineDash))switch(W){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=O/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(R?(r.beginPath(),aI(r,Z,ce,$,K,D)):k?(r.beginPath(),ZW(r,Z,ce,$,K)):(r.beginPath(),r.rect(Z,ce,$,K)),H&&r.fill(),Y&&r.stroke(),Y&&W==="double"){var ie=O/2;r.beginPath(),R?aI(r,Z+ie,ce+ie,$-2*ie,K-2*ie,D):r.rect(Z+ie,ce+ie,$-2*ie,K-2*ie),r.stroke()}r.fillStyle=L,r.strokeStyle=j,r.lineWidth=q,r.setLineDash&&r.setLineDash([])}var ae=2*e.pstyle("text-outline-width").pfValue;if(ae>0&&(r.lineWidth=ae),e.pstyle("text-wrap").value==="wrap"){var le=fo(a,"labelWrapCachedLines",t),te=fo(a,"labelLineHeight",t),ee=v/2,re=this.getLabelJustification(e);switch(re==="auto"||(g==="left"?re==="left"?u+=-v:re==="center"&&(u+=-ee):g==="center"?re==="left"?u+=-ee:re==="right"&&(u+=ee):g==="right"&&(re==="center"?u+=ee:re==="right"&&(u+=v))),_){case"top":l-=(le.length-1)*te;break;case"center":case"bottom":l-=(le.length-1)*te;break}for(var he=0;he<le.length;he++)ae>0&&r.strokeText(le[he],u,l),r.fillText(le[he],u,l),l+=te}else ae>0&&r.strokeText(h,u,l),r.fillText(h,u,l);w!==0&&(r.rotate(-w),r.translate(-c,-f))}}};var Cl={};Cl.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!ot(f.x)||!ot(f.y))&&!(o&&!e.visible())){var h=o?e.effectiveOpacity():1,d=a.usePaths(),v,p=!1,m=e.padding();s=e.width()+2*m,u=e.height()+2*m;var y;t&&(y=t,r.translate(-y.x1,-y.y1));for(var b=e.pstyle("background-image"),g=b.value,_=new Array(g.length),w=new Array(g.length),x=0,E=0;E<g.length;E++){var O=g[E],C=_[E]=O!=null&&O!=="none";if(C){var A=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);x++,w[E]=a.getCachedImage(O,A,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var R=e.pstyle("background-blacken").value,k=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*h,L=e.pstyle("border-color").value,j=e.pstyle("border-style").value,q=e.pstyle("border-join").value,B=e.pstyle("border-cap").value,U=e.pstyle("border-position").value,W=e.pstyle("border-dash-pattern").pfValue,H=e.pstyle("border-dash-offset").pfValue,Y=e.pstyle("border-opacity").value*h,Z=e.pstyle("outline-width").pfValue,ce=e.pstyle("outline-color").value,$=e.pstyle("outline-style").value,K=e.pstyle("outline-opacity").value*h,ie=e.pstyle("outline-offset").value,ae=e.pstyle("corner-radius").value;ae!=="auto"&&(ae=e.pstyle("corner-radius").pfValue);var le=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;a.eleFillStyle(r,e,Xe)},te=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y;a.colorStrokeStyle(r,L[0],L[1],L[2],Xe)},ee=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K;a.colorStrokeStyle(r,ce[0],ce[1],ce[2],Xe)},re=function(Xe,ke,oe,Ee){var Re=a.nodePathCache=a.nodePathCache||[],De=Y5(oe==="polygon"?oe+","+Ee.join(","):oe,""+ke,""+Xe,""+ae),Me=Re[De],it,Fe=!1;return Me!=null?(it=Me,Fe=!0,c.pathCache=it):(it=new Path2D,Re[De]=c.pathCache=it),{path:it,cacheHit:Fe}},he=e.pstyle("shape").strValue,ve=e.pstyle("shape-polygon-points").pfValue;if(d){r.translate(f.x,f.y);var _e=re(s,u,he,ve);v=_e.path,p=_e.cacheHit}var Oe=function(){if(!p){var Xe=f;d&&(Xe={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(v||r,Xe.x,Xe.y,s,u,ae,c)}d?r.fill(v):r.fill()},Pe=function(){for(var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,oe=l.backgrounding,Ee=0,Re=0;Re<w.length;Re++){var De=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Re);if(ke&&De==="over"||!ke&&De==="inside"){Ee++;continue}_[Re]&&w[Re].complete&&!w[Re].error&&(Ee++,a.drawInscribedImage(r,w[Re],e,Re,Xe))}l.backgrounding=Ee!==x,oe!==l.backgrounding&&e.updateStyle(!1)},me=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasPie(e)&&(a.drawPie(r,e,ke),Xe&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,ae,c)))},F=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasStripe(e)&&(r.save(),d?r.clip(c.pathCache):(a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,ae,c),r.clip()),a.drawStripe(r,e,ke),r.restore(),Xe&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,ae,c)))},G=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,ke=(R>0?R:-R)*Xe,oe=R>0?0:255;R!==0&&(a.colorFillStyle(r,oe,oe,oe,ke),d?r.fill(v):r.fill())},X=function(){if(k>0){if(r.lineWidth=k,r.lineCap=B,r.lineJoin=q,r.setLineDash)switch(j){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(W),r.lineDashOffset=H;break;case"solid":case"double":r.setLineDash([]);break}if(U!=="center"){if(r.save(),r.lineWidth*=2,U==="inside")d?r.clip(v):r.clip();else{var Xe=new Path2D;Xe.rect(-s/2-k,-u/2-k,s+2*k,u+2*k),Xe.addPath(v),r.clip(Xe,"evenodd")}d?r.stroke(v):r.stroke(),r.restore()}else d?r.stroke(v):r.stroke();if(j==="double"){r.lineWidth=k/3;var ke=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(v):r.stroke(),r.globalCompositeOperation=ke}r.setLineDash&&r.setLineDash([])}},se=function(){if(Z>0){if(r.lineWidth=Z,r.lineCap="butt",r.setLineDash)switch($){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var Xe=f;d&&(Xe={x:0,y:0});var ke=a.getNodeShape(e),oe=k;U==="inside"&&(oe=0),U==="outside"&&(oe*=2);var Ee=(s+oe+(Z+ie))/s,Re=(u+oe+(Z+ie))/u,De=s*Ee,Me=u*Re,it=a.nodeShapes[ke].points,Fe;if(d){var ut=re(De,Me,ke,it);Fe=ut.path}if(ke==="ellipse")a.drawEllipsePath(Fe||r,Xe.x,Xe.y,De,Me);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ke)){var rt=0,ft=0,xt=0;ke==="round-diamond"?rt=(oe+ie+Z)*1.4:ke==="round-heptagon"?(rt=(oe+ie+Z)*1.075,xt=-(oe/2+ie+Z)/35):ke==="round-hexagon"?rt=(oe+ie+Z)*1.12:ke==="round-pentagon"?(rt=(oe+ie+Z)*1.13,xt=-(oe/2+ie+Z)/15):ke==="round-tag"?(rt=(oe+ie+Z)*1.12,ft=(oe/2+Z+ie)*.07):ke==="round-triangle"&&(rt=(oe+ie+Z)*(Math.PI/2),xt=-(oe+ie/2+Z)/Math.PI),rt!==0&&(Ee=(s+rt)/s,De=s*Ee,["round-hexagon","round-tag"].includes(ke)||(Re=(u+rt)/u,Me=u*Re)),ae=ae==="auto"?n3(De,Me):ae;for(var yt=De/2,nt=Me/2,It=ae+(oe+Z+ie)/2,St=new Array(it.length/2),or=new Array(it.length/2),rr=0;rr<it.length/2;rr++)St[rr]={x:Xe.x+ft+yt*it[rr*2],y:Xe.y+xt+nt*it[rr*2+1]};var Gt,Pt,ur,nr,Ir=St.length;for(Pt=St[Ir-1],Gt=0;Gt<Ir;Gt++)ur=St[Gt%Ir],nr=St[(Gt+1)%Ir],or[Gt]=c2(Pt,ur,nr,It),Pt=ur,ur=nr;a.drawRoundPolygonPath(Fe||r,Xe.x+ft,Xe.y+xt,s*Ee,u*Re,it,or)}else if(["roundrectangle","round-rectangle"].includes(ke))ae=ae==="auto"?gl(De,Me):ae,a.drawRoundRectanglePath(Fe||r,Xe.x,Xe.y,De,Me,ae+(oe+Z+ie)/2);else if(["cutrectangle","cut-rectangle"].includes(ke))ae=ae==="auto"?JC():ae,a.drawCutRectanglePath(Fe||r,Xe.x,Xe.y,De,Me,null,ae+(oe+Z+ie)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ke))ae=ae==="auto"?gl(De,Me):ae,a.drawBottomRoundRectanglePath(Fe||r,Xe.x,Xe.y,De,Me,ae+(oe+Z+ie)/2);else if(ke==="barrel")a.drawBarrelPath(Fe||r,Xe.x,Xe.y,De,Me);else if(ke.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ke)){var Kr=(oe+Z+ie)/s;it=y0(m0(it,Kr)),a.drawPolygonPath(Fe||r,Xe.x,Xe.y,s,u,it)}else{var Dt=(oe+Z+ie)/s;it=y0(m0(it,-Dt)),a.drawPolygonPath(Fe||r,Xe.x,Xe.y,s,u,it)}if(d?r.stroke(Fe):r.stroke(),$==="double"){r.lineWidth=oe/3;var fr=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(Fe):r.stroke(),r.globalCompositeOperation=fr}r.setLineDash&&r.setLineDash([])}},pe=function(){i&&a.drawNodeOverlay(r,e,f,s,u)},ge=function(){i&&a.drawNodeUnderlay(r,e,f,s,u)},xe=function(){a.drawElementText(r,e,null,n)},Ne=e.pstyle("ghost").value==="yes";if(Ne){var He=e.pstyle("ghost-offset-x").pfValue,at=e.pstyle("ghost-offset-y").pfValue,Ze=e.pstyle("ghost-opacity").value,et=Ze*h;r.translate(He,at),ee(),se(),le(Ze*D),Oe(),Pe(et,!0),te(Ze*Y),X(),me(R!==0||k!==0),F(R!==0||k!==0),Pe(et,!1),G(et),r.translate(-He,-at)}d&&r.translate(-f.x,-f.y),ge(),d&&r.translate(f.x,f.y),ee(),se(),le(),Oe(),Pe(h,!0),te(),X(),me(R!==0||k!==0),F(R!==0||k!==0),Pe(h,!1),G(),d&&r.translate(-f.x,-f.y),xe(),pe(),t&&r.translate(y.x1,y.y1)}};var l4=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,o,a){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),o==null||a==null){var d=n.padding();o=n.width()+2*d,a=n.height()+2*d}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,i.x,i.y,o+u*2,a+u*2,h),t.fill()}}}};Cl.drawNodeOverlay=l4("overlay");Cl.drawNodeUnderlay=l4("underlay");Cl.hasPie=function(r){return r=r[0],r._private.hasPie};Cl.hasStripe=function(r){return r=r[0],r._private.hasStripe};Cl.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),h=Math.min(c,f)/2,d,v=0,p=this.usePaths();if(p&&(u=0,l=0),o.units==="%"?h=h*o.pfValue:o.pfValue!==void 0&&(h=o.pfValue/2),a.units==="%"?d=h*a.pfValue:a.pfValue!==void 0&&(d=a.pfValue/2),!(d>=h))for(var m=1;m<=i.pieBackgroundN;m++){var y=e.pstyle("pie-"+m+"-background-size").value,b=e.pstyle("pie-"+m+"-background-color").value,g=e.pstyle("pie-"+m+"-background-opacity").value*t,_=y/100;_+v>1&&(_=1-v);var w=1.5*Math.PI+2*Math.PI*v;w+=s;var x=2*Math.PI*_,E=w+x;y===0||v>=1||v+_>1||(d===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,h,w,E),r.closePath()):(r.beginPath(),r.arc(u,l,h,w,E),r.arc(u,l,d,E,w,!0),r.closePath()),this.colorFillStyle(r,b[0],b[1],b[2],g),r.fill(),v+=_)}};Cl.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=n.x,a=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var f=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var d=s,v=u;h.units==="%"?(d=d*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(d=h.pfValue,v=h.pfValue),c&&(o=0,a=0),a-=d/2,o-=v/2;for(var p=1;p<=i.stripeBackgroundN;p++){var m=e.pstyle("stripe-"+p+"-background-size").value,y=e.pstyle("stripe-"+p+"-background-color").value,b=e.pstyle("stripe-"+p+"-background-opacity").value*t,g=m/100;g+l>1&&(g=1-l),!(m===0||l>=1||l+g>1)&&(r.beginPath(),r.rect(o,a+v*l,d,v*g),r.closePath(),this.colorFillStyle(r,y[0],y[1],y[2],b),r.fill(),l+=g)}r.restore()};var Ki={},QW=100;Ki.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Ki.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Ki.createGradientStyleFor=function(r,e,t,n,i){var o,a=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),h=Xc(l,f),d=Xc(c,f);o=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var v=a?{x:0,y:0}:t.position(),p=t.paddedWidth(),m=t.paddedHeight();o=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,m))}else if(t.isEdge()){var y=t.sourceEndpoint(),b=t.targetEndpoint();o=r.createLinearGradient(y.x,y.y,b.x,b.y)}else{var g=a?{x:0,y:0}:t.position(),_=t.paddedWidth(),w=t.paddedHeight(),x=_/2,E=w/2,O=t.pstyle("background-gradient-direction").value;switch(O){case"to-bottom":o=r.createLinearGradient(g.x,g.y-E,g.x,g.y+E);break;case"to-top":o=r.createLinearGradient(g.x,g.y+E,g.x,g.y-E);break;case"to-left":o=r.createLinearGradient(g.x+x,g.y,g.x-x,g.y);break;case"to-right":o=r.createLinearGradient(g.x-x,g.y,g.x+x,g.y);break;case"to-bottom-right":case"to-right-bottom":o=r.createLinearGradient(g.x-x,g.y-E,g.x+x,g.y+E);break;case"to-top-right":case"to-right-top":o=r.createLinearGradient(g.x-x,g.y+E,g.x+x,g.y-E);break;case"to-bottom-left":case"to-left-bottom":o=r.createLinearGradient(g.x+x,g.y-E,g.x-x,g.y+E);break;case"to-top-left":case"to-left-top":o=r.createLinearGradient(g.x+x,g.y+E,g.x-x,g.y-E);break}}if(!o)return null;for(var C=u.length===s.length,A=s.length,R=0;R<A;R++)o.addColorStop(C?u[R]:R/(A-1),"rgba("+s[R][0]+","+s[R][1]+","+s[R][2]+","+i+")");return o};Ki.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};Ki.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};Ki.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};Ki.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};Ki.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};Ki.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};Ki.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],o=n[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=i+"px",f.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=a}};Ki.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Ki.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Ki.render=function(r){var e=this;r=r||Z5();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,o=r.drawOnlyNodeLayer,a=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=t.hasCompoundNodes(),p=e.hoverData.draggingEles,m=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!m;var y=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var b=t.style(),g=t.zoom(),_=a!==void 0?a:g,w=t.pan(),x={x:w.x,y:w.y},E={zoom:g,pan:{x:w.x,y:w.y}},O=e.prevViewport,C=O===void 0||E.zoom!==O.zoom||E.pan.x!==O.pan.x||E.pan.y!==O.pan.y;!C&&!(p&&!v)&&(e.motionBlurPxRatio=1),s&&(x=s),_*=u,x.x*=u,x.y*=u;var A=e.getCachedZSortedEles();function R(te,ee,re,he,ve){var _e=te.globalCompositeOperation;te.globalCompositeOperation="destination-out",e.colorFillStyle(te,255,255,255,e.motionBlurTransparency),te.fillRect(ee,re,he,ve),te.globalCompositeOperation=_e}function k(te,ee){var re,he,ve,_e;!e.clearingMotionBlur&&(te===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||te===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(re={x:w.x*d,y:w.y*d},he=g*d,ve=e.canvasWidth*d,_e=e.canvasHeight*d):(re=x,he=_,ve=e.canvasWidth,_e=e.canvasHeight),te.setTransform(1,0,0,1,0,0),ee==="motionBlur"?R(te,0,0,ve,_e):!n&&(ee===void 0||ee)&&te.clearRect(0,0,ve,_e),i||(te.translate(re.x,re.y),te.scale(he,he)),s&&te.translate(s.x,s.y),a&&te.scale(a,a)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var D=e.data.bufferContexts[e.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:D,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var E=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};E.mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var L=l.contexts[e.NODE],j=e.textureCache.texture,E=e.textureCache.viewport;L.setTransform(1,0,0,1,0,0),h?R(L,0,0,E.width,E.height):L.clearRect(0,0,E.width,E.height);var q=b.core("outside-texture-bg-color").value,B=b.core("outside-texture-bg-opacity").value;e.colorFillStyle(L,q[0],q[1],q[2],B),L.fillRect(0,0,E.width,E.height);var g=t.zoom();k(L,!1),L.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/u,E.height/E.zoom/u),L.drawImage(j,E.mpan.x,E.mpan.y,E.width/E.zoom/u,E.height/E.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var U=t.extent(),W=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),H=e.hideEdgesOnViewport&&W,Y=[];if(Y[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,Y[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),Y[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,Y[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||o||Y[e.NODE]){var Z=h&&!Y[e.NODE]&&d!==1,L=n||(Z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),ce=h&&!Z?"motionBlur":void 0;k(L,ce),H?e.drawCachedNodes(L,A.nondrag,u,U):e.drawLayeredElements(L,A.nondrag,u,U),e.debug&&e.drawDebugPoints(L,A.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!o&&(c[e.DRAG]||i||Y[e.DRAG])){var Z=h&&!Y[e.DRAG]&&d!==1,L=n||(Z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);k(L,h&&!Z?"motionBlur":void 0),H?e.drawCachedNodes(L,A.drag,u,U):e.drawCachedElements(L,A.drag,u,U),e.debug&&e.drawDebugPoints(L,A.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,k),h&&d!==1){var $=l.contexts[e.NODE],K=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],ie=l.contexts[e.DRAG],ae=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],le=function(ee,re,he){ee.setTransform(1,0,0,1,0,0),he||!y?ee.clearRect(0,0,e.canvasWidth,e.canvasHeight):R(ee,0,0,e.canvasWidth,e.canvasHeight);var ve=d;ee.drawImage(re,0,0,e.canvasWidth*ve,e.canvasHeight*ve,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||Y[e.NODE])&&(le($,K,Y[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||Y[e.DRAG])&&(le(ie,ae,Y[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=E,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},QW)),n||t.emit("render")};var Pv;Ki.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,o=n.style(),a=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!a&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),h=o.core("selection-box-border-width").value/f;c.lineWidth=h,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),d=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(d.x,d.y,o.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),m="1 frame = "+v+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Pv){var y=c.measureText(m);Pv=y.actualBoundingBoxAscent}c.fillText(m,0,Pv);var b=60;c.strokeRect(0,Pv+10,250,20),c.fillRect(0,Pv+10,250*Math.min(p/b,1),20)}s||(u[t.SELECT_BOX]=!1)}};function sI(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function JW(r,e,t){var n=sI(r,r.VERTEX_SHADER,e),i=sI(r,r.FRAGMENT_SHADER,t),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error("Could not initialize shaders");return o}function eH(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function d2(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function tH(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function rH(r,e,t,n,i){var o=n*t+e.x,a=i*t+e.y;return a=Math.round(r.canvasHeight-a),[o,a]}function nH(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function iH(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ec(r,e,t){var n=r[0]/255,i=r[1]/255,o=r[2]/255,a=e,s=t||new Array(4);return s[0]=n*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function Oh(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function oH(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function aH(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function c4(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function f4(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function sH(r,e,t,n,i,o){switch(e){case r.FLOAT:return new Float32Array(t.buffer,o*n,i);case r.INT:return new Int32Array(t.buffer,o*n,i)}}function uH(r,e,t,n){var i=c4(r,e),o=Fn(i,2),a=o[0],s=o[1],u=f4(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,a,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,a,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function os(r,e,t,n){var i=c4(r,t),o=Fn(i,3),a=o[0],s=o[1],u=o[2],l=f4(r,s,e*a),c=a*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,a,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,a,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=sH(r,s,l,c,a,d);return f.dataArray=l,f.stride=c,f.size=a,f.getView=function(v){return h[v]},f.setPoint=function(v,p,m){var y=h[v];y[0]=p,y[1]=m},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*a):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function lH(r,e,t){for(var n=9,i=new Float32Array(e*n),o=new Array(e),a=0;a<e;a++){var s=a*n*4;o[a]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,36,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return o[f]},u.setData=function(f,h){o[h].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function cH(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var uI=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function sw(){var r=new uI(9);return uI!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function lI(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function fH(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],p=t[3],m=t[4],y=t[5],b=t[6],g=t[7],_=t[8];return r[0]=h*n+d*a+v*l,r[1]=h*i+d*s+v*c,r[2]=h*o+d*u+v*f,r[3]=p*n+m*a+y*l,r[4]=p*i+m*s+y*c,r[5]=p*o+m*u+y*f,r[6]=b*n+g*a+_*l,r[7]=b*i+g*s+_*c,r[8]=b*o+g*u+_*f,r}function Jm(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=h*n+d*a+l,r[7]=h*i+d*s+c,r[8]=h*o+d*u+f,r}function cI(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*a,r[1]=d*i+h*s,r[2]=d*o+h*u,r[3]=d*a-h*n,r[4]=d*s-h*i,r[5]=d*u-h*o,r[6]=l,r[7]=c,r[8]=f,r}function HT(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function hH(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var dH=(function(){function r(e,t,n,i){xl(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return Sl(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,o=this.texHeight,a=this.texSize,s=o/i,u=n*s,l=i*s;return u>a&&(s=a/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var o=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,h=l.texH,d=function(g,_){if(i&&_){var w=_.context,x=g.x,E=g.row,O=x,C=u*E;w.save(),w.translate(O,C),w.scale(c,c),i(w,n),w.restore()}},v=[null,null],p=function(){d(o.freePointer,o.canvas),v[0]={x:o.freePointer.x,y:o.freePointer.row*u,w:f,h},v[1]={x:o.freePointer.x+f,y:o.freePointer.row*u,w:0,h},o.freePointer.x+=f,o.freePointer.x==a&&(o.freePointer.x=0,o.freePointer.row++)},m=function(){var g=o.scratch,_=o.canvas;g.clear(),d({x:0,row:0},g);var w=a-o.freePointer.x,x=f-w,E=u;{var O=o.freePointer.x,C=o.freePointer.row*u,A=w;_.context.drawImage(g,0,0,A,E,O,C,A,E),v[0]={x:O,y:C,w:A,h}}{var R=w,k=(o.freePointer.row+1)*u,D=x;_&&_.context.drawImage(g,R,0,D,E,0,k,D,E),v[1]={x:0,y:k,w:D,h}}o.freePointer.x=x,o.freePointer.row++},y=function(){o.freePointer.x=0,o.freePointer.row++};if(this.freePointer.x+f<=a)p();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(y(),p()):this.enableWrapping?m():(y(),p())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,o=this.getScale(t),a=o.texW;return this.freePointer.x+a>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=aH(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),vH=(function(){function r(e,t,n,i){xl(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Sl(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas;return new dH(t,n,i,o)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas,a=Math.floor(n/i);this.scratch=o(t,n,a,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var o=this.styleKeyToAtlas.get(t);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(n))&&(o&&o.lock(),o=this._createAtlas(),this.atlases.push(o)),o.draw(t,n,i),this.styleKeyToAtlas.set(t,o)),o}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size!==0){var i=[],o=new Map,a=null,s=po(this.atlases),u;try{var l=function(){var f=u.value,h=f.getKeys(),d=pH(n,h);if(d.size===0)return i.push(f),h.forEach(function(w){return o.set(w,f)}),1;a||(a=t._createAtlas(),i.push(a));var v=po(h),p;try{for(v.s();!(p=v.n()).done;){var m=p.value;if(!d.has(m)){var y=f.getOffsets(m),b=Fn(y,2),g=b[0],_=b[1];a.canFit({w:g.w+_.w,h:g.h})||(a.lock(),a=t._createAtlas(),i.push(a)),f.canvas&&(t._copyTextureToNewAtlas(m,f,a),o.set(m,a))}}}catch(w){v.e(w)}finally{v.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=o,this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var o=n.getOffsets(t),a=Fn(o,2),s=a[0],u=a[1];if(u.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(t,{w:c,h:f},function(h){h.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function pH(r,e){return r.intersection?r.intersection(e):new Set(d0(r).filter(function(t){return e.has(t)}))}var gH=(function(){function r(e,t){xl(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Sl(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,o=i.webglTexSize,a=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(a),l=new vH(this.r,o,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var o=this.collections.get(i),a=jt({type:t,atlasCollection:o},n);this.renderTypes.set(t,a)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,o=null;return function(a,s,u,l){return l?((!o||s!=n||u!=i)&&(n=s,i=u,o=t(a,s,u)),o):t(a,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.forceRedraw,a=o===void 0?!1:o,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,f=!1,h=!1,d=po(t),v;try{for(d.s();!(v=d.n()).done;){var p=v.value;if(u(p)){var m=po(this.renderTypes.values()),y;try{var b=function(){var _=y.value,w=_.type;if(c(w)){var x=n.collections.get(_.collection),E=_.getKey(p),O=Array.isArray(E)?E:[E];if(a)O.forEach(function(k){return x.markKeyForGC(k)}),h=!0;else{var C=_.getID?_.getID(p):p.id(),A=n._key(w,C),R=n.typeAndIdToKey.get(A);R!==void 0&&!iH(O,R)&&(f=!0,n.typeAndIdToKey.delete(A),R.forEach(function(k){return x.markKeyForGC(k)}))}}};for(m.s();!(y=m.n()).done;)b()}catch(g){m.e(g)}finally{m.f()}}}}catch(g){d.e(g)}finally{d.f()}return h&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var t=po(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(o){t.e(o)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i,o){var a=this.renderTypes.get(n),s=this.collections.get(a.collection),u=!1,l=s.draw(o,i,function(h){a.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,i.w,i.h),h.clip(),a.drawElement(h,t,i,!0,!0),h.restore()):a.drawElement(h,t,i,!0,!0),u=!0});if(u){var c=a.getID?a.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(o):this.typeAndIdToKey.set(f,[o])}return l}},{key:"getAtlasInfo",value:function(t,n){var i=this,o=this.renderTypes.get(n),a=o.getKey(t),s=Array.isArray(a)?a:[a];return s.map(function(u){var l=o.getBoundingBox(t,u),c=i.getOrCreateAtlas(t,n,l,u),f=c.getOffsets(u),h=Fn(f,2),d=h[0],v=h[1];return{atlas:c,tex:d,tex1:d,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=po(this.collections),i;try{for(n.s();!(i=n.n()).done;){var o=Fn(i.value,2),a=o[0],s=o[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:a,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])})(),yH=(function(){function r(e){xl(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Sl(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])})(),mH=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,bH=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,_H=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,wH=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,lp={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},S0={IGNORE:1,USE_BB:2},uw=0,fI=1,hI=2,lw=3,xh=4,um=5,Av=6,Rv=7,EH=(function(){function r(e,t,n){xl(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=eH,this.atlasManager=new gH(e,n),this.batchManager=new yH(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(lp.SCREEN),this.pickingProgram=this._createShaderProgram(lp.PICKING),this.vao=this._createVAO()}return Sl(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,o=this.atlasManager;return i?o.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):o.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(uw,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(xh," || aVertType == ").concat(Rv,` 
             || aVertType == `).concat(um," || aVertType == ").concat(Av,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(fI,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(hI,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(lw,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),o=this.batchManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(o.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(mH,`
      `).concat(bH,`
      `).concat(_H,`
      `).concat(wH,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(uw,`) {
          // look up the texel from the texture unit
          `).concat(o.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(lw,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(xh,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(xh," || vVertType == ").concat(Rv,` 
          || vVertType == `).concat(um," || vVertType == ").concat(Av,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(xh,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Rv,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Rv,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=JW(n,i,a);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,o=this.program,a=i.createVertexArray();return i.bindVertexArray(a),uH(i,"vec2",o.aPosition,t),this.transformBuffer=lH(i,n,o.aTransform),this.indexBuffer=os(i,n,"vec4",o.aIndex),this.vertTypeBuffer=os(i,n,"int",o.aVertType),this.atlasIdBuffer=os(i,n,"int",o.aAtlasId),this.texBuffer=os(i,n,"vec4",o.aTex),this.pointAPointBBuffer=os(i,n,"vec4",o.aPointAPointB),this.pointCPointDBuffer=os(i,n,"vec4",o.aPointCPointD),this.lineWidthBuffer=os(i,n,"vec2",o.aLineWidth),this.colorBuffer=os(i,n,"vec4",o.aColor),this.cornerRadiusBuffer=os(i,n,"vec4",o.aCornerRadius),this.borderColorBuffer=os(i,n,"vec4",o.aBorderColor),i.bindVertexArray(null),a}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return el(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lp.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,i){var o=this.atlasManager,a=this.batchManager,s=o.getRenderTypeOpts(i);if(this._isVisible(t,s)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(t);if(u===S0.IGNORE)return;if(u==S0.USE_BB){this.drawPickingRectangle(t,n,i);return}}var l=o.getAtlasInfo(t,i),c=po(l),f;try{for(c.s();!(f=c.n()).done;){var h=f.value,d=h.atlas,v=h.tex1,p=h.tex2;a.canAddToCurrentBatch(d)||this.endBatch();for(var m=a.getAtlasIndexForBatch(d),y=0,b=[[v,!0],[p,!1]];y<b.length;y++){var g=Fn(b[y],2),_=g[0],w=g[1];if(_.w!=0){var x=this.instanceCount;this.vertTypeBuffer.getView(x)[0]=uw;var E=this.indexBuffer.getView(x);Oh(n,E);var O=this.atlasIdBuffer.getView(x);O[0]=m;var C=this.texBuffer.getView(x);C[0]=_.x,C[1]=_.y,C[2]=_.w,C[3]=_.h;var A=this.transformBuffer.getMatrixView(x);this.setTransformMatrix(t,A,s,h,w),this.instanceCount++,w||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(R){c.e(R)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=t.pstyle(i.shapeProps.padding).pfValue),o){var u=o.bb,l=o.tex1,c=o.tex2,f=l.w/(l.w+c.w);a||(f=1-f);var h=this._getAdjustedBB(u,s,a,f);this._applyTransformMatrix(n,h,i,t)}else{var d=i.getBoundingBox(t),v=this._getAdjustedBB(d,s,!0,1);this._applyTransformMatrix(n,v,i,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,o){var a,s;lI(t);var u=i.getRotation?i.getRotation(o):0;if(u!==0){var l=i.getRotationPoint(o),c=l.x,f=l.y;Jm(t,t,[c,f]),cI(t,t,u);var h=i.getRotationOffset(o);a=h.x+(n.xOffset||0),s=h.y+(n.yOffset||0)}else a=n.x1,s=n.y1;Jm(t,t,[a,s]),HT(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,i,o){var a=t.x1,s=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(a-=n,s-=n,u+=2*n,l+=2*n);var f=0,h=u*o;return i&&o<1?u=h:!i&&o<1&&(f=u-h,a+=f,u=h),{x1:a,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,i){var o=this.atlasManager.getRenderTypeOpts(i),a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=xh;var s=this.indexBuffer.getView(a);Oh(n,s);var u=this.colorBuffer.getView(a);Ec([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(t,l,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,i){var o=this.simpleShapeOptions.get(i);if(this._isVisible(t,o)){var a=o.shapeProps,s=this._getVertTypeForShape(t,a.shape);if(s===void 0||o.isSimple&&!o.isSimple(t)){this.drawTexture(t,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===um||s===Av){var l=o.getBoundingBox(t),c=this._getCornerRadius(t,a.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===Av&&(f[0]=0,f[2]=0)}var h=this.indexBuffer.getView(u);Oh(n,h);var d=t.pstyle(a.color).value,v=t.pstyle(a.opacity).value,p=this.colorBuffer.getView(u);Ec(d,v,p);var m=this.lineWidthBuffer.getView(u);if(m[0]=0,m[1]=0,a.border){var y=t.pstyle("border-width").value;if(y>0){var b=t.pstyle("border-color").value,g=t.pstyle("border-opacity").value,_=this.borderColorBuffer.getView(u);Ec(b,g,_);var w=t.pstyle("border-position").value;if(w==="inside")m[0]=0,m[1]=-y;else if(w==="outside")m[0]=y,m[1]=0;else{var x=y/2;m[0]=x,m[1]=-x}}}var E=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,E,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var i=t.pstyle(n).value;switch(i){case"rectangle":return xh;case"ellipse":return Rv;case"roundrectangle":case"round-rectangle":return um;case"bottom-round-rectangle":return Av;default:return}}},{key:"_getCornerRadius",value:function(t,n,i){var o=i.w,a=i.h;if(t.pstyle(n).value==="auto")return gl(o,a);var s=t.pstyle(n).pfValue,u=o/2,l=a/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var o=t._private.rscratch,a,s,u;if(i==="source"?(a=o.arrowStartX,s=o.arrowStartY,u=o.srcArrowAngle):(a=o.arrowEndX,s=o.arrowEndY,u=o.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,f=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,d=f*h,v=t.pstyle("width").pfValue,p=t.pstyle("arrow-scale").value,m=this.r.getArrowWidth(v,p),y=this.instanceCount,b=this.transformBuffer.getMatrixView(y);lI(b),Jm(b,b,[a,s]),HT(b,b,[m,m]),cI(b,b,u),this.vertTypeBuffer.getView(y)[0]=lw;var g=this.indexBuffer.getView(y);Oh(n,g);var _=this.colorBuffer.getView(y);Ec(c,d,_),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this._getEdgePoints(t);if(i){var o=t.pstyle("opacity").value,a=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=o*a;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=fI;var f=this.indexBuffer.getView(c);Oh(n,f);var h=this.colorBuffer.getView(c);Ec(u,l,h);var d=this.lineWidthBuffer.getView(c);d[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<i.length-2;p+=2){var m=this.instanceCount;this.vertTypeBuffer.getView(m)[0]=hI;var y=this.indexBuffer.getView(m);Oh(n,y);var b=this.colorBuffer.getView(m);Ec(u,l,b);var g=this.lineWidthBuffer.getView(m);g[0]=s;var _=i[p-2],w=i[p-1],x=i[p],E=i[p+1],O=i[p+2],C=i[p+3],A=i[p+4],R=i[p+5];p==0&&(_=2*x-O+.001,w=2*E-C+.001),p==i.length-4&&(A=2*O-x+.001,R=2*C-E+.001);var k=this.pointAPointBBuffer.getView(m);k[0]=_,k[1]=w,k[2]=x,k[3]=E;var D=this.pointCPointDBuffer.getView(m);D[0]=O,D[1]=C,D[2]=A,D[3]=R,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var i=n.allpts;if(i.length==4)return i;var o=this._getNumSegments(t);return this._getCurveSegmentPoints(i,o)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),o=0;o<=n;o++)if(o==0)i[0]=t[0],i[1]=t[1];else if(o==n)i[o*2]=t[t.length-2],i[o*2+1]=t[t.length-1];else{var a=o/n;this._setCurvePoint(t,a,i,o*2)}return i}},{key:"_setCurvePoint",value:function(t,n,i,o){if(t.length<=2)i[o]=t[0],i[o+1]=t[1];else{for(var a=Array(t.length-2),s=0;s<a.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];a[s]=u,a[s+1]=l}return this._setCurvePoint(a,n,i,o)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,o=this.instanceCount;if(o!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(a),t.bindVertexArray(n);var s=po(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(o)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(a.uTextures[h],h);t.uniform1f(a.uZoom,tH(this.r)),t.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(a.uAtlasSize,this.batchManager.getAtlasSize());var d=Ec(this.bgColor,1);t.uniform4fv(a.uBGColor,d),t.drawArraysInstanced(t.TRIANGLES,0,i,o),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:o,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(a,s){return a+s.atlasCount},0),i=this.batchDebugInfo,o=i.reduce(function(a,s){return a+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:o}}}])})(),h4={};h4.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=OH(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=cH(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new EH(t,n,r);var i=function(f){return function(h){return t.getTextAngle(h,f)}},o=function(f){return function(h){var d=h.pstyle(f);return d&&d.value}},a=function(f){return function(h){return h.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var h=f.pstyle("text-events").strValue==="yes";return h?S0.USE_BB:S0.IGNORE},u=function(f){var h=f.position(),d=h.x,v=h.y,p=f.outerWidth(),m=f.outerHeight();return{w:p,h:m,x1:d-p/2,y1:v-m/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:nH,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:a("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:a("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:cw(e.getLabelKey,null),getBoundingBox:fw(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:cw(e.getSourceLabelKey,"source"),getBoundingBox:fw(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:o("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:cw(e.getTargetLabelKey,"target"),getBoundingBox:fw(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:o("target-label")});var l=gg(function(){t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,f){var h=!1;f&&f.length>0&&(h|=t.drawing.invalidate(f)),h&&l()}),xH(t)};function OH(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return U5(t)}function d4(r,e){var t=r._private.rscratch;return fo(t,"labelWrapCachedLines",e)||[]}var cw=function(e,t){return function(n){var i=e(n),o=d4(n,t);return o.length>1?o.map(function(a,s){return"".concat(i,"_").concat(s)}):i}},fw=function(e,t){return function(n,i){var o=e(n);if(typeof i=="string"){var a=i.indexOf("_");if(a>0){var s=Number(i.substring(a+1)),u=d4(n,t),l=o.h/u.length,c=l*s,f=o.y1+c;return{x1:o.x1,w:o.w,y1:f,h:l,yOffset:c}}}return o}};function xH(r){{var e=r.render;r.render=function(o){o=o||{};var a=r.cy;r.webgl&&(a.zoom()>o4?(SH(r),e.call(r,o)):(TH(r),p4(r,o,lp.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(o){t.call(r,o),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(o,a,s,u){return kH(r,o,a)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(o,a){i.call(r,o,a),o==="viewport"||o==="bounds"?r.pickingFrameBuffer.needsDraw=!0:o==="background"&&r.drawing.invalidate(a,{type:"node-body"})}}}function SH(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function TH(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function CH(r){var e=r.canvasWidth,t=r.canvasHeight,n=d2(r),i=n.pan,o=n.zoom,a=sw();Jm(a,a,[i.x,i.y]),HT(a,a,[o,o]);var s=sw();hH(s,e,t);var u=sw();return fH(u,s,a),u}function v4(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=d2(r),o=i.pan,a=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(o.x,o.y),e.scale(a,a)}function PH(r,e){r.drawSelectionRectangle(e,function(t){return v4(r,t)})}function AH(r){var e=r.data.contexts[r.NODE];e.save(),v4(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function RH(r){var e=function(i,o,a){for(var s=i.atlasManager.getAtlasCollection(o),u=r.data.contexts[r.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],h=f.canvas;if(h){var d=h.width,v=h.height,p=d*c,m=h.height*a,y=.4;u.save(),u.scale(y,y),u.drawImage(h,p,m),u.strokeStyle="black",u.rect(p,m,d,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function IH(r,e,t,n,i){var o,a,s,u,l=d2(r),c=l.pan,f=l.zoom;{var h=rH(r,c,f,e,t),d=Fn(h,2),v=d[0],p=d[1],m=6;o=v-m/2,a=p-m/2,s=m,u=m}if(s===0||u===0)return[];var y=r.data.contexts[r.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),p4(r,null,lp.PICKING),r.pickingFrameBuffer.needsDraw=!1);var b=s*u,g=new Uint8Array(b*4);y.readPixels(o,a,s,u,y.RGBA,y.UNSIGNED_BYTE,g),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var _=new Set,w=0;w<b;w++){var x=g.slice(w*4,w*4+4),E=oH(x)-1;E>=0&&_.add(E)}return _}function kH(r,e,t){var n=IH(r,e,t),i=r.getCachedZSortedEles(),o,a,s=po(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!o&&c.isNode()&&(o=c),!a&&c.isEdge()&&(a=c),o&&a)break}}catch(f){s.e(f)}finally{s.f()}return[o,a].filter(Boolean)}function hw(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function p4(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,o=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&PH(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var a=r.data.contexts[r.WEBGL];t.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=CH(r),u=r.getCachedZSortedEles();if(o=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)hw(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)hw(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)hw(r,f,u[f]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(AH(r),RH(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),p=i.getDebugInfo(),m=["".concat(o," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(d)"WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(m);else{"WebGL (".concat(t.name,") - frame time ").concat(v,"ms"),"  ".concat(m);var y=p.atlasInfo,b=po(y),g;try{for(b.s();!(g=b.n()).done;){var _=g.value;"  ".concat(_.type,": ").concat(_.keyCount," keys, ").concat(_.atlasCount," atlases")}}catch(w){b.e(w)}finally{b.f()}}}r.data.gc&&(r.data.gc=!1,i.gc())}var Pl={};Pl.drawPolygonPath=function(r,e,t,n,i,o){var a=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+a*o[0],t+s*o[1]);for(var u=1;u<o.length/2;u++)r.lineTo(e+a*o[u*2],t+s*o[u*2+1]);r.closePath()};Pl.drawRoundPolygonPath=function(r,e,t,n,i,o,a){a.forEach(function(s){return K3(r,s)}),r.closePath()};Pl.drawRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?gl(n,i):Math.min(o,s,a);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+a,t-s,e+a,t,u),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.arcTo(e-a,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};Pl.drawBottomRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?gl(n,i):o;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+a,t-s),r.lineTo(e+a,t),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.lineTo(e-a,t-s),r.lineTo(e,t-s),r.closePath()};Pl.drawCutRectanglePath=function(r,e,t,n,i,o,a){var s=n/2,u=i/2,l=a==="auto"?JC():a;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};Pl.drawBarrelPath=function(r,e,t,n,i){var o=n/2,a=i/2,s=e-o,u=e+o,l=t-a,c=t+a,f=kT(n,i),h=f.widthOffset,d=f.heightOffset,v=f.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,l+d),r.lineTo(s,c-d),r.quadraticCurveTo(s+v,c,s+h,c),r.lineTo(u-h,c),r.quadraticCurveTo(u-v,c,u,c-d),r.lineTo(u,l+d),r.quadraticCurveTo(u-v,l,u-h,l),r.lineTo(s+h,l),r.quadraticCurveTo(s+v,l,s,l+d),r.closePath()};var dI=Math.sin(0),vI=Math.cos(0),YT={},XT={},g4=Math.PI/40;for(var Sh=0*Math.PI;Sh<2*Math.PI;Sh+=g4)YT[Sh]=Math.sin(Sh),XT[Sh]=Math.cos(Sh);Pl.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var o,a,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=g4)o=e-s*YT[l]*dI+s*XT[l]*vI,a=t+u*XT[l]*dI+u*YT[l]*vI,l===0?r.moveTo(o,a):r.lineTo(o,a);r.closePath()};var Eg={};Eg.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Eg.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),o=r.full?Math.ceil(n.w):i[2],a=r.full?Math.ceil(n.h):i[3],s=ot(r.maxWidth)||ot(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)o*=r.scale,a*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;ot(r.maxWidth)&&(c=l*r.maxWidth/o),ot(r.maxHeight)&&(f=l*r.maxHeight/a),l=Math.min(c,f),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var h=document.createElement("canvas");h.width=o,h.height=a,h.style.width=o+"px",h.style.height=a+"px";var d=h.getContext("2d");if(o>0&&a>0){d.clearRect(0,0,o,a),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=e.pan(),m={x:p.x*l,y:p.y*l};l*=e.zoom(),d.translate(m.x,m.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-m.x,-m.y)}r.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=r.bg,d.rect(0,0,o,a),d.fill())}return h};function DH(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([n],{type:e})}function pI(r){var e=r.indexOf(",");return r.substr(e+1)}function y4(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new dd(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(a){o(a)}});case"blob":return DH(pI(n()),t);case"base64":return pI(n());case"base64uri":default:return n()}}Eg.png=function(r){return y4(r,this.bufferCanvasImage(r),"image/png")};Eg.jpg=function(r){return y4(r,this.bufferCanvasImage(r),"image/jpeg")};var m4={};m4.nodeShapeImpl=function(r,e,t,n,i,o,a,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,o);case"polygon":return this.drawPolygonPath(e,t,n,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,o,s);case"barrel":return this.drawBarrelPath(e,t,n,i,o)}};var MH=b4,ir=b4.prototype;ir.CANVAS_LAYERS=3;ir.SELECT_BOX=0;ir.DRAG=1;ir.NODE=2;ir.WEBGL=3;ir.CANVAS_TYPES=["2d","2d","2d","webgl2"];ir.BUFFER_COUNT=3;ir.TEXTURE_BUFFER=0;ir.MOTIONBLUR_BUFFER_NODE=1;ir.MOTIONBLUR_BUFFER_DRAG=2;function b4(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(ir.CANVAS_LAYERS=e.CANVAS_LAYERS=4),e.data={canvases:new Array(ir.CANVAS_LAYERS),contexts:new Array(ir.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ir.CANVAS_LAYERS),bufferCanvases:new Array(ir.BUFFER_COUNT),bufferContexts:new Array(ir.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Pz()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<ir.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=ir.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||ln("Could not create canvas of type "+f),Object.keys(u).forEach(function(te){c.style[te]=u[te]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(ir.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ir.NODE].setAttribute("data-id","layer"+ir.NODE+"-node"),e.data.canvases[ir.SELECT_BOX].setAttribute("data-id","layer"+ir.SELECT_BOX+"-selectbox"),e.data.canvases[ir.DRAG].setAttribute("data-id","layer"+ir.DRAG+"-drag"),e.data.canvases[ir.WEBGL]&&e.data.canvases[ir.WEBGL].setAttribute("data-id","layer"+ir.WEBGL+"-webgl");for(var l=0;l<ir.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=$i(),d=function(ee){return{x:(ee.x1+ee.x2)/2,y:(ee.y1+ee.y2)/2}},v=function(ee){return{x:-ee.w/2,y:-ee.h/2}},p=function(ee){var re=ee[0]._private,he=re.oldBackgroundTimestamp===re.backgroundTimestamp;return!he},m=function(ee){return ee[0]._private.nodeKey},y=function(ee){return ee[0]._private.labelStyleKey},b=function(ee){return ee[0]._private.sourceLabelStyleKey},g=function(ee){return ee[0]._private.targetLabelStyleKey},_=function(ee,re,he,ve,_e){return e.drawElement(ee,re,he,!1,!1,_e)},w=function(ee,re,he,ve,_e){return e.drawElementText(ee,re,he,ve,"main",_e)},x=function(ee,re,he,ve,_e){return e.drawElementText(ee,re,he,ve,"source",_e)},E=function(ee,re,he,ve,_e){return e.drawElementText(ee,re,he,ve,"target",_e)},O=function(ee){return ee.boundingBox(),ee[0]._private.bodyBounds},C=function(ee){return ee.boundingBox(),ee[0]._private.labelBounds.main||h},A=function(ee){return ee.boundingBox(),ee[0]._private.labelBounds.source||h},R=function(ee){return ee.boundingBox(),ee[0]._private.labelBounds.target||h},k=function(ee,re){return re},D=function(ee){return d(O(ee))},L=function(ee,re,he){var ve=ee?ee+"-":"";return{x:re.x+he.pstyle(ve+"text-margin-x").pfValue,y:re.y+he.pstyle(ve+"text-margin-y").pfValue}},j=function(ee,re,he){var ve=ee[0]._private.rscratch;return{x:ve[re],y:ve[he]}},q=function(ee){return L("",j(ee,"labelX","labelY"),ee)},B=function(ee){return L("source",j(ee,"sourceLabelX","sourceLabelY"),ee)},U=function(ee){return L("target",j(ee,"targetLabelX","targetLabelY"),ee)},W=function(ee){return v(O(ee))},H=function(ee){return v(A(ee))},Y=function(ee){return v(R(ee))},Z=function(ee){var re=C(ee),he=v(C(ee));if(ee.isNode()){switch(ee.pstyle("text-halign").value){case"left":he.x=-re.w-(re.leftPad||0);break;case"right":he.x=-(re.rightPad||0);break}switch(ee.pstyle("text-valign").value){case"top":he.y=-re.h-(re.topPad||0);break;case"bottom":he.y=-(re.botPad||0);break}}return he},ce=e.data.eleTxrCache=new Wv(e,{getKey:m,doesEleInvalidateKey:p,drawElement:_,getBoundingBox:O,getRotationPoint:D,getRotationOffset:W,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),$=e.data.lblTxrCache=new Wv(e,{getKey:y,drawElement:w,getBoundingBox:C,getRotationPoint:q,getRotationOffset:Z,isVisible:k}),K=e.data.slbTxrCache=new Wv(e,{getKey:b,drawElement:x,getBoundingBox:A,getRotationPoint:B,getRotationOffset:H,isVisible:k}),ie=e.data.tlbTxrCache=new Wv(e,{getKey:g,drawElement:E,getBoundingBox:R,getRotationPoint:U,getRotationOffset:Y,isVisible:k}),ae=e.data.lyrTxrCache=new a4(e);e.onUpdateEleCalcs(function(ee,re){ce.invalidateElements(re),$.invalidateElements(re),K.invalidateElements(re),ie.invalidateElements(re),ae.invalidateElements(re);for(var he=0;he<re.length;he++){var ve=re[he]._private;ve.oldBackgroundTimestamp=ve.backgroundTimestamp}});var le=function(ee){for(var re=0;re<ee.length;re++)ae.enqueueElementRefinement(ee[re].ele)};ce.onDequeue(le),$.onDequeue(le),K.onDequeue(le),ie.onDequeue(le),r.webgl&&e.initWebgl(r,{getStyleKey:m,getLabelKey:y,getSourceLabelKey:b,getTargetLabelKey:g,drawElement:_,drawLabel:w,drawSourceLabel:x,drawTargetLabel:E,getElementBox:O,getLabelBox:C,getSourceLabelBox:A,getTargetLabelBox:R,getElementRotationPoint:D,getElementRotationOffset:W,getLabelRotationPoint:q,getSourceLabelRotationPoint:B,getTargetLabelRotationPoint:U,getLabelRotationOffset:Z,getSourceLabelRotationOffset:H,getTargetLabelRotationOffset:Y})}ir.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[ir.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[ir.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[ir.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var LH=typeof Path2D<"u";ir.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};ir.usePaths=function(){return LH&&this.pathsEnabled};ir.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};ir.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};ir.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Wn(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[s4,bs,ou,h2,of,Cl,Ki,h4,Pl,Eg,m4].forEach(function(r){jt(ir,r)});var NH=[{name:"null",impl:Y3},{name:"base",impl:n4},{name:"canvas",impl:MH}],jH=[{type:"layout",extensions:uW},{type:"renderer",extensions:NH}],_4={},w4={};function E4(r,e,t){var n=t,i=function(O){Nr("Can not register `"+e+"` for `"+r+"` since `"+O+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Qp.prototype[e])return i(e);Qp.prototype[e]=t}else if(r==="collection"){if(gi.prototype[e])return i(e);gi.prototype[e]=t}else if(r==="layout"){for(var o=function(O){this.options=O,t.call(this,O),xr(this._private)||(this._private={}),this._private.cy=O.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=t.prototype.stop;a.stop=function(){var E=this.options;if(E&&E.animate){var O=this.animations;if(O)for(var C=0;C<O.length;C++)O[C].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var f=function(O){return O._private.cy},h={addEventFields:function(O,C){C.layout=O,C.cy=f(O),C.target=O},bubble:function(){return!0},parent:function(O){return f(O)}};jt(a,{createEmitter:function(){return this._private.emitter=new eb(h,this),this},emitter:function(){return this._private.emitter},on:function(O,C){return this.emitter().on(O,C),this},one:function(O,C){return this.emitter().one(O,C),this},once:function(O,C){return this.emitter().one(O,C),this},removeListener:function(O,C){return this.emitter().removeListener(O,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(O,C){return this.emitter().emit(O,C),this}}),Lr.eventAliasesOn(a),n=o}else if(r==="renderer"&&e!=="null"&&e!=="base"){var d=O4("renderer","base"),v=d.prototype,p=t,m=t.prototype,y=function(){d.apply(this,arguments),p.apply(this,arguments)},b=y.prototype;for(var g in v){var _=v[g],w=m[g]!=null;if(w)return i(g);b[g]=_}for(var x in m)b[x]=m[x];v.clientFunctions.forEach(function(E){b[E]=b[E]||function(){ln("Renderer does not implement `renderer."+E+"()` on its prototype")}}),n=y}else if(r==="__proto__"||r==="constructor"||r==="prototype")return ln(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return q5({map:_4,keys:[r,e],value:n})}function O4(r,e){return z5({map:_4,keys:[r,e]})}function FH(r,e,t,n,i){return q5({map:w4,keys:[r,e,t,n],value:i})}function BH(r,e,t,n){return z5({map:w4,keys:[r,e,t,n]})}var $T=function(){if(arguments.length===2)return O4.apply(null,arguments);if(arguments.length===3)return E4.apply(null,arguments);if(arguments.length===4)return BH.apply(null,arguments);if(arguments.length===5)return FH.apply(null,arguments);ln("Invalid extension access syntax")};Qp.prototype.extension=$T;jH.forEach(function(r){r.extensions.forEach(function(e){E4(r.type,e.name,e.impl)})});var T0=function(){if(!(this instanceof T0))return new T0;this.length=0},Zc=T0.prototype;Zc.instanceString=function(){return"stylesheet"};Zc.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Zc.css=function(r,e){var t=this.length-1;if(Ct(r))this[t].properties.push({name:r,value:e});else if(xr(r))for(var n=r,i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a];if(s!=null){var u=ni.properties[a]||ni.properties[V0(a)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};Zc.style=Zc.css;Zc.generateStyle=function(r){var e=new ni(r);return this.appendToStyle(e)};Zc.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var o=0;o<i.length;o++){var a=i[o];r.css(a.name,a.value)}}return r};var UH="3.33.1",_l=function(e){if(e===void 0&&(e={}),xr(e))return new Qp(e);if(Ct(e))return $T.apply($T,arguments)};_l.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(_l),r.apply(null,e),this};_l.warnings=function(r){return $5(r)};_l.version=UH;_l.stylesheet=_l.Stylesheet=T0;var e0={exports:{}},t0={exports:{}},r0={exports:{}},qH=r0.exports,gI;function zH(){return gI||(gI=1,(function(r,e){(function(n,i){r.exports=i()})(qH,function(){return(function(t){var n={};function i(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=n,i.i=function(o){return o},i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:s})},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=26)})([(function(t,n,i){function o(){}o.QUALITY=1,o.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,o.DEFAULT_INCREMENTAL=!1,o.DEFAULT_ANIMATION_ON_LAYOUT=!0,o.DEFAULT_ANIMATION_DURING_LAYOUT=!1,o.DEFAULT_ANIMATION_PERIOD=50,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,o.DEFAULT_GRAPH_MARGIN=15,o.NODE_DIMENSIONS_INCLUDE_LABELS=!1,o.SIMPLE_NODE_SIZE=40,o.SIMPLE_NODE_HALF_SIZE=o.SIMPLE_NODE_SIZE/2,o.EMPTY_COMPOUND_NODE_SIZE=40,o.MIN_EDGE_LENGTH=1,o.WORLD_BOUNDARY=1e6,o.INITIAL_WORLD_BOUNDARY=o.WORLD_BOUNDARY/1e3,o.WORLD_CENTER_X=1200,o.WORLD_CENTER_Y=900,t.exports=o}),(function(t,n,i){var o=i(2),a=i(8),s=i(9);function u(c,f,h){o.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=c,this.target=f}u.prototype=Object.create(o.prototype);for(var l in o)u[l]=o[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,f){for(var h=this.getOtherEnd(c),d=f.getGraphManager().getRoot();;){if(h.getOwner()==f)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u}),(function(t,n,i){function o(a){this.vGraphObject=a}t.exports=o}),(function(t,n,i){var o=i(2),a=i(10),s=i(13),u=i(0),l=i(16),c=i(4);function f(d,v,p,m){p==null&&m==null&&(m=v),o.call(this,m),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=d,p!=null&&v!=null?this.rect=new s(v.x,v.y,p.width,p.height):this.rect=new s}f.prototype=Object.create(o.prototype);for(var h in o)f[h]=o[h];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},f.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},f.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},f.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},f.prototype.getEdgeListToNode=function(d){var v=[],p=this;return p.edges.forEach(function(m){if(m.target==d){if(m.source!=p)throw"Incorrect edge source!";v.push(m)}}),v},f.prototype.getEdgesBetween=function(d){var v=[],p=this;return p.edges.forEach(function(m){if(!(m.source==p||m.target==p))throw"Incorrect edge source and/or target";(m.target==d||m.source==d)&&v.push(m)}),v},f.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(p){if(p.source==v)d.add(p.target);else{if(p.target!=v)throw"Incorrect incidency!";d.add(p.source)}}),d},f.prototype.withChildren=function(){var d=new Set,v,p;if(d.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)v=m[y],p=v.withChildren(),p.forEach(function(b){d.add(b)});return d},f.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var p=this.child.getNodes(),m=0;m<p.length;m++)v=p[m],d+=v.getNoOfChildren();return d==0&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,v,p=-u.INITIAL_WORLD_BOUNDARY,m=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(m-p)+p;var y=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(b-y)+y,this.rect.x=d,this.rect.y=v},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),p=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>p&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-p)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-p),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var p=this.rect.y;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var m=new c(v,p),y=d.inverseTransformPoint(m);this.setLocation(y.x,y.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=f}),(function(t,n,i){function o(a,s){a==null&&s==null?(this.x=0,this.y=0):(this.x=a,this.y=s)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.setX=function(a){this.x=a},o.prototype.setY=function(a){this.y=a},o.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},o.prototype.getCopy=function(){return new o(this.x,this.y)},o.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},t.exports=o}),(function(t,n,i){var o=i(2),a=i(10),s=i(0),u=i(6),l=i(3),c=i(1),f=i(13),h=i(12),d=i(11);function v(m,y,b){o.call(this,b),this.estimatedSize=a.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}v.prototype=Object.create(o.prototype);for(var p in o)v[p]=o[p];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(m,y,b){if(y==null&&b==null){var g=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(g)>-1)throw"Node already in graph!";return g.owner=this,this.getNodes().push(g),g}else{var _=m;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(_.source=y,_.target=b,_.isInterGraph=!1,this.getEdges().push(_),y.edges.push(_),b!=y&&b.edges.push(_),_)}},v.prototype.remove=function(m){var y=m;if(m instanceof l){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),g,_=b.length,w=0;w<_;w++)g=b[w],g.isInterGraph?this.graphManager.remove(g):g.source.owner.remove(g);var x=this.nodes.indexOf(y);if(x==-1)throw"Node not in owner node list!";this.nodes.splice(x,1)}else if(m instanceof c){var g=m;if(g==null)throw"Edge is null!";if(!(g.source!=null&&g.target!=null))throw"Source and/or target is null!";if(!(g.source.owner!=null&&g.target.owner!=null&&g.source.owner==this&&g.target.owner==this))throw"Source and/or target owner is invalid!";var E=g.source.edges.indexOf(g),O=g.target.edges.indexOf(g);if(!(E>-1&&O>-1))throw"Source and/or target doesn't know this edge!";g.source.edges.splice(E,1),g.target!=g.source&&g.target.edges.splice(O,1);var x=g.source.owner.getEdges().indexOf(g);if(x==-1)throw"Not in owner's edge list!";g.source.owner.getEdges().splice(x,1)}},v.prototype.updateLeftTop=function(){for(var m=a.MAX_VALUE,y=a.MAX_VALUE,b,g,_,w=this.getNodes(),x=w.length,E=0;E<x;E++){var O=w[E];b=O.getTop(),g=O.getLeft(),m>b&&(m=b),y>g&&(y=g)}return m==a.MAX_VALUE?null:(w[0].getParent().paddingLeft!=null?_=w[0].getParent().paddingLeft:_=this.margin,this.left=y-_,this.top=m-_,new h(this.left,this.top))},v.prototype.updateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,g=a.MAX_VALUE,_=-a.MAX_VALUE,w,x,E,O,C,A=this.nodes,R=A.length,k=0;k<R;k++){var D=A[k];m&&D.child!=null&&D.updateBounds(),w=D.getLeft(),x=D.getRight(),E=D.getTop(),O=D.getBottom(),y>w&&(y=w),b<x&&(b=x),g>E&&(g=E),_<O&&(_=O)}var L=new f(y,g,b-y,_-g);y==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),A[0].getParent().paddingLeft!=null?C=A[0].getParent().paddingLeft:C=this.margin,this.left=L.x-C,this.right=L.x+L.width+C,this.top=L.y-C,this.bottom=L.y+L.height+C},v.calculateBounds=function(m){for(var y=a.MAX_VALUE,b=-a.MAX_VALUE,g=a.MAX_VALUE,_=-a.MAX_VALUE,w,x,E,O,C=m.length,A=0;A<C;A++){var R=m[A];w=R.getLeft(),x=R.getRight(),E=R.getTop(),O=R.getBottom(),y>w&&(y=w),b<x&&(b=x),g>E&&(g=E),_<O&&(_=O)}var k=new f(y,g,b-y,_-g);return k},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var m=0,y=this.nodes,b=y.length,g=0;g<b;g++){var _=y[g];m+=_.calcEstimatedSize()}return m==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new d,b=new Set,g=this.nodes[0],_,w,x=g.withChildren();for(x.forEach(function(k){y.push(k),b.add(k)});y.length!==0;){g=y.shift(),_=g.getEdges();for(var E=_.length,O=0;O<E;O++){var C=_[O];if(w=C.getOtherEndInGraph(g,this),w!=null&&!b.has(w)){var A=w.withChildren();A.forEach(function(k){y.push(k),b.add(k)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var R=0;b.forEach(function(k){k.owner==m&&R++}),R==this.nodes.length&&(this.isConnected=!0)}},t.exports=v}),(function(t,n,i){var o,a=i(1);function s(u){o=i(5),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),c=this.add(u,l);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,l,c,f,h){if(c==null&&f==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=c,f=l,c=u;var d=f.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return c.isInterGraph=!1,d.add(c,f,h);if(c.isInterGraph=!0,c.source=f,c.target=h,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof o){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(l.getEdges());for(var f,h=c.length,d=0;d<h;d++)f=c[d],l.remove(f);var v=[];v=v.concat(l.getNodes());var p;h=v.length;for(var d=0;d<h;d++)p=v[d],l.remove(p);l==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(l);this.graphs.splice(m,1),l.parent=null}else if(u instanceof a){if(f=u,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var m=f.source.edges.indexOf(f);if(f.source.edges.splice(m,1),m=f.target.edges.indexOf(f),f.target.edges.splice(m,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var m=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(m,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),c=l.length,f=0;f<c;f++)u=u.concat(l[f].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var c=0;c<l.length;c++)u=u.concat(l[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var c=u.getOwner(),f;do{if(f=c.getParent(),f==null)break;if(f==l)return!0;if(c=f.getOwner(),c==null)break}while(!0);c=l.getOwner();do{if(f=c.getParent(),f==null)break;if(f==u)return!0;if(c=f.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,c,f,h,d=this.getAllEdges(),v=d.length,p=0;p<v;p++){if(u=d[p],l=u.source,c=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=c,l==c){u.lca=l.getOwner();continue}for(f=l.getOwner();u.lca==null;){for(u.targetInLca=c,h=c.getOwner();u.lca==null;){if(h==f){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(f==this.rootGraph)break;u.lca==null&&(u.sourceInLca=f.getParent(),f=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var f=l.getOwner();do{if(f==null)break;if(f==c)return f;f=f.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var c,f=u.getNodes(),h=f.length,d=0;d<h;d++)c=f[d],c.inclusionTreeDepth=l,c.child!=null&&this.calcInclusionTreeDepths(c.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,c=0;c<l;c++)if(u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},t.exports=s}),(function(t,n,i){var o=i(0);function a(){}for(var s in o)a[s]=o[s];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=a}),(function(t,n,i){var o=i(12);function a(){}a.calcSeparationAmount=function(s,u,l,c){if(!s.intersects(u))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,f),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var h=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*f[0]*(v/2+c),l[1]=-1*f[1]*(d/2+c)},a.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},a.getIntersection2=function(s,u,l){var c=s.getCenterX(),f=s.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(s.intersects(u))return l[0]=c,l[1]=f,l[2]=h,l[3]=d,!0;var v=s.getX(),p=s.getY(),m=s.getRight(),y=s.getX(),b=s.getBottom(),g=s.getRight(),_=s.getWidthHalf(),w=s.getHeightHalf(),x=u.getX(),E=u.getY(),O=u.getRight(),C=u.getX(),A=u.getBottom(),R=u.getRight(),k=u.getWidthHalf(),D=u.getHeightHalf(),L=!1,j=!1;if(c===h){if(f>d)return l[0]=c,l[1]=p,l[2]=h,l[3]=A,!1;if(f<d)return l[0]=c,l[1]=b,l[2]=h,l[3]=E,!1}else if(f===d){if(c>h)return l[0]=v,l[1]=f,l[2]=O,l[3]=d,!1;if(c<h)return l[0]=m,l[1]=f,l[2]=x,l[3]=d,!1}else{var q=s.height/s.width,B=u.height/u.width,U=(d-f)/(h-c),W=void 0,H=void 0,Y=void 0,Z=void 0,ce=void 0,$=void 0;if(-q===U?c>h?(l[0]=y,l[1]=b,L=!0):(l[0]=m,l[1]=p,L=!0):q===U&&(c>h?(l[0]=v,l[1]=p,L=!0):(l[0]=g,l[1]=b,L=!0)),-B===U?h>c?(l[2]=C,l[3]=A,j=!0):(l[2]=O,l[3]=E,j=!0):B===U&&(h>c?(l[2]=x,l[3]=E,j=!0):(l[2]=R,l[3]=A,j=!0)),L&&j)return!1;if(c>h?f>d?(W=this.getCardinalDirection(q,U,4),H=this.getCardinalDirection(B,U,2)):(W=this.getCardinalDirection(-q,U,3),H=this.getCardinalDirection(-B,U,1)):f>d?(W=this.getCardinalDirection(-q,U,1),H=this.getCardinalDirection(-B,U,3)):(W=this.getCardinalDirection(q,U,2),H=this.getCardinalDirection(B,U,4)),!L)switch(W){case 1:Z=p,Y=c+-w/U,l[0]=Y,l[1]=Z;break;case 2:Y=g,Z=f+_*U,l[0]=Y,l[1]=Z;break;case 3:Z=b,Y=c+w/U,l[0]=Y,l[1]=Z;break;case 4:Y=y,Z=f+-_*U,l[0]=Y,l[1]=Z;break}if(!j)switch(H){case 1:$=E,ce=h+-D/U,l[2]=ce,l[3]=$;break;case 2:ce=R,$=d+k*U,l[2]=ce,l[3]=$;break;case 3:$=A,ce=h+D/U,l[2]=ce,l[3]=$;break;case 4:ce=C,$=d+-k*U,l[2]=ce,l[3]=$;break}}return!1},a.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},a.getIntersection=function(s,u,l,c){if(c==null)return this.getIntersection2(s,u,l);var f=s.x,h=s.y,d=u.x,v=u.y,p=l.x,m=l.y,y=c.x,b=c.y,g=void 0,_=void 0,w=void 0,x=void 0,E=void 0,O=void 0,C=void 0,A=void 0,R=void 0;return w=v-h,E=f-d,C=d*h-f*v,x=b-m,O=p-y,A=y*m-p*b,R=w*O-x*E,R===0?null:(g=(E*A-O*C)/R,_=(x*C-w*A)/R,new o(g,_))},a.angleOfVector=function(s,u,l,c){var f=void 0;return s!==l?(f=Math.atan((c-u)/(l-s)),l<s?f+=Math.PI:c<u&&(f+=this.TWO_PI)):c<u?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},a.doIntersect=function(s,u,l,c){var f=s.x,h=s.y,d=u.x,v=u.y,p=l.x,m=l.y,y=c.x,b=c.y,g=(d-f)*(b-m)-(y-p)*(v-h);if(g===0)return!1;var _=((b-m)*(y-f)+(p-y)*(b-h))/g,w=((h-v)*(y-f)+(d-f)*(b-h))/g;return 0<_&&_<1&&0<w&&w<1},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,t.exports=a}),(function(t,n,i){function o(){}o.sign=function(a){return a>0?1:a<0?-1:0},o.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},o.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},t.exports=o}),(function(t,n,i){function o(){}o.MAX_VALUE=2147483647,o.MIN_VALUE=-2147483648,t.exports=o}),(function(t,n,i){var o=(function(){function f(h,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,d,v){return d&&f(h.prototype,d),v&&f(h,v),h}})();function a(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,p){return h!==null?h.next=d:p.head=d,v!==null?v.prev=d:p.tail=d,d.prev=h,d.next=v,p.length++,d},l=function(h,d){var v=h.prev,p=h.next;return v!==null?v.next=p:d.head=p,p!==null?p.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},c=(function(){function f(h){var d=this;a(this,f),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return o(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,s(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,s(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,s(d),null,this)}},{key:"unshift",value:function(d){return u(null,s(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,p=this.head;v<d;)p=p.next,v++;return p.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var p=1,m=this.head;p<d;)m=m.next,p++;m.value=v}}}]),f})();t.exports=c}),(function(t,n,i){function o(a,s,u){this.x=null,this.y=null,a==null&&s==null&&u==null?(this.x=0,this.y=0):typeof a=="number"&&typeof s=="number"&&u==null?(this.x=a,this.y=s):a.constructor.name=="Point"&&s==null&&u==null&&(u=a,this.x=u.x,this.y=u.y)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.getLocation=function(){return new o(this.x,this.y)},o.prototype.setLocation=function(a,s,u){a.constructor.name=="Point"&&s==null&&u==null?(u=a,this.setLocation(u.x,u.y)):typeof a=="number"&&typeof s=="number"&&u==null&&(parseInt(a)==a&&parseInt(s)==s?this.move(a,s):(this.x=Math.floor(a+.5),this.y=Math.floor(s+.5)))},o.prototype.move=function(a,s){this.x=a,this.y=s},o.prototype.translate=function(a,s){this.x+=a,this.y+=s},o.prototype.equals=function(a){if(a.constructor.name=="Point"){var s=a;return this.x==s.x&&this.y==s.y}return this==a},o.prototype.toString=function(){return new o().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=o}),(function(t,n,i){function o(a,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&s!=null&&u!=null&&l!=null&&(this.x=a,this.y=s,this.width=u,this.height=l)}o.prototype.getX=function(){return this.x},o.prototype.setX=function(a){this.x=a},o.prototype.getY=function(){return this.y},o.prototype.setY=function(a){this.y=a},o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},o.prototype.getRight=function(){return this.x+this.width},o.prototype.getBottom=function(){return this.y+this.height},o.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},o.prototype.getCenterX=function(){return this.x+this.width/2},o.prototype.getMinX=function(){return this.getX()},o.prototype.getMaxX=function(){return this.getX()+this.width},o.prototype.getCenterY=function(){return this.y+this.height/2},o.prototype.getMinY=function(){return this.getY()},o.prototype.getMaxY=function(){return this.getY()+this.height},o.prototype.getWidthHalf=function(){return this.width/2},o.prototype.getHeightHalf=function(){return this.height/2},t.exports=o}),(function(t,n,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function a(){}a.lastID=0,a.createID=function(s){return a.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=a.getString(),a.lastID++),s.uniqueID)},a.getString=function(s){return s==null&&(s=a.lastID),"Object#"+s},a.isPrimitive=function(s){var u=typeof s>"u"?"undefined":o(s);return s==null||u!="object"&&u!="function"},t.exports=a}),(function(t,n,i){function o(p){if(Array.isArray(p)){for(var m=0,y=Array(p.length);m<p.length;m++)y[m]=p[m];return y}else return Array.from(p)}var a=i(0),s=i(6),u=i(3),l=i(1),c=i(5),f=i(4),h=i(17),d=i(27);function v(p){d.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,p!=null&&(this.isRemoteUse=p)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var p=new s(this);return this.graphManager=p,p},v.prototype.newGraph=function(p){return new c(null,this.graphManager,p)},v.prototype.newNode=function(p){return new u(this.graphManager,p)},v.prototype.newEdge=function(p){return new l(null,null,p)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var p;return this.checkLayoutSuccess()?p=!1:p=this.layout(),a.ANIMATE==="during"?!1:(p&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,p)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var p=this.graphManager.getAllEdges(),m=0;m<p.length;m++)p[m];for(var y=this.graphManager.getRoot().getNodes(),m=0;m<y.length;m++)y[m];this.update(this.graphManager.getRoot())}},v.prototype.update=function(p){if(p==null)this.update2();else if(p instanceof u){var m=p;if(m.getChild()!=null)for(var y=m.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(m.vGraphObject!=null){var g=m.vGraphObject;g.update(m)}}else if(p instanceof l){var _=p;if(_.vGraphObject!=null){var w=_.vGraphObject;w.update(_)}}else if(p instanceof c){var x=p;if(x.vGraphObject!=null){var E=x.vGraphObject;E.update(x)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(p){if(p==null)this.transform(new f(0,0));else{var m=new h,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){m.setWorldOrgX(p.x),m.setWorldOrgY(p.y),m.setDeviceOrgX(y.x),m.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),g,_=0;_<b.length;_++)g=b[_],g.transform(m)}}},v.prototype.positionNodesRandomly=function(p){if(p==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,y,b=p.getNodes(),g=0;g<b.length;g++)m=b[g],y=m.getChild(),y==null||y.getNodes().length==0?m.scatter():(this.positionNodesRandomly(y),m.updateBounds())},v.prototype.getFlatForest=function(){for(var p=[],m=!0,y=this.graphManager.getRoot().getNodes(),b=!0,g=0;g<y.length;g++)y[g].getChild()!=null&&(b=!1);if(!b)return p;var _=new Set,w=[],x=new Map,E=[];for(E=E.concat(y);E.length>0&&m;){for(w.push(E[0]);w.length>0&&m;){var O=w[0];w.splice(0,1),_.add(O);for(var C=O.getEdges(),g=0;g<C.length;g++){var A=C[g].getOtherEnd(O);if(x.get(O)!=A)if(!_.has(A))w.push(A),x.set(A,O);else{m=!1;break}}}if(!m)p=[];else{var R=[].concat(o(_));p.push(R);for(var g=0;g<R.length;g++){var k=R[g],D=E.indexOf(k);D>-1&&E.splice(D,1)}_=new Set,x=new Map}}return p},v.prototype.createDummyNodesForBendpoints=function(p){for(var m=[],y=p.source,b=this.graphManager.calcLowestCommonAncestor(p.source,p.target),g=0;g<p.bendpoints.length;g++){var _=this.newNode(null);_.setRect(new Point(0,0),new Dimension(1,1)),b.add(_);var w=this.newEdge(null);this.graphManager.add(w,y,_),m.add(_),y=_}var w=this.newEdge(null);return this.graphManager.add(w,y,p.target),this.edgeToDummyNodes.set(p,m),p.isInterGraph()?this.graphManager.remove(p):b.remove(p),m},v.prototype.createBendpointsFromDummyNodes=function(){var p=[];p=p.concat(this.graphManager.getAllEdges()),p=[].concat(o(this.edgeToDummyNodes.keys())).concat(p);for(var m=0;m<p.length;m++){var y=p[m];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),g=0;g<b.length;g++){var _=b[g],w=new f(_.getCenterX(),_.getCenterY()),x=y.bendpoints.get(g);x.x=w.x,x.y=w.y,_.getOwner().remove(_)}this.graphManager.add(y,y.source,y.target)}}},v.transform=function(p,m,y,b){if(y!=null&&b!=null){var g=m;if(p<=50){var _=m/y;g-=(m-_)/50*(50-p)}else{var w=m*b;g+=(w-m)/50*(p-50)}return g}else{var x,E;return p<=50?(x=9*m/500,E=m/10):(x=9*m/50,E=-8*m),x*p+E}},v.findCenterOfTree=function(p){var m=[];m=m.concat(p);var y=[],b=new Map,g=!1,_=null;(m.length==1||m.length==2)&&(g=!0,_=m[0]);for(var w=0;w<m.length;w++){var x=m[w],E=x.getNeighborsList().size;b.set(x,x.getNeighborsList().size),E==1&&y.push(x)}var O=[];for(O=O.concat(y);!g;){var C=[];C=C.concat(O),O=[];for(var w=0;w<m.length;w++){var x=m[w],A=m.indexOf(x);A>=0&&m.splice(A,1);var R=x.getNeighborsList();R.forEach(function(L){if(y.indexOf(L)<0){var j=b.get(L),q=j-1;q==1&&O.push(L),b.set(L,q)}})}y=y.concat(O),(m.length==1||m.length==2)&&(g=!0,_=m[0])}return _},v.prototype.setGraphManager=function(p){this.graphManager=p},t.exports=v}),(function(t,n,i){function o(){}o.seed=1,o.x=0,o.nextDouble=function(){return o.x=Math.sin(o.seed++)*1e4,o.x-Math.floor(o.x)},t.exports=o}),(function(t,n,i){var o=i(4);function a(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(s){this.lworldExtX=s},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(s){this.lworldExtY=s},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},a.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},a.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},a.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},a.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},a.prototype.inverseTransformPoint=function(s){var u=new o(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=a}),(function(t,n,i){function o(d){if(Array.isArray(d)){for(var v=0,p=Array(d.length);v<d.length;v++)p[v]=d[v];return p}else return Array.from(d)}var a=i(15),s=i(7),u=i(0),l=i(8),c=i(9);function f(){a.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.springConstant=s.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=s.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}f.prototype=Object.create(a.prototype);for(var h in a)f[h]=a[h];f.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,v,p,m,y,b,g=this.getGraphManager().getAllEdges(),_=0;_<g.length;_++)d=g[_],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(p=d.getSource(),m=d.getTarget(),y=d.getSourceInLca().getEstimatedSize(),b=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=y+b-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=s.DEFAULT_EDGE_LENGTH*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(p.getInclusionTreeDepth()+m.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,p=0;p<d.length;p++)v=d[p],this.calcSpringForce(v,v.idealLength)},f.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p,m,y,b,g=this.getAllNodes(),_;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),_=new Set,p=0;p<g.length;p++)y=g[p],this.calculateRepulsionForceOfANode(y,_,d,v),_.add(y);else for(p=0;p<g.length;p++)for(y=g[p],m=p+1;m<g.length;m++)b=g[m],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},f.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),p=0;p<v.length;p++)d=v[p],this.calcGravitationalForce(d)},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,p=0;p<d.length;p++)v=d[p],v.move()},f.prototype.calcSpringForce=function(d,v){var p=d.getSource(),m=d.getTarget(),y,b,g,_;if(this.uniformLeafNodeSizes&&p.getChild()==null&&m.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;y=d.getLength(),y!=0&&(b=this.springConstant*(y-v),g=b*(d.lengthX/y),_=b*(d.lengthY/y),p.springForceX+=g,p.springForceY+=_,m.springForceX-=g,m.springForceY-=_)},f.prototype.calcRepulsionForce=function(d,v){var p=d.getRect(),m=v.getRect(),y=new Array(2),b=new Array(4),g,_,w,x,E,O,C;if(p.intersects(m)){l.calcSeparationAmount(p,m,y,s.DEFAULT_EDGE_LENGTH/2),O=2*y[0],C=2*y[1];var A=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=A*O,d.repulsionForceY-=A*C,v.repulsionForceX+=A*O,v.repulsionForceY+=A*C}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(g=m.getCenterX()-p.getCenterX(),_=m.getCenterY()-p.getCenterY()):(l.getIntersection(p,m,b),g=b[2]-b[0],_=b[3]-b[1]),Math.abs(g)<s.MIN_REPULSION_DIST&&(g=c.sign(g)*s.MIN_REPULSION_DIST),Math.abs(_)<s.MIN_REPULSION_DIST&&(_=c.sign(_)*s.MIN_REPULSION_DIST),w=g*g+_*_,x=Math.sqrt(w),E=this.repulsionConstant*d.noOfChildren*v.noOfChildren/w,O=E*g/x,C=E*_/x,d.repulsionForceX-=O,d.repulsionForceY-=C,v.repulsionForceX+=O,v.repulsionForceY+=C},f.prototype.calcGravitationalForce=function(d){var v,p,m,y,b,g,_,w;v=d.getOwner(),p=(v.getRight()+v.getLeft())/2,m=(v.getTop()+v.getBottom())/2,y=d.getCenterX()-p,b=d.getCenterY()-m,g=Math.abs(y)+d.getWidth()/2,_=Math.abs(b)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(w=v.getEstimatedSize()*this.gravityRangeFactor,(g>w||_>w)&&(d.gravitationForceX=-this.gravityConstant*y,d.gravitationForceY=-this.gravityConstant*b)):(w=v.getEstimatedSize()*this.compoundGravityRangeFactor,(g>w||_>w)&&(d.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},f.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),p=0;p<v.length;p++)d=v[p],d.noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var v=0,p=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),p=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var m=new Array(v),y=0;y<v;y++)m[y]=new Array(p);for(var y=0;y<v;y++)for(var b=0;b<p;b++)m[y][b]=new Array;return m},f.prototype.addNodeToGrid=function(d,v,p){var m=0,y=0,b=0,g=0;m=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),y=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),b=parseInt(Math.floor((d.getRect().y-p)/this.repulsionRange)),g=parseInt(Math.floor((d.getRect().height+d.getRect().y-p)/this.repulsionRange));for(var _=m;_<=y;_++)for(var w=b;w<=g;w++)this.grid[_][w].push(d),d.setGridCoordinates(m,y,b,g)},f.prototype.updateGrid=function(){var d,v,p=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<p.length;d++)v=p[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,v,p,m){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&p||m){var y=new Set;d.surrounding=new Array;for(var b,g=this.grid,_=d.startX-1;_<d.finishX+2;_++)for(var w=d.startY-1;w<d.finishY+2;w++)if(!(_<0||w<0||_>=g.length||w>=g[0].length)){for(var x=0;x<g[_][w].length;x++)if(b=g[_][w][x],!(d.getOwner()!=b.getOwner()||d==b)&&!v.has(b)&&!y.has(b)){var E=Math.abs(d.getCenterX()-b.getCenterX())-(d.getWidth()/2+b.getWidth()/2),O=Math.abs(d.getCenterY()-b.getCenterY())-(d.getHeight()/2+b.getHeight()/2);E<=this.repulsionRange&&O<=this.repulsionRange&&y.add(b)}}d.surrounding=[].concat(o(y))}for(_=0;_<d.surrounding.length;_++)this.calcRepulsionForce(d,d.surrounding[_])},f.prototype.calcRepulsionRange=function(){return 0},t.exports=f}),(function(t,n,i){var o=i(1),a=i(7);function s(l,c,f){o.call(this,l,c,f),this.idealLength=a.DEFAULT_EDGE_LENGTH}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];t.exports=s}),(function(t,n,i){var o=i(3);function a(u,l,c,f){o.call(this,u,l,c,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(o.prototype);for(var s in o)a[s]=o[s];a.prototype.setGridCoordinates=function(u,l,c,f){this.startX=u,this.finishX=l,this.startY=c,this.finishY=f},t.exports=a}),(function(t,n,i){function o(a,s){this.width=0,this.height=0,a!==null&&s!==null&&(this.height=s,this.width=a)}o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},t.exports=o}),(function(t,n,i){var o=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(s,u){var l=o.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},a.prototype.contains=function(s){return o.createID(s),this.map[s]!=null},a.prototype.get=function(s){var u=o.createID(s);return this.map[u]},a.prototype.keySet=function(){return this.keys},t.exports=a}),(function(t,n,i){var o=i(14);function a(){this.set={}}a.prototype.add=function(s){var u=o.createID(s);this.contains(u)||(this.set[u]=s)},a.prototype.remove=function(s){delete this.set[o.createID(s)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(s){return this.set[o.createID(s)]==s},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,c=0;c<l;c++)s.push(this.set[u[c]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var c=s[l];this.add(c)}},t.exports=a}),(function(t,n,i){var o=(function(){function l(c,f){for(var h=0;h<f.length;h++){var d=f[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,f,h){return f&&l(c.prototype,f),h&&l(c,h),c}})();function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=(function(){function l(c,f){a(this,l),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;c instanceof s?h=c.size():h=c.length,this._quicksort(c,0,h-1)}return o(l,[{key:"_quicksort",value:function(f,h,d){if(h<d){var v=this._partition(f,h,d);this._quicksort(f,h,v),this._quicksort(f,v+1,d)}}},{key:"_partition",value:function(f,h,d){for(var v=this._get(f,h),p=h,m=d;;){for(;this.compareFunction(v,this._get(f,m));)m--;for(;this.compareFunction(this._get(f,p),v);)p++;if(p<m)this._swap(f,p,m),p++,m--;else return m}}},{key:"_get",value:function(f,h){return f instanceof s?f.get_object_at(h):f[h]}},{key:"_set",value:function(f,h,d){f instanceof s?f.set_object_at(h,d):f[h]=d}},{key:"_swap",value:function(f,h,d){var v=this._get(f,h);this._set(f,h,this._get(f,d)),this._set(f,d,v)}},{key:"_defaultCompareFunction",value:function(f,h){return h>f}}]),l})();t.exports=u}),(function(t,n,i){var o=(function(){function u(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}})();function a(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=(function(){function u(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,u),this.sequence1=l,this.sequence2=c,this.match_score=f,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.grid[v][p]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[m][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return o(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var p=this.grid[h-1][d]+this.gap_penalty,m=this.grid[h][d-1]+this.gap_penalty,y=[v,p,m],b=this.arrayAllMaxIndexes(y);this.grid[h][d]=y[b[0]],this.tracebackGrid[h][d]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var f=c[0],h=this.tracebackGrid[f.pos[0]][f.pos[1]];h[0]&&c.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),h[1]&&c.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),h[2]&&c.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,f){for(var h=[],d=-1;(d=c.indexOf(f,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u})();t.exports=s}),(function(t,n,i){var o=function(){};o.FDLayout=i(18),o.FDLayoutConstants=i(7),o.FDLayoutEdge=i(19),o.FDLayoutNode=i(20),o.DimensionD=i(21),o.HashMap=i(22),o.HashSet=i(23),o.IGeometry=i(8),o.IMath=i(9),o.Integer=i(10),o.Point=i(12),o.PointD=i(4),o.RandomSeed=i(16),o.RectangleD=i(13),o.Transform=i(17),o.UniqueIDGeneretor=i(14),o.Quicksort=i(24),o.LinkedList=i(11),o.LGraphObject=i(2),o.LGraph=i(5),o.LEdge=i(1),o.LGraphManager=i(6),o.LNode=i(3),o.Layout=i(15),o.LayoutConstants=i(0),o.NeedlemanWunsch=i(25),t.exports=o}),(function(t,n,i){function o(){this.listeners=[]}var a=o.prototype;a.addListener=function(s,u){this.listeners.push({event:s,callback:u})},a.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var c=this.listeners[l];c.event===s&&c.callback===u&&this.listeners.splice(l,1)}},a.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var c=this.listeners[l];s===c.event&&c.callback(u)}},t.exports=o})])})})(r0)),r0.exports}var GH=t0.exports,yI;function VH(){return yI||(yI=1,(function(r,e){(function(n,i){r.exports=i(zH())})(GH,function(t){return(function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=7)})([(function(n,i){n.exports=t}),(function(n,i,o){var a=o(0).FDLayoutConstants;function s(){}for(var u in a)s[u]=a[u];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=s}),(function(n,i,o){var a=o(0).FDLayoutEdge;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s}),(function(n,i,o){var a=o(0).LGraph;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s}),(function(n,i,o){var a=o(0).LGraphManager;function s(l){a.call(this,l)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s}),(function(n,i,o){var a=o(0).FDLayoutNode,s=o(0).IMath;function u(c,f,h,d){a.call(this,c,f,h,d)}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(c,f){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(c,f),d.displacementX+=c,d.displacementY+=f):d.propogateDisplacementToChildren(c,f)},u.prototype.setPred1=function(c){this.pred1=c},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(c){this.next=c},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(c){this.processed=c},u.prototype.isProcessed=function(){return processed},n.exports=u}),(function(n,i,o){var a=o(0).FDLayout,s=o(4),u=o(3),l=o(5),c=o(2),f=o(1),h=o(0).FDLayoutConstants,d=o(0).LayoutConstants,v=o(0).Point,p=o(0).PointD,m=o(0).Layout,y=o(0).Integer,b=o(0).IGeometry,g=o(0).LGraph,_=o(0).Transform;function w(){a.call(this),this.toBeTiled={}}w.prototype=Object.create(a.prototype);for(var x in a)w[x]=a[x];w.prototype.newGraphManager=function(){var E=new s(this);return this.graphManager=E,E},w.prototype.newGraph=function(E){return new u(null,this.graphManager,E)},w.prototype.newNode=function(E){return new l(this.graphManager,E)},w.prototype.newEdge=function(E){return new c(null,null,E)},w.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},w.prototype.layout=function(){var E=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return E&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},w.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(k){return O.has(k)});this.graphManager.setAllNodesToApplyGravitation(C)}}else{var E=this.getFlatForest();if(E.length>0)this.positionNodesRadially(E);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(A){return O.has(A)});this.graphManager.setAllNodesToApplyGravitation(C),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},w.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),O=this.nodesWithGravity.filter(function(R){return E.has(R)});this.graphManager.setAllNodesToApplyGravitation(O),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var C=!this.isTreeGrowing&&!this.isGrowthFinished,A=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(C,A),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},w.prototype.getPositionsData=function(){for(var E=this.graphManager.getAllNodes(),O={},C=0;C<E.length;C++){var A=E[C].rect,R=E[C].id;O[R]={id:R,x:A.getCenterX(),y:A.getCenterY(),w:A.width,h:A.height}}return O},w.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var E=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!E;)E=this.tick();this.graphManager.updateBounds()}},w.prototype.calculateNodesToApplyGravitationTo=function(){var E=[],O,C=this.graphManager.getGraphs(),A=C.length,R;for(R=0;R<A;R++)O=C[R],O.updateConnected(),O.isConnected||(E=E.concat(O.getNodes()));return E},w.prototype.createBendpoints=function(){var E=[];E=E.concat(this.graphManager.getAllEdges());var O=new Set,C;for(C=0;C<E.length;C++){var A=E[C];if(!O.has(A)){var R=A.getSource(),k=A.getTarget();if(R==k)A.getBendpoints().push(new p),A.getBendpoints().push(new p),this.createDummyNodesForBendpoints(A),O.add(A);else{var D=[];if(D=D.concat(R.getEdgeListToNode(k)),D=D.concat(k.getEdgeListToNode(R)),!O.has(D[0])){if(D.length>1){var L;for(L=0;L<D.length;L++){var j=D[L];j.getBendpoints().push(new p),this.createDummyNodesForBendpoints(j)}}D.forEach(function(q){O.add(q)})}}}if(O.size==E.length)break}},w.prototype.positionNodesRadially=function(E){for(var O=new v(0,0),C=Math.ceil(Math.sqrt(E.length)),A=0,R=0,k=0,D=new p(0,0),L=0;L<E.length;L++){L%C==0&&(k=0,R=A,L!=0&&(R+=f.DEFAULT_COMPONENT_SEPERATION),A=0);var j=E[L],q=m.findCenterOfTree(j);O.x=k,O.y=R,D=w.radialLayout(j,q,O),D.y>A&&(A=Math.floor(D.y)),k=Math.floor(D.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(d.WORLD_CENTER_X-D.x/2,d.WORLD_CENTER_Y-D.y/2))},w.radialLayout=function(E,O,C){var A=Math.max(this.maxDiagonalInTree(E),f.DEFAULT_RADIAL_SEPARATION);w.branchRadialLayout(O,null,0,359,0,A);var R=g.calculateBounds(E),k=new _;k.setDeviceOrgX(R.getMinX()),k.setDeviceOrgY(R.getMinY()),k.setWorldOrgX(C.x),k.setWorldOrgY(C.y);for(var D=0;D<E.length;D++){var L=E[D];L.transform(k)}var j=new p(R.getMaxX(),R.getMaxY());return k.inverseTransformPoint(j)},w.branchRadialLayout=function(E,O,C,A,R,k){var D=(A-C+1)/2;D<0&&(D+=180);var L=(D+C)%360,j=L*b.TWO_PI/360,q=R*Math.cos(j),B=R*Math.sin(j);E.setCenter(q,B);var U=[];U=U.concat(E.getEdges());var W=U.length;O!=null&&W--;for(var H=0,Y=U.length,Z,ce=E.getEdgesBetween(O);ce.length>1;){var $=ce[0];ce.splice(0,1);var K=U.indexOf($);K>=0&&U.splice(K,1),Y--,W--}O!=null?Z=(U.indexOf(ce[0])+1)%Y:Z=0;for(var ie=Math.abs(A-C)/W,ae=Z;H!=W;ae=++ae%Y){var le=U[ae].getOtherEnd(E);if(le!=O){var te=(C+H*ie)%360,ee=(te+ie)%360;w.branchRadialLayout(le,E,te,ee,R+k,k),H++}}},w.maxDiagonalInTree=function(E){for(var O=y.MIN_VALUE,C=0;C<E.length;C++){var A=E[C],R=A.getDiagonal();R>O&&(O=R)}return O},w.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},w.prototype.groupZeroDegreeMembers=function(){var E=this,O={};this.memberGroups={},this.idToDummyNode={};for(var C=[],A=this.graphManager.getAllNodes(),R=0;R<A.length;R++){var k=A[R],D=k.getParent();this.getNodeDegreeWithChildren(k)===0&&(D.id==null||!this.getToBeTiled(D))&&C.push(k)}for(var R=0;R<C.length;R++){var k=C[R],L=k.getParent().id;typeof O[L]>"u"&&(O[L]=[]),O[L]=O[L].concat(k)}Object.keys(O).forEach(function(j){if(O[j].length>1){var q="DummyCompound_"+j;E.memberGroups[q]=O[j];var B=O[j][0].getParent(),U=new l(E.graphManager);U.id=q,U.paddingLeft=B.paddingLeft||0,U.paddingRight=B.paddingRight||0,U.paddingBottom=B.paddingBottom||0,U.paddingTop=B.paddingTop||0,E.idToDummyNode[q]=U;var W=E.getGraphManager().add(E.newGraph(),U),H=B.getChild();H.add(U);for(var Y=0;Y<O[j].length;Y++){var Z=O[j][Y];H.remove(Z),W.add(Z)}}})},w.prototype.clearCompounds=function(){var E={},O={};this.performDFSOnCompounds();for(var C=0;C<this.compoundOrder.length;C++)O[this.compoundOrder[C].id]=this.compoundOrder[C],E[this.compoundOrder[C].id]=[].concat(this.compoundOrder[C].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[C].getChild()),this.compoundOrder[C].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(E,O)},w.prototype.clearZeroDegreeMembers=function(){var E=this,O=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(C){var A=E.idToDummyNode[C];O[C]=E.tileNodes(E.memberGroups[C],A.paddingLeft+A.paddingRight),A.rect.width=O[C].width,A.rect.height=O[C].height})},w.prototype.repopulateCompounds=function(){for(var E=this.compoundOrder.length-1;E>=0;E--){var O=this.compoundOrder[E],C=O.id,A=O.paddingLeft,R=O.paddingTop;this.adjustLocations(this.tiledMemberPack[C],O.rect.x,O.rect.y,A,R)}},w.prototype.repopulateZeroDegreeMembers=function(){var E=this,O=this.tiledZeroDegreePack;Object.keys(O).forEach(function(C){var A=E.idToDummyNode[C],R=A.paddingLeft,k=A.paddingTop;E.adjustLocations(O[C],A.rect.x,A.rect.y,R,k)})},w.prototype.getToBeTiled=function(E){var O=E.id;if(this.toBeTiled[O]!=null)return this.toBeTiled[O];var C=E.getChild();if(C==null)return this.toBeTiled[O]=!1,!1;for(var A=C.getNodes(),R=0;R<A.length;R++){var k=A[R];if(this.getNodeDegree(k)>0)return this.toBeTiled[O]=!1,!1;if(k.getChild()==null){this.toBeTiled[k.id]=!1;continue}if(!this.getToBeTiled(k))return this.toBeTiled[O]=!1,!1}return this.toBeTiled[O]=!0,!0},w.prototype.getNodeDegree=function(E){E.id;for(var O=E.getEdges(),C=0,A=0;A<O.length;A++){var R=O[A];R.getSource().id!==R.getTarget().id&&(C=C+1)}return C},w.prototype.getNodeDegreeWithChildren=function(E){var O=this.getNodeDegree(E);if(E.getChild()==null)return O;for(var C=E.getChild().getNodes(),A=0;A<C.length;A++){var R=C[A];O+=this.getNodeDegreeWithChildren(R)}return O},w.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},w.prototype.fillCompexOrderByDFS=function(E){for(var O=0;O<E.length;O++){var C=E[O];C.getChild()!=null&&this.fillCompexOrderByDFS(C.getChild().getNodes()),this.getToBeTiled(C)&&this.compoundOrder.push(C)}},w.prototype.adjustLocations=function(E,O,C,A,R){O+=A,C+=R;for(var k=O,D=0;D<E.rows.length;D++){var L=E.rows[D];O=k;for(var j=0,q=0;q<L.length;q++){var B=L[q];B.rect.x=O,B.rect.y=C,O+=B.rect.width+E.horizontalPadding,B.rect.height>j&&(j=B.rect.height)}C+=j+E.verticalPadding}},w.prototype.tileCompoundMembers=function(E,O){var C=this;this.tiledMemberPack=[],Object.keys(E).forEach(function(A){var R=O[A];C.tiledMemberPack[A]=C.tileNodes(E[A],R.paddingLeft+R.paddingRight),R.rect.width=C.tiledMemberPack[A].width,R.rect.height=C.tiledMemberPack[A].height})},w.prototype.tileNodes=function(E,O){var C=f.TILING_PADDING_VERTICAL,A=f.TILING_PADDING_HORIZONTAL,R={rows:[],rowWidth:[],rowHeight:[],width:0,height:O,verticalPadding:C,horizontalPadding:A};E.sort(function(L,j){return L.rect.width*L.rect.height>j.rect.width*j.rect.height?-1:L.rect.width*L.rect.height<j.rect.width*j.rect.height?1:0});for(var k=0;k<E.length;k++){var D=E[k];R.rows.length==0?this.insertNodeToRow(R,D,0,O):this.canAddHorizontal(R,D.rect.width,D.rect.height)?this.insertNodeToRow(R,D,this.getShortestRowIndex(R),O):this.insertNodeToRow(R,D,R.rows.length,O),this.shiftToLastRow(R)}return R},w.prototype.insertNodeToRow=function(E,O,C,A){var R=A;if(C==E.rows.length){var k=[];E.rows.push(k),E.rowWidth.push(R),E.rowHeight.push(0)}var D=E.rowWidth[C]+O.rect.width;E.rows[C].length>0&&(D+=E.horizontalPadding),E.rowWidth[C]=D,E.width<D&&(E.width=D);var L=O.rect.height;C>0&&(L+=E.verticalPadding);var j=0;L>E.rowHeight[C]&&(j=E.rowHeight[C],E.rowHeight[C]=L,j=E.rowHeight[C]-j),E.height+=j,E.rows[C].push(O)},w.prototype.getShortestRowIndex=function(E){for(var O=-1,C=Number.MAX_VALUE,A=0;A<E.rows.length;A++)E.rowWidth[A]<C&&(O=A,C=E.rowWidth[A]);return O},w.prototype.getLongestRowIndex=function(E){for(var O=-1,C=Number.MIN_VALUE,A=0;A<E.rows.length;A++)E.rowWidth[A]>C&&(O=A,C=E.rowWidth[A]);return O},w.prototype.canAddHorizontal=function(E,O,C){var A=this.getShortestRowIndex(E);if(A<0)return!0;var R=E.rowWidth[A];if(R+E.horizontalPadding+O<=E.width)return!0;var k=0;E.rowHeight[A]<C&&A>0&&(k=C+E.verticalPadding-E.rowHeight[A]);var D;E.width-R>=O+E.horizontalPadding?D=(E.height+k)/(R+O+E.horizontalPadding):D=(E.height+k)/E.width,k=C+E.verticalPadding;var L;return E.width<O?L=(E.height+k)/O:L=(E.height+k)/E.width,L<1&&(L=1/L),D<1&&(D=1/D),D<L},w.prototype.shiftToLastRow=function(E){var O=this.getLongestRowIndex(E),C=E.rowWidth.length-1,A=E.rows[O],R=A[A.length-1],k=R.width+E.horizontalPadding;if(E.width-E.rowWidth[C]>k&&O!=C){A.splice(-1,1),E.rows[C].push(R),E.rowWidth[O]=E.rowWidth[O]-k,E.rowWidth[C]=E.rowWidth[C]+k,E.width=E.rowWidth[instance.getLongestRowIndex(E)];for(var D=Number.MIN_VALUE,L=0;L<A.length;L++)A[L].height>D&&(D=A[L].height);O>0&&(D+=E.verticalPadding);var j=E.rowHeight[O]+E.rowHeight[C];E.rowHeight[O]=D,E.rowHeight[C]<R.height+E.verticalPadding&&(E.rowHeight[C]=R.height+E.verticalPadding);var q=E.rowHeight[O]+E.rowHeight[C];E.height+=q-j,this.shiftToLastRow(E)}},w.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},w.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},w.prototype.reduceTrees=function(){for(var E=[],O=!0,C;O;){var A=this.graphManager.getAllNodes(),R=[];O=!1;for(var k=0;k<A.length;k++)C=A[k],C.getEdges().length==1&&!C.getEdges()[0].isInterGraph&&C.getChild()==null&&(R.push([C,C.getEdges()[0],C.getOwner()]),O=!0);if(O==!0){for(var D=[],L=0;L<R.length;L++)R[L][0].getEdges().length==1&&(D.push(R[L]),R[L][0].getOwner().remove(R[L][0]));E.push(D),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=E},w.prototype.growTree=function(E){for(var O=E.length,C=E[O-1],A,R=0;R<C.length;R++)A=C[R],this.findPlaceforPrunedNode(A),A[2].add(A[0]),A[2].add(A[1],A[1].source,A[1].target);E.splice(E.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},w.prototype.findPlaceforPrunedNode=function(E){var O,C,A=E[0];A==E[1].source?C=E[1].target:C=E[1].source;var R=C.startX,k=C.finishX,D=C.startY,L=C.finishY,j=0,q=0,B=0,U=0,W=[j,B,q,U];if(D>0)for(var H=R;H<=k;H++)W[0]+=this.grid[H][D-1].length+this.grid[H][D].length-1;if(k<this.grid.length-1)for(var H=D;H<=L;H++)W[1]+=this.grid[k+1][H].length+this.grid[k][H].length-1;if(L<this.grid[0].length-1)for(var H=R;H<=k;H++)W[2]+=this.grid[H][L+1].length+this.grid[H][L].length-1;if(R>0)for(var H=D;H<=L;H++)W[3]+=this.grid[R-1][H].length+this.grid[R][H].length-1;for(var Y=y.MAX_VALUE,Z,ce,$=0;$<W.length;$++)W[$]<Y?(Y=W[$],Z=1,ce=$):W[$]==Y&&Z++;if(Z==3&&Y==0)W[0]==0&&W[1]==0&&W[2]==0?O=1:W[0]==0&&W[1]==0&&W[3]==0?O=0:W[0]==0&&W[2]==0&&W[3]==0?O=3:W[1]==0&&W[2]==0&&W[3]==0&&(O=2);else if(Z==2&&Y==0){var K=Math.floor(Math.random()*2);W[0]==0&&W[1]==0?K==0?O=0:O=1:W[0]==0&&W[2]==0?K==0?O=0:O=2:W[0]==0&&W[3]==0?K==0?O=0:O=3:W[1]==0&&W[2]==0?K==0?O=1:O=2:W[1]==0&&W[3]==0?K==0?O=1:O=3:K==0?O=2:O=3}else if(Z==4&&Y==0){var K=Math.floor(Math.random()*4);O=K}else O=ce;O==0?A.setCenter(C.getCenterX(),C.getCenterY()-C.getHeight()/2-h.DEFAULT_EDGE_LENGTH-A.getHeight()/2):O==1?A.setCenter(C.getCenterX()+C.getWidth()/2+h.DEFAULT_EDGE_LENGTH+A.getWidth()/2,C.getCenterY()):O==2?A.setCenter(C.getCenterX(),C.getCenterY()+C.getHeight()/2+h.DEFAULT_EDGE_LENGTH+A.getHeight()/2):A.setCenter(C.getCenterX()-C.getWidth()/2-h.DEFAULT_EDGE_LENGTH-A.getWidth()/2,C.getCenterY())},n.exports=w}),(function(n,i,o){var a={};a.layoutBase=o(0),a.CoSEConstants=o(1),a.CoSEEdge=o(2),a.CoSEGraph=o(3),a.CoSEGraphManager=o(4),a.CoSELayout=o(6),a.CoSENode=o(5),n.exports=a})])})})(t0)),t0.exports}var WH=e0.exports,mI;function HH(){return mI||(mI=1,(function(r,e){(function(n,i){r.exports=i(VH())})(WH,function(t){return(function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=1)})([(function(n,i){n.exports=t}),(function(n,i,o){var a=o(0).layoutBase.LayoutConstants,s=o(0).layoutBase.FDLayoutConstants,u=o(0).CoSEConstants,l=o(0).CoSELayout,c=o(0).CoSENode,f=o(0).layoutBase.PointD,h=o(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(b,g){var _={};for(var w in b)_[w]=b[w];for(var w in g)_[w]=g[w];return _}function p(b){this.options=v(d,b),m(this.options)}var m=function(g){g.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=g.nodeRepulsion),g.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=g.idealEdgeLength),g.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=g.edgeElasticity),g.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=g.nestingFactor),g.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=g.gravity),g.numIter!=null&&(u.MAX_ITERATIONS=s.MAX_ITERATIONS=g.numIter),g.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=g.gravityRange),g.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=g.gravityCompound),g.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=g.gravityRangeCompound),g.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=g.initialEnergyOnIncremental),g.quality=="draft"?a.QUALITY=0:g.quality=="proof"?a.QUALITY=2:a.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=g.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=!g.randomize,u.ANIMATE=s.ANIMATE=a.ANIMATE=g.animate,u.TILE=g.tile,u.TILING_PADDING_VERTICAL=typeof g.tilingPaddingVertical=="function"?g.tilingPaddingVertical.call():g.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof g.tilingPaddingHorizontal=="function"?g.tilingPaddingHorizontal.call():g.tilingPaddingHorizontal};p.prototype.run=function(){var b,g,_=this.options;this.idToLNode={};var w=this.layout=new l,x=this;x.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var E=w.newGraphManager();this.gm=E;var O=this.options.eles.nodes(),C=this.options.eles.edges();this.root=E.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(O),w);for(var A=0;A<C.length;A++){var R=C[A],k=this.idToLNode[R.data("source")],D=this.idToLNode[R.data("target")];if(k!==D&&k.getEdgesBetween(D).length==0){var L=E.add(w.newEdge(),k,D);L.id=R.id()}}var j=function(U,W){typeof U=="number"&&(U=W);var H=U.data("id"),Y=x.idToLNode[H];return{x:Y.getRect().getCenterX(),y:Y.getRect().getCenterY()}},q=function B(){for(var U=function(){_.fit&&_.cy.fit(_.eles,_.padding),b||(b=!0,x.cy.one("layoutready",_.ready),x.cy.trigger({type:"layoutready",layout:x}))},W=x.options.refresh,H,Y=0;Y<W&&!H;Y++)H=x.stopped||x.layout.tick();if(H){w.checkLayoutSuccess()&&!w.isSubLayout&&w.doPostLayout(),w.tilingPostLayout&&w.tilingPostLayout(),w.isLayoutFinished=!0,x.options.eles.nodes().positions(j),U(),x.cy.one("layoutstop",x.options.stop),x.cy.trigger({type:"layoutstop",layout:x}),g&&cancelAnimationFrame(g),b=!1;return}var Z=x.layout.getPositionsData();_.eles.nodes().positions(function(ce,$){if(typeof ce=="number"&&(ce=$),!ce.isParent()){for(var K=ce.id(),ie=Z[K],ae=ce;ie==null&&(ie=Z[ae.data("parent")]||Z["DummyCompound_"+ae.data("parent")],Z[K]=ie,ae=ae.parent()[0],ae!=null););return ie!=null?{x:ie.x,y:ie.y}:{x:ce.position("x"),y:ce.position("y")}}}),U(),g=requestAnimationFrame(B)};return w.addListener("layoutstarted",function(){x.options.animate==="during"&&(g=requestAnimationFrame(q))}),w.runLayout(),this.options.animate!=="during"&&(x.options.eles.nodes().not(":parent").layoutPositions(x,x.options,j),b=!1),this},p.prototype.getTopMostNodes=function(b){for(var g={},_=0;_<b.length;_++)g[b[_].id()]=!0;var w=b.filter(function(x,E){typeof x=="number"&&(x=E);for(var O=x.parent()[0];O!=null;){if(g[O.id()])return!1;O=O.parent()[0]}return!0});return w},p.prototype.processChildrenList=function(b,g,_){for(var w=g.length,x=0;x<w;x++){var E=g[x],O=E.children(),C,A=E.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(E.outerWidth()!=null&&E.outerHeight()!=null?C=b.add(new c(_.graphManager,new f(E.position("x")-A.w/2,E.position("y")-A.h/2),new h(parseFloat(A.w),parseFloat(A.h)))):C=b.add(new c(this.graphManager)),C.id=E.data("id"),C.paddingLeft=parseInt(E.css("padding")),C.paddingTop=parseInt(E.css("padding")),C.paddingRight=parseInt(E.css("padding")),C.paddingBottom=parseInt(E.css("padding")),this.options.nodeDimensionsIncludeLabels&&E.isParent()){var R=E.boundingBox({includeLabels:!0,includeNodes:!1}).w,k=E.boundingBox({includeLabels:!0,includeNodes:!1}).h,D=E.css("text-halign");C.labelWidth=R,C.labelHeight=k,C.labelPos=D}if(this.idToLNode[E.data("id")]=C,isNaN(C.rect.x)&&(C.rect.x=0),isNaN(C.rect.y)&&(C.rect.y=0),O!=null&&O.length>0){var L;L=_.getGraphManager().add(_.newGraph(),C),this.processChildrenList(L,O,_)}}},p.prototype.stop=function(){return this.stopped=!0,this};var y=function(g){g("layout","cose-bilkent",p)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y})])})})(e0)),e0.exports}var YH=HH();const XH=G0(YH);_l.use(XH);const $H="cose-bilkent",KH=(r,e)=>{const t=_l({headless:!0,styleEnabled:!1});t.add(r);const n={};return t.layout({name:$H,animate:!1,spacingFactor:e,quality:"default",tile:!1,randomize:!0,stop:()=>{t.nodes().forEach(o=>{n[o.id()]={...o.position()}})}}).run(),{positions:n}};class ZH{start(){}postMessage(e){const{elements:t,spacingFactor:n}=e,i=KH(t,n);this.onmessage({data:i})}onmessage(){}close(){}}const QH={port:new ZH},JH=()=>new SharedWorker(new URL("/assets/CoseBilkentLayout.worker-NF9rjvUb.js",import.meta.url),{type:"module",name:"CoseBilkentLayout"});var dw,bI;function eY(){if(bI)return dw;bI=1;function r(){this.__data__=[],this.size=0}return dw=r,dw}var vw,_I;function v2(){if(_I)return vw;_I=1;function r(e,t){return e===t||e!==e&&t!==t}return vw=r,vw}var pw,wI;function ub(){if(wI)return pw;wI=1;var r=v2();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return pw=e,pw}var gw,EI;function tY(){if(EI)return gw;EI=1;var r=ub(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return gw=n,gw}var yw,OI;function rY(){if(OI)return yw;OI=1;var r=ub();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return yw=e,yw}var mw,xI;function nY(){if(xI)return mw;xI=1;var r=ub();function e(t){return r(this.__data__,t)>-1}return mw=e,mw}var bw,SI;function iY(){if(SI)return bw;SI=1;var r=ub();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return bw=e,bw}var _w,TI;function lb(){if(TI)return _w;TI=1;var r=eY(),e=tY(),t=rY(),n=nY(),i=iY();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,_w=o,_w}var ww,CI;function oY(){if(CI)return ww;CI=1;var r=lb();function e(){this.__data__=new r,this.size=0}return ww=e,ww}var Ew,PI;function aY(){if(PI)return Ew;PI=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return Ew=r,Ew}var Ow,AI;function sY(){if(AI)return Ow;AI=1;function r(e){return this.__data__.get(e)}return Ow=r,Ow}var xw,RI;function uY(){if(RI)return xw;RI=1;function r(e){return this.__data__.has(e)}return xw=r,xw}var Sw,II;function x4(){if(II)return Sw;II=1;var r=typeof Qu=="object"&&Qu&&Qu.Object===Object&&Qu;return Sw=r,Sw}var Tw,kI;function _s(){if(kI)return Tw;kI=1;var r=x4(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Tw=t,Tw}var Cw,DI;function md(){if(DI)return Cw;DI=1;var r=_s(),e=r.Symbol;return Cw=e,Cw}var Pw,MI;function lY(){if(MI)return Pw;MI=1;var r=md(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return Pw=o,Pw}var Aw,LI;function cY(){if(LI)return Aw;LI=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Aw=t,Aw}var Rw,NI;function bd(){if(NI)return Rw;NI=1;var r=md(),e=lY(),t=cY(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return Rw=a,Rw}var Iw,jI;function af(){if(jI)return Iw;jI=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Iw=r,Iw}var kw,FI;function cb(){if(FI)return kw;FI=1;var r=bd(),e=af(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return kw=a,kw}var Dw,BI;function fY(){if(BI)return Dw;BI=1;var r=_s(),e=r["__core-js_shared__"];return Dw=e,Dw}var Mw,UI;function hY(){if(UI)return Mw;UI=1;var r=fY(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return Mw=t,Mw}var Lw,qI;function S4(){if(qI)return Lw;qI=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Lw=t,Lw}var Nw,zI;function dY(){if(zI)return Nw;zI=1;var r=cb(),e=hY(),t=af(),n=S4(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return Nw=f,Nw}var jw,GI;function vY(){if(GI)return jw;GI=1;function r(e,t){return e==null?void 0:e[t]}return jw=r,jw}var Fw,VI;function sf(){if(VI)return Fw;VI=1;var r=dY(),e=vY();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return Fw=t,Fw}var Bw,WI;function p2(){if(WI)return Bw;WI=1;var r=sf(),e=_s(),t=r(e,"Map");return Bw=t,Bw}var Uw,HI;function fb(){if(HI)return Uw;HI=1;var r=sf(),e=r(Object,"create");return Uw=e,Uw}var qw,YI;function pY(){if(YI)return qw;YI=1;var r=fb();function e(){this.__data__=r?r(null):{},this.size=0}return qw=e,qw}var zw,XI;function gY(){if(XI)return zw;XI=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return zw=r,zw}var Gw,$I;function yY(){if($I)return Gw;$I=1;var r=fb(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return Gw=i,Gw}var Vw,KI;function mY(){if(KI)return Vw;KI=1;var r=fb(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return Vw=n,Vw}var Ww,ZI;function bY(){if(ZI)return Ww;ZI=1;var r=fb(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return Ww=t,Ww}var Hw,QI;function _Y(){if(QI)return Hw;QI=1;var r=pY(),e=gY(),t=yY(),n=mY(),i=bY();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Hw=o,Hw}var Yw,JI;function wY(){if(JI)return Yw;JI=1;var r=_Y(),e=lb(),t=p2();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Yw=n,Yw}var Xw,ek;function EY(){if(ek)return Xw;ek=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Xw=r,Xw}var $w,tk;function hb(){if(tk)return $w;tk=1;var r=EY();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return $w=e,$w}var Kw,rk;function OY(){if(rk)return Kw;rk=1;var r=hb();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Kw=e,Kw}var Zw,nk;function xY(){if(nk)return Zw;nk=1;var r=hb();function e(t){return r(this,t).get(t)}return Zw=e,Zw}var Qw,ik;function SY(){if(ik)return Qw;ik=1;var r=hb();function e(t){return r(this,t).has(t)}return Qw=e,Qw}var Jw,ok;function TY(){if(ok)return Jw;ok=1;var r=hb();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return Jw=e,Jw}var eE,ak;function g2(){if(ak)return eE;ak=1;var r=wY(),e=OY(),t=xY(),n=SY(),i=TY();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,eE=o,eE}var tE,sk;function CY(){if(sk)return tE;sk=1;var r=lb(),e=p2(),t=g2(),n=200;function i(o,a){var s=this.__data__;if(s instanceof r){var u=s.__data__;if(!e||u.length<n-1)return u.push([o,a]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(o,a),this.size=s.size,this}return tE=i,tE}var rE,uk;function y2(){if(uk)return rE;uk=1;var r=lb(),e=oY(),t=aY(),n=sY(),i=uY(),o=CY();function a(s){var u=this.__data__=new r(s);this.size=u.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=i,a.prototype.set=o,rE=a,rE}var nE,lk;function m2(){if(lk)return nE;lk=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return nE=r,nE}var iE,ck;function T4(){if(ck)return iE;ck=1;var r=sf(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return iE=e,iE}var oE,fk;function C4(){if(fk)return oE;fk=1;var r=T4();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return oE=e,oE}var aE,hk;function P4(){if(hk)return aE;hk=1;var r=C4(),e=v2(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return aE=i,aE}var sE,dk;function db(){if(dk)return sE;dk=1;var r=P4(),e=C4();function t(n,i,o,a){var s=!o;o||(o={});for(var u=-1,l=i.length;++u<l;){var c=i[u],f=a?a(o[c],n[c],c,o,n):void 0;f===void 0&&(f=n[c]),s?e(o,c,f):r(o,c,f)}return o}return sE=t,sE}var uE,vk;function PY(){if(vk)return uE;vk=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return uE=r,uE}var lE,pk;function au(){if(pk)return lE;pk=1;function r(e){return e!=null&&typeof e=="object"}return lE=r,lE}var cE,gk;function AY(){if(gk)return cE;gk=1;var r=bd(),e=au(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return cE=n,cE}var fE,yk;function vb(){if(yk)return fE;yk=1;var r=AY(),e=au(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,o=r((function(){return arguments})())?r:function(a){return e(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return fE=o,fE}var hE,mk;function oi(){if(mk)return hE;mk=1;var r=Array.isArray;return hE=r,hE}var Hv={exports:{}},dE,bk;function RY(){if(bk)return dE;bk=1;function r(){return!1}return dE=r,dE}Hv.exports;var _k;function Og(){return _k||(_k=1,(function(r,e){var t=_s(),n=RY(),i=e&&!e.nodeType&&e,o=i&&!0&&r&&!r.nodeType&&r,a=o&&o.exports===i,s=a?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;r.exports=l})(Hv,Hv.exports)),Hv.exports}var vE,wk;function A4(){if(wk)return vE;wk=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return vE=t,vE}var pE,Ek;function b2(){if(Ek)return pE;Ek=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return pE=e,pE}var gE,Ok;function IY(){if(Ok)return gE;Ok=1;var r=bd(),e=b2(),t=au(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",d="[object Set]",v="[object String]",p="[object WeakMap]",m="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",g="[object Float64Array]",_="[object Int8Array]",w="[object Int16Array]",x="[object Int32Array]",E="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",R={};R[b]=R[g]=R[_]=R[w]=R[x]=R[E]=R[O]=R[C]=R[A]=!0,R[n]=R[i]=R[m]=R[o]=R[y]=R[a]=R[s]=R[u]=R[l]=R[c]=R[f]=R[h]=R[d]=R[v]=R[p]=!1;function k(D){return t(D)&&e(D.length)&&!!R[r(D)]}return gE=k,gE}var yE,xk;function _2(){if(xk)return yE;xk=1;function r(e){return function(t){return e(t)}}return yE=r,yE}var Yv={exports:{}};Yv.exports;var Sk;function w2(){return Sk||(Sk=1,(function(r,e){var t=x4(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,a=o&&t.process,s=(function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}})();r.exports=s})(Yv,Yv.exports)),Yv.exports}var mE,Tk;function pb(){if(Tk)return mE;Tk=1;var r=IY(),e=_2(),t=w2(),n=t&&t.isTypedArray,i=n?e(n):r;return mE=i,mE}var bE,Ck;function R4(){if(Ck)return bE;Ck=1;var r=PY(),e=vb(),t=oi(),n=Og(),i=A4(),o=pb(),a=Object.prototype,s=a.hasOwnProperty;function u(l,c){var f=t(l),h=!f&&e(l),d=!f&&!h&&n(l),v=!f&&!h&&!d&&o(l),p=f||h||d||v,m=p?r(l.length,String):[],y=m.length;for(var b in l)(c||s.call(l,b))&&!(p&&(b=="length"||d&&(b=="offset"||b=="parent")||v&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,y)))&&m.push(b);return m}return bE=u,bE}var _E,Pk;function gb(){if(Pk)return _E;Pk=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return _E=e,_E}var wE,Ak;function I4(){if(Ak)return wE;Ak=1;function r(e,t){return function(n){return e(t(n))}}return wE=r,wE}var EE,Rk;function kY(){if(Rk)return EE;Rk=1;var r=I4(),e=r(Object.keys,Object);return EE=e,EE}var OE,Ik;function E2(){if(Ik)return OE;Ik=1;var r=gb(),e=kY(),t=Object.prototype,n=t.hasOwnProperty;function i(o){if(!r(o))return e(o);var a=[];for(var s in Object(o))n.call(o,s)&&s!="constructor"&&a.push(s);return a}return OE=i,OE}var xE,kk;function uf(){if(kk)return xE;kk=1;var r=cb(),e=b2();function t(n){return n!=null&&e(n.length)&&!r(n)}return xE=t,xE}var SE,Dk;function lf(){if(Dk)return SE;Dk=1;var r=R4(),e=E2(),t=uf();function n(i){return t(i)?r(i):e(i)}return SE=n,SE}var TE,Mk;function DY(){if(Mk)return TE;Mk=1;var r=db(),e=lf();function t(n,i){return n&&r(i,e(i),n)}return TE=t,TE}var CE,Lk;function MY(){if(Lk)return CE;Lk=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return CE=r,CE}var PE,Nk;function LY(){if(Nk)return PE;Nk=1;var r=af(),e=gb(),t=MY(),n=Object.prototype,i=n.hasOwnProperty;function o(a){if(!r(a))return t(a);var s=e(a),u=[];for(var l in a)l=="constructor"&&(s||!i.call(a,l))||u.push(l);return u}return PE=o,PE}var AE,jk;function O2(){if(jk)return AE;jk=1;var r=R4(),e=LY(),t=uf();function n(i){return t(i)?r(i,!0):e(i)}return AE=n,AE}var RE,Fk;function NY(){if(Fk)return RE;Fk=1;var r=db(),e=O2();function t(n,i){return n&&r(i,e(i),n)}return RE=t,RE}var Xv={exports:{}};Xv.exports;var Bk;function jY(){return Bk||(Bk=1,(function(r,e){var t=_s(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,a=o?t.Buffer:void 0,s=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,h=s?s(f):new l.constructor(f);return l.copy(h),h}r.exports=u})(Xv,Xv.exports)),Xv.exports}var IE,Uk;function FY(){if(Uk)return IE;Uk=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return IE=r,IE}var kE,qk;function k4(){if(qk)return kE;qk=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=0,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[o++]=s)}return a}return kE=r,kE}var DE,zk;function D4(){if(zk)return DE;zk=1;function r(){return[]}return DE=r,DE}var ME,Gk;function x2(){if(Gk)return ME;Gk=1;var r=k4(),e=D4(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(s){return n.call(a,s)}))}:e;return ME=o,ME}var LE,Vk;function BY(){if(Vk)return LE;Vk=1;var r=db(),e=x2();function t(n,i){return r(n,e(n),i)}return LE=t,LE}var NE,Wk;function S2(){if(Wk)return NE;Wk=1;function r(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}return NE=r,NE}var jE,Hk;function T2(){if(Hk)return jE;Hk=1;var r=I4(),e=r(Object.getPrototypeOf,Object);return jE=e,jE}var FE,Yk;function M4(){if(Yk)return FE;Yk=1;var r=S2(),e=T2(),t=x2(),n=D4(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)r(s,t(a)),a=e(a);return s}:n;return FE=o,FE}var BE,Xk;function UY(){if(Xk)return BE;Xk=1;var r=db(),e=M4();function t(n,i){return r(n,e(n),i)}return BE=t,BE}var UE,$k;function L4(){if($k)return UE;$k=1;var r=S2(),e=oi();function t(n,i,o){var a=i(n);return e(n)?a:r(a,o(n))}return UE=t,UE}var qE,Kk;function N4(){if(Kk)return qE;Kk=1;var r=L4(),e=x2(),t=lf();function n(i){return r(i,t,e)}return qE=n,qE}var zE,Zk;function qY(){if(Zk)return zE;Zk=1;var r=L4(),e=M4(),t=O2();function n(i){return r(i,t,e)}return zE=n,zE}var GE,Qk;function zY(){if(Qk)return GE;Qk=1;var r=sf(),e=_s(),t=r(e,"DataView");return GE=t,GE}var VE,Jk;function GY(){if(Jk)return VE;Jk=1;var r=sf(),e=_s(),t=r(e,"Promise");return VE=t,VE}var WE,eD;function j4(){if(eD)return WE;eD=1;var r=sf(),e=_s(),t=r(e,"Set");return WE=t,WE}var HE,tD;function VY(){if(tD)return HE;tD=1;var r=sf(),e=_s(),t=r(e,"WeakMap");return HE=t,HE}var YE,rD;function _d(){if(rD)return YE;rD=1;var r=zY(),e=p2(),t=GY(),n=j4(),i=VY(),o=bd(),a=S4(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",d=a(r),v=a(e),p=a(t),m=a(n),y=a(i),b=o;return(r&&b(new r(new ArrayBuffer(1)))!=h||e&&b(new e)!=s||t&&b(t.resolve())!=l||n&&b(new n)!=c||i&&b(new i)!=f)&&(b=function(g){var _=o(g),w=_==u?g.constructor:void 0,x=w?a(w):"";if(x)switch(x){case d:return h;case v:return s;case p:return l;case m:return c;case y:return f}return _}),YE=b,YE}var XE,nD;function WY(){if(nD)return XE;nD=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return XE=t,XE}var $E,iD;function F4(){if(iD)return $E;iD=1;var r=_s(),e=r.Uint8Array;return $E=e,$E}var KE,oD;function C2(){if(oD)return KE;oD=1;var r=F4();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return KE=e,KE}var ZE,aD;function HY(){if(aD)return ZE;aD=1;var r=C2();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return ZE=e,ZE}var QE,sD;function YY(){if(sD)return QE;sD=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return QE=e,QE}var JE,uD;function XY(){if(uD)return JE;uD=1;var r=md(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return JE=n,JE}var eO,lD;function $Y(){if(lD)return eO;lD=1;var r=C2();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return eO=e,eO}var tO,cD;function KY(){if(cD)return tO;cD=1;var r=C2(),e=HY(),t=YY(),n=XY(),i=$Y(),o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",m="[object Float64Array]",y="[object Int8Array]",b="[object Int16Array]",g="[object Int32Array]",_="[object Uint8Array]",w="[object Uint8ClampedArray]",x="[object Uint16Array]",E="[object Uint32Array]";function O(C,A,R){var k=C.constructor;switch(A){case d:return r(C);case o:case a:return new k(+C);case v:return e(C,R);case p:case m:case y:case b:case g:case _:case w:case x:case E:return i(C,R);case s:return new k;case u:case f:return new k(C);case l:return t(C);case c:return new k;case h:return n(C)}}return tO=O,tO}var rO,fD;function B4(){if(fD)return rO;fD=1;var r=af(),e=Object.create,t=(function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return rO=t,rO}var nO,hD;function ZY(){if(hD)return nO;hD=1;var r=B4(),e=T2(),t=gb();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return nO=n,nO}var iO,dD;function QY(){if(dD)return iO;dD=1;var r=_d(),e=au(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return iO=n,iO}var oO,vD;function JY(){if(vD)return oO;vD=1;var r=QY(),e=_2(),t=w2(),n=t&&t.isMap,i=n?e(n):r;return oO=i,oO}var aO,pD;function eX(){if(pD)return aO;pD=1;var r=_d(),e=au(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return aO=n,aO}var sO,gD;function tX(){if(gD)return sO;gD=1;var r=eX(),e=_2(),t=w2(),n=t&&t.isSet,i=n?e(n):r;return sO=i,sO}var uO,yD;function rX(){if(yD)return uO;yD=1;var r=y2(),e=m2(),t=P4(),n=DY(),i=NY(),o=jY(),a=FY(),s=BY(),u=UY(),l=N4(),c=qY(),f=_d(),h=WY(),d=KY(),v=ZY(),p=oi(),m=Og(),y=JY(),b=af(),g=tX(),_=lf(),w=O2(),x=1,E=2,O=4,C="[object Arguments]",A="[object Array]",R="[object Boolean]",k="[object Date]",D="[object Error]",L="[object Function]",j="[object GeneratorFunction]",q="[object Map]",B="[object Number]",U="[object Object]",W="[object RegExp]",H="[object Set]",Y="[object String]",Z="[object Symbol]",ce="[object WeakMap]",$="[object ArrayBuffer]",K="[object DataView]",ie="[object Float32Array]",ae="[object Float64Array]",le="[object Int8Array]",te="[object Int16Array]",ee="[object Int32Array]",re="[object Uint8Array]",he="[object Uint8ClampedArray]",ve="[object Uint16Array]",_e="[object Uint32Array]",Oe={};Oe[C]=Oe[A]=Oe[$]=Oe[K]=Oe[R]=Oe[k]=Oe[ie]=Oe[ae]=Oe[le]=Oe[te]=Oe[ee]=Oe[q]=Oe[B]=Oe[U]=Oe[W]=Oe[H]=Oe[Y]=Oe[Z]=Oe[re]=Oe[he]=Oe[ve]=Oe[_e]=!0,Oe[D]=Oe[L]=Oe[ce]=!1;function Pe(me,F,G,X,se,pe){var ge,xe=F&x,Ne=F&E,He=F&O;if(G&&(ge=se?G(me,X,se,pe):G(me)),ge!==void 0)return ge;if(!b(me))return me;var at=p(me);if(at){if(ge=h(me),!xe)return a(me,ge)}else{var Ze=f(me),et=Ze==L||Ze==j;if(m(me))return o(me,xe);if(Ze==U||Ze==C||et&&!se){if(ge=Ne||et?{}:v(me),!xe)return Ne?u(me,i(ge,me)):s(me,n(ge,me))}else{if(!Oe[Ze])return se?me:{};ge=d(me,Ze,xe)}}pe||(pe=new r);var Qe=pe.get(me);if(Qe)return Qe;pe.set(me,ge),g(me)?me.forEach(function(oe){ge.add(Pe(oe,F,G,oe,me,pe))}):y(me)&&me.forEach(function(oe,Ee){ge.set(Ee,Pe(oe,F,G,Ee,me,pe))});var Xe=He?Ne?c:l:Ne?w:_,ke=at?void 0:Xe(me);return e(ke||me,function(oe,Ee){ke&&(Ee=oe,oe=me[Ee]),t(ge,Ee,Pe(oe,F,G,Ee,me,pe))}),ge}return uO=Pe,uO}var lO,mD;function nX(){if(mD)return lO;mD=1;var r=rX(),e=4;function t(n){return r(n,e)}return lO=t,lO}var cO,bD;function U4(){if(bD)return cO;bD=1;function r(e){return function(){return e}}return cO=r,cO}var fO,_D;function iX(){if(_D)return fO;_D=1;function r(e){return function(t,n,i){for(var o=-1,a=Object(t),s=i(t),u=s.length;u--;){var l=s[e?u:++o];if(n(a[l],l,a)===!1)break}return t}}return fO=r,fO}var hO,wD;function oX(){if(wD)return hO;wD=1;var r=iX(),e=r();return hO=e,hO}var dO,ED;function q4(){if(ED)return dO;ED=1;var r=oX(),e=lf();function t(n,i){return n&&r(n,i,e)}return dO=t,dO}var vO,OD;function aX(){if(OD)return vO;OD=1;var r=uf();function e(t,n){return function(i,o){if(i==null)return i;if(!r(i))return t(i,o);for(var a=i.length,s=n?a:-1,u=Object(i);(n?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return vO=e,vO}var pO,xD;function yb(){if(xD)return pO;xD=1;var r=q4(),e=aX(),t=e(r);return pO=t,pO}var gO,SD;function mb(){if(SD)return gO;SD=1;function r(e){return e}return gO=r,gO}var yO,TD;function sX(){if(TD)return yO;TD=1;var r=mb();function e(t){return typeof t=="function"?t:r}return yO=e,yO}var mO,CD;function uX(){if(CD)return mO;CD=1;var r=m2(),e=yb(),t=sX(),n=oi();function i(o,a){var s=n(o)?r:e;return s(o,t(a))}return mO=i,mO}var bO,PD;function lX(){return PD||(PD=1,bO=uX()),bO}var _O,AD;function cX(){if(AD)return _O;AD=1;var r=yb();function e(t,n){var i=[];return r(t,function(o,a,s){n(o,a,s)&&i.push(o)}),i}return _O=e,_O}var wO,RD;function fX(){if(RD)return wO;RD=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return wO=e,wO}var EO,ID;function hX(){if(ID)return EO;ID=1;function r(e){return this.__data__.has(e)}return EO=r,EO}var OO,kD;function z4(){if(kD)return OO;kD=1;var r=g2(),e=fX(),t=hX();function n(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new r;++o<a;)this.add(i[o])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,OO=n,OO}var xO,DD;function dX(){if(DD)return xO;DD=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return xO=r,xO}var SO,MD;function G4(){if(MD)return SO;MD=1;function r(e,t){return e.has(t)}return SO=r,SO}var TO,LD;function V4(){if(LD)return TO;LD=1;var r=z4(),e=dX(),t=G4(),n=1,i=2;function o(a,s,u,l,c,f){var h=u&n,d=a.length,v=s.length;if(d!=v&&!(h&&v>d))return!1;var p=f.get(a),m=f.get(s);if(p&&m)return p==s&&m==a;var y=-1,b=!0,g=u&i?new r:void 0;for(f.set(a,s),f.set(s,a);++y<d;){var _=a[y],w=s[y];if(l)var x=h?l(w,_,y,s,a,f):l(_,w,y,a,s,f);if(x!==void 0){if(x)continue;b=!1;break}if(g){if(!e(s,function(E,O){if(!t(g,O)&&(_===E||c(_,E,u,l,f)))return g.push(O)})){b=!1;break}}else if(!(_===w||c(_,w,u,l,f))){b=!1;break}}return f.delete(a),f.delete(s),b}return TO=o,TO}var CO,ND;function vX(){if(ND)return CO;ND=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,o){n[++t]=[o,i]}),n}return CO=r,CO}var PO,jD;function P2(){if(jD)return PO;jD=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return PO=r,PO}var AO,FD;function pX(){if(FD)return AO;FD=1;var r=md(),e=F4(),t=v2(),n=V4(),i=vX(),o=P2(),a=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",d="[object RegExp]",v="[object Set]",p="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",g=r?r.prototype:void 0,_=g?g.valueOf:void 0;function w(x,E,O,C,A,R,k){switch(O){case b:if(x.byteLength!=E.byteLength||x.byteOffset!=E.byteOffset)return!1;x=x.buffer,E=E.buffer;case y:return!(x.byteLength!=E.byteLength||!R(new e(x),new e(E)));case u:case l:case h:return t(+x,+E);case c:return x.name==E.name&&x.message==E.message;case d:case p:return x==E+"";case f:var D=i;case v:var L=C&a;if(D||(D=o),x.size!=E.size&&!L)return!1;var j=k.get(x);if(j)return j==E;C|=s,k.set(x,E);var q=n(D(x),D(E),C,A,R,k);return k.delete(x),q;case m:if(_)return _.call(x)==_.call(E)}return!1}return AO=w,AO}var RO,BD;function gX(){if(BD)return RO;BD=1;var r=N4(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s,u,l,c){var f=s&e,h=r(o),d=h.length,v=r(a),p=v.length;if(d!=p&&!f)return!1;for(var m=d;m--;){var y=h[m];if(!(f?y in a:n.call(a,y)))return!1}var b=c.get(o),g=c.get(a);if(b&&g)return b==a&&g==o;var _=!0;c.set(o,a),c.set(a,o);for(var w=f;++m<d;){y=h[m];var x=o[y],E=a[y];if(u)var O=f?u(E,x,y,a,o,c):u(x,E,y,o,a,c);if(!(O===void 0?x===E||l(x,E,s,u,c):O)){_=!1;break}w||(w=y=="constructor")}if(_&&!w){var C=o.constructor,A=a.constructor;C!=A&&"constructor"in o&&"constructor"in a&&!(typeof C=="function"&&C instanceof C&&typeof A=="function"&&A instanceof A)&&(_=!1)}return c.delete(o),c.delete(a),_}return RO=i,RO}var IO,UD;function yX(){if(UD)return IO;UD=1;var r=y2(),e=V4(),t=pX(),n=gX(),i=_d(),o=oi(),a=Og(),s=pb(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function v(p,m,y,b,g,_){var w=o(p),x=o(m),E=w?c:i(p),O=x?c:i(m);E=E==l?f:E,O=O==l?f:O;var C=E==f,A=O==f,R=E==O;if(R&&a(p)){if(!a(m))return!1;w=!0,C=!1}if(R&&!C)return _||(_=new r),w||s(p)?e(p,m,y,b,g,_):t(p,m,E,y,b,g,_);if(!(y&u)){var k=C&&d.call(p,"__wrapped__"),D=A&&d.call(m,"__wrapped__");if(k||D){var L=k?p.value():p,j=D?m.value():m;return _||(_=new r),g(L,j,y,b,_)}}return R?(_||(_=new r),n(p,m,y,b,g,_)):!1}return IO=v,IO}var kO,qD;function W4(){if(qD)return kO;qD=1;var r=yX(),e=au();function t(n,i,o,a,s){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,o,a,t,s)}return kO=t,kO}var DO,zD;function mX(){if(zD)return DO;zD=1;var r=y2(),e=W4(),t=1,n=2;function i(o,a,s,u){var l=s.length,c=l,f=!u;if(o==null)return!c;for(o=Object(o);l--;){var h=s[l];if(f&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++l<c;){h=s[l];var d=h[0],v=o[d],p=h[1];if(f&&h[2]){if(v===void 0&&!(d in o))return!1}else{var m=new r;if(u)var y=u(v,p,d,o,a,m);if(!(y===void 0?e(p,v,t|n,u,m):y))return!1}}return!0}return DO=i,DO}var MO,GD;function H4(){if(GD)return MO;GD=1;var r=af();function e(t){return t===t&&!r(t)}return MO=e,MO}var LO,VD;function bX(){if(VD)return LO;VD=1;var r=H4(),e=lf();function t(n){for(var i=e(n),o=i.length;o--;){var a=i[o],s=n[a];i[o]=[a,s,r(s)]}return i}return LO=t,LO}var NO,WD;function Y4(){if(WD)return NO;WD=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return NO=r,NO}var jO,HD;function _X(){if(HD)return jO;HD=1;var r=mX(),e=bX(),t=Y4();function n(i){var o=e(i);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(a){return a===i||r(a,i,o)}}return jO=n,jO}var FO,YD;function A2(){if(YD)return FO;YD=1;var r=bd(),e=au(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return FO=n,FO}var BO,XD;function R2(){if(XD)return BO;XD=1;var r=oi(),e=A2(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return BO=i,BO}var UO,$D;function wX(){if($D)return UO;$D=1;var r=g2(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,UO=t,UO}var qO,KD;function EX(){if(KD)return qO;KD=1;var r=wX(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return qO=t,qO}var zO,ZD;function OX(){if(ZD)return zO;ZD=1;var r=EX(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return zO=n,zO}var GO,QD;function I2(){if(QD)return GO;QD=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return GO=r,GO}var VO,JD;function xX(){if(JD)return VO;JD=1;var r=md(),e=I2(),t=oi(),n=A2(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return VO=a,VO}var WO,eM;function SX(){if(eM)return WO;eM=1;var r=xX();function e(t){return t==null?"":r(t)}return WO=e,WO}var HO,tM;function X4(){if(tM)return HO;tM=1;var r=oi(),e=R2(),t=OX(),n=SX();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return HO=i,HO}var YO,rM;function bb(){if(rM)return YO;rM=1;var r=A2();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return YO=e,YO}var XO,nM;function $4(){if(nM)return XO;nM=1;var r=X4(),e=bb();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return XO=t,XO}var $O,iM;function TX(){if(iM)return $O;iM=1;var r=$4();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return $O=e,$O}var KO,oM;function CX(){if(oM)return KO;oM=1;function r(e,t){return e!=null&&t in Object(e)}return KO=r,KO}var ZO,aM;function K4(){if(aM)return ZO;aM=1;var r=X4(),e=vb(),t=oi(),n=A4(),i=b2(),o=bb();function a(s,u,l){u=r(u,s);for(var c=-1,f=u.length,h=!1;++c<f;){var d=o(u[c]);if(!(h=s!=null&&l(s,d)))break;s=s[d]}return h||++c!=f?h:(f=s==null?0:s.length,!!f&&i(f)&&n(d,f)&&(t(s)||e(s)))}return ZO=a,ZO}var QO,sM;function PX(){if(sM)return QO;sM=1;var r=CX(),e=K4();function t(n,i){return n!=null&&e(n,i,r)}return QO=t,QO}var JO,uM;function AX(){if(uM)return JO;uM=1;var r=W4(),e=TX(),t=PX(),n=R2(),i=H4(),o=Y4(),a=bb(),s=1,u=2;function l(c,f){return n(c)&&i(f)?o(a(c),f):function(h){var d=e(h,c);return d===void 0&&d===f?t(h,c):r(f,d,s|u)}}return JO=l,JO}var ex,lM;function Z4(){if(lM)return ex;lM=1;function r(e){return function(t){return t==null?void 0:t[e]}}return ex=r,ex}var tx,cM;function RX(){if(cM)return tx;cM=1;var r=$4();function e(t){return function(n){return r(n,t)}}return tx=e,tx}var rx,fM;function IX(){if(fM)return rx;fM=1;var r=Z4(),e=RX(),t=R2(),n=bb();function i(o){return t(o)?r(n(o)):e(o)}return rx=i,rx}var nx,hM;function _b(){if(hM)return nx;hM=1;var r=_X(),e=AX(),t=mb(),n=oi(),i=IX();function o(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?n(a)?e(a[0],a[1]):r(a):i(a)}return nx=o,nx}var ix,dM;function kX(){if(dM)return ix;dM=1;var r=k4(),e=cX(),t=_b(),n=oi();function i(o,a){var s=n(o)?r:e;return s(o,t(a,3))}return ix=i,ix}var ox,vM;function DX(){if(vM)return ox;vM=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return ox=t,ox}var ax,pM;function MX(){if(pM)return ax;pM=1;var r=DX(),e=K4();function t(n,i){return n!=null&&e(n,i,r)}return ax=t,ax}var sx,gM;function LX(){if(gM)return sx;gM=1;var r=E2(),e=_d(),t=vb(),n=oi(),i=uf(),o=Og(),a=gb(),s=pb(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||o(d)||s(d)||t(d)))return!d.length;var v=e(d);if(v==u||v==l)return!d.size;if(a(d))return!r(d).length;for(var p in d)if(f.call(d,p))return!1;return!0}return sx=h,sx}var ux,yM;function NX(){if(yM)return ux;yM=1;function r(e){return e===void 0}return ux=r,ux}var lx,mM;function jX(){if(mM)return lx;mM=1;var r=yb(),e=uf();function t(n,i){var o=-1,a=e(n)?Array(n.length):[];return r(n,function(s,u,l){a[++o]=i(s,u,l)}),a}return lx=t,lx}var cx,bM;function FX(){if(bM)return cx;bM=1;var r=I2(),e=_b(),t=jX(),n=oi();function i(o,a){var s=n(o)?r:t;return s(o,e(a,3))}return cx=i,cx}var fx,_M;function BX(){if(_M)return fx;_M=1;function r(e,t,n,i){var o=-1,a=e==null?0:e.length;for(i&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}return fx=r,fx}var hx,wM;function UX(){if(wM)return hx;wM=1;function r(e,t,n,i,o){return o(e,function(a,s,u){n=i?(i=!1,a):t(n,a,s,u)}),n}return hx=r,hx}var dx,EM;function qX(){if(EM)return dx;EM=1;var r=BX(),e=yb(),t=_b(),n=UX(),i=oi();function o(a,s,u){var l=i(a)?r:n,c=arguments.length<3;return l(a,t(s,4),u,c,e)}return dx=o,dx}var vx,OM;function zX(){if(OM)return vx;OM=1;var r=bd(),e=oi(),t=au(),n="[object String]";function i(o){return typeof o=="string"||!e(o)&&t(o)&&r(o)==n}return vx=i,vx}var px,xM;function GX(){if(xM)return px;xM=1;var r=Z4(),e=r("length");return px=e,px}var gx,SM;function VX(){if(SM)return gx;SM=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+r+i+o+"]");function u(l){return s.test(l)}return gx=u,gx}var yx,TM;function WX(){if(TM)return yx;TM=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,o="\\ufe0e\\ufe0f",a="["+r+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=l+"?",p="["+o+"]?",m="(?:"+d+"(?:"+[c,f,h].join("|")+")"+p+v+")*",y=p+v+m,b="(?:"+[c+s+"?",s,f,h,a].join("|")+")",g=RegExp(u+"(?="+u+")|"+b+y,"g");function _(w){for(var x=g.lastIndex=0;g.test(w);)++x;return x}return yx=_,yx}var mx,CM;function HX(){if(CM)return mx;CM=1;var r=GX(),e=VX(),t=WX();function n(i){return e(i)?t(i):r(i)}return mx=n,mx}var bx,PM;function YX(){if(PM)return bx;PM=1;var r=E2(),e=_d(),t=uf(),n=zX(),i=HX(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(t(u))return n(u)?i(u):u.length;var l=e(u);return l==o||l==a?u.size:r(u).length}return bx=s,bx}var _x,AM;function XX(){if(AM)return _x;AM=1;var r=m2(),e=B4(),t=q4(),n=_b(),i=T2(),o=oi(),a=Og(),s=cb(),u=af(),l=pb();function c(f,h,d){var v=o(f),p=v||a(f)||l(f);if(h=n(h,4),d==null){var m=f&&f.constructor;p?d=v?new m:[]:u(f)?d=s(m)?e(i(f)):{}:d={}}return(p?r:t)(f,function(y,b,g){return h(d,y,b,g)}),d}return _x=c,_x}var wx,RM;function $X(){if(RM)return wx;RM=1;var r=md(),e=vb(),t=oi(),n=r?r.isConcatSpreadable:void 0;function i(o){return t(o)||e(o)||!!(n&&o&&o[n])}return wx=i,wx}var Ex,IM;function KX(){if(IM)return Ex;IM=1;var r=S2(),e=$X();function t(n,i,o,a,s){var u=-1,l=n.length;for(o||(o=e),s||(s=[]);++u<l;){var c=n[u];i>0&&o(c)?i>1?t(c,i-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}return Ex=t,Ex}var Ox,kM;function ZX(){if(kM)return Ox;kM=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return Ox=r,Ox}var xx,DM;function QX(){if(DM)return xx;DM=1;var r=ZX(),e=Math.max;function t(n,i,o){return i=e(i===void 0?n.length-1:i,0),function(){for(var a=arguments,s=-1,u=e(a.length-i,0),l=Array(u);++s<u;)l[s]=a[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=a[s];return c[i]=o(l),r(n,this,c)}}return xx=t,xx}var Sx,MM;function JX(){if(MM)return Sx;MM=1;var r=U4(),e=T4(),t=mb(),n=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(o),writable:!0})}:t;return Sx=n,Sx}var Tx,LM;function e$(){if(LM)return Tx;LM=1;var r=800,e=16,t=Date.now;function n(i){var o=0,a=0;return function(){var s=t(),u=e-(s-a);if(a=s,u>0){if(++o>=r)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return Tx=n,Tx}var Cx,NM;function t$(){if(NM)return Cx;NM=1;var r=JX(),e=e$(),t=e(r);return Cx=t,Cx}var Px,jM;function r$(){if(jM)return Px;jM=1;var r=mb(),e=QX(),t=t$();function n(i,o){return t(e(i,o,r),i+"")}return Px=n,Px}var Ax,FM;function n$(){if(FM)return Ax;FM=1;function r(e,t,n,i){for(var o=e.length,a=n+(i?1:-1);i?a--:++a<o;)if(t(e[a],a,e))return a;return-1}return Ax=r,Ax}var Rx,BM;function i$(){if(BM)return Rx;BM=1;function r(e){return e!==e}return Rx=r,Rx}var Ix,UM;function o$(){if(UM)return Ix;UM=1;function r(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}return Ix=r,Ix}var kx,qM;function a$(){if(qM)return kx;qM=1;var r=n$(),e=i$(),t=o$();function n(i,o,a){return o===o?t(i,o,a):r(i,e,a)}return kx=n,kx}var Dx,zM;function s$(){if(zM)return Dx;zM=1;var r=a$();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return Dx=e,Dx}var Mx,GM;function u$(){if(GM)return Mx;GM=1;function r(e,t,n){for(var i=-1,o=e==null?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}return Mx=r,Mx}var Lx,VM;function l$(){if(VM)return Lx;VM=1;function r(){}return Lx=r,Lx}var Nx,WM;function c$(){if(WM)return Nx;WM=1;var r=j4(),e=l$(),t=P2(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(o){return new r(o)}:e;return Nx=i,Nx}var jx,HM;function f$(){if(HM)return jx;HM=1;var r=z4(),e=s$(),t=u$(),n=G4(),i=c$(),o=P2(),a=200;function s(u,l,c){var f=-1,h=e,d=u.length,v=!0,p=[],m=p;if(c)v=!1,h=t;else if(d>=a){var y=l?null:i(u);if(y)return o(y);v=!1,h=n,m=new r}else m=l?[]:p;e:for(;++f<d;){var b=u[f],g=l?l(b):b;if(b=c||b!==0?b:0,v&&g===g){for(var _=m.length;_--;)if(m[_]===g)continue e;l&&m.push(g),p.push(b)}else h(m,g,c)||(m!==p&&m.push(g),p.push(b))}return p}return jx=s,jx}var Fx,YM;function h$(){if(YM)return Fx;YM=1;var r=uf(),e=au();function t(n){return e(n)&&r(n)}return Fx=t,Fx}var Bx,XM;function d$(){if(XM)return Bx;XM=1;var r=KX(),e=r$(),t=f$(),n=h$(),i=e(function(o){return t(r(o,1,n,!0))});return Bx=i,Bx}var Ux,$M;function v$(){if($M)return Ux;$M=1;var r=I2();function e(t,n){return r(n,function(i){return t[i]})}return Ux=e,Ux}var qx,KM;function p$(){if(KM)return qx;KM=1;var r=v$(),e=lf();function t(n){return n==null?[]:r(n,e(n))}return qx=t,qx}var zx,ZM;function la(){if(ZM)return zx;ZM=1;var r;if(typeof oz=="function")try{r={clone:nX(),constant:U4(),each:lX(),filter:kX(),has:MX(),isArray:oi(),isEmpty:LX(),isFunction:cb(),isUndefined:NX(),keys:lf(),map:FX(),reduce:qX(),size:YX(),transform:XX(),union:d$(),values:p$()}}catch{}return r||(r=window._),zx=r,zx}var Gx,QM;function k2(){if(QM)return Gx;QM=1;var r=la();Gx=i;var e="\0",t="\0",n="";function i(c){this._isDirected=r.has(c,"directed")?c.directed:!0,this._isMultigraph=r.has(c,"multigraph")?c.multigraph:!1,this._isCompound=r.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var h=arguments,d=this;return r.each(c,function(v){h.length>1?d.setNode(v,f):d.setNode(v)}),this},i.prototype.setNode=function(c,f){return r.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return r.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(r.has(this._nodes,c)){var h=function(d){f.removeEdge(f._edgeObjs[d])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],r.each(this.children(c),function(d){f.setParent(d)}),delete this._children[c]),r.each(r.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],r.each(r.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(f))f=t;else{f+="";for(var h=f;!r.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==t)return f}},i.prototype.children=function(c){if(r.isUndefined(c)&&(c=t),this._isCompound){var f=this._children[c];if(f)return r.keys(f)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return r.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return r.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return r.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;r.each(this._nodes,function(p,m){c(m)&&f.setNode(m,p)}),r.each(this._edgeObjs,function(p){f.hasNode(p.v)&&f.hasNode(p.w)&&f.setEdge(p,h.edge(p))});var d={};function v(p){var m=h.parent(p);return m===void 0||f.hasNode(m)?(d[p]=m,m):m in d?d[m]:v(m)}return this._isCompound&&r.each(f.nodes(),function(p){f.setParent(p,v(p))}),f},i.prototype.setDefaultEdgeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var h=this,d=arguments;return r.reduce(c,function(v,p){return d.length>1?h.setEdge(v,p,f):h.setEdge(v,p),p}),this},i.prototype.setEdge=function(){var c,f,h,d,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,f=p.w,h=p.name,arguments.length===2&&(d=arguments[1],v=!0)):(c=p,f=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],v=!0)),c=""+c,f=""+f,r.isUndefined(h)||(h=""+h);var m=s(this._isDirected,c,f,h);if(r.has(this._edgeLabels,m))return v&&(this._edgeLabels[m]=d),this;if(!r.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[m]=v?d:this._defaultEdgeLabelFn(c,f,h);var y=u(this._isDirected,c,f,h);return c=y.v,f=y.w,Object.freeze(y),this._edgeObjs[m]=y,o(this._preds[f],c),o(this._sucs[c],f),this._in[f][m]=y,this._out[c][m]=y,this._edgeCount++,this},i.prototype.edge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h);return r.has(this._edgeLabels,d)},i.prototype.removeEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h),v=this._edgeObjs[d];return v&&(c=v.v,f=v.w,delete this._edgeLabels[d],delete this._edgeObjs[d],a(this._preds[f],c),a(this._sucs[c],f),delete this._in[f][d],delete this._out[c][d],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var h=this._in[c];if(h){var d=r.values(h);return f?r.filter(d,function(v){return v.v===f}):d}},i.prototype.outEdges=function(c,f){var h=this._out[c];if(h){var d=r.values(h);return f?r.filter(d,function(v){return v.w===f}):d}},i.prototype.nodeEdges=function(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))};function o(c,f){c[f]?c[f]++:c[f]=1}function a(c,f){--c[f]||delete c[f]}function s(c,f,h,d){var v=""+f,p=""+h;if(!c&&v>p){var m=v;v=p,p=m}return v+n+p+n+(r.isUndefined(d)?e:d)}function u(c,f,h,d){var v=""+f,p=""+h;if(!c&&v>p){var m=v;v=p,p=m}var y={v,w:p};return d&&(y.name=d),y}function l(c,f){return s(c,f.v,f.w,f.name)}return Gx}var Vx,JM;function g$(){return JM||(JM=1,Vx="2.1.8"),Vx}var Wx,eL;function y$(){return eL||(eL=1,Wx={Graph:k2(),version:g$()}),Wx}var Hx,tL;function m$(){if(tL)return Hx;tL=1;var r=la(),e=k2();Hx={write:t,read:o};function t(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:i(a)};return r.isUndefined(a.graph())||(s.value=r.clone(a.graph())),s}function n(a){return r.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return r.isUndefined(u)||(c.value=u),r.isUndefined(l)||(c.parent=l),c})}function i(a){return r.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return r.isUndefined(s.name)||(l.name=s.name),r.isUndefined(u)||(l.value=u),l})}function o(a){var s=new e(a.options).setGraph(a.value);return r.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),r.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Hx}var Yx,rL;function b$(){if(rL)return Yx;rL=1;var r=la();Yx=e;function e(t){var n={},i=[],o;function a(s){r.has(n,s)||(n[s]=!0,o.push(s),r.each(t.successors(s),a),r.each(t.predecessors(s),a))}return r.each(t.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return Yx}var Xx,nL;function Q4(){if(nL)return Xx;nL=1;var r=la();Xx=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var o=this._arr,a=o.length;return i[t]=a,o.push({key:t,priority:n}),this._decrease(a),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var i=this._keyIndices[t];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(t){var n=this._arr,i=2*t,o=i+1,a=t;i<n.length&&(a=n[i].priority<n[a].priority?i:a,o<n.length&&(a=n[o].priority<n[a].priority?o:a),a!==t&&(this._swap(t,a),this._heapify(a)))},e.prototype._decrease=function(t){for(var n=this._arr,i=n[t].priority,o;t!==0&&(o=t>>1,!(n[o].priority<i));)this._swap(t,o),t=o},e.prototype._swap=function(t,n){var i=this._arr,o=this._keyIndices,a=i[t],s=i[n];i[t]=s,i[n]=a,o[s.key]=t,o[a.key]=n},Xx}var $x,iL;function J4(){if(iL)return $x;iL=1;var r=la(),e=Q4();$x=n;var t=r.constant(1);function n(o,a,s,u){return i(o,String(a),s||t,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new e,f,h,d=function(v){var p=v.v!==f?v.v:v.w,m=l[p],y=s(v),b=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);b<m.distance&&(m.distance=b,m.predecessor=f,c.decrease(p,b))};for(o.nodes().forEach(function(v){var p=v===a?0:Number.POSITIVE_INFINITY;l[v]={distance:p},c.add(v,p)});c.size()>0&&(f=c.removeMin(),h=l[f],h.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(d);return l}return $x}var Kx,oL;function _$(){if(oL)return Kx;oL=1;var r=J4(),e=la();Kx=t;function t(n,i,o){return e.transform(n.nodes(),function(a,s){a[s]=r(n,s,i,o)},{})}return Kx}var Zx,aL;function eF(){if(aL)return Zx;aL=1;var r=la();Zx=e;function e(t){var n=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),t.successors(u).forEach(function(h){r.has(o,h)?o[h].onStack&&(l.lowlink=Math.min(l.lowlink,o[h].index)):(s(h),l.lowlink=Math.min(l.lowlink,o[h].lowlink))}),l.lowlink===l.index){var c=[],f;do f=i.pop(),o[f].onStack=!1,c.push(f);while(u!==f);a.push(c)}}return t.nodes().forEach(function(u){r.has(o,u)||s(u)}),a}return Zx}var Qx,sL;function w$(){if(sL)return Qx;sL=1;var r=la(),e=eF();Qx=t;function t(n){return r.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return Qx}var Jx,uL;function E$(){if(uL)return Jx;uL=1;var r=la();Jx=t;var e=r.constant(1);function t(i,o,a){return n(i,o||e,a||function(s){return i.outEdges(s)})}function n(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var f=c.v===l?c.w:c.v,h=o(c);s[l][f]={distance:h,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(f){var h=s[f];u.forEach(function(d){var v=h[l],p=c[d],m=h[d],y=v.distance+p.distance;y<m.distance&&(m.distance=y,m.predecessor=p.predecessor)})})}),s}return Jx}var eS,lL;function tF(){if(lL)return eS;lL=1;var r=la();eS=e,e.CycleException=t;function e(n){var i={},o={},a=[];function s(u){if(r.has(o,u))throw new t;r.has(i,u)||(o[u]=!0,i[u]=!0,r.each(n.predecessors(u),s),delete o[u],a.push(u))}if(r.each(n.sinks(),s),r.size(i)!==n.nodeCount())throw new t;return a}function t(){}return t.prototype=new Error,eS}var tS,cL;function O$(){if(cL)return tS;cL=1;var r=tF();tS=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return tS}var rS,fL;function rF(){if(fL)return rS;fL=1;var r=la();rS=e;function e(n,i,o){r.isArray(i)||(i=[i]);var a=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return r.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,o==="post",u,a,s)}),s}function t(n,i,o,a,s,u){r.has(a,i)||(a[i]=!0,o||u.push(i),r.each(s(i),function(l){t(n,l,o,a,s,u)}),o&&u.push(i))}return rS}var nS,hL;function x$(){if(hL)return nS;hL=1;var r=rF();nS=e;function e(t,n){return r(t,n,"post")}return nS}var iS,dL;function S$(){if(dL)return iS;dL=1;var r=rF();iS=e;function e(t,n){return r(t,n,"pre")}return iS}var oS,vL;function T$(){if(vL)return oS;vL=1;var r=la(),e=k2(),t=Q4();oS=n;function n(i,o){var a=new e,s={},u=new t,l;function c(h){var d=h.v===l?h.w:h.v,v=u.priority(d);if(v!==void 0){var p=o(h);p<v&&(s[d]=l,u.decrease(d,p))}}if(i.nodeCount()===0)return a;r.each(i.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),u.decrease(i.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),r.has(s,l))a.setEdge(l,s[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(c)}return a}return oS}var aS,pL;function C$(){return pL||(pL=1,aS={components:b$(),dijkstra:J4(),dijkstraAll:_$(),findCycles:w$(),floydWarshall:E$(),isAcyclic:O$(),postorder:x$(),preorder:S$(),prim:T$(),tarjan:eF(),topsort:tF()}),aS}var sS,gL;function sa(){if(gL)return sS;gL=1;var r=y$();return sS={Graph:r.Graph,json:m$(),alg:C$(),version:r.version},sS}var $v={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var P$=$v.exports,yL;function nn(){return yL||(yL=1,(function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,h=2,d=4,v=1,p=2,m=1,y=2,b=4,g=8,_=16,w=32,x=64,E=128,O=256,C=512,A=30,R="...",k=800,D=16,L=1,j=2,q=3,B=1/0,U=9007199254740991,W=17976931348623157e292,H=NaN,Y=4294967295,Z=Y-1,ce=Y>>>1,$=[["ary",E],["bind",m],["bindKey",y],["curry",g],["curryRight",_],["flip",C],["partial",w],["partialRight",x],["rearg",O]],K="[object Arguments]",ie="[object Array]",ae="[object AsyncFunction]",le="[object Boolean]",te="[object Date]",ee="[object DOMException]",re="[object Error]",he="[object Function]",ve="[object GeneratorFunction]",_e="[object Map]",Oe="[object Number]",Pe="[object Null]",me="[object Object]",F="[object Promise]",G="[object Proxy]",X="[object RegExp]",se="[object Set]",pe="[object String]",ge="[object Symbol]",xe="[object Undefined]",Ne="[object WeakMap]",He="[object WeakSet]",at="[object ArrayBuffer]",Ze="[object DataView]",et="[object Float32Array]",Qe="[object Float64Array]",Xe="[object Int8Array]",ke="[object Int16Array]",oe="[object Int32Array]",Ee="[object Uint8Array]",Re="[object Uint8ClampedArray]",De="[object Uint16Array]",Me="[object Uint32Array]",it=/\b__p \+= '';/g,Fe=/\b(__p \+=) '' \+/g,ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,ft=/[&<>"']/g,xt=RegExp(rt.source),yt=RegExp(ft.source),nt=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,or=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rr=/^\w*$/,Gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,ur=RegExp(Pt.source),nr=/^\s+/,Ir=/\s/,Kr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,fr=/,? & /,Br=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wr=/[()=,{}\[\]\/\s]/,yn=/\\(\\)?/g,cn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,Sr=/^[-+]0x[0-9a-f]+$/i,gr=/^0b[01]+$/i,wi=/^\[object .+?Constructor\]$/,Dn=/^0o[0-7]+$/i,Ma=/^(?:0|[1-9]\d*)$/,ws=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,No=/($^)/,ca=/['\n\r\u2028\u2029\\]/g,jo="\\ud800-\\udfff",Es="\\u0300-\\u036f",Os="\\ufe20-\\ufe2f",xs="\\u20d0-\\u20ff",Zi=Es+Os+xs,hr="\\u2700-\\u27bf",ar="a-z\\xdf-\\xf6\\xf8-\\xff",La="\\xac\\xb1\\xd7\\xf7",Na="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Al="\\u2000-\\u206f",Yn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ja="A-Z\\xc0-\\xd6\\xd8-\\xde",Zr="\\ufe0e\\ufe0f",mo=La+Na+Al+Yn,fn="[']",su="["+jo+"]",Ss="["+mo+"]",Sn="["+Zi+"]",Rl="\\d+",pf="["+hr+"]",Il="["+ar+"]",kl="[^"+jo+mo+Rl+hr+ar+ja+"]",uu="\\ud83c[\\udffb-\\udfff]",gf="(?:"+Sn+"|"+uu+")",Xn="[^"+jo+"]",Dl="(?:\\ud83c[\\udde6-\\uddff]){2}",$n="[\\ud800-\\udbff][\\udc00-\\udfff]",Fa="["+ja+"]",Ml="\\u200d",bo="(?:"+Il+"|"+kl+")",lu="(?:"+Fa+"|"+kl+")",cu="(?:"+fn+"(?:d|ll|m|re|s|t|ve))?",Fr="(?:"+fn+"(?:D|LL|M|RE|S|T|VE))?",_o=gf+"?",fu="["+Zr+"]?",Ed="(?:"+Ml+"(?:"+[Xn,Dl,$n].join("|")+")"+fu+_o+")*",Ll="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Od="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nl=fu+_o+Ed,hu="(?:"+[pf,Dl,$n].join("|")+")"+Nl,Ba="(?:"+[Xn+Sn+"?",Sn,Dl,$n,su].join("|")+")",xd=RegExp(fn,"g"),yf=RegExp(Sn,"g"),du=RegExp(uu+"(?="+uu+")|"+Ba+Nl,"g"),jl=RegExp([Fa+"?"+Il+"+"+cu+"(?="+[Ss,Fa,"$"].join("|")+")",lu+"+"+Fr+"(?="+[Ss,Fa+bo,"$"].join("|")+")",Fa+"?"+bo+"+"+cu,Fa+"+"+Fr,Od,Ll,Rl,hu].join("|"),"g"),Fl=RegExp("["+Ml+jo+Zi+Zr+"]"),mf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ul=-1,kr={};kr[et]=kr[Qe]=kr[Xe]=kr[ke]=kr[oe]=kr[Ee]=kr[Re]=kr[De]=kr[Me]=!0,kr[K]=kr[ie]=kr[at]=kr[le]=kr[Ze]=kr[te]=kr[re]=kr[he]=kr[_e]=kr[Oe]=kr[me]=kr[X]=kr[se]=kr[pe]=kr[Ne]=!1;var $t={};$t[K]=$t[ie]=$t[at]=$t[Ze]=$t[le]=$t[te]=$t[et]=$t[Qe]=$t[Xe]=$t[ke]=$t[oe]=$t[_e]=$t[Oe]=$t[me]=$t[X]=$t[se]=$t[pe]=$t[ge]=$t[Ee]=$t[Re]=$t[De]=$t[Me]=!0,$t[re]=$t[he]=$t[Ne]=!1;var ql={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ts={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sd=parseFloat,Td=parseInt,wf=typeof Qu=="object"&&Qu&&Qu.Object===Object&&Qu,Ua=typeof self=="object"&&self&&self.Object===Object&&self,hn=wf||Ua||Function("return this")(),vu=e&&!e.nodeType&&e,Kn=vu&&!0&&r&&!r.nodeType&&r,Cs=Kn&&Kn.exports===vu,zl=Cs&&wf.process,Tn=(function(){try{var Te=Kn&&Kn.require&&Kn.require("util").types;return Te||zl&&zl.binding&&zl.binding("util")}catch{}})(),Cn=Tn&&Tn.isArrayBuffer,Fo=Tn&&Tn.isDate,Qi=Tn&&Tn.isMap,Di=Tn&&Tn.isRegExp,Ie=Tn&&Tn.isSet,Ve=Tn&&Tn.isTypedArray;function Be(Te,je,Le){switch(Le.length){case 0:return Te.call(je);case 1:return Te.call(je,Le[0]);case 2:return Te.call(je,Le[0],Le[1]);case 3:return Te.call(je,Le[0],Le[1],Le[2])}return Te.apply(je,Le)}function lt(Te,je,Le,dt){for(var qt=-1,lr=Te==null?0:Te.length;++qt<lr;){var _n=Te[qt];je(dt,_n,Le(_n),Te)}return dt}function _t(Te,je){for(var Le=-1,dt=Te==null?0:Te.length;++Le<dt&&je(Te[Le],Le,Te)!==!1;);return Te}function dr(Te,je){for(var Le=Te==null?0:Te.length;Le--&&je(Te[Le],Le,Te)!==!1;);return Te}function mn(Te,je){for(var Le=-1,dt=Te==null?0:Te.length;++Le<dt;)if(!je(Te[Le],Le,Te))return!1;return!0}function Bn(Te,je){for(var Le=-1,dt=Te==null?0:Te.length,qt=0,lr=[];++Le<dt;){var _n=Te[Le];je(_n,Le,Te)&&(lr[qt++]=_n)}return lr}function Dr(Te,je){var Le=Te==null?0:Te.length;return!!Le&&fa(Te,je,0)>-1}function Gl(Te,je,Le){for(var dt=-1,qt=Te==null?0:Te.length;++dt<qt;)if(Le(je,Te[dt]))return!0;return!1}function Hr(Te,je){for(var Le=-1,dt=Te==null?0:Te.length,qt=Array(dt);++Le<dt;)qt[Le]=je(Te[Le],Le,Te);return qt}function Pn(Te,je){for(var Le=-1,dt=je.length,qt=Te.length;++Le<dt;)Te[qt+Le]=je[Le];return Te}function pu(Te,je,Le,dt){var qt=-1,lr=Te==null?0:Te.length;for(dt&&lr&&(Le=Te[++qt]);++qt<lr;)Le=je(Le,Te[qt],qt,Te);return Le}function Bb(Te,je,Le,dt){var qt=Te==null?0:Te.length;for(dt&&qt&&(Le=Te[--qt]);qt--;)Le=je(Le,Te[qt],qt,Te);return Le}function qa(Te,je){for(var Le=-1,dt=Te==null?0:Te.length;++Le<dt;)if(je(Te[Le],Le,Te))return!0;return!1}var Ef=gu("length");function Of(Te){return Te.split("")}function Rr(Te){return Te.match(Br)||[]}function Cg(Te,je,Le){var dt;return Le(Te,function(qt,lr,_n){if(je(qt,lr,_n))return dt=lr,!1}),dt}function Vl(Te,je,Le,dt){for(var qt=Te.length,lr=Le+(dt?1:-1);dt?lr--:++lr<qt;)if(je(Te[lr],lr,Te))return lr;return-1}function fa(Te,je,Le){return je===je?Mg(Te,je,Le):Vl(Te,Pg,Le)}function Ub(Te,je,Le,dt){for(var qt=Le-1,lr=Te.length;++qt<lr;)if(dt(Te[qt],je))return qt;return-1}function Pg(Te){return Te!==Te}function Ag(Te,je){var Le=Te==null?0:Te.length;return Le?yu(Te,je)/Le:H}function gu(Te){return function(je){return je==null?t:je[Te]}}function Bo(Te){return function(je){return Te==null?t:Te[je]}}function Wl(Te,je,Le,dt,qt){return qt(Te,function(lr,_n,ne){Le=dt?(dt=!1,lr):je(Le,lr,_n,ne)}),Le}function Rg(Te,je){var Le=Te.length;for(Te.sort(je);Le--;)Te[Le]=Te[Le].value;return Te}function yu(Te,je){for(var Le,dt=-1,qt=Te.length;++dt<qt;){var lr=je(Te[dt]);lr!==t&&(Le=Le===t?lr:Le+lr)}return Le}function xf(Te,je){for(var Le=-1,dt=Array(Te);++Le<Te;)dt[Le]=je(Le);return dt}function Ig(Te,je){return Hr(je,function(Le){return[Le,Te[Le]]})}function Hl(Te){return Te&&Te.slice(0,Pf(Te)+1).replace(nr,"")}function Ei(Te){return function(je){return Te(je)}}function Ps(Te,je){return Hr(je,function(Le){return Te[Le]})}function wo(Te,je){return Te.has(je)}function Yl(Te,je){for(var Le=-1,dt=Te.length;++Le<dt&&fa(je,Te[Le],0)>-1;);return Le}function kg(Te,je){for(var Le=Te.length;Le--&&fa(je,Te[Le],0)>-1;);return Le}function qb(Te,je){for(var Le=Te.length,dt=0;Le--;)Te[Le]===je&&++dt;return dt}var zb=Bo(ql),Sf=Bo(Ts);function Tf(Te){return"\\"+_f[Te]}function Cd(Te,je){return Te==null?t:Te[je]}function mu(Te){return Fl.test(Te)}function Dg(Te){return mf.test(Te)}function Gb(Te){for(var je,Le=[];!(je=Te.next()).done;)Le.push(je.value);return Le}function Pd(Te){var je=-1,Le=Array(Te.size);return Te.forEach(function(dt,qt){Le[++je]=[qt,dt]}),Le}function bn(Te,je){return function(Le){return Te(je(Le))}}function Qr(Te,je){for(var Le=-1,dt=Te.length,qt=0,lr=[];++Le<dt;){var _n=Te[Le];(_n===je||_n===c)&&(Te[Le]=c,lr[qt++]=Le)}return lr}function Cf(Te){var je=-1,Le=Array(Te.size);return Te.forEach(function(dt){Le[++je]=dt}),Le}function Vb(Te){var je=-1,Le=Array(Te.size);return Te.forEach(function(dt){Le[++je]=[dt,dt]}),Le}function Mg(Te,je,Le){for(var dt=Le-1,qt=Te.length;++dt<qt;)if(Te[dt]===je)return dt;return-1}function Wb(Te,je,Le){for(var dt=Le+1;dt--;)if(Te[dt]===je)return dt;return dt}function za(Te){return mu(Te)?Xl(Te):Ef(Te)}function ai(Te){return mu(Te)?$l(Te):Of(Te)}function Pf(Te){for(var je=Te.length;je--&&Ir.test(Te.charAt(je)););return je}var bu=Bo(bf);function Xl(Te){for(var je=du.lastIndex=0;du.test(Te);)++je;return je}function $l(Te){return Te.match(du)||[]}function Af(Te){return Te.match(jl)||[]}var _u=(function Te(je){je=je==null?hn:wu.defaults(hn.Object(),je,wu.pick(hn,Bl));var Le=je.Array,dt=je.Date,qt=je.Error,lr=je.Function,_n=je.Math,ne=je.Object,Ga=je.RegExp,Rf=je.String,Jr=je.TypeError,Zt=Le.prototype,As=lr.prototype,Oi=ne.prototype,Ji=je["__core-js_shared__"],Uo=As.toString,Qt=Oi.hasOwnProperty,Lg=0,Ad=(function(){var S=/[^.]+$/.exec(Ji&&Ji.keys&&Ji.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""})(),If=Oi.toString,Hb=Uo.call(ne),Rd=hn._,Kl=Ga("^"+Uo.call(Qt).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rs=Cs?je.Buffer:t,Va=je.Symbol,Zl=je.Uint8Array,qo=Rs?Rs.allocUnsafe:t,Eu=bn(ne.getPrototypeOf,ne),Wa=ne.create,Mi=Oi.propertyIsEnumerable,Ql=Zt.splice,Id=Va?Va.isConcatSpreadable:t,ha=Va?Va.iterator:t,xi=Va?Va.toStringTag:t,Jl=(function(){try{var S=rs(ne,"defineProperty");return S({},"",{}),S}catch{}})(),Yb=je.clearTimeout!==hn.clearTimeout&&je.clearTimeout,kf=dt&&dt.now!==hn.Date.now&&dt.now,Ng=je.setTimeout!==hn.setTimeout&&je.setTimeout,wn=_n.ceil,Ou=_n.floor,Df=ne.getOwnPropertySymbols,zo=Rs?Rs.isBuffer:t,Mf=je.isFinite,Lf=Zt.join,Is=bn(ne.keys,ne),En=_n.max,Tr=_n.min,kd=dt.now,Xb=je.parseInt,jg=_n.random,Dd=Zt.reverse,ks=rs(je,"DataView"),xu=rs(je,"Map"),Ds=rs(je,"Promise"),Ha=rs(je,"Set"),Su=rs(je,"WeakMap"),Tu=rs(ne,"create"),Cu=Su&&new Su,Ya={},Fg=_a(ks),Bg=_a(xu),Ug=_a(Ds),Nf=_a(Ha),qg=_a(Su),ec=Va?Va.prototype:t,Pu=ec?ec.valueOf:t,jf=ec?ec.toString:t;function ue(S){if(On(S)&&!Xt(S)&&!(S instanceof sr)){if(S instanceof Mt)return S;if(Qt.call(S,"__wrapped__"))return Ny(S)}return new Mt(S)}var Xa=(function(){function S(){}return function(P){if(!vn(P))return{};if(Wa)return Wa(P);S.prototype=P;var M=new S;return S.prototype=t,M}})();function Au(){}function Mt(S,P){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=t}ue.templateSettings={escape:nt,evaluate:It,interpolate:St,variable:"",imports:{_:ue}},ue.prototype=Au.prototype,ue.prototype.constructor=ue,Mt.prototype=Xa(Au.prototype),Mt.prototype.constructor=Mt;function sr(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function $b(){var S=new sr(this.__wrapped__);return S.__actions__=qn(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=qn(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=qn(this.__views__),S}function tc(){if(this.__filtered__){var S=new sr(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function zg(){var S=this.__wrapped__.value(),P=this.__dir__,M=Xt(S),z=P<0,Q=M?S.length:0,fe=Cy(0,Q,this.__views__),ye=fe.start,we=fe.end,Ce=we-ye,Ue=z?we:ye-1,Ge=this.__iteratees__,Ye=Ge.length,ct=0,gt=Tr(Ce,this.__takeCount__);if(!M||!z&&Q==Ce&&gt==Ce)return ly(S,this.__actions__);var Bt=[];e:for(;Ce--&&ct<gt;){Ue+=P;for(var tr=-1,Ut=S[Ue];++tr<Ye;){var cr=Ge[tr],yr=cr.iteratee,Ao=cr.type,Fi=yr(Ut);if(Ao==j)Ut=Fi;else if(!Fi){if(Ao==L)continue e;break e}}Bt[ct++]=Ut}return Bt}sr.prototype=Xa(Au.prototype),sr.prototype.constructor=sr;function Ms(S){var P=-1,M=S==null?0:S.length;for(this.clear();++P<M;){var z=S[P];this.set(z[0],z[1])}}function Kb(){this.__data__=Tu?Tu(null):{},this.size=0}function eo(S){var P=this.has(S)&&delete this.__data__[S];return this.size-=P?1:0,P}function Zb(S){var P=this.__data__;if(Tu){var M=P[S];return M===u?t:M}return Qt.call(P,S)?P[S]:t}function Ff(S){var P=this.__data__;return Tu?P[S]!==t:Qt.call(P,S)}function Md(S,P){var M=this.__data__;return this.size+=this.has(S)?0:1,M[S]=Tu&&P===t?u:P,this}Ms.prototype.clear=Kb,Ms.prototype.delete=eo,Ms.prototype.get=Zb,Ms.prototype.has=Ff,Ms.prototype.set=Md;function Go(S){var P=-1,M=S==null?0:S.length;for(this.clear();++P<M;){var z=S[P];this.set(z[0],z[1])}}function Gg(){this.__data__=[],this.size=0}function Li(S){var P=this.__data__,M=rc(P,S);if(M<0)return!1;var z=P.length-1;return M==z?P.pop():Ql.call(P,M,1),--this.size,!0}function $a(S){var P=this.__data__,M=rc(P,S);return M<0?t:P[M][1]}function Ld(S){return rc(this.__data__,S)>-1}function Vg(S,P){var M=this.__data__,z=rc(M,S);return z<0?(++this.size,M.push([S,P])):M[z][1]=P,this}Go.prototype.clear=Gg,Go.prototype.delete=Li,Go.prototype.get=$a,Go.prototype.has=Ld,Go.prototype.set=Vg;function to(S){var P=-1,M=S==null?0:S.length;for(this.clear();++P<M;){var z=S[P];this.set(z[0],z[1])}}function Wg(){this.size=0,this.__data__={hash:new Ms,map:new(xu||Go),string:new Ms}}function Nd(S){var P=oo(this,S).delete(S);return this.size-=P?1:0,P}function Hg(S){return oo(this,S).get(S)}function jd(S){return oo(this,S).has(S)}function Fd(S,P){var M=oo(this,S),z=M.size;return M.set(S,P),this.size+=M.size==z?0:1,this}to.prototype.clear=Wg,to.prototype.delete=Nd,to.prototype.get=Hg,to.prototype.has=jd,to.prototype.set=Fd;function Si(S){var P=-1,M=S==null?0:S.length;for(this.__data__=new to;++P<M;)this.add(S[P])}function Qb(S){return this.__data__.set(S,u),this}function Ka(S){return this.__data__.has(S)}Si.prototype.add=Si.prototype.push=Qb,Si.prototype.has=Ka;function ro(S){var P=this.__data__=new Go(S);this.size=P.size}function Yg(){this.__data__=new Go,this.size=0}function Bd(S){var P=this.__data__,M=P.delete(S);return this.size=P.size,M}function Xg(S){return this.__data__.get(S)}function $g(S){return this.__data__.has(S)}function Kg(S,P){var M=this.__data__;if(M instanceof Go){var z=M.__data__;if(!xu||z.length<i-1)return z.push([S,P]),this.size=++M.size,this;M=this.__data__=new to(z)}return M.set(S,P),this.size=M.size,this}ro.prototype.clear=Yg,ro.prototype.delete=Bd,ro.prototype.get=Xg,ro.prototype.has=$g,ro.prototype.set=Kg;function Ud(S,P){var M=Xt(S),z=!M&&_c(S),Q=!M&&!z&&Uu(S),fe=!M&&!z&&!Q&&ph(S),ye=M||z||Q||fe,we=ye?xf(S.length,Rf):[],Ce=we.length;for(var Ue in S)(P||Qt.call(S,Ue))&&!(ye&&(Ue=="length"||Q&&(Ue=="offset"||Ue=="parent")||fe&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||ba(Ue,Ce)))&&we.push(Ue);return we}function si(S){var P=S.length;return P?S[Kd(0,P-1)]:t}function Vo(S,P){return bc(qn(S),Ho(P,0,S.length))}function Bf(S){return bc(qn(S))}function Za(S,P,M){(M!==t&&!wa(S[P],M)||M===t&&!(P in S))&&Wo(S,P,M)}function Ru(S,P,M){var z=S[P];(!(Qt.call(S,P)&&wa(z,M))||M===t&&!(P in S))&&Wo(S,P,M)}function rc(S,P){for(var M=S.length;M--;)if(wa(S[M][0],P))return M;return-1}function Zg(S,P,M,z){return Eo(S,function(Q,fe,ye){P(z,Q,M(Q),ye)}),z}function Ls(S,P){return S&&So(P,ei(P),S)}function nc(S,P){return S&&So(P,uo(P),S)}function Wo(S,P,M){P=="__proto__"&&Jl?Jl(S,P,{configurable:!0,enumerable:!0,value:M,writable:!0}):S[P]=M}function Uf(S,P){for(var M=-1,z=P.length,Q=Le(z),fe=S==null;++M<z;)Q[M]=fe?t:C_(S,P[M]);return Q}function Ho(S,P,M){return S===S&&(M!==t&&(S=S<=M?S:M),P!==t&&(S=S>=P?S:P)),S}function Ni(S,P,M,z,Q,fe){var ye,we=P&f,Ce=P&h,Ue=P&d;if(M&&(ye=Q?M(S,z,Q,fe):M(S)),ye!==t)return ye;if(!vn(S))return S;var Ge=Xt(S);if(Ge){if(ye=o_(S),!we)return qn(S,ye)}else{var Ye=Zn(S),ct=Ye==he||Ye==ve;if(Uu(S))return hy(S,we);if(Ye==me||Ye==K||ct&&!Q){if(ye=Ce||ct?{}:Ay(S),!we)return Ce?iv(S,nc(ye,S)):by(S,Ls(ye,S))}else{if(!$t[Ye])return Q?S:{};ye=a_(S,Ye,we)}}fe||(fe=new ro);var gt=fe.get(S);if(gt)return gt;fe.set(S,ye),TP(S)?S.forEach(function(Ut){ye.add(Ni(Ut,P,M,Ut,S,fe))}):xP(S)&&S.forEach(function(Ut,cr){ye.set(cr,Ni(Ut,P,M,cr,S,fe))});var Bt=Ue?Ce?li:ju:Ce?uo:ei,tr=Ge?t:Bt(S);return _t(tr||S,function(Ut,cr){tr&&(cr=Ut,Ut=S[cr]),Ru(ye,cr,Ni(Ut,P,M,cr,S,fe))}),ye}function qf(S){var P=ei(S);return function(M){return zf(M,S,P)}}function zf(S,P,M){var z=M.length;if(S==null)return!z;for(S=ne(S);z--;){var Q=M[z],fe=P[Q],ye=S[Q];if(ye===t&&!(Q in S)||!fe(ye))return!1}return!0}function ic(S,P,M){if(typeof S!="function")throw new Jr(a);return mc(function(){S.apply(t,M)},P)}function Iu(S,P,M,z){var Q=-1,fe=Dr,ye=!0,we=S.length,Ce=[],Ue=P.length;if(!we)return Ce;M&&(P=Hr(P,Ei(M))),z?(fe=Gl,ye=!1):P.length>=i&&(fe=wo,ye=!1,P=new Si(P));e:for(;++Q<we;){var Ge=S[Q],Ye=M==null?Ge:M(Ge);if(Ge=z||Ge!==0?Ge:0,ye&&Ye===Ye){for(var ct=Ue;ct--;)if(P[ct]===Ye)continue e;Ce.push(Ge)}else fe(P,Ye,z)||Ce.push(Ge)}return Ce}var Eo=_y(Oo),qd=_y(xo,!0);function zd(S,P){var M=!0;return Eo(S,function(z,Q,fe){return M=!!P(z,Q,fe),M}),M}function Gf(S,P,M){for(var z=-1,Q=S.length;++z<Q;){var fe=S[z],ye=P(fe);if(ye!=null&&(we===t?ye===ye&&!Po(ye):M(ye,we)))var we=ye,Ce=fe}return Ce}function Qg(S,P,M,z){var Q=S.length;for(M=Jt(M),M<0&&(M=-M>Q?0:Q+M),z=z===t||z>Q?Q:Jt(z),z<0&&(z+=Q),z=M>z?0:PP(z);M<z;)S[M++]=P;return S}function Yo(S,P){var M=[];return Eo(S,function(z,Q,fe){P(z,Q,fe)&&M.push(z)}),M}function Mn(S,P,M,z,Q){var fe=-1,ye=S.length;for(M||(M=lv),Q||(Q=[]);++fe<ye;){var we=S[fe];P>0&&M(we)?P>1?Mn(we,P-1,M,z,Q):Pn(Q,we):z||(Q[Q.length]=we)}return Q}var Vf=wy(),Jg=wy(!0);function Oo(S,P){return S&&Vf(S,P,ei)}function xo(S,P){return S&&Jg(S,P,ei)}function ku(S,P){return Bn(P,function(M){return Bs(S[M])})}function da(S,P){P=ya(P,S);for(var M=0,z=P.length;S!=null&&M<z;)S=S[Zo(P[M++])];return M&&M==z?S:t}function Wf(S,P,M){var z=P(S);return Xt(S)?z:Pn(z,M(S))}function Ln(S){return S==null?S===t?xe:Pe:xi&&xi in ne(S)?ao(S):u_(S)}function Qa(S,P){return S>P}function kt(S,P){return S!=null&&Qt.call(S,P)}function Hf(S,P){return S!=null&&P in ne(S)}function Gd(S,P,M){return S>=Tr(P,M)&&S<En(P,M)}function va(S,P,M){for(var z=M?Gl:Dr,Q=S[0].length,fe=S.length,ye=fe,we=Le(fe),Ce=1/0,Ue=[];ye--;){var Ge=S[ye];ye&&P&&(Ge=Hr(Ge,Ei(P))),Ce=Tr(Ge.length,Ce),we[ye]=!M&&(P||Q>=120&&Ge.length>=120)?new Si(ye&&Ge):t}Ge=S[0];var Ye=-1,ct=we[0];e:for(;++Ye<Q&&Ue.length<Ce;){var gt=Ge[Ye],Bt=P?P(gt):gt;if(gt=M||gt!==0?gt:0,!(ct?wo(ct,Bt):z(Ue,Bt,M))){for(ye=fe;--ye;){var tr=we[ye];if(!(tr?wo(tr,Bt):z(S[ye],Bt,M)))continue e}ct&&ct.push(Bt),Ue.push(gt)}}return Ue}function Vd(S,P,M,z){return Oo(S,function(Q,fe,ye){P(z,M(Q),fe,ye)}),z}function Du(S,P,M){P=ya(P,S),S=dv(S,P);var z=S==null?S:S[Zo(N(P))];return z==null?t:Be(z,S,M)}function Un(S){return On(S)&&Ln(S)==K}function ey(S){return On(S)&&Ln(S)==at}function ty(S){return On(S)&&Ln(S)==te}function oc(S,P,M,z,Q){return S===P?!0:S==null||P==null||!On(S)&&!On(P)?S!==S&&P!==P:pa(S,P,M,z,oc,Q)}function pa(S,P,M,z,Q,fe){var ye=Xt(S),we=Xt(P),Ce=ye?ie:Zn(S),Ue=we?ie:Zn(P);Ce=Ce==K?me:Ce,Ue=Ue==K?me:Ue;var Ge=Ce==me,Ye=Ue==me,ct=Ce==Ue;if(ct&&Uu(S)){if(!Uu(P))return!1;ye=!0,Ge=!1}if(ct&&!Ge)return fe||(fe=new ro),ye||ph(S)?av(S,P,M,z,Q,fe):gc(S,P,Ce,M,z,Q,fe);if(!(M&v)){var gt=Ge&&Qt.call(S,"__wrapped__"),Bt=Ye&&Qt.call(P,"__wrapped__");if(gt||Bt){var tr=gt?S.value():S,Ut=Bt?P.value():P;return fe||(fe=new ro),Q(tr,Ut,M,z,fe)}}return ct?(fe||(fe=new ro),sv(S,P,M,z,Q,fe)):!1}function ui(S){return On(S)&&Zn(S)==_e}function ac(S,P,M,z){var Q=M.length,fe=Q,ye=!z;if(S==null)return!fe;for(S=ne(S);Q--;){var we=M[Q];if(ye&&we[2]?we[1]!==S[we[0]]:!(we[0]in S))return!1}for(;++Q<fe;){we=M[Q];var Ce=we[0],Ue=S[Ce],Ge=we[1];if(ye&&we[2]){if(Ue===t&&!(Ce in S))return!1}else{var Ye=new ro;if(z)var ct=z(Ue,Ge,Ce,S,P,Ye);if(!(ct===t?oc(Ge,Ue,v|p,z,Ye):ct))return!1}}return!0}function Yf(S){if(!vn(S)||s_(S))return!1;var P=Bs(S)?Kl:wi;return P.test(_a(S))}function Jb(S){return On(S)&&Ln(S)==X}function sc(S){return On(S)&&Zn(S)==se}function ry(S){return On(S)&&Yy(S.length)&&!!kr[Ln(S)]}function Wd(S){return typeof S=="function"?S:S==null?lo:typeof S=="object"?Xt(S)?$f(S[0],S[1]):Mu(S):BP(S)}function Xf(S){if(!yc(S))return Is(S);var P=[];for(var M in ne(S))Qt.call(S,M)&&M!="constructor"&&P.push(M);return P}function ny(S){if(!vn(S))return Bu(S);var P=yc(S),M=[];for(var z in S)z=="constructor"&&(P||!Qt.call(S,z))||M.push(z);return M}function uc(S,P){return S<P}function Hd(S,P){var M=-1,z=so(S)?Le(S.length):[];return Eo(S,function(Q,fe,ye){z[++M]=P(Q,fe,ye)}),z}function Mu(S){var P=Yt(S);return P.length==1&&P[0][2]?fv(P[0][0],P[0][1]):function(M){return M===S||ac(M,S,P)}}function $f(S,P){return cv(S)&&Iy(P)?fv(Zo(S),P):function(M){var z=C_(M,S);return z===t&&z===P?P_(M,S):oc(P,z,v|p)}}function lc(S,P,M,z,Q){S!==P&&Vf(P,function(fe,ye){if(Q||(Q=new ro),vn(fe))iy(S,P,ye,M,lc,z,Q);else{var we=z?z(vv(S,ye),fe,ye+"",S,P,Q):t;we===t&&(we=fe),Za(S,ye,we)}},uo)}function iy(S,P,M,z,Q,fe,ye){var we=vv(S,M),Ce=vv(P,M),Ue=ye.get(Ce);if(Ue){Za(S,M,Ue);return}var Ge=fe?fe(we,Ce,M+"",S,P,ye):t,Ye=Ge===t;if(Ye){var ct=Xt(Ce),gt=!ct&&Uu(Ce),Bt=!ct&&!gt&&ph(Ce);Ge=Ce,ct||gt||Bt?Xt(we)?Ge=we:Rn(we)?Ge=qn(we):gt?(Ye=!1,Ge=hy(Ce,!0)):Bt?(Ye=!1,Ge=py(Ce,!0)):Ge=[]:Ov(Ce)||_c(Ce)?(Ge=we,_c(we)?Ge=AP(we):(!vn(we)||Bs(we))&&(Ge=Ay(Ce))):Ye=!1}Ye&&(ye.set(Ce,Ge),Q(Ge,Ce,z,fe,ye),ye.delete(Ce)),Za(S,M,Ge)}function cc(S,P){var M=S.length;if(M)return P+=P<0?M:0,ba(P,M)?S[P]:t}function Kf(S,P,M){P.length?P=Hr(P,function(fe){return Xt(fe)?function(ye){return da(ye,fe.length===1?fe[0]:fe)}:fe}):P=[lo];var z=-1;P=Hr(P,Ei(At()));var Q=Hd(S,function(fe,ye,we){var Ce=Hr(P,function(Ue){return Ue(fe)});return{criteria:Ce,index:++z,value:fe}});return Rg(Q,function(fe,ye){return eh(fe,ye,M)})}function Yd(S,P){return Xd(S,P,function(M,z){return P_(S,z)})}function Xd(S,P,M){for(var z=-1,Q=P.length,fe={};++z<Q;){var ye=P[z],we=da(S,ye);M(we,ye)&&Lu(fe,ya(ye,S),we)}return fe}function Xo(S){return function(P){return da(P,S)}}function ga(S,P,M,z){var Q=z?Ub:fa,fe=-1,ye=P.length,we=S;for(S===P&&(P=qn(P)),M&&(we=Hr(S,Ei(M)));++fe<ye;)for(var Ce=0,Ue=P[fe],Ge=M?M(Ue):Ue;(Ce=Q(we,Ge,Ce,z))>-1;)we!==S&&Ql.call(we,Ce,1),Ql.call(S,Ce,1);return S}function $d(S,P){for(var M=S?P.length:0,z=M-1;M--;){var Q=P[M];if(M==z||Q!==fe){var fe=Q;ba(Q)?Ql.call(S,Q,1):hc(S,Q)}}return S}function Kd(S,P){return S+Ou(jg()*(P-S+1))}function e_(S,P,M,z){for(var Q=-1,fe=En(wn((P-S)/(M||1)),0),ye=Le(fe);fe--;)ye[z?fe:++Q]=S,S+=M;return ye}function Zd(S,P){var M="";if(!S||P<1||P>U)return M;do P%2&&(M+=S),P=Ou(P/2),P&&(S+=S);while(P);return M}function Kt(S,P){return pv(hv(S,P,lo),S+"")}function oy(S){return si(gh(S))}function ay(S,P){var M=gh(S);return bc(M,Ho(P,0,M.length))}function Lu(S,P,M,z){if(!vn(S))return S;P=ya(P,S);for(var Q=-1,fe=P.length,ye=fe-1,we=S;we!=null&&++Q<fe;){var Ce=Zo(P[Q]),Ue=M;if(Ce==="__proto__"||Ce==="constructor"||Ce==="prototype")return S;if(Q!=ye){var Ge=we[Ce];Ue=z?z(Ge,Ce,we):t,Ue===t&&(Ue=vn(Ge)?Ge:ba(P[Q+1])?[]:{})}Ru(we,Ce,Ue),we=we[Ce]}return S}var sy=Cu?function(S,P){return Cu.set(S,P),S}:lo,t_=Jl?function(S,P){return Jl(S,"toString",{configurable:!0,enumerable:!1,value:R_(P),writable:!0})}:lo;function r_(S){return bc(gh(S))}function en(S,P,M){var z=-1,Q=S.length;P<0&&(P=-P>Q?0:Q+P),M=M>Q?Q:M,M<0&&(M+=Q),Q=P>M?0:M-P>>>0,P>>>=0;for(var fe=Le(Q);++z<Q;)fe[z]=S[z+P];return fe}function n_(S,P){var M;return Eo(S,function(z,Q,fe){return M=P(z,Q,fe),!M}),!!M}function fc(S,P,M){var z=0,Q=S==null?z:S.length;if(typeof P=="number"&&P===P&&Q<=ce){for(;z<Q;){var fe=z+Q>>>1,ye=S[fe];ye!==null&&!Po(ye)&&(M?ye<=P:ye<P)?z=fe+1:Q=fe}return Q}return Qd(S,P,lo,M)}function Qd(S,P,M,z){var Q=0,fe=S==null?0:S.length;if(fe===0)return 0;P=M(P);for(var ye=P!==P,we=P===null,Ce=Po(P),Ue=P===t;Q<fe;){var Ge=Ou((Q+fe)/2),Ye=M(S[Ge]),ct=Ye!==t,gt=Ye===null,Bt=Ye===Ye,tr=Po(Ye);if(ye)var Ut=z||Bt;else Ue?Ut=Bt&&(z||ct):we?Ut=Bt&&ct&&(z||!gt):Ce?Ut=Bt&&ct&&!gt&&(z||!tr):gt||tr?Ut=!1:Ut=z?Ye<=P:Ye<P;Ut?Q=Ge+1:fe=Ge}return Tr(fe,Z)}function Zf(S,P){for(var M=-1,z=S.length,Q=0,fe=[];++M<z;){var ye=S[M],we=P?P(ye):ye;if(!M||!wa(we,Ce)){var Ce=we;fe[Q++]=ye===0?0:ye}}return fe}function uy(S){return typeof S=="number"?S:Po(S)?H:+S}function ji(S){if(typeof S=="string")return S;if(Xt(S))return Hr(S,ji)+"";if(Po(S))return jf?jf.call(S):"";var P=S+"";return P=="0"&&1/S==-B?"-0":P}function Ja(S,P,M){var z=-1,Q=Dr,fe=S.length,ye=!0,we=[],Ce=we;if(M)ye=!1,Q=Gl;else if(fe>=i){var Ue=P?null:ma(S);if(Ue)return Cf(Ue);ye=!1,Q=wo,Ce=new Si}else Ce=P?[]:we;e:for(;++z<fe;){var Ge=S[z],Ye=P?P(Ge):Ge;if(Ge=M||Ge!==0?Ge:0,ye&&Ye===Ye){for(var ct=Ce.length;ct--;)if(Ce[ct]===Ye)continue e;P&&Ce.push(Ye),we.push(Ge)}else Q(Ce,Ye,M)||(Ce!==we&&Ce.push(Ye),we.push(Ge))}return we}function hc(S,P){return P=ya(P,S),S=dv(S,P),S==null||delete S[Zo(N(P))]}function Jd(S,P,M,z){return Lu(S,P,M(da(S,P)),z)}function Qf(S,P,M,z){for(var Q=S.length,fe=z?Q:-1;(z?fe--:++fe<Q)&&P(S[fe],fe,S););return M?en(S,z?0:fe,z?fe+1:Q):en(S,z?fe+1:0,z?Q:fe)}function ly(S,P){var M=S;return M instanceof sr&&(M=M.value()),pu(P,function(z,Q){return Q.func.apply(Q.thisArg,Pn([z],Q.args))},M)}function ev(S,P,M){var z=S.length;if(z<2)return z?Ja(S[0]):[];for(var Q=-1,fe=Le(z);++Q<z;)for(var ye=S[Q],we=-1;++we<z;)we!=Q&&(fe[Q]=Iu(fe[Q]||ye,S[we],P,M));return Ja(Mn(fe,1),P,M)}function cy(S,P,M){for(var z=-1,Q=S.length,fe=P.length,ye={};++z<Q;){var we=z<fe?P[z]:t;M(ye,S[z],we)}return ye}function tv(S){return Rn(S)?S:[]}function rv(S){return typeof S=="function"?S:lo}function ya(S,P){return Xt(S)?S:cv(S,P)?[S]:gv(Mr(S))}var Jf=Kt;function es(S,P,M){var z=S.length;return M=M===t?z:M,!P&&M>=z?S:en(S,P,M)}var fy=Yb||function(S){return hn.clearTimeout(S)};function hy(S,P){if(P)return S.slice();var M=S.length,z=qo?qo(M):new S.constructor(M);return S.copy(z),z}function nv(S){var P=new S.constructor(S.byteLength);return new Zl(P).set(new Zl(S)),P}function dy(S,P){var M=P?nv(S.buffer):S.buffer;return new S.constructor(M,S.byteOffset,S.byteLength)}function vy(S){var P=new S.constructor(S.source,mr.exec(S));return P.lastIndex=S.lastIndex,P}function i_(S){return Pu?ne(Pu.call(S)):{}}function py(S,P){var M=P?nv(S.buffer):S.buffer;return new S.constructor(M,S.byteOffset,S.length)}function gy(S,P){if(S!==P){var M=S!==t,z=S===null,Q=S===S,fe=Po(S),ye=P!==t,we=P===null,Ce=P===P,Ue=Po(P);if(!we&&!Ue&&!fe&&S>P||fe&&ye&&Ce&&!we&&!Ue||z&&ye&&Ce||!M&&Ce||!Q)return 1;if(!z&&!fe&&!Ue&&S<P||Ue&&M&&Q&&!z&&!fe||we&&M&&Q||!ye&&Q||!Ce)return-1}return 0}function eh(S,P,M){for(var z=-1,Q=S.criteria,fe=P.criteria,ye=Q.length,we=M.length;++z<ye;){var Ce=gy(Q[z],fe[z]);if(Ce){if(z>=we)return Ce;var Ue=M[z];return Ce*(Ue=="desc"?-1:1)}}return S.index-P.index}function yy(S,P,M,z){for(var Q=-1,fe=S.length,ye=M.length,we=-1,Ce=P.length,Ue=En(fe-ye,0),Ge=Le(Ce+Ue),Ye=!z;++we<Ce;)Ge[we]=P[we];for(;++Q<ye;)(Ye||Q<fe)&&(Ge[M[Q]]=S[Q]);for(;Ue--;)Ge[we++]=S[Q++];return Ge}function my(S,P,M,z){for(var Q=-1,fe=S.length,ye=-1,we=M.length,Ce=-1,Ue=P.length,Ge=En(fe-we,0),Ye=Le(Ge+Ue),ct=!z;++Q<Ge;)Ye[Q]=S[Q];for(var gt=Q;++Ce<Ue;)Ye[gt+Ce]=P[Ce];for(;++ye<we;)(ct||Q<fe)&&(Ye[gt+M[ye]]=S[Q++]);return Ye}function qn(S,P){var M=-1,z=S.length;for(P||(P=Le(z));++M<z;)P[M]=S[M];return P}function So(S,P,M,z){var Q=!M;M||(M={});for(var fe=-1,ye=P.length;++fe<ye;){var we=P[fe],Ce=z?z(M[we],S[we],we,M,S):t;Ce===t&&(Ce=S[we]),Q?Wo(M,we,Ce):Ru(M,we,Ce)}return M}function by(S,P){return So(S,oh(S),P)}function iv(S,P){return So(S,_r(S),P)}function dc(S,P){return function(M,z){var Q=Xt(M)?lt:Zg,fe=P?P():{};return Q(M,S,At(z,2),fe)}}function Ns(S){return Kt(function(P,M){var z=-1,Q=M.length,fe=Q>1?M[Q-1]:t,ye=Q>2?M[2]:t;for(fe=S.length>3&&typeof fe=="function"?(Q--,fe):t,ye&&ci(M[0],M[1],ye)&&(fe=Q<3?t:fe,Q=1),P=ne(P);++z<Q;){var we=M[z];we&&S(P,we,z,fe)}return P})}function _y(S,P){return function(M,z){if(M==null)return M;if(!so(M))return S(M,z);for(var Q=M.length,fe=P?Q:-1,ye=ne(M);(P?fe--:++fe<Q)&&z(ye[fe],fe,ye)!==!1;);return M}}function wy(S){return function(P,M,z){for(var Q=-1,fe=ne(P),ye=z(P),we=ye.length;we--;){var Ce=ye[S?we:++Q];if(M(fe[Ce],Ce,fe)===!1)break}return P}}function th(S,P,M){var z=P&m,Q=js(S);function fe(){var ye=this&&this!==hn&&this instanceof fe?Q:S;return ye.apply(z?M:this,arguments)}return fe}function vc(S){return function(P){P=Mr(P);var M=mu(P)?ai(P):t,z=M?M[0]:P.charAt(0),Q=M?es(M,1).join(""):P.slice(1);return z[S]()+Q}}function Nu(S){return function(P){return pu(jP(NP(P).replace(xd,"")),S,"")}}function js(S){return function(){var P=arguments;switch(P.length){case 0:return new S;case 1:return new S(P[0]);case 2:return new S(P[0],P[1]);case 3:return new S(P[0],P[1],P[2]);case 4:return new S(P[0],P[1],P[2],P[3]);case 5:return new S(P[0],P[1],P[2],P[3],P[4]);case 6:return new S(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new S(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var M=Xa(S.prototype),z=S.apply(M,P);return vn(z)?z:M}}function Ey(S,P,M){var z=js(S);function Q(){for(var fe=arguments.length,ye=Le(fe),we=fe,Ce=Fu(Q);we--;)ye[we]=arguments[we];var Ue=fe<3&&ye[0]!==Ce&&ye[fe-1]!==Ce?[]:Qr(ye,Ce);if(fe-=Ue.length,fe<M)return Sy(S,P,rh,Q.placeholder,t,ye,Ue,t,t,M-fe);var Ge=this&&this!==hn&&this instanceof Q?z:S;return Be(Ge,this,ye)}return Q}function Oy(S){return function(P,M,z){var Q=ne(P);if(!so(P)){var fe=At(M,3);P=ei(P),M=function(we){return fe(Q[we],we,Q)}}var ye=S(P,M,z);return ye>-1?Q[fe?P[ye]:ye]:t}}function no(S){return Ko(function(P){var M=P.length,z=M,Q=Mt.prototype.thru;for(S&&P.reverse();z--;){var fe=P[z];if(typeof fe!="function")throw new Jr(a);if(Q&&!ye&&ih(fe)=="wrapper")var ye=new Mt([],!0)}for(z=ye?z:M;++z<M;){fe=P[z];var we=ih(fe),Ce=we=="wrapper"?ts(fe):t;Ce&&Qn(Ce[0])&&Ce[1]==(E|g|w|O)&&!Ce[4].length&&Ce[9]==1?ye=ye[ih(Ce[0])].apply(ye,Ce[3]):ye=fe.length==1&&Qn(fe)?ye[we]():ye.thru(fe)}return function(){var Ue=arguments,Ge=Ue[0];if(ye&&Ue.length==1&&Xt(Ge))return ye.plant(Ge).value();for(var Ye=0,ct=M?P[Ye].apply(this,Ue):Ge;++Ye<M;)ct=P[Ye].call(this,ct);return ct}})}function rh(S,P,M,z,Q,fe,ye,we,Ce,Ue){var Ge=P&E,Ye=P&m,ct=P&y,gt=P&(g|_),Bt=P&C,tr=ct?t:js(S);function Ut(){for(var cr=arguments.length,yr=Le(cr),Ao=cr;Ao--;)yr[Ao]=arguments[Ao];if(gt)var Fi=Fu(Ut),Ro=qb(yr,Fi);if(z&&(yr=yy(yr,z,Q,gt)),fe&&(yr=my(yr,fe,ye,gt)),cr-=Ro,gt&&cr<Ue){var In=Qr(yr,Fi);return Sy(S,P,rh,Ut.placeholder,M,yr,In,we,Ce,Ue-cr)}var Ea=Ye?M:this,qs=ct?Ea[S]:S;return cr=yr.length,we?yr=l_(yr,we):Bt&&cr>1&&yr.reverse(),Ge&&Ce<cr&&(yr.length=Ce),this&&this!==hn&&this instanceof Ut&&(qs=tr||js(qs)),qs.apply(Ea,yr)}return Ut}function xy(S,P){return function(M,z){return Vd(M,S,P(z),{})}}function $o(S,P){return function(M,z){var Q;if(M===t&&z===t)return P;if(M!==t&&(Q=M),z!==t){if(Q===t)return z;typeof M=="string"||typeof z=="string"?(M=ji(M),z=ji(z)):(M=uy(M),z=uy(z)),Q=S(M,z)}return Q}}function Vt(S){return Ko(function(P){return P=Hr(P,Ei(At())),Kt(function(M){var z=this;return S(P,function(Q){return Be(Q,z,M)})})})}function nh(S,P){P=P===t?" ":ji(P);var M=P.length;if(M<2)return M?Zd(P,S):P;var z=Zd(P,wn(S/za(P)));return mu(P)?es(ai(z),0,S).join(""):z.slice(0,S)}function Ti(S,P,M,z){var Q=P&m,fe=js(S);function ye(){for(var we=-1,Ce=arguments.length,Ue=-1,Ge=z.length,Ye=Le(Ge+Ce),ct=this&&this!==hn&&this instanceof ye?fe:S;++Ue<Ge;)Ye[Ue]=z[Ue];for(;Ce--;)Ye[Ue++]=arguments[++we];return Be(ct,Q?M:this,Ye)}return ye}function on(S){return function(P,M,z){return z&&typeof z!="number"&&ci(P,M,z)&&(M=z=t),P=Us(P),M===t?(M=P,P=0):M=Us(M),z=z===t?P<M?1:-1:Us(z),e_(P,M,z,S)}}function To(S){return function(P,M){return typeof P=="string"&&typeof M=="string"||(P=Jo(P),M=Jo(M)),S(P,M)}}function Sy(S,P,M,z,Q,fe,ye,we,Ce,Ue){var Ge=P&g,Ye=Ge?ye:t,ct=Ge?t:ye,gt=Ge?fe:t,Bt=Ge?t:fe;P|=Ge?w:x,P&=~(Ge?x:w),P&b||(P&=-4);var tr=[S,P,Q,gt,Ye,Bt,ct,we,Ce,Ue],Ut=M.apply(t,tr);return Qn(S)&&My(Ut,tr),Ut.placeholder=z,Ly(Ut,S,P)}function pc(S){var P=_n[S];return function(M,z){if(M=Jo(M),z=z==null?0:Tr(Jt(z),292),z&&Mf(M)){var Q=(Mr(M)+"e").split("e"),fe=P(Q[0]+"e"+(+Q[1]+z));return Q=(Mr(fe)+"e").split("e"),+(Q[0]+"e"+(+Q[1]-z))}return P(M)}}var ma=Ha&&1/Cf(new Ha([,-0]))[1]==B?function(S){return new Ha(S)}:D_;function ov(S){return function(P){var M=Zn(P);return M==_e?Pd(P):M==se?Vb(P):Ig(P,S(P))}}function io(S,P,M,z,Q,fe,ye,we){var Ce=P&y;if(!Ce&&typeof S!="function")throw new Jr(a);var Ue=z?z.length:0;if(Ue||(P&=-97,z=Q=t),ye=ye===t?ye:En(Jt(ye),0),we=we===t?we:Jt(we),Ue-=Q?Q.length:0,P&x){var Ge=z,Ye=Q;z=Q=t}var ct=Ce?t:ts(S),gt=[S,P,M,z,Q,Ge,Ye,fe,ye,we];if(ct&&Dy(gt,ct),S=gt[0],P=gt[1],M=gt[2],z=gt[3],Q=gt[4],we=gt[9]=gt[9]===t?Ce?0:S.length:En(gt[9]-Ue,0),!we&&P&(g|_)&&(P&=-25),!P||P==m)var Bt=th(S,P,M);else P==g||P==_?Bt=Ey(S,P,we):(P==w||P==(m|w))&&!Q.length?Bt=Ti(S,P,M,z):Bt=rh.apply(t,gt);var tr=ct?sy:My;return Ly(tr(Bt,gt),S,P)}function Yr(S,P,M,z){return S===t||wa(S,Oi[M])&&!Qt.call(z,M)?P:S}function tn(S,P,M,z,Q,fe){return vn(S)&&vn(P)&&(fe.set(P,S),lc(S,P,t,tn,fe),fe.delete(P)),S}function Ty(S){return Ov(S)?t:S}function av(S,P,M,z,Q,fe){var ye=M&v,we=S.length,Ce=P.length;if(we!=Ce&&!(ye&&Ce>we))return!1;var Ue=fe.get(S),Ge=fe.get(P);if(Ue&&Ge)return Ue==P&&Ge==S;var Ye=-1,ct=!0,gt=M&p?new Si:t;for(fe.set(S,P),fe.set(P,S);++Ye<we;){var Bt=S[Ye],tr=P[Ye];if(z)var Ut=ye?z(tr,Bt,Ye,P,S,fe):z(Bt,tr,Ye,S,P,fe);if(Ut!==t){if(Ut)continue;ct=!1;break}if(gt){if(!qa(P,function(cr,yr){if(!wo(gt,yr)&&(Bt===cr||Q(Bt,cr,M,z,fe)))return gt.push(yr)})){ct=!1;break}}else if(!(Bt===tr||Q(Bt,tr,M,z,fe))){ct=!1;break}}return fe.delete(S),fe.delete(P),ct}function gc(S,P,M,z,Q,fe,ye){switch(M){case Ze:if(S.byteLength!=P.byteLength||S.byteOffset!=P.byteOffset)return!1;S=S.buffer,P=P.buffer;case at:return!(S.byteLength!=P.byteLength||!fe(new Zl(S),new Zl(P)));case le:case te:case Oe:return wa(+S,+P);case re:return S.name==P.name&&S.message==P.message;case X:case pe:return S==P+"";case _e:var we=Pd;case se:var Ce=z&v;if(we||(we=Cf),S.size!=P.size&&!Ce)return!1;var Ue=ye.get(S);if(Ue)return Ue==P;z|=p,ye.set(S,P);var Ge=av(we(S),we(P),z,Q,fe,ye);return ye.delete(S),Ge;case ge:if(Pu)return Pu.call(S)==Pu.call(P)}return!1}function sv(S,P,M,z,Q,fe){var ye=M&v,we=ju(S),Ce=we.length,Ue=ju(P),Ge=Ue.length;if(Ce!=Ge&&!ye)return!1;for(var Ye=Ce;Ye--;){var ct=we[Ye];if(!(ye?ct in P:Qt.call(P,ct)))return!1}var gt=fe.get(S),Bt=fe.get(P);if(gt&&Bt)return gt==P&&Bt==S;var tr=!0;fe.set(S,P),fe.set(P,S);for(var Ut=ye;++Ye<Ce;){ct=we[Ye];var cr=S[ct],yr=P[ct];if(z)var Ao=ye?z(yr,cr,ct,P,S,fe):z(cr,yr,ct,S,P,fe);if(!(Ao===t?cr===yr||Q(cr,yr,M,z,fe):Ao)){tr=!1;break}Ut||(Ut=ct=="constructor")}if(tr&&!Ut){var Fi=S.constructor,Ro=P.constructor;Fi!=Ro&&"constructor"in S&&"constructor"in P&&!(typeof Fi=="function"&&Fi instanceof Fi&&typeof Ro=="function"&&Ro instanceof Ro)&&(tr=!1)}return fe.delete(S),fe.delete(P),tr}function Ko(S){return pv(hv(S,t,lh),S+"")}function ju(S){return Wf(S,ei,oh)}function li(S){return Wf(S,uo,_r)}var ts=Cu?function(S){return Cu.get(S)}:D_;function ih(S){for(var P=S.name+"",M=Ya[P],z=Qt.call(Ya,P)?M.length:0;z--;){var Q=M[z],fe=Q.func;if(fe==null||fe==S)return Q.name}return P}function Fu(S){var P=Qt.call(ue,"placeholder")?ue:S;return P.placeholder}function At(){var S=ue.iteratee||I_;return S=S===I_?Wd:S,arguments.length?S(arguments[0],arguments[1]):S}function oo(S,P){var M=S.__data__;return Nn(P)?M[typeof P=="string"?"string":"hash"]:M.map}function Yt(S){for(var P=ei(S),M=P.length;M--;){var z=P[M],Q=S[z];P[M]=[z,Q,Iy(Q)]}return P}function rs(S,P){var M=Cd(S,P);return Yf(M)?M:t}function ao(S){var P=Qt.call(S,xi),M=S[xi];try{S[xi]=t;var z=!0}catch{}var Q=If.call(S);return z&&(P?S[xi]=M:delete S[xi]),Q}var oh=Df?function(S){return S==null?[]:(S=ne(S),Bn(Df(S),function(P){return Mi.call(S,P)}))}:M_,_r=Df?function(S){for(var P=[];S;)Pn(P,oh(S)),S=Eu(S);return P}:M_,Zn=Ln;(ks&&Zn(new ks(new ArrayBuffer(1)))!=Ze||xu&&Zn(new xu)!=_e||Ds&&Zn(Ds.resolve())!=F||Ha&&Zn(new Ha)!=se||Su&&Zn(new Su)!=Ne)&&(Zn=function(S){var P=Ln(S),M=P==me?S.constructor:t,z=M?_a(M):"";if(z)switch(z){case Fg:return Ze;case Bg:return _e;case Ug:return F;case Nf:return se;case qg:return Ne}return P});function Cy(S,P,M){for(var z=-1,Q=M.length;++z<Q;){var fe=M[z],ye=fe.size;switch(fe.type){case"drop":S+=ye;break;case"dropRight":P-=ye;break;case"take":P=Tr(P,S+ye);break;case"takeRight":S=En(S,P-ye);break}}return{start:S,end:P}}function ah(S){var P=S.match(Dt);return P?P[1].split(fr):[]}function Py(S,P,M){P=ya(P,S);for(var z=-1,Q=P.length,fe=!1;++z<Q;){var ye=Zo(P[z]);if(!(fe=S!=null&&M(S,ye)))break;S=S[ye]}return fe||++z!=Q?fe:(Q=S==null?0:S.length,!!Q&&Yy(Q)&&ba(ye,Q)&&(Xt(S)||_c(S)))}function o_(S){var P=S.length,M=new S.constructor(P);return P&&typeof S[0]=="string"&&Qt.call(S,"index")&&(M.index=S.index,M.input=S.input),M}function Ay(S){return typeof S.constructor=="function"&&!yc(S)?Xa(Eu(S)):{}}function a_(S,P,M){var z=S.constructor;switch(P){case at:return nv(S);case le:case te:return new z(+S);case Ze:return dy(S,M);case et:case Qe:case Xe:case ke:case oe:case Ee:case Re:case De:case Me:return py(S,M);case _e:return new z;case Oe:case pe:return new z(S);case X:return vy(S);case se:return new z;case ge:return i_(S)}}function uv(S,P){var M=P.length;if(!M)return S;var z=M-1;return P[z]=(M>1?"& ":"")+P[z],P=P.join(M>2?", ":" "),S.replace(Kr,`{
/* [wrapped with `+P+`] */
`)}function lv(S){return Xt(S)||_c(S)||!!(Id&&S&&S[Id])}function ba(S,P){var M=typeof S;return P=P??U,!!P&&(M=="number"||M!="symbol"&&Ma.test(S))&&S>-1&&S%1==0&&S<P}function ci(S,P,M){if(!vn(M))return!1;var z=typeof P;return(z=="number"?so(M)&&ba(P,M.length):z=="string"&&P in M)?wa(M[P],S):!1}function cv(S,P){if(Xt(S))return!1;var M=typeof S;return M=="number"||M=="symbol"||M=="boolean"||S==null||Po(S)?!0:rr.test(S)||!or.test(S)||P!=null&&S in ne(P)}function Nn(S){var P=typeof S;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?S!=="__proto__":S===null}function Qn(S){var P=ih(S),M=ue[P];if(typeof M!="function"||!(P in sr.prototype))return!1;if(S===M)return!0;var z=ts(M);return!!z&&S===z[0]}function s_(S){return!!Ad&&Ad in S}var Ry=Ji?Bs:L_;function yc(S){var P=S&&S.constructor,M=typeof P=="function"&&P.prototype||Oi;return S===M}function Iy(S){return S===S&&!vn(S)}function fv(S,P){return function(M){return M==null?!1:M[S]===P&&(P!==t||S in ne(M))}}function ky(S){var P=Wy(S,function(z){return M.size===l&&M.clear(),z}),M=P.cache;return P}function Dy(S,P){var M=S[1],z=P[1],Q=M|z,fe=Q<(m|y|E),ye=z==E&&M==g||z==E&&M==O&&S[7].length<=P[8]||z==(E|O)&&P[7].length<=P[8]&&M==g;if(!(fe||ye))return S;z&m&&(S[2]=P[2],Q|=M&m?0:b);var we=P[3];if(we){var Ce=S[3];S[3]=Ce?yy(Ce,we,P[4]):we,S[4]=Ce?Qr(S[3],c):P[4]}return we=P[5],we&&(Ce=S[5],S[5]=Ce?my(Ce,we,P[6]):we,S[6]=Ce?Qr(S[5],c):P[6]),we=P[7],we&&(S[7]=we),z&E&&(S[8]=S[8]==null?P[8]:Tr(S[8],P[8])),S[9]==null&&(S[9]=P[9]),S[0]=P[0],S[1]=Q,S}function Bu(S){var P=[];if(S!=null)for(var M in ne(S))P.push(M);return P}function u_(S){return If.call(S)}function hv(S,P,M){return P=En(P===t?S.length-1:P,0),function(){for(var z=arguments,Q=-1,fe=En(z.length-P,0),ye=Le(fe);++Q<fe;)ye[Q]=z[P+Q];Q=-1;for(var we=Le(P+1);++Q<P;)we[Q]=z[Q];return we[P]=M(ye),Be(S,this,we)}}function dv(S,P){return P.length<2?S:da(S,en(P,0,-1))}function l_(S,P){for(var M=S.length,z=Tr(P.length,M),Q=qn(S);z--;){var fe=P[z];S[z]=ba(fe,M)?Q[fe]:t}return S}function vv(S,P){if(!(P==="constructor"&&typeof S[P]=="function")&&P!="__proto__")return S[P]}var My=sh(sy),mc=Ng||function(S,P){return hn.setTimeout(S,P)},pv=sh(t_);function Ly(S,P,M){var z=P+"";return pv(S,uv(z,c_(ah(z),M)))}function sh(S){var P=0,M=0;return function(){var z=kd(),Q=D-(z-M);if(M=z,Q>0){if(++P>=k)return arguments[0]}else P=0;return S.apply(t,arguments)}}function bc(S,P){var M=-1,z=S.length,Q=z-1;for(P=P===t?z:P;++M<P;){var fe=Kd(M,Q),ye=S[fe];S[fe]=S[M],S[M]=ye}return S.length=P,S}var gv=ky(function(S){var P=[];return S.charCodeAt(0)===46&&P.push(""),S.replace(Gt,function(M,z,Q,fe){P.push(Q?fe.replace(yn,"$1"):z||M)}),P});function Zo(S){if(typeof S=="string"||Po(S))return S;var P=S+"";return P=="0"&&1/S==-B?"-0":P}function _a(S){if(S!=null){try{return Uo.call(S)}catch{}try{return S+""}catch{}}return""}function c_(S,P){return _t($,function(M){var z="_."+M[0];P&M[1]&&!Dr(S,z)&&S.push(z)}),S.sort()}function Ny(S){if(S instanceof sr)return S.clone();var P=new Mt(S.__wrapped__,S.__chain__);return P.__actions__=qn(S.__actions__),P.__index__=S.__index__,P.__values__=S.__values__,P}function Ci(S,P,M){(M?ci(S,P,M):P===t)?P=1:P=En(Jt(P),0);var z=S==null?0:S.length;if(!z||P<1)return[];for(var Q=0,fe=0,ye=Le(wn(z/P));Q<z;)ye[fe++]=en(S,Q,Q+=P);return ye}function yv(S){for(var P=-1,M=S==null?0:S.length,z=0,Q=[];++P<M;){var fe=S[P];fe&&(Q[z++]=fe)}return Q}function f_(){var S=arguments.length;if(!S)return[];for(var P=Le(S-1),M=arguments[0],z=S;z--;)P[z-1]=arguments[z];return Pn(Xt(M)?qn(M):[M],Mn(P,1))}var h_=Kt(function(S,P){return Rn(S)?Iu(S,Mn(P,1,Rn,!0)):[]}),mv=Kt(function(S,P){var M=N(P);return Rn(M)&&(M=t),Rn(S)?Iu(S,Mn(P,1,Rn,!0),At(M,2)):[]}),bv=Kt(function(S,P){var M=N(P);return Rn(M)&&(M=t),Rn(S)?Iu(S,Mn(P,1,Rn,!0),t,M):[]});function d_(S,P,M){var z=S==null?0:S.length;return z?(P=M||P===t?1:Jt(P),en(S,P<0?0:P,z)):[]}function v_(S,P,M){var z=S==null?0:S.length;return z?(P=M||P===t?1:Jt(P),P=z-P,en(S,0,P<0?0:P)):[]}function p_(S,P){return S&&S.length?Qf(S,At(P,3),!0,!0):[]}function jy(S,P){return S&&S.length?Qf(S,At(P,3),!0):[]}function g_(S,P,M,z){var Q=S==null?0:S.length;return Q?(M&&typeof M!="number"&&ci(S,P,M)&&(M=0,z=Q),Qg(S,P,M,z)):[]}function Fy(S,P,M){var z=S==null?0:S.length;if(!z)return-1;var Q=M==null?0:Jt(M);return Q<0&&(Q=En(z+Q,0)),Vl(S,At(P,3),Q)}function uh(S,P,M){var z=S==null?0:S.length;if(!z)return-1;var Q=z-1;return M!==t&&(Q=Jt(M),Q=M<0?En(z+Q,0):Tr(Q,z-1)),Vl(S,At(P,3),Q,!0)}function lh(S){var P=S==null?0:S.length;return P?Mn(S,1):[]}function _v(S){var P=S==null?0:S.length;return P?Mn(S,B):[]}function y_(S,P){var M=S==null?0:S.length;return M?(P=P===t?1:Jt(P),Mn(S,P)):[]}function m_(S){for(var P=-1,M=S==null?0:S.length,z={};++P<M;){var Q=S[P];z[Q[0]]=Q[1]}return z}function By(S){return S&&S.length?S[0]:t}function b_(S,P,M){var z=S==null?0:S.length;if(!z)return-1;var Q=M==null?0:Jt(M);return Q<0&&(Q=En(z+Q,0)),fa(S,P,Q)}function __(S){var P=S==null?0:S.length;return P?en(S,0,-1):[]}var w_=Kt(function(S){var P=Hr(S,tv);return P.length&&P[0]===S[0]?va(P):[]}),E_=Kt(function(S){var P=N(S),M=Hr(S,tv);return P===N(M)?P=t:M.pop(),M.length&&M[0]===S[0]?va(M,At(P,2)):[]}),T=Kt(function(S){var P=N(S),M=Hr(S,tv);return P=typeof P=="function"?P:t,P&&M.pop(),M.length&&M[0]===S[0]?va(M,t,P):[]});function I(S,P){return S==null?"":Lf.call(S,P)}function N(S){var P=S==null?0:S.length;return P?S[P-1]:t}function V(S,P,M){var z=S==null?0:S.length;if(!z)return-1;var Q=z;return M!==t&&(Q=Jt(M),Q=Q<0?En(z+Q,0):Tr(Q,z-1)),P===P?Wb(S,P,Q):Vl(S,Pg,Q,!0)}function J(S,P){return S&&S.length?cc(S,Jt(P)):t}var de=Kt(be);function be(S,P){return S&&S.length&&P&&P.length?ga(S,P):S}function Se(S,P,M){return S&&S.length&&P&&P.length?ga(S,P,At(M,2)):S}function Ae(S,P,M){return S&&S.length&&P&&P.length?ga(S,P,t,M):S}var qe=Ko(function(S,P){var M=S==null?0:S.length,z=Uf(S,P);return $d(S,Hr(P,function(Q){return ba(Q,M)?+Q:Q}).sort(gy)),z});function ze(S,P){var M=[];if(!(S&&S.length))return M;var z=-1,Q=[],fe=S.length;for(P=At(P,3);++z<fe;){var ye=S[z];P(ye,z,S)&&(M.push(ye),Q.push(z))}return $d(S,Q),M}function $e(S){return S==null?S:Dd.call(S)}function ht(S,P,M){var z=S==null?0:S.length;return z?(M&&typeof M!="number"&&ci(S,P,M)?(P=0,M=z):(P=P==null?0:Jt(P),M=M===t?z:Jt(M)),en(S,P,M)):[]}function pt(S,P){return fc(S,P)}function Rt(S,P,M){return Qd(S,P,At(M,2))}function We(S,P){var M=S==null?0:S.length;if(M){var z=fc(S,P);if(z<M&&wa(S[z],P))return z}return-1}function Je(S,P){return fc(S,P,!0)}function Tt(S,P,M){return Qd(S,P,At(M,2),!0)}function st(S,P){var M=S==null?0:S.length;if(M){var z=fc(S,P,!0)-1;if(wa(S[z],P))return z}return-1}function Wt(S){return S&&S.length?Zf(S):[]}function zt(S,P){return S&&S.length?Zf(S,At(P,2)):[]}function br(S){var P=S==null?0:S.length;return P?en(S,1,P):[]}function wt(S,P,M){return S&&S.length?(P=M||P===t?1:Jt(P),en(S,0,P<0?0:P)):[]}function Lt(S,P,M){var z=S==null?0:S.length;return z?(P=M||P===t?1:Jt(P),P=z-P,en(S,P<0?0:P,z)):[]}function An(S,P){return S&&S.length?Qf(S,At(P,3),!1,!0):[]}function dn(S,P){return S&&S.length?Qf(S,At(P,3)):[]}var fi=Kt(function(S){return Ja(Mn(S,1,Rn,!0))}),qr=Kt(function(S){var P=N(S);return Rn(P)&&(P=t),Ja(Mn(S,1,Rn,!0),At(P,2))}),Jn=Kt(function(S){var P=N(S);return P=typeof P=="function"?P:t,Ja(Mn(S,1,Rn,!0),t,P)});function Qo(S){return S&&S.length?Ja(S):[]}function ns(S,P){return S&&S.length?Ja(S,At(P,2)):[]}function Fs(S,P){return P=typeof P=="function"?P:t,S&&S.length?Ja(S,t,P):[]}function Co(S){if(!(S&&S.length))return[];var P=0;return S=Bn(S,function(M){if(Rn(M))return P=En(M.length,P),!0}),xf(P,function(M){return Hr(S,gu(M))})}function wv(S,P){if(!(S&&S.length))return[];var M=Co(S);return P==null?M:Hr(M,function(z){return Be(P,t,z)})}var Uy=Kt(function(S,P){return Rn(S)?Iu(S,P):[]}),ch=Kt(function(S){return ev(Bn(S,Rn))}),Ev=Kt(function(S){var P=N(S);return Rn(P)&&(P=t),ev(Bn(S,Rn),At(P,2))}),fh=Kt(function(S){var P=N(S);return P=typeof P=="function"?P:t,ev(Bn(S,Rn),t,P)}),hh=Kt(Co);function qy(S,P){return cy(S||[],P||[],Ru)}function dh(S,P){return cy(S||[],P||[],Lu)}var vh=Kt(function(S){var P=S.length,M=P>1?S[P-1]:t;return M=typeof M=="function"?(S.pop(),M):t,wv(S,M)});function dP(S){var P=ue(S);return P.__chain__=!0,P}function LU(S,P){return P(S),S}function zy(S,P){return P(S)}var NU=Ko(function(S){var P=S.length,M=P?S[0]:0,z=this.__wrapped__,Q=function(fe){return Uf(fe,S)};return P>1||this.__actions__.length||!(z instanceof sr)||!ba(M)?this.thru(Q):(z=z.slice(M,+M+(P?1:0)),z.__actions__.push({func:zy,args:[Q],thisArg:t}),new Mt(z,this.__chain__).thru(function(fe){return P&&!fe.length&&fe.push(t),fe}))});function jU(){return dP(this)}function FU(){return new Mt(this.value(),this.__chain__)}function BU(){this.__values__===t&&(this.__values__=CP(this.value()));var S=this.__index__>=this.__values__.length,P=S?t:this.__values__[this.__index__++];return{done:S,value:P}}function UU(){return this}function qU(S){for(var P,M=this;M instanceof Au;){var z=Ny(M);z.__index__=0,z.__values__=t,P?Q.__wrapped__=z:P=z;var Q=z;M=M.__wrapped__}return Q.__wrapped__=S,P}function zU(){var S=this.__wrapped__;if(S instanceof sr){var P=S;return this.__actions__.length&&(P=new sr(this)),P=P.reverse(),P.__actions__.push({func:zy,args:[$e],thisArg:t}),new Mt(P,this.__chain__)}return this.thru($e)}function GU(){return ly(this.__wrapped__,this.__actions__)}var VU=dc(function(S,P,M){Qt.call(S,M)?++S[M]:Wo(S,M,1)});function WU(S,P,M){var z=Xt(S)?mn:zd;return M&&ci(S,P,M)&&(P=t),z(S,At(P,3))}function HU(S,P){var M=Xt(S)?Bn:Yo;return M(S,At(P,3))}var YU=Oy(Fy),XU=Oy(uh);function $U(S,P){return Mn(Gy(S,P),1)}function KU(S,P){return Mn(Gy(S,P),B)}function ZU(S,P,M){return M=M===t?1:Jt(M),Mn(Gy(S,P),M)}function vP(S,P){var M=Xt(S)?_t:Eo;return M(S,At(P,3))}function pP(S,P){var M=Xt(S)?dr:qd;return M(S,At(P,3))}var QU=dc(function(S,P,M){Qt.call(S,M)?S[M].push(P):Wo(S,M,[P])});function JU(S,P,M,z){S=so(S)?S:gh(S),M=M&&!z?Jt(M):0;var Q=S.length;return M<0&&(M=En(Q+M,0)),Xy(S)?M<=Q&&S.indexOf(P,M)>-1:!!Q&&fa(S,P,M)>-1}var e6=Kt(function(S,P,M){var z=-1,Q=typeof P=="function",fe=so(S)?Le(S.length):[];return Eo(S,function(ye){fe[++z]=Q?Be(P,ye,M):Du(ye,P,M)}),fe}),t6=dc(function(S,P,M){Wo(S,M,P)});function Gy(S,P){var M=Xt(S)?Hr:Hd;return M(S,At(P,3))}function r6(S,P,M,z){return S==null?[]:(Xt(P)||(P=P==null?[]:[P]),M=z?t:M,Xt(M)||(M=M==null?[]:[M]),Kf(S,P,M))}var n6=dc(function(S,P,M){S[M?0:1].push(P)},function(){return[[],[]]});function i6(S,P,M){var z=Xt(S)?pu:Wl,Q=arguments.length<3;return z(S,At(P,4),M,Q,Eo)}function o6(S,P,M){var z=Xt(S)?Bb:Wl,Q=arguments.length<3;return z(S,At(P,4),M,Q,qd)}function a6(S,P){var M=Xt(S)?Bn:Yo;return M(S,Hy(At(P,3)))}function s6(S){var P=Xt(S)?si:oy;return P(S)}function u6(S,P,M){(M?ci(S,P,M):P===t)?P=1:P=Jt(P);var z=Xt(S)?Vo:ay;return z(S,P)}function l6(S){var P=Xt(S)?Bf:r_;return P(S)}function c6(S){if(S==null)return 0;if(so(S))return Xy(S)?za(S):S.length;var P=Zn(S);return P==_e||P==se?S.size:Xf(S).length}function f6(S,P,M){var z=Xt(S)?qa:n_;return M&&ci(S,P,M)&&(P=t),z(S,At(P,3))}var h6=Kt(function(S,P){if(S==null)return[];var M=P.length;return M>1&&ci(S,P[0],P[1])?P=[]:M>2&&ci(P[0],P[1],P[2])&&(P=[P[0]]),Kf(S,Mn(P,1),[])}),Vy=kf||function(){return hn.Date.now()};function d6(S,P){if(typeof P!="function")throw new Jr(a);return S=Jt(S),function(){if(--S<1)return P.apply(this,arguments)}}function gP(S,P,M){return P=M?t:P,P=S&&P==null?S.length:P,io(S,E,t,t,t,t,P)}function yP(S,P){var M;if(typeof P!="function")throw new Jr(a);return S=Jt(S),function(){return--S>0&&(M=P.apply(this,arguments)),S<=1&&(P=t),M}}var O_=Kt(function(S,P,M){var z=m;if(M.length){var Q=Qr(M,Fu(O_));z|=w}return io(S,z,P,M,Q)}),mP=Kt(function(S,P,M){var z=m|y;if(M.length){var Q=Qr(M,Fu(mP));z|=w}return io(P,z,S,M,Q)});function bP(S,P,M){P=M?t:P;var z=io(S,g,t,t,t,t,t,P);return z.placeholder=bP.placeholder,z}function _P(S,P,M){P=M?t:P;var z=io(S,_,t,t,t,t,t,P);return z.placeholder=_P.placeholder,z}function wP(S,P,M){var z,Q,fe,ye,we,Ce,Ue=0,Ge=!1,Ye=!1,ct=!0;if(typeof S!="function")throw new Jr(a);P=Jo(P)||0,vn(M)&&(Ge=!!M.leading,Ye="maxWait"in M,fe=Ye?En(Jo(M.maxWait)||0,P):fe,ct="trailing"in M?!!M.trailing:ct);function gt(In){var Ea=z,qs=Q;return z=Q=t,Ue=In,ye=S.apply(qs,Ea),ye}function Bt(In){return Ue=In,we=mc(cr,P),Ge?gt(In):ye}function tr(In){var Ea=In-Ce,qs=In-Ue,UP=P-Ea;return Ye?Tr(UP,fe-qs):UP}function Ut(In){var Ea=In-Ce,qs=In-Ue;return Ce===t||Ea>=P||Ea<0||Ye&&qs>=fe}function cr(){var In=Vy();if(Ut(In))return yr(In);we=mc(cr,tr(In))}function yr(In){return we=t,ct&&z?gt(In):(z=Q=t,ye)}function Ao(){we!==t&&fy(we),Ue=0,z=Ce=Q=we=t}function Fi(){return we===t?ye:yr(Vy())}function Ro(){var In=Vy(),Ea=Ut(In);if(z=arguments,Q=this,Ce=In,Ea){if(we===t)return Bt(Ce);if(Ye)return fy(we),we=mc(cr,P),gt(Ce)}return we===t&&(we=mc(cr,P)),ye}return Ro.cancel=Ao,Ro.flush=Fi,Ro}var v6=Kt(function(S,P){return ic(S,1,P)}),p6=Kt(function(S,P,M){return ic(S,Jo(P)||0,M)});function g6(S){return io(S,C)}function Wy(S,P){if(typeof S!="function"||P!=null&&typeof P!="function")throw new Jr(a);var M=function(){var z=arguments,Q=P?P.apply(this,z):z[0],fe=M.cache;if(fe.has(Q))return fe.get(Q);var ye=S.apply(this,z);return M.cache=fe.set(Q,ye)||fe,ye};return M.cache=new(Wy.Cache||to),M}Wy.Cache=to;function Hy(S){if(typeof S!="function")throw new Jr(a);return function(){var P=arguments;switch(P.length){case 0:return!S.call(this);case 1:return!S.call(this,P[0]);case 2:return!S.call(this,P[0],P[1]);case 3:return!S.call(this,P[0],P[1],P[2])}return!S.apply(this,P)}}function y6(S){return yP(2,S)}var m6=Jf(function(S,P){P=P.length==1&&Xt(P[0])?Hr(P[0],Ei(At())):Hr(Mn(P,1),Ei(At()));var M=P.length;return Kt(function(z){for(var Q=-1,fe=Tr(z.length,M);++Q<fe;)z[Q]=P[Q].call(this,z[Q]);return Be(S,this,z)})}),x_=Kt(function(S,P){var M=Qr(P,Fu(x_));return io(S,w,t,P,M)}),EP=Kt(function(S,P){var M=Qr(P,Fu(EP));return io(S,x,t,P,M)}),b6=Ko(function(S,P){return io(S,O,t,t,t,P)});function _6(S,P){if(typeof S!="function")throw new Jr(a);return P=P===t?P:Jt(P),Kt(S,P)}function w6(S,P){if(typeof S!="function")throw new Jr(a);return P=P==null?0:En(Jt(P),0),Kt(function(M){var z=M[P],Q=es(M,0,P);return z&&Pn(Q,z),Be(S,this,Q)})}function E6(S,P,M){var z=!0,Q=!0;if(typeof S!="function")throw new Jr(a);return vn(M)&&(z="leading"in M?!!M.leading:z,Q="trailing"in M?!!M.trailing:Q),wP(S,P,{leading:z,maxWait:P,trailing:Q})}function O6(S){return gP(S,1)}function x6(S,P){return x_(rv(P),S)}function S6(){if(!arguments.length)return[];var S=arguments[0];return Xt(S)?S:[S]}function T6(S){return Ni(S,d)}function C6(S,P){return P=typeof P=="function"?P:t,Ni(S,d,P)}function P6(S){return Ni(S,f|d)}function A6(S,P){return P=typeof P=="function"?P:t,Ni(S,f|d,P)}function R6(S,P){return P==null||zf(S,P,ei(P))}function wa(S,P){return S===P||S!==S&&P!==P}var I6=To(Qa),k6=To(function(S,P){return S>=P}),_c=Un((function(){return arguments})())?Un:function(S){return On(S)&&Qt.call(S,"callee")&&!Mi.call(S,"callee")},Xt=Le.isArray,D6=Cn?Ei(Cn):ey;function so(S){return S!=null&&Yy(S.length)&&!Bs(S)}function Rn(S){return On(S)&&so(S)}function M6(S){return S===!0||S===!1||On(S)&&Ln(S)==le}var Uu=zo||L_,L6=Fo?Ei(Fo):ty;function N6(S){return On(S)&&S.nodeType===1&&!Ov(S)}function j6(S){if(S==null)return!0;if(so(S)&&(Xt(S)||typeof S=="string"||typeof S.splice=="function"||Uu(S)||ph(S)||_c(S)))return!S.length;var P=Zn(S);if(P==_e||P==se)return!S.size;if(yc(S))return!Xf(S).length;for(var M in S)if(Qt.call(S,M))return!1;return!0}function F6(S,P){return oc(S,P)}function B6(S,P,M){M=typeof M=="function"?M:t;var z=M?M(S,P):t;return z===t?oc(S,P,t,M):!!z}function S_(S){if(!On(S))return!1;var P=Ln(S);return P==re||P==ee||typeof S.message=="string"&&typeof S.name=="string"&&!Ov(S)}function U6(S){return typeof S=="number"&&Mf(S)}function Bs(S){if(!vn(S))return!1;var P=Ln(S);return P==he||P==ve||P==ae||P==G}function OP(S){return typeof S=="number"&&S==Jt(S)}function Yy(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=U}function vn(S){var P=typeof S;return S!=null&&(P=="object"||P=="function")}function On(S){return S!=null&&typeof S=="object"}var xP=Qi?Ei(Qi):ui;function q6(S,P){return S===P||ac(S,P,Yt(P))}function z6(S,P,M){return M=typeof M=="function"?M:t,ac(S,P,Yt(P),M)}function G6(S){return SP(S)&&S!=+S}function V6(S){if(Ry(S))throw new qt(o);return Yf(S)}function W6(S){return S===null}function H6(S){return S==null}function SP(S){return typeof S=="number"||On(S)&&Ln(S)==Oe}function Ov(S){if(!On(S)||Ln(S)!=me)return!1;var P=Eu(S);if(P===null)return!0;var M=Qt.call(P,"constructor")&&P.constructor;return typeof M=="function"&&M instanceof M&&Uo.call(M)==Hb}var T_=Di?Ei(Di):Jb;function Y6(S){return OP(S)&&S>=-U&&S<=U}var TP=Ie?Ei(Ie):sc;function Xy(S){return typeof S=="string"||!Xt(S)&&On(S)&&Ln(S)==pe}function Po(S){return typeof S=="symbol"||On(S)&&Ln(S)==ge}var ph=Ve?Ei(Ve):ry;function X6(S){return S===t}function $6(S){return On(S)&&Zn(S)==Ne}function K6(S){return On(S)&&Ln(S)==He}var Z6=To(uc),Q6=To(function(S,P){return S<=P});function CP(S){if(!S)return[];if(so(S))return Xy(S)?ai(S):qn(S);if(ha&&S[ha])return Gb(S[ha]());var P=Zn(S),M=P==_e?Pd:P==se?Cf:gh;return M(S)}function Us(S){if(!S)return S===0?S:0;if(S=Jo(S),S===B||S===-B){var P=S<0?-1:1;return P*W}return S===S?S:0}function Jt(S){var P=Us(S),M=P%1;return P===P?M?P-M:P:0}function PP(S){return S?Ho(Jt(S),0,Y):0}function Jo(S){if(typeof S=="number")return S;if(Po(S))return H;if(vn(S)){var P=typeof S.valueOf=="function"?S.valueOf():S;S=vn(P)?P+"":P}if(typeof S!="string")return S===0?S:+S;S=Hl(S);var M=gr.test(S);return M||Dn.test(S)?Td(S.slice(2),M?2:8):Sr.test(S)?H:+S}function AP(S){return So(S,uo(S))}function J6(S){return S?Ho(Jt(S),-U,U):S===0?S:0}function Mr(S){return S==null?"":ji(S)}var e8=Ns(function(S,P){if(yc(P)||so(P)){So(P,ei(P),S);return}for(var M in P)Qt.call(P,M)&&Ru(S,M,P[M])}),RP=Ns(function(S,P){So(P,uo(P),S)}),$y=Ns(function(S,P,M,z){So(P,uo(P),S,z)}),t8=Ns(function(S,P,M,z){So(P,ei(P),S,z)}),r8=Ko(Uf);function n8(S,P){var M=Xa(S);return P==null?M:Ls(M,P)}var i8=Kt(function(S,P){S=ne(S);var M=-1,z=P.length,Q=z>2?P[2]:t;for(Q&&ci(P[0],P[1],Q)&&(z=1);++M<z;)for(var fe=P[M],ye=uo(fe),we=-1,Ce=ye.length;++we<Ce;){var Ue=ye[we],Ge=S[Ue];(Ge===t||wa(Ge,Oi[Ue])&&!Qt.call(S,Ue))&&(S[Ue]=fe[Ue])}return S}),o8=Kt(function(S){return S.push(t,tn),Be(IP,t,S)});function a8(S,P){return Cg(S,At(P,3),Oo)}function s8(S,P){return Cg(S,At(P,3),xo)}function u8(S,P){return S==null?S:Vf(S,At(P,3),uo)}function l8(S,P){return S==null?S:Jg(S,At(P,3),uo)}function c8(S,P){return S&&Oo(S,At(P,3))}function f8(S,P){return S&&xo(S,At(P,3))}function h8(S){return S==null?[]:ku(S,ei(S))}function d8(S){return S==null?[]:ku(S,uo(S))}function C_(S,P,M){var z=S==null?t:da(S,P);return z===t?M:z}function v8(S,P){return S!=null&&Py(S,P,kt)}function P_(S,P){return S!=null&&Py(S,P,Hf)}var p8=xy(function(S,P,M){P!=null&&typeof P.toString!="function"&&(P=If.call(P)),S[P]=M},R_(lo)),g8=xy(function(S,P,M){P!=null&&typeof P.toString!="function"&&(P=If.call(P)),Qt.call(S,P)?S[P].push(M):S[P]=[M]},At),y8=Kt(Du);function ei(S){return so(S)?Ud(S):Xf(S)}function uo(S){return so(S)?Ud(S,!0):ny(S)}function m8(S,P){var M={};return P=At(P,3),Oo(S,function(z,Q,fe){Wo(M,P(z,Q,fe),z)}),M}function b8(S,P){var M={};return P=At(P,3),Oo(S,function(z,Q,fe){Wo(M,Q,P(z,Q,fe))}),M}var _8=Ns(function(S,P,M){lc(S,P,M)}),IP=Ns(function(S,P,M,z){lc(S,P,M,z)}),w8=Ko(function(S,P){var M={};if(S==null)return M;var z=!1;P=Hr(P,function(fe){return fe=ya(fe,S),z||(z=fe.length>1),fe}),So(S,li(S),M),z&&(M=Ni(M,f|h|d,Ty));for(var Q=P.length;Q--;)hc(M,P[Q]);return M});function E8(S,P){return kP(S,Hy(At(P)))}var O8=Ko(function(S,P){return S==null?{}:Yd(S,P)});function kP(S,P){if(S==null)return{};var M=Hr(li(S),function(z){return[z]});return P=At(P),Xd(S,M,function(z,Q){return P(z,Q[0])})}function x8(S,P,M){P=ya(P,S);var z=-1,Q=P.length;for(Q||(Q=1,S=t);++z<Q;){var fe=S==null?t:S[Zo(P[z])];fe===t&&(z=Q,fe=M),S=Bs(fe)?fe.call(S):fe}return S}function S8(S,P,M){return S==null?S:Lu(S,P,M)}function T8(S,P,M,z){return z=typeof z=="function"?z:t,S==null?S:Lu(S,P,M,z)}var DP=ov(ei),MP=ov(uo);function C8(S,P,M){var z=Xt(S),Q=z||Uu(S)||ph(S);if(P=At(P,4),M==null){var fe=S&&S.constructor;Q?M=z?new fe:[]:vn(S)?M=Bs(fe)?Xa(Eu(S)):{}:M={}}return(Q?_t:Oo)(S,function(ye,we,Ce){return P(M,ye,we,Ce)}),M}function P8(S,P){return S==null?!0:hc(S,P)}function A8(S,P,M){return S==null?S:Jd(S,P,rv(M))}function R8(S,P,M,z){return z=typeof z=="function"?z:t,S==null?S:Jd(S,P,rv(M),z)}function gh(S){return S==null?[]:Ps(S,ei(S))}function I8(S){return S==null?[]:Ps(S,uo(S))}function k8(S,P,M){return M===t&&(M=P,P=t),M!==t&&(M=Jo(M),M=M===M?M:0),P!==t&&(P=Jo(P),P=P===P?P:0),Ho(Jo(S),P,M)}function D8(S,P,M){return P=Us(P),M===t?(M=P,P=0):M=Us(M),S=Jo(S),Gd(S,P,M)}function M8(S,P,M){if(M&&typeof M!="boolean"&&ci(S,P,M)&&(P=M=t),M===t&&(typeof P=="boolean"?(M=P,P=t):typeof S=="boolean"&&(M=S,S=t)),S===t&&P===t?(S=0,P=1):(S=Us(S),P===t?(P=S,S=0):P=Us(P)),S>P){var z=S;S=P,P=z}if(M||S%1||P%1){var Q=jg();return Tr(S+Q*(P-S+Sd("1e-"+((Q+"").length-1))),P)}return Kd(S,P)}var L8=Nu(function(S,P,M){return P=P.toLowerCase(),S+(M?LP(P):P)});function LP(S){return A_(Mr(S).toLowerCase())}function NP(S){return S=Mr(S),S&&S.replace(ws,zb).replace(yf,"")}function N8(S,P,M){S=Mr(S),P=ji(P);var z=S.length;M=M===t?z:Ho(Jt(M),0,z);var Q=M;return M-=P.length,M>=0&&S.slice(M,Q)==P}function j8(S){return S=Mr(S),S&&yt.test(S)?S.replace(ft,Sf):S}function F8(S){return S=Mr(S),S&&ur.test(S)?S.replace(Pt,"\\$&"):S}var B8=Nu(function(S,P,M){return S+(M?"-":"")+P.toLowerCase()}),U8=Nu(function(S,P,M){return S+(M?" ":"")+P.toLowerCase()}),q8=vc("toLowerCase");function z8(S,P,M){S=Mr(S),P=Jt(P);var z=P?za(S):0;if(!P||z>=P)return S;var Q=(P-z)/2;return nh(Ou(Q),M)+S+nh(wn(Q),M)}function G8(S,P,M){S=Mr(S),P=Jt(P);var z=P?za(S):0;return P&&z<P?S+nh(P-z,M):S}function V8(S,P,M){S=Mr(S),P=Jt(P);var z=P?za(S):0;return P&&z<P?nh(P-z,M)+S:S}function W8(S,P,M){return M||P==null?P=0:P&&(P=+P),Xb(Mr(S).replace(nr,""),P||0)}function H8(S,P,M){return(M?ci(S,P,M):P===t)?P=1:P=Jt(P),Zd(Mr(S),P)}function Y8(){var S=arguments,P=Mr(S[0]);return S.length<3?P:P.replace(S[1],S[2])}var X8=Nu(function(S,P,M){return S+(M?"_":"")+P.toLowerCase()});function $8(S,P,M){return M&&typeof M!="number"&&ci(S,P,M)&&(P=M=t),M=M===t?Y:M>>>0,M?(S=Mr(S),S&&(typeof P=="string"||P!=null&&!T_(P))&&(P=ji(P),!P&&mu(S))?es(ai(S),0,M):S.split(P,M)):[]}var K8=Nu(function(S,P,M){return S+(M?" ":"")+A_(P)});function Z8(S,P,M){return S=Mr(S),M=M==null?0:Ho(Jt(M),0,S.length),P=ji(P),S.slice(M,M+P.length)==P}function Q8(S,P,M){var z=ue.templateSettings;M&&ci(S,P,M)&&(P=t),S=Mr(S),P=$y({},P,z,Yr);var Q=$y({},P.imports,z.imports,Yr),fe=ei(Q),ye=Ps(Q,fe),we,Ce,Ue=0,Ge=P.interpolate||No,Ye="__p += '",ct=Ga((P.escape||No).source+"|"+Ge.source+"|"+(Ge===St?cn:No).source+"|"+(P.evaluate||No).source+"|$","g"),gt="//# sourceURL="+(Qt.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ul+"]")+`
`;S.replace(ct,function(Ut,cr,yr,Ao,Fi,Ro){return yr||(yr=Ao),Ye+=S.slice(Ue,Ro).replace(ca,Tf),cr&&(we=!0,Ye+=`' +
__e(`+cr+`) +
'`),Fi&&(Ce=!0,Ye+=`';
`+Fi+`;
__p += '`),yr&&(Ye+=`' +
((__t = (`+yr+`)) == null ? '' : __t) +
'`),Ue=Ro+Ut.length,Ut}),Ye+=`';
`;var Bt=Qt.call(P,"variable")&&P.variable;if(!Bt)Ye=`with (obj) {
`+Ye+`
}
`;else if(Wr.test(Bt))throw new qt(s);Ye=(Ce?Ye.replace(it,""):Ye).replace(Fe,"$1").replace(ut,"$1;"),Ye="function("+(Bt||"obj")+`) {
`+(Bt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(we?", __e = _.escape":"")+(Ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ye+`return __p
}`;var tr=FP(function(){return lr(fe,gt+"return "+Ye).apply(t,ye)});if(tr.source=Ye,S_(tr))throw tr;return tr}function J8(S){return Mr(S).toLowerCase()}function eq(S){return Mr(S).toUpperCase()}function tq(S,P,M){if(S=Mr(S),S&&(M||P===t))return Hl(S);if(!S||!(P=ji(P)))return S;var z=ai(S),Q=ai(P),fe=Yl(z,Q),ye=kg(z,Q)+1;return es(z,fe,ye).join("")}function rq(S,P,M){if(S=Mr(S),S&&(M||P===t))return S.slice(0,Pf(S)+1);if(!S||!(P=ji(P)))return S;var z=ai(S),Q=kg(z,ai(P))+1;return es(z,0,Q).join("")}function nq(S,P,M){if(S=Mr(S),S&&(M||P===t))return S.replace(nr,"");if(!S||!(P=ji(P)))return S;var z=ai(S),Q=Yl(z,ai(P));return es(z,Q).join("")}function iq(S,P){var M=A,z=R;if(vn(P)){var Q="separator"in P?P.separator:Q;M="length"in P?Jt(P.length):M,z="omission"in P?ji(P.omission):z}S=Mr(S);var fe=S.length;if(mu(S)){var ye=ai(S);fe=ye.length}if(M>=fe)return S;var we=M-za(z);if(we<1)return z;var Ce=ye?es(ye,0,we).join(""):S.slice(0,we);if(Q===t)return Ce+z;if(ye&&(we+=Ce.length-we),T_(Q)){if(S.slice(we).search(Q)){var Ue,Ge=Ce;for(Q.global||(Q=Ga(Q.source,Mr(mr.exec(Q))+"g")),Q.lastIndex=0;Ue=Q.exec(Ge);)var Ye=Ue.index;Ce=Ce.slice(0,Ye===t?we:Ye)}}else if(S.indexOf(ji(Q),we)!=we){var ct=Ce.lastIndexOf(Q);ct>-1&&(Ce=Ce.slice(0,ct))}return Ce+z}function oq(S){return S=Mr(S),S&&xt.test(S)?S.replace(rt,bu):S}var aq=Nu(function(S,P,M){return S+(M?" ":"")+P.toUpperCase()}),A_=vc("toUpperCase");function jP(S,P,M){return S=Mr(S),P=M?t:P,P===t?Dg(S)?Af(S):Rr(S):S.match(P)||[]}var FP=Kt(function(S,P){try{return Be(S,t,P)}catch(M){return S_(M)?M:new qt(M)}}),sq=Ko(function(S,P){return _t(P,function(M){M=Zo(M),Wo(S,M,O_(S[M],S))}),S});function uq(S){var P=S==null?0:S.length,M=At();return S=P?Hr(S,function(z){if(typeof z[1]!="function")throw new Jr(a);return[M(z[0]),z[1]]}):[],Kt(function(z){for(var Q=-1;++Q<P;){var fe=S[Q];if(Be(fe[0],this,z))return Be(fe[1],this,z)}})}function lq(S){return qf(Ni(S,f))}function R_(S){return function(){return S}}function cq(S,P){return S==null||S!==S?P:S}var fq=no(),hq=no(!0);function lo(S){return S}function I_(S){return Wd(typeof S=="function"?S:Ni(S,f))}function dq(S){return Mu(Ni(S,f))}function vq(S,P){return $f(S,Ni(P,f))}var pq=Kt(function(S,P){return function(M){return Du(M,S,P)}}),gq=Kt(function(S,P){return function(M){return Du(S,M,P)}});function k_(S,P,M){var z=ei(P),Q=ku(P,z);M==null&&!(vn(P)&&(Q.length||!z.length))&&(M=P,P=S,S=this,Q=ku(P,ei(P)));var fe=!(vn(M)&&"chain"in M)||!!M.chain,ye=Bs(S);return _t(Q,function(we){var Ce=P[we];S[we]=Ce,ye&&(S.prototype[we]=function(){var Ue=this.__chain__;if(fe||Ue){var Ge=S(this.__wrapped__),Ye=Ge.__actions__=qn(this.__actions__);return Ye.push({func:Ce,args:arguments,thisArg:S}),Ge.__chain__=Ue,Ge}return Ce.apply(S,Pn([this.value()],arguments))})}),S}function yq(){return hn._===this&&(hn._=Rd),this}function D_(){}function mq(S){return S=Jt(S),Kt(function(P){return cc(P,S)})}var bq=Vt(Hr),_q=Vt(mn),wq=Vt(qa);function BP(S){return cv(S)?gu(Zo(S)):Xo(S)}function Eq(S){return function(P){return S==null?t:da(S,P)}}var Oq=on(),xq=on(!0);function M_(){return[]}function L_(){return!1}function Sq(){return{}}function Tq(){return""}function Cq(){return!0}function Pq(S,P){if(S=Jt(S),S<1||S>U)return[];var M=Y,z=Tr(S,Y);P=At(P),S-=Y;for(var Q=xf(z,P);++M<S;)P(M);return Q}function Aq(S){return Xt(S)?Hr(S,Zo):Po(S)?[S]:qn(gv(Mr(S)))}function Rq(S){var P=++Lg;return Mr(S)+P}var Iq=$o(function(S,P){return S+P},0),kq=pc("ceil"),Dq=$o(function(S,P){return S/P},1),Mq=pc("floor");function Lq(S){return S&&S.length?Gf(S,lo,Qa):t}function Nq(S,P){return S&&S.length?Gf(S,At(P,2),Qa):t}function jq(S){return Ag(S,lo)}function Fq(S,P){return Ag(S,At(P,2))}function Bq(S){return S&&S.length?Gf(S,lo,uc):t}function Uq(S,P){return S&&S.length?Gf(S,At(P,2),uc):t}var qq=$o(function(S,P){return S*P},1),zq=pc("round"),Gq=$o(function(S,P){return S-P},0);function Vq(S){return S&&S.length?yu(S,lo):0}function Wq(S,P){return S&&S.length?yu(S,At(P,2)):0}return ue.after=d6,ue.ary=gP,ue.assign=e8,ue.assignIn=RP,ue.assignInWith=$y,ue.assignWith=t8,ue.at=r8,ue.before=yP,ue.bind=O_,ue.bindAll=sq,ue.bindKey=mP,ue.castArray=S6,ue.chain=dP,ue.chunk=Ci,ue.compact=yv,ue.concat=f_,ue.cond=uq,ue.conforms=lq,ue.constant=R_,ue.countBy=VU,ue.create=n8,ue.curry=bP,ue.curryRight=_P,ue.debounce=wP,ue.defaults=i8,ue.defaultsDeep=o8,ue.defer=v6,ue.delay=p6,ue.difference=h_,ue.differenceBy=mv,ue.differenceWith=bv,ue.drop=d_,ue.dropRight=v_,ue.dropRightWhile=p_,ue.dropWhile=jy,ue.fill=g_,ue.filter=HU,ue.flatMap=$U,ue.flatMapDeep=KU,ue.flatMapDepth=ZU,ue.flatten=lh,ue.flattenDeep=_v,ue.flattenDepth=y_,ue.flip=g6,ue.flow=fq,ue.flowRight=hq,ue.fromPairs=m_,ue.functions=h8,ue.functionsIn=d8,ue.groupBy=QU,ue.initial=__,ue.intersection=w_,ue.intersectionBy=E_,ue.intersectionWith=T,ue.invert=p8,ue.invertBy=g8,ue.invokeMap=e6,ue.iteratee=I_,ue.keyBy=t6,ue.keys=ei,ue.keysIn=uo,ue.map=Gy,ue.mapKeys=m8,ue.mapValues=b8,ue.matches=dq,ue.matchesProperty=vq,ue.memoize=Wy,ue.merge=_8,ue.mergeWith=IP,ue.method=pq,ue.methodOf=gq,ue.mixin=k_,ue.negate=Hy,ue.nthArg=mq,ue.omit=w8,ue.omitBy=E8,ue.once=y6,ue.orderBy=r6,ue.over=bq,ue.overArgs=m6,ue.overEvery=_q,ue.overSome=wq,ue.partial=x_,ue.partialRight=EP,ue.partition=n6,ue.pick=O8,ue.pickBy=kP,ue.property=BP,ue.propertyOf=Eq,ue.pull=de,ue.pullAll=be,ue.pullAllBy=Se,ue.pullAllWith=Ae,ue.pullAt=qe,ue.range=Oq,ue.rangeRight=xq,ue.rearg=b6,ue.reject=a6,ue.remove=ze,ue.rest=_6,ue.reverse=$e,ue.sampleSize=u6,ue.set=S8,ue.setWith=T8,ue.shuffle=l6,ue.slice=ht,ue.sortBy=h6,ue.sortedUniq=Wt,ue.sortedUniqBy=zt,ue.split=$8,ue.spread=w6,ue.tail=br,ue.take=wt,ue.takeRight=Lt,ue.takeRightWhile=An,ue.takeWhile=dn,ue.tap=LU,ue.throttle=E6,ue.thru=zy,ue.toArray=CP,ue.toPairs=DP,ue.toPairsIn=MP,ue.toPath=Aq,ue.toPlainObject=AP,ue.transform=C8,ue.unary=O6,ue.union=fi,ue.unionBy=qr,ue.unionWith=Jn,ue.uniq=Qo,ue.uniqBy=ns,ue.uniqWith=Fs,ue.unset=P8,ue.unzip=Co,ue.unzipWith=wv,ue.update=A8,ue.updateWith=R8,ue.values=gh,ue.valuesIn=I8,ue.without=Uy,ue.words=jP,ue.wrap=x6,ue.xor=ch,ue.xorBy=Ev,ue.xorWith=fh,ue.zip=hh,ue.zipObject=qy,ue.zipObjectDeep=dh,ue.zipWith=vh,ue.entries=DP,ue.entriesIn=MP,ue.extend=RP,ue.extendWith=$y,k_(ue,ue),ue.add=Iq,ue.attempt=FP,ue.camelCase=L8,ue.capitalize=LP,ue.ceil=kq,ue.clamp=k8,ue.clone=T6,ue.cloneDeep=P6,ue.cloneDeepWith=A6,ue.cloneWith=C6,ue.conformsTo=R6,ue.deburr=NP,ue.defaultTo=cq,ue.divide=Dq,ue.endsWith=N8,ue.eq=wa,ue.escape=j8,ue.escapeRegExp=F8,ue.every=WU,ue.find=YU,ue.findIndex=Fy,ue.findKey=a8,ue.findLast=XU,ue.findLastIndex=uh,ue.findLastKey=s8,ue.floor=Mq,ue.forEach=vP,ue.forEachRight=pP,ue.forIn=u8,ue.forInRight=l8,ue.forOwn=c8,ue.forOwnRight=f8,ue.get=C_,ue.gt=I6,ue.gte=k6,ue.has=v8,ue.hasIn=P_,ue.head=By,ue.identity=lo,ue.includes=JU,ue.indexOf=b_,ue.inRange=D8,ue.invoke=y8,ue.isArguments=_c,ue.isArray=Xt,ue.isArrayBuffer=D6,ue.isArrayLike=so,ue.isArrayLikeObject=Rn,ue.isBoolean=M6,ue.isBuffer=Uu,ue.isDate=L6,ue.isElement=N6,ue.isEmpty=j6,ue.isEqual=F6,ue.isEqualWith=B6,ue.isError=S_,ue.isFinite=U6,ue.isFunction=Bs,ue.isInteger=OP,ue.isLength=Yy,ue.isMap=xP,ue.isMatch=q6,ue.isMatchWith=z6,ue.isNaN=G6,ue.isNative=V6,ue.isNil=H6,ue.isNull=W6,ue.isNumber=SP,ue.isObject=vn,ue.isObjectLike=On,ue.isPlainObject=Ov,ue.isRegExp=T_,ue.isSafeInteger=Y6,ue.isSet=TP,ue.isString=Xy,ue.isSymbol=Po,ue.isTypedArray=ph,ue.isUndefined=X6,ue.isWeakMap=$6,ue.isWeakSet=K6,ue.join=I,ue.kebabCase=B8,ue.last=N,ue.lastIndexOf=V,ue.lowerCase=U8,ue.lowerFirst=q8,ue.lt=Z6,ue.lte=Q6,ue.max=Lq,ue.maxBy=Nq,ue.mean=jq,ue.meanBy=Fq,ue.min=Bq,ue.minBy=Uq,ue.stubArray=M_,ue.stubFalse=L_,ue.stubObject=Sq,ue.stubString=Tq,ue.stubTrue=Cq,ue.multiply=qq,ue.nth=J,ue.noConflict=yq,ue.noop=D_,ue.now=Vy,ue.pad=z8,ue.padEnd=G8,ue.padStart=V8,ue.parseInt=W8,ue.random=M8,ue.reduce=i6,ue.reduceRight=o6,ue.repeat=H8,ue.replace=Y8,ue.result=x8,ue.round=zq,ue.runInContext=Te,ue.sample=s6,ue.size=c6,ue.snakeCase=X8,ue.some=f6,ue.sortedIndex=pt,ue.sortedIndexBy=Rt,ue.sortedIndexOf=We,ue.sortedLastIndex=Je,ue.sortedLastIndexBy=Tt,ue.sortedLastIndexOf=st,ue.startCase=K8,ue.startsWith=Z8,ue.subtract=Gq,ue.sum=Vq,ue.sumBy=Wq,ue.template=Q8,ue.times=Pq,ue.toFinite=Us,ue.toInteger=Jt,ue.toLength=PP,ue.toLower=J8,ue.toNumber=Jo,ue.toSafeInteger=J6,ue.toString=Mr,ue.toUpper=eq,ue.trim=tq,ue.trimEnd=rq,ue.trimStart=nq,ue.truncate=iq,ue.unescape=oq,ue.uniqueId=Rq,ue.upperCase=aq,ue.upperFirst=A_,ue.each=vP,ue.eachRight=pP,ue.first=By,k_(ue,(function(){var S={};return Oo(ue,function(P,M){Qt.call(ue.prototype,M)||(S[M]=P)}),S})(),{chain:!1}),ue.VERSION=n,_t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){ue[S].placeholder=ue}),_t(["drop","take"],function(S,P){sr.prototype[S]=function(M){M=M===t?1:En(Jt(M),0);var z=this.__filtered__&&!P?new sr(this):this.clone();return z.__filtered__?z.__takeCount__=Tr(M,z.__takeCount__):z.__views__.push({size:Tr(M,Y),type:S+(z.__dir__<0?"Right":"")}),z},sr.prototype[S+"Right"]=function(M){return this.reverse()[S](M).reverse()}}),_t(["filter","map","takeWhile"],function(S,P){var M=P+1,z=M==L||M==q;sr.prototype[S]=function(Q){var fe=this.clone();return fe.__iteratees__.push({iteratee:At(Q,3),type:M}),fe.__filtered__=fe.__filtered__||z,fe}}),_t(["head","last"],function(S,P){var M="take"+(P?"Right":"");sr.prototype[S]=function(){return this[M](1).value()[0]}}),_t(["initial","tail"],function(S,P){var M="drop"+(P?"":"Right");sr.prototype[S]=function(){return this.__filtered__?new sr(this):this[M](1)}}),sr.prototype.compact=function(){return this.filter(lo)},sr.prototype.find=function(S){return this.filter(S).head()},sr.prototype.findLast=function(S){return this.reverse().find(S)},sr.prototype.invokeMap=Kt(function(S,P){return typeof S=="function"?new sr(this):this.map(function(M){return Du(M,S,P)})}),sr.prototype.reject=function(S){return this.filter(Hy(At(S)))},sr.prototype.slice=function(S,P){S=Jt(S);var M=this;return M.__filtered__&&(S>0||P<0)?new sr(M):(S<0?M=M.takeRight(-S):S&&(M=M.drop(S)),P!==t&&(P=Jt(P),M=P<0?M.dropRight(-P):M.take(P-S)),M)},sr.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},sr.prototype.toArray=function(){return this.take(Y)},Oo(sr.prototype,function(S,P){var M=/^(?:filter|find|map|reject)|While$/.test(P),z=/^(?:head|last)$/.test(P),Q=ue[z?"take"+(P=="last"?"Right":""):P],fe=z||/^find/.test(P);Q&&(ue.prototype[P]=function(){var ye=this.__wrapped__,we=z?[1]:arguments,Ce=ye instanceof sr,Ue=we[0],Ge=Ce||Xt(ye),Ye=function(cr){var yr=Q.apply(ue,Pn([cr],we));return z&&ct?yr[0]:yr};Ge&&M&&typeof Ue=="function"&&Ue.length!=1&&(Ce=Ge=!1);var ct=this.__chain__,gt=!!this.__actions__.length,Bt=fe&&!ct,tr=Ce&&!gt;if(!fe&&Ge){ye=tr?ye:new sr(this);var Ut=S.apply(ye,we);return Ut.__actions__.push({func:zy,args:[Ye],thisArg:t}),new Mt(Ut,ct)}return Bt&&tr?S.apply(this,we):(Ut=this.thru(Ye),Bt?z?Ut.value()[0]:Ut.value():Ut)})}),_t(["pop","push","shift","sort","splice","unshift"],function(S){var P=Zt[S],M=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",z=/^(?:pop|shift)$/.test(S);ue.prototype[S]=function(){var Q=arguments;if(z&&!this.__chain__){var fe=this.value();return P.apply(Xt(fe)?fe:[],Q)}return this[M](function(ye){return P.apply(Xt(ye)?ye:[],Q)})}}),Oo(sr.prototype,function(S,P){var M=ue[P];if(M){var z=M.name+"";Qt.call(Ya,z)||(Ya[z]=[]),Ya[z].push({name:P,func:M})}}),Ya[rh(t,y).name]=[{name:"wrapper",func:t}],sr.prototype.clone=$b,sr.prototype.reverse=tc,sr.prototype.value=zg,ue.prototype.at=NU,ue.prototype.chain=jU,ue.prototype.commit=FU,ue.prototype.next=BU,ue.prototype.plant=qU,ue.prototype.reverse=zU,ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=GU,ue.prototype.first=ue.prototype.head,ha&&(ue.prototype[ha]=UU),ue}),wu=_u();Kn?((Kn.exports=wu)._=wu,vu._=wu):hn._=wu}).call(P$)})($v,$v.exports)),$v.exports}var uS,mL;function A$(){if(mL)return uS;mL=1,uS=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},r.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},r.prototype.toString=function(){for(var n=[],i=this._sentinel,o=i._prev;o!==i;)n.push(JSON.stringify(o,t)),o=o._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,i){if(n!=="_next"&&n!=="_prev")return i}return uS}var lS,bL;function R$(){if(bL)return lS;bL=1;var r=nn(),e=sa().Graph,t=A$();lS=i;var n=r.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var f=s(l,c||n),h=o(f.graph,f.buckets,f.zeroIdx);return r.flatten(r.map(h,function(d){return l.outEdges(d.v,d.w)}),!0)}function o(l,c,f){for(var h=[],d=c[c.length-1],v=c[0],p;l.nodeCount();){for(;p=v.dequeue();)a(l,c,f,p);for(;p=d.dequeue();)a(l,c,f,p);if(l.nodeCount()){for(var m=c.length-2;m>0;--m)if(p=c[m].dequeue(),p){h=h.concat(a(l,c,f,p,!0));break}}}return h}function a(l,c,f,h,d){var v=d?[]:void 0;return r.forEach(l.inEdges(h.v),function(p){var m=l.edge(p),y=l.node(p.v);d&&v.push({v:p.v,w:p.w}),y.out-=m,u(c,f,y)}),r.forEach(l.outEdges(h.v),function(p){var m=l.edge(p),y=p.w,b=l.node(y);b.in-=m,u(c,f,b)}),l.removeNode(h.v),v}function s(l,c){var f=new e,h=0,d=0;r.forEach(l.nodes(),function(m){f.setNode(m,{v:m,in:0,out:0})}),r.forEach(l.edges(),function(m){var y=f.edge(m.v,m.w)||0,b=c(m),g=y+b;f.setEdge(m.v,m.w,g),d=Math.max(d,f.node(m.v).out+=b),h=Math.max(h,f.node(m.w).in+=b)});var v=r.range(d+h+3).map(function(){return new t}),p=h+1;return r.forEach(f.nodes(),function(m){u(v,p,f.node(m))}),{graph:f,buckets:v,zeroIdx:p}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return lS}var cS,_L;function I$(){if(_L)return cS;_L=1;var r=nn(),e=R$();cS={run:t,undo:i};function t(o){var a=o.graph().acyclicer==="greedy"?e(o,s(o)):n(o);r.forEach(a,function(u){var l=o.edge(u);o.removeEdge(u),l.forwardName=u.name,l.reversed=!0,o.setEdge(u.w,u.v,l,r.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function n(o){var a=[],s={},u={};function l(c){r.has(u,c)||(u[c]=!0,s[c]=!0,r.forEach(o.outEdges(c),function(f){r.has(s,f.w)?a.push(f):l(f.w)}),delete s[c])}return r.forEach(o.nodes(),l),a}function i(o){r.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var u=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,u)}})}return cS}var fS,wL;function go(){if(wL)return fS;wL=1;var r=nn(),e=sa().Graph;fS={addDummyNode:t,simplify:n,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:h,partition:d,time:v,notime:p};function t(m,y,b,g){var _;do _=r.uniqueId(g);while(m.hasNode(_));return b.dummy=y,m.setNode(_,b),_}function n(m){var y=new e().setGraph(m.graph());return r.forEach(m.nodes(),function(b){y.setNode(b,m.node(b))}),r.forEach(m.edges(),function(b){var g=y.edge(b.v,b.w)||{weight:0,minlen:1},_=m.edge(b);y.setEdge(b.v,b.w,{weight:g.weight+_.weight,minlen:Math.max(g.minlen,_.minlen)})}),y}function i(m){var y=new e({multigraph:m.isMultigraph()}).setGraph(m.graph());return r.forEach(m.nodes(),function(b){m.children(b).length||y.setNode(b,m.node(b))}),r.forEach(m.edges(),function(b){y.setEdge(b,m.edge(b))}),y}function o(m){var y=r.map(m.nodes(),function(b){var g={};return r.forEach(m.outEdges(b),function(_){g[_.w]=(g[_.w]||0)+m.edge(_).weight}),g});return r.zipObject(m.nodes(),y)}function a(m){var y=r.map(m.nodes(),function(b){var g={};return r.forEach(m.inEdges(b),function(_){g[_.v]=(g[_.v]||0)+m.edge(_).weight}),g});return r.zipObject(m.nodes(),y)}function s(m,y){var b=m.x,g=m.y,_=y.x-b,w=y.y-g,x=m.width/2,E=m.height/2;if(!_&&!w)throw new Error("Not possible to find intersection inside of the rectangle");var O,C;return Math.abs(w)*x>Math.abs(_)*E?(w<0&&(E=-E),O=E*_/w,C=E):(_<0&&(x=-x),O=x,C=x*w/_),{x:b+O,y:g+C}}function u(m){var y=r.map(r.range(h(m)+1),function(){return[]});return r.forEach(m.nodes(),function(b){var g=m.node(b),_=g.rank;r.isUndefined(_)||(y[_][g.order]=b)}),y}function l(m){var y=r.min(r.map(m.nodes(),function(b){return m.node(b).rank}));r.forEach(m.nodes(),function(b){var g=m.node(b);r.has(g,"rank")&&(g.rank-=y)})}function c(m){var y=r.min(r.map(m.nodes(),function(w){return m.node(w).rank})),b=[];r.forEach(m.nodes(),function(w){var x=m.node(w).rank-y;b[x]||(b[x]=[]),b[x].push(w)});var g=0,_=m.graph().nodeRankFactor;r.forEach(b,function(w,x){r.isUndefined(w)&&x%_!==0?--g:g&&r.forEach(w,function(E){m.node(E).rank+=g})})}function f(m,y,b,g){var _={width:0,height:0};return arguments.length>=4&&(_.rank=b,_.order=g),t(m,"border",_,y)}function h(m){return r.max(r.map(m.nodes(),function(y){var b=m.node(y).rank;if(!r.isUndefined(b))return b}))}function d(m,y){var b={lhs:[],rhs:[]};return r.forEach(m,function(g){y(g)?b.lhs.push(g):b.rhs.push(g)}),b}function v(m,y){var b=r.now();try{return y()}finally{m+""+(r.now()-b)}}function p(m,y){return y()}return fS}var hS,EL;function k$(){if(EL)return hS;EL=1;var r=nn(),e=go();hS={run:t,undo:i};function t(o){o.graph().dummyChains=[],r.forEach(o.edges(),function(a){n(o,a)})}function n(o,a){var s=a.v,u=o.node(s).rank,l=a.w,c=o.node(l).rank,f=a.name,h=o.edge(a),d=h.labelRank;if(c!==u+1){o.removeEdge(a);var v,p,m;for(m=0,++u;u<c;++m,++u)h.points=[],p={width:0,height:0,edgeLabel:h,edgeObj:a,rank:u},v=e.addDummyNode(o,"edge",p,"_d"),u===d&&(p.width=h.width,p.height=h.height,p.dummy="edge-label",p.labelpos=h.labelpos),o.setEdge(s,v,{weight:h.weight},f),m===0&&o.graph().dummyChains.push(v),s=v;o.setEdge(s,l,{weight:h.weight},f)}}function i(o){r.forEach(o.graph().dummyChains,function(a){var s=o.node(a),u=s.edgeLabel,l;for(o.setEdge(s.edgeObj,u);s.dummy;)l=o.successors(a)[0],o.removeNode(a),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),a=l,s=o.node(a)})}return hS}var dS,OL;function C0(){if(OL)return dS;OL=1;var r=nn();dS={longestPath:e,slack:t};function e(n){var i={};function o(a){var s=n.node(a);if(r.has(i,a))return s.rank;i[a]=!0;var u=r.min(r.map(n.outEdges(a),function(l){return o(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}r.forEach(n.sources(),o)}function t(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return dS}var vS,xL;function nF(){if(xL)return vS;xL=1;var r=nn(),e=sa().Graph,t=C0().slack;vS=n;function n(s){var u=new e({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var f,h;i(u,s)<c;)f=o(u,s),h=u.hasNode(f.v)?t(s,f):-t(s,f),a(u,s,h);return u}function i(s,u){function l(c){r.forEach(u.nodeEdges(c),function(f){var h=f.v,d=c===h?f.w:h;!s.hasNode(d)&&!t(u,f)&&(s.setNode(d,{}),s.setEdge(c,d,{}),l(d))})}return r.forEach(s.nodes(),l),s.nodeCount()}function o(s,u){return r.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return t(u,l)})}function a(s,u,l){r.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return vS}var pS,SL;function D$(){if(SL)return pS;SL=1;var r=nn(),e=nF(),t=C0().slack,n=C0().longestPath,i=sa().alg.preorder,o=sa().alg.postorder,a=go().simplify;pS=s,s.initLowLimValues=f,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=d,s.enterEdge=v,s.exchangeEdges=p;function s(g){g=a(g),n(g);var _=e(g);f(_),u(_,g);for(var w,x;w=d(_);)x=v(_,g,w),p(_,g,w,x)}function u(g,_){var w=o(g,g.nodes());w=w.slice(0,w.length-1),r.forEach(w,function(x){l(g,_,x)})}function l(g,_,w){var x=g.node(w),E=x.parent;g.edge(w,E).cutvalue=c(g,_,w)}function c(g,_,w){var x=g.node(w),E=x.parent,O=!0,C=_.edge(w,E),A=0;return C||(O=!1,C=_.edge(E,w)),A=C.weight,r.forEach(_.nodeEdges(w),function(R){var k=R.v===w,D=k?R.w:R.v;if(D!==E){var L=k===O,j=_.edge(R).weight;if(A+=L?j:-j,y(g,w,D)){var q=g.edge(w,D).cutvalue;A+=L?-q:q}}}),A}function f(g,_){arguments.length<2&&(_=g.nodes()[0]),h(g,{},1,_)}function h(g,_,w,x,E){var O=w,C=g.node(x);return _[x]=!0,r.forEach(g.neighbors(x),function(A){r.has(_,A)||(w=h(g,_,w,A,x))}),C.low=O,C.lim=w++,E?C.parent=E:delete C.parent,w}function d(g){return r.find(g.edges(),function(_){return g.edge(_).cutvalue<0})}function v(g,_,w){var x=w.v,E=w.w;_.hasEdge(x,E)||(x=w.w,E=w.v);var O=g.node(x),C=g.node(E),A=O,R=!1;O.lim>C.lim&&(A=C,R=!0);var k=r.filter(_.edges(),function(D){return R===b(g,g.node(D.v),A)&&R!==b(g,g.node(D.w),A)});return r.minBy(k,function(D){return t(_,D)})}function p(g,_,w,x){var E=w.v,O=w.w;g.removeEdge(E,O),g.setEdge(x.v,x.w,{}),f(g),u(g,_),m(g,_)}function m(g,_){var w=r.find(g.nodes(),function(E){return!_.node(E).parent}),x=i(g,w);x=x.slice(1),r.forEach(x,function(E){var O=g.node(E).parent,C=_.edge(E,O),A=!1;C||(C=_.edge(O,E),A=!0),_.node(E).rank=_.node(O).rank+(A?C.minlen:-C.minlen)})}function y(g,_,w){return g.hasEdge(_,w)}function b(g,_,w){return w.low<=_.lim&&_.lim<=w.lim}return pS}var gS,TL;function M$(){if(TL)return gS;TL=1;var r=C0(),e=r.longestPath,t=nF(),n=D$();gS=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":a(u);break;case"longest-path":o(u);break;default:s(u)}}var o=e;function a(u){e(u),t(u)}function s(u){n(u)}return gS}var yS,CL;function L$(){if(CL)return yS;CL=1;var r=nn();yS=e;function e(i){var o=n(i);r.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),u=s.edgeObj,l=t(i,o,u.v,u.w),c=l.path,f=l.lca,h=0,d=c[h],v=!0;a!==u.w;){if(s=i.node(a),v){for(;(d=c[h])!==f&&i.node(d).maxRank<s.rank;)h++;d===f&&(v=!1)}if(!v){for(;h<c.length-1&&i.node(d=c[h+1]).minRank<=s.rank;)h++;d=c[h]}i.setParent(a,d),a=i.successors(a)[0]}})}function t(i,o,a,s){var u=[],l=[],c=Math.min(o[a].low,o[s].low),f=Math.max(o[a].lim,o[s].lim),h,d;h=a;do h=i.parent(h),u.push(h);while(h&&(o[h].low>c||f>o[h].lim));for(d=h,h=s;(h=i.parent(h))!==d;)l.push(h);return{path:u.concat(l.reverse()),lca:d}}function n(i){var o={},a=0;function s(u){var l=a;r.forEach(i.children(u),s),o[u]={low:l,lim:a++}}return r.forEach(i.children(),s),o}return yS}var mS,PL;function N$(){if(PL)return mS;PL=1;var r=nn(),e=go();mS={run:t,cleanup:a};function t(s){var u=e.addDummyNode(s,"root",{},"_root"),l=i(s),c=r.max(r.values(l))-1,f=2*c+1;s.graph().nestingRoot=u,r.forEach(s.edges(),function(d){s.edge(d).minlen*=f});var h=o(s)+1;r.forEach(s.children(),function(d){n(s,u,f,h,c,l,d)}),s.graph().nodeRankFactor=f}function n(s,u,l,c,f,h,d){var v=s.children(d);if(!v.length){d!==u&&s.setEdge(u,d,{weight:0,minlen:l});return}var p=e.addBorderNode(s,"_bt"),m=e.addBorderNode(s,"_bb"),y=s.node(d);s.setParent(p,d),y.borderTop=p,s.setParent(m,d),y.borderBottom=m,r.forEach(v,function(b){n(s,u,l,c,f,h,b);var g=s.node(b),_=g.borderTop?g.borderTop:b,w=g.borderBottom?g.borderBottom:b,x=g.borderTop?c:2*c,E=_!==w?1:f-h[d]+1;s.setEdge(p,_,{weight:x,minlen:E,nestingEdge:!0}),s.setEdge(w,m,{weight:x,minlen:E,nestingEdge:!0})}),s.parent(d)||s.setEdge(u,p,{weight:0,minlen:f+h[d]})}function i(s){var u={};function l(c,f){var h=s.children(c);h&&h.length&&r.forEach(h,function(d){l(d,f+1)}),u[c]=f}return r.forEach(s.children(),function(c){l(c,1)}),u}function o(s){return r.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function a(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,r.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return mS}var bS,AL;function j$(){if(AL)return bS;AL=1;var r=nn(),e=go();bS=t;function t(i){function o(a){var s=i.children(a),u=i.node(a);if(s.length&&r.forEach(s,o),r.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",a,u,l),n(i,"borderRight","_br",a,u,l)}}r.forEach(i.children(),o)}function n(i,o,a,s,u,l){var c={width:0,height:0,rank:l,borderType:o},f=u[o][l-1],h=e.addDummyNode(i,"border",c,a);u[o][l]=h,i.setParent(h,s),f&&i.setEdge(f,h,{weight:1})}return bS}var _S,RL;function F$(){if(RL)return _S;RL=1;var r=nn();_S={adjust:e,undo:t};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function t(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&o(l),(c==="lr"||c==="rl")&&(s(l),n(l))}function n(l){r.forEach(l.nodes(),function(c){i(l.node(c))}),r.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function o(l){r.forEach(l.nodes(),function(c){a(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,a),r.has(f,"y")&&a(f)})}function a(l){l.y=-l.y}function s(l){r.forEach(l.nodes(),function(c){u(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,u),r.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return _S}var wS,IL;function B$(){if(IL)return wS;IL=1;var r=nn();wS=e;function e(t){var n={},i=r.filter(t.nodes(),function(l){return!t.children(l).length}),o=r.max(r.map(i,function(l){return t.node(l).rank})),a=r.map(r.range(o+1),function(){return[]});function s(l){if(!r.has(n,l)){n[l]=!0;var c=t.node(l);a[c.rank].push(l),r.forEach(t.successors(l),s)}}var u=r.sortBy(i,function(l){return t.node(l).rank});return r.forEach(u,s),a}return wS}var ES,kL;function U$(){if(kL)return ES;kL=1;var r=nn();ES=e;function e(n,i){for(var o=0,a=1;a<i.length;++a)o+=t(n,i[a-1],i[a]);return o}function t(n,i,o){for(var a=r.zipObject(o,r.map(o,function(h,d){return d})),s=r.flatten(r.map(i,function(h){return r.sortBy(r.map(n.outEdges(h),function(d){return{pos:a[d.w],weight:n.edge(d).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var l=2*u-1;u-=1;var c=r.map(new Array(l),function(){return 0}),f=0;return r.forEach(s.forEach(function(h){var d=h.pos+u;c[d]+=h.weight;for(var v=0;d>0;)d%2&&(v+=c[d+1]),d=d-1>>1,c[d]+=h.weight;f+=h.weight*v})),f}return ES}var OS,DL;function q$(){if(DL)return OS;DL=1;var r=nn();OS=e;function e(t,n){return r.map(n,function(i){var o=t.inEdges(i);if(o.length){var a=r.reduce(o,function(s,u){var l=t.edge(u),c=t.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return OS}var xS,ML;function z$(){if(ML)return xS;ML=1;var r=nn();xS=e;function e(i,o){var a={};r.forEach(i,function(u,l){var c=a[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};r.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),r.forEach(o.edges(),function(u){var l=a[u.v],c=a[u.w];!r.isUndefined(l)&&!r.isUndefined(c)&&(c.indegree++,l.out.push(a[u.w]))});var s=r.filter(a,function(u){return!u.indegree});return t(s)}function t(i){var o=[];function a(l){return function(c){c.merged||(r.isUndefined(c.barycenter)||r.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();o.push(u),r.forEach(u.in.reverse(),a(u)),r.forEach(u.out,s(u))}return r.map(r.filter(o,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return xS}var SS,LL;function G$(){if(LL)return SS;LL=1;var r=nn(),e=go();SS=t;function t(o,a){var s=e.partition(o,function(p){return r.has(p,"barycenter")}),u=s.lhs,l=r.sortBy(s.rhs,function(p){return-p.i}),c=[],f=0,h=0,d=0;u.sort(i(!!a)),d=n(c,l,d),r.forEach(u,function(p){d+=p.vs.length,c.push(p.vs),f+=p.barycenter*p.weight,h+=p.weight,d=n(c,l,d)});var v={vs:r.flatten(c,!0)};return h&&(v.barycenter=f/h,v.weight=h),v}function n(o,a,s){for(var u;a.length&&(u=r.last(a)).i<=s;)a.pop(),o.push(u.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return SS}var TS,NL;function V$(){if(NL)return TS;NL=1;var r=nn(),e=q$(),t=z$(),n=G$();TS=i;function i(s,u,l,c){var f=s.children(u),h=s.node(u),d=h?h.borderLeft:void 0,v=h?h.borderRight:void 0,p={};d&&(f=r.filter(f,function(w){return w!==d&&w!==v}));var m=e(s,f);r.forEach(m,function(w){if(s.children(w.v).length){var x=i(s,w.v,l,c);p[w.v]=x,r.has(x,"barycenter")&&a(w,x)}});var y=t(m,l);o(y,p);var b=n(y,c);if(d&&(b.vs=r.flatten([d,b.vs,v],!0),s.predecessors(d).length)){var g=s.node(s.predecessors(d)[0]),_=s.node(s.predecessors(v)[0]);r.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+g.order+_.order)/(b.weight+2),b.weight+=2}return b}function o(s,u){r.forEach(s,function(l){l.vs=r.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function a(s,u){r.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return TS}var CS,jL;function W$(){if(jL)return CS;jL=1;var r=nn(),e=sa().Graph;CS=t;function t(i,o,a){var s=n(i),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return r.forEach(i.nodes(),function(l){var c=i.node(l),f=i.parent(l);(c.rank===o||c.minRank<=o&&o<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||s),r.forEach(i[a](l),function(h){var d=h.v===l?h.w:h.v,v=u.edge(d,l),p=r.isUndefined(v)?0:v.weight;u.setEdge(d,l,{weight:i.edge(h).weight+p})}),r.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[o],borderRight:c.borderRight[o]}))}),u}function n(i){for(var o;i.hasNode(o=r.uniqueId("_root")););return o}return CS}var PS,FL;function H$(){if(FL)return PS;FL=1;var r=nn();PS=e;function e(t,n,i){var o={},a;r.forEach(i,function(s){for(var u=t.parent(s),l,c;u;){if(l=t.parent(u),l?(c=o[l],o[l]=u):(c=a,a=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return PS}var AS,BL;function Y$(){if(BL)return AS;BL=1;var r=nn(),e=B$(),t=U$(),n=V$(),i=W$(),o=H$(),a=sa().Graph,s=go();AS=u;function u(h){var d=s.maxRank(h),v=l(h,r.range(1,d+1),"inEdges"),p=l(h,r.range(d-1,-1,-1),"outEdges"),m=e(h);f(h,m);for(var y=Number.POSITIVE_INFINITY,b,g=0,_=0;_<4;++g,++_){c(g%2?v:p,g%4>=2),m=s.buildLayerMatrix(h);var w=t(h,m);w<y&&(_=0,b=r.cloneDeep(m),y=w)}f(h,b)}function l(h,d,v){return r.map(d,function(p){return i(h,p,v)})}function c(h,d){var v=new a;r.forEach(h,function(p){var m=p.graph().root,y=n(p,m,v,d);r.forEach(y.vs,function(b,g){p.node(b).order=g}),o(p,v,y.vs)})}function f(h,d){r.forEach(d,function(v){r.forEach(v,function(p,m){h.node(p).order=m})})}return AS}var RS,UL;function X$(){if(UL)return RS;UL=1;var r=nn(),e=sa().Graph,t=go();RS={positionX:v,findType1Conflicts:n,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d};function n(y,b){var g={};function _(w,x){var E=0,O=0,C=w.length,A=r.last(x);return r.forEach(x,function(R,k){var D=o(y,R),L=D?y.node(D).order:C;(D||R===A)&&(r.forEach(x.slice(O,k+1),function(j){r.forEach(y.predecessors(j),function(q){var B=y.node(q),U=B.order;(U<E||L<U)&&!(B.dummy&&y.node(j).dummy)&&a(g,q,j)})}),O=k+1,E=L)}),x}return r.reduce(b,_),g}function i(y,b){var g={};if(y.nodeCount()>1e3)return g;function _(x,E,O,C,A){var R;r.forEach(r.range(E,O),function(k){R=x[k],y.node(R).dummy&&r.forEach(y.predecessors(R),function(D){var L=y.node(D);L.dummy&&(L.order<C||L.order>A)&&a(g,D,R)})})}function w(x,E){var O=-1,C,A=0;return r.forEach(E,function(R,k){if(y.node(R).dummy==="border"){var D=y.predecessors(R);D.length&&(C=y.node(D[0]).order,_(E,A,k,O,C),A=k,O=C)}_(E,A,E.length,C,x.length)}),E}return r.reduce(b,w),g}function o(y,b){if(y.node(b).dummy)return r.find(y.predecessors(b),function(g){return y.node(g).dummy})}function a(y,b,g){if(b>g){var _=b;b=g,g=_}var w=y[b];w||(y[b]=w={}),w[g]=!0}function s(y,b,g){if(b>g){var _=b;b=g,g=_}return r.has(y[b],g)}function u(y,b,g,_){var w={},x={},E={};return r.forEach(b,function(O){r.forEach(O,function(C,A){w[C]=C,x[C]=C,E[C]=A})}),r.forEach(b,function(O){var C=-1;r.forEach(O,function(A){var R=_(A);if(R.length){R=r.sortBy(R,function(q){return E[q]});for(var k=(R.length-1)/2,D=Math.floor(k),L=Math.ceil(k);D<=L;++D){var j=R[D];x[A]===A&&C<E[j]&&!s(g,A,j)&&(x[j]=A,x[A]=w[A]=w[j],C=E[j])}}})}),{root:w,align:x}}function l(y,b,g,_,w){var x={},E=c(y,b,g,w),O=w?"borderLeft":"borderRight";function C(k,D){for(var L=E.nodes(),j=L.pop(),q={};j;)q[j]?k(j):(q[j]=!0,L.push(j),L=L.concat(D(j))),j=L.pop()}function A(k){x[k]=E.inEdges(k).reduce(function(D,L){return Math.max(D,x[L.v]+E.edge(L))},0)}function R(k){var D=E.outEdges(k).reduce(function(j,q){return Math.min(j,x[q.w]-E.edge(q))},Number.POSITIVE_INFINITY),L=y.node(k);D!==Number.POSITIVE_INFINITY&&L.borderType!==O&&(x[k]=Math.max(x[k],D))}return C(A,E.predecessors.bind(E)),C(R,E.successors.bind(E)),r.forEach(_,function(k){x[k]=x[g[k]]}),x}function c(y,b,g,_){var w=new e,x=y.graph(),E=p(x.nodesep,x.edgesep,_);return r.forEach(b,function(O){var C;r.forEach(O,function(A){var R=g[A];if(w.setNode(R),C){var k=g[C],D=w.edge(k,R);w.setEdge(k,R,Math.max(E(y,A,C),D||0))}C=A})}),w}function f(y,b){return r.minBy(r.values(b),function(g){var _=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY;return r.forIn(g,function(x,E){var O=m(y,E)/2;_=Math.max(x+O,_),w=Math.min(x-O,w)}),_-w})}function h(y,b){var g=r.values(b),_=r.min(g),w=r.max(g);r.forEach(["u","d"],function(x){r.forEach(["l","r"],function(E){var O=x+E,C=y[O],A;if(C!==b){var R=r.values(C);A=E==="l"?_-r.min(R):w-r.max(R),A&&(y[O]=r.mapValues(C,function(k){return k+A}))}})})}function d(y,b){return r.mapValues(y.ul,function(g,_){if(b)return y[b.toLowerCase()][_];var w=r.sortBy(r.map(y,_));return(w[1]+w[2])/2})}function v(y){var b=t.buildLayerMatrix(y),g=r.merge(n(y,b),i(y,b)),_={},w;r.forEach(["u","d"],function(E){w=E==="u"?b:r.values(b).reverse(),r.forEach(["l","r"],function(O){O==="r"&&(w=r.map(w,function(k){return r.values(k).reverse()}));var C=(E==="u"?y.predecessors:y.successors).bind(y),A=u(y,w,g,C),R=l(y,w,A.root,A.align,O==="r");O==="r"&&(R=r.mapValues(R,function(k){return-k})),_[E+O]=R})});var x=f(y,_);return h(_,x),d(_,y.graph().align)}function p(y,b,g){return function(_,w,x){var E=_.node(w),O=_.node(x),C=0,A;if(C+=E.width/2,r.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":A=-E.width/2;break;case"r":A=E.width/2;break}if(A&&(C+=g?A:-A),A=0,C+=(E.dummy?b:y)/2,C+=(O.dummy?b:y)/2,C+=O.width/2,r.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":A=O.width/2;break;case"r":A=-O.width/2;break}return A&&(C+=g?A:-A),A=0,C}}function m(y,b){return y.node(b).width}return RS}var IS,qL;function $$(){if(qL)return IS;qL=1;var r=nn(),e=go(),t=X$().positionX;IS=n;function n(o){o=e.asNonCompoundGraph(o),i(o),r.forEach(t(o),function(a,s){o.node(s).x=a})}function i(o){var a=e.buildLayerMatrix(o),s=o.graph().ranksep,u=0;r.forEach(a,function(l){var c=r.max(r.map(l,function(f){return o.node(f).height}));r.forEach(l,function(f){o.node(f).y=u+c/2}),u+=c+s})}return IS}var kS,zL;function K$(){if(zL)return kS;zL=1;var r=nn(),e=I$(),t=k$(),n=M$(),i=go().normalizeRanks,o=L$(),a=go().removeEmptyRanks,s=N$(),u=j$(),l=F$(),c=Y$(),f=$$(),h=go(),d=sa().Graph;kS=v;function v($,K){var ie=K&&K.debugTiming?h.time:h.notime,ae=ie("layout",function(){return ae=ie("  buildLayoutGraph",function(){return C($)}),ie("  runLayout",function(){p(ae,ie)}),ie("  updateInputGraph",function(){m($,ae)}),ae});return ae}function p($,K){K("    makeSpaceForEdgeLabels",function(){A($)}),K("    removeSelfEdges",function(){W($)}),K("    acyclic",function(){e.run($)}),K("    nestingGraph.run",function(){s.run($)}),K("    rank",function(){n(h.asNonCompoundGraph($))}),K("    injectEdgeLabelProxies",function(){R($)}),K("    removeEmptyRanks",function(){a($)}),K("    nestingGraph.cleanup",function(){s.cleanup($)}),K("    normalizeRanks",function(){i($)}),K("    assignRankMinMax",function(){k($)}),K("    removeEdgeLabelProxies",function(){D($)}),K("    normalize.run",function(){t.run($)}),K("    parentDummyChains",function(){o($)}),K("    addBorderSegments",function(){u($)}),K("    order",function(){c($)}),K("    insertSelfEdges",function(){H($)}),K("    adjustCoordinateSystem",function(){l.adjust($)}),K("    position",function(){f($)}),K("    positionSelfEdges",function(){Y($)}),K("    removeBorderNodes",function(){U($)}),K("    normalize.undo",function(){t.undo($)}),K("    fixupEdgeLabelCoords",function(){q($)}),K("    undoCoordinateSystem",function(){l.undo($)}),K("    translateGraph",function(){L($)}),K("    assignNodeIntersects",function(){j($)}),K("    reversePoints",function(){B($)}),K("    acyclic.undo",function(){e.undo($)})}function m($,K){r.forEach($.nodes(),function(ie){var ae=$.node(ie),le=K.node(ie);ae&&(ae.x=le.x,ae.y=le.y,K.children(ie).length&&(ae.width=le.width,ae.height=le.height))}),r.forEach($.edges(),function(ie){var ae=$.edge(ie),le=K.edge(ie);ae.points=le.points,r.has(le,"x")&&(ae.x=le.x,ae.y=le.y)}),$.graph().width=K.graph().width,$.graph().height=K.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],_=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function C($){var K=new d({multigraph:!0,compound:!0}),ie=ce($.graph());return K.setGraph(r.merge({},b,Z(ie,y),r.pick(ie,g))),r.forEach($.nodes(),function(ae){var le=ce($.node(ae));K.setNode(ae,r.defaults(Z(le,_),w)),K.setParent(ae,$.parent(ae))}),r.forEach($.edges(),function(ae){var le=ce($.edge(ae));K.setEdge(ae,r.merge({},E,Z(le,x),r.pick(le,O)))}),K}function A($){var K=$.graph();K.ranksep/=2,r.forEach($.edges(),function(ie){var ae=$.edge(ie);ae.minlen*=2,ae.labelpos.toLowerCase()!=="c"&&(K.rankdir==="TB"||K.rankdir==="BT"?ae.width+=ae.labeloffset:ae.height+=ae.labeloffset)})}function R($){r.forEach($.edges(),function(K){var ie=$.edge(K);if(ie.width&&ie.height){var ae=$.node(K.v),le=$.node(K.w),te={rank:(le.rank-ae.rank)/2+ae.rank,e:K};h.addDummyNode($,"edge-proxy",te,"_ep")}})}function k($){var K=0;r.forEach($.nodes(),function(ie){var ae=$.node(ie);ae.borderTop&&(ae.minRank=$.node(ae.borderTop).rank,ae.maxRank=$.node(ae.borderBottom).rank,K=r.max(K,ae.maxRank))}),$.graph().maxRank=K}function D($){r.forEach($.nodes(),function(K){var ie=$.node(K);ie.dummy==="edge-proxy"&&($.edge(ie.e).labelRank=ie.rank,$.removeNode(K))})}function L($){var K=Number.POSITIVE_INFINITY,ie=0,ae=Number.POSITIVE_INFINITY,le=0,te=$.graph(),ee=te.marginx||0,re=te.marginy||0;function he(ve){var _e=ve.x,Oe=ve.y,Pe=ve.width,me=ve.height;K=Math.min(K,_e-Pe/2),ie=Math.max(ie,_e+Pe/2),ae=Math.min(ae,Oe-me/2),le=Math.max(le,Oe+me/2)}r.forEach($.nodes(),function(ve){he($.node(ve))}),r.forEach($.edges(),function(ve){var _e=$.edge(ve);r.has(_e,"x")&&he(_e)}),K-=ee,ae-=re,r.forEach($.nodes(),function(ve){var _e=$.node(ve);_e.x-=K,_e.y-=ae}),r.forEach($.edges(),function(ve){var _e=$.edge(ve);r.forEach(_e.points,function(Oe){Oe.x-=K,Oe.y-=ae}),r.has(_e,"x")&&(_e.x-=K),r.has(_e,"y")&&(_e.y-=ae)}),te.width=ie-K+ee,te.height=le-ae+re}function j($){r.forEach($.edges(),function(K){var ie=$.edge(K),ae=$.node(K.v),le=$.node(K.w),te,ee;ie.points?(te=ie.points[0],ee=ie.points[ie.points.length-1]):(ie.points=[],te=le,ee=ae),ie.points.unshift(h.intersectRect(ae,te)),ie.points.push(h.intersectRect(le,ee))})}function q($){r.forEach($.edges(),function(K){var ie=$.edge(K);if(r.has(ie,"x"))switch((ie.labelpos==="l"||ie.labelpos==="r")&&(ie.width-=ie.labeloffset),ie.labelpos){case"l":ie.x-=ie.width/2+ie.labeloffset;break;case"r":ie.x+=ie.width/2+ie.labeloffset;break}})}function B($){r.forEach($.edges(),function(K){var ie=$.edge(K);ie.reversed&&ie.points.reverse()})}function U($){r.forEach($.nodes(),function(K){if($.children(K).length){var ie=$.node(K),ae=$.node(ie.borderTop),le=$.node(ie.borderBottom),te=$.node(r.last(ie.borderLeft)),ee=$.node(r.last(ie.borderRight));ie.width=Math.abs(ee.x-te.x),ie.height=Math.abs(le.y-ae.y),ie.x=te.x+ie.width/2,ie.y=ae.y+ie.height/2}}),r.forEach($.nodes(),function(K){$.node(K).dummy==="border"&&$.removeNode(K)})}function W($){r.forEach($.edges(),function(K){if(K.v===K.w){var ie=$.node(K.v);ie.selfEdges||(ie.selfEdges=[]),ie.selfEdges.push({e:K,label:$.edge(K)}),$.removeEdge(K)}})}function H($){var K=h.buildLayerMatrix($);r.forEach(K,function(ie){var ae=0;r.forEach(ie,function(le,te){var ee=$.node(le);ee.order=te+ae,r.forEach(ee.selfEdges,function(re){h.addDummyNode($,"selfedge",{width:re.label.width,height:re.label.height,rank:ee.rank,order:te+ ++ae,e:re.e,label:re.label},"_se")}),delete ee.selfEdges})})}function Y($){r.forEach($.nodes(),function(K){var ie=$.node(K);if(ie.dummy==="selfedge"){var ae=$.node(ie.e.v),le=ae.x+ae.width/2,te=ae.y,ee=ie.x-le,re=ae.height/2;$.setEdge(ie.e,ie.label),$.removeNode(K),ie.label.points=[{x:le+2*ee/3,y:te-re},{x:le+5*ee/6,y:te-re},{x:le+ee,y:te},{x:le+5*ee/6,y:te+re},{x:le+2*ee/3,y:te+re}],ie.label.x=ie.x,ie.label.y=ie.y}})}function Z($,K){return r.mapValues(r.pick($,K),Number)}function ce($){var K={};return r.forEach($,function(ie,ae){K[ae.toLowerCase()]=ie}),K}return kS}var DS,GL;function Z$(){if(GL)return DS;GL=1;var r=nn(),e=go(),t=sa().Graph;DS={debugOrdering:n};function n(i){var o=e.buildLayerMatrix(i),a=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),r.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),r.forEach(o,function(s,u){var l="layer"+u;a.setNode(l,{rank:"same"}),r.reduce(s,function(c,f){return a.setEdge(c,f,{style:"invis"}),f})}),a}return DS}var MS,VL;function Q$(){return VL||(VL=1,MS="0.8.14"),MS}var LS,WL;function J$(){return WL||(WL=1,LS={graphlib:sa(),layout:K$(),debug:Z$(),util:{time:go().time,notime:go().notime},version:Q$()}),LS}var eK=J$();const iF=G0(eK);var NS,HL;function tK(){if(HL)return NS;HL=1;var r=function(){};return r.prototype={fit:function(e){var t,n,i,o=e.length,a,s=o>0?e[0].width:0,u=o>0?e[0].height:0;for(this.root={x:0,y:0,width:s,height:u},t=0;t<o;t++)i=e[t],(n=this.findNode(this.root,i.width,i.height))?(a=this.splitNode(n,i.width,i.height),i.x=a.x,i.y=a.y):(a=this.growNode(i.width,i.height),i.x=a.x,i.y=a.y)},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.width&&n<=e.height?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,width:e.width,height:e.height-n},e.right={x:e.x+t,y:e.y,width:e.width-t,height:n},e},growNode:function(e,t){var n=e<=this.root.width,i=t<=this.root.height,o=i&&this.root.height>=this.root.width+e,a=n&&this.root.width>=this.root.height+t;return o?this.growRight(e,t):a?this.growDown(e,t):i?this.growRight(e,t):n?this.growDown(e,t):null},growRight:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null},growDown:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+t,down:{x:0,y:this.root.height,width:this.root.width,height:t},right:this.root};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null}},NS=r,NS}var jS,YL;function rK(){if(YL)return jS;YL=1;var r=tK();return jS=function(e,t){t=t||{};var n=new r,i=t.inPlace||!1,o=e.map(function(l){return i?l:{width:l.width,height:l.height,item:l}});o=o.sort(function(l,c){return c.width*c.height-l.width*l.height}),n.fit(o);var a=o.reduce(function(l,c){return Math.max(l,c.x+c.width)},0),s=o.reduce(function(l,c){return Math.max(l,c.y+c.height)},0),u={width:a,height:s};return i||(u.items=o),u},jS}var nK=rK();const iK=G0(nK);var oK=sa();const aK=G0(oK),sK="tight-tree",Gs=100,oF="up",D2="down",uK="left",aF="right",lK={[oF]:"BT",[D2]:"TB",[uK]:"RL",[aF]:"LR"},cK="bin",fK=25,hK=1/.38,dK=r=>r===oF||r===D2,vK=r=>r===D2||r===aF,FS=r=>{let e=null,t=null,n=null,i=null,o=null,a=null,s=null,u=null;for(const l of r.nodes()){const c=r.node(l);(o===null||c.x<o)&&(o=c.x),(a===null||c.y<a)&&(a=c.y),(s===null||c.x>s)&&(s=c.x),(u===null||c.y>u)&&(u=c.y);const f=Math.ceil(c.width/2);(e===null||c.x-f<e)&&(e=c.x-f),(t===null||c.y-f<t)&&(t=c.y-f),(n===null||c.x+f>n)&&(n=c.x+f),(i===null||c.y+f>i)&&(i=c.y+f)}return{minX:e,minY:t,maxX:n,maxY:i,minCenterX:o,minCenterY:a,maxCenterX:s,maxCenterY:u,width:n-e,height:i-t,xOffset:o-e,yOffset:a-t}},sF=r=>{const e=new iF.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel(()=>({})),e.graph().nodesep=75*r,e.graph().ranksep=75*r,e},XL=(r,e,t)=>{const{rank:n}=t.node(r);let i=null,o=null;for(const a of e){const{rank:s}=t.node(a);if(!(a===r||s>=n))if(s===n-1){i=s,o=a;break}else(i===null&&o===null||s>i)&&(i=s,o=a)}return o},pK=(r,e)=>{let t=XL(r,e.predecessors(r),e);return t===null&&(t=XL(r,e.successors(r),e)),t},gK=(r,e)=>{const t=[],n=aK.alg.components(r);if(n.length>1)for(const i of n){const o=sF(e);for(const a of i){const s=r.node(a);o.setNode(a,{width:s.width,height:s.height});const u=r.outEdges(a);if(u)for(const l of u)o.setEdge(l.v,l.w)}t.push(o)}else t.push(r);return t},$L=(r,e,t)=>{r.graph().ranker=sK,r.graph().rankdir=lK[e];const n=iF.layout(r);for(const i of n.nodes()){const o=pK(i,n);o!==null&&(t[i]=o)}},BS=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),yK=r=>{const e=[r[0]];let t={p1:r[0],p2:r[1]},n=BS(t.p1,t.p2);for(let i=2;i<r.length;i++){let o={p1:r[i-1],p2:r[i]},a=BS(o.p1,o.p2);const s={p1:t.p1,p2:o.p2},u=BS(s.p1,s.p2);a+n-u<.1&&(e.pop(),o=s,a=u),e.push(o.p1),t=o,n=a}return e.push(r[r.length-1]),e},mK=(r,e,t,n,i,o,a=1)=>{const s=sF(a),u={},l={x:0,y:0},c=r.length;for(const g of r){const _=t[g.id];l.x+=(_==null?void 0:_.x)||0,l.y+=(_==null?void 0:_.y)||0;const w=(g.size||fK)*hK*a;s.setNode(g.id,{width:w,height:w})}const f=c?[l.x/c,l.y/c]:[0,0],h={};for(const g of n)if(e[g.from]&&e[g.to]&&g.from!==g.to){const _=g.from<g.to?`${g.from}-${g.to}`:`${g.to}-${g.from}`;h[_]||(h[_]=1,s.setEdge(g.from,g.to))}const d=gK(s,a);if(d.length>1){d.forEach(E=>$L(E,i,u));const g=dK(i),_=vK(i),w=d.filter(E=>E.nodeCount()===1),x=d.filter(E=>E.nodeCount()!==1);if(o===cK){x.sort((B,U)=>U.nodeCount()-B.nodeCount());const C=g?({width:B,height:U,...W})=>({...W,width:B+Gs,height:U+Gs}):({width:B,height:U,...W})=>({...W,width:U+Gs,height:B+Gs}),A=x.map(FS).map(C),R=w.map(FS).map(C),k=A.concat(R);iK(k,{inPlace:!0});const D=Math.floor(Gs/2),L=g?"x":"y",j=g?"y":"x";if(!_){const B=g?"y":"x",U=g?"height":"width",W=k.reduce((Y,Z)=>Y===null?Z[B]:Math.min(Z[B],Y[U]||0),null),H=k.reduce((Y,Z)=>Y===null?Z[B]+Z[U]:Math.max(Z[B]+Z[U],Y[U]||0),null);k.forEach(Y=>{Y[B]=W+(H-(Y[B]+Y[U]))})}const q=(B,U)=>{for(const W of B.nodes()){const H=B.node(W),Y=s.node(W);Y.x=H.x-U.xOffset+U[L]+D,Y.y=H.y-U.yOffset+U[j]+D}};for(let B=0;B<x.length;B++){const U=x[B],W=A[B];q(U,W)}for(let B=0;B<w.length;B++){const U=w[B],W=R[B];q(U,W)}}else{x.sort(_?(U,W)=>W.nodeCount()-U.nodeCount():(U,W)=>U.nodeCount()-W.nodeCount());const E=x.map(FS),O=w.reduce((U,W)=>U+s.node(W.nodes()[0]).width,0),C=w.reduce((U,W)=>Math.max(U,s.node(W.nodes()[0]).width),0),A=w.length>0?O+(w.length-1)*Gs:0,R=E.reduce((U,{width:W})=>Math.max(U,W),0),k=Math.max(R,A),D=E.reduce((U,{height:W})=>Math.max(U,W),0),L=Math.max(D,A);let j=0;const q=()=>{for(let U=0;U<x.length;U++){const W=x[U],H=E[U],Y=Math.floor(g?(k-H.width)/2:(L-H.height)/2);for(const Z of W.nodes()){const ce=W.node(Z),$=s.node(Z);g?($.x=ce.x-H.minX+Y,$.y=ce.y-H.minY+j):($.x=ce.x-H.minX+j,$.y=ce.y-H.minY+Y)}for(const Z of W.edges()){const ce=W.edge(Z),$=s.edge(Z);ce.points&&ce.points.length>3&&($.points=ce.points.map(({x:K,y:ie})=>({x:K-H.minX+(g?Y:j),y:ie-H.minY+(g?j:Y)})))}j+=(g?H.height:H.width)+Gs}},B=()=>{const U=Math.floor(((g?k:L)-A)/2);j+=Math.floor(C/2);let W=U;for(const H of w){const Y=H.nodes()[0],Z=s.node(Y);g?(Z.x=W+Math.floor(Z.width/2),Z.y=j):(Z.x=j,Z.y=W+Math.floor(Z.width/2)),W+=Gs+Z.width}j=C+Gs};_?(q(),B()):(B(),q())}}else $L(s,i,u);l.x=0,l.y=0;const v={};for(const g of s.nodes()){const _=s.node(g);l.x+=_.x||0,l.y+=_.y||0,v[g]={x:_.x,y:_.y}}const p=c?[l.x/c,l.y/c]:[0,0],m=f[0]-p[0],y=f[1]-p[1];for(const g in v)v[g].x+=m,v[g].y+=y;const b={};for(const g of s.edges()){const _=s.edge(g);if(_.points&&_.points.length>3){const w=yK(_.points);for(const x of w)x.x+=m,x.y+=y;b[`${g.v}-${g.w}`]={points:[...w],from:{x:v[g.v].x,y:v[g.v].y},to:{x:v[g.w].x,y:v[g.w].y}},b[`${g.w}-${g.v}`]={points:w.reverse(),from:{x:v[g.w].x,y:v[g.w].y},to:{x:v[g.v].x,y:v[g.v].y}}}}return{positions:v,parents:u,waypoints:b}};class bK{start(){}postMessage(e){const{nodes:t,nodeIds:n,idToPosition:i,rels:o,direction:a,packing:s,pixelRatio:u,forcedDelay:l=0}=e,c=mK(t,n,i,o,a,s,u);l?setTimeout(()=>{this.onmessage({data:c})},l):this.onmessage({data:c})}onmessage(){}close(){}}const _K={port:new bK},wK=()=>new SharedWorker(new URL("/assets/HierarchicalLayout.worker-Cgg-5Z3q.js",import.meta.url),{type:"module",name:"HierarchicalLayout"}),EK=Object.freeze(Object.defineProperty({__proto__:null,coseBilkentLayoutFallbackWorker:QH,createCoseBilkentLayoutWorker:JH,createHierarchicalLayoutWorker:wK,hierarchicalLayoutFallbackWorker:_K},Symbol.toStringTag,{value:"Module"}));var KT=function(r,e){return KT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},KT(r,e)};function yo(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");KT(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ke.apply(this,arguments)};function uF(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function mt(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function bt(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Vn(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}function ZT(r,e,t){e.split&&(e=e.split("."));for(var n=0,i=e.length,o=r,a,s;n<i&&(s=""+e[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)o=o[s]=n===i?t:typeof(a=o[s])==typeof e?a:e[n]*0!==0||~(""+e[n]).indexOf(".")?{}:[]}var OK=function(r,e){return Object.keys(r).filter(function(t){return e(t,r[t])}).reduce(function(t,n){return t[n]=r[n],t},{})},Qc=(function(r){yo(e,r);function e(t,n){var i=r.call(this,"".concat(t," ").concat(n))||this;return i.field=t,i}return e})(Error);function wl(r){return typeof r=="string"}function QT(r){return typeof r=="number"}function Kh(r){return typeof r=="function"}function xK(r){return r!=null}function Ca(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var M2="is not a string",L2="is not an object",SK="is nil";function TK(r){if(!xK(r))throw new Qc("Event",SK);if(typeof r!="object")throw new Qc("Event",L2)}function CK(r){if(!wl(r.type))throw new Qc(".type",M2)}function PK(r){if(!wl(r.event))throw new Qc(".event",M2)}function AK(r){if(!Ca(r.properties))throw new Qc(".properties",L2)}function RK(r){if(!Ca(r.traits))throw new Qc(".traits",L2)}function IK(r){if(!wl(r.messageId))throw new Qc(".messageId",M2)}function kK(r){TK(r),CK(r),IK(r),r.type==="track"&&(PK(r),AK(r)),["group","identify"].includes(r.type)&&RK(r)}var DK=(function(){function r(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:(function(){}),this.onFinishedEvent=(n=e.onFinishedEvent)!==null&&n!==void 0?n:(function(){})}return r})(),MK=(function(){function r(e){this.settings=new DK(e)}return r.prototype.track=function(e,t,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(Ke(Ke({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:Ke({},n),integrations:Ke({},i)}))},r.prototype.page=function(e,t,n,i,o){var a;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:Ke({},n),options:Ke({},i),integrations:Ke({},o)};return e!==null&&(s.category=e,s.properties=(a=s.properties)!==null&&a!==void 0?a:{},s.properties.category=e),t!==null&&(s.name=t),this.normalize(Ke(Ke({},this.baseEvent()),s))},r.prototype.screen=function(e,t,n,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var a={type:"screen",properties:Ke({},n),options:Ke({},i),integrations:Ke({},o)};return e!==null&&(a.category=e),t!==null&&(a.name=t),this.normalize(Ke(Ke({},this.baseEvent()),a))},r.prototype.identify=function(e,t,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(Ke(Ke({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:Ke({},n),integrations:i}))},r.prototype.group=function(e,t,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(Ke(Ke({},this.baseEvent()),{type:"group",traits:t??{},options:Ke({},n),integrations:Ke({},i),groupId:e}))},r.prototype.alias=function(e,t,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var o={userId:e,type:"alias",options:Ke({},n),integrations:Ke({},i)};return t!==null&&(o.previousId=t),e===void 0?this.normalize(Ke(Ke({},o),this.baseEvent())):this.normalize(Ke(Ke({},this.baseEvent()),o))},r.prototype.baseEvent=function(){return{integrations:{},options:{}}},r.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),o=(t=e.context)!==null&&t!==void 0?t:{},a={};return i.forEach(function(s){s!=="context"&&(n.includes(s)?ZT(a,s,e[s]):ZT(o,s,e[s]))}),[o,a]},r.prototype.normalize=function(e){var t,n,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(h,d){var v,p;return Ke(Ke({},h),(v={},v[d]=!!(!((p=e.integrations)===null||p===void 0)&&p[d]),v))},{});e.options=OK(e.options||{},function(h,d){return d!==void 0});var o=Ke(Ke({},i),(n=e.options)===null||n===void 0?void 0:n.integrations),a=e.options?this.context(e.options):[],s=a[0],u=a[1],l=e.options,c=uF(e,["options"]),f=Ke(Ke(Ke(Ke({timestamp:new Date},c),{context:s,integrations:o}),u),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),kK(f),f},r})();function LK(r,e){return new Promise(function(t,n){var i=setTimeout(function(){n(Error("Promise timed out"))},e);r.then(function(o){return clearTimeout(i),t(o)}).catch(n)})}function NK(r){return new Promise(function(e){return setTimeout(e,r)})}function jK(r,e,t){var n=function(){try{return Promise.resolve(e(r))}catch(i){return Promise.reject(i)}};return NK(t).then(function(){return LK(n(),1e3)}).catch(function(i){r==null||r.log("warn","Callback Error",{error:i}),r==null||r.stats.increment("callback_error")}).then(function(){return r})}var lF=function(){var r,e,t=!1,n=new Promise(function(i,o){r=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,i.apply(void 0,a)},e=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,o.apply(void 0,a)}});return{resolve:r,reject:e,promise:n,isSettled:function(){return t}}},N2=(function(){function r(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e==null?void 0:e.maxListeners)!==null&&t!==void 0?t:10}return r.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},r.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},r.prototype.once=function(e,t){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(e,i),t.apply(n,o)};return this.on(e,i),this},r.prototype.off=function(e,t){var n,i=(n=this.callbacks[e])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==t});return this.callbacks[e]=o,this},r.prototype.emit=function(e){for(var t=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[e])!==null&&n!==void 0?n:[];return a.forEach(function(s){s.apply(t,i)}),this},r})();function FK(r){var e=Math.random()+1,t=r.minTimeout,n=t===void 0?500:t,i=r.factor,o=i===void 0?2:i,a=r.attempt,s=r.maxTimeout,u=s===void 0?1/0:s;return Math.min(e*n*Math.pow(o,a),u)}var cF="onRemoveFromFuture",j2=(function(r){yo(e,r);function e(t,n,i){var o=r.call(this)||this;return o.future=[],o.maxAttempts=t,o.queue=n,o.seen=i??{},o}return e.prototype.push=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var s=t.updateAttempts(a);return s>t.maxAttempts||t.includes(a)?!1:(t.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,s){return t.getAttempts(a)-t.getAttempts(s)}),o},e.prototype.pushWithBackoff=function(t,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(t)===0)return this.push(t)[0];var o=this.updateAttempts(t);if(o>this.maxAttempts||this.includes(t))return!1;var a=FK({attempt:o-1});return n>0&&a<n&&(a=n),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(s){return s.id!==t.id}),i.emit(cF)},a),this.future.push(t),!0},e.prototype.getAttempts=function(t){var n;return(n=this.seen[t.id])!==null&&n!==void 0?n:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(n){return n.id===t.id})||!!this.future.find(function(n){return n.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e})(N2),Gc=256,n0=[],lm;for(;Gc--;)n0[Gc]=(Gc+256).toString(16).substring(1);function F2(){var r=0,e,t="";if(!lm||Gc+16>256){for(lm=Array(r=256);r--;)lm[r]=256*Math.random()|0;r=Gc=0}for(;r<16;r++)e=lm[Gc+r],r==6?t+=n0[e&15|64]:r==8?t+=n0[e&63|128]:t+=n0[e],r&1&&r>1&&r<11&&(t+="-");return Gc++,t}var BK=(function(){function r(){this._logs=[]}return r.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(r.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),r.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,n){var i,o,a,s=Ke(Ke({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var u=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return t[u]&&(u="".concat(u,"-").concat(Math.random())),Ke(Ke({},t),(i={},i[u]=s,i))},{});console.table&&console.table(e)}else this.logs.forEach(function(t){var n=t.level,i=t.message,o=t.extras;n==="info"||n==="debug"||console[n](i,o??"")});this._logs=[]},r})(),UK=function(r){var e={gauge:"g",counter:"c"};return e[r]},fF=(function(){function r(){this.metrics=[]}return r.prototype.increment=function(e,t,n){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:n??[],type:"counter",timestamp:Date.now()})},r.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:n??[],type:"gauge",timestamp:Date.now()})},r.prototype.flush=function(){var e=this.metrics.map(function(t){return Ke(Ke({},t),{tags:t.tags.join(",")})});console.table&&console.table(e),this.metrics=[]},r.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:UK(e.type),e:e.timestamp}})},r})(),qK=(function(r){yo(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e})(fF),ad=(function(){function r(e){var t,n,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(n=e.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return r})(),P0=(function(){function r(e,t,n,i){t===void 0&&(t=F2()),n===void 0&&(n=new qK),i===void 0&&(i=new BK),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=n}return r.system=function(){},r.prototype.isSame=function(e){return e.id===this.id},r.prototype.cancel=function(e){throw e||new ad({reason:"Context Cancel"})},r.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.updateEvent=function(e,t){var n;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return ZT(this.event,e,t),this.event},r.prototype.failedDelivery=function(){return this._failedDelivery},r.prototype.setFailedDelivery=function(e){this._failedDelivery=e},r.prototype.logs=function(){return this.logger.logs},r.prototype.flush=function(){this.logger.flush(),this.stats.flush()},r.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},r})();function zK(r,e){var t={};return r.forEach(function(n){var i,o=void 0;{var a=n[e];o=typeof a!="string"?JSON.stringify(a):a}o!==void 0&&(t[o]=Vn(Vn([],(i=t[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),t}var GK=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},VK=function(){var r,e,t=0;return{done:function(){return r},run:function(n){var i=n();return GK(i)&&(++t===1&&(r=new Promise(function(o){return e=o})),i.finally(function(){return--t===0&&e()})),i}}};function WK(r){return mt(this,void 0,void 0,function(){var e;return bt(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function cp(r,e){r.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),n=e[r.event.type];if(n===void 0)return Promise.resolve(r);var i=WK(function(){return n.apply(e,[r])}).then(function(o){var a=new Date().getTime()-t;return o.stats.gauge("plugin_time",a,["plugin:".concat(e.name)]),o}).catch(function(o){if(o instanceof ad&&o.type==="middleware_cancellation")throw o;return o instanceof ad?(r.log("warn",o.type,{plugin:e.name,error:o}),o):(r.log("error","plugin Error",{plugin:e.name,error:o}),r.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),o)});return i}function HK(r,e){return cp(r,e).then(function(t){if(t instanceof P0)return t;r.log("debug","Context canceled"),r.stats.increment("context_canceled"),r.cancel(t)})}var YK=(function(r){yo(e,r);function e(t){var n=r.call(this)||this;return n.criticalTasks=VK(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=t,n.queue.on(cF,function(){n.scheduleFlush(0)}),n}return e.prototype.register=function(t,n,i){return mt(this,void 0,void 0,function(){var o,a,s=this;return bt(this,function(u){switch(u.label){case 0:return this.plugins.push(n),o=function(l){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,l),t.log("warn","Failed to load destination",{plugin:n.name,error:l}),s.plugins=s.plugins.filter(function(c){return c!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(t,i).catch(o),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return u.sent(),[3,4];case 3:return a=u.sent(),o(a),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,n,i){return mt(this,void 0,void 0,function(){var o;return bt(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return o=a.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return mt(this,void 0,void 0,function(){var n;return bt(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]})})},e.prototype.subscribeToDelivery=function(t){return mt(this,void 0,void 0,function(){var n=this;return bt(this,function(i){return[2,new Promise(function(o){var a=function(s,u){s.isSame(t)&&(n.off("flush",a),o(s))};n.on("flush",a)})]})})},e.prototype.dispatchSingle=function(t){return mt(this,void 0,void 0,function(){var n=this;return bt(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(o){var a=n.enqueuRetry(o,t);return a?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:o}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var n=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return mt(this,void 0,void 0,function(){var n,i,o,a;return bt(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=s.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw o=s.sent(),a=o,t.log("error","Failed to deliver",a),this.emit("delivery_failure",t,a),t.stats.increment("delivery_failed"),o;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,n){var i=!(t instanceof ad)||t.retry;return i?this.queue.pushWithBackoff(n):!1},e.prototype.flush=function(){return mt(this,void 0,void 0,function(){var t,n,i;return bt(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=o.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,t),i||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var n=this.plugins.filter(function(d){var v,p,m;if(d.type!=="destination"&&d.name!=="Segment.io")return!0;var y=void 0;return(v=d.alternativeNames)===null||v===void 0||v.forEach(function(b){t[b]!==void 0&&(y=t[b])}),(m=(p=t[d.name])!==null&&p!==void 0?p:y)!==null&&m!==void 0?m:(d.name==="Segment.io"?!0:t.All)!==!1}),i=zK(n,"type"),o=i.before,a=o===void 0?[]:o,s=i.enrichment,u=s===void 0?[]:s,l=i.destination,c=l===void 0?[]:l,f=i.after,h=f===void 0?[]:f;return{before:a,enrichment:u,destinations:c,after:h}},e.prototype.flushOne=function(t){var n,i;return mt(this,void 0,void 0,function(){var o,a,s,u,l,c,v,f,h,d,v,p,m,y,b;return bt(this,function(g){switch(g.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),o=this.availableExtensions((n=t.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,s=o.enrichment,u=0,l=a,g.label=1;case 1:return u<l.length?(c=l[u],[4,HK(t,c)]):[3,4];case 2:v=g.sent(),v instanceof P0&&(t=v),this.emit("message_enriched",t,c),g.label=3;case 3:return u++,[3,1];case 4:f=0,h=s,g.label=5;case 5:return f<h.length?(d=h[f],[4,cp(t,d)]):[3,8];case 6:v=g.sent(),v instanceof P0&&(t=v),this.emit("message_enriched",t,d),g.label=7;case 7:return f++,[3,5];case 8:return p=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),m=p.destinations,y=p.after,[4,new Promise(function(_,w){setTimeout(function(){var x=m.map(function(E){return cp(t,E)});Promise.all(x).then(_).catch(w)},0)})];case 9:return g.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),b=y.map(function(_){return cp(t,_)}),[4,Promise.all(b)];case 10:return g.sent(),[2,t]}})})},e})(N2),XK=function(r,e){var t=Date.now()-r;return Math.max((e??300)-t,0)};function $K(r,e,t,n){return mt(this,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return t.emit("dispatch_start",r),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(r)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(r)];case 3:o=a.sent(),a.label=4;case 4:return n!=null&&n.callback?[4,jK(o,n.callback,XK(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n!=null&&n.debug&&o.flush(),[2,o]}})})}function KK(r,e,t,n){var i,o=[r,e,t,n],a=Ca(r)?r.event:r;if(!a||!wl(a))throw new Error("Event missing");var s=Ca(r)?(i=r.properties)!==null&&i!==void 0?i:{}:Ca(e)?e:{},u={};Kh(t)||(u=t??{}),Ca(r)&&!Kh(e)&&(u=e??{});var l=o.find(Kh);return[a,s,u,l]}function KL(r,e,t,n,i){var o,a,s=null,u=null,l=[r,e,t,n,i],c=l.filter(wl);c.length===1?wl(l[1])?(u=l[1],s=null):(u=c[0],s=null):c.length===2&&(typeof l[0]=="string"&&(s=l[0]),typeof l[1]=="string"&&(u=l[1]));var f=l.find(Kh),h=l.filter(Ca);return h.length===1?Ca(l[2])?(a={},o=l[2]):Ca(l[3])?(o={},a=l[3]):(o=h[0],a={}):h.length===2&&(o=h[0],a=h[1]),[s,u,o??(o={}),a??(a={}),f]}var ZL=function(r){return function(){for(var e,t,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],u=0,l=i;u<l.length;u++){var c=l[u],f=s.pop();if(f==="id"){if(wl(c)||QT(c)){a.id=c.toString();continue}if(c==null)continue;f=s.pop()}if((f==="traits"||f==="options")&&(c==null||Ca(c))&&(a[f]=c),Kh(c)){a.callback=c;break}}return[(e=a.id)!==null&&e!==void 0?e:r.id(),(t=a.traits)!==null&&t!==void 0?t:{},(n=a.options)!==null&&n!==void 0?n:{},a.callback]}};function ZK(r,e,t,n){QT(r)&&(r=r.toString()),QT(e)&&(e=e.toString());var i=[r,e,t,n],o=i.filter(wl),a=o[0],s=a===void 0?r:a,u=o[1],l=u===void 0?null:u,c=i.filter(Ca)[0],f=c===void 0?{}:c,h=i.find(Kh);return[s,l,f,h]}function B2(){return typeof window<"u"}function Xre(){return!B2()}function QK(){return B2()?window.navigator.onLine:!0}function eg(){return!QK()}function JK(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,o=[],a=[],s={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return a},get:function(c){return s[c.toLowerCase()]},has:function(c){return c.toLowerCase()in s}}}};for(var l in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,f,h){o.push(f=f.toLowerCase()),a.push([f,h]),s[f]=s[f]?s[f]+","+h:h}),t(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}var U2=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},wb=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=U2();return(t&&t.fetch||JK).apply(void 0,r)},Eb="1.81.1",hF="api.segment.io/v1",eZ=function(r,e,t){var n=e.reduce(function(i,o){var a=o.split(":"),s=a[0],u=a[1];return i[s]=u,i},{});return{type:"Counter",metric:r,value:1,tags:Ke(Ke({},n),{library:"analytics.js",library_version:"npm:next-".concat(Eb)})}};function US(r){console.error("Error sending segment performance metrics",r)}var tZ=(function(){function r(e){var t=this,n,i,o,a,s;if(this.host=(n=e==null?void 0:e.host)!==null&&n!==void 0?n:hF,this.sampleRate=(i=e==null?void 0:e.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=e==null?void 0:e.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=e==null?void 0:e.maxQueueSize)!==null&&a!==void 0?a:20,this.protocol=(s=e==null?void 0:e.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var u=!1,l=function(){u||(u=!0,t.flush().catch(US),u=!1,setTimeout(l,t.flushTimer))};l()}}return r.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=eZ(e,t);this.queue.push(n),e.includes("error")&&this.flush().catch(US)}},r.prototype.flush=function(){return mt(this,void 0,void 0,function(){var e=this;return bt(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){US(n),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},r.prototype.send=function(){return mt(this,void 0,void 0,function(){var e,t,n;return bt(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,wb(n,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},r})(),cm,dF=(function(r){yo(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){cm=new tZ(t)},e.prototype.increment=function(t,n,i){r.prototype.increment.call(this,t,n,i),cm==null||cm.increment(t,i??[])},e})(fF),Zs=(function(r){yo(e,r);function e(t,n){return r.call(this,t,n,new dF)||this}return e.system=function(){return new this({type:"track",event:"system"})},e})(P0);function rZ(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var vF="bpc",pF=function(r,e,t,n,i,o){return{__t:vF,c:e,p:n,u:r,s:t,t:i,r:o}},nZ=Object.keys(pF("","","","","",""));function iZ(r){if(!rZ(r)||r.__t!==vF)return!1;for(var e in r)if(!nZ.includes(e))return!1;return!0}var oZ=function(r,e){return r.indexOf("?")>-1?r:r+e},aZ=function(r){var e=r.indexOf("#");return e===-1?r:r.slice(0,e)},sZ=function(r){try{return new URL(r).pathname}catch{return r[0]==="/"?r:"/"+r}},gF=function(r){var e=r.c,t=r.p,n=r.s,i=r.u,o=r.r,a=r.t,s=e?sZ(e):t,u=e?oZ(e,n):aZ(i);return{path:s,referrer:o,search:n,title:a,url:u}},yF=function(){var r=document.querySelector("link[rel='canonical']");return pF(location.href,r&&r.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},uZ=function(){return gF(yF())};function lZ(r,e){return Object.assign.apply(Object,Vn([{}],e.map(function(t){var n;if(r&&Object.prototype.hasOwnProperty.call(r,t))return n={},n[t]=r[t],n}),!1))}var Th=function(r,e){e===void 0&&(e=uZ());var t=r.context,n;r.type==="page"&&(n=r.properties&&lZ(r.properties,Object.keys(e)),r.properties=Ke(Ke(Ke({},e),r.properties),r.name?{name:r.name}:{})),t.page=Ke(Ke(Ke({},e),n),t.page)},cZ=(function(r){yo(e,r);function e(t){var n=r.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(F2())},onEventMethodCall:function(i){var o=i.options;n.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=t,n}return e.prototype.maybeUpdateAnonId=function(t){t!=null&&t.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,n,i,o,a){var s=r.prototype.track.call(this,t,n,i,o);return Th(s,a),s},e.prototype.page=function(t,n,i,o,a,s){var u=r.prototype.page.call(this,t,n,i,o,a);return Th(u,s),u},e.prototype.screen=function(t,n,i,o,a,s){var u=r.prototype.screen.call(this,t,n,i,o,a);return Th(u,s),u},e.prototype.identify=function(t,n,i,o,a){var s=r.prototype.identify.call(this,t,n,i,o);return Th(s,a),s},e.prototype.group=function(t,n,i,o,a){var s=r.prototype.group.call(this,t,n,i,o);return Th(s,a),s},e.prototype.alias=function(t,n,i,o,a){var s=r.prototype.alias.call(this,t,n,i,o);return Th(s,a),s},e})(MK),fZ=function(r){return"addMiddleware"in r&&r.type==="destination"},vs={getItem:function(){},setItem:function(){},removeItem:function(){}};try{vs=B2()&&window.localStorage?window.localStorage:vs}catch(r){console.warn("Unable to access localStorage",r)}function mF(r){var e=vs.getItem(r);return(e?JSON.parse(e):[]).map(function(t){return new Zs(t.event,t.id)})}function hZ(r,e){var t=mF(r),n=Vn(Vn([],e,!0),t,!0),i=n.reduce(function(o,a){var s;return Ke(Ke({},o),(s={},s[a.id]=a,s))},{});vs.setItem(r,JSON.stringify(Object.values(i)))}function bF(r){var e=vs.getItem(r);return e?JSON.parse(e):{}}function dZ(r,e){var t=bF(r);vs.setItem(r,JSON.stringify(Ke(Ke({},t),e)))}function QL(r){vs.removeItem(r)}var vZ=function(){return new Date().getTime()};function JT(r,e,t){t===void 0&&(t=0);var n=50,i="persisted-queue:v1:".concat(r,":lock"),o=function(l){return new Date().getTime()>l},a=vs.getItem(i),s=a?JSON.parse(a):null,u=s===null||o(s);if(u){vs.setItem(i,JSON.stringify(vZ()+n)),e(),vs.removeItem(i);return}!u&&t<3?setTimeout(function(){JT(r,e,t+1)},n):console.error("Unable to retrieve lock")}var q2=(function(r){yo(e,r);function e(t,n){var i=r.call(this,t,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),s=[],u={};return JT(n,function(){try{s=mF(o),u=bF(a),QL(o),QL(a),i.queue=Vn(Vn([],s,!0),i.queue,!0),i.seen=Ke(Ke({},u),i.seen)}catch(l){console.error(l)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var l=Vn(Vn([],i.queue,!0),i.future,!0);try{JT(n,function(){hZ(o,l),dZ(a,i.seen)})}catch(c){console.error(c)}}}),i}return e})(j2),pZ=(function(r){yo(e,r);function e(t){return r.call(this,typeof t=="string"?new q2(4,t):t)||this}return e.prototype.flush=function(){return mt(this,void 0,void 0,function(){return bt(this,function(t){return eg()?[2,[]]:[2,r.prototype.flush.call(this)]})})},e})(YK);function z2(r){for(var e=r.constructor.prototype,t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++){var i=n[t];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);o&&typeof o.value=="function"&&(r[i]=r[i].bind(r))}}return r}/*! js-cookie v3.0.1 | MIT */function fm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var gZ={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function eC(r,e){function t(i,o,a){if(!(typeof document>"u")){a=fm({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,a[u]!==!0&&(s+="="+a[u].split(";")[0]));return document.cookie=i+"="+r.write(o,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var u=o[s].split("="),l=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(a[c]=r.read(l,c),i===c)break}catch{}}return i?a[i]:a}}return Object.create({set:t,get:n,remove:function(i,o){t(i,"",fm({},o,{expires:-1}))},withAttributes:function(i){return eC(this.converter,fm({},this.attributes,i))},withConverter:function(i){return eC(fm({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var Ys=eC(gZ,{path:"/"});function yZ(r){var e=r.hostname,t=e.split("."),n=t[t.length-1],i=[];if(t.length===4&&parseInt(n,10)>0||t.length<=1)return i;for(var o=t.length-2;o>=0;--o)i.push(t.slice(o).join("."));return i}function mZ(r){try{return new URL(r)}catch{return}}function _F(r){var e=mZ(r);if(e)for(var t=yZ(e),n=0;n<t.length;++n){var i="__tld__",o=t[n],a={domain:"."+o};try{if(Ys.set(i,"1",a),Ys.get(i))return Ys.remove(i,a),o}catch{return}}}var bZ=365,wF=(function(){function r(e){e===void 0&&(e=r.defaults),this.options=Ke(Ke({},r.defaults),e)}return Object.defineProperty(r,"defaults",{get:function(){return{maxage:bZ,domain:_F(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),r.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},r.prototype.get=function(e){var t;try{var n=Ys.get(e);if(n==null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return null}},r.prototype.set=function(e,t){typeof t=="string"?Ys.set(e,t,this.opts()):t===null?Ys.remove(e,this.opts()):Ys.set(e,JSON.stringify(t),this.opts())},r.prototype.remove=function(e){return Ys.remove(e,this.opts())},r})(),_Z=(function(){function r(){}return r.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},r.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(n===null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},r.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},r.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},r})(),G2=(function(){function r(){this.cache={}}return r.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},r.prototype.set=function(e,t){this.cache[e]=t},r.prototype.remove=function(e){delete this.cache[e]},r})(),vo={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function EF(r){return r&&r.stores&&Array.isArray(r.stores)&&r.stores.every(function(e){return Object.values(vo).includes(e)})}function wZ(r){return typeof r=="object"&&r.name!==void 0}var qS=function(r,e,t,n){console.warn("".concat(r.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(n))},Vc=(function(){function r(e){this.stores=e}return r.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var o=i[n];try{if(t=o.get(e),t!=null)return t}catch(a){qS(o,"get",e,a)}}return null},r.prototype.set=function(e,t){this.stores.forEach(function(n){try{n.set(e,t)}catch(i){qS(n,"set",e,i)}})},r.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(n){qS(t,"remove",e,n)}})},r.prototype.getAndSync=function(e){var t=this.get(e),n=typeof t=="number"?t.toString():t;return this.set(e,n),n},r})();function tC(r){var e=r.map(function(t){var n,i;switch(wZ(t)?(n=t.name,i=t.settings):n=t,n){case vo.Cookie:return new wF(i);case vo.LocalStorage:return new _Z;case vo.Memory:return new G2;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function OF(r,e){return r.map(function(t){return e&&t===vo.Cookie?{name:t,settings:e}:t})}var Oc={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},xF=(function(){function r(e,t){e===void 0&&(e=Oc);var n=this,i,o,a,s;this.options={},this.id=function(l){if(n.options.disable)return null;var c=n.identityStore.getAndSync(n.idKey);if(l!==void 0){n.identityStore.set(n.idKey,l);var f=l!==c&&c!==null&&l!==null;f&&n.anonymousId(null)}var h=n.identityStore.getAndSync(n.idKey);if(h)return h;var d=n.legacyUserStore.get(Oc.cookie.oldKey);return d?typeof d=="object"?d.id:d:null},this.anonymousId=function(l){var c,f;if(n.options.disable)return null;if(l===void 0){var h=(c=n.identityStore.getAndSync(n.anonKey))!==null&&c!==void 0?c:(f=n.legacySIO())===null||f===void 0?void 0:f[0];if(h)return h}return l===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,l??F2()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(l){var c;if(!n.options.disable)return l===null&&(l={}),l&&n.traitsStore.set(n.traitsKey,l??{}),(c=n.traitsStore.get(n.traitsKey))!==null&&c!==void 0?c:{}},this.options=Ke(Ke({},Oc),e),this.cookieOptions=t,this.idKey=(o=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:Oc.cookie.key,this.traitsKey=(s=(a=e.localStorage)===null||a===void 0?void 0:a.key)!==null&&s!==void 0?s:Oc.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(l){return l===vo.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(l){return l!==vo.Cookie});var u=this.legacyUserStore.get(Oc.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),z2(this)}return r.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),n=t[0],i=t[1];return[n,i]},r.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var n=this.id();(n===null||n===e)&&(t=Ke(Ke({},this.traits()),t)),e&&this.id(e),this.traits(t)}},r.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},r.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},r.prototype.load=function(){return new r(this.options,this.cookieOptions)},r.prototype.save=function(){return!0},r.prototype.createStorage=function(e,t,n){var i=[vo.LocalStorage,vo.Cookie,vo.Memory];return e.disable?new Vc([]):e.persist?(e.storage!==void 0&&e.storage!==null&&EF(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==vo.LocalStorage})),n&&(i=i.filter(n)),new Vc(tC(OF(i,t)))):new Vc([new G2])},r.defaults=Oc,r})(),JL={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},EZ=(function(r){yo(e,r);function e(t,n){t===void 0&&(t=JL);var i=r.call(this,Ke(Ke({},JL),t),n)||this;return i.anonymousId=function(o){},z2(i),i}return e})(xF),V2="analytics";function SF(){return window[V2]}function OZ(r){V2=r}function xZ(r){window[V2]=r}var SZ=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},TF=function(r,e,t){t.getAndRemove(r).forEach(function(n){Ob(e,n).catch(console.error)})},TZ=function(r,e){return mt(void 0,void 0,void 0,function(){var t,n,i;return bt(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Ob(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},CZ=function(r,e){return mt(void 0,void 0,void 0,function(){var t,n,i;return bt(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("register"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Ob(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},PZ=TF.bind(void 0,"on"),AZ=TF.bind(void 0,"setAnonymousId"),RZ=function(r,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(n){setTimeout(function(){Ob(r,n).catch(console.error)},0)})})},Ch=function(r){if(CF(r)){var e=r.pop();return gF(e)}},CF=function(r){var e=r[r.length-1];return iZ(e)},rC=(function(){function r(e,t,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t}return r})(),IZ=(function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(r.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),r.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},r.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},r.prototype.add=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!CF(i.args)&&(i.args=Vn(Vn([],i.args,!0),[yF()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},r.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},r.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},r.prototype._pushSnippetWindowBuffer=function(){},r})();function Ob(r,e){return mt(this,void 0,void 0,function(){var t,n;return bt(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=r[e.method].apply(r,e.args),SZ(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return n=i.sent(),e.reject(n),[3,4];case 4:return[2]}})})}var kZ=(function(){function r(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=Eb,this._preInitBuffer=new IZ,this._promise=e(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];t.instance=i,t.ctx=o}).catch(function(){})}return r.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},r.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},r.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},r.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t.instance){var a=(n=t.instance)[e].apply(n,i);return Promise.resolve(a)}return new Promise(function(s,u){t._preInitBuffer.add(new rC(e,i,s,u))})}},r.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new rC(e,i)),t)}},r})(),Iv={},xc={},Ph={},zS={exports:{}},eN;function xb(){return eN||(eN=1,(function(r){r.exports=e(t),r.exports.find=r.exports,r.exports.replace=function(s,u,l,c){return e(i).call(this,s,u,l,c),s},r.exports.del=function(s,u,l){return e(n).call(this,s,u,null,l),s};function e(s){return function(u,l,c,f){var h=f&&a(f.normalizer)?f.normalizer:o;l=h(l);for(var d,v=!1;!v;)p();function p(){for(d in u){var m=h(d);if(l.indexOf(m)===0){var y=l.substr(m.length);if(y.charAt(0)==="."||y.length===0){l=y.substr(1);var b=u[d];if(b==null){v=!0;return}if(!l.length){v=!0;return}u=b;return}}}d=void 0,v=!0}if(d)return u==null?u:s(u,d,c)}}function t(s,u){if(s.hasOwnProperty(u))return s[u]}function n(s,u){return s.hasOwnProperty(u)&&delete s[u],s}function i(s,u,l){return s.hasOwnProperty(u)&&(s[u]=l),s}function o(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(s){return typeof s=="function"}})(zS)),zS.exports}var tN;function DZ(){if(tN)return Ph;tN=1;var r=Ph&&Ph.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ph,"__esModule",{value:!0});var e=r(xb());function t(i,o){return function(){var a=this.traits(),s=this.properties?this.properties():{};return e.default(a,"address."+i)||e.default(a,i)||(o?e.default(a,"address."+o):null)||(o?e.default(a,o):null)||e.default(s,"address."+i)||e.default(s,i)||(o?e.default(s,"address."+o):null)||(o?e.default(s,o):null)}}function n(i){i.zip=t("postalCode","zip"),i.country=t("country"),i.street=t("street"),i.state=t("state"),i.city=t("city"),i.region=t("region")}return Ph.default=n,Ph}var kv={},rN;function MZ(){if(rN)return kv;rN=1,Object.defineProperty(kv,"__esModule",{value:!0}),kv.clone=void 0;function r(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r(e[n]));return t}else return Array.isArray(e)?e.map(r):e}return kv.clone=r,kv}var hm={},nN;function LZ(){if(nN)return hm;nN=1,Object.defineProperty(hm,"__esModule",{value:!0});var r={Salesforce:!0};function e(t){return!r[t]}return hm.default=e,hm}var dm={},iN;function PF(){if(iN)return dm;iN=1;var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;return dm.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),i=0;if(!n)return new Date(e);for(var o=0,a;a=t[o];o++)n[a]=parseInt(n[a],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0,n[4]===" "?i=new Date().getTimezoneOffset():n[9]!=="Z"&&n[10]&&(i=n[11]*60+n[12],n[10]==="+"&&(i=0-i));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+i,n[7],n[8]);return new Date(s)},dm.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:r.test(e)},dm}var vm={},oN;function NZ(){if(oN)return vm;oN=1;var r=/\d{13}/;return vm.is=function(e){return r.test(e)},vm.parse=function(e){return e=parseInt(e,10),new Date(e)},vm}var pm={},aN;function jZ(){if(aN)return pm;aN=1;var r=/\d{10}/;return pm.is=function(e){return r.test(e)},pm.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)},pm}var GS,sN;function W2(){if(sN)return GS;sN=1;var r=PF(),e=NZ(),t=jZ(),n=Object.prototype,i=n.toString;function o(u){return i.call(u)==="[object Date]"}function a(u){return i.call(u)==="[object Number]"}GS=function(l){return o(l)?l:a(l)?new Date(s(l)):r.is(l)?r.parse(l):e.is(l)?e.parse(l):t.is(l)?t.parse(l):new Date(l)};function s(u){return u<315576e5?u*1e3:u}return GS}var VS,uN;function FZ(){if(uN)return VS;uN=1;var r=PF();VS=e;function e(i,o){return o===void 0&&(o=!0),i&&typeof i=="object"?t(i,o):Array.isArray(i)?n(i,o):r.is(i,o)?r.parse(i):i}function t(i,o){return Object.keys(i).forEach(function(a){i[a]=e(i[a],o)}),i}function n(i,o){return i.forEach(function(a,s){i[s]=e(a,o)}),i}return VS}var lN;function cf(){if(lN)return xc;lN=1;var r=xc&&xc.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(xc,"__esModule",{value:!0}),xc.Facade=void 0;var e=r(DZ()),t=MZ(),n=r(LZ()),i=r(W2()),o=r(xb()),a=r(FZ());function s(c,f){f=f||{},this.raw=t.clone(c),"clone"in f||(f.clone=!0),f.clone&&(c=t.clone(c)),"traverse"in f||(f.traverse=!0),"timestamp"in c?c.timestamp=i.default(c.timestamp):c.timestamp=new Date,f.traverse&&a.default(c),this.opts=f,this.obj=c}xc.Facade=s;var u=s.prototype;u.proxy=function(c){var f=c.split(".");c=f.shift();var h=this[c]||this.obj[c];return h&&(typeof h=="function"&&(h=h.call(this)||{}),f.length===0?this.opts.clone?l(h):h:(h=o.default(h,f.join(".")),this.opts.clone?l(h):h))},u.field=function(c){var f=this.obj[c];return this.opts.clone?l(f):f},s.proxy=function(c){return function(){return this.proxy(c)}},s.field=function(c){return function(){return this.field(c)}},s.multi=function(c){return function(){var f=this.proxy(c+"s");if(Array.isArray(f))return f;var h=this.proxy(c);return h&&(h=[this.opts.clone?t.clone(h):h]),h||[]}},s.one=function(c){return function(){var f=this.proxy(c);if(f)return f;var h=this.proxy(c+"s");if(Array.isArray(h))return h[0]}},u.json=function(){var c=this.opts.clone?t.clone(this.obj):this.obj;return this.type&&(c.type=this.type()),c},u.rawEvent=function(){return this.raw},u.options=function(c){var f=this.obj.options||this.obj.context||{},h=this.opts.clone?t.clone(f):f;if(!c)return h;if(this.enabled(c)){var d=this.integrations(),v=d[c]||o.default(d,c);return typeof v!="object"&&(v=o.default(this.options(),c)),typeof v=="object"?v:{}}},u.context=u.options,u.enabled=function(c){var f=this.proxy("options.providers.all");typeof f!="boolean"&&(f=this.proxy("options.all")),typeof f!="boolean"&&(f=this.proxy("integrations.all")),typeof f!="boolean"&&(f=!0);var h=f&&n.default(c),d=this.integrations();if(d.providers&&d.providers.hasOwnProperty(c)&&(h=d.providers[c]),d.hasOwnProperty(c)){var v=d[c];typeof v=="boolean"?h=v:h=!0}return!!h},u.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},u.active=function(){var c=this.proxy("options.active");return c==null&&(c=!0),c},u.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},u.sessionId=u.anonymousId,u.groupId=s.proxy("options.groupId"),u.traits=function(c){var f=this.proxy("options.traits")||{},h=this.userId();c=c||{},h&&(f.id=h);for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var v=this[d]==null?this.proxy("options.traits."+d):this[d]();if(v==null)continue;f[c[d]]=v,delete f[d]}return f},u.library=function(){var c=this.proxy("options.library");return c?typeof c=="string"?{name:c,version:null}:c:{name:"unknown",version:null}},u.device=function(){var c=this.proxy("context.device");(typeof c!="object"||c===null)&&(c={});var f=this.library().name;return c.type||(f.indexOf("ios")>-1&&(c.type="ios"),f.indexOf("android")>-1&&(c.type="android")),c},u.userAgent=s.proxy("context.userAgent"),u.timezone=s.proxy("context.timezone"),u.timestamp=s.field("timestamp"),u.channel=s.field("channel"),u.ip=s.proxy("context.ip"),u.userId=s.field("userId"),e.default(u);function l(c){return t.clone(c)}return xc}var Sc={},gm={exports:{}},cN;function ff(){return cN||(cN=1,typeof Object.create=="function"?gm.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:gm.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),gm.exports}var fN;function BZ(){if(fN)return Sc;fN=1;var r=Sc&&Sc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.Alias=void 0;var e=r(ff()),t=cf();function n(i,o){t.Facade.call(this,i,o)}return Sc.Alias=n,e.default(n,t.Facade),n.prototype.action=function(){return"alias"},n.prototype.type=n.prototype.action,n.prototype.previousId=function(){return this.field("previousId")||this.field("from")},n.prototype.from=n.prototype.previousId,n.prototype.userId=function(){return this.field("userId")||this.field("to")},n.prototype.to=n.prototype.userId,Sc}var Tc={},ym={},hN;function Sb(){if(hN)return ym;hN=1,Object.defineProperty(ym,"__esModule",{value:!0});var r=/.+\@.+\..+/;function e(t){return r.test(t)}return ym.default=e,ym}var dN;function UZ(){if(dN)return Tc;dN=1;var r=Tc&&Tc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.Group=void 0;var e=r(ff()),t=r(Sb()),n=r(W2()),i=cf();function o(s,u){i.Facade.call(this,s,u)}Tc.Group=o,e.default(o,i.Facade);var a=o.prototype;return a.action=function(){return"group"},a.type=a.action,a.groupId=i.Facade.field("groupId"),a.created=function(){var s=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(s)return n.default(s)},a.email=function(){var s=this.proxy("traits.email");if(s)return s;var u=this.groupId();if(t.default(u))return u},a.traits=function(s){var u=this.properties(),l=this.groupId();s=s||{},l&&(u.id=l);for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var f=this[c]==null?this.proxy("traits."+c):this[c]();if(f==null)continue;u[s[c]]=f,delete u[c]}return u},a.name=i.Facade.proxy("traits.name"),a.industry=i.Facade.proxy("traits.industry"),a.employees=i.Facade.proxy("traits.employees"),a.properties=function(){return this.field("traits")||this.field("properties")||{}},Tc}var Cc={},vN;function AF(){if(vN)return Cc;vN=1;var r=Cc&&Cc.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Identify=void 0;var e=cf(),t=r(xb()),n=r(ff()),i=r(Sb()),o=r(W2()),a=function(l){return l.trim()};function s(l,c){e.Facade.call(this,l,c)}Cc.Identify=s,n.default(s,e.Facade);var u=s.prototype;return u.action=function(){return"identify"},u.type=u.action,u.traits=function(l){var c=this.field("traits")||{},f=this.userId();l=l||{},f&&(c.id=f);for(var h in l){var d=this[h]==null?this.proxy("traits."+h):this[h]();d!=null&&(c[l[h]]=d,h!==l[h]&&delete c[h])}return c},u.email=function(){var l=this.proxy("traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},u.created=function(){var l=this.proxy("traits.created")||this.proxy("traits.createdAt");if(l)return o.default(l)},u.companyCreated=function(){var l=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(l)return o.default(l)},u.companyName=function(){return this.proxy("traits.company.name")},u.name=function(){var l=this.proxy("traits.name");if(typeof l=="string")return a(l);var c=this.firstName(),f=this.lastName();if(c&&f)return a(c+" "+f)},u.firstName=function(){var l=this.proxy("traits.firstName");if(typeof l=="string")return a(l);var c=this.proxy("traits.name");if(typeof c=="string")return a(c).split(" ")[0]},u.lastName=function(){var l=this.proxy("traits.lastName");if(typeof l=="string")return a(l);var c=this.proxy("traits.name");if(typeof c=="string"){var f=a(c).indexOf(" ");if(f!==-1)return a(c.substr(f+1))}},u.uid=function(){return this.userId()||this.username()||this.email()},u.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},u.age=function(){var l=this.birthday(),c=t.default(this.traits(),"age");if(c!=null)return c;if(l instanceof Date){var f=new Date;return f.getFullYear()-l.getFullYear()}},u.avatar=function(){var l=this.traits();return t.default(l,"avatar")||t.default(l,"photoUrl")||t.default(l,"avatarUrl")},u.position=function(){var l=this.traits();return t.default(l,"position")||t.default(l,"jobTitle")},u.username=e.Facade.proxy("traits.username"),u.website=e.Facade.one("traits.website"),u.websites=e.Facade.multi("traits.website"),u.phone=e.Facade.one("traits.phone"),u.phones=e.Facade.multi("traits.phone"),u.address=e.Facade.proxy("traits.address"),u.gender=e.Facade.proxy("traits.gender"),u.birthday=e.Facade.proxy("traits.birthday"),Cc}var Pc={},pN;function H2(){if(pN)return Pc;pN=1;var r=Pc&&Pc.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Track=void 0;var e=r(ff()),t=cf(),n=AF(),i=r(Sb()),o=r(xb());function a(l,c){t.Facade.call(this,l,c)}Pc.Track=a,e.default(a,t.Facade);var s=a.prototype;s.action=function(){return"track"},s.type=s.action,s.event=t.Facade.field("event"),s.value=t.Facade.proxy("properties.value"),s.category=t.Facade.proxy("properties.category"),s.id=t.Facade.proxy("properties.id"),s.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},s.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},s.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},s.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},s.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},s.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},s.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},s.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},s.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},s.sku=t.Facade.proxy("properties.sku"),s.tax=t.Facade.proxy("properties.tax"),s.name=t.Facade.proxy("properties.name"),s.price=t.Facade.proxy("properties.price"),s.total=t.Facade.proxy("properties.total"),s.repeat=t.Facade.proxy("properties.repeat"),s.coupon=t.Facade.proxy("properties.coupon"),s.shipping=t.Facade.proxy("properties.shipping"),s.discount=t.Facade.proxy("properties.discount"),s.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},s.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},s.description=t.Facade.proxy("properties.description"),s.plan=t.Facade.proxy("properties.plan"),s.subtotal=function(){var l=o.default(this.properties(),"subtotal"),c=this.total()||this.revenue();if(l)return l;if(!c)return 0;if(this.total()){var f=this.tax();f&&(c-=f),f=this.shipping(),f&&(c-=f),f=this.discount(),f&&(c+=f)}return c},s.products=function(){var l=this.properties(),c=o.default(l,"products");return Array.isArray(c)?c.filter(function(f){return f!==null}):[]},s.quantity=function(){var l=this.obj.properties||{};return l.quantity||1},s.currency=function(){var l=this.obj.properties||{};return l.currency||"USD"},s.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},s.query=t.Facade.proxy("options.query"),s.properties=function(l){var c=this.field("properties")||{};l=l||{};for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;c[l[f]]=h,delete c[f]}return c},s.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},s.email=function(){var l=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},s.revenue=function(){var l=this.proxy("properties.revenue"),c=this.event(),f=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!l&&c&&c.match(f)&&(l=this.proxy("properties.total")),u(l)},s.cents=function(){var l=this.revenue();return typeof l!="number"?this.value()||0:l*100},s.identify=function(){var l=this.json();return l.traits=this.traits(),new n.Identify(l,this.opts)};function u(l){if(l){if(typeof l=="number")return l;if(typeof l=="string"&&(l=l.replace(/\$/g,""),l=parseFloat(l),!isNaN(l)))return l}}return Pc}var Ac={},gN;function RF(){if(gN)return Ac;gN=1;var r=Ac&&Ac.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.Page=void 0;var e=r(ff()),t=cf(),n=H2(),i=r(Sb());function o(s,u){t.Facade.call(this,s,u)}Ac.Page=o,e.default(o,t.Facade);var a=o.prototype;return a.action=function(){return"page"},a.type=a.action,a.category=t.Facade.field("category"),a.name=t.Facade.field("name"),a.title=t.Facade.proxy("properties.title"),a.path=t.Facade.proxy("properties.path"),a.url=t.Facade.proxy("properties.url"),a.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},a.properties=function(s){var u=this.field("properties")||{},l=this.category(),c=this.name();s=s||{},l&&(u.category=l),c&&(u.name=c);for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;u[s[f]]=h,f!==s[f]&&delete u[f]}return u},a.email=function(){var s=this.proxy("context.traits.email")||this.proxy("properties.email");if(s)return s;var u=this.userId();if(i.default(u))return u},a.fullName=function(){var s=this.category(),u=this.name();return u&&s?s+" "+u:u},a.event=function(s){return s?"Viewed "+s+" Page":"Loaded a Page"},a.track=function(s){var u=this.json();return u.event=this.event(s),u.timestamp=this.timestamp(),u.properties=this.properties(),new n.Track(u,this.opts)},Ac}var Rc={},yN;function qZ(){if(yN)return Rc;yN=1;var r=Rc&&Rc.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.Screen=void 0;var e=r(ff()),t=RF(),n=H2();function i(o,a){t.Page.call(this,o,a)}return Rc.Screen=i,e.default(i,t.Page),i.prototype.action=function(){return"screen"},i.prototype.type=i.prototype.action,i.prototype.event=function(o){return o?"Viewed "+o+" Screen":"Loaded a Screen"},i.prototype.track=function(o){var a=this.json();return a.event=this.event(o),a.timestamp=this.timestamp(),a.properties=this.properties(),new n.Track(a,this.opts)},Rc}var Ic={},mN;function zZ(){if(mN)return Ic;mN=1;var r=Ic&&Ic.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.Delete=void 0;var e=r(ff()),t=cf();function n(i,o){t.Facade.call(this,i,o)}return Ic.Delete=n,e.default(n,t.Facade),n.prototype.type=function(){return"delete"},Ic}var bN;function GZ(){return bN||(bN=1,(function(r){var e=Iv&&Iv.__assign||function(){return e=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++){f=arguments[h];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.Delete=r.Screen=r.Page=r.Track=r.Identify=r.Group=r.Alias=r.Facade=void 0;var t=cf();Object.defineProperty(r,"Facade",{enumerable:!0,get:function(){return t.Facade}});var n=BZ();Object.defineProperty(r,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=UZ();Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.Group}});var o=AF();Object.defineProperty(r,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=H2();Object.defineProperty(r,"Track",{enumerable:!0,get:function(){return a.Track}});var s=RF();Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return s.Page}});var u=qZ();Object.defineProperty(r,"Screen",{enumerable:!0,get:function(){return u.Screen}});var l=zZ();Object.defineProperty(r,"Delete",{enumerable:!0,get:function(){return l.Delete}}),r.default=e(e({},t.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:s.Page,Screen:u.Screen,Delete:l.Delete})})(Iv)),Iv}var kc=GZ();function A0(r,e){var t=new kc.Facade(r,e);return r.type==="track"&&(t=new kc.Track(r,e)),r.type==="identify"&&(t=new kc.Identify(r,e)),r.type==="page"&&(t=new kc.Page(r,e)),r.type==="alias"&&(t=new kc.Alias(r,e)),r.type==="group"&&(t=new kc.Group(r,e)),r.type==="screen"&&(t=new kc.Screen(r,e)),Object.defineProperty(t,"obj",{value:r,writable:!0}),t}var VZ=function(r){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,r(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;r(e)})},IF=(function(r){yo(e,r);function e(t,n){var i=r.call(this,t)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return e})(Error),kF=function(r){return Ke({"Content-Type":"text/plain"},typeof r=="function"?r():r)},WZ=500,HZ=64;function Y2(r){var e=encodeURI(JSON.stringify(r)).split(/%..|./).length-1;return e/1024}function YZ(r){return Y2(r)>=WZ-50}function XZ(r){return Y2(r)>=HZ-10}function $Z(r){var e=[],t=0;return r.forEach(function(n){var i=Y2(e[t]);i>=64&&t++,e[t]?e[t].push(n):e[t]=[n]}),e}function KZ(r,e){var t,n,i=[],o=!1,a=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:10,s=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:5e3,u=0;function l(v){var p;if(v.length!==0){var m=(p=v[0])===null||p===void 0?void 0:p.writeKey,y=v.map(function(b){var g=b;g.sentAt;var _=uF(g,["sentAt"]);return _});return wb("https://".concat(r,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||o,headers:kF(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:m,batch:y,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(b){var g;if(b.status>=500)throw new Error("Bad response from server: ".concat(b.status));if(b.status===429){var _=(g=b.headers)===null||g===void 0?void 0:g.get("x-ratelimit-reset"),w=typeof _=="string"?parseInt(_)*1e3:s;throw new IF("Rate limit exceeded: ".concat(b.status),w)}})}}function c(v){var p;return v===void 0&&(v=1),mt(this,void 0,void 0,function(){var m;return bt(this,function(y){return i.length?(m=i,i=[],[2,(p=l(m))===null||p===void 0?void 0:p.catch(function(b){var g,_=Zs.system();_.log("error","Error sending batch",b),v<=((g=e==null?void 0:e.maxRetries)!==null&&g!==void 0?g:10)&&(b.name==="RateLimitError"&&(u=b.retryTimeout),i.push.apply(i,m),i.map(function(w){if("_metadata"in w){var x=w;x._metadata=Ke(Ke({},x._metadata),{retryCount:v})}}),h(v+1))})]):[2]})})}var f;function h(v){v===void 0&&(v=1),!f&&(f=setTimeout(function(){f=void 0,c(v).catch(console.error)},u||s),u=0)}VZ(function(v){if(o=v,o&&i.length){var p=$Z(i).map(l);Promise.all(p).catch(console.error)}});function d(v,p){return mt(this,void 0,void 0,function(){var m;return bt(this,function(y){return i.push(p),m=i.length>=a||YZ(i)||(e==null?void 0:e.keepalive)&&XZ(i),[2,m||o?c():h()]})})}return{dispatch:d}}function ZZ(r){function e(t,n){return wb(t,{credentials:r==null?void 0:r.credentials,keepalive:r==null?void 0:r.keepalive,headers:kF(r==null?void 0:r.headers),method:"post",body:JSON.stringify(n),priority:r==null?void 0:r.priority}).then(function(i){var o;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var a=(o=i.headers)===null||o===void 0?void 0:o.get("x-ratelimit-reset"),s=a?parseInt(a)*1e3:5e3;throw new IF("Rate limit exceeded: ".concat(i.status),s)}})}return{dispatch:e}}function QZ(r,e,t,n,i){var o,a=r.user();delete e.options,e.writeKey=t==null?void 0:t.apiKey,e.userId=e.userId||a.id(),e.anonymousId=e.anonymousId||a.anonymousId(),e.sentAt=new Date;var s=r.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(e._metadata=Ke(Ke({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],l=[];for(var c in n){var f=n[c];c==="Segment.io"&&u.push(c),f.bundlingStatus==="bundled"&&u.push(c),f.bundlingStatus==="unbundled"&&l.push(c)}for(var h=0,d=(t==null?void 0:t.unbundledIntegrations)||[];h<d.length;h++){var v=d[h];l.includes(v)||l.push(v)}var p=(o=t==null?void 0:t.maybeBundledConfigIds)!==null&&o!==void 0?o:{},m=[];return u.sort().forEach(function(y){var b;((b=p[y])!==null&&b!==void 0?b:[]).forEach(function(g){m.push(g)})}),(t==null?void 0:t.addBundledMetadata)!==!1&&(e._metadata=Ke(Ke({},e._metadata),{bundled:u.sort(),unbundled:l.sort(),bundledIds:m})),e}var JZ=function(r,e){return mt(void 0,void 0,void 0,function(){var t;return bt(this,function(n){return t=function(i){return mt(void 0,void 0,void 0,function(){var o;return bt(this,function(a){switch(a.label){case 0:return r(i)?(o=t,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function eQ(r,e){return mt(this,void 0,void 0,function(){var t,n=this;return bt(this,function(i){switch(i.label){case 0:return t=[],eg()?[2,e]:[4,JZ(function(){return e.length>0&&!eg()},function(){return mt(n,void 0,void 0,function(){var o,a,s;return bt(this,function(u){switch(u.label){case 0:return o=e.pop(),o?[4,cp(o,r)]:[2];case 1:return a=u.sent(),s=a instanceof Zs,s||t.push(o),[2]}})})})];case 1:return i.sent(),t.map(function(o){return e.pushWithBackoff(o)}),[2,e]}})})}function Ah(r,e,t,n){var i=this;r||setTimeout(function(){return mt(i,void 0,void 0,function(){var o,a;return bt(this,function(s){switch(s.label){case 0:return o=!0,[4,eQ(t,e)];case 1:return a=s.sent(),o=!1,e.todo>0&&n(o,a,t,n),[2]}})})},Math.random()*5e3)}function tQ(r,e){var t,n,i,o,a=r.user();return e.previousId=(i=(n=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),e.userId=(o=e.userId)!==null&&o!==void 0?o:e.to,delete e.from,delete e.to,e}var rQ=function(r){return r.name==="Segment.io"};function nQ(r,e,t){var n,i,o;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(u)),u.clear()});var a=(n=e==null?void 0:e.apiKey)!==null&&n!==void 0?n:"",s=r.options.disableClientPersistence?new j2(r.queue.queue.maxAttempts,[]):new q2(r.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),u=new Set,l=!1,c=(i=e==null?void 0:e.apiHost)!==null&&i!==void 0?i:hF,f=(o=e==null?void 0:e.protocol)!==null&&o!==void 0?o:"https",h="".concat(f,"://").concat(c),d=e==null?void 0:e.deliveryStrategy,v=d&&"strategy"in d&&d.strategy==="batching"?KZ(c,d.config):ZZ(d==null?void 0:d.config);function p(y){return mt(this,void 0,void 0,function(){var b,g;return bt(this,function(_){return eg()?(s.push(y),Ah(l,s,m,Ah),[2,y]):(u.add(y),b=y.event.type.charAt(0),g=A0(y.event).json(),y.event.type==="track"&&delete g.traits,y.event.type==="alias"&&(g=tQ(r,g)),s.getAttempts(y)>=s.maxAttempts?(u.delete(y),[2,y]):[2,v.dispatch("".concat(h,"/").concat(b),QZ(r,g,e,t,y)).then(function(){return y}).catch(function(w){if(y.log("error","Error sending event",w),w.name==="RateLimitError"){var x=w.retryTimeout;s.pushWithBackoff(y,x)}else s.pushWithBackoff(y);return Ah(l,s,m,Ah),y}).finally(function(){u.delete(y)})])})})}var m={metadata:{writeKey:a,apiHost:c,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:p,identify:p,page:p,alias:p,group:p,screen:p};return s.todo&&Ah(l,s,m,Ah),m}var Ku="This is being deprecated and will be not be available in future releases of Analytics JS",WS=U2(),HS=WS==null?void 0:WS.analytics;function iQ(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=e?10:1,i=t?new j2(n,[]):new q2(n,r);return new pZ(i)}var oQ=(function(){function r(e,t){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var o;return(o=t.plugins.find(rQ))===null||o===void 0?void 0:o.metadata},this.writeKey=e.writeKey;var i={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(n=e.cdnSettings)!==null&&n!==void 0?n:i,this.cdnURL=e.cdnURL}return Object.defineProperty(r.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),r})();function as(){console.warn(Ku)}var DF=(function(r){yo(e,r);function e(t,n,i,o,a){var s=this,u,l;s=r.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=as,s.addIntegrationMiddleware=as,s.listeners=as,s.addEventListener=as,s.removeAllListeners=as,s.removeListener=as,s.removeEventListener=as,s.hasListeners=as,s.add=as,s.addIntegration=as;var c=n==null?void 0:n.cookie,f=(u=n==null?void 0:n.disableClientPersistence)!==null&&u!==void 0?u:!1;s.queue=i??iQ("".concat(t.writeKey,":event-queue"),n==null?void 0:n.retryQueue,f),s.settings=new oQ(t,s.queue);var h=n==null?void 0:n.storage;return s._universalStorage=s.createStore(f,h,c),s._user=o??new xF(Ke({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.user),c).load(),s._group=a??new EZ(Ke({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.group),c).load(),s.eventFactory=new cZ(s._user),s.integrations=(l=n==null?void 0:n.integrations)!==null&&l!==void 0?l:{},s.options=n??{},z2(s),s}return e.prototype.createStore=function(t,n,i){return t?new Vc([new G2]):n&&EF(n)?new Vc(tC(OF(n.stores,i))):new Vc(tC([vo.LocalStorage,{name:vo.Cookie,settings:i},vo.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return bt(this,function(h){return i=Ch(t),o=KK.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.track(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("track",a,d.event.properties,d.event.options),d})]})})},e.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return bt(this,function(d){return i=Ch(t),o=KL.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.page(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("page",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return bt(this,function(h){return i=Ch(t),o=ZL(this._user).apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],this._user.identify(a,s),c=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("identify",d.event.userId,d.event.traits,d.event.options),d})]})})},e.prototype.group=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=Ch(n);if(n.length===0)return this._group;var a=ZL(this._group).apply(void 0,n),s=a[0],u=a[1],l=a[2],c=a[3];this._group.identify(s,u);var f=this._group.id(),h=this._group.traits(),d=this.eventFactory.group(f,h,l,this.integrations,o);return this._dispatch(d,c).then(function(v){return t.emit("group",v.event.groupId,v.event.traits,v.event.options),v})},e.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return bt(this,function(h){return i=Ch(t),o=ZK.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.alias(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("alias",a,s,d.event.options),d})]})})},e.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return bt(this,function(d){return i=Ch(t),o=KL.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.screen(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("screen",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return[4,Ta(()=>import("./auto-track-Dez9l_v8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,Vn([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return[4,Ta(()=>import("./auto-track-Dez9l_v8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,Vn([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return[4,Ta(()=>import("./auto-track-Dez9l_v8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,Vn([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return[4,Ta(()=>import("./auto-track-Dez9l_v8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,Vn([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a=this;return bt(this,function(s){switch(s.label){case 0:return i=Zs.system(),o=t.map(function(u){return a.queue.register(i,u,a)}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,o,a=this;return bt(this,function(s){switch(s.label){case 0:return i=Zs.system(),o=t.map(function(u){var l=a.queue.plugins.find(function(c){return c.name===u});if(l)return a.queue.deregister(i,l,a);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,n){return mt(this,void 0,void 0,function(){var i;return bt(this,function(o){return i=new Zs(t),i.stats.increment("analytics_js.invoke",1,[t.type]),eg()&&!this.options.retryQueue?[2,i]:[2,$K(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return mt(this,void 0,void 0,function(){var n=this;return bt(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return mt(n,void 0,void 0,function(){var o,a,s;return bt(this,function(u){switch(u.label){case 0:return[4,Ta(()=>Promise.resolve().then(()=>EQ),void 0)];case 1:return o=u.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(l){if(l.type==="destination")return a[l.name]=!0}),s=o(t,a),[4,this.register(s)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(fZ).forEach(function(o){(t==="*"||o.name.toLowerCase()===t.toLowerCase())&&o.addMiddleware.apply(o,n)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return mt(this,void 0,void 0,function(){var n;return bt(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,Ta(()=>import("./index-M6XOATGj.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))];case 1:return n=i.sent().queryString,[2,n(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(n){return n}),mt(this,void 0,void 0,function(){return bt(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(Ku),xZ(HS??this),this},e.prototype.normalize=function(t){return console.warn(Ku),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(Ku),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return Eb},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,n){return mt(this,void 0,void 0,function(){return bt(this,function(i){return console.warn(Ku),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return mt(this,void 0,void 0,function(){return bt(this,function(n){switch(n.label){case 0:return console.warn(Ku),[4,this.page({path:t})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(Ku),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(Ku);var t=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var s=a.Integration;return s?(n[i.name]=s,n):(n[i.name]=a,n)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var n=this,i=t.shift();i&&!n[i]||n[i].apply(this,t)},e})(N2),_N=(function(r){yo(e,r);function e(){var t=r.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e})(DF),wN={};function MF(){return typeof process>"u"||!wN?{}:wN}var aQ=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,sQ=function(){var r,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var n,i=(n=t.getAttribute("src"))!==null&&n!==void 0?n:"",o=aQ.exec(i);o&&o[1]&&(r=o[1])}),r},i0,uQ=function(){var r,e=i0??((r=SF())===null||r===void 0?void 0:r._cdn);return e},lQ=function(r){var e=SF();e&&(e._cdn=r),i0=r},X2=function(){var r=uQ();if(r)return r;var e=sQ();return e||"https://cdn.segment.com"},$re=function(){var r=X2();return"".concat(r,"/next-integrations")};function cQ(r,e){var t,n=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,o){var a,s,u=o[0],l=o[1];return typeof l=="object"?Ke(Ke({},i),(a={},a[u]=l,a)):Ke(Ke({},i),(s={},s[u]={},s))},{});return Object.entries(r.integrations).reduce(function(i,o){var a,s=o[0],u=o[1];return Ke(Ke({},i),(a={},a[s]=Ke(Ke({},u),n[s]),a))},{})}function fQ(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return r}}function hQ(r){return mt(this,void 0,void 0,function(){var e;return bt(this,function(t){return e=navigator.userAgentData,e?r?[2,e.getHighEntropyValues(r).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var Dv;function dQ(){if(Dv)return Dv;var r=_F(window.location.href);return Dv={expires:31536e6,secure:!1,path:"/"},r&&(Dv.domain=r),Dv}function vQ(r){var e={btid:"dataxu",urid:"millennial-media"};r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&");for(var t=r.split("&"),n=0,i=t;n<i.length;n++){var o=i[n],a=o.split("="),s=a[0],u=a[1];if(e[s])return{id:u,type:e[s]}}}function pQ(r){return r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&"),r.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),e[s]=fQ(a)}return e},{})}function gQ(){var r=Ys.get("_ga");if(r&&r.startsWith("amp"))return r}function yQ(r,e,t){var n,i=new Vc(t?[]:[new wF(dQ())]),o=i.get("s:context.referrer"),a=(n=vQ(r))!==null&&n!==void 0?n:o;a&&(e&&(e.referrer=Ke(Ke({},e.referrer),a)),i.set("s:context.referrer",a))}var mQ=function(r){try{var e=new URLSearchParams;return Object.entries(r).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(o){return e.append(n,o)}):e.append(n,i)}),e.toString()}catch{return""}},bQ=(function(){function r(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,n){return mt(e,void 0,void 0,function(){var i;return bt(this,function(o){switch(o.label){case 0:this.instance=n,o.label=1;case 1:return o.trys.push([1,3,,4]),i=this,[4,hQ(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var n,i,o=t.event.context,a=o.page.search||"",s=typeof a=="object"?mQ(a):a;o.userAgent=navigator.userAgent,o.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof o.locale>"u"&&typeof u<"u"&&(o.locale=u),(n=o.library)!==null&&n!==void 0||(o.library={name:"analytics.js",version:"".concat("npm:next","-").concat(Eb)}),s&&!o.campaign&&(o.campaign=pQ(s));var l=gQ();l&&(o.amp={id:l}),yQ(s,o,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return r})(),_Q=new bQ;function LF(r){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===r})}function YS(r,e){var t=LF(r);if(t!==void 0){var n=t==null?void 0:t.getAttribute("status");if(n==="loaded")return Promise.resolve(t);if(n==="loading")return new Promise(function(i,o){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,s=window.document.createElement("script");s.type="text/javascript",s.src=r,s.async=!0,s.setAttribute("status","loading");for(var u=0,l=Object.entries({});u<l.length;u++){var c=l[u],f=c[0],h=c[1];s.setAttribute(f,h)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),o(new Error("Failed to load ".concat(r)))};var d=window.document.querySelector("script");d?(a=d.parentElement)===null||a===void 0||a.insertBefore(s,d):window.document.head.appendChild(s)})}function Kre(r){var e=LF(r);return e!==void 0&&e.remove(),Promise.resolve()}function NF(r,e,t){return mt(this,void 0,void 0,function(){function n(l,c){return mt(this,void 0,void 0,function(){var f,h,d;return bt(this,function(v){switch(v.label){case 0:return f=!1,h=null,[4,c({payload:A0(l,{clone:!0,traverse:!1}),integration:r,next:function(p){f=!0,p===null&&(h=null),p&&(h=p.obj)}})];case 1:return v.sent(),!f&&h!==null&&(h=h,h.integrations=Ke(Ke({},l.integrations),(d={},d[r]=!1,d))),[2,h]}})})}var i,o,a,s,u;return bt(this,function(l){switch(l.label){case 0:i=A0(e,{clone:!0,traverse:!1}).rawEvent(),o=0,a=t,l.label=1;case 1:return o<a.length?(s=a[o],[4,n(i,s)]):[3,4];case 2:if(u=l.sent(),u===null)return[2,null];i=u,l.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function wQ(r,e){function t(n){return mt(this,void 0,void 0,function(){var i;return bt(this,function(o){switch(o.label){case 0:return i=!1,[4,r({payload:A0(n.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new ad({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(r.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:t,page:t,screen:t,identify:t,alias:t,group:t}}const EQ=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:NF,sourceMiddlewarePlugin:wQ},Symbol.toStringTag,{value:"Module"}));function mm(r,e){var t=e.methodName,n=e.integrationName,i=e.type,o=e.didError,a=o===void 0?!1:o;r.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(t),"integration_name:".concat(n),"type:".concat(i)])}var OQ=(function(){function r(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=lF(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return r.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},r.prototype.transform=function(e){return mt(this,void 0,void 0,function(){var t;return bt(this,function(n){switch(n.label){case 0:return[4,NF(this.name,e.event,this.middleware)];case 1:return t=n.sent(),t===null&&e.cancel(new ad({retry:!1,reason:"dropped by destination middleware"})),[2,new Zs(t)]}})})},r.prototype._createMethod=function(e){var t=this;return function(n){return mt(t,void 0,void 0,function(){var i,o;return bt(this,function(a){switch(a.label){case 0:return this.action[e]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!a.sent())throw new Error("Something prevented the destination from getting ready");return mm(n,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return a.sent(),[3,6];case 5:throw o=a.sent(),mm(n,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),o;case 6:return[2,n]}})})}},r.prototype.isLoaded=function(){return this.action.isLoaded()},r.prototype.ready=function(){return mt(this,void 0,void 0,function(){return bt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},r.prototype.load=function(e,t){return mt(this,void 0,void 0,function(){var n,i,o,a;return bt(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),mm(e,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(e,t),o=(i=this.loadPromise).resolve,[4,n];case 2:return o.apply(i,[s.sent()]),[2,n];case 3:throw a=s.sent(),mm(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(a),a;case 4:return[2]}})})},r.prototype.unload=function(e,t){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,e,t)},r})();function xQ(r){if(!Array.isArray(r))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return r.forEach(function(t){e.forEach(function(n){var i;if(t[n]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function SQ(r,e){var t=r[e.creationName],n=r[e.name];return r.All===!1&&!t&&!n||t===!1||n===!1}function TQ(r,e){return mt(this,void 0,void 0,function(){var t,n,i,o,a,s;return bt(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),n=X2(),!e)return[3,6];i=r.url.split("/"),o=i[i.length-2],a=r.url.replace(o,btoa(o).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,YS(a.replace(t,n))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,YS(r.url.replace(t,n))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,YS(r.url.replace(t,n))];case 7:u.sent(),u.label=8;case 8:return typeof window[r.libraryName]=="function"?[2,window[r.libraryName]]:[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",r),s;case 10:return[2]}})})}function CQ(r,e,t,n,i,o){var a,s,u;return mt(this,void 0,void 0,function(){var l,c,f,h=this;return bt(this,function(d){switch(d.label){case 0:return l=[],c=(s=(a=r.middlewareSettings)===null||a===void 0?void 0:a.routingRules)!==null&&s!==void 0?s:[],f=((u=r.remotePlugins)!==null&&u!==void 0?u:[]).map(function(v){return mt(h,void 0,void 0,function(){var p,m,y,b,g,_,w;return bt(this,function(x){switch(x.label){case 0:if(SQ(e,v))return[2];x.label=1;case 1:return x.trys.push([1,6,,7]),m=o==null?void 0:o.find(function(E){var O=E.pluginName;return O===v.name}),m?[3,3]:[4,TQ(v,n==null?void 0:n.obfuscate)];case 2:m=x.sent(),x.label=3;case 3:return p=m,p?(y=t[v.name],[4,p(Ke(Ke({},v.settings),y))]):[3,5];case 4:b=x.sent(),g=Array.isArray(b)?b:[b],xQ(g),_=c.filter(function(E){return E.destinationName===v.creationName}),g.forEach(function(E){var O=new OQ(v.creationName,E);_.length&&i&&O.addMiddleware(i),l.push(O)}),x.label=5;case 5:return[3,7];case 6:return w=x.sent(),console.warn("Failed to load Remote Plugin",w),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return d.sent(),[2,l.filter(Boolean)]}})})}var XS,EN,PQ=U2(),ON=(XS=(EN=PQ).__SEGMENT_INSPECTOR__)!==null&&XS!==void 0?XS:EN.__SEGMENT_INSPECTOR__={},AQ=function(r){var e;return(e=ON.attach)===null||e===void 0?void 0:e.call(ON,r)};function RQ(r,e){return wb("".concat(e,"/v1/projects/").concat(r,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(n){throw new Error(n)})}).catch(function(t){throw console.error(t.message),t})}function IQ(r){return MF().NODE_ENV!=="test"&&Object.keys(r.integrations).length>1}function kQ(r){var e,t,n;return MF().NODE_ENV!=="test"&&((n=(t=(e=r.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)>0}function DQ(r,e){AZ(r,e),PZ(r,e)}function MQ(r,e,t){return mt(this,void 0,void 0,function(){return bt(this,function(n){switch(n.label){case 0:return[4,NQ(r,e)];case 1:return n.sent(),RZ(r,t),[2]}})})}var LQ=function(){var r,e,t=(r=window.location.hash)!==null&&r!==void 0?r:"",n=(e=window.location.search)!==null&&e!==void 0?e:"",i=n.length?n:t.replace(/(?=#).*(?=\?)/,"");return i},NQ=function(r,e){return mt(void 0,void 0,void 0,function(){return bt(this,function(t){switch(t.label){case 0:return e.includes("ajs_")?[4,r.queryString(e).catch(console.error)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};function jQ(r,e,t,n,i,o,a){var s,u,l;return i===void 0&&(i=[]),mt(this,void 0,void 0,function(){var c,f,h,d,v,p,m,y,b,g,_,w,x,E,O,C=this;return bt(this,function(A){switch(A.label){case 0:return DQ(t,a),c=i==null?void 0:i.filter(function(R){return typeof R=="object"}),f=i==null?void 0:i.filter(function(R){return typeof R=="function"&&typeof R.pluginName=="string"}),kQ(e)?[4,Ta(()=>import("./index-CtQ5SWOa.js"),[]).then(function(R){return R.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return d=A.sent(),[3,3];case 2:d=void 0,A.label=3;case 3:return h=d,IQ(e)||o.length>0?[4,Ta(()=>import("./index-Bh62dvhH.js"),__vite__mapDeps([9,10,1,2,3,4,5,6,7])).then(function(R){return R.ajsDestinations(r,e,t.integrations,n,h,o)})]:[3,5];case 4:return p=A.sent(),[3,6];case 5:p=[],A.label=6;case 6:return v=p,e.legacyVideoPluginsEnabled?[4,Ta(()=>import("./index-DcCxEPNh.js"),__vite__mapDeps([11,3,1,4,2,5,6,7])).then(function(R){return R.loadLegacyVideoPlugins(t)})]:[3,8];case 7:A.sent(),A.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,Ta(()=>import("./index-CKuPApdr.js"),__vite__mapDeps([12,10,1,2,3,4,5,6,7])).then(function(R){var k;return R.schemaFilter((k=n.plan)===null||k===void 0?void 0:k.track,e)})]:[3,10];case 9:return y=A.sent(),[3,11];case 10:y=void 0,A.label=11;case 11:return m=y,b=cQ(e,n),[4,CQ(e,t.integrations,b,n,h,f).catch(function(){return[]})];case 12:return g=A.sent(),_=Vn(Vn([_Q],v,!0),g,!0),m&&_.push(m),w=((u=n.integrations)===null||u===void 0?void 0:u.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,w?[3,14]:(E=(x=_).push,[4,nQ(t,b["Segment.io"],e.integrations)]);case 13:E.apply(x,[A.sent()]),A.label=14;case 14:return[4,t.register.apply(t,Vn(Vn([],_,!1),c,!1))];case 15:return O=A.sent(),[4,CZ(t,a)];case 16:return A.sent(),Object.entries((l=e.enabledMiddleware)!==null&&l!==void 0?l:{}).some(function(R){var k=R[1];return k})?[4,Ta(()=>import("./index-e6sRI4Lz.js"),__vite__mapDeps([13,1,2,3,4,5,6,7])).then(function(R){var k=R.remoteMiddlewares;return mt(C,void 0,void 0,function(){var D,L;return bt(this,function(j){switch(j.label){case 0:return[4,k(O,e,n.obfuscate)];case 1:return D=j.sent(),L=D.map(function(q){return t.addSourceMiddleware(q)}),[2,Promise.all(L)]}})})})]:[3,18];case 17:A.sent(),A.label=18;case 18:return[4,TZ(t,a)];case 19:return A.sent(),[2,O]}})})}function FQ(r,e,t){var n,i,o,a,s,u,l,c,f;return e===void 0&&(e={}),mt(this,void 0,void 0,function(){var h,d,v,p,m,y,b,g,_,w,x;return bt(this,function(E){switch(E.label){case 0:return e.disable===!0?[2,[new _N,Zs.system()]]:(e.globalAnalyticsKey&&OZ(e.globalAnalyticsKey),r.cdnURL&&lQ(r.cdnURL),e.initialPageview&&t.add(new rC("page",[])),h=LQ(),d=(n=r.cdnURL)!==null&&n!==void 0?n:X2(),(i=r.cdnSettings)!==null&&i!==void 0?(p=i,[3,3]):[3,1]);case 1:return[4,RQ(r.writeKey,d)];case 2:p=E.sent(),E.label=3;case 3:return v=p,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),typeof e.disable!="function"?[3,5]:[4,e.disable(v)];case 4:if(m=E.sent(),m)return[2,[new _N,Zs.system()]];E.label=5;case 5:return y=(a=(o=v.integrations["Segment.io"])===null||o===void 0?void 0:o.retryQueue)!==null&&a!==void 0?a:!0,e=Ke({retryQueue:y},e),b=new DF(Ke(Ke({},r),{cdnSettings:v,cdnURL:d}),e),AQ(b),g=(s=r.plugins)!==null&&s!==void 0?s:[],_=(u=r.classicIntegrations)!==null&&u!==void 0?u:[],w=(l=e.integrations)===null||l===void 0?void 0:l["Segment.io"],dF.initRemoteMetrics(Ke(Ke({},v.metrics),{host:(c=w==null?void 0:w.apiHost)!==null&&c!==void 0?c:(f=v.metrics)===null||f===void 0?void 0:f.host,protocol:w==null?void 0:w.protocol})),[4,jQ(r.writeKey,v,b,e,g,_,t)];case 6:return x=E.sent(),b.initialized=!0,b.emit("initialize",r,e),[4,MQ(b,h,t)];case 7:return E.sent(),[2,[b,x]]}})})}var BQ=(function(r){yo(e,r);function e(){var t=this,n=lF(),i=n.promise,o=n.resolve;return t=r.call(this,function(a){return i.then(function(s){var u=s[0],l=s[1];return FQ(u,l,a)})})||this,t._resolveLoadStart=function(a,s){return o([a,s])},t}return e.prototype.load=function(t,n){return n===void 0&&(n={}),this._resolveLoadStart(t,n),this},e.load=function(t,n){return n===void 0&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(i){return i[0]})},e})(kZ);/*! For license information please see base.mjs.LICENSE.txt */var UQ={5:function(r,e,t){var n=this&&this.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(x[O]=E[O])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=_}g(_,w),_.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var i=t(1018),o=t(8014),a=t(3413),s=t(7315),u=t(1342),l=t(9052),c=t(9155),f=t(9223),h=(function(g){function _(w){var x=g.call(this)||this;return x.isStopped=!1,w?(x.destination=w,o.isSubscription(w)&&w.add(x)):x.destination=e.EMPTY_OBSERVER,x}return n(_,g),_.create=function(w,x,E){return new m(w,x,E)},_.prototype.next=function(w){this.isStopped?b(l.nextNotification(w),this):this._next(w)},_.prototype.error=function(w){this.isStopped?b(l.errorNotification(w),this):(this.isStopped=!0,this._error(w))},_.prototype.complete=function(){this.isStopped?b(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,g.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(w){this.destination.next(w)},_.prototype._error=function(w){try{this.destination.error(w)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_})(o.Subscription);e.Subscriber=h;var d=Function.prototype.bind;function v(g,_){return d.call(g,_)}var p=(function(){function g(_){this.partialObserver=_}return g.prototype.next=function(_){var w=this.partialObserver;if(w.next)try{w.next(_)}catch(x){y(x)}},g.prototype.error=function(_){var w=this.partialObserver;if(w.error)try{w.error(_)}catch(x){y(x)}else y(_)},g.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(w){y(w)}},g})(),m=(function(g){function _(w,x,E){var O,C,A=g.call(this)||this;return i.isFunction(w)||!w?O={next:w??void 0,error:x??void 0,complete:E??void 0}:A&&a.config.useDeprecatedNextContext?((C=Object.create(w)).unsubscribe=function(){return A.unsubscribe()},O={next:w.next&&v(w.next,C),error:w.error&&v(w.error,C),complete:w.complete&&v(w.complete,C)}):O=w,A.destination=new p(O),A}return n(_,g),_})(h);function y(g){a.config.useDeprecatedSynchronousErrorHandling?f.captureError(g):s.reportUnhandledError(g)}function b(g,_){var w=a.config.onStoppedNotification;w&&c.timeoutProvider.setTimeout(function(){return w(g,_)})}e.SafeSubscriber=m,e.EMPTY_OBSERVER={closed:!0,next:u.noop,error:function(g){throw g},complete:u.noop}},45:function(r,e){var t=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0});var n=(function(){function o(a){this.position=0,this.length=a}return o.prototype.getUInt8=function(a){throw new Error("Not implemented")},o.prototype.getInt8=function(a){throw new Error("Not implemented")},o.prototype.getFloat64=function(a){throw new Error("Not implemented")},o.prototype.getVarInt=function(a){throw new Error("Not implemented")},o.prototype.putUInt8=function(a,s){throw new Error("Not implemented")},o.prototype.putInt8=function(a,s){throw new Error("Not implemented")},o.prototype.putFloat64=function(a,s){throw new Error("Not implemented")},o.prototype.getInt16=function(a){return this.getInt8(a)<<8|this.getUInt8(a+1)},o.prototype.getUInt16=function(a){return this.getUInt8(a)<<8|this.getUInt8(a+1)},o.prototype.getInt32=function(a){return this.getInt8(a)<<24|this.getUInt8(a+1)<<16|this.getUInt8(a+2)<<8|this.getUInt8(a+3)},o.prototype.getUInt32=function(a){return this.getUInt8(a)<<24|this.getUInt8(a+1)<<16|this.getUInt8(a+2)<<8|this.getUInt8(a+3)},o.prototype.getInt64=function(a){return this.getInt8(a)<<56|this.getUInt8(a+1)<<48|this.getUInt8(a+2)<<40|this.getUInt8(a+3)<<32|this.getUInt8(a+4)<<24|this.getUInt8(a+5)<<16|this.getUInt8(a+6)<<8|this.getUInt8(a+7)},o.prototype.getSlice=function(a,s){return new i(a,s,this)},o.prototype.putInt16=function(a,s){this.putInt8(a,s>>8),this.putUInt8(a+1,255&s)},o.prototype.putUInt16=function(a,s){this.putUInt8(a,s>>8&255),this.putUInt8(a+1,255&s)},o.prototype.putInt32=function(a,s){this.putInt8(a,s>>24),this.putUInt8(a+1,s>>16&255),this.putUInt8(a+2,s>>8&255),this.putUInt8(a+3,255&s)},o.prototype.putUInt32=function(a,s){this.putUInt8(a,s>>24&255),this.putUInt8(a+1,s>>16&255),this.putUInt8(a+2,s>>8&255),this.putUInt8(a+3,255&s)},o.prototype.putInt64=function(a,s){this.putInt8(a,s>>48),this.putUInt8(a+1,s>>42&255),this.putUInt8(a+2,s>>36&255),this.putUInt8(a+3,s>>30&255),this.putUInt8(a+4,s>>24&255),this.putUInt8(a+5,s>>16&255),this.putUInt8(a+6,s>>8&255),this.putUInt8(a+7,255&s)},o.prototype.putVarInt=function(a,s){for(var u=0;s>1;){var l=s%128;s>=128&&(l+=128),s/=128,this.putUInt8(a+u,l),u+=1}return u},o.prototype.putBytes=function(a,s){for(var u=0,l=s.remaining();u<l;u++)this.putUInt8(a+u,s.readUInt8())},o.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},o.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},o.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},o.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},o.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},o.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},o.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},o.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},o.prototype.readVarInt=function(){var a=this.getVarInt(this.position);return this._updatePos(a.length),a.value},o.prototype.writeUInt8=function(a){this.putUInt8(this._updatePos(1),a)},o.prototype.writeInt8=function(a){this.putInt8(this._updatePos(1),a)},o.prototype.writeInt16=function(a){this.putInt16(this._updatePos(2),a)},o.prototype.writeInt32=function(a){this.putInt32(this._updatePos(4),a)},o.prototype.writeUInt32=function(a){this.putUInt32(this._updatePos(4),a)},o.prototype.writeInt64=function(a){this.putInt64(this._updatePos(8),a)},o.prototype.writeFloat64=function(a){this.putFloat64(this._updatePos(8),a)},o.prototype.writeVarInt=function(a){var s=this.putVarInt(this.position,a);this._updatePos(s)},o.prototype.writeBytes=function(a){this.putBytes(this._updatePos(a.remaining()),a)},o.prototype.readSlice=function(a){return this.getSlice(this._updatePos(a),a)},o.prototype._updatePos=function(a){var s=this.position;return this.position+=a,s},o.prototype.remaining=function(){return this.length-this.position},o.prototype.hasRemaining=function(){return this.remaining()>0},o.prototype.reset=function(){this.position=0},o.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},o.prototype.toHex=function(){for(var a="",s=0;s<this.length;s++){var u=this.getUInt8(s).toString(16);u.length===1&&(u="0"+u),a+=u,s!==this.length-1&&(a+=" ")}return a},o})();e.default=n;var i=(function(o){function a(s,u,l){var c=o.call(this,u)||this;return c._start=s,c._inner=l,c}return t(a,o),a.prototype.putUInt8=function(s,u){this._inner.putUInt8(this._start+s,u)},a.prototype.getUInt8=function(s){return this._inner.getUInt8(this._start+s)},a.prototype.putInt8=function(s,u){this._inner.putInt8(this._start+s,u)},a.prototype.putFloat64=function(s,u){this._inner.putFloat64(this._start+s,u)},a.prototype.getInt8=function(s){return this._inner.getInt8(this._start+s)},a.prototype.getFloat64=function(s){return this._inner.getFloat64(this._start+s)},a})(n)},93:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var t="__isBrokenObject__",n="__reason__";e.createBrokenObject=function(i,o){o===void 0&&(o={});var a=function(){throw i};return new Proxy(o,{get:function(s,u){return u===t||(u===n?i:void(u!=="toJSON"&&a()))},set:a,apply:a,construct:a,defineProperty:a,deleteProperty:a,getOwnPropertyDescriptor:a,getPrototypeOf:a,has:a,isExtensible:a,ownKeys:a,preventExtensions:a,setPrototypeOf:a})},e.isBrokenObject=function(i){return i!==null&&typeof i=="object"&&i[t]===!0},e.getBrokenObjectReason=function(i){return i[n]}},95:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSubject=void 0;var i=(function(o){function a(){var s=o!==null&&o.apply(this,arguments)||this;return s._value=null,s._hasValue=!1,s._isComplete=!1,s}return n(a,o),a.prototype._checkFinalizedStatuses=function(s){var u=this,l=u.hasError,c=u._hasValue,f=u._value,h=u.thrownError,d=u.isStopped,v=u._isComplete;l?s.error(h):(d||v)&&(c&&s.next(f),s.complete())},a.prototype.next=function(s){this.isStopped||(this._value=s,this._hasValue=!0)},a.prototype.complete=function(){var s=this,u=s._hasValue,l=s._value;s._isComplete||(this._isComplete=!0,u&&o.prototype.next.call(this,l),o.prototype.complete.call(this))},a})(t(2483).Subject);e.AsyncSubject=i},137:r=>{r.exports=class{constructor(e,t,n,i){let o;if(typeof e=="object"){let a=e;e=a.k_p,t=a.k_i,n=a.k_d,i=a.dt,o=a.i_max}this.k_p=typeof e=="number"?e:1,this.k_i=t||0,this.k_d=n||0,this.dt=i||0,this.i_max=o||0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}setTarget(e){this.target=e}update(e){this.currentValue=e;let t=this.dt;if(!t){let o=Date.now();t=this.lastTime===0?0:(o-this.lastTime)/1e3,this.lastTime=o}typeof t=="number"&&t!==0||(t=1);let n=this.target-this.currentValue;if(this.sumError=this.sumError+n*t,this.i_max>0&&Math.abs(this.sumError)>this.i_max){let o=this.sumError>0?1:-1;this.sumError=o*this.i_max}let i=(n-this.lastError)/t;return this.lastError=n,this.k_p*n+this.k_i*this.sumError+this.k_d*i}reset(){this.sumError=0,this.lastError=0,this.lastTime=0}}},182:function(r,e,t){var n=this&&this.__extends||(function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualAction=e.VirtualTimeScheduler=void 0;var i=t(5267),o=t(8014),a=(function(u){function l(c,f){c===void 0&&(c=s),f===void 0&&(f=1/0);var h=u.call(this,c,function(){return h.frame})||this;return h.maxFrames=f,h.frame=0,h.index=-1,h}return n(l,u),l.prototype.flush=function(){for(var c,f,h=this.actions,d=this.maxFrames;(f=h[0])&&f.delay<=d&&(h.shift(),this.frame=f.delay,!(c=f.execute(f.state,f.delay))););if(c){for(;f=h.shift();)f.unsubscribe();throw c}},l.frameTimeFactor=10,l})(t(5648).AsyncScheduler);e.VirtualTimeScheduler=a;var s=(function(u){function l(c,f,h){h===void 0&&(h=c.index+=1);var d=u.call(this,c,f)||this;return d.scheduler=c,d.work=f,d.index=h,d.active=!0,d.index=c.index=h,d}return n(l,u),l.prototype.schedule=function(c,f){if(f===void 0&&(f=0),Number.isFinite(f)){if(!this.id)return u.prototype.schedule.call(this,c,f);this.active=!1;var h=new l(this.scheduler,this.work);return this.add(h),h.schedule(c,f)}return o.Subscription.EMPTY},l.prototype.requestAsyncId=function(c,f,h){h===void 0&&(h=0),this.delay=c.frame+h;var d=c.actions;return d.push(this),d.sort(l.sortActions),1},l.prototype.recycleAsyncId=function(c,f,h){},l.prototype._execute=function(c,f){if(this.active===!0)return u.prototype._execute.call(this,c,f)},l.sortActions=function(c,f){return c.delay===f.delay?c.index===f.index?0:c.index>f.index?1:-1:c.delay>f.delay?1:-1},l})(i.AsyncAction);e.VirtualAction=s},187:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=void 0;var n=t(7286),i=t(3638);e.zipAll=function(o){return i.joinAllInternals(n.zip,o)}},206:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=n(t(4151));e.Rediscovery=i.default;var o=n(t(9018));e.RoutingTable=o.default,e.default=i.default},245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.not=void 0,e.not=function(t,n){return function(i,o){return!t.call(n,i,o)}}},269:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=void 0;var n=t(3865),i=t(1107),o=t(7843);e.startWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=i.popScheduler(a);return o.operate(function(l,c){(u?n.concat(a,l,u):n.concat(a,l)).subscribe(c)})}},326:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_8=e.BOLT_PROTOCOL_V5_7=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0,e.FETCH_ALL=-1,e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,e.DEFAULT_POOL_MAX_SIZE=100,e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,e.ACCESS_MODE_READ="READ",e.ACCESS_MODE_WRITE="WRITE",e.BOLT_PROTOCOL_V1=1,e.BOLT_PROTOCOL_V2=2,e.BOLT_PROTOCOL_V3=3,e.BOLT_PROTOCOL_V4_0=4,e.BOLT_PROTOCOL_V4_1=4.1,e.BOLT_PROTOCOL_V4_2=4.2,e.BOLT_PROTOCOL_V4_3=4.3,e.BOLT_PROTOCOL_V4_4=4.4,e.BOLT_PROTOCOL_V5_0=5,e.BOLT_PROTOCOL_V5_1=5.1,e.BOLT_PROTOCOL_V5_2=5.2,e.BOLT_PROTOCOL_V5_3=5.3,e.BOLT_PROTOCOL_V5_4=5.4,e.BOLT_PROTOCOL_V5_5=5.5,e.BOLT_PROTOCOL_V5_6=5.6,e.BOLT_PROTOCOL_V5_7=5.7,e.BOLT_PROTOCOL_V5_8=5.8,e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},347:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromEventPattern=void 0;var n=t(4662),i=t(1018),o=t(1251);e.fromEventPattern=function a(s,u,l){return l?a(s,u).pipe(o.mapOneOrManyArgs(l)):new n.Observable(function(c){var f=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return c.next(d.length===1?d[0]:d)},h=s(f);return i.isFunction(u)?function(){return u(f,h)}:void 0})}},361:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)p.push(h.value)}catch(m){d={error:m}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return p},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var o=t(7843),a=t(7302),s=t(1107),u=t(4917);e.merge=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l),h=s.popNumber(l,1/0);return o.operate(function(d,v){a.mergeAll(h)(u.from(i([d],n(l)),f)).subscribe(v)})}},373:function(r,e,t){var n=this&&this.__extends||(function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}c(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})(),i=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var o=i(t(45)),a=t(5319),s=i(t(5553)),u=(function(c){function f(h,d){var v=c.call(this,0)||this;return v._bufferSize=d||1400,v._ch=h,v._buffer=(0,a.alloc)(v._bufferSize),v._currentChunkStart=0,v._chunkOpen=!1,v}return n(f,c),f.prototype.putUInt8=function(h,d){this._ensure(1),this._buffer.writeUInt8(d)},f.prototype.putInt8=function(h,d){this._ensure(1),this._buffer.writeInt8(d)},f.prototype.putFloat64=function(h,d){this._ensure(8),this._buffer.writeFloat64(d)},f.prototype.putBytes=function(h,d){for(;d.remaining()>0;)this._ensure(1),this._buffer.remaining()>d.remaining()?this._buffer.writeBytes(d):this._buffer.writeBytes(d.readSlice(this._buffer.remaining()));return this},f.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var h=this._buffer;this._buffer=null,this._ch.write(h.getSlice(0,h.position)),this._buffer=(0,a.alloc)(this._bufferSize),this._chunkOpen=!1}return this},f.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},f.prototype._ensure=function(h){var d=this._chunkOpen?h:h+2;this._buffer.remaining()<d&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},f.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var h=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,h),this._chunkOpen=!1}},f})(o.default);e.Chunker=u;var l=(function(){function c(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return c.prototype.AWAITING_CHUNK=function(f){return f.remaining()>=2?this._onHeader(f.readUInt16()):(this._partialChunkHeader=f.readUInt8()<<8,this.IN_HEADER)},c.prototype.IN_HEADER=function(f){return this._onHeader(65535&(this._partialChunkHeader|f.readUInt8()))},c.prototype.IN_CHUNK=function(f){return this._chunkSize<=f.remaining()?(this._currentMessage.push(f.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=f.remaining(),this._currentMessage.push(f.readSlice(f.remaining())),this.IN_CHUNK)},c.prototype.CLOSED=function(f){},c.prototype._onHeader=function(f){if(f===0){var h=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:h=this._currentMessage[0];break;default:h=new s.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(h),this.AWAITING_CHUNK}return this._chunkSize=f,this.IN_CHUNK},c.prototype.write=function(f){for(;f.hasRemaining();)this._state=this._state(f)},c})();e.Dechunker=l},378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=void 0;var n=t(7843),i=t(3111);e.defaultIfEmpty=function(o){return n.operate(function(a,s){var u=!1;a.subscribe(i.createOperatorSubscriber(s,function(l){u=!0,s.next(l)},function(){u||s.next(o),s.complete()}))})}},397:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var n=t(9305);t(9014),e.assertTxConfigIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i&&!i.isEmpty()){var s=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertDatabaseIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertImpersonatedUserIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(i,"."));throw o(s.message),a.onError(s),s}},e.assertNotificationFilterIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i!==void 0){var s=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(i),"."));throw o(s.message),a.onError(s),s}}},407:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,p=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(d=p.next()).done;)m.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(v)throw v.error}}return m};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var o=t(6587),a=function(c,f,h,d,v){this.scheme=c,this.host=f,this.port=h,this.hostAndPort=d,this.query=v};function s(c,f,h){if((c=(c??"").trim())==="")throw new Error("Illegal empty ".concat(f," in URL query '").concat(h,"'"));return c}function u(c){var f=c.charAt(0)==="[",h=c.charAt(c.length-1)==="]";if(f||h){if(f&&h)return c;throw new Error("Illegal IPv6 address ".concat(c))}return"[".concat(c,"]")}function l(c){return c==="http"?7474:c==="https"?7473:7687}e.Url=a,e.parseDatabaseUrl=function(c){var f;(0,o.assertString)(c,"URL");var h,d=(function(w){return(w=w.trim()).includes("://")?{schemeMissing:!1,url:w}:{schemeMissing:!0,url:"none://".concat(w)}})(c),v=(function(w){function x(C,A){var R=C.indexOf(A);return R>=0?[C.substring(0,R),C[R],C.substring(R+1)]:[C,"",""]}var E,O={};return(E=x(w,":"))[1]===":"&&(O.scheme=decodeURIComponent(E[0]),w=E[2]),(E=x(w,"#"))[1]==="#"&&(O.fragment=decodeURIComponent(E[2]),w=E[0]),(E=x(w,"?"))[1]==="?"&&(O.query=E[2],w=E[0]),w.startsWith("//")?(E=x(w.substr(2),"/"),(O=n(n({},O),(function(C){var A,R={};(A=(function(j,q){var B=j.lastIndexOf(q);return B>=0?[j.substring(0,B),j[B],j.substring(B+1)]:["","",j]})(C,"@"))[1]==="@"&&(R.userInfo=decodeURIComponent(A[0]),C=A[2]);var k=i((function(j,q,B){var U=x(j,q),W=x(U[2],B);return[W[0],W[2]]})(C,"[","]"),2),D=k[0],L=k[1];return D!==""?(R.host=D,A=x(L,":")):(A=x(C,":"),R.host=A[0]),A[1]===":"&&(R.port=A[2]),R})(E[0]))).path=E[1]+E[2]):O.path=w,O})(d.url),p=d.schemeMissing?null:(function(w){return w!=null?((w=w.trim()).charAt(w.length-1)===":"&&(w=w.substring(0,w.length-1)),w):null})(v.scheme),m=(function(w){if(w==null)throw new Error("Unable to extract host from null or undefined URL");return w.trim()})(v.host),y=(function(w){if(w===""||w==null)throw new Error("Illegal host ".concat(w));return w.includes(":")?u(w):w})(m),b=(function(w,x){var E=typeof w=="string"?parseInt(w,10):w;return E==null||isNaN(E)?l(x):E})(v.port,p),g="".concat(y,":").concat(b),_=(function(w,x){var E=w!=null?(function(C){return((C=(C??"").trim())==null?void 0:C.charAt(0))==="?"&&(C=C.substring(1,C.length)),C})(w):null,O={};return E!=null&&E.split("&").forEach(function(C){var A=C.split("=");if(A.length!==2)throw new Error("Invalid parameters: '".concat(A.toString(),"' in URL '").concat(x,"'."));var R=s(A[0],"key",x),k=s(A[1],"value",x);if(O[R]!==void 0)throw new Error("Duplicated query parameters with key '".concat(R,"' in URL '").concat(x,"'"));O[R]=k}),O})((f=v.query)!==null&&f!==void 0?f:typeof(h=v.resourceName)!="string"?null:i(h.split("?"),2)[1],c);return new a(p,m,b,g,_)},e.formatIPv4Address=function(c,f){return"".concat(c,":").concat(f)},e.formatIPv6Address=function(c,f){var h=u(c);return"".concat(h,":").concat(f)},e.defaultPortForScheme=l},481:(r,e,t)=>{r.exports=t(137)},489:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeInterval=e.timeInterval=void 0;var n=t(7961),i=t(7843),o=t(3111);e.timeInterval=function(s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=s.now();u.subscribe(o.createOperatorSubscriber(l,function(f){var h=s.now(),d=h-c;c=h,l.next(new a(f,d))}))})};var a=function(s,u){this.value=s,this.interval=u};e.TimeInterval=a},490:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=void 0;var n=t(7843),i=t(3111),o=t(1342);e.ignoreElements=function(){return n.operate(function(a,s){a.subscribe(i.createOperatorSubscriber(s,o.noop))})}},582:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=void 0;var n=t(7843),i=t(3111),o=t(9445);e.sequenceEqual=function(a,s){return s===void 0&&(s=function(u,l){return u===l}),n.operate(function(u,l){var c={buffer:[],complete:!1},f={buffer:[],complete:!1},h=function(v){l.next(v),l.complete()},d=function(v,p){var m=i.createOperatorSubscriber(l,function(y){var b=p.buffer,g=p.complete;b.length===0?g?h(!1):v.buffer.push(y):!s(y,b.shift())&&h(!1)},function(){v.complete=!0;var y=p.complete,b=p.buffer;y&&h(b.length===0),m==null||m.unsubscribe()});return m};u.subscribe(d(c,f)),o.innerFrom(a).subscribe(d(f,c))})}},614:function(r,e){var t=this&&this.__awaiter||function(i,o,a,s){return new(a||(a=Promise))(function(u,l){function c(d){try{h(s.next(d))}catch(v){l(v)}}function f(d){try{h(s.throw(d))}catch(v){l(v)}}function h(d){var v;d.done?u(d.value):(v=d.value,v instanceof a?v:new a(function(p){p(v)})).then(c,f)}h((s=s.apply(i,o||[])).next())})},n=this&&this.__generator||function(i,o){var a,s,u,l,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(d){return(function(v){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,v[0]&&(c=0)),c;)try{if(a=1,s&&(u=2&v[0]?s.return:v[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,v[1])).done)return u;switch(s=0,u&&(v=[2&v[0],u.value]),v[0]){case 0:case 1:u=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,s=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(!((u=(u=c.trys).length>0&&u[u.length-1])||v[0]!==6&&v[0]!==2)){c=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){c.label=v[1];break}if(v[0]===6&&c.label<u[1]){c.label=u[1],u=v;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(v);break}u[2]&&c.ops.pop(),c.trys.pop();continue}v=o.call(i,c)}catch(p){v=[6,p],s=0}finally{a=u=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}})([h,d])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(i){return t(this,void 0,void 0,function(){return n(this,function(o){return[2,i]})})}}},715:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(i){this._offset=i||0}return n.prototype.next=function(i){if(i===0)return-1;var o=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),o%i},n})();e.default=t},754:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var p=Object.getOwnPropertyDescriptor(h,d);p&&!("get"in p?!h.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,p)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var a=o(t(6587)),s=t(9691),u=t(3371),l=(function(){function f(h,d){(function(v){v!=null&&a.assertObject(v,"Transaction config")})(h),this.timeout=(function(v,p){if(a.isObject(v)&&v.timeout!=null){a.assertNumberOrInteger(v.timeout,"Transaction timeout"),(function(y){return typeof y.timeout=="number"&&!Number.isInteger(y.timeout)})(v)&&(p==null?void 0:p.isInfoEnabled())===!0&&(p==null||p.info("Transaction timeout expected to be an integer, got: ".concat(v.timeout,". The value will be rounded up.")));var m=(0,u.int)(v.timeout,{ceilFloat:!0});if(m.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return m}return null})(h,d),this.metadata=(function(v){if(a.isObject(v)&&v.metadata!=null){var p=v.metadata;if(a.assertObject(p,"config.metadata"),Object.keys(p).length!==0)return p}return null})(h)}return f.empty=function(){return c},f.prototype.isEmpty=function(){return Object.values(this).every(function(h){return h==null})},f})();e.TxConfig=l;var c=new l({})},766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publish=void 0;var n=t(2483),i=t(9247),o=t(1483);e.publish=function(a){return a?function(s){return o.connect(a)(s)}:function(s){return i.multicast(new n.Subject)(s)}}},783:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;var n=t(7843),i=t(3111);e.filter=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){return o.call(a,c,l++)&&u.next(c)}))})}},827:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsapScheduler=void 0;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a.prototype.flush=function(s){this._active=!0;var u=this._scheduled;this._scheduled=void 0;var l,c=this.actions;s=s||c.shift();do if(l=s.execute(s.state,s.delay))break;while((s=c[0])&&s.id===u&&c.shift());if(this._active=!1,l){for(;(s=c[0])&&s.id===u&&c.shift();)s.unsubscribe();throw l}},a})(t(5648).AsyncScheduler);e.AsapScheduler=i},844:function(r,e,t){var n=this&&this.__extends||(function(){var d=function(v,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},d(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=v}d(v,p),v.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(1711)),a=t(397),s=i(t(7449)),u=i(t(3321)),l=i(t(7021)),c=t(9014),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_0,h=(function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return n(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(m){return m(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.initialize=function(p){var m=this,y=p===void 0?{}:p,b=y.userAgent,g=(y.boltAgent,y.authToken),_=y.notificationFilter,w=y.onError,x=y.onComplete,E=new c.LoginObserver({onError:function(O){return m._onLoginError(O,w)},onCompleted:function(O){return m._onLoginCompleted(O,g,x)}});return(0,a.assertNotificationFilterIsEmpty)(_,this._onProtocolError,E),this.write(l.default.hello(b,g,this._serversideRouting),E,!0),E},v})(o.default);e.default=h},846:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.take=void 0;var n=t(8616),i=t(7843),o=t(3111);e.take=function(a){return a<=0?function(){return n.EMPTY}:i.operate(function(s,u){var l=0;s.subscribe(o.createOperatorSubscriber(u,function(c){++l<=a&&(u.next(c),a<=l&&u.complete())}))})}},854:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAsyncIterable=void 0;var n=t(4662),i=t(7110);e.scheduleAsyncIterable=function(o,a){if(!o)throw new Error("Iterable cannot be null");return new n.Observable(function(s){i.executeSchedule(s,a,function(){var u=o[Symbol.asyncIterator]();i.executeSchedule(s,a,function(){u.next().then(function(l){l.done?s.complete():s.next(l.value)})},0,!0)})})}},914:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0;var n=t(7961),i=t(8766),o=t(4092);e.delay=function(a,s){s===void 0&&(s=n.asyncScheduler);var u=o.timer(a,s);return i.delayWhen(function(){return u})}},934:function(r,e,t){var n=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(p){for(var m,y=1,b=arguments.length;y<b;y++)for(var g in m=arguments[y])Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g]);return p},i.apply(this,arguments)},o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(6345)),s=o(t(3019)),u=o(t(3321)),l=o(t(7021)),c=t(9014),f=t(9305).internal.constants,h=f.BOLT_PROTOCOL_V5_2,d=f.FETCH_ALL,v=(function(p){function m(){return p!==null&&p.apply(this,arguments)||this}return n(m,p),Object.defineProperty(m.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(b){return b(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),m.prototype.initialize=function(y){var b=this,g=y===void 0?{}:y,_=g.userAgent,w=(g.boltAgent,g.authToken),x=g.notificationFilter,E=g.onError,O=g.onComplete,C={},A=new c.LoginObserver({onError:function(R){return b._onLoginError(R,E)},onCompleted:function(R){return C.metadata=R,b._onLoginCompleted(R)}});return this.write(l.default.hello5x2(_,x,this._serversideRouting),A,!1),this.logon({authToken:w,onComplete:function(R){return O(i(i({},R),C.metadata))},onError:E,flush:!0})},m.prototype.beginTransaction=function(y){var b=y===void 0?{}:y,g=b.bookmarks,_=b.txConfig,w=b.database,x=b.mode,E=b.impersonatedUser,O=b.notificationFilter,C=b.beforeError,A=b.afterError,R=b.beforeComplete,k=b.afterComplete,D=new c.ResultStreamObserver({server:this._server,beforeError:C,afterError:A,beforeComplete:R,afterComplete:k});return D.prepareToHandleSingleResponse(),this.write(l.default.begin({bookmarks:g,txConfig:_,database:w,mode:x,impersonatedUser:E,notificationFilter:O}),D,!0),D},m.prototype.run=function(y,b,g){var _=g===void 0?{}:g,w=_.bookmarks,x=_.txConfig,E=_.database,O=_.mode,C=_.impersonatedUser,A=_.notificationFilter,R=_.beforeKeys,k=_.afterKeys,D=_.beforeError,L=_.afterError,j=_.beforeComplete,q=_.afterComplete,B=_.flush,U=B===void 0||B,W=_.reactive,H=W!==void 0&&W,Y=_.fetchSize,Z=Y===void 0?d:Y,ce=_.highRecordWatermark,$=ce===void 0?Number.MAX_VALUE:ce,K=_.lowRecordWatermark,ie=K===void 0?Number.MAX_VALUE:K,ae=new c.ResultStreamObserver({server:this._server,reactive:H,fetchSize:Z,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:R,afterKeys:k,beforeError:D,afterError:L,beforeComplete:j,afterComplete:q,highRecordWatermark:$,lowRecordWatermark:ie}),le=H;return this.write(l.default.runWithMetadata(y,b,{bookmarks:w,txConfig:x,database:E,mode:O,impersonatedUser:C,notificationFilter:A}),ae,le&&U),H||this.write(l.default.pull({n:Z}),ae,U),ae},m})(a.default);e.default=v},983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(1983),s=t(1018);e.mergeMap=function u(l,c,f){return f===void 0&&(f=1/0),s.isFunction(c)?u(function(h,d){return n.map(function(v,p){return c(h,v,d,p)})(i.innerFrom(l(h,d)))},f):(typeof c=="number"&&(f=c),o.operate(function(h,d){return a.mergeInternals(h,d,l,f)}))}},1004:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.of=void 0;var n=t(1107),i=t(4917);e.of=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n.popScheduler(o);return i.from(o,s)}},1018:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=function(t){return typeof t=="function"}},1038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.count=void 0;var n=t(9139);e.count=function(i){return n.reduce(function(o,a,s){return!i||i(a,s)?o+1:o},0)}},1048:(r,e,t)=>{const n=t(7991),i=t(9318),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(F){return+F!=F&&(F=0),u.alloc(+F)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(F){if(F>a)throw new RangeError('The value "'+F+'" is invalid for option "size"');const G=new Uint8Array(F);return Object.setPrototypeOf(G,u.prototype),G}function u(F,G,X){if(typeof F=="number"){if(typeof G=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(F)}return l(F,G,X)}function l(F,G,X){if(typeof F=="string")return(function(ge,xe){if(typeof xe=="string"&&xe!==""||(xe="utf8"),!u.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);const Ne=0|p(ge,xe);let He=s(Ne);const at=He.write(ge,xe);return at!==Ne&&(He=He.slice(0,at)),He})(F,G);if(ArrayBuffer.isView(F))return(function(ge){if(ve(ge,Uint8Array)){const xe=new Uint8Array(ge);return d(xe.buffer,xe.byteOffset,xe.byteLength)}return h(ge)})(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(ve(F,ArrayBuffer)||F&&ve(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(F,SharedArrayBuffer)||F&&ve(F.buffer,SharedArrayBuffer)))return d(F,G,X);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const se=F.valueOf&&F.valueOf();if(se!=null&&se!==F)return u.from(se,G,X);const pe=(function(ge){if(u.isBuffer(ge)){const xe=0|v(ge.length),Ne=s(xe);return Ne.length===0||ge.copy(Ne,0,0,xe),Ne}return ge.length!==void 0?typeof ge.length!="number"||_e(ge.length)?s(0):h(ge):ge.type==="Buffer"&&Array.isArray(ge.data)?h(ge.data):void 0})(F);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return u.from(F[Symbol.toPrimitive]("string"),G,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}function c(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function f(F){return c(F),s(F<0?0:0|v(F))}function h(F){const G=F.length<0?0:0|v(F.length),X=s(G);for(let se=0;se<G;se+=1)X[se]=255&F[se];return X}function d(F,G,X){if(G<0||F.byteLength<G)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<G+(X||0))throw new RangeError('"length" is outside of buffer bounds');let se;return se=G===void 0&&X===void 0?new Uint8Array(F):X===void 0?new Uint8Array(F,G):new Uint8Array(F,G,X),Object.setPrototypeOf(se,u.prototype),se}function v(F){if(F>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|F}function p(F,G){if(u.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||ve(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);const X=F.length,se=arguments.length>2&&arguments[2]===!0;if(!se&&X===0)return 0;let pe=!1;for(;;)switch(G){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return ee(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*X;case"hex":return X>>>1;case"base64":return re(F).length;default:if(pe)return se?-1:ee(F).length;G=(""+G).toLowerCase(),pe=!0}}function m(F,G,X){let se=!1;if((G===void 0||G<0)&&(G=0),G>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0)<=(G>>>=0))return"";for(F||(F="utf8");;)switch(F){case"hex":return L(this,G,X);case"utf8":case"utf-8":return A(this,G,X);case"ascii":return k(this,G,X);case"latin1":case"binary":return D(this,G,X);case"base64":return C(this,G,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,G,X);default:if(se)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),se=!0}}function y(F,G,X){const se=F[G];F[G]=F[X],F[X]=se}function b(F,G,X,se,pe){if(F.length===0)return-1;if(typeof X=="string"?(se=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),_e(X=+X)&&(X=pe?0:F.length-1),X<0&&(X=F.length+X),X>=F.length){if(pe)return-1;X=F.length-1}else if(X<0){if(!pe)return-1;X=0}if(typeof G=="string"&&(G=u.from(G,se)),u.isBuffer(G))return G.length===0?-1:g(F,G,X,se,pe);if(typeof G=="number")return G&=255,typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(F,G,X):Uint8Array.prototype.lastIndexOf.call(F,G,X):g(F,[G],X,se,pe);throw new TypeError("val must be string, number or Buffer")}function g(F,G,X,se,pe){let ge,xe=1,Ne=F.length,He=G.length;if(se!==void 0&&((se=String(se).toLowerCase())==="ucs2"||se==="ucs-2"||se==="utf16le"||se==="utf-16le")){if(F.length<2||G.length<2)return-1;xe=2,Ne/=2,He/=2,X/=2}function at(Ze,et){return xe===1?Ze[et]:Ze.readUInt16BE(et*xe)}if(pe){let Ze=-1;for(ge=X;ge<Ne;ge++)if(at(F,ge)===at(G,Ze===-1?0:ge-Ze)){if(Ze===-1&&(Ze=ge),ge-Ze+1===He)return Ze*xe}else Ze!==-1&&(ge-=ge-Ze),Ze=-1}else for(X+He>Ne&&(X=Ne-He),ge=X;ge>=0;ge--){let Ze=!0;for(let et=0;et<He;et++)if(at(F,ge+et)!==at(G,et)){Ze=!1;break}if(Ze)return ge}return-1}function _(F,G,X,se){X=Number(X)||0;const pe=F.length-X;se?(se=Number(se))>pe&&(se=pe):se=pe;const ge=G.length;let xe;for(se>ge/2&&(se=ge/2),xe=0;xe<se;++xe){const Ne=parseInt(G.substr(2*xe,2),16);if(_e(Ne))return xe;F[X+xe]=Ne}return xe}function w(F,G,X,se){return he(ee(G,F.length-X),F,X,se)}function x(F,G,X,se){return he((function(pe){const ge=[];for(let xe=0;xe<pe.length;++xe)ge.push(255&pe.charCodeAt(xe));return ge})(G),F,X,se)}function E(F,G,X,se){return he(re(G),F,X,se)}function O(F,G,X,se){return he((function(pe,ge){let xe,Ne,He;const at=[];for(let Ze=0;Ze<pe.length&&!((ge-=2)<0);++Ze)xe=pe.charCodeAt(Ze),Ne=xe>>8,He=xe%256,at.push(He),at.push(Ne);return at})(G,F.length-X),F,X,se)}function C(F,G,X){return G===0&&X===F.length?n.fromByteArray(F):n.fromByteArray(F.slice(G,X))}function A(F,G,X){X=Math.min(F.length,X);const se=[];let pe=G;for(;pe<X;){const ge=F[pe];let xe=null,Ne=ge>239?4:ge>223?3:ge>191?2:1;if(pe+Ne<=X){let He,at,Ze,et;switch(Ne){case 1:ge<128&&(xe=ge);break;case 2:He=F[pe+1],(192&He)==128&&(et=(31&ge)<<6|63&He,et>127&&(xe=et));break;case 3:He=F[pe+1],at=F[pe+2],(192&He)==128&&(192&at)==128&&(et=(15&ge)<<12|(63&He)<<6|63&at,et>2047&&(et<55296||et>57343)&&(xe=et));break;case 4:He=F[pe+1],at=F[pe+2],Ze=F[pe+3],(192&He)==128&&(192&at)==128&&(192&Ze)==128&&(et=(15&ge)<<18|(63&He)<<12|(63&at)<<6|63&Ze,et>65535&&et<1114112&&(xe=et))}}xe===null?(xe=65533,Ne=1):xe>65535&&(xe-=65536,se.push(xe>>>10&1023|55296),xe=56320|1023&xe),se.push(xe),pe+=Ne}return(function(ge){const xe=ge.length;if(xe<=R)return String.fromCharCode.apply(String,ge);let Ne="",He=0;for(;He<xe;)Ne+=String.fromCharCode.apply(String,ge.slice(He,He+=R));return Ne})(se)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=(function(){try{const F=new Uint8Array(1),G={foo:function(){return 42}};return Object.setPrototypeOf(G,Uint8Array.prototype),Object.setPrototypeOf(F,G),F.foo()===42}catch{return!1}})(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(F,G,X){return l(F,G,X)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(F,G,X){return(function(se,pe,ge){return c(se),se<=0?s(se):pe!==void 0?typeof ge=="string"?s(se).fill(pe,ge):s(se).fill(pe):s(se)})(F,G,X)},u.allocUnsafe=function(F){return f(F)},u.allocUnsafeSlow=function(F){return f(F)},u.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==u.prototype},u.compare=function(F,G){if(ve(F,Uint8Array)&&(F=u.from(F,F.offset,F.byteLength)),ve(G,Uint8Array)&&(G=u.from(G,G.offset,G.byteLength)),!u.isBuffer(F)||!u.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===G)return 0;let X=F.length,se=G.length;for(let pe=0,ge=Math.min(X,se);pe<ge;++pe)if(F[pe]!==G[pe]){X=F[pe],se=G[pe];break}return X<se?-1:se<X?1:0},u.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(F,G){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return u.alloc(0);let X;if(G===void 0)for(G=0,X=0;X<F.length;++X)G+=F[X].length;const se=u.allocUnsafe(G);let pe=0;for(X=0;X<F.length;++X){let ge=F[X];if(ve(ge,Uint8Array))pe+ge.length>se.length?(u.isBuffer(ge)||(ge=u.from(ge)),ge.copy(se,pe)):Uint8Array.prototype.set.call(se,ge,pe);else{if(!u.isBuffer(ge))throw new TypeError('"list" argument must be an Array of Buffers');ge.copy(se,pe)}pe+=ge.length}return se},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const F=this.length;if(F%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<F;G+=2)y(this,G,G+1);return this},u.prototype.swap32=function(){const F=this.length;if(F%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<F;G+=4)y(this,G,G+3),y(this,G+1,G+2);return this},u.prototype.swap64=function(){const F=this.length;if(F%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<F;G+=8)y(this,G,G+7),y(this,G+1,G+6),y(this,G+2,G+5),y(this,G+3,G+4);return this},u.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?A(this,0,F):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(F){if(!u.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F||u.compare(this,F)===0},u.prototype.inspect=function(){let F="";const G=e.INSPECT_MAX_BYTES;return F=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(F+=" ... "),"<Buffer "+F+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(F,G,X,se,pe){if(ve(F,Uint8Array)&&(F=u.from(F,F.offset,F.byteLength)),!u.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(G===void 0&&(G=0),X===void 0&&(X=F?F.length:0),se===void 0&&(se=0),pe===void 0&&(pe=this.length),G<0||X>F.length||se<0||pe>this.length)throw new RangeError("out of range index");if(se>=pe&&G>=X)return 0;if(se>=pe)return-1;if(G>=X)return 1;if(this===F)return 0;let ge=(pe>>>=0)-(se>>>=0),xe=(X>>>=0)-(G>>>=0);const Ne=Math.min(ge,xe),He=this.slice(se,pe),at=F.slice(G,X);for(let Ze=0;Ze<Ne;++Ze)if(He[Ze]!==at[Ze]){ge=He[Ze],xe=at[Ze];break}return ge<xe?-1:xe<ge?1:0},u.prototype.includes=function(F,G,X){return this.indexOf(F,G,X)!==-1},u.prototype.indexOf=function(F,G,X){return b(this,F,G,X,!0)},u.prototype.lastIndexOf=function(F,G,X){return b(this,F,G,X,!1)},u.prototype.write=function(F,G,X,se){if(G===void 0)se="utf8",X=this.length,G=0;else if(X===void 0&&typeof G=="string")se=G,X=this.length,G=0;else{if(!isFinite(G))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");G>>>=0,isFinite(X)?(X>>>=0,se===void 0&&(se="utf8")):(se=X,X=void 0)}const pe=this.length-G;if((X===void 0||X>pe)&&(X=pe),F.length>0&&(X<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let ge=!1;for(;;)switch(se){case"hex":return _(this,F,G,X);case"utf8":case"utf-8":return w(this,F,G,X);case"ascii":case"latin1":case"binary":return x(this,F,G,X);case"base64":return E(this,F,G,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,F,G,X);default:if(ge)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function k(F,G,X){let se="";X=Math.min(F.length,X);for(let pe=G;pe<X;++pe)se+=String.fromCharCode(127&F[pe]);return se}function D(F,G,X){let se="";X=Math.min(F.length,X);for(let pe=G;pe<X;++pe)se+=String.fromCharCode(F[pe]);return se}function L(F,G,X){const se=F.length;(!G||G<0)&&(G=0),(!X||X<0||X>se)&&(X=se);let pe="";for(let ge=G;ge<X;++ge)pe+=Oe[F[ge]];return pe}function j(F,G,X){const se=F.slice(G,X);let pe="";for(let ge=0;ge<se.length-1;ge+=2)pe+=String.fromCharCode(se[ge]+256*se[ge+1]);return pe}function q(F,G,X){if(F%1!=0||F<0)throw new RangeError("offset is not uint");if(F+G>X)throw new RangeError("Trying to access beyond buffer length")}function B(F,G,X,se,pe,ge){if(!u.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(G>pe||G<ge)throw new RangeError('"value" argument is out of bounds');if(X+se>F.length)throw new RangeError("Index out of range")}function U(F,G,X,se,pe){ie(G,se,pe,F,X,7);let ge=Number(G&BigInt(4294967295));F[X++]=ge,ge>>=8,F[X++]=ge,ge>>=8,F[X++]=ge,ge>>=8,F[X++]=ge;let xe=Number(G>>BigInt(32)&BigInt(4294967295));return F[X++]=xe,xe>>=8,F[X++]=xe,xe>>=8,F[X++]=xe,xe>>=8,F[X++]=xe,X}function W(F,G,X,se,pe){ie(G,se,pe,F,X,7);let ge=Number(G&BigInt(4294967295));F[X+7]=ge,ge>>=8,F[X+6]=ge,ge>>=8,F[X+5]=ge,ge>>=8,F[X+4]=ge;let xe=Number(G>>BigInt(32)&BigInt(4294967295));return F[X+3]=xe,xe>>=8,F[X+2]=xe,xe>>=8,F[X+1]=xe,xe>>=8,F[X]=xe,X+8}function H(F,G,X,se,pe,ge){if(X+se>F.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Y(F,G,X,se,pe){return G=+G,X>>>=0,pe||H(F,0,X,4),i.write(F,G,X,se,23,4),X+4}function Z(F,G,X,se,pe){return G=+G,X>>>=0,pe||H(F,0,X,8),i.write(F,G,X,se,52,8),X+8}u.prototype.slice=function(F,G){const X=this.length;(F=~~F)<0?(F+=X)<0&&(F=0):F>X&&(F=X),(G=G===void 0?X:~~G)<0?(G+=X)<0&&(G=0):G>X&&(G=X),G<F&&(G=F);const se=this.subarray(F,G);return Object.setPrototypeOf(se,u.prototype),se},u.prototype.readUintLE=u.prototype.readUIntLE=function(F,G,X){F>>>=0,G>>>=0,X||q(F,G,this.length);let se=this[F],pe=1,ge=0;for(;++ge<G&&(pe*=256);)se+=this[F+ge]*pe;return se},u.prototype.readUintBE=u.prototype.readUIntBE=function(F,G,X){F>>>=0,G>>>=0,X||q(F,G,this.length);let se=this[F+--G],pe=1;for(;G>0&&(pe*=256);)se+=this[F+--G]*pe;return se},u.prototype.readUint8=u.prototype.readUInt8=function(F,G){return F>>>=0,G||q(F,1,this.length),this[F]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(F,G){return F>>>=0,G||q(F,2,this.length),this[F]|this[F+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(F,G){return F>>>=0,G||q(F,2,this.length),this[F]<<8|this[F+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(F,G){return F>>>=0,G||q(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+16777216*this[F+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(F,G){return F>>>=0,G||q(F,4,this.length),16777216*this[F]+(this[F+1]<<16|this[F+2]<<8|this[F+3])},u.prototype.readBigUInt64LE=Pe(function(F){ae(F>>>=0,"offset");const G=this[F],X=this[F+7];G!==void 0&&X!==void 0||le(F,this.length-8);const se=G+256*this[++F]+65536*this[++F]+this[++F]*2**24,pe=this[++F]+256*this[++F]+65536*this[++F]+X*2**24;return BigInt(se)+(BigInt(pe)<<BigInt(32))}),u.prototype.readBigUInt64BE=Pe(function(F){ae(F>>>=0,"offset");const G=this[F],X=this[F+7];G!==void 0&&X!==void 0||le(F,this.length-8);const se=G*2**24+65536*this[++F]+256*this[++F]+this[++F],pe=this[++F]*2**24+65536*this[++F]+256*this[++F]+X;return(BigInt(se)<<BigInt(32))+BigInt(pe)}),u.prototype.readIntLE=function(F,G,X){F>>>=0,G>>>=0,X||q(F,G,this.length);let se=this[F],pe=1,ge=0;for(;++ge<G&&(pe*=256);)se+=this[F+ge]*pe;return pe*=128,se>=pe&&(se-=Math.pow(2,8*G)),se},u.prototype.readIntBE=function(F,G,X){F>>>=0,G>>>=0,X||q(F,G,this.length);let se=G,pe=1,ge=this[F+--se];for(;se>0&&(pe*=256);)ge+=this[F+--se]*pe;return pe*=128,ge>=pe&&(ge-=Math.pow(2,8*G)),ge},u.prototype.readInt8=function(F,G){return F>>>=0,G||q(F,1,this.length),128&this[F]?-1*(255-this[F]+1):this[F]},u.prototype.readInt16LE=function(F,G){F>>>=0,G||q(F,2,this.length);const X=this[F]|this[F+1]<<8;return 32768&X?4294901760|X:X},u.prototype.readInt16BE=function(F,G){F>>>=0,G||q(F,2,this.length);const X=this[F+1]|this[F]<<8;return 32768&X?4294901760|X:X},u.prototype.readInt32LE=function(F,G){return F>>>=0,G||q(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},u.prototype.readInt32BE=function(F,G){return F>>>=0,G||q(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},u.prototype.readBigInt64LE=Pe(function(F){ae(F>>>=0,"offset");const G=this[F],X=this[F+7];G!==void 0&&X!==void 0||le(F,this.length-8);const se=this[F+4]+256*this[F+5]+65536*this[F+6]+(X<<24);return(BigInt(se)<<BigInt(32))+BigInt(G+256*this[++F]+65536*this[++F]+this[++F]*2**24)}),u.prototype.readBigInt64BE=Pe(function(F){ae(F>>>=0,"offset");const G=this[F],X=this[F+7];G!==void 0&&X!==void 0||le(F,this.length-8);const se=(G<<24)+65536*this[++F]+256*this[++F]+this[++F];return(BigInt(se)<<BigInt(32))+BigInt(this[++F]*2**24+65536*this[++F]+256*this[++F]+X)}),u.prototype.readFloatLE=function(F,G){return F>>>=0,G||q(F,4,this.length),i.read(this,F,!0,23,4)},u.prototype.readFloatBE=function(F,G){return F>>>=0,G||q(F,4,this.length),i.read(this,F,!1,23,4)},u.prototype.readDoubleLE=function(F,G){return F>>>=0,G||q(F,8,this.length),i.read(this,F,!0,52,8)},u.prototype.readDoubleBE=function(F,G){return F>>>=0,G||q(F,8,this.length),i.read(this,F,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(F,G,X,se){F=+F,G>>>=0,X>>>=0,se||B(this,F,G,X,Math.pow(2,8*X)-1,0);let pe=1,ge=0;for(this[G]=255&F;++ge<X&&(pe*=256);)this[G+ge]=F/pe&255;return G+X},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(F,G,X,se){F=+F,G>>>=0,X>>>=0,se||B(this,F,G,X,Math.pow(2,8*X)-1,0);let pe=X-1,ge=1;for(this[G+pe]=255&F;--pe>=0&&(ge*=256);)this[G+pe]=F/ge&255;return G+X},u.prototype.writeUint8=u.prototype.writeUInt8=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,1,255,0),this[G]=255&F,G+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,2,65535,0),this[G]=255&F,this[G+1]=F>>>8,G+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,2,65535,0),this[G]=F>>>8,this[G+1]=255&F,G+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,4,4294967295,0),this[G+3]=F>>>24,this[G+2]=F>>>16,this[G+1]=F>>>8,this[G]=255&F,G+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,4,4294967295,0),this[G]=F>>>24,this[G+1]=F>>>16,this[G+2]=F>>>8,this[G+3]=255&F,G+4},u.prototype.writeBigUInt64LE=Pe(function(F,G=0){return U(this,F,G,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Pe(function(F,G=0){return W(this,F,G,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(F,G,X,se){if(F=+F,G>>>=0,!se){const Ne=Math.pow(2,8*X-1);B(this,F,G,X,Ne-1,-Ne)}let pe=0,ge=1,xe=0;for(this[G]=255&F;++pe<X&&(ge*=256);)F<0&&xe===0&&this[G+pe-1]!==0&&(xe=1),this[G+pe]=(F/ge|0)-xe&255;return G+X},u.prototype.writeIntBE=function(F,G,X,se){if(F=+F,G>>>=0,!se){const Ne=Math.pow(2,8*X-1);B(this,F,G,X,Ne-1,-Ne)}let pe=X-1,ge=1,xe=0;for(this[G+pe]=255&F;--pe>=0&&(ge*=256);)F<0&&xe===0&&this[G+pe+1]!==0&&(xe=1),this[G+pe]=(F/ge|0)-xe&255;return G+X},u.prototype.writeInt8=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,1,127,-128),F<0&&(F=255+F+1),this[G]=255&F,G+1},u.prototype.writeInt16LE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,2,32767,-32768),this[G]=255&F,this[G+1]=F>>>8,G+2},u.prototype.writeInt16BE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,2,32767,-32768),this[G]=F>>>8,this[G+1]=255&F,G+2},u.prototype.writeInt32LE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,4,2147483647,-2147483648),this[G]=255&F,this[G+1]=F>>>8,this[G+2]=F>>>16,this[G+3]=F>>>24,G+4},u.prototype.writeInt32BE=function(F,G,X){return F=+F,G>>>=0,X||B(this,F,G,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[G]=F>>>24,this[G+1]=F>>>16,this[G+2]=F>>>8,this[G+3]=255&F,G+4},u.prototype.writeBigInt64LE=Pe(function(F,G=0){return U(this,F,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Pe(function(F,G=0){return W(this,F,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(F,G,X){return Y(this,F,G,!0,X)},u.prototype.writeFloatBE=function(F,G,X){return Y(this,F,G,!1,X)},u.prototype.writeDoubleLE=function(F,G,X){return Z(this,F,G,!0,X)},u.prototype.writeDoubleBE=function(F,G,X){return Z(this,F,G,!1,X)},u.prototype.copy=function(F,G,X,se){if(!u.isBuffer(F))throw new TypeError("argument should be a Buffer");if(X||(X=0),se||se===0||(se=this.length),G>=F.length&&(G=F.length),G||(G=0),se>0&&se<X&&(se=X),se===X||F.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),F.length-G<se-X&&(se=F.length-G+X);const pe=se-X;return this===F&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(G,X,se):Uint8Array.prototype.set.call(F,this.subarray(X,se),G),pe},u.prototype.fill=function(F,G,X,se){if(typeof F=="string"){if(typeof G=="string"?(se=G,G=0,X=this.length):typeof X=="string"&&(se=X,X=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!u.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(F.length===1){const ge=F.charCodeAt(0);(se==="utf8"&&ge<128||se==="latin1")&&(F=ge)}}else typeof F=="number"?F&=255:typeof F=="boolean"&&(F=Number(F));if(G<0||this.length<G||this.length<X)throw new RangeError("Out of range index");if(X<=G)return this;let pe;if(G>>>=0,X=X===void 0?this.length:X>>>0,F||(F=0),typeof F=="number")for(pe=G;pe<X;++pe)this[pe]=F;else{const ge=u.isBuffer(F)?F:u.from(F,se),xe=ge.length;if(xe===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(pe=0;pe<X-G;++pe)this[pe+G]=ge[pe%xe]}return this};const ce={};function $(F,G,X){ce[F]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:G.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${F}]`,this.stack,delete this.name}get code(){return F}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${F}]: ${this.message}`}}}function K(F){let G="",X=F.length;const se=F[0]==="-"?1:0;for(;X>=se+4;X-=3)G=`_${F.slice(X-3,X)}${G}`;return`${F.slice(0,X)}${G}`}function ie(F,G,X,se,pe,ge){if(F>X||F<G){const xe=typeof G=="bigint"?"n":"";let Ne;throw Ne=G===0||G===BigInt(0)?`>= 0${xe} and < 2${xe} ** ${8*(ge+1)}${xe}`:`>= -(2${xe} ** ${8*(ge+1)-1}${xe}) and < 2 ** ${8*(ge+1)-1}${xe}`,new ce.ERR_OUT_OF_RANGE("value",Ne,F)}(function(xe,Ne,He){ae(Ne,"offset"),xe[Ne]!==void 0&&xe[Ne+He]!==void 0||le(Ne,xe.length-(He+1))})(se,pe,ge)}function ae(F,G){if(typeof F!="number")throw new ce.ERR_INVALID_ARG_TYPE(G,"number",F)}function le(F,G,X){throw Math.floor(F)!==F?(ae(F,X),new ce.ERR_OUT_OF_RANGE("offset","an integer",F)):G<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${G}`,F)}$("ERR_BUFFER_OUT_OF_BOUNDS",function(F){return F?`${F} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$("ERR_INVALID_ARG_TYPE",function(F,G){return`The "${F}" argument must be of type number. Received type ${typeof G}`},TypeError),$("ERR_OUT_OF_RANGE",function(F,G,X){let se=`The value of "${F}" is out of range.`,pe=X;return Number.isInteger(X)&&Math.abs(X)>2**32?pe=K(String(X)):typeof X=="bigint"&&(pe=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(pe=K(pe)),pe+="n"),se+=` It must be ${G}. Received ${pe}`,se},RangeError);const te=/[^+/0-9A-Za-z-_]/g;function ee(F,G){let X;G=G||1/0;const se=F.length;let pe=null;const ge=[];for(let xe=0;xe<se;++xe){if(X=F.charCodeAt(xe),X>55295&&X<57344){if(!pe){if(X>56319){(G-=3)>-1&&ge.push(239,191,189);continue}if(xe+1===se){(G-=3)>-1&&ge.push(239,191,189);continue}pe=X;continue}if(X<56320){(G-=3)>-1&&ge.push(239,191,189),pe=X;continue}X=65536+(pe-55296<<10|X-56320)}else pe&&(G-=3)>-1&&ge.push(239,191,189);if(pe=null,X<128){if((G-=1)<0)break;ge.push(X)}else if(X<2048){if((G-=2)<0)break;ge.push(X>>6|192,63&X|128)}else if(X<65536){if((G-=3)<0)break;ge.push(X>>12|224,X>>6&63|128,63&X|128)}else{if(!(X<1114112))throw new Error("Invalid code point");if((G-=4)<0)break;ge.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}}return ge}function re(F){return n.toByteArray((function(G){if((G=(G=G.split("=")[0]).trim().replace(te,"")).length<2)return"";for(;G.length%4!=0;)G+="=";return G})(F))}function he(F,G,X,se){let pe;for(pe=0;pe<se&&!(pe+X>=G.length||pe>=F.length);++pe)G[pe+X]=F[pe];return pe}function ve(F,G){return F instanceof G||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===G.name}function _e(F){return F!=F}const Oe=(function(){const F="0123456789abcdef",G=new Array(256);for(let X=0;X<16;++X){const se=16*X;for(let pe=0;pe<16;++pe)G[se+pe]=F[X]+F[pe]}return G})();function Pe(F){return typeof BigInt>"u"?me:F}function me(){throw new Error("BigInt not supported")}},1053:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)},1074:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isValidDate=void 0,e.isValidDate=function(t){return t instanceof Date&&!isNaN(t)}},1092:function(r,e,t){var n=this&&this.__extends||(function(){var v=function(p,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(y[g]=b[g])},v(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=p}v(p,m),p.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(6377)),a=i(t(6161)),s=i(t(3321)),u=i(t(7021)),l=t(9014),c=t(9305).internal.constants,f=c.BOLT_PROTOCOL_V5_8,h=c.FETCH_ALL,d=(function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new s.default(Object.values(a.default).map(function(y){return y(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.run=function(m,y,b){var g=b===void 0?{}:b,_=g.bookmarks,w=g.txConfig,x=g.database,E=g.mode,O=g.impersonatedUser,C=g.notificationFilter,A=g.beforeKeys,R=g.afterKeys,k=g.beforeError,D=g.afterError,L=g.beforeComplete,j=g.afterComplete,q=g.flush,B=q===void 0||q,U=g.reactive,W=U!==void 0&&U,H=g.fetchSize,Y=H===void 0?h:H,Z=g.highRecordWatermark,ce=Z===void 0?Number.MAX_VALUE:Z,$=g.lowRecordWatermark,K=$===void 0?Number.MAX_VALUE:$,ie=g.onDb,ae=new l.ResultStreamObserver({server:this._server,reactive:W,fetchSize:Y,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:A,afterKeys:R,beforeError:k,afterError:D,beforeComplete:L,afterComplete:j,highRecordWatermark:ce,lowRecordWatermark:K,enrichMetadata:this._enrichMetadata,onDb:ie}),le=W;return this.write(u.default.runWithMetadata5x5(m,y,{bookmarks:_,txConfig:w,database:x,mode:E,impersonatedUser:O,notificationFilter:C}),ae,le&&B),W||this.write(u.default.pull({n:Y}),ae,B),ae},p})(o.default);e.default=d},1103:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;var n=t(4662),i=t(1018);e.throwError=function(o,a){var s=i.isFunction(o)?o:function(){return o},u=function(l){return l.error(s())};return new n.Observable(a?function(l){return a.schedule(u,0,l)}:u)}},1107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popNumber=e.popScheduler=e.popResultSelector=void 0;var n=t(1018),i=t(8613);function o(a){return a[a.length-1]}e.popResultSelector=function(a){return n.isFunction(o(a))?a.pop():void 0},e.popScheduler=function(a){return i.isScheduler(o(a))?a.pop():void 0},e.popNumber=function(a,s){return typeof o(a)=="number"?a.pop():s}},1116:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=void 0;var n=t(3327),i=t(1018);e.isInteropObservable=function(o){return i.isFunction(o[n.observable])}},1141:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(9445);e.windowWhen=function(s){return i.operate(function(u,l){var c,f,h=function(v){c.error(v),l.error(v)},d=function(){var v;f==null||f.unsubscribe(),c==null||c.complete(),c=new n.Subject,l.next(c.asObservable());try{v=a.innerFrom(s())}catch(p){return void h(p)}v.subscribe(f=o.createOperatorSubscriber(l,d,d,h))};d(),u.subscribe(o.createOperatorSubscriber(l,function(v){return c.next(v)},function(){c.complete(),l.complete()},h,function(){f==null||f.unsubscribe(),c=null}))})}},1175:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3448));e.default=n({},o.default)},1187:function(r,e,t){var n=this&&this.__awaiter||function(j,q,B,U){return new(B||(B=Promise))(function(W,H){function Y($){try{ce(U.next($))}catch(K){H(K)}}function Z($){try{ce(U.throw($))}catch(K){H(K)}}function ce($){var K;$.done?W($.value):(K=$.value,K instanceof B?K:new B(function(ie){ie(K)})).then(Y,Z)}ce((U=U.apply(j,q||[])).next())})},i=this&&this.__generator||function(j,q){var B,U,W,H,Y={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return H={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function Z(ce){return function($){return(function(K){if(B)throw new TypeError("Generator is already executing.");for(;H&&(H=0,K[0]&&(Y=0)),Y;)try{if(B=1,U&&(W=2&K[0]?U.return:K[0]?U.throw||((W=U.return)&&W.call(U),0):U.next)&&!(W=W.call(U,K[1])).done)return W;switch(U=0,W&&(K=[2&K[0],W.value]),K[0]){case 0:case 1:W=K;break;case 4:return Y.label++,{value:K[1],done:!1};case 5:Y.label++,U=K[1],K=[0];continue;case 7:K=Y.ops.pop(),Y.trys.pop();continue;default:if(!((W=(W=Y.trys).length>0&&W[W.length-1])||K[0]!==6&&K[0]!==2)){Y=0;continue}if(K[0]===3&&(!W||K[1]>W[0]&&K[1]<W[3])){Y.label=K[1];break}if(K[0]===6&&Y.label<W[1]){Y.label=W[1],W=K;break}if(W&&Y.label<W[2]){Y.label=W[2],Y.ops.push(K);break}W[2]&&Y.ops.pop(),Y.trys.pop();continue}K=q.call(j,Y)}catch(ie){K=[6,ie],U=0}finally{B=W=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}})([ce,$])}}},o=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var a=t(7857);Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return a.Driver}});var s=o(t(3659)),u=t(9305);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return u.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return u.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return u.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return u.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return u.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return u.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return u.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return u.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return u.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return u.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return u.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return u.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return u.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return u.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return u.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return u.clientCertificateProviders}});var l=t(6672),c=o(t(3466));e.RxSession=c.default;var f=o(t(5742));e.RxTransaction=f.default;var h=o(t(1530));e.RxManagedTransaction=h.default;var d=o(t(3057));e.RxResult=d.default;var v=u.internal.util,p=v.ENCRYPTION_ON,m=v.assertString,y=v.isEmptyObjectOrNull,b=u.internal.serverAddress.ServerAddress,g=u.internal.urlUtil,_="neo4j-javascript/"+s.default;function w(j,q,B){B===void 0&&(B={}),m(j,"Bolt URL");var U,W=g.parseDatabaseUrl(j),H=!1,Y=!1;switch(W.scheme){case"bolt":break;case"bolt+s":Y=!0,U="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":Y=!0,U="TRUST_ALL_CERTIFICATES";break;case"neo4j":H=!0;break;case"neo4j+s":Y=!0,U="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",H=!0;break;case"neo4j+ssc":Y=!0,U="TRUST_ALL_CERTIFICATES",H=!0;break;default:throw new Error("Unknown scheme: ".concat(W.scheme))}if(Y){if("encrypted"in B||"trust"in B)throw new Error("Encryption/trust can only be configured either through URL or config, not both");B.encrypted=p,B.trust=U,B.clientCertificate=(0,u.resolveCertificateProvider)(B.clientCertificate)}var Z=(function(K){if(typeof(ie=K)=="object"&&ie!=null&&"getToken"in ie&&"handleSecurityException"in ie&&typeof ie.getToken=="function"&&typeof ie.handleSecurityException=="function")return K;var ie,ae=K;return(ae=ae||{}).scheme=ae.scheme||"none",(0,u.staticAuthTokenManager)({authToken:ae})})(q);B.userAgent=B.userAgent||_,B.boltAgent=u.internal.boltAgent.fromVersion(s.default);var ce=b.fromUrl(W.hostAndPort),$={address:ce,typename:H?"Routing":"Direct",routing:H};return new a.Driver($,B,(function(){if(H)return function(K,ie,ae,le){return new l.RoutingConnectionProvider({id:K,config:ie,log:ae,hostNameResolver:le,authTokenManager:Z,address:ce,userAgent:ie.userAgent,boltAgent:ie.boltAgent,routingContext:W.query})};if(!y(W.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(j,"'"));return function(K,ie,ae){return new l.DirectConnectionProvider({id:K,config:ie,log:ae,authTokenManager:Z,address:ce,userAgent:ie.userAgent,boltAgent:ie.boltAgent})}})())}function x(j,q){return n(this,void 0,void 0,function(){var B;return i(this,function(U){switch(U.label){case 0:B=w(j,{scheme:"none",principal:"",credentials:""},q),U.label=1;case 1:return U.trys.push([1,,3,5]),[4,B.getNegotiatedProtocolVersion()];case 2:return U.sent(),[2,!0];case 3:return[4,B.close()];case 4:return U.sent(),[7];case 5:return[2]}})})}e.driver=w,e.hasReachableServer=x;var E={console:function(j){return{level:j,logger:function(q,B){return console.log("".concat(t.g.Date.now()," ").concat(q.toUpperCase()," ").concat(B))}}}};e.logging=E;var O={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,EagerResult:u.EagerResult,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};e.types=O;var C={READ:a.READ,WRITE:a.WRITE};e.session=C;var A={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};e.integer=A;var R={isPoint:u.isPoint};e.spatial=R;var k={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};e.temporal=k;var D={isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship};e.graph=D;var L={authTokenManagers:u.authTokenManagers,driver:w,hasReachableServer:x,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship,integer:A,Neo4jError:u.Neo4jError,isRetryableError:u.isRetryableError,auth:u.auth,logging:E,types:O,session:C,routing:u.routing,error:u.error,graph:D,spatial:R,temporal:k,Driver:a.Driver,Session:u.Session,Transaction:u.Transaction,ManagedTransaction:u.ManagedTransaction,Result:u.Result,EagerResult:u.EagerResult,RxSession:c.default,RxTransaction:f.default,RxManagedTransaction:h.default,RxResult:d.default,ResultSummary:u.ResultSummary,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,GqlStatusObject:u.GqlStatusObject,ServerInfo:u.ServerInfo,Record:u.Record,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,Path:u.Path,PathSegment:u.PathSegment,Point:u.Point,Integer:u.Integer,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,bookmarkManager:u.bookmarkManager,resultTransformers:u.resultTransformers,notificationCategory:u.notificationCategory,notificationSeverityLevel:u.notificationSeverityLevel,notificationFilterDisabledCategory:u.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:u.notificationFilterMinimumSeverityLevel,clientCertificateProviders:u.clientCertificateProviders};e.default=L},1226:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=e.onErrorResumeNextWith=void 0;var o=t(8535),a=t(6102);function s(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=o.argsOrArgArray(u);return function(f){return a.onErrorResumeNext.apply(void 0,i([f],n(c)))}}e.onErrorResumeNextWith=s,e.onErrorResumeNext=s},1242:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaySubject=void 0;var i=t(2483),o=t(9568),a=(function(s){function u(l,c,f){l===void 0&&(l=1/0),c===void 0&&(c=1/0),f===void 0&&(f=o.dateTimestampProvider);var h=s.call(this)||this;return h._bufferSize=l,h._windowTime=c,h._timestampProvider=f,h._buffer=[],h._infiniteTimeWindow=!0,h._infiniteTimeWindow=c===1/0,h._bufferSize=Math.max(1,l),h._windowTime=Math.max(1,c),h}return n(u,s),u.prototype.next=function(l){var c=this,f=c.isStopped,h=c._buffer,d=c._infiniteTimeWindow,v=c._timestampProvider,p=c._windowTime;f||(h.push(l),!d&&h.push(v.now()+p)),this._trimBuffer(),s.prototype.next.call(this,l)},u.prototype._subscribe=function(l){this._throwIfClosed(),this._trimBuffer();for(var c=this._innerSubscribe(l),f=this._infiniteTimeWindow,h=this._buffer.slice(),d=0;d<h.length&&!l.closed;d+=f?1:2)l.next(h[d]);return this._checkFinalizedStatuses(l),c},u.prototype._trimBuffer=function(){var l=this,c=l._bufferSize,f=l._timestampProvider,h=l._buffer,d=l._infiniteTimeWindow,v=(d?1:2)*c;if(c<1/0&&v<h.length&&h.splice(0,h.length-v),!d){for(var p=f.now(),m=0,y=1;y<h.length&&h[y]<=p;y+=2)m=y;m&&h.splice(0,m+1)}},u})(i.Subject);e.ReplaySubject=a},1251:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.mapOneOrManyArgs=void 0;var o=t(5471),a=Array.isArray;e.mapOneOrManyArgs=function(s){return o.map(function(u){return(function(l,c){return a(c)?l.apply(void 0,i([],n(c))):l(c)})(s,u)})}},1293:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.QueueScheduler=void 0;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a})(t(5648).AsyncScheduler);e.QueueScheduler=i},1342:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=function(){}},1358:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=void 0;var n=t(1018);e.isAsyncIterable=function(i){return Symbol.asyncIterator&&n.isFunction(i==null?void 0:i[Symbol.asyncIterator])}},1409:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(){}return n.prototype.beginTransaction=function(i){throw new Error("Not implemented")},n.prototype.run=function(i,o,a){throw new Error("Not implemented")},n.prototype.commitTransaction=function(i){throw new Error("Not implemented")},n.prototype.rollbackTransaction=function(i){throw new Error("Not implemented")},n.prototype.resetAndFlush=function(){throw new Error("Not implemented")},n.prototype.isOpen=function(){throw new Error("Not implemented")},n.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n})();e.default=t},1415:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.max=void 0;var n=t(9139),i=t(1018);e.max=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)>0?a:s}:function(a,s){return a>s?a:s})}},1439:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallbackInternals=void 0;var o=t(8613),a=t(4662),s=t(8960),u=t(1251),l=t(5184),c=t(95);e.bindCallbackInternals=function f(h,d,v,p){if(v){if(!o.isScheduler(v))return function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];return f(h,d,p).apply(this,m).pipe(u.mapOneOrManyArgs(v))};p=v}return p?function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];return f(h,d).apply(this,m).pipe(s.subscribeOn(p),l.observeOn(p))}:function(){for(var m=this,y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var g=new c.AsyncSubject,_=!0;return new a.Observable(function(w){var x=g.subscribe(w);if(_){_=!1;var E=!1,O=!1;d.apply(m,i(i([],n(y)),[function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];if(h){var R=C.shift();if(R!=null)return void g.error(R)}g.next(1<C.length?C:C[0]),O=!0,E&&g.complete()}])),O&&g.complete(),E=!0}return x})}}},1483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var n=t(2483),i=t(9445),o=t(7843),a=t(6824),s={connector:function(){return new n.Subject}};e.connect=function(u,l){l===void 0&&(l=s);var c=l.connector;return o.operate(function(f,h){var d=c();i.innerFrom(u(a.fromSubscribable(d))).subscribe(h),h.add(f.subscribe(d))})}},1505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceError=void 0;var n=t(5568);e.SequenceError=n.createErrorClass(function(i){return function(o){i(this),this.name="SequenceError",this.message=o}})},1517:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var n=t(4027),i={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",a="__isRelationship__",s="__isUnboundRelationship__",u="__isPath__",l="__isPathSegment__";function c(y,b){return y!=null&&y[b]===!0}var f=(function(){function y(b,g,_,w){this.identity=b,this.labels=g,this.properties=_,this.elementId=m(w,function(){return b.toString()})}return y.prototype.toString=function(){for(var b="("+this.elementId,g=0;g<this.labels.length;g++)b+=":"+this.labels[g];var _=Object.keys(this.properties);if(_.length>0){for(b+=" {",g=0;g<_.length;g++)g>0&&(b+=","),b+=_[g]+":"+(0,n.stringify)(this.properties[_[g]]);b+="}"}return b+")"},y})();e.Node=f,Object.defineProperty(f.prototype,o,i),e.isNode=function(y){return c(y,o)};var h=(function(){function y(b,g,_,w,x,E,O,C){this.identity=b,this.start=g,this.end=_,this.type=w,this.properties=x,this.elementId=m(E,function(){return b.toString()}),this.startNodeElementId=m(O,function(){return g.toString()}),this.endNodeElementId=m(C,function(){return _.toString()})}return y.prototype.toString=function(){var b="("+this.startNodeElementId+")-[:"+this.type,g=Object.keys(this.properties);if(g.length>0){b+=" {";for(var _=0;_<g.length;_++)_>0&&(b+=","),b+=g[_]+":"+(0,n.stringify)(this.properties[g[_]]);b+="}"}return b+"]->("+this.endNodeElementId+")"},y})();e.Relationship=h,Object.defineProperty(h.prototype,a,i),e.isRelationship=function(y){return c(y,a)};var d=(function(){function y(b,g,_,w){this.identity=b,this.type=g,this.properties=_,this.elementId=m(w,function(){return b.toString()})}return y.prototype.bind=function(b,g){return new h(this.identity,b,g,this.type,this.properties,this.elementId)},y.prototype.bindTo=function(b,g){return new h(this.identity,b.identity,g.identity,this.type,this.properties,this.elementId,b.elementId,g.elementId)},y.prototype.toString=function(){var b="-[:"+this.type,g=Object.keys(this.properties);if(g.length>0){b+=" {";for(var _=0;_<g.length;_++)_>0&&(b+=","),b+=g[_]+":"+(0,n.stringify)(this.properties[g[_]]);b+="}"}return b+"]->"},y})();e.UnboundRelationship=d,Object.defineProperty(d.prototype,s,i),e.isUnboundRelationship=function(y){return c(y,s)};var v=function(y,b,g){this.start=y,this.relationship=b,this.end=g};e.PathSegment=v,Object.defineProperty(v.prototype,l,i),e.isPathSegment=function(y){return c(y,l)};var p=function(y,b,g){this.start=y,this.end=b,this.segments=g,this.length=g.length};function m(y,b){return y??b()}e.Path=p,Object.defineProperty(p.prototype,u,i),e.isPath=function(y){return c(y,u)}},1518:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=void 0;var n=t(7843),i=t(3111);e.pairwise=function(){return n.operate(function(o,a){var s,u=!1;o.subscribe(i.createOperatorSubscriber(a,function(l){var c=s;s=l,u&&a.next([c,l]),u=!0}))})}},1530:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),n(t(3057)),n(t(5742));var i=(function(){function o(a){var s=a.run;this._run=s}return o.fromTransaction=function(a){return new o({run:a.run.bind(a)})},o.prototype.run=function(a,s){return this._run(a,s)},o})();e.default=i},1551:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=void 0;var n=t(2752);e.exhaust=n.exhaustAll},1554:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var n=t(7961),i=t(1074),o=t(7843),a=t(9445),s=t(5568),u=t(3111),l=t(7110);function c(f){throw new e.TimeoutError(f)}e.TimeoutError=s.createErrorClass(function(f){return function(h){h===void 0&&(h=null),f(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}}),e.timeout=function(f,h){var d=i.isValidDate(f)?{first:f}:typeof f=="number"?{each:f}:f,v=d.first,p=d.each,m=d.with,y=m===void 0?c:m,b=d.scheduler,g=b===void 0?h??n.asyncScheduler:b,_=d.meta,w=_===void 0?null:_;if(v==null&&p==null)throw new TypeError("No timeout provided.");return o.operate(function(x,E){var O,C,A=null,R=0,k=function(D){C=l.executeSchedule(E,g,function(){try{O.unsubscribe(),a.innerFrom(y({meta:w,lastValue:A,seen:R})).subscribe(E)}catch(L){E.error(L)}},D)};O=x.subscribe(u.createOperatorSubscriber(E,function(D){C==null||C.unsubscribe(),R++,E.next(A=D),p>0&&k(p)},void 0,void 0,function(){C!=null&&C.closed||C==null||C.unsubscribe(),A=null})),!R&&k(v!=null?typeof v=="number"?v:+v-g.now():p)})}},1573:function(r,e,t){var n=this&&this.__awaiter||function(d,v,p,m){return new(p||(p=Promise))(function(y,b){function g(x){try{w(m.next(x))}catch(E){b(E)}}function _(x){try{w(m.throw(x))}catch(E){b(E)}}function w(x){var E;x.done?y(x.value):(E=x.value,E instanceof p?E:new p(function(O){O(E)})).then(g,_)}w((m=m.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var p,m,y,b,g={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(w){return function(x){return(function(E){if(p)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(g=0)),g;)try{if(p=1,m&&(y=2&E[0]?m.return:E[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,E[1])).done)return y;switch(m=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return g.label++,{value:E[1],done:!1};case 5:g.label++,m=E[1],E=[0];continue;case 7:E=g.ops.pop(),g.trys.pop();continue;default:if(!((y=(y=g.trys).length>0&&y[y.length-1])||E[0]!==6&&E[0]!==2)){g=0;continue}if(E[0]===3&&(!y||E[1]>y[0]&&E[1]<y[3])){g.label=E[1];break}if(E[0]===6&&g.label<y[1]){g.label=y[1],y=E;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(E);break}y[2]&&g.ops.pop(),g.trys.pop();continue}E=v.call(d,g)}catch(O){E=[6,O],m=0}finally{p=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}})([w,x])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(8917)),s=t(9691),u=new((function(){function d(){}return d.prototype.eagerResultTransformer=function(){return l},d.prototype.eager=function(){return l},d.prototype.mappedResultTransformer=function(v){return c(v)},d.prototype.mapped=function(v){return c(v)},d.prototype.first=function(){return f},d.prototype.summary=function(){return h},d})());function l(d){return n(this,void 0,void 0,function(){var v,p,m,y;return i(this,function(b){switch(b.label){case 0:return[4,d];case 1:return v=b.sent(),p=v.summary,m=v.records,[4,d.keys()];case 2:return y=b.sent(),[2,new a.default(y,m,p)]}})})}function c(d){var v=this;if(d==null||d.collect==null&&d.map==null)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(p){return n(v,void 0,void 0,function(){return i(this,function(m){switch(m.label){case 0:return[4,new Promise(function(y,b){var g={records:[],keys:[]};p.subscribe({onKeys:function(_){g.keys=_},onNext:function(_){if(d.map!=null){var w=d.map(_);w!==void 0&&g.records.push(w)}else g.records.push(_)},onCompleted:function(_){if(d.collect!=null)y(d.collect(g.records,_,g.keys));else{var w={records:g.records,summary:_,keys:g.keys};y(w)}},onError:function(_){b(_)}})})];case 1:return[2,m.sent()]}})})}}function f(d){return n(this,void 0,void 0,function(){var v,p,m,y;return i(this,function(b){switch(b.label){case 0:return[4,(v=d[Symbol.asyncIterator]()).next()];case 1:p=b.sent(),m=p.value,y=p.done,b.label=2;case 2:return b.trys.push([2,,3,6]),y===!0?[2,void 0]:[2,m];case 3:return v.return==null?[3,5]:[4,v.return()];case 4:b.sent(),b.label=5;case 5:return[7];case 6:return[2]}})})}function h(d){return n(this,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,d.summary()];case 1:return[2,v.sent()]}})})}Object.freeze(u),e.default=u},1637:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviorSubject=void 0;var i=(function(o){function a(s){var u=o.call(this)||this;return u._value=s,u}return n(a,o),Object.defineProperty(a.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),a.prototype._subscribe=function(s){var u=o.prototype._subscribe.call(this,s);return!u.closed&&s.next(this._value),u},a.prototype.getValue=function(){var s=this,u=s.hasError,l=s.thrownError,c=s._value;if(u)throw l;return this._throwIfClosed(),c},a.prototype.next=function(s){o.prototype.next.call(this,this._value=s)},a})(t(2483).Subject);e.BehaviorSubject=i},1656:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduled=void 0;var n=t(9567),i=t(9589),o=t(6985),a=t(8808),s=t(854),u=t(1116),l=t(7629),c=t(8046),f=t(6368),h=t(1358),d=t(7614),v=t(9137),p=t(4953);e.scheduled=function(m,y){if(m!=null){if(u.isInteropObservable(m))return n.scheduleObservable(m,y);if(c.isArrayLike(m))return o.scheduleArray(m,y);if(l.isPromise(m))return i.schedulePromise(m,y);if(h.isAsyncIterable(m))return s.scheduleAsyncIterable(m,y);if(f.isIterable(m))return a.scheduleIterable(m,y);if(v.isReadableStreamLike(m))return p.scheduleReadableStreamLike(m,y)}throw d.createInvalidObservableTypeError(m)}},1699:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783),o=t(9445);e.partition=function(a,s,u){return[i.filter(s,u)(o.innerFrom(a)),i.filter(n.not(s,u))(o.innerFrom(a))]}},1711:function(r,e,t){var n=this&&this.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(x[O]=E[O])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=_}g(_,w),_.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(g){for(var _,w=1,x=arguments.length;w<x;w++)for(var E in _=arguments[w])Object.prototype.hasOwnProperty.call(_,E)&&(g[E]=_[E]);return g},i.apply(this,arguments)},o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(9054)),s=t(9305),u=o(t(7021)),l=t(9014),c=t(397),f=o(t(7518)),h=o(t(5045)),d=o(t(3321)),v=s.internal.constants,p=v.BOLT_PROTOCOL_V4_4,m=v.FETCH_ALL,y=s.internal.bookmarks.Bookmarks,b=(function(g){function _(){return g!==null&&g.apply(this,arguments)||this}return n(_,g),Object.defineProperty(_.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(f.default).map(function(x){return x(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.requestRoutingInformation=function(w){var x=w.routingContext,E=x===void 0?{}:x,O=w.databaseName,C=O===void 0?null:O,A=w.impersonatedUser,R=A===void 0?null:A,k=w.sessionContext,D=k===void 0?{}:k,L=w.onError,j=w.onCompleted,q=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:L,onCompleted:j}),B=D.bookmarks||y.empty();return this.write(u.default.routeV4x4(E,B.values(),{databaseName:C,impersonatedUser:R}),q,!0),q},_.prototype.run=function(w,x,E){var O=E===void 0?{}:E,C=O.bookmarks,A=O.txConfig,R=O.database,k=O.mode,D=O.impersonatedUser,L=O.notificationFilter,j=O.beforeKeys,q=O.afterKeys,B=O.beforeError,U=O.afterError,W=O.beforeComplete,H=O.afterComplete,Y=O.flush,Z=Y===void 0||Y,ce=O.reactive,$=ce!==void 0&&ce,K=O.fetchSize,ie=K===void 0?m:K,ae=O.highRecordWatermark,le=ae===void 0?Number.MAX_VALUE:ae,te=O.lowRecordWatermark,ee=te===void 0?Number.MAX_VALUE:te,re=new l.ResultStreamObserver({server:this._server,reactive:$,fetchSize:ie,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:j,afterKeys:q,beforeError:B,afterError:U,beforeComplete:W,afterComplete:H,highRecordWatermark:le,lowRecordWatermark:ee});(0,c.assertNotificationFilterIsEmpty)(L,this._onProtocolError,re);var he=$;return this.write(u.default.runWithMetadata(w,x,{bookmarks:C,txConfig:A,database:R,mode:k,impersonatedUser:D}),re,he&&Z),$||this.write(u.default.pull({n:ie}),re,Z),re},_.prototype.beginTransaction=function(w){var x=w===void 0?{}:w,E=x.bookmarks,O=x.txConfig,C=x.database,A=x.mode,R=x.impersonatedUser,k=x.notificationFilter,D=x.beforeError,L=x.afterError,j=x.beforeComplete,q=x.afterComplete,B=new l.ResultStreamObserver({server:this._server,beforeError:D,afterError:L,beforeComplete:j,afterComplete:q});return B.prepareToHandleSingleResponse(),(0,c.assertNotificationFilterIsEmpty)(k,this._onProtocolError,B),this.write(u.default.begin({bookmarks:E,txConfig:O,database:C,mode:A,impersonatedUser:R}),B,!0),B},_.prototype._applyUtcPatch=function(){var w=this;this._transformer=new d.default(Object.values(i(i({},f.default),h.default)).map(function(x){return x(w._config,w._log)}))},_})(a.default);e.default=b},1731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sample=void 0;var n=t(9445),i=t(7843),o=t(1342),a=t(3111);e.sample=function(s){return i.operate(function(u,l){var c=!1,f=null;u.subscribe(a.createOperatorSubscriber(l,function(h){c=!0,f=h})),n.innerFrom(s).subscribe(a.createOperatorSubscriber(l,function(){if(c){c=!1;var h=f;f=null,l.next(h)}},o.noop))})}},1751:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=void 0;var n=t(4662),i=t(1018);e.isObservable=function(o){return!!o&&(o instanceof n.Observable||i.isFunction(o.lift)&&i.isFunction(o.subscribe))}},1759:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotFoundError=void 0;var n=t(5568);e.NotFoundError=n.createErrorClass(function(i){return function(o){i(this),this.name="NotFoundError",this.message=o}})},1776:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.endWith=void 0;var o=t(3865),a=t(1004);e.endWith=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return function(l){return o.concat(l,a.of.apply(void 0,i([],n(s))))}}},1803:r=>{var e,t,n=document.attachEvent,i=!1;function o(g){var _=g.__resizeTriggers__,w=_.firstElementChild,x=_.lastElementChild,E=w.firstElementChild;x.scrollLeft=x.scrollWidth,x.scrollTop=x.scrollHeight,E.style.width=w.offsetWidth+1+"px",E.style.height=w.offsetHeight+1+"px",w.scrollLeft=w.scrollWidth,w.scrollTop=w.scrollHeight}function a(g){var _=this;o(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=s(function(){(function(w){return w.offsetWidth!=w.__resizeLast__.width||w.offsetHeight!=w.__resizeLast__.height})(_)&&(_.__resizeLast__.width=_.offsetWidth,_.__resizeLast__.height=_.offsetHeight,_.__resizeListeners__.forEach(function(w){w.call(_,g)}))})}if(!n){var s=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(g){return window.setTimeout(g,20)},function(g){return t(g)}),u=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(g){return e(g)}),l=!1,c="",f="animationstart",h="Webkit Moz O ms".split(" "),d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(v.style.animationName!==void 0&&(l=!0),l===!1){for(var p=0;p<h.length;p++)if(v.style[h[p]+"AnimationName"]!==void 0){c="-"+h[p].toLowerCase()+"-",f=d[p],l=!0;break}}var m="resizeanim",y="@"+c+"keyframes "+m+" { from { opacity: 0; } to { opacity: 0; } } ",b=c+"animation: 1ms "+m+"; "}r.exports=function(g,_){return n?g.attachEvent("onresize",_):(g.__resizeTriggers__||(getComputedStyle(g).position=="static"&&(g.style.position="relative"),(function(){if(!i){var w=(y||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=document.head||document.getElementsByTagName("head")[0],E=document.createElement("style");E.type="text/css",E.styleSheet?E.styleSheet.cssText=w:E.appendChild(document.createTextNode(w)),x.appendChild(E),i=!0}})(),g.__resizeLast__={},g.__resizeListeners__=[],(g.__resizeTriggers__=document.createElement("div")).className="resize-triggers",g.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',g.appendChild(g.__resizeTriggers__),o(g),g.addEventListener("scroll",a,!0),f&&g.__resizeTriggers__.addEventListener(f,function(w){w.animationName==m&&o(g)})),g.__resizeListeners__.push(_)),function(){n?g.detachEvent("onresize",_):(g.__resizeListeners__.splice(g.__resizeListeners__.indexOf(_),1),g.__resizeListeners__.length||(g.removeEventListener("scroll",a),g.__resizeTriggers__=!g.removeChild(g.__resizeTriggers__)))}}},1839:function(r,e,t){var n=this&&this.__awaiter||function(u,l,c,f){return new(c||(c=Promise))(function(h,d){function v(y){try{m(f.next(y))}catch(b){d(b)}}function p(y){try{m(f.throw(y))}catch(b){d(b)}}function m(y){var b;y.done?h(y.value):(b=y.value,b instanceof c?b:new c(function(g){g(b)})).then(v,p)}m((f=f.apply(u,l||[])).next())})},i=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(y){return(function(b){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,b[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){v.label=b[1];break}if(b[0]===6&&v.label<h[1]){v.label=h[1],h=b;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(b);break}h[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(g){b=[6,g],f=0}finally{c=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([m,y])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(6781),s=(function(){function u(l){var c=l.authTokenManager,f=l.userAgent,h=l.boltAgent;this._authTokenManager=c||(0,o.staticAuthTokenManager)({}),this._userAgent=f,this._boltAgent=h}return u.prototype.authenticate=function(l){var c=l.connection,f=l.auth,h=l.skipReAuth,d=l.waitReAuth,v=l.forceReAuth;return n(this,void 0,void 0,function(){var p,m;return i(this,function(y){switch(y.label){case 0:return f==null?[3,3]:(p=c.supportsReAuth===!0&&(!a.object.equals(c.authToken,f)&&h!==!0||v===!0),c.authToken==null||p?[4,c.connect(this._userAgent,this._boltAgent,f,d||!1)]:[3,2]);case 1:case 5:return[2,y.sent()];case 2:case 6:return[2,c];case 3:return[4,this._authTokenManager.getToken()];case 4:return m=y.sent(),a.object.equals(m,c.authToken)?[3,6]:[4,c.connect(this._userAgent,this._boltAgent,m,!1)]}})})},u.prototype.handleError=function(l){var c=l.connection,f=l.code;return!(!c||!f.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(c.authToken,f)},u})();e.default=s},1866:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(k){for(var D,L=1,j=arguments.length;L<j;L++)for(var q in D=arguments[L])Object.prototype.hasOwnProperty.call(D,q)&&(k[q]=D[q]);return k},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(k,D,L,j){j===void 0&&(j=L);var q=Object.getOwnPropertyDescriptor(D,L);q&&!("get"in q?!D.__esModule:q.writable||q.configurable)||(q={enumerable:!0,get:function(){return D[L]}}),Object.defineProperty(k,j,q)}:function(k,D,L,j){j===void 0&&(j=L),k[j]=D[L]}),o=this&&this.__setModuleDefault||(Object.create?function(k,D){Object.defineProperty(k,"default",{enumerable:!0,value:D})}:function(k,D){k.default=D}),a=this&&this.__importStar||function(k){if(k&&k.__esModule)return k;var D={};if(k!=null)for(var L in k)L!=="default"&&Object.prototype.hasOwnProperty.call(k,L)&&i(D,k,L);return o(D,k),D},s=this&&this.__read||function(k,D){var L=typeof Symbol=="function"&&k[Symbol.iterator];if(!L)return k;var j,q,B=L.call(k),U=[];try{for(;(D===void 0||D-- >0)&&!(j=B.next()).done;)U.push(j.value)}catch(W){q={error:W}}finally{try{j&&!j.done&&(L=B.return)&&L.call(B)}finally{if(q)throw q.error}}return U},u=this&&this.__spreadArray||function(k,D,L){if(L||arguments.length===2)for(var j,q=0,B=D.length;q<B;q++)!j&&q in D||(j||(j=Array.prototype.slice.call(D,0,q)),j[q]=D[q]);return k.concat(j||Array.prototype.slice.call(D))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var l=a(t(4027)),c=t(6995),f=t(1053),h={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=d,Object.freeze(d);var v=Object.values(d),p={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=p,Object.freeze(p);var m=Object.values(p),y=p;e.notificationClassification=y;var b=function(k){this.code=k.code,this.title=k.title,this.description=k.description,this.severity=k.severity,this.position=C(k.position),this.severityLevel=A(k.severity),this.rawSeverityLevel=k.severity,this.category=R(k.category),this.rawCategory=k.category};e.Notification=b;var g=(function(){function k(D){var L;this.gqlStatus=D.gql_status,this.statusDescription=D.status_description,this.diagnosticRecord=(L=D.diagnostic_record)!==null&&L!==void 0?L:{},this.position=this.diagnosticRecord._position!=null?C(this.diagnosticRecord._position):void 0,this.severity=A(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=R(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=D.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(k.prototype,"diagnosticRecordAsJsonString",{get:function(){return l.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),k})();function _(k){var D,L,j;if(k.neo4j_code!=null)return new b({code:k.neo4j_code,title:k.title,description:k.description,severity:(D=k.diagnostic_record)===null||D===void 0?void 0:D._severity,category:(L=k.diagnostic_record)===null||L===void 0?void 0:L._classification,position:(j=k.diagnostic_record)===null||j===void 0?void 0:j._position})}function w(k){var D,L=k.severity===d.WARNING?h.WARNING:h.INFORMATION,j={gql_status:L.gql_status,status_description:(D=k.description)!==null&&D!==void 0?D:L.status_description,neo4j_code:k.code,title:k.title,diagnostic_record:n({},f.rawPolyfilledDiagnosticRecord)};return k.severity!=null&&(j.diagnostic_record._severity=k.severity),k.category!=null&&(j.diagnostic_record._classification=k.category),k.position!=null&&(j.diagnostic_record._position=k.position),new g(j)}e.GqlStatusObject=g,e.polyfillNotification=_,e.polyfillGqlStatusObject=w;var x={SUCCESS:new g({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA:new g({gql_status:"02000",status_description:"note: no data",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new g(n(n({},h.NO_DATA),{diagnostic_record:f.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new g({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:f.rawPolyfilledDiagnosticRecord})};Object.freeze(x),e.buildGqlStatusObjectFromMetadata=function(k){var D,L;if(k.statuses!=null)return k.statuses.map(function(B){return new g(B)});var j,q=((j=k.stream_summary)==null?void 0:j.have_records_streamed)===!0?x.SUCCESS:(j==null?void 0:j.has_keys)===!1?x.OMITTED_RESULT:(j==null?void 0:j.pulled)===!0?x.NO_DATA:x.NO_DATA_UNKNOWN_SUBCONDITION;return u([q],s((L=(D=k.notifications)===null||D===void 0?void 0:D.map(w))!==null&&L!==void 0?L:[]),!1).sort(function(B,U){return O(B)-O(U)})};var E=Object.freeze({"02":0,"01":1,"00":2});function O(k){var D,L,j=(D=k.gqlStatus)===null||D===void 0?void 0:D.slice(0,2);return(L=E[j])!==null&&L!==void 0?L:9999}function C(k){return k==null?{}:{offset:c.util.toNumber(k.offset),line:c.util.toNumber(k.line),column:c.util.toNumber(k.column)}}function A(k){return v.includes(k)?k:d.UNKNOWN}function R(k){return m.includes(k)?k:y.UNKNOWN}e.buildNotificationsFromMetadata=function(k){return k.notifications!=null?k.notifications.map(function(D){return new b(D)}):k.statuses!=null?k.statuses.map(_).filter(function(D){return D!=null}):[]},e.default=b},1964:(r,e)=>{function t(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=e.getSymbolIterator=void 0,e.getSymbolIterator=t,e.iterator=t()},1967:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9691),i=t(4027),o={basic:function(s,u,l){return l!=null?{scheme:"basic",principal:s,credentials:u,realm:l}:{scheme:"basic",principal:s,credentials:u}},kerberos:function(s){return{scheme:"kerberos",principal:"",credentials:s}},bearer:function(s){return{scheme:"bearer",credentials:s}},none:function(){return{scheme:"none"}},custom:function(s,u,l,c,f){var h={scheme:c,principal:s};if(a(u)&&(h.credentials=u),a(l)&&(h.realm=l),a(f)){try{(0,i.stringify)(f)}catch(d){throw(0,n.newError)("Circular references in custom auth token parameters",void 0,d)}h.parameters=f}return h}};function a(s){return!(s==null||s===""||Object.getPrototypeOf(s)===Object.prototype&&Object.keys(s).length===0)}e.default=o},1983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeInternals=void 0;var n=t(9445),i=t(7110),o=t(3111);e.mergeInternals=function(a,s,u,l,c,f,h,d){var v=[],p=0,m=0,y=!1,b=function(){!y||v.length||p||s.complete()},g=function(w){return p<l?_(w):v.push(w)},_=function(w){f&&s.next(w),p++;var x=!1;n.innerFrom(u(w,m++)).subscribe(o.createOperatorSubscriber(s,function(E){c==null||c(E),f?g(E):s.next(E)},function(){x=!0},void 0,function(){if(x)try{p--;for(var E=function(){var O=v.shift();h?i.executeSchedule(s,h,function(){return _(O)}):_(O)};v.length&&p<l;)E();b()}catch(O){s.error(O)}}))};return a.subscribe(o.createOperatorSubscriber(s,g,function(){y=!0,b()})),function(){d==null||d()}}},1985:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var t={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=t,Object.freeze(t);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=n,Object.freeze(n);var i=n;e.notificationFilterDisabledClassification=i,e.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}},2007:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var t=(function(){function i(){}return i.prototype.release=function(){throw new Error("Not implemented")},i})();e.Releasable=t;var n=(function(){function i(){}return i.prototype.acquireConnection=function(o){throw Error("Not implemented")},i.prototype.supportsMultiDb=function(){throw Error("Not implemented")},i.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},i.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},i.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},i.prototype.SSREnabled=function(){return!1},i.prototype.verifyConnectivityAndGetServerInfo=function(o){throw Error("Not implemented")},i.prototype.verifyAuthentication=function(o){throw Error("Not implemented")},i.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},i.prototype.close=function(){throw Error("Not implemented")},i})();e.default=n},2063:r=>{r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},2066:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(1175));e.default=n({},o.default)},2069:function(r,e,t){var n=this&&this.__awaiter||function(d,v,p,m){return new(p||(p=Promise))(function(y,b){function g(x){try{w(m.next(x))}catch(E){b(E)}}function _(x){try{w(m.throw(x))}catch(E){b(E)}}function w(x){var E;x.done?y(x.value):(E=x.value,E instanceof p?E:new p(function(O){O(E)})).then(g,_)}w((m=m.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var p,m,y,b,g={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(w){return function(x){return(function(E){if(p)throw new TypeError("Generator is already executing.");for(;b&&(b=0,E[0]&&(g=0)),g;)try{if(p=1,m&&(y=2&E[0]?m.return:E[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,E[1])).done)return y;switch(m=0,y&&(E=[2&E[0],y.value]),E[0]){case 0:case 1:y=E;break;case 4:return g.label++,{value:E[1],done:!1};case 5:g.label++,m=E[1],E=[0];continue;case 7:E=g.ops.pop(),g.trys.pop();continue;default:if(!((y=(y=g.trys).length>0&&y[y.length-1])||E[0]!==6&&E[0]!==2)){g=0;continue}if(E[0]===3&&(!y||E[1]>y[0]&&E[1]<y[3])){g.label=E[1];break}if(E[0]===6&&g.label<y[1]){g.label=y[1],y=E;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(E);break}y[2]&&g.ops.pop(),g.trys.pop();continue}E=v.call(d,g)}catch(O){E=[6,O],m=0}finally{p=y=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}})([w,x])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var a=o(t(1967)),s=t(6995),u=(function(){function d(){}return d.prototype.getToken=function(){throw new Error("Not Implemented")},d.prototype.handleSecurityException=function(v,p){throw new Error("Not implemented")},d})();e.default=u,e.AuthTokenAndExpiration=function(){this.token=a.default.none(),this.expiration=void 0};var l=new((function(){function d(){}return d.prototype.bearer=function(v){var p=v.tokenProvider;if(typeof p!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof p));return new f(p,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},d.prototype.basic=function(v){var p=this,m=v.tokenProvider;if(typeof m!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof m));return new f(function(){return n(p,void 0,void 0,function(){var y;return i(this,function(b){switch(b.label){case 0:return y={},[4,m()];case 1:return[2,(y.token=b.sent(),y)]}})})},["Neo.ClientError.Security.Unauthorized"])},d})());e.authTokenManagers=l,Object.freeze(l),e.staticAuthTokenManager=function(d){var v=d.authToken;return new h(v)};var c=(function(){function d(v){v===void 0&&(v=[]),this._subscribers=v}return d.prototype.subscribe=function(v){this._subscribers.push(v)},d.prototype.onCompleted=function(v){this._subscribers.forEach(function(p){return p.onCompleted(v)})},d.prototype.onError=function(v){this._subscribers.forEach(function(p){return p.onError(v)})},d})(),f=(function(){function d(v,p,m,y){this._tokenProvider=v,this._handledSecurityCodes=p,this._currentAuthData=m,this._refreshObservable=y}return d.prototype.getToken=function(){var v;return n(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2,(v=this._currentAuthData)===null||v===void 0?void 0:v.token]}})})},d.prototype.handleSecurityException=function(v,p){var m;return!!this._handledSecurityCodes.includes(p)&&(s.util.equals(v,(m=this._currentAuthData)===null||m===void 0?void 0:m.token)&&this._scheduleRefreshAuthToken(),!0)},d.prototype._scheduleRefreshAuthToken=function(v){var p=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(m){var y;p._currentAuthData=m,(y=p._refreshObservable)===null||y===void 0||y.onCompleted(m)}).catch(function(m){var y;(y=p._refreshObservable)===null||y===void 0||y.onError(m)}).finally(function(){p._refreshObservable=void 0})),v!==void 0&&this._refreshObservable.subscribe(v)},d.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var v=this;return i(this,function(p){switch(p.label){case 0:return[4,new Promise(function(m,y){v._scheduleRefreshAuthToken({onCompleted:m,onError:y})})];case 1:return[2,p.sent()]}})})},d})(),h=(function(){function d(v){this._authToken=v}return d.prototype.getToken=function(){return this._authToken},d.prototype.handleSecurityException=function(v,p){return!1},d})()},2072:function(r,e,t){var n=this&&this.__extends||(function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}c(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})(),i=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),o=this&&this.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),a=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&i(f,c,h);return o(f,c),f};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var s=a(t(5361)),u=(function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return n(f,c),f.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},f})(s.Packer);e.Packer=u;var l=(function(c){function f(h,d){return h===void 0&&(h=!1),d===void 0&&(d=!1),c.call(this,h,d)||this}return n(f,c),f})(s.Unpacker);e.Unpacker=l},2129:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=void 0;var n=t(7843),i=t(3111);e.takeWhile=function(o,a){return a===void 0&&(a=!1),n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){var f=o(c,l++);(f||a)&&u.next(c),!f&&u.complete()}))})}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783);e.partition=function(o,a){return function(s){return[i.filter(o,a)(s),i.filter(n.not(o,a))(s)]}}},2199:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0});var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a.prototype.resolve=function(s){return this._resolveToItself(s)},a})(t(9305).internal.resolver.BaseHostNameResolver);e.default=i},2204:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3019));e.default=n({},o.default)},2343:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=void 0;var n=t(9139),i=t(7843),o=function(a,s){return a.push(s),a};e.toArray=function(){return i.operate(function(a,s){n.reduce(o,[])(a).subscribe(s)})}},2360:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.materialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){s.next(n.Notification.createNext(u))},function(){s.next(n.Notification.createComplete()),s.complete()},function(u){s.next(n.Notification.createError(u)),s.complete()}))})}},2363:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.error.SERVICE_UNAVAILABLE,o=n.error.SESSION_EXPIRED,a=(function(){function u(l,c,f,h){this._errorCode=l,this._handleUnavailability=c||s,this._handleWriteFailure=f||s,this._handleSecurityError=h||s}return u.create=function(l){return new u(l.errorCode,l.handleUnavailability,l.handleWriteFailure,l.handleSecurityError)},u.prototype.errorCode=function(){return this._errorCode},u.prototype.handleAndTransformError=function(l,c,f){return(function(h){return h!=null&&h.code!=null&&h.code.startsWith("Neo.ClientError.Security.")})(l)?this._handleSecurityError(l,c,f):(function(h){return!!h&&(h.code===o||h.code===i||h.code==="Neo.TransientError.General.DatabaseUnavailable")})(l)?this._handleUnavailability(l,c,f):(function(h){return!!h&&(h.code==="Neo.ClientError.Cluster.NotALeader"||h.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase")})(l)?this._handleWriteFailure(l,c,f):l},u})();function s(u){return u}e.default=a},2481:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.internal.util,o=i.ENCRYPTION_OFF,a=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,u=[null,void 0,!0,!1,a,o],l=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function(c,f,h,d){this.address=c,this.encrypted=(function(v){var p=v.encrypted;if(u.indexOf(p)===-1)throw(0,n.newError)("Illegal value of the encrypted setting ".concat(p,". Expected one of ").concat(u));return p})(f),this.trust=(function(v){var p=v.trust;if(l.indexOf(p)===-1)throw(0,n.newError)("Illegal value of the trust setting ".concat(p,". Expected one of ").concat(l));return p})(f),this.trustedCertificates=(function(v){return v.trustedCertificates||[]})(f),this.knownHostsPath=(function(v){return v.knownHosts||null})(f),this.connectionErrorCode=h||s,this.connectionTimeout=f.connectionTimeout,this.clientCertificate=d}},2483:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],p=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&p>=h.length&&(h=void 0),{value:h&&h[p++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AnonymousSubject=e.Subject=void 0;var o=t(4662),a=t(8014),s=t(9686),u=t(7479),l=t(9223),c=(function(h){function d(){var v=h.call(this)||this;return v.closed=!1,v.currentObservers=null,v.observers=[],v.isStopped=!1,v.hasError=!1,v.thrownError=null,v}return n(d,h),d.prototype.lift=function(v){var p=new f(this,this);return p.operator=v,p},d.prototype._throwIfClosed=function(){if(this.closed)throw new s.ObjectUnsubscribedError},d.prototype.next=function(v){var p=this;l.errorContext(function(){var m,y;if(p._throwIfClosed(),!p.isStopped){p.currentObservers||(p.currentObservers=Array.from(p.observers));try{for(var b=i(p.currentObservers),g=b.next();!g.done;g=b.next())g.value.next(v)}catch(_){m={error:_}}finally{try{g&&!g.done&&(y=b.return)&&y.call(b)}finally{if(m)throw m.error}}}})},d.prototype.error=function(v){var p=this;l.errorContext(function(){if(p._throwIfClosed(),!p.isStopped){p.hasError=p.isStopped=!0,p.thrownError=v;for(var m=p.observers;m.length;)m.shift().error(v)}})},d.prototype.complete=function(){var v=this;l.errorContext(function(){if(v._throwIfClosed(),!v.isStopped){v.isStopped=!0;for(var p=v.observers;p.length;)p.shift().complete()}})},d.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(d.prototype,"observed",{get:function(){var v;return((v=this.observers)===null||v===void 0?void 0:v.length)>0},enumerable:!1,configurable:!0}),d.prototype._trySubscribe=function(v){return this._throwIfClosed(),h.prototype._trySubscribe.call(this,v)},d.prototype._subscribe=function(v){return this._throwIfClosed(),this._checkFinalizedStatuses(v),this._innerSubscribe(v)},d.prototype._innerSubscribe=function(v){var p=this,m=this,y=m.hasError,b=m.isStopped,g=m.observers;return y||b?a.EMPTY_SUBSCRIPTION:(this.currentObservers=null,g.push(v),new a.Subscription(function(){p.currentObservers=null,u.arrRemove(g,v)}))},d.prototype._checkFinalizedStatuses=function(v){var p=this,m=p.hasError,y=p.thrownError,b=p.isStopped;m?v.error(y):b&&v.complete()},d.prototype.asObservable=function(){var v=new o.Observable;return v.source=this,v},d.create=function(v,p){return new f(v,p)},d})(o.Observable);e.Subject=c;var f=(function(h){function d(v,p){var m=h.call(this)||this;return m.destination=v,m.source=p,m}return n(d,h),d.prototype.next=function(v){var p,m;(m=(p=this.destination)===null||p===void 0?void 0:p.next)===null||m===void 0||m.call(p,v)},d.prototype.error=function(v){var p,m;(m=(p=this.destination)===null||p===void 0?void 0:p.error)===null||m===void 0||m.call(p,v)},d.prototype.complete=function(){var v,p;(p=(v=this.destination)===null||v===void 0?void 0:v.complete)===null||p===void 0||p.call(v)},d.prototype._subscribe=function(v){var p,m;return(m=(p=this.source)===null||p===void 0?void 0:p.subscribe(v))!==null&&m!==void 0?m:a.EMPTY_SUBSCRIPTION},d})(c);e.AnonymousSubject=f},2533:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})(),i=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(715)),a=(function(s){function u(l){var c=s.call(this)||this;return c._readersIndex=new o.default,c._writersIndex=new o.default,c._connectionPool=l,c}return n(u,s),u.prototype.selectReader=function(l){return this._select(l,this._readersIndex)},u.prototype.selectWriter=function(l){return this._select(l,this._writersIndex)},u.prototype._select=function(l,c){var f=l.length;if(f===0)return null;var h=c.next(f),d=h,v=null,p=Number.MAX_SAFE_INTEGER;do{var m=l[d],y=this._connectionPool.activeResourceCount(m);y<p&&(v=m,p=y),d===f-1?d=0:d++}while(d!==h);return v},u})(i(t(4311)).default);e.default=a},2539:function(r,e,t){var n=this&&this.__extends||(function(){var w=function(x,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,C){O.__proto__=C}||function(O,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(O[A]=C[A])},w(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=x}w(x,E),x.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(w){for(var x,E=1,O=arguments.length;E<O;E++)for(var C in x=arguments[E])Object.prototype.hasOwnProperty.call(x,C)&&(w[C]=x[C]);return w},i.apply(this,arguments)},o=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(5642)),s=o(t(7021)),u=t(397),l=t(9014),c=o(t(2066)),f=o(t(3321)),h=t(9305),d=(h.internal.bookmarks.Bookmarks,h.internal.constants),v=d.BOLT_PROTOCOL_V4_0,p=d.FETCH_ALL,m=h.internal.txConfig.TxConfig,y="context",b="database",g="CALL dbms.routing.getRoutingTable($".concat(y,", $").concat(b,")"),_=(function(w){function x(){return w!==null&&w.apply(this,arguments)||this}return n(x,w),Object.defineProperty(x.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"transformer",{get:function(){var E=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(O){return O(E._config,E._log)}))),this._transformer},enumerable:!1,configurable:!0}),x.prototype.beginTransaction=function(E){var O=E===void 0?{}:E,C=O.bookmarks,A=O.txConfig,R=O.database,k=O.impersonatedUser,D=O.notificationFilter,L=O.mode,j=O.beforeError,q=O.afterError,B=O.beforeComplete,U=O.afterComplete,W=new l.ResultStreamObserver({server:this._server,beforeError:j,afterError:q,beforeComplete:B,afterComplete:U});return W.prepareToHandleSingleResponse(),(0,u.assertImpersonatedUserIsEmpty)(k,this._onProtocolError,W),(0,u.assertNotificationFilterIsEmpty)(D,this._onProtocolError,W),this.write(s.default.begin({bookmarks:C,txConfig:A,database:R,mode:L}),W,!0),W},x.prototype.run=function(E,O,C){var A=C===void 0?{}:C,R=A.bookmarks,k=A.txConfig,D=A.database,L=A.impersonatedUser,j=A.notificationFilter,q=A.mode,B=A.beforeKeys,U=A.afterKeys,W=A.beforeError,H=A.afterError,Y=A.beforeComplete,Z=A.afterComplete,ce=A.flush,$=ce===void 0||ce,K=A.reactive,ie=K!==void 0&&K,ae=A.fetchSize,le=ae===void 0?p:ae,te=A.highRecordWatermark,ee=te===void 0?Number.MAX_VALUE:te,re=A.lowRecordWatermark,he=re===void 0?Number.MAX_VALUE:re,ve=new l.ResultStreamObserver({server:this._server,reactive:ie,fetchSize:le,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:B,afterKeys:U,beforeError:W,afterError:H,beforeComplete:Y,afterComplete:Z,highRecordWatermark:ee,lowRecordWatermark:he});(0,u.assertImpersonatedUserIsEmpty)(L,this._onProtocolError,ve),(0,u.assertNotificationFilterIsEmpty)(j,this._onProtocolError,ve);var _e=ie;return this.write(s.default.runWithMetadata(E,O,{bookmarks:R,txConfig:k,database:D,mode:q}),ve,_e&&$),ie||this.write(s.default.pull({n:le}),ve,$),ve},x.prototype._requestMore=function(E,O,C){this.write(s.default.pull({stmtId:E,n:O}),C,!0)},x.prototype._requestDiscard=function(E,O){this.write(s.default.discard({stmtId:E}),O,!0)},x.prototype._noOp=function(){},x.prototype.requestRoutingInformation=function(E){var O,C=E.routingContext,A=C===void 0?{}:C,R=E.databaseName,k=R===void 0?null:R,D=E.sessionContext,L=D===void 0?{}:D,j=E.onError,q=E.onCompleted,B=this.run(g,((O={})[y]=A,O[b]=k,O),i(i({},L),{txConfig:m.empty()}));return new l.ProcedureRouteObserver({resultObserver:B,onProtocolError:this._onProtocolError,onError:j,onCompleted:q})},x})(a.default);e.default=_},2551:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=void 0;var o=t(3247),a=t(7843),s=t(8535),u=t(1251),l=t(2706),c=t(1107);e.combineLatest=function f(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var v=c.popResultSelector(h);return v?l.pipe(f.apply(void 0,i([],n(h))),u.mapOneOrManyArgs(v)):a.operate(function(p,m){o.combineLatestInit(i([p],n(s.argsOrArgArray(h))))(m)})}},2578:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305);function i(){}function o(u){return u}var a={onNext:i,onCompleted:i,onError:i},s=(function(){function u(l){var c=l===void 0?{}:l,f=c.transformMetadata,h=c.enrichErrorMetadata,d=c.log,v=c.observer;this._pendingObservers=[],this._log=d,this._transformMetadata=f||o,this._enrichErrorMetadata=h||o,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:o},v)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(l){var c=l.fields[0];switch(l.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(l))),this._currentObserver.onNext(c);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(l)));try{var f=this._transformMetadata(c);this._currentObserver.onCompleted(f)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(l)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(c)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(l)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+l))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(u.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),u.prototype._queueObserver=function(l){return(l=l||a).onCompleted=l.onCompleted||i,l.onError=l.onError||i,l.onNext=l.onNext||i,this._currentObserver===void 0?this._currentObserver=l:this._pendingObservers.push(l),this._observer.onObserversCountChange(this._observersCount),!0},u.prototype._notifyErrorToObservers=function(l){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(l);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(l)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u.prototype._handleErrorPayload=function(l){var c,f=(c=l.code)==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":c==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":c,h=l.cause!=null?this._handleErrorCause(l.cause):void 0,d=(0,n.newError)(l.message,f,h,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(d)},u.prototype._handleErrorCause=function(l){var c=l.cause!=null?this._handleErrorCause(l.cause):void 0,f=(0,n.newGQLError)(l.message,c,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(f)},u})();e.default=s},2628:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameAction=void 0;var i=t(5267),o=t(9507),a=(function(s){function u(l,c){var f=s.call(this,l,c)||this;return f.scheduler=l,f.work=c,f}return n(u,s),u.prototype.requestAsyncId=function(l,c,f){return f===void 0&&(f=0),f!==null&&f>0?s.prototype.requestAsyncId.call(this,l,c,f):(l.actions.push(this),l._scheduled||(l._scheduled=o.animationFrameProvider.requestAnimationFrame(function(){return l.flush(void 0)})))},u.prototype.recycleAsyncId=function(l,c,f){var h;if(f===void 0&&(f=0),f!=null?f>0:this.delay>0)return s.prototype.recycleAsyncId.call(this,l,c,f);var d=l.actions;c!=null&&c===l._scheduled&&((h=d[d.length-1])===null||h===void 0?void 0:h.id)!==c&&(o.animationFrameProvider.cancelAnimationFrame(c),l._scheduled=void 0)},u})(i.AsyncAction);e.AnimationFrameAction=a},2669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.min=void 0;var n=t(9139),i=t(1018);e.min=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)<0?a:s}:function(a,s){return a<s?a:s})}},2696:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var t=(function(){function o(){}return o.prototype.subscribe=function(a){i(a,a.onKeys,[]),i(a,a.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(a){throw new Error("CompletedObserver not supposed to call onError",{cause:a})},o})();e.CompletedObserver=t;var n=(function(){function o(a){var s=a.error,u=a.onError;this._error=s,this._beforeError=u,this._observers=[],this.onError(s)}return o.prototype.subscribe=function(a){i(a,a.onError,this._error),this._observers.push(a)},o.prototype.onError=function(a){i(this,this._beforeError,a),this._observers.forEach(function(s){return i(s,s.onError,a)})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.markCompleted=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o})();function i(o,a,s){a!=null&&a.bind(o)(s)}e.FailedObserver=n},2706:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipeFromArray=e.pipe=void 0;var n=t(6640);function i(o){return o.length===0?n.identity:o.length===1?o[0]:function(a){return o.reduce(function(s,u){return u(s)},a)}}e.pipe=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i(o)},e.pipeFromArray=i},2713:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallback=void 0;var n=t(1439);e.bindCallback=function(i,o,a){return n.bindCallbackInternals(!1,i,o,a)}},2752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustAll=void 0;var n=t(4753),i=t(6640);e.exhaustAll=function(){return n.exhaustMap(i.identity)}},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyError=void 0;var n=t(5568);e.EmptyError=n.createErrorClass(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}})},2833:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var n=t(7302),i=t(9445),o=t(8616),a=t(1107),s=t(4917);e.merge=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=a.popScheduler(u),f=a.popNumber(u,1/0),h=u;return h.length?h.length===1?i.innerFrom(h[0]):n.mergeAll(f)(s.from(h,c)):o.EMPTY}},2857:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(8320)),a=i(t(7168)),s=t(9305),u=i(t(3448)),l=i(t(3321)),c=s.internal.constants.BOLT_PROTOCOL_V2,f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),d.prototype._createPacker=function(v){return new a.default.Packer(v)},d.prototype._createUnpacker=function(v,p){return new a.default.Unpacker(v,p)},Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),d})(o.default);e.default=f},2886:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var n=t(4212),i=t(1293);e.queueScheduler=new i.QueueScheduler(n.QueueAction),e.queue=e.queueScheduler},2906:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c},a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var s=o(t(7589));e.PoolConfig=s.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var u=a(t(6842));e.Pool=u.default,e.default=u.default},3001:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(i){this.maxSize=i,this.pruneCount=Math.max(Math.round(.01*i*Math.log(i)),1),this.map=new Map}return n.prototype.set=function(i,o){this.map.set(i,{database:o,lastUsed:Date.now()}),this._pruneCache()},n.prototype.get=function(i){var o=this.map.get(i);if(o!==void 0)return o.lastUsed=Date.now(),o.database},n.prototype.delete=function(i){this.map.delete(i)},n.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var i=Array.from(this.map.entries()).sort(function(a,s){return a[1].lastUsed-s[1].lastUsed}),o=0;o<this.pruneCount;o++)this.map.delete(i[o][0])},n})();e.default=t},3019:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9994));e.default=n({},o.default)},3057:function(r,e,t){var n=this&&this.__awaiter||function(c,f,h,d){return new(h||(h=Promise))(function(v,p){function m(g){try{b(d.next(g))}catch(_){p(_)}}function y(g){try{b(d.throw(g))}catch(_){p(_)}}function b(g){var _;g.done?v(g.value):(_=g.value,_ instanceof h?_:new h(function(w){w(_)})).then(m,y)}b((d=d.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var h,d,v,p,m={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(b){return function(g){return(function(_){if(h)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(m=0)),m;)try{if(h=1,d&&(v=2&_[0]?d.return:_[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,_[1])).done)return v;switch(d=0,v&&(_=[2&_[0],v.value]),_[0]){case 0:case 1:v=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,d=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!((v=(v=m.trys).length>0&&v[v.length-1])||_[0]!==6&&_[0]!==2)){m=0;continue}if(_[0]===3&&(!v||_[1]>v[0]&&_[1]<v[3])){m.label=_[1];break}if(_[0]===6&&m.label<v[1]){m.label=v[1],v=_;break}if(v&&m.label<v[2]){m.label=v[2],m.ops.push(_);break}v[2]&&m.ops.pop(),m.trys.pop();continue}_=f.call(c,m)}catch(w){_=[6,w],d=0}finally{h=v=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}})([b,g])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(8813),s=t(9419),u=(function(){function c(f,h){var d=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=d,this._keys=d.pipe((0,s.mergeMap)(function(v){return(0,a.from)(v.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new l,this._summary=new a.ReplaySubject,this._state=h||0}return c.prototype.keys=function(){return this._keys},c.prototype.records=function(){var f=this,h=this._result.pipe((0,s.mergeMap)(function(d){return new a.Observable(function(v){return f._startStreaming({result:d,recordsObserver:v})})}));return h.push=function(){return f._push()},h},c.prototype.consume=function(){var f=this;return this._result.pipe((0,s.mergeMap)(function(h){return new a.Observable(function(d){return f._startStreaming({result:h,summaryObserver:d})})}))},c.prototype.pause=function(){this._controls.pause()},c.prototype.resume=function(){return this._controls.resume()},c.prototype.push=function(){return this._controls.push()},c.prototype._startStreaming=function(f){var h=f===void 0?{}:f,d=h.result,v=h.recordsObserver,p=v===void 0?null:v,m=h.summaryObserver,y=m===void 0?null:m,b=[];return y&&b.push(this._summary.subscribe(y)),this._state<1?(this._state=1,this._setupRecordsStream(d),p?b.push(this._records.subscribe(p)):d._cancel(),b.push({unsubscribe:function(){d._cancel&&d._cancel()}})):p&&p.error((0,o.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){b.forEach(function(g){return g.unsubscribe()})}},c.prototype._toObservable=function(){var f=this;return new a.Observable(function(h){f._result.subscribe({complete:function(){return h.complete()},next:function(d){return h.next(new c((function(v){return new a.Observable(function(p){p.next(v),p.complete()})})(d)),f._state)},error:function(d){return h.error(d)}})})},c.prototype._setupRecordsStream=function(f){var h=this;return this._records||(this._records=(function(d,v,p){var m=this;p===void 0&&(p=new l);var y=new a.Subject,b=function(_){return n(m,void 0,void 0,function(){var w,x,E,O;return i(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,3,4]),p.pushing=!0,[4,_];case 1:return w=C.sent(),x=w.done,E=w.value,x?(y.complete(),v.complete()):(y.next(E),p.paused||b(d.next()).catch(function(){})),[3,4];case 2:return O=C.sent(),y.error(O),v.error(O),[3,4];case 3:return p.pushing=!1,[7];case 4:return[2]}})})};function g(_){return n(this,void 0,void 0,function(){return i(this,function(w){switch(w.label){case 0:return[4,b(d.next(_))];case 1:return w.sent(),[2]}})})}return p.pusher=g,g(),y})(f[Symbol.asyncIterator](),{complete:function(){return n(h,void 0,void 0,function(){var d,v;return i(this,function(p){switch(p.label){case 0:return this._state=2,v=(d=this._summary).next,[4,f.summary()];case 1:return v.apply(d,[p.sent()]),this._summary.complete(),[2]}})})},error:function(d){h._state=2,h._summary.error(d)}},this._controls)),this._records},c})();e.default=u;var l=(function(){function c(f){f===void 0&&(f=function(){return n(h,void 0,void 0,function(){return i(this,function(d){return[2]})})});var h=this;this._paused=!1,this._pushing=!1,this._push=f}return c.prototype.pause=function(){this._paused=!0},Object.defineProperty(c.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pushing",{get:function(){return this._pushing},set:function(f){this._pushing=f},enumerable:!1,configurable:!0}),c.prototype.resume=function(){return n(this,void 0,void 0,function(){var f;return i(this,function(h){switch(h.label){case 0:return f=this._paused,this._paused=!1,!f||this._pushing?[3,2]:[4,this._push()];case 1:h.sent(),h.label=2;case 2:return[2]}})})},c.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(f){switch(f.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,f.sent()]}})})},Object.defineProperty(c.prototype,"pusher",{get:function(){return this._push},set:function(f){this._push=f},enumerable:!1,configurable:!0}),c})()},3110:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrames=void 0;var n=t(4662),i=t(4746),o=t(9507);function a(u){return new n.Observable(function(l){var c=u||i.performanceTimestampProvider,f=c.now(),h=0,d=function(){l.closed||(h=o.animationFrameProvider.requestAnimationFrame(function(v){h=0;var p=c.now();l.next({timestamp:u?p:v,elapsed:p-f}),d()}))};return d(),function(){h&&o.animationFrameProvider.cancelAnimationFrame(h)}})}e.animationFrames=function(u){return u?a(u):s};var s=a()},3111:function(r,e,t){var n=this&&this.__extends||(function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorSubscriber=e.createOperatorSubscriber=void 0;var i=t(5);e.createOperatorSubscriber=function(a,s,u,l,c){return new o(a,s,u,l,c)};var o=(function(a){function s(u,l,c,f,h,d){var v=a.call(this,u)||this;return v.onFinalize=h,v.shouldUnsubscribe=d,v._next=l?function(p){try{l(p)}catch(m){u.error(m)}}:a.prototype._next,v._error=f?function(p){try{f(p)}catch(m){u.error(m)}finally{this.unsubscribe()}}:a.prototype._error,v._complete=c?function(){try{c()}catch(p){u.error(p)}finally{this.unsubscribe()}}:a.prototype._complete,v}return n(s,a),s.prototype.unsubscribe=function(){var u;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var l=this.closed;a.prototype.unsubscribe.call(this),!l&&((u=this.onFinalize)===null||u===void 0||u.call(this))}},s})(i.Subscriber);e.OperatorSubscriber=o},3133:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=void 0;var n=t(1242),i=t(8977);e.shareReplay=function(o,a,s){var u,l,c,f,h=!1;return o&&typeof o=="object"?(u=o.bufferSize,f=u===void 0?1/0:u,l=o.windowTime,a=l===void 0?1/0:l,h=(c=o.refCount)!==void 0&&c,s=o.scheduler):f=o??1/0,i.share({connector:function(){return new n.ReplaySubject(f,a,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}},3146:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.audit=void 0;var n=t(7843),i=t(9445),o=t(3111);e.audit=function(a){return n.operate(function(s,u){var l=!1,c=null,f=null,h=!1,d=function(){if(f==null||f.unsubscribe(),f=null,l){l=!1;var p=c;c=null,u.next(p)}h&&u.complete()},v=function(){f=null,h&&u.complete()};s.subscribe(o.createOperatorSubscriber(u,function(p){l=!0,c=p,f||i.innerFrom(a(p)).subscribe(f=o.createOperatorSubscriber(u,d,v))},function(){h=!0,(!l||!f||f.closed)&&u.complete()}))})}},3206:(r,e,t)=>{r.exports=function(E){var O,C,A,R=0,k=0,D=u,L=[],j=[],q=1,B=0,U=0,W=!1,H=!1,Y="",Z=o,ce=n;(E=E||{}).version==="300 es"&&(Z=s,ce=a);var $={},K={};for(R=0;R<Z.length;R++)$[Z[R]]=!0;for(R=0;R<ce.length;R++)K[ce[R]]=!0;return function(F){return j=[],F!==null?(function(G){var X;for(R=0,G.toString&&(G=G.toString()),Y+=G.replace(/\r\n/g,`
`),A=Y.length;O=Y[R],R<A;){switch(X=R,D){case c:R=re();break;case f:R=ee();break;case h:R=te();break;case d:R=he();break;case v:R=Oe();break;case w:R=_e();break;case p:R=Pe();break;case l:R=me();break;case g:R=le();break;case u:R=ae()}X!==R&&(Y[X]===`
`?(B=0,++q):++B)}return k+=R,Y=Y.slice(R),j})(F):(L.length&&ie(L.join("")),D=_,ie("(eof)"),j)};function ie(F){F.length&&j.push({type:x[D],data:F,position:U,line:q,column:B})}function ae(){return L=L.length?[]:L,C==="/"&&O==="*"?(U=k+R-1,D=c,C=O,R+1):C==="/"&&O==="/"?(U=k+R-1,D=f,C=O,R+1):O==="#"?(D=h,U=k+R,R):/\s/.test(O)?(D=g,U=k+R,R):(W=/\d/.test(O),H=/[^\w_]/.test(O),U=k+R,D=W?v:H?d:l,R)}function le(){return/[^\s]/g.test(O)?(ie(L.join("")),D=u,R):(L.push(O),C=O,R+1)}function te(){return O!=="\r"&&O!==`
`||C==="\\"?(L.push(O),C=O,R+1):(ie(L.join("")),D=u,R)}function ee(){return te()}function re(){return O==="/"&&C==="*"?(L.push(O),ie(L.join("")),D=u,R+1):(L.push(O),C=O,R+1)}function he(){if(C==="."&&/\d/.test(O))return D=p,R;if(C==="/"&&O==="*")return D=c,R;if(C==="/"&&O==="/")return D=f,R;if(O==="."&&L.length){for(;ve(L););return D=p,R}if(O===";"||O===")"||O==="("){if(L.length)for(;ve(L););return ie(O),D=u,R+1}var F=L.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||F){for(;ve(L););return D=u,R}return L.push(O),C=O,R+1}function ve(F){for(var G,X,se=0;;){if(G=i.indexOf(F.slice(0,F.length+se).join("")),X=i[G],G===-1){if(se--+F.length>0)continue;X=F.slice(0,1).join("")}return ie(X),U+=X.length,(L=L.slice(X.length)).length}}function _e(){return/[^a-fA-F0-9]/.test(O)?(ie(L.join("")),D=u,R):(L.push(O),C=O,R+1)}function Oe(){return O==="."||/[eE]/.test(O)?(L.push(O),D=p,C=O,R+1):O==="x"&&L.length===1&&L[0]==="0"?(D=w,L.push(O),C=O,R+1):/[^\d]/.test(O)?(ie(L.join("")),D=u,R):(L.push(O),C=O,R+1)}function Pe(){return O==="f"&&(L.push(O),C=O,R+=1),/[eE]/.test(O)?(L.push(O),C=O,R+1):(O!=="-"&&O!=="+"||!/[eE]/.test(C))&&/[^\d]/.test(O)?(ie(L.join("")),D=u,R):(L.push(O),C=O,R+1)}function me(){if(/[^\d\w_]/.test(O)){var F=L.join("");return D=K[F]?b:$[F]?y:m,ie(L.join("")),D=u,R}return L.push(O),C=O,R+1}};var n=t(4704),i=t(2063),o=t(7192),a=t(8784),s=t(5592),u=999,l=9999,c=0,f=1,h=2,d=3,v=4,p=5,m=6,y=7,b=8,g=9,_=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3218:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=void 0;var n=t(5471);e.mapTo=function(i){return n.map(function(){return i})}},3229:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameScheduler=void 0;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return n(a,o),a.prototype.flush=function(s){var u;this._active=!0,s?u=s.id:(u=this._scheduled,this._scheduled=void 0);var l,c=this.actions;s=s||c.shift();do if(l=s.execute(s.state,s.delay))break;while((s=c[0])&&s.id===u&&c.shift());if(this._active=!1,l){for(;(s=c[0])&&s.id===u&&c.shift();)s.unsubscribe();throw l}},a})(t(5648).AsyncScheduler);e.AnimationFrameScheduler=i},3231:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=void 0;var n=t(7961),i=t(3146),o=t(4092);e.auditTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.audit(function(){return o.timer(a,s)})}},3247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestInit=e.combineLatest=void 0;var n=t(4662),i=t(7360),o=t(4917),a=t(6640),s=t(1251),u=t(1107),l=t(6013),c=t(3111),f=t(7110);function h(v,p,m){return m===void 0&&(m=a.identity),function(y){d(p,function(){for(var b=v.length,g=new Array(b),_=b,w=b,x=function(O){d(p,function(){var C=o.from(v[O],p),A=!1;C.subscribe(c.createOperatorSubscriber(y,function(R){g[O]=R,A||(A=!0,w--),w||y.next(m(g.slice()))},function(){--_||y.complete()}))},y)},E=0;E<b;E++)x(E)},y)}}function d(v,p,m){v?f.executeSchedule(m,v,p):p()}e.combineLatest=function(){for(var v=[],p=0;p<arguments.length;p++)v[p]=arguments[p];var m=u.popScheduler(v),y=u.popResultSelector(v),b=i.argsArgArrayOrObject(v),g=b.args,_=b.keys;if(g.length===0)return o.from([],m);var w=new n.Observable(h(g,m,_?function(x){return l.createObject(_,x)}:a.identity));return y?w.pipe(s.mapOneOrManyArgs(y)):w},e.combineLatestInit=h},3269:(r,e,t)=>{var n=t(6931),i=t(9975),o=Object.hasOwnProperty,a=Object.create(null);for(var s in n)o.call(n,s)&&(a[n[s]]=s);var u=r.exports={to:{},get:{}};function l(f,h,d){return Math.min(Math.max(h,f),d)}function c(f){var h=Math.round(f).toString(16).toUpperCase();return h.length<2?"0"+h:h}u.get=function(f){var h,d;switch(f.substring(0,3).toLowerCase()){case"hsl":h=u.get.hsl(f),d="hsl";break;case"hwb":h=u.get.hwb(f),d="hwb";break;default:h=u.get.rgb(f),d="rgb"}return h?{model:d,value:h}:null},u.get.rgb=function(f){if(!f)return null;var h,d,v,p=[0,0,0,1];if(h=f.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=h[2],h=h[1],d=0;d<3;d++){var m=2*d;p[d]=parseInt(h.slice(m,m+2),16)}v&&(p[3]=parseInt(v,16)/255)}else if(h=f.match(/^#([a-f0-9]{3,4})$/i)){for(v=(h=h[1])[3],d=0;d<3;d++)p[d]=parseInt(h[d]+h[d],16);v&&(p[3]=parseInt(v+v,16)/255)}else if(h=f.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(d=0;d<3;d++)p[d]=parseInt(h[d+1],0);h[4]&&(h[5]?p[3]=.01*parseFloat(h[4]):p[3]=parseFloat(h[4]))}else{if(!(h=f.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(h=f.match(/^(\w+)$/))?h[1]==="transparent"?[0,0,0,0]:o.call(n,h[1])?((p=n[h[1]])[3]=1,p):null:null;for(d=0;d<3;d++)p[d]=Math.round(2.55*parseFloat(h[d+1]));h[4]&&(h[5]?p[3]=.01*parseFloat(h[4]):p[3]=parseFloat(h[4]))}for(d=0;d<3;d++)p[d]=l(p[d],0,255);return p[3]=l(p[3],0,1),p},u.get.hsl=function(f){if(!f)return null;var h=f.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.get.hwb=function(f){if(!f)return null;var h=f.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.to.hex=function(){var f=i(arguments);return"#"+c(f[0])+c(f[1])+c(f[2])+(f[3]<1?c(Math.round(255*f[3])):"")},u.to.rgb=function(){var f=i(arguments);return f.length<4||f[3]===1?"rgb("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+")":"rgba("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+", "+f[3]+")"},u.to.rgb.percent=function(){var f=i(arguments),h=Math.round(f[0]/255*100),d=Math.round(f[1]/255*100),v=Math.round(f[2]/255*100);return f.length<4||f[3]===1?"rgb("+h+"%, "+d+"%, "+v+"%)":"rgba("+h+"%, "+d+"%, "+v+"%, "+f[3]+")"},u.to.hsl=function(){var f=i(arguments);return f.length<4||f[3]===1?"hsl("+f[0]+", "+f[1]+"%, "+f[2]+"%)":"hsla("+f[0]+", "+f[1]+"%, "+f[2]+"%, "+f[3]+")"},u.to.hwb=function(){var f=i(arguments),h="";return f.length>=4&&f[3]!==1&&(h=", "+f[3]),"hwb("+f[0]+", "+f[1]+"%, "+f[2]+"%"+h+")"},u.to.keyword=function(f){return a[f.slice(0,3)]}},3274:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=void 0;var n=t(3879),i=t(1018);e.switchMapTo=function(o,a){return i.isFunction(a)?n.switchMap(function(){return o},a):n.switchMap(function(){return o})}},3321:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var n=t(7168),i=t(9305).internal.objectUtil,o=(function(){function s(u){this._transformers=u,this._transformersPerSignature=new Map(u.map(function(l){return[l.signature,l]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return s.prototype.fromStructure=function(u){try{return u instanceof n.structure.Structure&&this._transformersPerSignature.has(u.signature)?(0,this._transformersPerSignature.get(u.signature).fromStructure)(u):u}catch(l){return i.createBrokenObject(l)}},s.prototype.toStructure=function(u){var l=this._transformers.find(function(c){return(0,c.isTypeInstance)(u)});return l!==void 0?l.toStructure(u):u},s})();e.default=o;var a=(function(){function s(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;this.signature=l,this.isTypeInstance=h,this.fromStructure=c,this.toStructure=f,Object.freeze(this)}return s.prototype.extendsWith=function(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;return new s({signature:l||this.signature,fromStructure:c||this.fromStructure,toStructure:f||this.toStructure,isTypeInstance:h||this.isTypeInstance})},s})();e.TypeTransformer=a},3327:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observable=void 0,e.observable=typeof Symbol=="function"&&Symbol.observable||"@@observable"},3371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=t(9691),i=new Map,o=(function(){function p(m,y){this.low=m??0,this.high=y??0}return p.prototype.inSafeRange=function(){return this.greaterThanOrEqual(p.MIN_SAFE_VALUE)&&this.lessThanOrEqual(p.MAX_SAFE_VALUE)},p.prototype.toInt=function(){return this.low},p.prototype.toNumber=function(){return this.high*s+(this.low>>>0)},p.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(s)+BigInt(this.low>>>0);var m=this.negate();return BigInt(-1)*(BigInt(m.high>>>0)*BigInt(s)+BigInt(m.low>>>0))},p.prototype.toNumberOrInfinity=function(){return this.lessThan(p.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(p.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},p.prototype.toString=function(m){if((m=m??10)<2||m>36)throw RangeError("radix out of range: "+m.toString());if(this.isZero())return"0";var y;if(this.isNegative()){if(this.equals(p.MIN_VALUE)){var b=p.fromNumber(m),g=this.div(b);return y=g.multiply(b).subtract(this),g.toString(m)+y.toInt().toString(m)}return"-"+this.negate().toString(m)}var _=p.fromNumber(Math.pow(m,6));y=this;for(var w="";;){var x=y.div(_),E=(y.subtract(x.multiply(_)).toInt()>>>0).toString(m);if((y=x).isZero())return E+w;for(;E.length<6;)E="0"+E;w=""+E+w}},p.prototype.valueOf=function(){return this.toBigInt()},p.prototype.getHighBits=function(){return this.high},p.prototype.getLowBits=function(){return this.low},p.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(p.MIN_VALUE)?64:this.negate().getNumBitsAbs();var m=this.high!==0?this.high:this.low,y=0;for(y=31;y>0&&!(m&1<<y);y--);return this.high!==0?y+33:y+1},p.prototype.isZero=function(){return this.high===0&&this.low===0},p.prototype.isNegative=function(){return this.high<0},p.prototype.isPositive=function(){return this.high>=0},p.prototype.isOdd=function(){return!(1&~this.low)},p.prototype.isEven=function(){return!(1&this.low)},p.prototype.equals=function(m){var y=p.fromValue(m);return this.high===y.high&&this.low===y.low},p.prototype.notEquals=function(m){return!this.equals(m)},p.prototype.lessThan=function(m){return this.compare(m)<0},p.prototype.lessThanOrEqual=function(m){return this.compare(m)<=0},p.prototype.greaterThan=function(m){return this.compare(m)>0},p.prototype.greaterThanOrEqual=function(m){return this.compare(m)>=0},p.prototype.compare=function(m){var y=p.fromValue(m);if(this.equals(y))return 0;var b=this.isNegative(),g=y.isNegative();return b&&!g?-1:!b&&g?1:this.subtract(y).isNegative()?-1:1},p.prototype.negate=function(){return this.equals(p.MIN_VALUE)?p.MIN_VALUE:this.not().add(p.ONE)},p.prototype.add=function(m){var y=p.fromValue(m),b=this.high>>>16,g=65535&this.high,_=this.low>>>16,w=65535&this.low,x=y.high>>>16,E=65535&y.high,O=y.low>>>16,C=0,A=0,R=0,k=0;return R+=(k+=w+(65535&y.low))>>>16,k&=65535,A+=(R+=_+O)>>>16,R&=65535,C+=(A+=g+E)>>>16,A&=65535,C+=b+x,C&=65535,p.fromBits(R<<16|k,C<<16|A)},p.prototype.subtract=function(m){var y=p.fromValue(m);return this.add(y.negate())},p.prototype.multiply=function(m){if(this.isZero())return p.ZERO;var y=p.fromValue(m);if(y.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return y.isOdd()?p.MIN_VALUE:p.ZERO;if(y.equals(p.MIN_VALUE))return this.isOdd()?p.MIN_VALUE:p.ZERO;if(this.isNegative())return y.isNegative()?this.negate().multiply(y.negate()):this.negate().multiply(y).negate();if(y.isNegative())return this.multiply(y.negate()).negate();if(this.lessThan(l)&&y.lessThan(l))return p.fromNumber(this.toNumber()*y.toNumber());var b=this.high>>>16,g=65535&this.high,_=this.low>>>16,w=65535&this.low,x=y.high>>>16,E=65535&y.high,O=y.low>>>16,C=65535&y.low,A=0,R=0,k=0,D=0;return k+=(D+=w*C)>>>16,D&=65535,R+=(k+=_*C)>>>16,k&=65535,R+=(k+=w*O)>>>16,k&=65535,A+=(R+=g*C)>>>16,R&=65535,A+=(R+=_*O)>>>16,R&=65535,A+=(R+=w*E)>>>16,R&=65535,A+=b*C+g*O+_*E+w*x,A&=65535,p.fromBits(k<<16|D,A<<16|R)},p.prototype.div=function(m){var y,b,g,_=p.fromValue(m);if(_.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return _.equals(p.ONE)||_.equals(p.NEG_ONE)?p.MIN_VALUE:_.equals(p.MIN_VALUE)?p.ONE:(y=this.shiftRight(1).div(_).shiftLeft(1)).equals(p.ZERO)?_.isNegative()?p.ONE:p.NEG_ONE:(b=this.subtract(_.multiply(y)),g=y.add(b.div(_)));if(_.equals(p.MIN_VALUE))return p.ZERO;if(this.isNegative())return _.isNegative()?this.negate().div(_.negate()):this.negate().div(_).negate();if(_.isNegative())return this.div(_.negate()).negate();for(g=p.ZERO,b=this;b.greaterThanOrEqual(_);){y=Math.max(1,Math.floor(b.toNumber()/_.toNumber()));for(var w=Math.ceil(Math.log(y)/Math.LN2),x=w<=48?1:Math.pow(2,w-48),E=p.fromNumber(y),O=E.multiply(_);O.isNegative()||O.greaterThan(b);)y-=x,O=(E=p.fromNumber(y)).multiply(_);E.isZero()&&(E=p.ONE),g=g.add(E),b=b.subtract(O)}return g},p.prototype.modulo=function(m){var y=p.fromValue(m);return this.subtract(this.div(y).multiply(y))},p.prototype.not=function(){return p.fromBits(~this.low,~this.high)},p.prototype.and=function(m){var y=p.fromValue(m);return p.fromBits(this.low&y.low,this.high&y.high)},p.prototype.or=function(m){var y=p.fromValue(m);return p.fromBits(this.low|y.low,this.high|y.high)},p.prototype.xor=function(m){var y=p.fromValue(m);return p.fromBits(this.low^y.low,this.high^y.high)},p.prototype.shiftLeft=function(m){var y=p.toNumber(m);return(y&=63)==0?p.ZERO:y<32?p.fromBits(this.low<<y,this.high<<y|this.low>>>32-y):p.fromBits(0,this.low<<y-32)},p.prototype.shiftRight=function(m){var y=p.toNumber(m),b=p.toNumber(m);return(y&=63)==0?p.ZERO:b<32?p.fromBits(this.low>>>y|this.high<<32-y,this.high>>y):p.fromBits(this.high>>y-32,this.high>=0?0:-1)},p.isInteger=function(m){return(m==null?void 0:m.__isInteger__)===!0},p.fromInt=function(m){var y;if((m|=0)>=-128&&m<128&&(y=i.get(m))!=null)return y;var b=new p(m,m<0?-1:0);return m>=-128&&m<128&&i.set(m,b),b},p.fromBits=function(m,y){return new p(m,y)},p.fromNumber=function(m){return isNaN(m)||!isFinite(m)?p.ZERO:m<=-u?p.MIN_VALUE:m+1>=u?p.MAX_VALUE:m<0?p.fromNumber(-m).negate():new p(m%s|0,m/s|0)},p.fromString=function(m,y,b){var g,_=(b===void 0?{}:b).strictStringValidation;if(m.length===0)throw(0,n.newError)("number format error: empty string");if(m==="NaN"||m==="Infinity"||m==="+Infinity"||m==="-Infinity")return p.ZERO;if((y=y??10)<2||y>36)throw(0,n.newError)("radix out of range: "+y.toString());if((g=m.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+m);if(g===0)return p.fromString(m.substring(1),y).negate();for(var w=p.fromNumber(Math.pow(y,8)),x=p.ZERO,E=0;E<m.length;E+=8){var O=Math.min(8,m.length-E),C=m.substring(E,E+O),A=parseInt(C,y);if(_===!0&&!a(C,A,y))throw(0,n.newError)('number format error: "'.concat(C,'" is NaN in radix ').concat(y,": ").concat(m));if(O<8){var R=p.fromNumber(Math.pow(y,O));x=x.multiply(R).add(p.fromNumber(A))}else x=(x=x.multiply(w)).add(p.fromNumber(A))}return x},p.fromValue=function(m,y){return y===void 0&&(y={}),m instanceof p?m:typeof m=="number"?(y.ceilFloat===!0&&(m=Math.ceil(m)),p.fromNumber(m)):typeof m=="string"?p.fromString(m,void 0,y):typeof m=="bigint"?p.fromString(m.toString()):new p(m.low,m.high)},p.toNumber=function(m){switch(typeof m){case"number":return m;case"bigint":return Number(m);default:return p.fromValue(m).toNumber()}},p.toString=function(m,y){return p.fromValue(m).toString(y)},p.inSafeRange=function(m){return p.fromValue(m).inSafeRange()},p.ZERO=p.fromInt(0),p.ONE=p.fromInt(1),p.NEG_ONE=p.fromInt(-1),p.MAX_VALUE=p.fromBits(-1,2147483647),p.MIN_VALUE=p.fromBits(0,-2147483648),p.MIN_SAFE_VALUE=p.fromBits(1,-2097152),p.MAX_SAFE_VALUE=p.fromBits(-1,2097151),p.__isInteger__=!0,p})();function a(p,m,y){return!Number.isNaN(p)&&!Number.isNaN(m)&&(function(b,g,_){var w=b.toString(g),x=Math.max(_-w.length,0),E="0".repeat(x);return"".concat(E).concat(w)})(m,y,p.length)===p.toLowerCase()}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var s=4294967296,u=s*s/2,l=o.fromInt(1<<24),c=o.fromValue;e.int=c;var f=o.isInteger;e.isInt=f;var h=o.inSafeRange;e.inSafeRange=h;var d=o.toNumber;e.toNumber=d;var v=o.toString;e.toString=v,e.default=o},3389:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(){}return n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(i){return Promise.resolve([i])},n})();e.default=t},3399:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9238));e.default=n({},o.default)},3413:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3448:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(m){for(var y,b=1,g=arguments.length;b<g;b++)for(var _ in y=arguments[b])Object.prototype.hasOwnProperty.call(y,_)&&(m[_]=y[_]);return m},n.apply(this,arguments)},i=this&&this.__read||function(m,y){var b=typeof Symbol=="function"&&m[Symbol.iterator];if(!b)return m;var g,_,w=b.call(m),x=[];try{for(;(y===void 0||y-- >0)&&!(g=w.next()).done;)x.push(g.value)}catch(E){_={error:E}}finally{try{g&&!g.done&&(b=w.return)&&b.call(w)}finally{if(_)throw _.error}}return x},o=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),s=t(7168),u=t(3321),l=t(5973),c=o(t(6661)),f=a.internal.temporalUtil,h=f.dateToEpochDay,d=f.localDateTimeToEpochSecond,v=f.localTimeToNanoOfDay;function p(m,y,b){if(!y&&!b)return m;var g=function(E){return b?E.toBigInt():E.toNumberOrInfinity()},_=Object.create(Object.getPrototypeOf(m));for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)===!0){var x=m[w];_[w]=(0,a.isInt)(x)?g(x):x}return Object.freeze(_),_}e.default=n(n({},c.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:88,isTypeInstance:function(m){return(0,a.isPoint)(m)&&(m.z===null||m.z===void 0)},toStructure:function(m){return new s.structure.Structure(88,[(0,a.int)(m.srid),m.x,m.y])},fromStructure:function(m){s.structure.verifyStructSize("Point2D",3,m.size);var y=i(m.fields,3),b=y[0],g=y[1],_=y[2];return new a.Point(b,g,_,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:89,isTypeInstance:function(m){return(0,a.isPoint)(m)&&m.z!==null&&m.z!==void 0},toStructure:function(m){return new s.structure.Structure(89,[(0,a.int)(m.srid),m.x,m.y,m.z])},fromStructure:function(m){s.structure.verifyStructSize("Point3D",4,m.size);var y=i(m.fields,4),b=y[0],g=y[1],_=y[2],w=y[3];return new a.Point(b,g,_,w)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:69,isTypeInstance:a.isDuration,toStructure:function(m){var y=(0,a.int)(m.months),b=(0,a.int)(m.days),g=(0,a.int)(m.seconds),_=(0,a.int)(m.nanoseconds);return new s.structure.Structure(69,[y,b,g,_])},fromStructure:function(m){s.structure.verifyStructSize("Duration",4,m.size);var y=i(m.fields,4),b=y[0],g=y[1],_=y[2],w=y[3];return new a.Duration(b,g,_,w)}})},createLocalTimeTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:116,isTypeInstance:a.isLocalTime,toStructure:function(g){var _=v(g.hour,g.minute,g.second,g.nanosecond);return new s.structure.Structure(116,[_])},fromStructure:function(g){s.structure.verifyStructSize("LocalTime",1,g.size);var _=i(g.fields,1)[0];return p((0,l.nanoOfDayToLocalTime)(_),y,b)}})},createTimeTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:84,isTypeInstance:a.isTime,toStructure:function(g){var _=v(g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.timeZoneOffsetSeconds);return new s.structure.Structure(84,[_,w])},fromStructure:function(g){s.structure.verifyStructSize("Time",2,g.size);var _=i(g.fields,2),w=_[0],x=_[1],E=(0,l.nanoOfDayToLocalTime)(w);return p(new a.Time(E.hour,E.minute,E.second,E.nanosecond,x),y,b)}})},createDateTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:68,isTypeInstance:a.isDate,toStructure:function(g){var _=h(g.year,g.month,g.day);return new s.structure.Structure(68,[_])},fromStructure:function(g){s.structure.verifyStructSize("Date",1,g.size);var _=i(g.fields,1)[0];return p((0,l.epochDayToDate)(_),y,b)}})},createLocalDateTimeTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:100,isTypeInstance:a.isLocalDateTime,toStructure:function(g){var _=d(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.nanosecond);return new s.structure.Structure(100,[_,w])},fromStructure:function(g){s.structure.verifyStructSize("LocalDateTime",2,g.size);var _=i(g.fields,2),w=_[0],x=_[1];return p((0,l.epochSecondAndNanoToLocalDateTime)(w,x),y,b)}})},createDateTimeWithZoneIdTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:102,isTypeInstance:function(g){return(0,a.isDateTime)(g)&&g.timeZoneId!=null},toStructure:function(g){var _=d(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.nanosecond),x=g.timeZoneId;return new s.structure.Structure(102,[_,w,x])},fromStructure:function(g){s.structure.verifyStructSize("DateTimeWithZoneId",3,g.size);var _=i(g.fields,3),w=_[0],x=_[1],E=_[2],O=(0,l.epochSecondAndNanoToLocalDateTime)(w,x);return p(new a.DateTime(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond,null,E),y,b)}})},createDateTimeWithOffsetTransformer:function(m){var y=m.disableLosslessIntegers,b=m.useBigInt;return new u.TypeTransformer({signature:70,isTypeInstance:function(g){return(0,a.isDateTime)(g)&&g.timeZoneId==null},toStructure:function(g){var _=d(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond),w=(0,a.int)(g.nanosecond),x=(0,a.int)(g.timeZoneOffsetSeconds);return new s.structure.Structure(70,[_,w,x])},fromStructure:function(g){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,g.size);var _=i(g.fields,3),w=_[0],x=_[1],E=_[2],O=(0,l.epochSecondAndNanoToLocalDateTime)(w,x);return p(new a.DateTime(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond,E,null),y,b)}})}})},3466:function(r,e,t){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=t(9419),a=n(t(3057)),s=t(9305),u=n(t(5742)),l=n(t(1530)),c=n(t(9823)),f=s.internal.constants,h=f.ACCESS_MODE_READ,d=f.ACCESS_MODE_WRITE,v=f.TELEMETRY_APIS,p=s.internal.txConfig.TxConfig,m=(function(){function y(b){var g=b===void 0?{}:b,_=g.session,w=g.config,x=g.log;this._session=_,this._retryLogic=(function(E){var O=E&&E.maxTransactionRetryTime?E.maxTransactionRetryTime:null;return new c.default({maxRetryTimeout:O})})(w),this._log=x}return y.prototype.run=function(b,g,_){var w=this;return new a.default(new i.Observable(function(x){try{x.next(w._session.run(b,g,_)),x.complete()}catch(E){x.error(E)}return function(){}}))},y.prototype.beginTransaction=function(b){return this._beginTransaction(this._session._mode,b,{api:v.UNMANAGED_TRANSACTION})},y.prototype.readTransaction=function(b,g){return this._runTransaction(h,b,g)},y.prototype.writeTransaction=function(b,g){return this._runTransaction(d,b,g)},y.prototype.executeRead=function(b,g){return this._executeInTransaction(h,b,g)},y.prototype.executeWrite=function(b,g){return this._executeInTransaction(d,b,g)},y.prototype._executeInTransaction=function(b,g,_){return this._runTransaction(b,g,_,function(w){return new l.default({run:w.run.bind(w)})})},y.prototype.close=function(){var b=this;return new i.Observable(function(g){b._session.close().then(function(){g.complete()}).catch(function(_){return g.error(_)})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype.lastBookmark=function(){return this.lastBookmarks()},y.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},y.prototype._beginTransaction=function(b,g,_){var w=this,x=p.empty();return g&&(x=new p(g,this._log)),new i.Observable(function(E){try{w._session._beginTransaction(b,x,_).then(function(O){E.next(new u.default(O)),E.complete()}).catch(function(O){return E.error(O)})}catch(O){E.error(O)}return function(){}})},y.prototype._runTransaction=function(b,g,_,w){var x=this;w===void 0&&(w=function(C){return C});var E=p.empty();_&&(E=new p(_));var O={apiTelemetryConfig:{api:v.MANAGED_TRANSACTION,onTelemetrySuccess:function(){O.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,o.mergeMap)(function(){return x._beginTransaction(b,E,O.apiTelemetryConfig)}),(0,o.mergeMap)(function(C){return(0,i.defer)(function(){try{return g(w(C))}catch(A){return(0,i.throwError)(function(){return A})}}).pipe((0,o.catchError)(function(A){return C.rollback().pipe((0,o.concatWith)((0,i.throwError)(function(){return A})))}),(0,o.concatWith)(C.commit()))})))},y})();e.default=m},3473:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=n(t(1048)),s=new(t(8888)).StringDecoder("utf8");e.default={encode:function(u){return new i.default((function(l){return typeof a.default.Buffer.from=="function"?a.default.Buffer.from(l,"utf8"):new a.default.Buffer(l,"utf8")})(u))},decode:function(u,l){if(Object.prototype.hasOwnProperty.call(u,"_buffer"))return(function(c,f){var h=c.position,d=h+f;return c.position=Math.min(d,c.length),c._buffer.toString("utf8",h,d)})(u,l);if(Object.prototype.hasOwnProperty.call(u,"_buffers"))return(function(c,f){return(function(h,d){var v=d,p=h.position;return h._updatePos(Math.min(d,h.length-p)),h._buffers.reduce(function(m,y){if(v<=0)return m;if(p>=y.length)return p-=y.length,"";y._updatePos(p-y.position);var b=Math.min(y.length-p,v),g=y.readSlice(b);return y._updatePos(b),v=Math.max(v-g.length,0),p=0,m+(function(_){return s.write(_._buffer)})(g)},"")+s.end()})(c,f)})(u,l);throw(0,o.newError)("Don't know how to decode strings from '".concat(u,"'"))}}},3488:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(o,a,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(a,s);l&&!("get"in l?!a.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(o,u,l)}:function(o,a,s,u){u===void 0&&(u=s),o[u]=a[s]}),i=this&&this.__exportStar||function(o,a){for(var s in o)s==="default"||Object.prototype.hasOwnProperty.call(a,s)||n(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(t(5837),e)},3545:function(r,e,t){var n=this&&this.__extends||(function(){var y=function(b,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(_[x]=w[x])},y(b,g)};return function(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=b}y(b,g),b.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),i=this&&this.__awaiter||function(y,b,g,_){return new(g||(g=Promise))(function(w,x){function E(A){try{C(_.next(A))}catch(R){x(R)}}function O(A){try{C(_.throw(A))}catch(R){x(R)}}function C(A){var R;A.done?w(A.value):(R=A.value,R instanceof g?R:new g(function(k){k(R)})).then(E,O)}C((_=_.apply(y,b||[])).next())})},o=this&&this.__generator||function(y,b){var g,_,w,x,E={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function O(C){return function(A){return(function(R){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,R[0]&&(E=0)),E;)try{if(g=1,_&&(w=2&R[0]?_.return:R[0]?_.throw||((w=_.return)&&w.call(_),0):_.next)&&!(w=w.call(_,R[1])).done)return w;switch(_=0,w&&(R=[2&R[0],w.value]),R[0]){case 0:case 1:w=R;break;case 4:return E.label++,{value:R[1],done:!1};case 5:E.label++,_=R[1],R=[0];continue;case 7:R=E.ops.pop(),E.trys.pop();continue;default:if(!((w=(w=E.trys).length>0&&w[w.length-1])||R[0]!==6&&R[0]!==2)){E=0;continue}if(R[0]===3&&(!w||R[1]>w[0]&&R[1]<w[3])){E.label=R[1];break}if(R[0]===6&&E.label<w[1]){E.label=w[1],w=R;break}if(w&&E.label<w[2]){E.label=w[2],E.ops.push(R);break}w[2]&&E.ops.pop(),E.trys.pop();continue}R=b.call(y,E)}catch(k){R=[6,k],_=0}finally{g=w=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}})([C,A])}}},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(8987)),u=t(7721),l=t(9305),c=l.internal.constants,f=c.BOLT_PROTOCOL_V3,h=c.BOLT_PROTOCOL_V4_0,d=c.BOLT_PROTOCOL_V4_4,v=c.BOLT_PROTOCOL_V5_1,p=l.error.SERVICE_UNAVAILABLE,m=(function(y){function b(g){var _=g.id,w=g.config,x=g.log,E=g.address,O=g.userAgent,C=g.boltAgent,A=g.authTokenManager,R=g.newPool,k=y.call(this,{id:_,config:w,log:x,userAgent:O,boltAgent:C,authTokenManager:A,newPool:R})||this;return k._address=E,k}return n(b,y),b.prototype.acquireConnection=function(g){var _=g===void 0?{}:g,w=(_.accessMode,_.database),x=(_.bookmarks,_.auth),E=_.forceReAuth;return i(this,void 0,void 0,function(){var O,C,A=this;return o(this,function(R){switch(R.label){case 0:return O=u.ConnectionErrorHandler.create({errorCode:p,handleSecurityError:function(k,D,L){return A._handleSecurityError(k,D,L,w)}}),[4,this._connectionPool.acquire({auth:x,forceReAuth:E},this._address)];case 1:return C=R.sent(),x?[4,this._verifyStickyConnection({auth:x,connection:C,address:this._address})]:[3,3];case 2:return R.sent(),[2,C];case 3:return[2,new u.DelegateConnection(C,O)]}})})},b.prototype._handleSecurityError=function(g,_,w,x){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(_," for database '").concat(x,"' because of an error ").concat(g.code," '").concat(g.message,"'")),y.prototype._handleSecurityError.call(this,g,_,w)},b.prototype._hasProtocolVersion=function(g){return i(this,void 0,void 0,function(){var _,w;return o(this,function(x){switch(x.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return _=x.sent(),w=_.protocol()?_.protocol().version:null,[4,_.close()];case 2:return x.sent(),w?[2,g(w)]:[2,!1]}})})},b.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=h})];case 1:return[2,g.sent()]}})})},b.prototype.getNegotiatedProtocolVersion=function(){var g=this;return new Promise(function(_,w){g._hasProtocolVersion(_).catch(w)})},b.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=f})];case 1:return[2,g.sent()]}})})},b.prototype.supportsUserImpersonation=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=d})];case 1:return[2,g.sent()]}})})},b.prototype.supportsSessionAuth=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=v})];case 1:return[2,g.sent()]}})})},b.prototype.verifyAuthentication=function(g){var _=g.auth;return i(this,void 0,void 0,function(){var w=this;return o(this,function(x){return[2,this._verifyAuthentication({auth:_,getAddress:function(){return w._address}})]})})},b.prototype.verifyConnectivityAndGetServerInfo=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,g.sent()]}})})},b})(s.default);e.default=m},3555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=void 0;var n=t(7843);e.finalize=function(i){return n.operate(function(o,a){try{o.subscribe(a)}finally{a.add(i)}})}},3618:function(r,e,t){var n=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),i=this&&this.__awaiter||function(p,m,y,b){return new(y||(y=Promise))(function(g,_){function w(O){try{E(b.next(O))}catch(C){_(C)}}function x(O){try{E(b.throw(O))}catch(C){_(C)}}function E(O){var C;O.done?g(O.value):(C=O.value,C instanceof y?C:new y(function(A){A(C)})).then(w,x)}E((b=b.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var y,b,g,_,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(E){return function(O){return(function(C){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,C[0]&&(w=0)),w;)try{if(y=1,b&&(g=2&C[0]?b.return:C[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,C[1])).done)return g;switch(b=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return w.label++,{value:C[1],done:!1};case 5:w.label++,b=C[1],C=[0];continue;case 7:C=w.ops.pop(),w.trys.pop();continue;default:if(!((g=(g=w.trys).length>0&&g[g.length-1])||C[0]!==6&&C[0]!==2)){w=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){w.label=C[1];break}if(C[0]===6&&w.label<g[1]){w.label=g[1],g=C;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(C);break}g[2]&&w.ops.pop(),w.trys.pop();continue}C=m.call(p,w)}catch(A){C=[6,A],b=0}finally{y=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}})([E,O])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var a=t(9691),s=t(6587),u=t(326),l=t(9730),c=t(4883),f=(function(){function p(m){var y=m.mode,b=m.database,g=b===void 0?"":b,_=m.bookmarks,w=m.connectionProvider,x=m.impersonatedUser,E=m.onDatabaseNameResolved,O=m.getConnectionAcquistionBookmarks,C=m.auth,A=m.log;this._mode=y??u.ACCESS_MODE_WRITE,this._closed=!1,this._database=g!=null?(0,s.assertString)(g,"database"):"",this._bookmarks=_??l.Bookmarks.empty(),this._connectionProvider=w,this._impersonatedUser=x,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=E,this._auth=C,this._log=A,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=O??function(){return Promise.resolve(l.Bookmarks.empty())}}return p.prototype.mode=function(){return this._mode},p.prototype.database=function(){return this._database},p.prototype.setDatabase=function(m){this._database=m},p.prototype.bookmarks=function(){return this._bookmarks},p.prototype.connectionProvider=function(){return this._connectionProvider},p.prototype.referenceCount=function(){return this._referenceCount},p.prototype.initializeConnection=function(m){return this._referenceCount!==0||this._connectionProvider==null?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider,m),this._referenceCount++,!0)},p.prototype._createConnectionPromise=function(m,y){return i(this,void 0,void 0,function(){var b,g,_;return o(this,function(w){switch(w.label){case 0:return g=(b=m).acquireConnection,_={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,g.apply(b,[(_.bookmarks=w.sent(),_.impersonatedUser=this._impersonatedUser,_.onDatabaseNameResolved=this._onDatabaseNameResolved,_.auth=this._auth,_.homeDb=y,_)])];case 2:return[2,w.sent()]}})})},p.prototype._getBookmarks=function(){return i(this,void 0,void 0,function(){return o(this,function(m){switch(m.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,m.sent()]}})})},p.prototype.getConnection=function(){return this._connectionPromise},p.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},p.prototype.close=function(m){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(m))},p.prototype.log=function(){return this._log},p.prototype._releaseConnection=function(m){return this._connectionPromise=this._connectionPromise.then(function(y){return y!=null?y.isOpen()&&(y.hasOngoingObservableRequests()||m===!0)?y.resetAndFlush().catch(v).then(function(){return y.release().then(function(){return null})}):y.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},p.prototype._logError=function(m){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(m,". Stacktrace: ").concat(m.stack)),null},p})();e.ConnectionHolder=f;var h=(function(p){function m(y){var b=p.call(this,{mode:y.mode(),database:y.database(),bookmarks:y.bookmarks(),getConnectionAcquistionBookmarks:y._getConnectionAcquistionBookmarks,connectionProvider:y.connectionProvider(),log:y.log()})||this;return b._connectionHolder=y,b}return n(m,p),m.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},m.prototype.getConnection=function(){return this._connectionHolder.getConnection()},m.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},m.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},m})(f);e.ReadOnlyConnectionHolder=h,e.default=h;var d=new((function(p){function m(){return p.call(this,{log:c.Logger.create({})})||this}return n(m,p),m.prototype.mode=function(){},m.prototype.database=function(){},m.prototype.initializeConnection=function(){return!0},m.prototype.getConnection=function(){return i(this,void 0,void 0,function(){return o(this,function(y){switch(y.label){case 0:return[4,Promise.reject((0,a.newError)("This connection holder does not serve connections"))];case 1:return[2,y.sent()]}})})},m.prototype.releaseConnection=function(){return i(this,void 0,void 0,function(){return o(this,function(y){switch(y.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,y.sent()]}})})},m.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(y){switch(y.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,y.sent()]}})})},m})(f));function v(p){return null}e.EMPTY_CONNECTION_HOLDER=d},3638:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinAllInternals=void 0;var n=t(6640),i=t(1251),o=t(2706),a=t(983),s=t(2343);e.joinAllInternals=function(u,l){return o.pipe(s.toArray(),a.mergeMap(function(c){return u(c)}),l?i.mapOneOrManyArgs(l):n.identity)}},3659:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.28.1"},3692:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var n=t(5006),i=t(827);e.asapScheduler=new i.AsapScheduler(n.AsapAction),e.asap=e.asapScheduler},3862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var n=t(2628),i=t(3229);e.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler},3865:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var n=t(8158),i=t(1107),o=t(4917);e.concat=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.concatAll()(o.from(a,i.popScheduler(a)))}},3879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=void 0;var n=t(9445),i=t(7843),o=t(3111);e.switchMap=function(a,s){return i.operate(function(u,l){var c=null,f=0,h=!1,d=function(){return h&&!c&&l.complete()};u.subscribe(o.createOperatorSubscriber(l,function(v){c==null||c.unsubscribe();var p=0,m=f++;n.innerFrom(a(v,m)).subscribe(c=o.createOperatorSubscriber(l,function(y){return l.next(s?s(v,y,m,p++):y)},function(){c=null,d()}))},function(){h=!0,d()}))})}},3951:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=n(t(6245)),o=n(t(2199)),a=n(t(614));e.Channel=i.default,e.HostNameResolver=o.default,e.ClientCertificatesLoader=a.default},3964:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tap=void 0;var n=t(1018),i=t(7843),o=t(3111),a=t(6640);e.tap=function(s,u,l){var c=n.isFunction(s)||u||l?{next:s,error:u,complete:l}:s;return c?i.operate(function(f,h){var d;(d=c.subscribe)===null||d===void 0||d.call(c);var v=!0;f.subscribe(o.createOperatorSubscriber(h,function(p){var m;(m=c.next)===null||m===void 0||m.call(c,p),h.next(p)},function(){var p;v=!1,(p=c.complete)===null||p===void 0||p.call(c),h.complete()},function(p){var m;v=!1,(m=c.error)===null||m===void 0||m.call(c,p),h.error(p)},function(){var p,m;v&&((p=c.unsubscribe)===null||p===void 0||p.call(c)),(m=c.finalize)===null||m===void 0||m.call(c)}))}):a.identity}},3982:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip=void 0;var n=t(783);e.skip=function(i){return n.filter(function(o,a){return i<=a})}},4027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var n=t(93);e.stringify=function(i,o){return JSON.stringify(i,function(a,s){return(0,n.isBrokenObject)(s)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(s)}:typeof s=="bigint"?"".concat(s,"n"):(o==null?void 0:o.sortedElements)!==!0||typeof s!="object"||Array.isArray(s)?(o==null?void 0:o.useCustomToString)!==!0||typeof s!="object"||Array.isArray(s)||typeof s.toString!="function"||s.toString===Object.prototype.toString?s:s==null?void 0:s.toString():Object.keys(s).sort().reduce(function(u,l){return u[l]=s[l],u},{})})}},4092:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timer=void 0;var n=t(4662),i=t(7961),o=t(8613),a=t(1074);e.timer=function(s,u,l){s===void 0&&(s=0),l===void 0&&(l=i.async);var c=-1;return u!=null&&(o.isScheduler(u)?l=u:c=u),new n.Observable(function(f){var h=a.isValidDate(s)?+s-l.now():s;h<0&&(h=0);var d=0;return l.schedule(function(){f.closed||(f.next(d++),0<=c?this.schedule(void 0,c):f.complete())},h)})}},4132:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0});var i=(function(o){function a(s){var u=o.call(this)||this;return u._connection=s,u}return n(a,o),a.prototype.acquireConnection=function(s){var u=s===void 0?{}:s,l=(u.accessMode,u.database,u.bookmarks,this._connection);return this._connection=null,Promise.resolve(l)},a})(t(9305).ConnectionProvider);e.default=i},4151:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(9018)),o=(t(9305),(function(){function a(s){this._routingContext=s}return a.prototype.lookupRoutingTableOnRouter=function(s,u,l,c){var f=this;return s._acquireConnection(function(h){return f._requestRawRoutingTable(h,s,u,l,c).then(function(d){return d.isNull?null:i.default.fromRawRoutingTable(u,l,d)})})},a.prototype._requestRawRoutingTable=function(s,u,l,c,f){var h=this;return new Promise(function(d,v){s.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:l,impersonatedUser:f,sessionContext:{bookmarks:u._lastBookmarks,mode:u._mode,database:u._database,afterComplete:u._onComplete},onCompleted:d,onError:v})})},a})());e.default=o},4209:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iif=void 0;var n=t(9353);e.iif=function(i,o,a){return n.defer(function(){return i()?o:a})}},4212:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.QueueAction=void 0;var i=(function(o){function a(s,u){var l=o.call(this,s,u)||this;return l.scheduler=s,l.work=u,l}return n(a,o),a.prototype.schedule=function(s,u){return u===void 0&&(u=0),u>0?o.prototype.schedule.call(this,s,u):(this.delay=u,this.state=s,this.scheduler.flush(this),this)},a.prototype.execute=function(s,u){return u>0||this.closed?o.prototype.execute.call(this,s,u):this._execute(s,u)},a.prototype.requestAsyncId=function(s,u,l){return l===void 0&&(l=0),l!=null&&l>0||l==null&&this.delay>0?o.prototype.requestAsyncId.call(this,s,u,l):(s.flush(this),0)},a})(t(5267).AsyncAction);e.QueueAction=i},4271:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(m){try{p(c.next(m))}catch(y){h(y)}}function v(m){try{p(c.throw(m))}catch(y){h(y)}}function p(m){var y;m.done?f(m.value):(y=m.value,y instanceof l?y:new l(function(b){b(y)})).then(d,v)}p((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(p){return function(m){return(function(y){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}})([p,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7452),a=(function(){function s(u){var l=u.clientCertificateProvider,c=u.loader;this._clientCertificateProvider=l,this._loader=c||o.ClientCertificatesLoader,this._clientCertificate=null}return s.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var u,l,c=this;return i(this,function(f){switch(f.label){case 0:return(u=this._clientCertificateProvider!=null)?(l=this._clientCertificate==null)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:l=f.sent(),f.label=2;case 2:u=l,f.label=3;case 3:return u&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(h){return c._clientCertificate=h,c._clientCertificate}).catch(function(h){throw c._clientCertificate=null,h})),[2,this._clientCertificate]}})})},s})();e.default=a},4311:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(){}return n.prototype.selectReader=function(i){throw new Error("Abstract function")},n.prototype.selectWriter=function(i){throw new Error("Abstract function")},n})();e.default=t},4325:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2204));e.default=n({},o.default)},4360:r=>{r.exports=function(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}},4408:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=void 0;var n=t(7843),i=t(1983);e.mergeScan=function(o,a,s){return s===void 0&&(s=1/0),n.operate(function(u,l){var c=a;return i.mergeInternals(u,l,function(f,h){return o(c,f,h)},s,function(f){c=f},!1,void 0,function(){return c=null})})}},4440:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.race=void 0;var o=t(8535),a=t(5600);e.race=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.raceWith.apply(void 0,i([],n(o.argsOrArgArray(s))))}},4455:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=n(t(4311));e.LoadBalancingStrategy=i.default;var o=n(t(2533));e.LeastConnectedLoadBalancingStrategy=o.default,e.default=o.default},4461:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.debounce=function(s){return n.operate(function(u,l){var c=!1,f=null,h=null,d=function(){if(h==null||h.unsubscribe(),h=null,c){c=!1;var v=f;f=null,l.next(v)}};u.subscribe(o.createOperatorSubscriber(l,function(v){h==null||h.unsubscribe(),c=!0,f=v,h=o.createOperatorSubscriber(l,d,i.noop),a.innerFrom(s(v)).subscribe(h)},function(){d(),l.complete()},void 0,function(){f=h=null}))})}},4520:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=void 0;var n=t(7057),i=t(783),o=t(4869),a=t(378),s=t(846);e.elementAt=function(u,l){if(u<0)throw new n.ArgumentOutOfRangeError;var c=arguments.length>=2;return function(f){return f.pipe(i.filter(function(h,d){return d===u}),s.take(1),c?a.defaultIfEmpty(l):o.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},4531:function(r,e){var t=this&&this.__awaiter||function(o,a,s,u){return new(s||(s=Promise))(function(l,c){function f(v){try{d(u.next(v))}catch(p){c(p)}}function h(v){try{d(u.throw(v))}catch(p){c(p)}}function d(v){var p;v.done?l(v.value):(p=v.value,p instanceof s?p:new s(function(m){m(p)})).then(f,h)}d((u=u.apply(o,a||[])).next())})},n=this&&this.__generator||function(o,a){var s,u,l,c,f={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(d){return function(v){return(function(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(f=0)),f;)try{if(s=1,u&&(l=2&p[0]?u.return:p[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,p[1])).done)return l;switch(u=0,l&&(p=[2&p[0],l.value]),p[0]){case 0:case 1:l=p;break;case 4:return f.label++,{value:p[1],done:!1};case 5:f.label++,u=p[1],p=[0];continue;case 7:p=f.ops.pop(),f.trys.pop();continue;default:if(!((l=(l=f.trys).length>0&&l[l.length-1])||p[0]!==6&&p[0]!==2)){f=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){f.label=p[1];break}if(p[0]===6&&f.label<l[1]){f.label=l[1],l=p;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(p);break}l[2]&&f.ops.pop(),f.trys.pop();continue}p=a.call(o,f)}catch(m){p=[6,m],u=0}finally{s=l=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}})([d,v])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=(function(){function o(a){var s=a.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=s}return o.prototype.check=function(a){return t(this,void 0,void 0,function(){var s;return n(this,function(u){switch(u.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(a)?[2,!0]:(s=Date.now()-a.idleTimestamp,this._connectionLivenessCheckTimeout===0||s>this._connectionLivenessCheckTimeout?[4,a.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,!0]}})})},Object.defineProperty(o.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),o.prototype._isNewlyCreatedConnection=function(a){return a.authToken==null},o})();e.default=i},4569:function(r,e,t){var n,i=this&&this.__extends||(function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}})(),o=this&&this.__assign||function(){return o=Object.assign||function(u){for(var l,c=1,f=arguments.length;c<f;c++)for(var h in l=arguments[c])Object.prototype.hasOwnProperty.call(l,h)&&(u[h]=l[h]);return u},o.apply(this,arguments)},a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var s=(function(u){function l(c){var f=c.connectionHolder,h=c.onClose,d=c.onBookmarks,v=c.onConnection,p=c.reactive,m=c.fetchSize,y=c.impersonatedUser,b=c.highRecordWatermark,g=c.lowRecordWatermark,_=c.notificationFilter,w=c.apiTelemetryConfig,x=c.onDbCallback,E=u.call(this,{connectionHolder:f,onClose:h,onBookmarks:d,onConnection:v,reactive:p,fetchSize:m,impersonatedUser:y,highRecordWatermark:b,lowRecordWatermark:g,notificationFilter:_,apiTelemetryConfig:w})||this;return E[n]="TransactionPromise",E._onDbCallback=x,E}return i(l,u),l.prototype.then=function(c,f){return this._getOrCreateBeginPromise().then(c,f)},l.prototype.catch=function(c){return this._getOrCreateBeginPromise().catch(c)},l.prototype.finally=function(c){return this._getOrCreateBeginPromise().finally(c)},l.prototype._getOrCreateBeginPromise=function(){var c=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(f,h){c._resolve=f,c._reject=h,c._beginError!=null&&h(c._beginError),c._beginMetadata!=null&&f(c._toTransaction())})),this._beginPromise},l.prototype._toTransaction=function(){return o(o({},this),{run:u.prototype.run.bind(this),commit:u.prototype.commit.bind(this),rollback:u.prototype.rollback.bind(this),close:u.prototype.close.bind(this),isOpen:u.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},l.prototype._begin=function(c,f){return u.prototype._begin.call(this,c,f,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},l.prototype._onBeginError=function(c){this._beginError=c,this._reject!=null&&this._reject(c)},l.prototype._onBeginMetadata=function(c){this._beginMetadata=c??{},this._resolve!=null&&this._resolve(this._toTransaction())},l})(a(t(9473)).default);n=Symbol.toStringTag,e.default=s},4596:function(r,e,t){var n=this&&this.__extends||(function(){var v=function(p,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(y[g]=b[g])},v(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=p}v(p,m),p.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2539)),a=i(t(7021)),s=t(9014),u=t(9305),l=t(397),c=i(t(7521)),f=i(t(3321)),h=u.internal.constants.BOLT_PROTOCOL_V4_1,d=(function(v){function p(m,y,b,g,_,w,x){g===void 0&&(g=function(){return null});var E=v.call(this,m,y,b,g,_,w)||this;return E._serversideRouting=x,E}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(y){return y(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(m){var y=this,b=m===void 0?{}:m,g=b.userAgent,_=(b.boltAgent,b.authToken),w=b.notificationFilter,x=b.onError,E=b.onComplete,O=new s.LoginObserver({onError:function(C){return y._onLoginError(C,x)},onCompleted:function(C){return y._onLoginCompleted(C,_,E)}});return(0,l.assertNotificationFilterIsEmpty)(w,this._onProtocolError,O),this.write(a.default.hello(g,_,this._serversideRouting),O,!0),O},p})(o.default);e.default=d},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var n=t(5),i=t(8014),o=t(3327),a=t(2706),s=t(3413),u=t(1018),l=t(9223),c=(function(){function h(d){d&&(this._subscribe=d)}return h.prototype.lift=function(d){var v=new h;return v.source=this,v.operator=d,v},h.prototype.subscribe=function(d,v,p){var m,y=this,b=(m=d)&&m instanceof n.Subscriber||(function(g){return g&&u.isFunction(g.next)&&u.isFunction(g.error)&&u.isFunction(g.complete)})(m)&&i.isSubscription(m)?d:new n.SafeSubscriber(d,v,p);return l.errorContext(function(){var g=y,_=g.operator,w=g.source;b.add(_?_.call(b,w):w?y._subscribe(b):y._trySubscribe(b))}),b},h.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(v){d.error(v)}},h.prototype.forEach=function(d,v){var p=this;return new(v=f(v))(function(m,y){var b=new n.SafeSubscriber({next:function(g){try{d(g)}catch(_){y(_),b.unsubscribe()}},error:y,complete:m});p.subscribe(b)})},h.prototype._subscribe=function(d){var v;return(v=this.source)===null||v===void 0?void 0:v.subscribe(d)},h.prototype[o.observable]=function(){return this},h.prototype.pipe=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return a.pipeFromArray(d)(this)},h.prototype.toPromise=function(d){var v=this;return new(d=f(d))(function(p,m){var y;v.subscribe(function(b){return y=b},function(b){return m(b)},function(){return p(y)})})},h.create=function(d){return new h(d)},h})();function f(h){var d;return(d=h??s.config.Promise)!==null&&d!==void 0?d:Promise}e.Observable=c},4671:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var i=(function(o){function a(s,u){return o.call(this)||this}return n(a,o),a.prototype.schedule=function(s,u){return this},a})(t(8014).Subscription);e.Action=i},4704:r=>{r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},4721:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=void 0;var n=t(7843),i=t(3111);e.skipWhile=function(o){return n.operate(function(a,s){var u=!1,l=0;a.subscribe(i.createOperatorSubscriber(s,function(c){return(u||(u=!o(c,l++)))&&s.next(c)}))})}},4746:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},4753:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(3111);e.exhaustMap=function s(u,l){return l?function(c){return c.pipe(s(function(f,h){return i.innerFrom(u(f,h)).pipe(n.map(function(d,v){return l(f,d,h,v)}))}))}:o.operate(function(c,f){var h=0,d=null,v=!1;c.subscribe(a.createOperatorSubscriber(f,function(p){d||(d=a.createOperatorSubscriber(f,void 0,function(){d=null,v&&f.complete()}),i.innerFrom(u(p,h++)).subscribe(d))},function(){v=!0,!d&&f.complete()}))})}},4780:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.takeUntil=function(s){return n.operate(function(u,l){o.innerFrom(s).subscribe(i.createOperatorSubscriber(l,function(){return l.complete()},a.noop)),!l.closed&&u.subscribe(l)})}},4820:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(y){return(function(b){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,b[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){v.label=b[1];break}if(b[0]===6&&v.label<h[1]){v.label=h[1],h=b;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(b);break}h[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(g){b=[6,g],f=0}finally{c=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([m,y])}}},i=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],f=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9691),s=(function(){function u(l,c,f){this.keys=l,this.length=l.length,this._fields=c,this._fieldLookup=f??(function(h){var d={};return h.forEach(function(v,p){d[v]=p}),d})(l)}return u.prototype.forEach=function(l){var c,f;try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),p=v[0];l(v[1],p,this)}}catch(m){c={error:m}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}},u.prototype.map=function(l){var c,f,h=[];try{for(var d=i(this.entries()),v=d.next();!v.done;v=d.next()){var p=o(v.value,2),m=p[0],y=p[1];h.push(l(y,m,this))}}catch(b){c={error:b}}finally{try{v&&!v.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}return h},u.prototype.entries=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,[this.keys[l],this._fields[l]]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.values=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype[Symbol.iterator]=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.toObject=function(){var l,c,f={};try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),p=v[0],m=v[1];f[p]=m}}catch(y){l={error:y}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}return f},u.prototype.get=function(l){var c;if(typeof l!="number"){if((c=this._fieldLookup[l])===void 0)throw(0,a.newError)("This record has no field with key '".concat(l.toString(),"', available keys are: [")+this.keys.toString()+"].")}else c=l;if(c>this._fields.length-1||c<0)throw(0,a.newError)("This record has no field with index '"+c.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[c]},u.prototype.has=function(l){return typeof l=="number"?l>=0&&l<this._fields.length:this._fieldLookup[l]!==void 0},u})();e.default=s},4862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=void 0;var n=t(7961),i=t(1074),o=t(1554);e.timeoutWith=function(a,s,u){var l,c,f;if(u=u??n.async,i.isValidDate(a)?l=a:typeof a=="number"&&(c=a),!s)throw new TypeError("No observable provided to switch to");if(f=function(){return s},l==null&&c==null)throw new TypeError("No timeout provided.");return o.timeout({first:l,each:c,scheduler:u,with:f})}},4869:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=void 0;var n=t(2823),i=t(7843),o=t(3111);function a(){return new n.EmptyError}e.throwIfEmpty=function(s){return s===void 0&&(s=a),i.operate(function(u,l){var c=!1;u.subscribe(o.createOperatorSubscriber(l,function(f){c=!0,l.next(f)},function(){return c?l.complete():l.error(s())}))})}},4883:function(r,e,t){var n,i=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=t(9691),a="error",s="warn",u="info",l="debug",c=u,f=((n={})[a]=0,n[s]=1,n[u]=2,n[l]=3,n),h=(function(){function p(m,y){this._level=m,this._loggerFunction=y}return p.create=function(m){if((m==null?void 0:m.logging)!=null){var y=m.logging,b=(function(_){if((_==null?void 0:_.level)!=null){var w=_.level,x=f[w];if(x==null&&x!==0)throw(0,o.newError)("Illegal logging level: ".concat(w,". Supported levels are: ").concat(Object.keys(f).toString()));return w}return c})(y),g=(function(_){var w,x;if((_==null?void 0:_.logger)!=null){var E=_.logger;if(E!=null&&typeof E=="function")return E}throw(0,o.newError)("Illegal logger function: ".concat((x=(w=_==null?void 0:_.logger)===null||w===void 0?void 0:w.toString())!==null&&x!==void 0?x:"undefined"))})(y);return new p(b,g)}return this.noOp()},p.noOp=function(){return d},p.prototype.isErrorEnabled=function(){return v(this._level,a)},p.prototype.error=function(m){this.isErrorEnabled()&&this._loggerFunction(a,m)},p.prototype.isWarnEnabled=function(){return v(this._level,s)},p.prototype.warn=function(m){this.isWarnEnabled()&&this._loggerFunction(s,m)},p.prototype.isInfoEnabled=function(){return v(this._level,u)},p.prototype.info=function(m){this.isInfoEnabled()&&this._loggerFunction(u,m)},p.prototype.isDebugEnabled=function(){return v(this._level,l)},p.prototype.debug=function(m){this.isDebugEnabled()&&this._loggerFunction(l,m)},p})();e.Logger=h;var d=new((function(p){function m(){return p.call(this,u,function(y,b){})||this}return i(m,p),m.prototype.isErrorEnabled=function(){return!1},m.prototype.error=function(y){},m.prototype.isWarnEnabled=function(){return!1},m.prototype.warn=function(y){},m.prototype.isInfoEnabled=function(){return!1},m.prototype.info=function(y){},m.prototype.isDebugEnabled=function(){return!1},m.prototype.debug=function(y){},m})(h));function v(p,m){return f[p]>=f[m]}},4912:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=void 0;var n=t(5471);e.pluck=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=i.length;if(a===0)throw new Error("list of properties cannot be empty.");return n.map(function(s){for(var u=s,l=0;l<a;l++){var c=u==null?void 0:u[i[l]];if(c===void 0)return;u=c}return u})}},4917:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.from=void 0;var n=t(1656),i=t(9445);e.from=function(o,a){return a?n.scheduled(o,a):i.innerFrom(o)}},4953:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleReadableStreamLike=void 0;var n=t(854),i=t(9137);e.scheduleReadableStreamLike=function(o,a){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(o),a)}},5006:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsapAction=void 0;var i=t(5267),o=t(6293),a=(function(s){function u(l,c){var f=s.call(this,l,c)||this;return f.scheduler=l,f.work=c,f}return n(u,s),u.prototype.requestAsyncId=function(l,c,f){return f===void 0&&(f=0),f!==null&&f>0?s.prototype.requestAsyncId.call(this,l,c,f):(l.actions.push(this),l._scheduled||(l._scheduled=o.immediateProvider.setImmediate(l.flush.bind(l,void 0))))},u.prototype.recycleAsyncId=function(l,c,f){var h;if(f===void 0&&(f=0),f!=null?f>0:this.delay>0)return s.prototype.recycleAsyncId.call(this,l,c,f);var d=l.actions;c!=null&&((h=d[d.length-1])===null||h===void 0?void 0:h.id)!==c&&(o.immediateProvider.clearImmediate(c),l._scheduled===c&&(l._scheduled=void 0))},u})(i.AsyncAction);e.AsapAction=a},5022:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(g,_,w,x){x===void 0&&(x=w);var E=Object.getOwnPropertyDescriptor(_,w);E&&!("get"in E?!_.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(g,x,E)}:function(g,_,w,x){x===void 0&&(x=w),g[x]=_[w]}),i=this&&this.__setModuleDefault||(Object.create?function(g,_){Object.defineProperty(g,"default",{enumerable:!0,value:_})}:function(g,_){g.default=_}),o=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var _={};if(g!=null)for(var w in g)w!=="default"&&Object.prototype.hasOwnProperty.call(g,w)&&n(_,g,w);return i(_,g),_};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var a=o(t(3371)),s=t(9691),u=t(6587),l=(function(){function g(_,w){this._minNumber=_,this._maxNumber=w,this._minInteger=(0,a.int)(_),this._maxInteger=(0,a.int)(w)}return g.prototype.contains=function(_){if((0,a.isInt)(_)&&_ instanceof a.default)return _.greaterThanOrEqual(this._minInteger)&&_.lessThanOrEqual(this._maxInteger);if(typeof _=="bigint"){var w=(0,a.int)(_);return w.greaterThanOrEqual(this._minInteger)&&w.lessThanOrEqual(this._maxInteger)}return _>=this._minNumber&&_<=this._maxNumber},g.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},g})();function c(g,_,w){g=(0,a.int)(g),_=(0,a.int)(_),w=(0,a.int)(w);var x=g.multiply(365);return x=(x=(x=g.greaterThanOrEqual(0)?x.add(g.add(3).div(4).subtract(g.add(99).div(100)).add(g.add(399).div(400))):x.subtract(g.div(-4).subtract(g.div(-100)).add(g.div(-400)))).add(_.multiply(367).subtract(362).div(12))).add(w.subtract(1)),_.greaterThan(2)&&(x=x.subtract(1),(function(E){return!(!(E=(0,a.int)(E)).modulo(4).equals(0)||E.modulo(100).equals(0)&&!E.modulo(400).equals(0))})(g)||(x=x.subtract(1))),x.subtract(e.DAYS_0000_TO_1970)}function f(g,_){return g===1?_%400==0||_%4==0&&_%100!=0?29:28:[0,2,4,6,7,9,11].includes(g)?31:30}e.YEAR_RANGE=new l(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new l(1,12),e.DAY_OF_MONTH_RANGE=new l(1,31),e.HOUR_OF_DAY_RANGE=new l(0,23),e.MINUTE_OF_HOUR_RANGE=new l(0,59),e.SECOND_OF_MINUTE_RANGE=new l(0,59),e.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(g,_){return(0,a.int)(g).add(p(_,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(g){return m(g,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(g,_,w,x){g=(0,a.int)(g),_=(0,a.int)(_),w=(0,a.int)(w),x=(0,a.int)(x);var E=g.multiply(e.NANOS_PER_HOUR);return(E=(E=E.add(_.multiply(e.NANOS_PER_MINUTE))).add(w.multiply(e.NANOS_PER_SECOND))).add(x)},e.localDateTimeToEpochSecond=function(g,_,w,x,E,O,C){var A=c(g,_,w),R=(function(k,D,L){k=(0,a.int)(k),D=(0,a.int)(D),L=(0,a.int)(L);var j=k.multiply(e.SECONDS_PER_HOUR);return(j=j.add(D.multiply(e.SECONDS_PER_MINUTE))).add(L)})(x,E,O);return A.multiply(e.SECONDS_PER_DAY).add(R)},e.dateToEpochDay=c,e.durationToIsoString=function(g,_,w,x){var E=b(g),O=b(_),C=(function(A,R){var k,D;A=(0,a.int)(A),R=(0,a.int)(R);var L=A.isNegative(),j=R.greaterThan(0);return k=L&&j?A.equals(-1)?"-0":A.add(1).toString():A.toString(),j&&(D=y(L?R.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):R.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),D!=null?k+D:k})(w,x);return"P".concat(E,"M").concat(O,"DT").concat(C,"S")},e.timeToIsoString=function(g,_,w,x){var E=b(g,2),O=b(_,2),C=b(w,2),A=y(x);return"".concat(E,":").concat(O,":").concat(C).concat(A)},e.timeZoneOffsetToIsoString=function(g){if((g=(0,a.int)(g)).equals(0))return"Z";var _=g.isNegative();_&&(g=g.multiply(-1));var w=_?"-":"+",x=b(g.div(e.SECONDS_PER_HOUR),2),E=b(g.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),O=g.modulo(e.SECONDS_PER_MINUTE),C=O.equals(0)?null:b(O,2);return C!=null?"".concat(w).concat(x,":").concat(E,":").concat(C):"".concat(w).concat(x,":").concat(E)},e.dateToIsoString=function(g,_,w){var x=(function(C){var A=(0,a.int)(C);return A.isNegative()||A.greaterThan(9999)?b(A,6,{usePositiveSign:!0}):b(A,4)})(g),E=b(_,2),O=b(w,2);return"".concat(x,"-").concat(E,"-").concat(O)},e.isoStringToStandardDate=function(g){return new Date(g)},e.toStandardDate=function(g){return new Date(g)},e.newDate=function(g){return new Date(g)},e.totalNanoseconds=function(g,_){return(function(w,x){return w instanceof a.default?w.add(x):typeof w=="bigint"?w+BigInt(x):w+x})(_=_??0,g.getMilliseconds()*e.NANOS_PER_MILLISECOND)},e.timeZoneOffsetInSeconds=function(g){var _=g.getSeconds()-g.getUTCSeconds(),w=g.getMinutes()-g.getUTCMinutes(),x=g.getHours()-g.getUTCHours(),E=(function(O){return O.getMonth()===O.getUTCMonth()?O.getDate()-O.getUTCDate():O.getFullYear()>O.getUTCFullYear()||O.getMonth()>O.getUTCMonth()&&O.getFullYear()===O.getUTCFullYear()?O.getDate()+f(O.getUTCMonth(),O.getUTCFullYear())-O.getUTCDate():O.getDate()-(O.getUTCDate()+f(O.getMonth(),O.getFullYear()))})(g);return x*e.SECONDS_PER_HOUR+w*e.SECONDS_PER_MINUTE+_+E*e.SECONDS_PER_DAY},e.assertValidYear=function(g){return v(g,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(g){return v(g,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(g){return v(g,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(g){return v(g,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(g){return v(g,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(g){return v(g,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(g){return v(g,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var h=new Map,d=function(g,_){return(0,s.newError)("".concat(_,' is expected to be a valid ZoneId but was: "').concat(g,'"'))};function v(g,_,w){if((0,u.assertNumberOrInteger)(g,w),!_.contains(g))throw(0,s.newError)("".concat(w," is expected to be in range ").concat(_.toString()," but was: ").concat(g.toString()));return g}function p(g,_){g=(0,a.int)(g),_=(0,a.int)(_);var w=g.div(_);return g.isPositive()!==_.isPositive()&&w.multiply(_).notEquals(g)&&(w=w.subtract(1)),w}function m(g,_){return g=(0,a.int)(g),_=(0,a.int)(_),g.subtract(p(g,_).multiply(_))}function y(g){return(g=(0,a.int)(g)).equals(0)?"":"."+b(g,9)}function b(g,_,w){var x=(g=(0,a.int)(g)).isNegative();x&&(g=g.negate());var E=g.toString();if(_!=null)for(;E.length<_;)E="0"+E;return x?"-"+E:(w==null?void 0:w.usePositiveSign)===!0?"+"+E:E}e.assertValidZoneId=function(g,_){var w=h.get(_);if(w!==!0){if(w===!1)throw d(_,g);try{Intl.DateTimeFormat(void 0,{timeZone:_}),h.set(_,!0)}catch{throw h.set(_,!1),d(_,g)}}},e.floorDiv=p,e.floorMod=m},5045:function(r,e,t){var n=this&&this.__read||function(v,p){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var y,b,g=m.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=g.next()).done;)_.push(y.value)}catch(w){b={error:w}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(b)throw b.error}}return _},i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7168),a=t(9305),s=i(t(7518)),u=t(5973),l=t(6492),c=a.internal.temporalUtil.localDateTimeToEpochSecond,f=new Map;function h(v,p,m){var y=(function(w){if(!f.has(w)){var x=new Intl.DateTimeFormat("en-US",{timeZone:w,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});f.set(w,x)}return f.get(w)})(v),b=(0,a.int)(p).multiply(1e3).add((0,a.int)(m).div(1e6)).toNumber(),g=y.formatToParts(b).reduce(function(w,x){return x.type==="era"?w.adjustEra=x.value.toUpperCase()==="B"?function(E){return E.subtract(1).negate()}:l.identity:x.type==="hour"?w.hour=(0,a.int)(x.value).modulo(24):x.type!=="literal"&&(w[x.type]=(0,a.int)(x.value)),w},{});g.year=g.adjustEra(g.year);var _=c(g.year,g.month,g.day,g.hour,g.minute,g.second,g.nanosecond);return g.timeZoneOffsetSeconds=_.subtract(p),g.hour=g.hour.modulo(24),g}function d(v,p,m){if(!p&&!m)return v;var y=function(w){return m?w.toBigInt():w.toNumberOrInfinity()},b=Object.create(Object.getPrototypeOf(v));for(var g in v)if(Object.prototype.hasOwnProperty.call(v,g)===!0){var _=v[g];b[g]=(0,a.isInt)(_)?y(_):_}return Object.freeze(b),b}e.default={createDateTimeWithZoneIdTransformer:function(v,p){var m=v.disableLosslessIntegers,y=v.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(v).extendsWith({signature:105,fromStructure:function(b){o.structure.verifyStructSize("DateTimeWithZoneId",3,b.size);var g=n(b.fields,3),_=g[0],w=g[1],x=g[2],E=h(x,_,w);return d(new a.DateTime(E.year,E.month,E.day,E.hour,E.minute,E.second,(0,a.int)(w),E.timeZoneOffsetSeconds,x),m,y)},toStructure:function(b){var g=c(b.year,b.month,b.day,b.hour,b.minute,b.second,b.nanosecond),_=b.timeZoneOffsetSeconds!=null?b.timeZoneOffsetSeconds:(function(O,C,A){var R=h(O,C,A),k=c(R.year,R.month,R.day,R.hour,R.minute,R.second,A).subtract(C),D=C.subtract(k),L=h(O,D,A);return c(L.year,L.month,L.day,L.hour,L.minute,L.second,A).subtract(D)})(b.timeZoneId,g,b.nanosecond);b.timeZoneOffsetSeconds==null&&p.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var w=g.subtract(_),x=(0,a.int)(b.nanosecond),E=b.timeZoneId;return new o.structure.Structure(105,[w,x,E])}})},createDateTimeWithOffsetTransformer:function(v){var p=v.disableLosslessIntegers,m=v.useBigInt;return s.default.createDateTimeWithOffsetTransformer(v).extendsWith({signature:73,toStructure:function(y){var b=c(y.year,y.month,y.day,y.hour,y.minute,y.second,y.nanosecond),g=(0,a.int)(y.nanosecond),_=(0,a.int)(y.timeZoneOffsetSeconds),w=b.subtract(_);return new o.structure.Structure(73,[w,g,_])},fromStructure:function(y){o.structure.verifyStructSize("DateTimeWithZoneOffset",3,y.size);var b=n(y.fields,3),g=b[0],_=b[1],w=b[2],x=(0,a.int)(g).add(w),E=(0,u.epochSecondAndNanoToLocalDateTime)(x,_);return d(new a.DateTime(E.year,E.month,E.day,E.hour,E.minute,E.second,E.nanosecond,w,null),p,m)}})}}},5184:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=void 0;var n=t(7110),i=t(7843),o=t(3111);e.observeOn=function(a,s){return s===void 0&&(s=0),i.operate(function(u,l){u.subscribe(o.createOperatorSubscriber(l,function(c){return n.executeSchedule(l,a,function(){return l.next(c)},s)},function(){return n.executeSchedule(l,a,function(){return l.complete()},s)},function(c){return n.executeSchedule(l,a,function(){return l.error(c)},s)}))})}},5250:function(r,e,t){var n;r=t.nmd(r),(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,f=9007199254740991,h=NaN,d=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],p="[object Arguments]",m="[object Array]",y="[object Boolean]",b="[object Date]",g="[object Error]",_="[object Function]",w="[object GeneratorFunction]",x="[object Map]",E="[object Number]",O="[object Object]",C="[object Promise]",A="[object RegExp]",R="[object Set]",k="[object String]",D="[object Symbol]",L="[object WeakMap]",j="[object ArrayBuffer]",q="[object DataView]",B="[object Float32Array]",U="[object Float64Array]",W="[object Int8Array]",H="[object Int16Array]",Y="[object Int32Array]",Z="[object Uint8Array]",ce="[object Uint8ClampedArray]",$="[object Uint16Array]",K="[object Uint32Array]",ie=/\b__p \+= '';/g,ae=/\b(__p \+=) '' \+/g,le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,te=/&(?:amp|lt|gt|quot|#39);/g,ee=/[&<>"']/g,re=RegExp(te.source),he=RegExp(ee.source),ve=/<%-([\s\S]+?)%>/g,_e=/<%([\s\S]+?)%>/g,Oe=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,F=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,X=RegExp(G.source),se=/^\s+/,pe=/\s/,ge=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,He=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,at=/[()=,{}\[\]\/\s]/,Ze=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qe=/\w*$/,Xe=/^[-+]0x[0-9a-f]+$/i,ke=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,Ee=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,De=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Me=/($^)/,it=/['\n\r\u2028\u2029\\]/g,Fe="\\ud800-\\udfff",ut="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rt="\\u2700-\\u27bf",ft="a-z\\xdf-\\xf6\\xf8-\\xff",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",yt="\\ufe0e\\ufe0f",nt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",It="["+Fe+"]",St="["+nt+"]",or="["+ut+"]",rr="\\d+",Gt="["+rt+"]",Pt="["+ft+"]",ur="[^"+Fe+nt+rr+rt+ft+xt+"]",nr="\\ud83c[\\udffb-\\udfff]",Ir="[^"+Fe+"]",Kr="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",fr="["+xt+"]",Br="\\u200d",Wr="(?:"+Pt+"|"+ur+")",yn="(?:"+fr+"|"+ur+")",cn="(?:['](?:d|ll|m|re|s|t|ve))?",mr="(?:['](?:D|LL|M|RE|S|T|VE))?",Sr="(?:"+or+"|"+nr+")?",gr="["+yt+"]?",wi=gr+Sr+"(?:"+Br+"(?:"+[Ir,Kr,Dt].join("|")+")"+gr+Sr+")*",Dn="(?:"+[Gt,Kr,Dt].join("|")+")"+wi,Ma="(?:"+[Ir+or+"?",or,Kr,Dt,It].join("|")+")",ws=RegExp("[']","g"),No=RegExp(or,"g"),ca=RegExp(nr+"(?="+nr+")|"+Ma+wi,"g"),jo=RegExp([fr+"?"+Pt+"+"+cn+"(?="+[St,fr,"$"].join("|")+")",yn+"+"+mr+"(?="+[St,fr+Wr,"$"].join("|")+")",fr+"?"+Wr+"+"+cn,fr+"+"+mr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rr,Dn].join("|"),"g"),Es=RegExp("["+Br+Fe+ut+yt+"]"),Os=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zi=-1,hr={};hr[B]=hr[U]=hr[W]=hr[H]=hr[Y]=hr[Z]=hr[ce]=hr[$]=hr[K]=!0,hr[p]=hr[m]=hr[j]=hr[y]=hr[q]=hr[b]=hr[g]=hr[_]=hr[x]=hr[E]=hr[O]=hr[A]=hr[R]=hr[k]=hr[L]=!1;var ar={};ar[p]=ar[m]=ar[j]=ar[q]=ar[y]=ar[b]=ar[B]=ar[U]=ar[W]=ar[H]=ar[Y]=ar[x]=ar[E]=ar[O]=ar[A]=ar[R]=ar[k]=ar[D]=ar[Z]=ar[ce]=ar[$]=ar[K]=!0,ar[g]=ar[_]=ar[L]=!1;var La={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Na=parseFloat,Al=parseInt,Yn=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,ja=typeof self=="object"&&self&&self.Object===Object&&self,Zr=Yn||ja||Function("return this")(),mo=e&&!e.nodeType&&e,fn=mo&&r&&!r.nodeType&&r,su=fn&&fn.exports===mo,Ss=su&&Yn.process,Sn=(function(){try{return fn&&fn.require&&fn.require("util").types||Ss&&Ss.binding&&Ss.binding("util")}catch{}})(),Rl=Sn&&Sn.isArrayBuffer,pf=Sn&&Sn.isDate,Il=Sn&&Sn.isMap,kl=Sn&&Sn.isRegExp,uu=Sn&&Sn.isSet,gf=Sn&&Sn.isTypedArray;function Xn(Ie,Ve,Be){switch(Be.length){case 0:return Ie.call(Ve);case 1:return Ie.call(Ve,Be[0]);case 2:return Ie.call(Ve,Be[0],Be[1]);case 3:return Ie.call(Ve,Be[0],Be[1],Be[2])}return Ie.apply(Ve,Be)}function Dl(Ie,Ve,Be,lt){for(var _t=-1,dr=Ie==null?0:Ie.length;++_t<dr;){var mn=Ie[_t];Ve(lt,mn,Be(mn),Ie)}return lt}function $n(Ie,Ve){for(var Be=-1,lt=Ie==null?0:Ie.length;++Be<lt&&Ve(Ie[Be],Be,Ie)!==!1;);return Ie}function Fa(Ie,Ve){for(var Be=Ie==null?0:Ie.length;Be--&&Ve(Ie[Be],Be,Ie)!==!1;);return Ie}function Ml(Ie,Ve){for(var Be=-1,lt=Ie==null?0:Ie.length;++Be<lt;)if(!Ve(Ie[Be],Be,Ie))return!1;return!0}function bo(Ie,Ve){for(var Be=-1,lt=Ie==null?0:Ie.length,_t=0,dr=[];++Be<lt;){var mn=Ie[Be];Ve(mn,Be,Ie)&&(dr[_t++]=mn)}return dr}function lu(Ie,Ve){return!(Ie==null||!Ie.length)&&Ba(Ie,Ve,0)>-1}function cu(Ie,Ve,Be){for(var lt=-1,_t=Ie==null?0:Ie.length;++lt<_t;)if(Be(Ve,Ie[lt]))return!0;return!1}function Fr(Ie,Ve){for(var Be=-1,lt=Ie==null?0:Ie.length,_t=Array(lt);++Be<lt;)_t[Be]=Ve(Ie[Be],Be,Ie);return _t}function _o(Ie,Ve){for(var Be=-1,lt=Ve.length,_t=Ie.length;++Be<lt;)Ie[_t+Be]=Ve[Be];return Ie}function fu(Ie,Ve,Be,lt){var _t=-1,dr=Ie==null?0:Ie.length;for(lt&&dr&&(Be=Ie[++_t]);++_t<dr;)Be=Ve(Be,Ie[_t],_t,Ie);return Be}function Ed(Ie,Ve,Be,lt){var _t=Ie==null?0:Ie.length;for(lt&&_t&&(Be=Ie[--_t]);_t--;)Be=Ve(Be,Ie[_t],_t,Ie);return Be}function Ll(Ie,Ve){for(var Be=-1,lt=Ie==null?0:Ie.length;++Be<lt;)if(Ve(Ie[Be],Be,Ie))return!0;return!1}var Od=jl("length");function Nl(Ie,Ve,Be){var lt;return Be(Ie,function(_t,dr,mn){if(Ve(_t,dr,mn))return lt=dr,!1}),lt}function hu(Ie,Ve,Be,lt){for(var _t=Ie.length,dr=Be+(lt?1:-1);lt?dr--:++dr<_t;)if(Ve(Ie[dr],dr,Ie))return dr;return-1}function Ba(Ie,Ve,Be){return Ve==Ve?(function(lt,_t,dr){for(var mn=dr-1,Bn=lt.length;++mn<Bn;)if(lt[mn]===_t)return mn;return-1})(Ie,Ve,Be):hu(Ie,yf,Be)}function xd(Ie,Ve,Be,lt){for(var _t=Be-1,dr=Ie.length;++_t<dr;)if(lt(Ie[_t],Ve))return _t;return-1}function yf(Ie){return Ie!=Ie}function du(Ie,Ve){var Be=Ie==null?0:Ie.length;return Be?Bl(Ie,Ve)/Be:h}function jl(Ie){return function(Ve){return Ve==null?i:Ve[Ie]}}function Fl(Ie){return function(Ve){return Ie==null?i:Ie[Ve]}}function mf(Ie,Ve,Be,lt,_t){return _t(Ie,function(dr,mn,Bn){Be=lt?(lt=!1,dr):Ve(Be,dr,mn,Bn)}),Be}function Bl(Ie,Ve){for(var Be,lt=-1,_t=Ie.length;++lt<_t;){var dr=Ve(Ie[lt]);dr!==i&&(Be=Be===i?dr:Be+dr)}return Be}function Ul(Ie,Ve){for(var Be=-1,lt=Array(Ie);++Be<Ie;)lt[Be]=Ve(Be);return lt}function kr(Ie){return Ie&&Ie.slice(0,Fo(Ie)+1).replace(se,"")}function $t(Ie){return function(Ve){return Ie(Ve)}}function ql(Ie,Ve){return Fr(Ve,function(Be){return Ie[Be]})}function Ts(Ie,Ve){return Ie.has(Ve)}function bf(Ie,Ve){for(var Be=-1,lt=Ie.length;++Be<lt&&Ba(Ve,Ie[Be],0)>-1;);return Be}function _f(Ie,Ve){for(var Be=Ie.length;Be--&&Ba(Ve,Ie[Be],0)>-1;);return Be}var Sd=Fl({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Td=Fl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function wf(Ie){return"\\"+La[Ie]}function Ua(Ie){return Es.test(Ie)}function hn(Ie){var Ve=-1,Be=Array(Ie.size);return Ie.forEach(function(lt,_t){Be[++Ve]=[_t,lt]}),Be}function vu(Ie,Ve){return function(Be){return Ie(Ve(Be))}}function Kn(Ie,Ve){for(var Be=-1,lt=Ie.length,_t=0,dr=[];++Be<lt;){var mn=Ie[Be];mn!==Ve&&mn!==s||(Ie[Be]=s,dr[_t++]=Be)}return dr}function Cs(Ie){var Ve=-1,Be=Array(Ie.size);return Ie.forEach(function(lt){Be[++Ve]=lt}),Be}function zl(Ie){var Ve=-1,Be=Array(Ie.size);return Ie.forEach(function(lt){Be[++Ve]=[lt,lt]}),Be}function Tn(Ie){return Ua(Ie)?(function(Ve){for(var Be=ca.lastIndex=0;ca.test(Ve);)++Be;return Be})(Ie):Od(Ie)}function Cn(Ie){return Ua(Ie)?(function(Ve){return Ve.match(ca)||[]})(Ie):(function(Ve){return Ve.split("")})(Ie)}function Fo(Ie){for(var Ve=Ie.length;Ve--&&pe.test(Ie.charAt(Ve)););return Ve}var Qi=Fl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Di=(function Ie(Ve){var Be,lt=(Ve=Ve==null?Zr:Di.defaults(Zr.Object(),Ve,Di.pick(Zr,xs))).Array,_t=Ve.Date,dr=Ve.Error,mn=Ve.Function,Bn=Ve.Math,Dr=Ve.Object,Gl=Ve.RegExp,Hr=Ve.String,Pn=Ve.TypeError,pu=lt.prototype,Bb=mn.prototype,qa=Dr.prototype,Ef=Ve["__core-js_shared__"],Of=Bb.toString,Rr=qa.hasOwnProperty,Cg=0,Vl=(Be=/[^.]+$/.exec(Ef&&Ef.keys&&Ef.keys.IE_PROTO||""))?"Symbol(src)_1."+Be:"",fa=qa.toString,Ub=Of.call(Dr),Pg=Zr._,Ag=Gl("^"+Of.call(Rr).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gu=su?Ve.Buffer:i,Bo=Ve.Symbol,Wl=Ve.Uint8Array,Rg=gu?gu.allocUnsafe:i,yu=vu(Dr.getPrototypeOf,Dr),xf=Dr.create,Ig=qa.propertyIsEnumerable,Hl=pu.splice,Ei=Bo?Bo.isConcatSpreadable:i,Ps=Bo?Bo.iterator:i,wo=Bo?Bo.toStringTag:i,Yl=(function(){try{var T=va(Dr,"defineProperty");return T({},"",{}),T}catch{}})(),kg=Ve.clearTimeout!==Zr.clearTimeout&&Ve.clearTimeout,qb=_t&&_t.now!==Zr.Date.now&&_t.now,zb=Ve.setTimeout!==Zr.setTimeout&&Ve.setTimeout,Sf=Bn.ceil,Tf=Bn.floor,Cd=Dr.getOwnPropertySymbols,mu=gu?gu.isBuffer:i,Dg=Ve.isFinite,Gb=pu.join,Pd=vu(Dr.keys,Dr),bn=Bn.max,Qr=Bn.min,Cf=_t.now,Vb=Ve.parseInt,Mg=Bn.random,Wb=pu.reverse,za=va(Ve,"DataView"),ai=va(Ve,"Map"),Pf=va(Ve,"Promise"),bu=va(Ve,"Set"),Xl=va(Ve,"WeakMap"),$l=va(Dr,"create"),Af=Xl&&new Xl,_u={},wu=ga(za),Te=ga(ai),je=ga(Pf),Le=ga(bu),dt=ga(Xl),qt=Bo?Bo.prototype:i,lr=qt?qt.valueOf:i,_n=qt?qt.toString:i;function ne(T){if(tn(T)&&!Vt(T)&&!(T instanceof Zt)){if(T instanceof Jr)return T;if(Rr.call(T,"__wrapped__"))return $d(T)}return new Jr(T)}var Ga=(function(){function T(){}return function(I){if(!Yr(I))return{};if(xf)return xf(I);T.prototype=I;var N=new T;return T.prototype=i,N}})();function Rf(){}function Jr(T,I){this.__wrapped__=T,this.__actions__=[],this.__chain__=!!I,this.__index__=0,this.__values__=i}function Zt(T){this.__wrapped__=T,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function As(T){var I=-1,N=T==null?0:T.length;for(this.clear();++I<N;){var V=T[I];this.set(V[0],V[1])}}function Oi(T){var I=-1,N=T==null?0:T.length;for(this.clear();++I<N;){var V=T[I];this.set(V[0],V[1])}}function Ji(T){var I=-1,N=T==null?0:T.length;for(this.clear();++I<N;){var V=T[I];this.set(V[0],V[1])}}function Uo(T){var I=-1,N=T==null?0:T.length;for(this.__data__=new Ji;++I<N;)this.add(T[I])}function Qt(T){var I=this.__data__=new Oi(T);this.size=I.size}function Lg(T,I){var N=Vt(T),V=!N&&$o(T),J=!N&&!V&&To(T),de=!N&&!V&&!J&&ts(T),be=N||V||J||de,Se=be?Ul(T.length,Hr):[],Ae=Se.length;for(var qe in T)!I&&!Rr.call(T,qe)||be&&(qe=="length"||J&&(qe=="offset"||qe=="parent")||de&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||pa(qe,Ae))||Se.push(qe);return Se}function Ad(T){var I=T.length;return I?T[Xa(0,I-1)]:i}function If(T,I){return cc(si(T),Wa(I,0,T.length))}function Hb(T){return cc(si(T))}function Rd(T,I,N){(N!==i&&!no(T[I],N)||N===i&&!(I in T))&&qo(T,I,N)}function Kl(T,I,N){var V=T[I];Rr.call(T,I)&&no(V,N)&&(N!==i||I in T)||qo(T,I,N)}function Rs(T,I){for(var N=T.length;N--;)if(no(T[N][0],I))return N;return-1}function Va(T,I,N,V){return xi(T,function(J,de,be){I(V,J,N(J),be)}),V}function Zl(T,I){return T&&Vo(I,Nn(I),T)}function qo(T,I,N){I=="__proto__"&&Yl?Yl(T,I,{configurable:!0,enumerable:!0,value:N,writable:!0}):T[I]=N}function Eu(T,I){for(var N=-1,V=I.length,J=lt(V),de=T==null;++N<V;)J[N]=de?i:uv(T,I[N]);return J}function Wa(T,I,N){return T==T&&(N!==i&&(T=T<=N?T:N),I!==i&&(T=T>=I?T:I)),T}function Mi(T,I,N,V,J,de){var be,Se=1&I,Ae=2&I,qe=4&I;if(N&&(be=J?N(T,V,J,de):N(T)),be!==i)return be;if(!Yr(T))return T;var ze=Vt(T);if(ze){if(be=(function(We){var Je=We.length,Tt=new We.constructor(Je);return Je&&typeof We[0]=="string"&&Rr.call(We,"index")&&(Tt.index=We.index,Tt.input=We.input),Tt})(T),!Se)return si(T,be)}else{var $e=Un(T),ht=$e==_||$e==w;if(To(T))return Yg(T,Se);if($e==O||$e==p||ht&&!J){if(be=Ae||ht?{}:ty(T),!Se)return Ae?(function(We,Je){return Vo(We,Du(We),Je)})(T,(function(We,Je){return We&&Vo(Je,Qn(Je),We)})(be,T)):(function(We,Je){return Vo(We,Vd(We),Je)})(T,Zl(be,T))}else{if(!ar[$e])return J?T:{};be=(function(We,Je,Tt){var st,Wt=We.constructor;switch(Je){case j:return Bd(We);case y:case b:return new Wt(+We);case q:return(function(zt,br){var wt=br?Bd(zt.buffer):zt.buffer;return new zt.constructor(wt,zt.byteOffset,zt.byteLength)})(We,Tt);case B:case U:case W:case H:case Y:case Z:case ce:case $:case K:return Xg(We,Tt);case x:return new Wt;case E:case k:return new Wt(We);case A:return(function(zt){var br=new zt.constructor(zt.source,Qe.exec(zt));return br.lastIndex=zt.lastIndex,br})(We);case R:return new Wt;case D:return st=We,lr?Dr(lr.call(st)):{}}})(T,$e,Se)}}de||(de=new Qt);var pt=de.get(T);if(pt)return pt;de.set(T,be),Ko(T)?T.forEach(function(We){be.add(Mi(We,I,N,We,T,de))}):Ty(T)&&T.forEach(function(We,Je){be.set(Je,Mi(We,I,N,Je,T,de))});var Rt=ze?i:(qe?Ae?da:ku:Ae?Qn:Nn)(T);return $n(Rt||T,function(We,Je){Rt&&(We=T[Je=We]),Kl(be,Je,Mi(We,I,N,Je,T,de))}),be}function Ql(T,I,N){var V=N.length;if(T==null)return!V;for(T=Dr(T);V--;){var J=N[V],de=I[J],be=T[J];if(be===i&&!(J in T)||!de(be))return!1}return!0}function Id(T,I,N){if(typeof T!="function")throw new Pn(o);return Mu(function(){T.apply(i,N)},I)}function ha(T,I,N,V){var J=-1,de=lu,be=!0,Se=T.length,Ae=[],qe=I.length;if(!Se)return Ae;N&&(I=Fr(I,$t(N))),V?(de=cu,be=!1):I.length>=200&&(de=Ts,be=!1,I=new Uo(I));e:for(;++J<Se;){var ze=T[J],$e=N==null?ze:N(ze);if(ze=V||ze!==0?ze:0,be&&$e==$e){for(var ht=qe;ht--;)if(I[ht]===$e)continue e;Ae.push(ze)}else de(I,$e,V)||Ae.push(ze)}return Ae}ne.templateSettings={escape:ve,evaluate:_e,interpolate:Oe,variable:"",imports:{_:ne}},ne.prototype=Rf.prototype,ne.prototype.constructor=ne,Jr.prototype=Ga(Rf.prototype),Jr.prototype.constructor=Jr,Zt.prototype=Ga(Rf.prototype),Zt.prototype.constructor=Zt,As.prototype.clear=function(){this.__data__=$l?$l(null):{},this.size=0},As.prototype.delete=function(T){var I=this.has(T)&&delete this.__data__[T];return this.size-=I?1:0,I},As.prototype.get=function(T){var I=this.__data__;if($l){var N=I[T];return N===a?i:N}return Rr.call(I,T)?I[T]:i},As.prototype.has=function(T){var I=this.__data__;return $l?I[T]!==i:Rr.call(I,T)},As.prototype.set=function(T,I){var N=this.__data__;return this.size+=this.has(T)?0:1,N[T]=$l&&I===i?a:I,this},Oi.prototype.clear=function(){this.__data__=[],this.size=0},Oi.prototype.delete=function(T){var I=this.__data__,N=Rs(I,T);return!(N<0||(N==I.length-1?I.pop():Hl.call(I,N,1),--this.size,0))},Oi.prototype.get=function(T){var I=this.__data__,N=Rs(I,T);return N<0?i:I[N][1]},Oi.prototype.has=function(T){return Rs(this.__data__,T)>-1},Oi.prototype.set=function(T,I){var N=this.__data__,V=Rs(N,T);return V<0?(++this.size,N.push([T,I])):N[V][1]=I,this},Ji.prototype.clear=function(){this.size=0,this.__data__={hash:new As,map:new(ai||Oi),string:new As}},Ji.prototype.delete=function(T){var I=Hf(this,T).delete(T);return this.size-=I?1:0,I},Ji.prototype.get=function(T){return Hf(this,T).get(T)},Ji.prototype.has=function(T){return Hf(this,T).has(T)},Ji.prototype.set=function(T,I){var N=Hf(this,T),V=N.size;return N.set(T,I),this.size+=N.size==V?0:1,this},Uo.prototype.add=Uo.prototype.push=function(T){return this.__data__.set(T,a),this},Uo.prototype.has=function(T){return this.__data__.has(T)},Qt.prototype.clear=function(){this.__data__=new Oi,this.size=0},Qt.prototype.delete=function(T){var I=this.__data__,N=I.delete(T);return this.size=I.size,N},Qt.prototype.get=function(T){return this.__data__.get(T)},Qt.prototype.has=function(T){return this.__data__.has(T)},Qt.prototype.set=function(T,I){var N=this.__data__;if(N instanceof Oi){var V=N.__data__;if(!ai||V.length<199)return V.push([T,I]),this.size=++N.size,this;N=this.__data__=new Ji(V)}return N.set(T,I),this.size=N.size,this};var xi=Ru(zo),Jl=Ru(Mf,!0);function Yb(T,I){var N=!0;return xi(T,function(V,J,de){return N=!!I(V,J,de)}),N}function kf(T,I,N){for(var V=-1,J=T.length;++V<J;){var de=T[V],be=I(de);if(be!=null&&(Se===i?be==be&&!li(be):N(be,Se)))var Se=be,Ae=de}return Ae}function Ng(T,I){var N=[];return xi(T,function(V,J,de){I(V,J,de)&&N.push(V)}),N}function wn(T,I,N,V,J){var de=-1,be=T.length;for(N||(N=oc),J||(J=[]);++de<be;){var Se=T[de];I>0&&N(Se)?I>1?wn(Se,I-1,N,V,J):_o(J,Se):V||(J[J.length]=Se)}return J}var Ou=rc(),Df=rc(!0);function zo(T,I){return T&&Ou(T,I,Nn)}function Mf(T,I){return T&&Df(T,I,Nn)}function Lf(T,I){return bo(I,function(N){return ma(T[N])})}function Is(T,I){for(var N=0,V=(I=Si(I,T)).length;T!=null&&N<V;)T=T[Xo(I[N++])];return N&&N==V?T:i}function En(T,I,N){var V=I(T);return Vt(T)?V:_o(V,N(T))}function Tr(T){return T==null?T===i?"[object Undefined]":"[object Null]":wo&&wo in Dr(T)?(function(I){var N=Rr.call(I,wo),V=I[wo];try{I[wo]=i;var J=!0}catch{}var de=fa.call(I);return J&&(N?I[wo]=V:delete I[wo]),de})(T):(function(I){return fa.call(I)})(T)}function kd(T,I){return T>I}function Xb(T,I){return T!=null&&Rr.call(T,I)}function jg(T,I){return T!=null&&I in Dr(T)}function Dd(T,I,N){for(var V=N?cu:lu,J=T[0].length,de=T.length,be=de,Se=lt(de),Ae=1/0,qe=[];be--;){var ze=T[be];be&&I&&(ze=Fr(ze,$t(I))),Ae=Qr(ze.length,Ae),Se[be]=!N&&(I||J>=120&&ze.length>=120)?new Uo(be&&ze):i}ze=T[0];var $e=-1,ht=Se[0];e:for(;++$e<J&&qe.length<Ae;){var pt=ze[$e],Rt=I?I(pt):pt;if(pt=N||pt!==0?pt:0,!(ht?Ts(ht,Rt):V(qe,Rt,N))){for(be=de;--be;){var We=Se[be];if(!(We?Ts(We,Rt):V(T[be],Rt,N)))continue e}ht&&ht.push(Rt),qe.push(pt)}}return qe}function ks(T,I,N){var V=(T=ny(T,I=Si(I,T)))==null?T:T[Xo(en(I))];return V==null?i:Xn(V,T,N)}function xu(T){return tn(T)&&Tr(T)==p}function Ds(T,I,N,V,J){return T===I||(T==null||I==null||!tn(T)&&!tn(I)?T!=T&&I!=I:(function(de,be,Se,Ae,qe,ze){var $e=Vt(de),ht=Vt(be),pt=$e?m:Un(de),Rt=ht?m:Un(be),We=(pt=pt==p?O:pt)==O,Je=(Rt=Rt==p?O:Rt)==O,Tt=pt==Rt;if(Tt&&To(de)){if(!To(be))return!1;$e=!0,We=!1}if(Tt&&!We)return ze||(ze=new Qt),$e||ts(de)?Oo(de,be,Se,Ae,qe,ze):(function(wt,Lt,An,dn,fi,qr,Jn){switch(An){case q:if(wt.byteLength!=Lt.byteLength||wt.byteOffset!=Lt.byteOffset)return!1;wt=wt.buffer,Lt=Lt.buffer;case j:return!(wt.byteLength!=Lt.byteLength||!qr(new Wl(wt),new Wl(Lt)));case y:case b:case E:return no(+wt,+Lt);case g:return wt.name==Lt.name&&wt.message==Lt.message;case A:case k:return wt==Lt+"";case x:var Qo=hn;case R:var ns=1&dn;if(Qo||(Qo=Cs),wt.size!=Lt.size&&!ns)return!1;var Fs=Jn.get(wt);if(Fs)return Fs==Lt;dn|=2,Jn.set(wt,Lt);var Co=Oo(Qo(wt),Qo(Lt),dn,fi,qr,Jn);return Jn.delete(wt),Co;case D:if(lr)return lr.call(wt)==lr.call(Lt)}return!1})(de,be,pt,Se,Ae,qe,ze);if(!(1&Se)){var st=We&&Rr.call(de,"__wrapped__"),Wt=Je&&Rr.call(be,"__wrapped__");if(st||Wt){var zt=st?de.value():de,br=Wt?be.value():be;return ze||(ze=new Qt),qe(zt,br,Se,Ae,ze)}}return!!Tt&&(ze||(ze=new Qt),(function(wt,Lt,An,dn,fi,qr){var Jn=1&An,Qo=ku(wt),ns=Qo.length;if(ns!=ku(Lt).length&&!Jn)return!1;for(var Fs=ns;Fs--;){var Co=Qo[Fs];if(!(Jn?Co in Lt:Rr.call(Lt,Co)))return!1}var wv=qr.get(wt),Uy=qr.get(Lt);if(wv&&Uy)return wv==Lt&&Uy==wt;var ch=!0;qr.set(wt,Lt),qr.set(Lt,wt);for(var Ev=Jn;++Fs<ns;){var fh=wt[Co=Qo[Fs]],hh=Lt[Co];if(dn)var qy=Jn?dn(hh,fh,Co,Lt,wt,qr):dn(fh,hh,Co,wt,Lt,qr);if(!(qy===i?fh===hh||fi(fh,hh,An,dn,qr):qy)){ch=!1;break}Ev||(Ev=Co=="constructor")}if(ch&&!Ev){var dh=wt.constructor,vh=Lt.constructor;dh==vh||!("constructor"in wt)||!("constructor"in Lt)||typeof dh=="function"&&dh instanceof dh&&typeof vh=="function"&&vh instanceof vh||(ch=!1)}return qr.delete(wt),qr.delete(Lt),ch})(de,be,Se,Ae,qe,ze))})(T,I,N,V,Ds,J))}function Ha(T,I,N,V){var J=N.length,de=J,be=!V;if(T==null)return!de;for(T=Dr(T);J--;){var Se=N[J];if(be&&Se[2]?Se[1]!==T[Se[0]]:!(Se[0]in T))return!1}for(;++J<de;){var Ae=(Se=N[J])[0],qe=T[Ae],ze=Se[1];if(be&&Se[2]){if(qe===i&&!(Ae in T))return!1}else{var $e=new Qt;if(V)var ht=V(qe,ze,Ae,T,I,$e);if(!(ht===i?Ds(ze,qe,3,V,$e):ht))return!1}}return!0}function Su(T){return!(!Yr(T)||(I=T,Vl&&Vl in I))&&(ma(T)?Ag:oe).test(ga(T));var I}function Tu(T){return typeof T=="function"?T:T==null?Ci:typeof T=="object"?Vt(T)?Ug(T[0],T[1]):Bg(T):jy(T)}function Cu(T){if(!sc(T))return Pd(T);var I=[];for(var N in Dr(T))Rr.call(T,N)&&N!="constructor"&&I.push(N);return I}function Ya(T,I){return T<I}function Fg(T,I){var N=-1,V=Ti(T)?lt(T.length):[];return xi(T,function(J,de,be){V[++N]=I(J,de,be)}),V}function Bg(T){var I=Gd(T);return I.length==1&&I[0][2]?Wd(I[0][0],I[0][1]):function(N){return N===T||Ha(N,T,I)}}function Ug(T,I){return ac(T)&&ry(I)?Wd(Xo(T),I):function(N){var V=uv(N,T);return V===i&&V===I?lv(N,T):Ds(I,V,3)}}function Nf(T,I,N,V,J){T!==I&&Ou(I,function(de,be){if(J||(J=new Qt),Yr(de))(function(Ae,qe,ze,$e,ht,pt,Rt){var We=uc(Ae,ze),Je=uc(qe,ze),Tt=Rt.get(Je);if(Tt)Rd(Ae,ze,Tt);else{var st=pt?pt(We,Je,ze+"",Ae,qe,Rt):i,Wt=st===i;if(Wt){var zt=Vt(Je),br=!zt&&To(Je),wt=!zt&&!br&&ts(Je);st=Je,zt||br||wt?Vt(We)?st=We:on(We)?st=si(We):br?(Wt=!1,st=Yg(Je,!0)):wt?(Wt=!1,st=Xg(Je,!0)):st=[]:gc(Je)||$o(Je)?(st=We,$o(We)?st=oh(We):Yr(We)&&!ma(We)||(st=ty(Je))):Wt=!1}Wt&&(Rt.set(Je,st),ht(st,Je,$e,pt,Rt),Rt.delete(Je)),Rd(Ae,ze,st)}})(T,I,be,N,Nf,V,J);else{var Se=V?V(uc(T,be),de,be+"",T,I,J):i;Se===i&&(Se=de),Rd(T,be,Se)}},Qn)}function qg(T,I){var N=T.length;if(N)return pa(I+=I<0?N:0,N)?T[I]:i}function ec(T,I,N){I=I.length?Fr(I,function(de){return Vt(de)?function(be){return Is(be,de.length===1?de[0]:de)}:de}):[Ci];var V=-1;I=Fr(I,$t(kt()));var J=Fg(T,function(de,be,Se){var Ae=Fr(I,function(qe){return qe(de)});return{criteria:Ae,index:++V,value:de}});return(function(de){var be=de.length;for(de.sort(function(Se,Ae){return(function(qe,ze,$e){for(var ht=-1,pt=qe.criteria,Rt=ze.criteria,We=pt.length,Je=$e.length;++ht<We;){var Tt=$g(pt[ht],Rt[ht]);if(Tt)return ht>=Je?Tt:Tt*($e[ht]=="desc"?-1:1)}return qe.index-ze.index})(Se,Ae,N)});be--;)de[be]=de[be].value;return de})(J)}function Pu(T,I,N){for(var V=-1,J=I.length,de={};++V<J;){var be=I[V],Se=Is(T,be);N(Se,be)&&tc(de,Si(be,T),Se)}return de}function jf(T,I,N,V){var J=V?xd:Ba,de=-1,be=I.length,Se=T;for(T===I&&(I=si(I)),N&&(Se=Fr(T,$t(N)));++de<be;)for(var Ae=0,qe=I[de],ze=N?N(qe):qe;(Ae=J(Se,ze,Ae,V))>-1;)Se!==T&&Hl.call(Se,Ae,1),Hl.call(T,Ae,1);return T}function ue(T,I){for(var N=T?I.length:0,V=N-1;N--;){var J=I[N];if(N==V||J!==de){var de=J;pa(J)?Hl.call(T,J,1):Ld(T,J)}}return T}function Xa(T,I){return T+Tf(Mg()*(I-T+1))}function Au(T,I){var N="";if(!T||I<1||I>f)return N;do I%2&&(N+=T),(I=Tf(I/2))&&(T+=T);while(I);return N}function Mt(T,I){return $f(Xf(T,I,Ci),T+"")}function sr(T){return Ad(Bu(T))}function $b(T,I){var N=Bu(T);return cc(N,Wa(I,0,N.length))}function tc(T,I,N,V){if(!Yr(T))return T;for(var J=-1,de=(I=Si(I,T)).length,be=de-1,Se=T;Se!=null&&++J<de;){var Ae=Xo(I[J]),qe=N;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return T;if(J!=be){var ze=Se[Ae];(qe=V?V(ze,Ae,Se):i)===i&&(qe=Yr(ze)?ze:pa(I[J+1])?[]:{})}Kl(Se,Ae,qe),Se=Se[Ae]}return T}var zg=Af?function(T,I){return Af.set(T,I),T}:Ci,Ms=Yl?function(T,I){return Yl(T,"toString",{configurable:!0,enumerable:!1,value:_a(I),writable:!0})}:Ci;function Kb(T){return cc(Bu(T))}function eo(T,I,N){var V=-1,J=T.length;I<0&&(I=-I>J?0:J+I),(N=N>J?J:N)<0&&(N+=J),J=I>N?0:N-I>>>0,I>>>=0;for(var de=lt(J);++V<J;)de[V]=T[V+I];return de}function Zb(T,I){var N;return xi(T,function(V,J,de){return!(N=I(V,J,de))}),!!N}function Ff(T,I,N){var V=0,J=T==null?V:T.length;if(typeof I=="number"&&I==I&&J<=2147483647){for(;V<J;){var de=V+J>>>1,be=T[de];be!==null&&!li(be)&&(N?be<=I:be<I)?V=de+1:J=de}return J}return Md(T,I,Ci,N)}function Md(T,I,N,V){var J=0,de=T==null?0:T.length;if(de===0)return 0;for(var be=(I=N(I))!=I,Se=I===null,Ae=li(I),qe=I===i;J<de;){var ze=Tf((J+de)/2),$e=N(T[ze]),ht=$e!==i,pt=$e===null,Rt=$e==$e,We=li($e);if(be)var Je=V||Rt;else Je=qe?Rt&&(V||ht):Se?Rt&&ht&&(V||!pt):Ae?Rt&&ht&&!pt&&(V||!We):!pt&&!We&&(V?$e<=I:$e<I);Je?J=ze+1:de=ze}return Qr(de,4294967294)}function Go(T,I){for(var N=-1,V=T.length,J=0,de=[];++N<V;){var be=T[N],Se=I?I(be):be;if(!N||!no(Se,Ae)){var Ae=Se;de[J++]=be===0?0:be}}return de}function Gg(T){return typeof T=="number"?T:li(T)?h:+T}function Li(T){if(typeof T=="string")return T;if(Vt(T))return Fr(T,Li)+"";if(li(T))return _n?_n.call(T):"";var I=T+"";return I=="0"&&1/T==-1/0?"-0":I}function $a(T,I,N){var V=-1,J=lu,de=T.length,be=!0,Se=[],Ae=Se;if(N)be=!1,J=cu;else if(de>=200){var qe=I?null:Gf(T);if(qe)return Cs(qe);be=!1,J=Ts,Ae=new Uo}else Ae=I?[]:Se;e:for(;++V<de;){var ze=T[V],$e=I?I(ze):ze;if(ze=N||ze!==0?ze:0,be&&$e==$e){for(var ht=Ae.length;ht--;)if(Ae[ht]===$e)continue e;I&&Ae.push($e),Se.push(ze)}else J(Ae,$e,N)||(Ae!==Se&&Ae.push($e),Se.push(ze))}return Se}function Ld(T,I){return(T=ny(T,I=Si(I,T)))==null||delete T[Xo(en(I))]}function Vg(T,I,N,V){return tc(T,I,N(Is(T,I)),V)}function to(T,I,N,V){for(var J=T.length,de=V?J:-1;(V?de--:++de<J)&&I(T[de],de,T););return N?eo(T,V?0:de,V?de+1:J):eo(T,V?de+1:0,V?J:de)}function Wg(T,I){var N=T;return N instanceof Zt&&(N=N.value()),fu(I,function(V,J){return J.func.apply(J.thisArg,_o([V],J.args))},N)}function Nd(T,I,N){var V=T.length;if(V<2)return V?$a(T[0]):[];for(var J=-1,de=lt(V);++J<V;)for(var be=T[J],Se=-1;++Se<V;)Se!=J&&(de[J]=ha(de[J]||be,T[Se],I,N));return $a(wn(de,1),I,N)}function Hg(T,I,N){for(var V=-1,J=T.length,de=I.length,be={};++V<J;){var Se=V<de?I[V]:i;N(be,T[V],Se)}return be}function jd(T){return on(T)?T:[]}function Fd(T){return typeof T=="function"?T:Ci}function Si(T,I){return Vt(T)?T:ac(T,I)?[T]:Xd(_r(T))}var Qb=Mt;function Ka(T,I,N){var V=T.length;return N=N===i?V:N,!I&&N>=V?T:eo(T,I,N)}var ro=kg||function(T){return Zr.clearTimeout(T)};function Yg(T,I){if(I)return T.slice();var N=T.length,V=Rg?Rg(N):new T.constructor(N);return T.copy(V),V}function Bd(T){var I=new T.constructor(T.byteLength);return new Wl(I).set(new Wl(T)),I}function Xg(T,I){var N=I?Bd(T.buffer):T.buffer;return new T.constructor(N,T.byteOffset,T.length)}function $g(T,I){if(T!==I){var N=T!==i,V=T===null,J=T==T,de=li(T),be=I!==i,Se=I===null,Ae=I==I,qe=li(I);if(!Se&&!qe&&!de&&T>I||de&&be&&Ae&&!Se&&!qe||V&&be&&Ae||!N&&Ae||!J)return 1;if(!V&&!de&&!qe&&T<I||qe&&N&&J&&!V&&!de||Se&&N&&J||!be&&J||!Ae)return-1}return 0}function Kg(T,I,N,V){for(var J=-1,de=T.length,be=N.length,Se=-1,Ae=I.length,qe=bn(de-be,0),ze=lt(Ae+qe),$e=!V;++Se<Ae;)ze[Se]=I[Se];for(;++J<be;)($e||J<de)&&(ze[N[J]]=T[J]);for(;qe--;)ze[Se++]=T[J++];return ze}function Ud(T,I,N,V){for(var J=-1,de=T.length,be=-1,Se=N.length,Ae=-1,qe=I.length,ze=bn(de-Se,0),$e=lt(ze+qe),ht=!V;++J<ze;)$e[J]=T[J];for(var pt=J;++Ae<qe;)$e[pt+Ae]=I[Ae];for(;++be<Se;)(ht||J<de)&&($e[pt+N[be]]=T[J++]);return $e}function si(T,I){var N=-1,V=T.length;for(I||(I=lt(V));++N<V;)I[N]=T[N];return I}function Vo(T,I,N,V){var J=!N;N||(N={});for(var de=-1,be=I.length;++de<be;){var Se=I[de],Ae=V?V(N[Se],T[Se],Se,N,T):i;Ae===i&&(Ae=T[Se]),J?qo(N,Se,Ae):Kl(N,Se,Ae)}return N}function Bf(T,I){return function(N,V){var J=Vt(N)?Dl:Va,de=I?I():{};return J(N,T,kt(V,2),de)}}function Za(T){return Mt(function(I,N){var V=-1,J=N.length,de=J>1?N[J-1]:i,be=J>2?N[2]:i;for(de=T.length>3&&typeof de=="function"?(J--,de):i,be&&ui(N[0],N[1],be)&&(de=J<3?i:de,J=1),I=Dr(I);++V<J;){var Se=N[V];Se&&T(I,Se,V,de)}return I})}function Ru(T,I){return function(N,V){if(N==null)return N;if(!Ti(N))return T(N,V);for(var J=N.length,de=I?J:-1,be=Dr(N);(I?de--:++de<J)&&V(be[de],de,be)!==!1;);return N}}function rc(T){return function(I,N,V){for(var J=-1,de=Dr(I),be=V(I),Se=be.length;Se--;){var Ae=be[T?Se:++J];if(N(de[Ae],Ae,de)===!1)break}return I}}function Zg(T){return function(I){var N=Ua(I=_r(I))?Cn(I):i,V=N?N[0]:I.charAt(0),J=N?Ka(N,1).join(""):I.slice(1);return V[T]()+J}}function Ls(T){return function(I){return fu(bc(dv(I).replace(ws,"")),T,"")}}function nc(T){return function(){var I=arguments;switch(I.length){case 0:return new T;case 1:return new T(I[0]);case 2:return new T(I[0],I[1]);case 3:return new T(I[0],I[1],I[2]);case 4:return new T(I[0],I[1],I[2],I[3]);case 5:return new T(I[0],I[1],I[2],I[3],I[4]);case 6:return new T(I[0],I[1],I[2],I[3],I[4],I[5]);case 7:return new T(I[0],I[1],I[2],I[3],I[4],I[5],I[6])}var N=Ga(T.prototype),V=T.apply(N,I);return Yr(V)?V:N}}function Wo(T){return function(I,N,V){var J=Dr(I);if(!Ti(I)){var de=kt(N,3);I=Nn(I),N=function(Se){return de(J[Se],Se,J)}}var be=T(I,N,V);return be>-1?J[de?I[be]:be]:i}}function Uf(T){return xo(function(I){var N=I.length,V=N,J=Jr.prototype.thru;for(T&&I.reverse();V--;){var de=I[V];if(typeof de!="function")throw new Pn(o);if(J&&!be&&Ln(de)=="wrapper")var be=new Jr([],!0)}for(V=be?V:N;++V<N;){var Se=Ln(de=I[V]),Ae=Se=="wrapper"?Wf(de):i;be=Ae&&Yf(Ae[0])&&Ae[1]==424&&!Ae[4].length&&Ae[9]==1?be[Ln(Ae[0])].apply(be,Ae[3]):de.length==1&&Yf(de)?be[Se]():be.thru(de)}return function(){var qe=arguments,ze=qe[0];if(be&&qe.length==1&&Vt(ze))return be.plant(ze).value();for(var $e=0,ht=N?I[$e].apply(this,qe):ze;++$e<N;)ht=I[$e].call(this,ht);return ht}})}function Ho(T,I,N,V,J,de,be,Se,Ae,qe){var ze=I&l,$e=1&I,ht=2&I,pt=24&I,Rt=512&I,We=ht?i:nc(T);return function Je(){for(var Tt=arguments.length,st=lt(Tt),Wt=Tt;Wt--;)st[Wt]=arguments[Wt];if(pt)var zt=Qa(Je),br=(function(dn,fi){for(var qr=dn.length,Jn=0;qr--;)dn[qr]===fi&&++Jn;return Jn})(st,zt);if(V&&(st=Kg(st,V,J,pt)),de&&(st=Ud(st,de,be,pt)),Tt-=br,pt&&Tt<qe){var wt=Kn(st,zt);return qd(T,I,Ho,Je.placeholder,N,st,wt,Se,Ae,qe-Tt)}var Lt=$e?N:this,An=ht?Lt[T]:T;return Tt=st.length,Se?st=(function(dn,fi){for(var qr=dn.length,Jn=Qr(fi.length,qr),Qo=si(dn);Jn--;){var ns=fi[Jn];dn[Jn]=pa(ns,qr)?Qo[ns]:i}return dn})(st,Se):Rt&&Tt>1&&st.reverse(),ze&&Ae<Tt&&(st.length=Ae),this&&this!==Zr&&this instanceof Je&&(An=We||nc(An)),An.apply(Lt,st)}}function Ni(T,I){return function(N,V){return(function(J,de,be,Se){return zo(J,function(Ae,qe,ze){de(Se,be(Ae),qe,ze)}),Se})(N,T,I(V),{})}}function qf(T,I){return function(N,V){var J;if(N===i&&V===i)return I;if(N!==i&&(J=N),V!==i){if(J===i)return V;typeof N=="string"||typeof V=="string"?(N=Li(N),V=Li(V)):(N=Gg(N),V=Gg(V)),J=T(N,V)}return J}}function zf(T){return xo(function(I){return I=Fr(I,$t(kt())),Mt(function(N){var V=this;return T(I,function(J){return Xn(J,V,N)})})})}function ic(T,I){var N=(I=I===i?" ":Li(I)).length;if(N<2)return N?Au(I,T):I;var V=Au(I,Sf(T/Tn(I)));return Ua(I)?Ka(Cn(V),0,T).join(""):V.slice(0,T)}function Iu(T){return function(I,N,V){return V&&typeof V!="number"&&ui(I,N,V)&&(N=V=i),I=oo(I),N===i?(N=I,I=0):N=oo(N),(function(J,de,be,Se){for(var Ae=-1,qe=bn(Sf((de-J)/(be||1)),0),ze=lt(qe);qe--;)ze[Se?qe:++Ae]=J,J+=be;return ze})(I,N,V=V===i?I<N?1:-1:oo(V),T)}}function Eo(T){return function(I,N){return typeof I=="string"&&typeof N=="string"||(I=ao(I),N=ao(N)),T(I,N)}}function qd(T,I,N,V,J,de,be,Se,Ae,qe){var ze=8&I;I|=ze?u:64,4&(I&=~(ze?64:u))||(I&=-4);var $e=[T,I,J,ze?de:i,ze?be:i,ze?i:de,ze?i:be,Se,Ae,qe],ht=N.apply(i,$e);return Yf(T)&&Hd(ht,$e),ht.placeholder=V,lc(ht,T,I)}function zd(T){var I=Bn[T];return function(N,V){if(N=ao(N),(V=V==null?0:Qr(Yt(V),292))&&Dg(N)){var J=(_r(N)+"e").split("e");return+((J=(_r(I(J[0]+"e"+(+J[1]+V)))+"e").split("e"))[0]+"e"+(+J[1]-V))}return I(N)}}var Gf=bu&&1/Cs(new bu([,-0]))[1]==c?function(T){return new bu(T)}:bv;function Qg(T){return function(I){var N=Un(I);return N==x?hn(I):N==R?zl(I):(function(V,J){return Fr(J,function(de){return[de,V[de]]})})(I,T(I))}}function Yo(T,I,N,V,J,de,be,Se){var Ae=2&I;if(!Ae&&typeof T!="function")throw new Pn(o);var qe=V?V.length:0;if(qe||(I&=-97,V=J=i),be=be===i?be:bn(Yt(be),0),Se=Se===i?Se:Yt(Se),qe-=J?J.length:0,64&I){var ze=V,$e=J;V=J=i}var ht=Ae?i:Wf(T),pt=[T,I,N,V,J,ze,$e,de,be,Se];if(ht&&(function(We,Je){var Tt=We[1],st=Je[1],Wt=Tt|st,zt=Wt<131,br=st==l&&Tt==8||st==l&&Tt==256&&We[7].length<=Je[8]||st==384&&Je[7].length<=Je[8]&&Tt==8;if(!zt&&!br)return We;1&st&&(We[2]=Je[2],Wt|=1&Tt?0:4);var wt=Je[3];if(wt){var Lt=We[3];We[3]=Lt?Kg(Lt,wt,Je[4]):wt,We[4]=Lt?Kn(We[3],s):Je[4]}(wt=Je[5])&&(Lt=We[5],We[5]=Lt?Ud(Lt,wt,Je[6]):wt,We[6]=Lt?Kn(We[5],s):Je[6]),(wt=Je[7])&&(We[7]=wt),st&l&&(We[8]=We[8]==null?Je[8]:Qr(We[8],Je[8])),We[9]==null&&(We[9]=Je[9]),We[0]=Je[0],We[1]=Wt})(pt,ht),T=pt[0],I=pt[1],N=pt[2],V=pt[3],J=pt[4],!(Se=pt[9]=pt[9]===i?Ae?0:T.length:bn(pt[9]-qe,0))&&24&I&&(I&=-25),I&&I!=1)Rt=I==8||I==16?(function(We,Je,Tt){var st=nc(We);return function Wt(){for(var zt=arguments.length,br=lt(zt),wt=zt,Lt=Qa(Wt);wt--;)br[wt]=arguments[wt];var An=zt<3&&br[0]!==Lt&&br[zt-1]!==Lt?[]:Kn(br,Lt);return(zt-=An.length)<Tt?qd(We,Je,Ho,Wt.placeholder,i,br,An,i,i,Tt-zt):Xn(this&&this!==Zr&&this instanceof Wt?st:We,this,br)}})(T,I,Se):I!=u&&I!=33||J.length?Ho.apply(i,pt):(function(We,Je,Tt,st){var Wt=1&Je,zt=nc(We);return function br(){for(var wt=-1,Lt=arguments.length,An=-1,dn=st.length,fi=lt(dn+Lt),qr=this&&this!==Zr&&this instanceof br?zt:We;++An<dn;)fi[An]=st[An];for(;Lt--;)fi[An++]=arguments[++wt];return Xn(qr,Wt?Tt:this,fi)}})(T,I,N,V);else var Rt=(function(We,Je,Tt){var st=1&Je,Wt=nc(We);return function zt(){return(this&&this!==Zr&&this instanceof zt?Wt:We).apply(st?Tt:this,arguments)}})(T,I,N);return lc((ht?zg:Hd)(Rt,pt),T,I)}function Mn(T,I,N,V){return T===i||no(T,qa[N])&&!Rr.call(V,N)?I:T}function Vf(T,I,N,V,J,de){return Yr(T)&&Yr(I)&&(de.set(I,T),Nf(T,I,i,Vf,de),de.delete(I)),T}function Jg(T){return gc(T)?i:T}function Oo(T,I,N,V,J,de){var be=1&N,Se=T.length,Ae=I.length;if(Se!=Ae&&!(be&&Ae>Se))return!1;var qe=de.get(T),ze=de.get(I);if(qe&&ze)return qe==I&&ze==T;var $e=-1,ht=!0,pt=2&N?new Uo:i;for(de.set(T,I),de.set(I,T);++$e<Se;){var Rt=T[$e],We=I[$e];if(V)var Je=be?V(We,Rt,$e,I,T,de):V(Rt,We,$e,T,I,de);if(Je!==i){if(Je)continue;ht=!1;break}if(pt){if(!Ll(I,function(Tt,st){if(!Ts(pt,st)&&(Rt===Tt||J(Rt,Tt,N,V,de)))return pt.push(st)})){ht=!1;break}}else if(Rt!==We&&!J(Rt,We,N,V,de)){ht=!1;break}}return de.delete(T),de.delete(I),ht}function xo(T){return $f(Xf(T,i,ay),T+"")}function ku(T){return En(T,Nn,Vd)}function da(T){return En(T,Qn,Du)}var Wf=Af?function(T){return Af.get(T)}:bv;function Ln(T){for(var I=T.name+"",N=_u[I],V=Rr.call(_u,I)?N.length:0;V--;){var J=N[V],de=J.func;if(de==null||de==T)return J.name}return I}function Qa(T){return(Rr.call(ne,"placeholder")?ne:T).placeholder}function kt(){var T=ne.iteratee||yv;return T=T===yv?Tu:T,arguments.length?T(arguments[0],arguments[1]):T}function Hf(T,I){var N,V,J=T.__data__;return((V=typeof(N=I))=="string"||V=="number"||V=="symbol"||V=="boolean"?N!=="__proto__":N===null)?J[typeof I=="string"?"string":"hash"]:J.map}function Gd(T){for(var I=Nn(T),N=I.length;N--;){var V=I[N],J=T[V];I[N]=[V,J,ry(J)]}return I}function va(T,I){var N=(function(V,J){return V==null?i:V[J]})(T,I);return Su(N)?N:i}var Vd=Cd?function(T){return T==null?[]:(T=Dr(T),bo(Cd(T),function(I){return Ig.call(T,I)}))}:uh,Du=Cd?function(T){for(var I=[];T;)_o(I,Vd(T)),T=yu(T);return I}:uh,Un=Tr;function ey(T,I,N){for(var V=-1,J=(I=Si(I,T)).length,de=!1;++V<J;){var be=Xo(I[V]);if(!(de=T!=null&&N(T,be)))break;T=T[be]}return de||++V!=J?de:!!(J=T==null?0:T.length)&&io(J)&&pa(be,J)&&(Vt(T)||$o(T))}function ty(T){return typeof T.constructor!="function"||sc(T)?{}:Ga(yu(T))}function oc(T){return Vt(T)||$o(T)||!!(Ei&&T&&T[Ei])}function pa(T,I){var N=typeof T;return!!(I=I??f)&&(N=="number"||N!="symbol"&&Re.test(T))&&T>-1&&T%1==0&&T<I}function ui(T,I,N){if(!Yr(N))return!1;var V=typeof I;return!!(V=="number"?Ti(N)&&pa(I,N.length):V=="string"&&I in N)&&no(N[I],T)}function ac(T,I){if(Vt(T))return!1;var N=typeof T;return!(N!="number"&&N!="symbol"&&N!="boolean"&&T!=null&&!li(T))||me.test(T)||!Pe.test(T)||I!=null&&T in Dr(I)}function Yf(T){var I=Ln(T),N=ne[I];if(typeof N!="function"||!(I in Zt.prototype))return!1;if(T===N)return!0;var V=Wf(N);return!!V&&T===V[0]}(za&&Un(new za(new ArrayBuffer(1)))!=q||ai&&Un(new ai)!=x||Pf&&Un(Pf.resolve())!=C||bu&&Un(new bu)!=R||Xl&&Un(new Xl)!=L)&&(Un=function(T){var I=Tr(T),N=I==O?T.constructor:i,V=N?ga(N):"";if(V)switch(V){case wu:return q;case Te:return x;case je:return C;case Le:return R;case dt:return L}return I});var Jb=Ef?ma:lh;function sc(T){var I=T&&T.constructor;return T===(typeof I=="function"&&I.prototype||qa)}function ry(T){return T==T&&!Yr(T)}function Wd(T,I){return function(N){return N!=null&&N[T]===I&&(I!==i||T in Dr(N))}}function Xf(T,I,N){return I=bn(I===i?T.length-1:I,0),function(){for(var V=arguments,J=-1,de=bn(V.length-I,0),be=lt(de);++J<de;)be[J]=V[I+J];J=-1;for(var Se=lt(I+1);++J<I;)Se[J]=V[J];return Se[I]=N(be),Xn(T,this,Se)}}function ny(T,I){return I.length<2?T:Is(T,eo(I,0,-1))}function uc(T,I){if((I!=="constructor"||typeof T[I]!="function")&&I!="__proto__")return T[I]}var Hd=iy(zg),Mu=zb||function(T,I){return Zr.setTimeout(T,I)},$f=iy(Ms);function lc(T,I,N){var V=I+"";return $f(T,(function(J,de){var be=de.length;if(!be)return J;var Se=be-1;return de[Se]=(be>1?"& ":"")+de[Se],de=de.join(be>2?", ":" "),J.replace(ge,`{
/* [wrapped with `+de+`] */
`)})(V,(function(J,de){return $n(v,function(be){var Se="_."+be[0];de&be[1]&&!lu(J,Se)&&J.push(Se)}),J.sort()})((function(J){var de=J.match(xe);return de?de[1].split(Ne):[]})(V),N)))}function iy(T){var I=0,N=0;return function(){var V=Cf(),J=16-(V-N);if(N=V,J>0){if(++I>=800)return arguments[0]}else I=0;return T.apply(i,arguments)}}function cc(T,I){var N=-1,V=T.length,J=V-1;for(I=I===i?V:I;++N<I;){var de=Xa(N,J),be=T[de];T[de]=T[N],T[N]=be}return T.length=I,T}var Kf,Yd,Xd=(Kf=th(function(T){var I=[];return T.charCodeAt(0)===46&&I.push(""),T.replace(F,function(N,V,J,de){I.push(J?de.replace(Ze,"$1"):V||N)}),I},function(T){return Yd.size===500&&Yd.clear(),T}),Yd=Kf.cache,Kf);function Xo(T){if(typeof T=="string"||li(T))return T;var I=T+"";return I=="0"&&1/T==-1/0?"-0":I}function ga(T){if(T!=null){try{return Of.call(T)}catch{}try{return T+""}catch{}}return""}function $d(T){if(T instanceof Zt)return T.clone();var I=new Jr(T.__wrapped__,T.__chain__);return I.__actions__=si(T.__actions__),I.__index__=T.__index__,I.__values__=T.__values__,I}var Kd=Mt(function(T,I){return on(T)?ha(T,wn(I,1,on,!0)):[]}),e_=Mt(function(T,I){var N=en(I);return on(N)&&(N=i),on(T)?ha(T,wn(I,1,on,!0),kt(N,2)):[]}),Zd=Mt(function(T,I){var N=en(I);return on(N)&&(N=i),on(T)?ha(T,wn(I,1,on,!0),i,N):[]});function Kt(T,I,N){var V=T==null?0:T.length;if(!V)return-1;var J=N==null?0:Yt(N);return J<0&&(J=bn(V+J,0)),hu(T,kt(I,3),J)}function oy(T,I,N){var V=T==null?0:T.length;if(!V)return-1;var J=V-1;return N!==i&&(J=Yt(N),J=N<0?bn(V+J,0):Qr(J,V-1)),hu(T,kt(I,3),J,!0)}function ay(T){return T!=null&&T.length?wn(T,1):[]}function Lu(T){return T&&T.length?T[0]:i}var sy=Mt(function(T){var I=Fr(T,jd);return I.length&&I[0]===T[0]?Dd(I):[]}),t_=Mt(function(T){var I=en(T),N=Fr(T,jd);return I===en(N)?I=i:N.pop(),N.length&&N[0]===T[0]?Dd(N,kt(I,2)):[]}),r_=Mt(function(T){var I=en(T),N=Fr(T,jd);return(I=typeof I=="function"?I:i)&&N.pop(),N.length&&N[0]===T[0]?Dd(N,i,I):[]});function en(T){var I=T==null?0:T.length;return I?T[I-1]:i}var n_=Mt(fc);function fc(T,I){return T&&T.length&&I&&I.length?jf(T,I):T}var Qd=xo(function(T,I){var N=T==null?0:T.length,V=Eu(T,I);return ue(T,Fr(I,function(J){return pa(J,N)?+J:J}).sort($g)),V});function Zf(T){return T==null?T:Wb.call(T)}var uy=Mt(function(T){return $a(wn(T,1,on,!0))}),ji=Mt(function(T){var I=en(T);return on(I)&&(I=i),$a(wn(T,1,on,!0),kt(I,2))}),Ja=Mt(function(T){var I=en(T);return I=typeof I=="function"?I:i,$a(wn(T,1,on,!0),i,I)});function hc(T){if(!T||!T.length)return[];var I=0;return T=bo(T,function(N){if(on(N))return I=bn(N.length,I),!0}),Ul(I,function(N){return Fr(T,jl(N))})}function Jd(T,I){if(!T||!T.length)return[];var N=hc(T);return I==null?N:Fr(N,function(V){return Xn(I,i,V)})}var Qf=Mt(function(T,I){return on(T)?ha(T,I):[]}),ly=Mt(function(T){return Nd(bo(T,on))}),ev=Mt(function(T){var I=en(T);return on(I)&&(I=i),Nd(bo(T,on),kt(I,2))}),cy=Mt(function(T){var I=en(T);return I=typeof I=="function"?I:i,Nd(bo(T,on),i,I)}),tv=Mt(hc),rv=Mt(function(T){var I=T.length,N=I>1?T[I-1]:i;return N=typeof N=="function"?(T.pop(),N):i,Jd(T,N)});function ya(T){var I=ne(T);return I.__chain__=!0,I}function Jf(T,I){return I(T)}var es=xo(function(T){var I=T.length,N=I?T[0]:0,V=this.__wrapped__,J=function(de){return Eu(de,T)};return!(I>1||this.__actions__.length)&&V instanceof Zt&&pa(N)?((V=V.slice(N,+N+(I?1:0))).__actions__.push({func:Jf,args:[J],thisArg:i}),new Jr(V,this.__chain__).thru(function(de){return I&&!de.length&&de.push(i),de})):this.thru(J)}),fy=Bf(function(T,I,N){Rr.call(T,N)?++T[N]:qo(T,N,1)}),hy=Wo(Kt),nv=Wo(oy);function dy(T,I){return(Vt(T)?$n:xi)(T,kt(I,3))}function vy(T,I){return(Vt(T)?Fa:Jl)(T,kt(I,3))}var i_=Bf(function(T,I,N){Rr.call(T,N)?T[N].push(I):qo(T,N,[I])}),py=Mt(function(T,I,N){var V=-1,J=typeof I=="function",de=Ti(T)?lt(T.length):[];return xi(T,function(be){de[++V]=J?Xn(I,be,N):ks(be,I,N)}),de}),gy=Bf(function(T,I,N){qo(T,N,I)});function eh(T,I){return(Vt(T)?Fr:Fg)(T,kt(I,3))}var yy=Bf(function(T,I,N){T[N?0:1].push(I)},function(){return[[],[]]}),my=Mt(function(T,I){if(T==null)return[];var N=I.length;return N>1&&ui(T,I[0],I[1])?I=[]:N>2&&ui(I[0],I[1],I[2])&&(I=[I[0]]),ec(T,wn(I,1),[])}),qn=qb||function(){return Zr.Date.now()};function So(T,I,N){return I=N?i:I,I=T&&I==null?T.length:I,Yo(T,l,i,i,i,i,I)}function by(T,I){var N;if(typeof I!="function")throw new Pn(o);return T=Yt(T),function(){return--T>0&&(N=I.apply(this,arguments)),T<=1&&(I=i),N}}var iv=Mt(function(T,I,N){var V=1;if(N.length){var J=Kn(N,Qa(iv));V|=u}return Yo(T,V,I,N,J)}),dc=Mt(function(T,I,N){var V=3;if(N.length){var J=Kn(N,Qa(dc));V|=u}return Yo(I,V,T,N,J)});function Ns(T,I,N){var V,J,de,be,Se,Ae,qe=0,ze=!1,$e=!1,ht=!0;if(typeof T!="function")throw new Pn(o);function pt(st){var Wt=V,zt=J;return V=J=i,qe=st,be=T.apply(zt,Wt)}function Rt(st){var Wt=st-Ae;return Ae===i||Wt>=I||Wt<0||$e&&st-qe>=de}function We(){var st=qn();if(Rt(st))return Je(st);Se=Mu(We,(function(Wt){var zt=I-(Wt-Ae);return $e?Qr(zt,de-(Wt-qe)):zt})(st))}function Je(st){return Se=i,ht&&V?pt(st):(V=J=i,be)}function Tt(){var st=qn(),Wt=Rt(st);if(V=arguments,J=this,Ae=st,Wt){if(Se===i)return(function(zt){return qe=zt,Se=Mu(We,I),ze?pt(zt):be})(Ae);if($e)return ro(Se),Se=Mu(We,I),pt(Ae)}return Se===i&&(Se=Mu(We,I)),be}return I=ao(I)||0,Yr(N)&&(ze=!!N.leading,de=($e="maxWait"in N)?bn(ao(N.maxWait)||0,I):de,ht="trailing"in N?!!N.trailing:ht),Tt.cancel=function(){Se!==i&&ro(Se),qe=0,V=Ae=J=Se=i},Tt.flush=function(){return Se===i?be:Je(qn())},Tt}var _y=Mt(function(T,I){return Id(T,1,I)}),wy=Mt(function(T,I,N){return Id(T,ao(I)||0,N)});function th(T,I){if(typeof T!="function"||I!=null&&typeof I!="function")throw new Pn(o);var N=function(){var V=arguments,J=I?I.apply(this,V):V[0],de=N.cache;if(de.has(J))return de.get(J);var be=T.apply(this,V);return N.cache=de.set(J,be)||de,be};return N.cache=new(th.Cache||Ji),N}function vc(T){if(typeof T!="function")throw new Pn(o);return function(){var I=arguments;switch(I.length){case 0:return!T.call(this);case 1:return!T.call(this,I[0]);case 2:return!T.call(this,I[0],I[1]);case 3:return!T.call(this,I[0],I[1],I[2])}return!T.apply(this,I)}}th.Cache=Ji;var Nu=Qb(function(T,I){var N=(I=I.length==1&&Vt(I[0])?Fr(I[0],$t(kt())):Fr(wn(I,1),$t(kt()))).length;return Mt(function(V){for(var J=-1,de=Qr(V.length,N);++J<de;)V[J]=I[J].call(this,V[J]);return Xn(T,this,V)})}),js=Mt(function(T,I){var N=Kn(I,Qa(js));return Yo(T,u,i,I,N)}),Ey=Mt(function(T,I){var N=Kn(I,Qa(Ey));return Yo(T,64,i,I,N)}),Oy=xo(function(T,I){return Yo(T,256,i,i,i,I)});function no(T,I){return T===I||T!=T&&I!=I}var rh=Eo(kd),xy=Eo(function(T,I){return T>=I}),$o=xu((function(){return arguments})())?xu:function(T){return tn(T)&&Rr.call(T,"callee")&&!Ig.call(T,"callee")},Vt=lt.isArray,nh=Rl?$t(Rl):function(T){return tn(T)&&Tr(T)==j};function Ti(T){return T!=null&&io(T.length)&&!ma(T)}function on(T){return tn(T)&&Ti(T)}var To=mu||lh,Sy=pf?$t(pf):function(T){return tn(T)&&Tr(T)==b};function pc(T){if(!tn(T))return!1;var I=Tr(T);return I==g||I=="[object DOMException]"||typeof T.message=="string"&&typeof T.name=="string"&&!gc(T)}function ma(T){if(!Yr(T))return!1;var I=Tr(T);return I==_||I==w||I=="[object AsyncFunction]"||I=="[object Proxy]"}function ov(T){return typeof T=="number"&&T==Yt(T)}function io(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=f}function Yr(T){var I=typeof T;return T!=null&&(I=="object"||I=="function")}function tn(T){return T!=null&&typeof T=="object"}var Ty=Il?$t(Il):function(T){return tn(T)&&Un(T)==x};function av(T){return typeof T=="number"||tn(T)&&Tr(T)==E}function gc(T){if(!tn(T)||Tr(T)!=O)return!1;var I=yu(T);if(I===null)return!0;var N=Rr.call(I,"constructor")&&I.constructor;return typeof N=="function"&&N instanceof N&&Of.call(N)==Ub}var sv=kl?$t(kl):function(T){return tn(T)&&Tr(T)==A},Ko=uu?$t(uu):function(T){return tn(T)&&Un(T)==R};function ju(T){return typeof T=="string"||!Vt(T)&&tn(T)&&Tr(T)==k}function li(T){return typeof T=="symbol"||tn(T)&&Tr(T)==D}var ts=gf?$t(gf):function(T){return tn(T)&&io(T.length)&&!!hr[Tr(T)]},ih=Eo(Ya),Fu=Eo(function(T,I){return T<=I});function At(T){if(!T)return[];if(Ti(T))return ju(T)?Cn(T):si(T);if(Ps&&T[Ps])return(function(N){for(var V,J=[];!(V=N.next()).done;)J.push(V.value);return J})(T[Ps]());var I=Un(T);return(I==x?hn:I==R?Cs:Bu)(T)}function oo(T){return T?(T=ao(T))===c||T===-1/0?17976931348623157e292*(T<0?-1:1):T==T?T:0:T===0?T:0}function Yt(T){var I=oo(T),N=I%1;return I==I?N?I-N:I:0}function rs(T){return T?Wa(Yt(T),0,d):0}function ao(T){if(typeof T=="number")return T;if(li(T))return h;if(Yr(T)){var I=typeof T.valueOf=="function"?T.valueOf():T;T=Yr(I)?I+"":I}if(typeof T!="string")return T===0?T:+T;T=kr(T);var N=ke.test(T);return N||Ee.test(T)?Al(T.slice(2),N?2:8):Xe.test(T)?h:+T}function oh(T){return Vo(T,Qn(T))}function _r(T){return T==null?"":Li(T)}var Zn=Za(function(T,I){if(sc(I)||Ti(I))Vo(I,Nn(I),T);else for(var N in I)Rr.call(I,N)&&Kl(T,N,I[N])}),Cy=Za(function(T,I){Vo(I,Qn(I),T)}),ah=Za(function(T,I,N,V){Vo(I,Qn(I),T,V)}),Py=Za(function(T,I,N,V){Vo(I,Nn(I),T,V)}),o_=xo(Eu),Ay=Mt(function(T,I){T=Dr(T);var N=-1,V=I.length,J=V>2?I[2]:i;for(J&&ui(I[0],I[1],J)&&(V=1);++N<V;)for(var de=I[N],be=Qn(de),Se=-1,Ae=be.length;++Se<Ae;){var qe=be[Se],ze=T[qe];(ze===i||no(ze,qa[qe])&&!Rr.call(T,qe))&&(T[qe]=de[qe])}return T}),a_=Mt(function(T){return T.push(i,Vf),Xn(Ry,i,T)});function uv(T,I,N){var V=T==null?i:Is(T,I);return V===i?N:V}function lv(T,I){return T!=null&&ey(T,I,jg)}var ba=Ni(function(T,I,N){I!=null&&typeof I.toString!="function"&&(I=fa.call(I)),T[I]=N},_a(Ci)),ci=Ni(function(T,I,N){I!=null&&typeof I.toString!="function"&&(I=fa.call(I)),Rr.call(T,I)?T[I].push(N):T[I]=[N]},kt),cv=Mt(ks);function Nn(T){return Ti(T)?Lg(T):Cu(T)}function Qn(T){return Ti(T)?Lg(T,!0):(function(I){if(!Yr(I))return(function(de){var be=[];if(de!=null)for(var Se in Dr(de))be.push(Se);return be})(I);var N=sc(I),V=[];for(var J in I)(J!="constructor"||!N&&Rr.call(I,J))&&V.push(J);return V})(T)}var s_=Za(function(T,I,N){Nf(T,I,N)}),Ry=Za(function(T,I,N,V){Nf(T,I,N,V)}),yc=xo(function(T,I){var N={};if(T==null)return N;var V=!1;I=Fr(I,function(de){return de=Si(de,T),V||(V=de.length>1),de}),Vo(T,da(T),N),V&&(N=Mi(N,7,Jg));for(var J=I.length;J--;)Ld(N,I[J]);return N}),Iy=xo(function(T,I){return T==null?{}:(function(N,V){return Pu(N,V,function(J,de){return lv(N,de)})})(T,I)});function fv(T,I){if(T==null)return{};var N=Fr(da(T),function(V){return[V]});return I=kt(I),Pu(T,N,function(V,J){return I(V,J[0])})}var ky=Qg(Nn),Dy=Qg(Qn);function Bu(T){return T==null?[]:ql(T,Nn(T))}var u_=Ls(function(T,I,N){return I=I.toLowerCase(),T+(N?hv(I):I)});function hv(T){return sh(_r(T).toLowerCase())}function dv(T){return(T=_r(T))&&T.replace(De,Sd).replace(No,"")}var l_=Ls(function(T,I,N){return T+(N?"-":"")+I.toLowerCase()}),vv=Ls(function(T,I,N){return T+(N?" ":"")+I.toLowerCase()}),My=Zg("toLowerCase"),mc=Ls(function(T,I,N){return T+(N?"_":"")+I.toLowerCase()}),pv=Ls(function(T,I,N){return T+(N?" ":"")+sh(I)}),Ly=Ls(function(T,I,N){return T+(N?" ":"")+I.toUpperCase()}),sh=Zg("toUpperCase");function bc(T,I,N){return T=_r(T),(I=N?i:I)===i?(function(V){return Os.test(V)})(T)?(function(V){return V.match(jo)||[]})(T):(function(V){return V.match(He)||[]})(T):T.match(I)||[]}var gv=Mt(function(T,I){try{return Xn(T,i,I)}catch(N){return pc(N)?N:new dr(N)}}),Zo=xo(function(T,I){return $n(I,function(N){N=Xo(N),qo(T,N,iv(T[N],T))}),T});function _a(T){return function(){return T}}var c_=Uf(),Ny=Uf(!0);function Ci(T){return T}function yv(T){return Tu(typeof T=="function"?T:Mi(T,1))}var f_=Mt(function(T,I){return function(N){return ks(N,T,I)}}),h_=Mt(function(T,I){return function(N){return ks(T,N,I)}});function mv(T,I,N){var V=Nn(I),J=Lf(I,V);N!=null||Yr(I)&&(J.length||!V.length)||(N=I,I=T,T=this,J=Lf(I,Nn(I)));var de=!(Yr(N)&&"chain"in N&&!N.chain),be=ma(T);return $n(J,function(Se){var Ae=I[Se];T[Se]=Ae,be&&(T.prototype[Se]=function(){var qe=this.__chain__;if(de||qe){var ze=T(this.__wrapped__);return(ze.__actions__=si(this.__actions__)).push({func:Ae,args:arguments,thisArg:T}),ze.__chain__=qe,ze}return Ae.apply(T,_o([this.value()],arguments))})}),T}function bv(){}var d_=zf(Fr),v_=zf(Ml),p_=zf(Ll);function jy(T){return ac(T)?jl(Xo(T)):(function(I){return function(N){return Is(N,I)}})(T)}var g_=Iu(),Fy=Iu(!0);function uh(){return[]}function lh(){return!1}var _v,y_=qf(function(T,I){return T+I},0),m_=zd("ceil"),By=qf(function(T,I){return T/I},1),b_=zd("floor"),__=qf(function(T,I){return T*I},1),w_=zd("round"),E_=qf(function(T,I){return T-I},0);return ne.after=function(T,I){if(typeof I!="function")throw new Pn(o);return T=Yt(T),function(){if(--T<1)return I.apply(this,arguments)}},ne.ary=So,ne.assign=Zn,ne.assignIn=Cy,ne.assignInWith=ah,ne.assignWith=Py,ne.at=o_,ne.before=by,ne.bind=iv,ne.bindAll=Zo,ne.bindKey=dc,ne.castArray=function(){if(!arguments.length)return[];var T=arguments[0];return Vt(T)?T:[T]},ne.chain=ya,ne.chunk=function(T,I,N){I=(N?ui(T,I,N):I===i)?1:bn(Yt(I),0);var V=T==null?0:T.length;if(!V||I<1)return[];for(var J=0,de=0,be=lt(Sf(V/I));J<V;)be[de++]=eo(T,J,J+=I);return be},ne.compact=function(T){for(var I=-1,N=T==null?0:T.length,V=0,J=[];++I<N;){var de=T[I];de&&(J[V++]=de)}return J},ne.concat=function(){var T=arguments.length;if(!T)return[];for(var I=lt(T-1),N=arguments[0],V=T;V--;)I[V-1]=arguments[V];return _o(Vt(N)?si(N):[N],wn(I,1))},ne.cond=function(T){var I=T==null?0:T.length,N=kt();return T=I?Fr(T,function(V){if(typeof V[1]!="function")throw new Pn(o);return[N(V[0]),V[1]]}):[],Mt(function(V){for(var J=-1;++J<I;){var de=T[J];if(Xn(de[0],this,V))return Xn(de[1],this,V)}})},ne.conforms=function(T){return(function(I){var N=Nn(I);return function(V){return Ql(V,I,N)}})(Mi(T,1))},ne.constant=_a,ne.countBy=fy,ne.create=function(T,I){var N=Ga(T);return I==null?N:Zl(N,I)},ne.curry=function T(I,N,V){var J=Yo(I,8,i,i,i,i,i,N=V?i:N);return J.placeholder=T.placeholder,J},ne.curryRight=function T(I,N,V){var J=Yo(I,16,i,i,i,i,i,N=V?i:N);return J.placeholder=T.placeholder,J},ne.debounce=Ns,ne.defaults=Ay,ne.defaultsDeep=a_,ne.defer=_y,ne.delay=wy,ne.difference=Kd,ne.differenceBy=e_,ne.differenceWith=Zd,ne.drop=function(T,I,N){var V=T==null?0:T.length;return V?eo(T,(I=N||I===i?1:Yt(I))<0?0:I,V):[]},ne.dropRight=function(T,I,N){var V=T==null?0:T.length;return V?eo(T,0,(I=V-(I=N||I===i?1:Yt(I)))<0?0:I):[]},ne.dropRightWhile=function(T,I){return T&&T.length?to(T,kt(I,3),!0,!0):[]},ne.dropWhile=function(T,I){return T&&T.length?to(T,kt(I,3),!0):[]},ne.fill=function(T,I,N,V){var J=T==null?0:T.length;return J?(N&&typeof N!="number"&&ui(T,I,N)&&(N=0,V=J),(function(de,be,Se,Ae){var qe=de.length;for((Se=Yt(Se))<0&&(Se=-Se>qe?0:qe+Se),(Ae=Ae===i||Ae>qe?qe:Yt(Ae))<0&&(Ae+=qe),Ae=Se>Ae?0:rs(Ae);Se<Ae;)de[Se++]=be;return de})(T,I,N,V)):[]},ne.filter=function(T,I){return(Vt(T)?bo:Ng)(T,kt(I,3))},ne.flatMap=function(T,I){return wn(eh(T,I),1)},ne.flatMapDeep=function(T,I){return wn(eh(T,I),c)},ne.flatMapDepth=function(T,I,N){return N=N===i?1:Yt(N),wn(eh(T,I),N)},ne.flatten=ay,ne.flattenDeep=function(T){return T!=null&&T.length?wn(T,c):[]},ne.flattenDepth=function(T,I){return T!=null&&T.length?wn(T,I=I===i?1:Yt(I)):[]},ne.flip=function(T){return Yo(T,512)},ne.flow=c_,ne.flowRight=Ny,ne.fromPairs=function(T){for(var I=-1,N=T==null?0:T.length,V={};++I<N;){var J=T[I];V[J[0]]=J[1]}return V},ne.functions=function(T){return T==null?[]:Lf(T,Nn(T))},ne.functionsIn=function(T){return T==null?[]:Lf(T,Qn(T))},ne.groupBy=i_,ne.initial=function(T){return T!=null&&T.length?eo(T,0,-1):[]},ne.intersection=sy,ne.intersectionBy=t_,ne.intersectionWith=r_,ne.invert=ba,ne.invertBy=ci,ne.invokeMap=py,ne.iteratee=yv,ne.keyBy=gy,ne.keys=Nn,ne.keysIn=Qn,ne.map=eh,ne.mapKeys=function(T,I){var N={};return I=kt(I,3),zo(T,function(V,J,de){qo(N,I(V,J,de),V)}),N},ne.mapValues=function(T,I){var N={};return I=kt(I,3),zo(T,function(V,J,de){qo(N,J,I(V,J,de))}),N},ne.matches=function(T){return Bg(Mi(T,1))},ne.matchesProperty=function(T,I){return Ug(T,Mi(I,1))},ne.memoize=th,ne.merge=s_,ne.mergeWith=Ry,ne.method=f_,ne.methodOf=h_,ne.mixin=mv,ne.negate=vc,ne.nthArg=function(T){return T=Yt(T),Mt(function(I){return qg(I,T)})},ne.omit=yc,ne.omitBy=function(T,I){return fv(T,vc(kt(I)))},ne.once=function(T){return by(2,T)},ne.orderBy=function(T,I,N,V){return T==null?[]:(Vt(I)||(I=I==null?[]:[I]),Vt(N=V?i:N)||(N=N==null?[]:[N]),ec(T,I,N))},ne.over=d_,ne.overArgs=Nu,ne.overEvery=v_,ne.overSome=p_,ne.partial=js,ne.partialRight=Ey,ne.partition=yy,ne.pick=Iy,ne.pickBy=fv,ne.property=jy,ne.propertyOf=function(T){return function(I){return T==null?i:Is(T,I)}},ne.pull=n_,ne.pullAll=fc,ne.pullAllBy=function(T,I,N){return T&&T.length&&I&&I.length?jf(T,I,kt(N,2)):T},ne.pullAllWith=function(T,I,N){return T&&T.length&&I&&I.length?jf(T,I,i,N):T},ne.pullAt=Qd,ne.range=g_,ne.rangeRight=Fy,ne.rearg=Oy,ne.reject=function(T,I){return(Vt(T)?bo:Ng)(T,vc(kt(I,3)))},ne.remove=function(T,I){var N=[];if(!T||!T.length)return N;var V=-1,J=[],de=T.length;for(I=kt(I,3);++V<de;){var be=T[V];I(be,V,T)&&(N.push(be),J.push(V))}return ue(T,J),N},ne.rest=function(T,I){if(typeof T!="function")throw new Pn(o);return Mt(T,I=I===i?I:Yt(I))},ne.reverse=Zf,ne.sampleSize=function(T,I,N){return I=(N?ui(T,I,N):I===i)?1:Yt(I),(Vt(T)?If:$b)(T,I)},ne.set=function(T,I,N){return T==null?T:tc(T,I,N)},ne.setWith=function(T,I,N,V){return V=typeof V=="function"?V:i,T==null?T:tc(T,I,N,V)},ne.shuffle=function(T){return(Vt(T)?Hb:Kb)(T)},ne.slice=function(T,I,N){var V=T==null?0:T.length;return V?(N&&typeof N!="number"&&ui(T,I,N)?(I=0,N=V):(I=I==null?0:Yt(I),N=N===i?V:Yt(N)),eo(T,I,N)):[]},ne.sortBy=my,ne.sortedUniq=function(T){return T&&T.length?Go(T):[]},ne.sortedUniqBy=function(T,I){return T&&T.length?Go(T,kt(I,2)):[]},ne.split=function(T,I,N){return N&&typeof N!="number"&&ui(T,I,N)&&(I=N=i),(N=N===i?d:N>>>0)?(T=_r(T))&&(typeof I=="string"||I!=null&&!sv(I))&&!(I=Li(I))&&Ua(T)?Ka(Cn(T),0,N):T.split(I,N):[]},ne.spread=function(T,I){if(typeof T!="function")throw new Pn(o);return I=I==null?0:bn(Yt(I),0),Mt(function(N){var V=N[I],J=Ka(N,0,I);return V&&_o(J,V),Xn(T,this,J)})},ne.tail=function(T){var I=T==null?0:T.length;return I?eo(T,1,I):[]},ne.take=function(T,I,N){return T&&T.length?eo(T,0,(I=N||I===i?1:Yt(I))<0?0:I):[]},ne.takeRight=function(T,I,N){var V=T==null?0:T.length;return V?eo(T,(I=V-(I=N||I===i?1:Yt(I)))<0?0:I,V):[]},ne.takeRightWhile=function(T,I){return T&&T.length?to(T,kt(I,3),!1,!0):[]},ne.takeWhile=function(T,I){return T&&T.length?to(T,kt(I,3)):[]},ne.tap=function(T,I){return I(T),T},ne.throttle=function(T,I,N){var V=!0,J=!0;if(typeof T!="function")throw new Pn(o);return Yr(N)&&(V="leading"in N?!!N.leading:V,J="trailing"in N?!!N.trailing:J),Ns(T,I,{leading:V,maxWait:I,trailing:J})},ne.thru=Jf,ne.toArray=At,ne.toPairs=ky,ne.toPairsIn=Dy,ne.toPath=function(T){return Vt(T)?Fr(T,Xo):li(T)?[T]:si(Xd(_r(T)))},ne.toPlainObject=oh,ne.transform=function(T,I,N){var V=Vt(T),J=V||To(T)||ts(T);if(I=kt(I,4),N==null){var de=T&&T.constructor;N=J?V?new de:[]:Yr(T)&&ma(de)?Ga(yu(T)):{}}return(J?$n:zo)(T,function(be,Se,Ae){return I(N,be,Se,Ae)}),N},ne.unary=function(T){return So(T,1)},ne.union=uy,ne.unionBy=ji,ne.unionWith=Ja,ne.uniq=function(T){return T&&T.length?$a(T):[]},ne.uniqBy=function(T,I){return T&&T.length?$a(T,kt(I,2)):[]},ne.uniqWith=function(T,I){return I=typeof I=="function"?I:i,T&&T.length?$a(T,i,I):[]},ne.unset=function(T,I){return T==null||Ld(T,I)},ne.unzip=hc,ne.unzipWith=Jd,ne.update=function(T,I,N){return T==null?T:Vg(T,I,Fd(N))},ne.updateWith=function(T,I,N,V){return V=typeof V=="function"?V:i,T==null?T:Vg(T,I,Fd(N),V)},ne.values=Bu,ne.valuesIn=function(T){return T==null?[]:ql(T,Qn(T))},ne.without=Qf,ne.words=bc,ne.wrap=function(T,I){return js(Fd(I),T)},ne.xor=ly,ne.xorBy=ev,ne.xorWith=cy,ne.zip=tv,ne.zipObject=function(T,I){return Hg(T||[],I||[],Kl)},ne.zipObjectDeep=function(T,I){return Hg(T||[],I||[],tc)},ne.zipWith=rv,ne.entries=ky,ne.entriesIn=Dy,ne.extend=Cy,ne.extendWith=ah,mv(ne,ne),ne.add=y_,ne.attempt=gv,ne.camelCase=u_,ne.capitalize=hv,ne.ceil=m_,ne.clamp=function(T,I,N){return N===i&&(N=I,I=i),N!==i&&(N=(N=ao(N))==N?N:0),I!==i&&(I=(I=ao(I))==I?I:0),Wa(ao(T),I,N)},ne.clone=function(T){return Mi(T,4)},ne.cloneDeep=function(T){return Mi(T,5)},ne.cloneDeepWith=function(T,I){return Mi(T,5,I=typeof I=="function"?I:i)},ne.cloneWith=function(T,I){return Mi(T,4,I=typeof I=="function"?I:i)},ne.conformsTo=function(T,I){return I==null||Ql(T,I,Nn(I))},ne.deburr=dv,ne.defaultTo=function(T,I){return T==null||T!=T?I:T},ne.divide=By,ne.endsWith=function(T,I,N){T=_r(T),I=Li(I);var V=T.length,J=N=N===i?V:Wa(Yt(N),0,V);return(N-=I.length)>=0&&T.slice(N,J)==I},ne.eq=no,ne.escape=function(T){return(T=_r(T))&&he.test(T)?T.replace(ee,Td):T},ne.escapeRegExp=function(T){return(T=_r(T))&&X.test(T)?T.replace(G,"\\$&"):T},ne.every=function(T,I,N){var V=Vt(T)?Ml:Yb;return N&&ui(T,I,N)&&(I=i),V(T,kt(I,3))},ne.find=hy,ne.findIndex=Kt,ne.findKey=function(T,I){return Nl(T,kt(I,3),zo)},ne.findLast=nv,ne.findLastIndex=oy,ne.findLastKey=function(T,I){return Nl(T,kt(I,3),Mf)},ne.floor=b_,ne.forEach=dy,ne.forEachRight=vy,ne.forIn=function(T,I){return T==null?T:Ou(T,kt(I,3),Qn)},ne.forInRight=function(T,I){return T==null?T:Df(T,kt(I,3),Qn)},ne.forOwn=function(T,I){return T&&zo(T,kt(I,3))},ne.forOwnRight=function(T,I){return T&&Mf(T,kt(I,3))},ne.get=uv,ne.gt=rh,ne.gte=xy,ne.has=function(T,I){return T!=null&&ey(T,I,Xb)},ne.hasIn=lv,ne.head=Lu,ne.identity=Ci,ne.includes=function(T,I,N,V){T=Ti(T)?T:Bu(T),N=N&&!V?Yt(N):0;var J=T.length;return N<0&&(N=bn(J+N,0)),ju(T)?N<=J&&T.indexOf(I,N)>-1:!!J&&Ba(T,I,N)>-1},ne.indexOf=function(T,I,N){var V=T==null?0:T.length;if(!V)return-1;var J=N==null?0:Yt(N);return J<0&&(J=bn(V+J,0)),Ba(T,I,J)},ne.inRange=function(T,I,N){return I=oo(I),N===i?(N=I,I=0):N=oo(N),(function(V,J,de){return V>=Qr(J,de)&&V<bn(J,de)})(T=ao(T),I,N)},ne.invoke=cv,ne.isArguments=$o,ne.isArray=Vt,ne.isArrayBuffer=nh,ne.isArrayLike=Ti,ne.isArrayLikeObject=on,ne.isBoolean=function(T){return T===!0||T===!1||tn(T)&&Tr(T)==y},ne.isBuffer=To,ne.isDate=Sy,ne.isElement=function(T){return tn(T)&&T.nodeType===1&&!gc(T)},ne.isEmpty=function(T){if(T==null)return!0;if(Ti(T)&&(Vt(T)||typeof T=="string"||typeof T.splice=="function"||To(T)||ts(T)||$o(T)))return!T.length;var I=Un(T);if(I==x||I==R)return!T.size;if(sc(T))return!Cu(T).length;for(var N in T)if(Rr.call(T,N))return!1;return!0},ne.isEqual=function(T,I){return Ds(T,I)},ne.isEqualWith=function(T,I,N){var V=(N=typeof N=="function"?N:i)?N(T,I):i;return V===i?Ds(T,I,i,N):!!V},ne.isError=pc,ne.isFinite=function(T){return typeof T=="number"&&Dg(T)},ne.isFunction=ma,ne.isInteger=ov,ne.isLength=io,ne.isMap=Ty,ne.isMatch=function(T,I){return T===I||Ha(T,I,Gd(I))},ne.isMatchWith=function(T,I,N){return N=typeof N=="function"?N:i,Ha(T,I,Gd(I),N)},ne.isNaN=function(T){return av(T)&&T!=+T},ne.isNative=function(T){if(Jb(T))throw new dr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Su(T)},ne.isNil=function(T){return T==null},ne.isNull=function(T){return T===null},ne.isNumber=av,ne.isObject=Yr,ne.isObjectLike=tn,ne.isPlainObject=gc,ne.isRegExp=sv,ne.isSafeInteger=function(T){return ov(T)&&T>=-9007199254740991&&T<=f},ne.isSet=Ko,ne.isString=ju,ne.isSymbol=li,ne.isTypedArray=ts,ne.isUndefined=function(T){return T===i},ne.isWeakMap=function(T){return tn(T)&&Un(T)==L},ne.isWeakSet=function(T){return tn(T)&&Tr(T)=="[object WeakSet]"},ne.join=function(T,I){return T==null?"":Gb.call(T,I)},ne.kebabCase=l_,ne.last=en,ne.lastIndexOf=function(T,I,N){var V=T==null?0:T.length;if(!V)return-1;var J=V;return N!==i&&(J=(J=Yt(N))<0?bn(V+J,0):Qr(J,V-1)),I==I?(function(de,be,Se){for(var Ae=Se+1;Ae--;)if(de[Ae]===be)return Ae;return Ae})(T,I,J):hu(T,yf,J,!0)},ne.lowerCase=vv,ne.lowerFirst=My,ne.lt=ih,ne.lte=Fu,ne.max=function(T){return T&&T.length?kf(T,Ci,kd):i},ne.maxBy=function(T,I){return T&&T.length?kf(T,kt(I,2),kd):i},ne.mean=function(T){return du(T,Ci)},ne.meanBy=function(T,I){return du(T,kt(I,2))},ne.min=function(T){return T&&T.length?kf(T,Ci,Ya):i},ne.minBy=function(T,I){return T&&T.length?kf(T,kt(I,2),Ya):i},ne.stubArray=uh,ne.stubFalse=lh,ne.stubObject=function(){return{}},ne.stubString=function(){return""},ne.stubTrue=function(){return!0},ne.multiply=__,ne.nth=function(T,I){return T&&T.length?qg(T,Yt(I)):i},ne.noConflict=function(){return Zr._===this&&(Zr._=Pg),this},ne.noop=bv,ne.now=qn,ne.pad=function(T,I,N){T=_r(T);var V=(I=Yt(I))?Tn(T):0;if(!I||V>=I)return T;var J=(I-V)/2;return ic(Tf(J),N)+T+ic(Sf(J),N)},ne.padEnd=function(T,I,N){T=_r(T);var V=(I=Yt(I))?Tn(T):0;return I&&V<I?T+ic(I-V,N):T},ne.padStart=function(T,I,N){T=_r(T);var V=(I=Yt(I))?Tn(T):0;return I&&V<I?ic(I-V,N)+T:T},ne.parseInt=function(T,I,N){return N||I==null?I=0:I&&(I=+I),Vb(_r(T).replace(se,""),I||0)},ne.random=function(T,I,N){if(N&&typeof N!="boolean"&&ui(T,I,N)&&(I=N=i),N===i&&(typeof I=="boolean"?(N=I,I=i):typeof T=="boolean"&&(N=T,T=i)),T===i&&I===i?(T=0,I=1):(T=oo(T),I===i?(I=T,T=0):I=oo(I)),T>I){var V=T;T=I,I=V}if(N||T%1||I%1){var J=Mg();return Qr(T+J*(I-T+Na("1e-"+((J+"").length-1))),I)}return Xa(T,I)},ne.reduce=function(T,I,N){var V=Vt(T)?fu:mf,J=arguments.length<3;return V(T,kt(I,4),N,J,xi)},ne.reduceRight=function(T,I,N){var V=Vt(T)?Ed:mf,J=arguments.length<3;return V(T,kt(I,4),N,J,Jl)},ne.repeat=function(T,I,N){return I=(N?ui(T,I,N):I===i)?1:Yt(I),Au(_r(T),I)},ne.replace=function(){var T=arguments,I=_r(T[0]);return T.length<3?I:I.replace(T[1],T[2])},ne.result=function(T,I,N){var V=-1,J=(I=Si(I,T)).length;for(J||(J=1,T=i);++V<J;){var de=T==null?i:T[Xo(I[V])];de===i&&(V=J,de=N),T=ma(de)?de.call(T):de}return T},ne.round=w_,ne.runInContext=Ie,ne.sample=function(T){return(Vt(T)?Ad:sr)(T)},ne.size=function(T){if(T==null)return 0;if(Ti(T))return ju(T)?Tn(T):T.length;var I=Un(T);return I==x||I==R?T.size:Cu(T).length},ne.snakeCase=mc,ne.some=function(T,I,N){var V=Vt(T)?Ll:Zb;return N&&ui(T,I,N)&&(I=i),V(T,kt(I,3))},ne.sortedIndex=function(T,I){return Ff(T,I)},ne.sortedIndexBy=function(T,I,N){return Md(T,I,kt(N,2))},ne.sortedIndexOf=function(T,I){var N=T==null?0:T.length;if(N){var V=Ff(T,I);if(V<N&&no(T[V],I))return V}return-1},ne.sortedLastIndex=function(T,I){return Ff(T,I,!0)},ne.sortedLastIndexBy=function(T,I,N){return Md(T,I,kt(N,2),!0)},ne.sortedLastIndexOf=function(T,I){if(T!=null&&T.length){var N=Ff(T,I,!0)-1;if(no(T[N],I))return N}return-1},ne.startCase=pv,ne.startsWith=function(T,I,N){return T=_r(T),N=N==null?0:Wa(Yt(N),0,T.length),I=Li(I),T.slice(N,N+I.length)==I},ne.subtract=E_,ne.sum=function(T){return T&&T.length?Bl(T,Ci):0},ne.sumBy=function(T,I){return T&&T.length?Bl(T,kt(I,2)):0},ne.template=function(T,I,N){var V=ne.templateSettings;N&&ui(T,I,N)&&(I=i),T=_r(T),I=ah({},I,V,Mn);var J,de,be=ah({},I.imports,V.imports,Mn),Se=Nn(be),Ae=ql(be,Se),qe=0,ze=I.interpolate||Me,$e="__p += '",ht=Gl((I.escape||Me).source+"|"+ze.source+"|"+(ze===Oe?et:Me).source+"|"+(I.evaluate||Me).source+"|$","g"),pt="//# sourceURL="+(Rr.call(I,"sourceURL")?(I.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zi+"]")+`
`;T.replace(ht,function(Je,Tt,st,Wt,zt,br){return st||(st=Wt),$e+=T.slice(qe,br).replace(it,wf),Tt&&(J=!0,$e+=`' +
__e(`+Tt+`) +
'`),zt&&(de=!0,$e+=`';
`+zt+`;
__p += '`),st&&($e+=`' +
((__t = (`+st+`)) == null ? '' : __t) +
'`),qe=br+Je.length,Je}),$e+=`';
`;var Rt=Rr.call(I,"variable")&&I.variable;if(Rt){if(at.test(Rt))throw new dr("Invalid `variable` option passed into `_.template`")}else $e=`with (obj) {
`+$e+`
}
`;$e=(de?$e.replace(ie,""):$e).replace(ae,"$1").replace(le,"$1;"),$e="function("+(Rt||"obj")+`) {
`+(Rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(de?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$e+`return __p
}`;var We=gv(function(){return mn(Se,pt+"return "+$e).apply(i,Ae)});if(We.source=$e,pc(We))throw We;return We},ne.times=function(T,I){if((T=Yt(T))<1||T>f)return[];var N=d,V=Qr(T,d);I=kt(I),T-=d;for(var J=Ul(V,I);++N<T;)I(N);return J},ne.toFinite=oo,ne.toInteger=Yt,ne.toLength=rs,ne.toLower=function(T){return _r(T).toLowerCase()},ne.toNumber=ao,ne.toSafeInteger=function(T){return T?Wa(Yt(T),-9007199254740991,f):T===0?T:0},ne.toString=_r,ne.toUpper=function(T){return _r(T).toUpperCase()},ne.trim=function(T,I,N){if((T=_r(T))&&(N||I===i))return kr(T);if(!T||!(I=Li(I)))return T;var V=Cn(T),J=Cn(I);return Ka(V,bf(V,J),_f(V,J)+1).join("")},ne.trimEnd=function(T,I,N){if((T=_r(T))&&(N||I===i))return T.slice(0,Fo(T)+1);if(!T||!(I=Li(I)))return T;var V=Cn(T);return Ka(V,0,_f(V,Cn(I))+1).join("")},ne.trimStart=function(T,I,N){if((T=_r(T))&&(N||I===i))return T.replace(se,"");if(!T||!(I=Li(I)))return T;var V=Cn(T);return Ka(V,bf(V,Cn(I))).join("")},ne.truncate=function(T,I){var N=30,V="...";if(Yr(I)){var J="separator"in I?I.separator:J;N="length"in I?Yt(I.length):N,V="omission"in I?Li(I.omission):V}var de=(T=_r(T)).length;if(Ua(T)){var be=Cn(T);de=be.length}if(N>=de)return T;var Se=N-Tn(V);if(Se<1)return V;var Ae=be?Ka(be,0,Se).join(""):T.slice(0,Se);if(J===i)return Ae+V;if(be&&(Se+=Ae.length-Se),sv(J)){if(T.slice(Se).search(J)){var qe,ze=Ae;for(J.global||(J=Gl(J.source,_r(Qe.exec(J))+"g")),J.lastIndex=0;qe=J.exec(ze);)var $e=qe.index;Ae=Ae.slice(0,$e===i?Se:$e)}}else if(T.indexOf(Li(J),Se)!=Se){var ht=Ae.lastIndexOf(J);ht>-1&&(Ae=Ae.slice(0,ht))}return Ae+V},ne.unescape=function(T){return(T=_r(T))&&re.test(T)?T.replace(te,Qi):T},ne.uniqueId=function(T){var I=++Cg;return _r(T)+I},ne.upperCase=Ly,ne.upperFirst=sh,ne.each=dy,ne.eachRight=vy,ne.first=Lu,mv(ne,(_v={},zo(ne,function(T,I){Rr.call(ne.prototype,I)||(_v[I]=T)}),_v),{chain:!1}),ne.VERSION="4.17.21",$n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(T){ne[T].placeholder=ne}),$n(["drop","take"],function(T,I){Zt.prototype[T]=function(N){N=N===i?1:bn(Yt(N),0);var V=this.__filtered__&&!I?new Zt(this):this.clone();return V.__filtered__?V.__takeCount__=Qr(N,V.__takeCount__):V.__views__.push({size:Qr(N,d),type:T+(V.__dir__<0?"Right":"")}),V},Zt.prototype[T+"Right"]=function(N){return this.reverse()[T](N).reverse()}}),$n(["filter","map","takeWhile"],function(T,I){var N=I+1,V=N==1||N==3;Zt.prototype[T]=function(J){var de=this.clone();return de.__iteratees__.push({iteratee:kt(J,3),type:N}),de.__filtered__=de.__filtered__||V,de}}),$n(["head","last"],function(T,I){var N="take"+(I?"Right":"");Zt.prototype[T]=function(){return this[N](1).value()[0]}}),$n(["initial","tail"],function(T,I){var N="drop"+(I?"":"Right");Zt.prototype[T]=function(){return this.__filtered__?new Zt(this):this[N](1)}}),Zt.prototype.compact=function(){return this.filter(Ci)},Zt.prototype.find=function(T){return this.filter(T).head()},Zt.prototype.findLast=function(T){return this.reverse().find(T)},Zt.prototype.invokeMap=Mt(function(T,I){return typeof T=="function"?new Zt(this):this.map(function(N){return ks(N,T,I)})}),Zt.prototype.reject=function(T){return this.filter(vc(kt(T)))},Zt.prototype.slice=function(T,I){T=Yt(T);var N=this;return N.__filtered__&&(T>0||I<0)?new Zt(N):(T<0?N=N.takeRight(-T):T&&(N=N.drop(T)),I!==i&&(N=(I=Yt(I))<0?N.dropRight(-I):N.take(I-T)),N)},Zt.prototype.takeRightWhile=function(T){return this.reverse().takeWhile(T).reverse()},Zt.prototype.toArray=function(){return this.take(d)},zo(Zt.prototype,function(T,I){var N=/^(?:filter|find|map|reject)|While$/.test(I),V=/^(?:head|last)$/.test(I),J=ne[V?"take"+(I=="last"?"Right":""):I],de=V||/^find/.test(I);J&&(ne.prototype[I]=function(){var be=this.__wrapped__,Se=V?[1]:arguments,Ae=be instanceof Zt,qe=Se[0],ze=Ae||Vt(be),$e=function(Tt){var st=J.apply(ne,_o([Tt],Se));return V&&ht?st[0]:st};ze&&N&&typeof qe=="function"&&qe.length!=1&&(Ae=ze=!1);var ht=this.__chain__,pt=!!this.__actions__.length,Rt=de&&!ht,We=Ae&&!pt;if(!de&&ze){be=We?be:new Zt(this);var Je=T.apply(be,Se);return Je.__actions__.push({func:Jf,args:[$e],thisArg:i}),new Jr(Je,ht)}return Rt&&We?T.apply(this,Se):(Je=this.thru($e),Rt?V?Je.value()[0]:Je.value():Je)})}),$n(["pop","push","shift","sort","splice","unshift"],function(T){var I=pu[T],N=/^(?:push|sort|unshift)$/.test(T)?"tap":"thru",V=/^(?:pop|shift)$/.test(T);ne.prototype[T]=function(){var J=arguments;if(V&&!this.__chain__){var de=this.value();return I.apply(Vt(de)?de:[],J)}return this[N](function(be){return I.apply(Vt(be)?be:[],J)})}}),zo(Zt.prototype,function(T,I){var N=ne[I];if(N){var V=N.name+"";Rr.call(_u,V)||(_u[V]=[]),_u[V].push({name:I,func:N})}}),_u[Ho(i,2).name]=[{name:"wrapper",func:i}],Zt.prototype.clone=function(){var T=new Zt(this.__wrapped__);return T.__actions__=si(this.__actions__),T.__dir__=this.__dir__,T.__filtered__=this.__filtered__,T.__iteratees__=si(this.__iteratees__),T.__takeCount__=this.__takeCount__,T.__views__=si(this.__views__),T},Zt.prototype.reverse=function(){if(this.__filtered__){var T=new Zt(this);T.__dir__=-1,T.__filtered__=!0}else(T=this.clone()).__dir__*=-1;return T},Zt.prototype.value=function(){var T=this.__wrapped__.value(),I=this.__dir__,N=Vt(T),V=I<0,J=N?T.length:0,de=(function(br,wt,Lt){for(var An=-1,dn=Lt.length;++An<dn;){var fi=Lt[An],qr=fi.size;switch(fi.type){case"drop":br+=qr;break;case"dropRight":wt-=qr;break;case"take":wt=Qr(wt,br+qr);break;case"takeRight":br=bn(br,wt-qr)}}return{start:br,end:wt}})(0,J,this.__views__),be=de.start,Se=de.end,Ae=Se-be,qe=V?Se:be-1,ze=this.__iteratees__,$e=ze.length,ht=0,pt=Qr(Ae,this.__takeCount__);if(!N||!V&&J==Ae&&pt==Ae)return Wg(T,this.__actions__);var Rt=[];e:for(;Ae--&&ht<pt;){for(var We=-1,Je=T[qe+=I];++We<$e;){var Tt=ze[We],st=Tt.iteratee,Wt=Tt.type,zt=st(Je);if(Wt==2)Je=zt;else if(!zt){if(Wt==1)continue e;break e}}Rt[ht++]=Je}return Rt},ne.prototype.at=es,ne.prototype.chain=function(){return ya(this)},ne.prototype.commit=function(){return new Jr(this.value(),this.__chain__)},ne.prototype.next=function(){this.__values__===i&&(this.__values__=At(this.value()));var T=this.__index__>=this.__values__.length;return{done:T,value:T?i:this.__values__[this.__index__++]}},ne.prototype.plant=function(T){for(var I,N=this;N instanceof Rf;){var V=$d(N);V.__index__=0,V.__values__=i,I?J.__wrapped__=V:I=V;var J=V;N=N.__wrapped__}return J.__wrapped__=T,I},ne.prototype.reverse=function(){var T=this.__wrapped__;if(T instanceof Zt){var I=T;return this.__actions__.length&&(I=new Zt(this)),(I=I.reverse()).__actions__.push({func:Jf,args:[Zf],thisArg:i}),new Jr(I,this.__chain__)}return this.thru(Zf)},ne.prototype.toJSON=ne.prototype.valueOf=ne.prototype.value=function(){return Wg(this.__wrapped__,this.__actions__)},ne.prototype.first=ne.prototype.head,Ps&&(ne.prototype[Ps]=function(){return this}),ne})();Zr._=Di,(n=(function(){return Di}).call(e,t,e,r))===i||(r.exports=n)}).call(this)},5267:function(r,e,t){var n=this&&this.__extends||(function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAction=void 0;var i=t(4671),o=t(5649),a=t(7479),s=(function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h.pending=!1,h}return n(l,u),l.prototype.schedule=function(c,f){var h;if(f===void 0&&(f=0),this.closed)return this;this.state=c;var d=this.id,v=this.scheduler;return d!=null&&(this.id=this.recycleAsyncId(v,d,f)),this.pending=!0,this.delay=f,this.id=(h=this.id)!==null&&h!==void 0?h:this.requestAsyncId(v,this.id,f),this},l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),o.intervalProvider.setInterval(c.flush.bind(c,this),h)},l.prototype.recycleAsyncId=function(c,f,h){if(h===void 0&&(h=0),h!=null&&this.delay===h&&this.pending===!1)return f;f!=null&&o.intervalProvider.clearInterval(f)},l.prototype.execute=function(c,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var h=this._execute(c,f);if(h)return h;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(c,f){var h,d=!1;try{this.work(c)}catch(v){d=!0,h=v||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),h},l.prototype.unsubscribe=function(){if(!this.closed){var c=this.id,f=this.scheduler,h=f.actions;this.work=this.state=this.scheduler=null,this.pending=!1,a.arrRemove(h,this),c!=null&&(this.id=this.recycleAsyncId(f,c,null)),this.delay=null,u.prototype.unsubscribe.call(this)}},l})(i.Action);e.AsyncAction=s},5319:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})(),i=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var o=i(t(1048)),a=(function(s){function u(l){var c=this,f=(function(h){return h instanceof o.default.Buffer?h:typeof h=="number"&&typeof o.default.Buffer.alloc=="function"?o.default.Buffer.alloc(h):new o.default.Buffer(h)})(l);return(c=s.call(this,f.length)||this)._buffer=f,c}return n(u,s),u.prototype.getUInt8=function(l){return this._buffer.readUInt8(l)},u.prototype.getInt8=function(l){return this._buffer.readInt8(l)},u.prototype.getFloat64=function(l){return this._buffer.readDoubleBE(l)},u.prototype.getVarInt=function(l){for(var c=0,f=this._buffer.readInt8(l+c),h=f%128;f/128>=1;)c+=1,h+=(f=this._buffer.readInt8(l+c))%128;return{length:c+1,value:h}},u.prototype.putUInt8=function(l,c){this._buffer.writeUInt8(c,l)},u.prototype.putInt8=function(l,c){this._buffer.writeInt8(c,l)},u.prototype.putFloat64=function(l,c){this._buffer.writeDoubleBE(c,l)},u.prototype.putBytes=function(l,c){if(c instanceof u){var f=Math.min(c.length-c.position,this.length-l);c._buffer.copy(this._buffer,l,c.position,c.position+f),c.position+=f}else s.prototype.putBytes.call(this,l,c)},u.prototype.getSlice=function(l,c){return new u(this._buffer.slice(l,l+c))},u})(i(t(7174)).default);e.default=a,e.alloc=function(s){return new a(s)}},5337:function(r,e,t){var n=this&&this.__read||function(v,p){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var y,b,g=m.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=g.next()).done;)_.push(y.value)}catch(w){b={error:w}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(b)throw b.error}}return _};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=void 0;var i=t(9445),o=t(4662),a=t(983),s=t(8046),u=t(1018),l=t(1251),c=["addListener","removeListener"],f=["addEventListener","removeEventListener"],h=["on","off"];function d(v,p){return function(m){return function(y){return v[m](p,y)}}}e.fromEvent=function v(p,m,y,b){if(u.isFunction(y)&&(b=y,y=void 0),b)return v(p,m,y).pipe(l.mapOneOrManyArgs(b));var g=n((function(x){return u.isFunction(x.addEventListener)&&u.isFunction(x.removeEventListener)})(p)?f.map(function(x){return function(E){return p[x](m,E,y)}}):(function(x){return u.isFunction(x.addListener)&&u.isFunction(x.removeListener)})(p)?c.map(d(p,m)):(function(x){return u.isFunction(x.on)&&u.isFunction(x.off)})(p)?h.map(d(p,m)):[],2),_=g[0],w=g[1];if(!_&&s.isArrayLike(p))return a.mergeMap(function(x){return v(x,m,y)})(i.innerFrom(p));if(!_)throw new TypeError("Invalid event target");return new o.Observable(function(x){var E=function(){for(var O=[],C=0;C<arguments.length;C++)O[C]=arguments[C];return x.next(1<O.length?O:O[0])};return _(E),function(){return w(E)}})}},5348:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7521));e.default=n({},o.default)},5361:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=t(7452),i=t(6781),o=t(7665),a=t(9305),s=a.error.PROTOCOL_ERROR,u=(function(){function c(f){this._ch=f,this._byteArraysSupported=!0}return c.prototype.packable=function(f,h){var d,v=this;h===void 0&&(h=i.functional.identity);try{f=h(f)}catch(y){return function(){throw y}}if(f===null)return function(){return v._ch.writeUInt8(192)};if(f===!0)return function(){return v._ch.writeUInt8(195)};if(f===!1)return function(){return v._ch.writeUInt8(194)};if(typeof f=="number")return function(){return v.packFloat(f)};if(typeof f=="string")return function(){return v.packString(f)};if(typeof f=="bigint")return function(){return v.packInteger((0,a.int)(f))};if((0,a.isInt)(f))return function(){return v.packInteger(f)};if(f instanceof Int8Array)return function(){return v.packBytes(f)};if(f instanceof Array)return function(){v.packListHeader(f.length);for(var y=0;y<f.length;y++)v.packable(f[y]===void 0?null:f[y],h)()};if((d=f)!=null&&typeof d[Symbol.iterator]=="function")return this.packableIterable(f,h);if(f instanceof o.Structure){for(var p=[],m=0;m<f.fields.length;m++)p[m]=this.packable(f.fields[m],h);return function(){return v.packStruct(f.signature,p)}}return typeof f=="object"?function(){for(var y=Object.keys(f),b=0,g=0;g<y.length;g++)f[y[g]]!==void 0&&b++;for(v.packMapHeader(b),g=0;g<y.length;g++){var _=y[g];f[_]!==void 0&&(v.packString(_),v.packable(f[_],h)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(f))},c.prototype.packableIterable=function(f,h){try{var d=Array.from(f);return this.packable(d,h)}catch(v){throw(0,a.newError)("Cannot pack given iterable, ".concat(v.message,": ").concat(f))}},c.prototype.packStruct=function(f,h){h=h||[],this.packStructHeader(h.length,f);for(var d=0;d<h.length;d++)h[d]()},c.prototype.packInteger=function(f){var h=f.high,d=f.low;f.greaterThanOrEqual(-16)&&f.lessThan(128)?this._ch.writeInt8(d):f.greaterThanOrEqual(-128)&&f.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(d)):f.greaterThanOrEqual(-32768)&&f.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(d)):f.greaterThanOrEqual(-2147483648)&&f.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(d)):(this._ch.writeUInt8(203),this._ch.writeInt32(h),this._ch.writeInt32(d))},c.prototype.packFloat=function(f){this._ch.writeUInt8(193),this._ch.writeFloat64(f)},c.prototype.packString=function(f){var h=n.utf8.encode(f),d=h.length;if(d<16)this._ch.writeUInt8(128|d),this._ch.writeBytes(h);else if(d<256)this._ch.writeUInt8(208),this._ch.writeUInt8(d),this._ch.writeBytes(h);else if(d<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(d/256|0),this._ch.writeUInt8(d%256),this._ch.writeBytes(h);else{if(!(d<4294967296))throw(0,a.newError)("UTF-8 strings of size "+d+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((d/16777216|0)%256),this._ch.writeUInt8((d/65536|0)%256),this._ch.writeUInt8((d/256|0)%256),this._ch.writeUInt8(d%256),this._ch.writeBytes(h)}},c.prototype.packListHeader=function(f){if(f<16)this._ch.writeUInt8(144|f);else if(f<256)this._ch.writeUInt8(212),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Lists of size "+f+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packBytes=function(f){if(!this._byteArraysSupported)throw(0,a.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(f.length);for(var h=0;h<f.length;h++)this._ch.writeInt8(f[h])},c.prototype.packBytesHeader=function(f){if(f<256)this._ch.writeUInt8(204),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Byte arrays of size "+f+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packMapHeader=function(f){if(f<16)this._ch.writeUInt8(160|f);else if(f<256)this._ch.writeUInt8(216),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(f/256|0),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Maps of size "+f+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packStructHeader=function(f,h){if(f<16)this._ch.writeUInt8(176|f),this._ch.writeUInt8(h);else if(f<256)this._ch.writeUInt8(220),this._ch.writeUInt8(f),this._ch.writeUInt8(h);else{if(!(f<65536))throw(0,a.newError)("Structures of size "+f+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(f/256|0),this._ch.writeUInt8(f%256)}},c.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},c.prototype._nonPackableValue=function(f){return function(){throw(0,a.newError)(f,s)}},c})();e.Packer=u;var l=(function(){function c(f,h){f===void 0&&(f=!1),h===void 0&&(h=!1),this._disableLosslessIntegers=f,this._useBigInt=h}return c.prototype.unpack=function(f,h){h===void 0&&(h=i.functional.identity);var d=f.readUInt8(),v=240&d,p=15&d;if(d===192)return null;var m=this._unpackBoolean(d);if(m!==null)return m;var y=this._unpackNumberOrInteger(d,f);if(y!==null){if((0,a.isInt)(y)){if(this._useBigInt)return y.toBigInt();if(this._disableLosslessIntegers)return y.toNumberOrInfinity()}return y}var b=this._unpackString(d,v,p,f);if(b!==null)return b;var g=this._unpackList(d,v,p,f,h);if(g!==null)return g;var _=this._unpackByteArray(d,f);if(_!==null)return _;var w=this._unpackMap(d,v,p,f,h);if(w!==null)return w;var x=this._unpackStruct(d,v,p,f,h);if(x!==null)return x;throw(0,a.newError)("Unknown packed value with marker "+d.toString(16))},c.prototype.unpackInteger=function(f){var h=f.readUInt8(),d=this._unpackInteger(h,f);if(d==null)throw(0,a.newError)("Unable to unpack integer value with marker "+h.toString(16));return d},c.prototype._unpackBoolean=function(f){return f===195||f!==194&&null},c.prototype._unpackNumberOrInteger=function(f,h){return f===193?h.readFloat64():this._unpackInteger(f,h)},c.prototype._unpackInteger=function(f,h){if(f>=0&&f<128)return(0,a.int)(f);if(f>=240&&f<256)return(0,a.int)(f-256);if(f===200)return(0,a.int)(h.readInt8());if(f===201)return(0,a.int)(h.readInt16());if(f===202){var d=h.readInt32();return(0,a.int)(d)}if(f===203){var v=h.readInt32(),p=h.readInt32();return new a.Integer(p,v)}return null},c.prototype._unpackString=function(f,h,d,v){return h===128?n.utf8.decode(v,d):f===208?n.utf8.decode(v,v.readUInt8()):f===209?n.utf8.decode(v,v.readUInt16()):f===210?n.utf8.decode(v,v.readUInt32()):null},c.prototype._unpackList=function(f,h,d,v,p){return h===144?this._unpackListWithSize(d,v,p):f===212?this._unpackListWithSize(v.readUInt8(),v,p):f===213?this._unpackListWithSize(v.readUInt16(),v,p):f===214?this._unpackListWithSize(v.readUInt32(),v,p):null},c.prototype._unpackListWithSize=function(f,h,d){for(var v=[],p=0;p<f;p++)v.push(this.unpack(h,d));return v},c.prototype._unpackByteArray=function(f,h){return f===204?this._unpackByteArrayWithSize(h.readUInt8(),h):f===205?this._unpackByteArrayWithSize(h.readUInt16(),h):f===206?this._unpackByteArrayWithSize(h.readUInt32(),h):null},c.prototype._unpackByteArrayWithSize=function(f,h){for(var d=new Int8Array(f),v=0;v<f;v++)d[v]=h.readInt8();return d},c.prototype._unpackMap=function(f,h,d,v,p){return h===160?this._unpackMapWithSize(d,v,p):f===216?this._unpackMapWithSize(v.readUInt8(),v,p):f===217?this._unpackMapWithSize(v.readUInt16(),v,p):f===218?this._unpackMapWithSize(v.readUInt32(),v,p):null},c.prototype._unpackMapWithSize=function(f,h,d){for(var v={},p=0;p<f;p++)v[this.unpack(h,d)]=this.unpack(h,d);return v},c.prototype._unpackStruct=function(f,h,d,v,p){return h===176?this._unpackStructWithSize(d,v,p):f===220?this._unpackStructWithSize(v.readUInt8(),v,p):f===221?this._unpackStructWithSize(v.readUInt16(),v,p):null},c.prototype._unpackStructWithSize=function(f,h,d){for(var v=h.readUInt8(),p=new o.Structure(v,[]),m=0;m<f;m++)p.fields.push(this.unpack(h,d));return d(p)},c})();e.Unpacker=l},5365:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=void 0;var n=t(7843),i=t(3111),o=t(1342),a=t(9445);e.distinct=function(s,u){return n.operate(function(l,c){var f=new Set;l.subscribe(i.createOperatorSubscriber(c,function(h){var d=s?s(h):h;f.has(d)||(f.add(d),c.next(h))})),u&&a.innerFrom(u).subscribe(i.createOperatorSubscriber(c,function(){return f.clear()},o.noop))})}},5382:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.single=void 0;var n=t(2823),i=t(1505),o=t(1759),a=t(7843),s=t(3111);e.single=function(u){return a.operate(function(l,c){var f,h=!1,d=!1,v=0;l.subscribe(s.createOperatorSubscriber(c,function(p){d=!0,u&&!u(p,v++,l)||(h&&c.error(new i.SequenceError("Too many matching values")),h=!0,f=p)},function(){h?(c.next(f),c.complete()):c.error(d?new o.NotFoundError("No matching values"):new n.EmptyError)}))})}},5442:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=void 0;var o=t(7843),a=t(3111),s=t(9445),u=t(6640),l=t(1342),c=t(1107);e.withLatestFrom=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f);return o.operate(function(v,p){for(var m=f.length,y=new Array(m),b=f.map(function(){return!1}),g=!1,_=function(x){s.innerFrom(f[x]).subscribe(a.createOperatorSubscriber(p,function(E){y[x]=E,g||b[x]||(b[x]=!0,(g=b.every(u.identity))&&(b=null))},l.noop))},w=0;w<m;w++)_(w);v.subscribe(a.createOperatorSubscriber(p,function(x){if(g){var E=i([x],n(y));p.next(d?d.apply(void 0,i([],n(E))):E)}}))})}},5459:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(R,k,D,L){L===void 0&&(L=D);var j=Object.getOwnPropertyDescriptor(k,D);j&&!("get"in j?!k.__esModule:j.writable||j.configurable)||(j={enumerable:!0,get:function(){return k[D]}}),Object.defineProperty(R,L,j)}:function(R,k,D,L){L===void 0&&(L=D),R[L]=k[D]}),i=this&&this.__setModuleDefault||(Object.create?function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}:function(R,k){R.default=k}),o=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var D in R)D!=="default"&&Object.prototype.hasOwnProperty.call(R,D)&&n(k,R,D);return i(k,R),k},a=this&&this.__read||function(R,k){var D=typeof Symbol=="function"&&R[Symbol.iterator];if(!D)return R;var L,j,q=D.call(R),B=[];try{for(;(k===void 0||k-- >0)&&!(L=q.next()).done;)B.push(L.value)}catch(U){j={error:U}}finally{try{L&&!L.done&&(D=q.return)&&D.call(q)}finally{if(j)throw j.error}}return B};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var s=o(t(5022)),u=t(6587),l=t(9691),c=o(t(3371)),f={value:!0,enumerable:!1,configurable:!1,writable:!1},h="__isDuration__",d="__isLocalTime__",v="__isTime__",p="__isDate__",m="__isLocalDateTime__",y="__isDateTime__",b=(function(){function R(k,D,L,j){this.months=(0,u.assertNumberOrInteger)(k,"Months"),this.days=(0,u.assertNumberOrInteger)(D,"Days"),(0,u.assertNumberOrInteger)(L,"Seconds"),(0,u.assertNumberOrInteger)(j,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(L,j),this.nanoseconds=s.normalizeNanosecondsForDuration(j),Object.freeze(this)}return R.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},R})();e.Duration=b,Object.defineProperty(b.prototype,h,f),e.isDuration=function(R){return O(R,h)};var g=(function(){function R(k,D,L,j){this.hour=s.assertValidHour(k),this.minute=s.assertValidMinute(D),this.second=s.assertValidSecond(L),this.nanosecond=s.assertValidNanosecond(j),Object.freeze(this)}return R.fromStandardDate=function(k,D){A(k,D);var L=s.totalNanoseconds(k,D);return new R(k.getHours(),k.getMinutes(),k.getSeconds(),L instanceof c.default?L.toInt():typeof L=="bigint"?(0,c.int)(L).toInt():L)},R.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},R})();e.LocalTime=g,Object.defineProperty(g.prototype,d,f),e.isLocalTime=function(R){return O(R,d)};var _=(function(){function R(k,D,L,j,q){this.hour=s.assertValidHour(k),this.minute=s.assertValidMinute(D),this.second=s.assertValidSecond(L),this.nanosecond=s.assertValidNanosecond(j),this.timeZoneOffsetSeconds=(0,u.assertNumberOrInteger)(q,"Time zone offset in seconds"),Object.freeze(this)}return R.fromStandardDate=function(k,D){return A(k,D),new R(k.getHours(),k.getMinutes(),k.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(k,D)),s.timeZoneOffsetInSeconds(k))},R.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},R})();e.Time=_,Object.defineProperty(_.prototype,v,f),e.isTime=function(R){return O(R,v)};var w=(function(){function R(k,D,L){this.year=s.assertValidYear(k),this.month=s.assertValidMonth(D),this.day=s.assertValidDay(L),Object.freeze(this)}return R.fromStandardDate=function(k){return A(k),new R(k.getFullYear(),k.getMonth()+1,k.getDate())},R.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},R.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},R})();e.Date=w,Object.defineProperty(w.prototype,p,f),e.isDate=function(R){return O(R,p)};var x=(function(){function R(k,D,L,j,q,B,U){this.year=s.assertValidYear(k),this.month=s.assertValidMonth(D),this.day=s.assertValidDay(L),this.hour=s.assertValidHour(j),this.minute=s.assertValidMinute(q),this.second=s.assertValidSecond(B),this.nanosecond=s.assertValidNanosecond(U),Object.freeze(this)}return R.fromStandardDate=function(k,D){return A(k,D),new R(k.getFullYear(),k.getMonth()+1,k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(k,D)))},R.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},R.prototype.toString=function(){return C(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},R})();e.LocalDateTime=x,Object.defineProperty(x.prototype,m,f),e.isLocalDateTime=function(R){return O(R,m)};var E=(function(){function R(k,D,L,j,q,B,U,W,H){this.year=s.assertValidYear(k),this.month=s.assertValidMonth(D),this.day=s.assertValidDay(L),this.hour=s.assertValidHour(j),this.minute=s.assertValidMinute(q),this.second=s.assertValidSecond(B),this.nanosecond=s.assertValidNanosecond(U);var Y=a((function($,K){var ie=$!=null,ae=K!=null&&K!=="";if(!ie&&!ae)throw(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat($," and id: ").concat(K));var le=[void 0,void 0];return ie&&((0,u.assertNumberOrInteger)($,"Time zone offset in seconds"),le[0]=$),ae&&((0,u.assertString)(K,"Time zone ID"),s.assertValidZoneId("Time zone ID",K),le[1]=K),le})(W,H),2),Z=Y[0],ce=Y[1];this.timeZoneOffsetSeconds=Z,this.timeZoneId=ce??void 0,Object.freeze(this)}return R.fromStandardDate=function(k,D){return A(k,D),new R(k.getFullYear(),k.getMonth()+1,k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(k,D)),s.timeZoneOffsetInSeconds(k),null)},R.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},R.prototype.toString=function(){var k;return C(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneOffsetSeconds!=null?s.timeZoneOffsetToIsoString((k=this.timeZoneOffsetSeconds)!==null&&k!==void 0?k:0):"")+(this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"")},R.prototype._toUTC=function(){var k;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var D=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract((k=this.timeZoneOffsetSeconds)!==null&&k!==void 0?k:0);return(0,c.int)(D).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},R})();function O(R,k){return R!=null&&R[k]===!0}function C(R,k,D,L,j,q,B){return s.dateToIsoString(R,k,D)+"T"+s.timeToIsoString(L,j,q,B)}function A(R,k){(0,u.assertValidDate)(R,"Standard date"),k!=null&&(0,u.assertNumberOrInteger)(k,"Nanosecond")}e.DateTime=E,Object.defineProperty(E.prototype,y,f),e.isDateTime=function(R){return O(R,y)}},5471:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;var n=t(7843),i=t(3111);e.map=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){u.next(o.call(a,c,l++))}))})}},5477:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.window=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(1342),s=t(9445);e.window=function(u){return i.operate(function(l,c){var f=new n.Subject;c.next(f.asObservable());var h=function(d){f.error(d),c.error(d)};return l.subscribe(o.createOperatorSubscriber(c,function(d){return f==null?void 0:f.next(d)},function(){f.complete(),c.complete()},h)),s.innerFrom(u).subscribe(o.createOperatorSubscriber(c,function(){f.complete(),c.next(f=new n.Subject)},a.noop,h)),function(){f==null||f.unsubscribe(),f=null}})}},5481:function(r,e,t){var n=this&&this.__awaiter||function(w,x,E,O){return new(E||(E=Promise))(function(C,A){function R(L){try{D(O.next(L))}catch(j){A(j)}}function k(L){try{D(O.throw(L))}catch(j){A(j)}}function D(L){var j;L.done?C(L.value):(j=L.value,j instanceof E?j:new E(function(q){q(j)})).then(R,k)}D((O=O.apply(w,x||[])).next())})},i=this&&this.__generator||function(w,x){var E,O,C,A,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return A={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function k(D){return function(L){return(function(j){if(E)throw new TypeError("Generator is already executing.");for(;A&&(A=0,j[0]&&(R=0)),R;)try{if(E=1,O&&(C=2&j[0]?O.return:j[0]?O.throw||((C=O.return)&&C.call(O),0):O.next)&&!(C=C.call(O,j[1])).done)return C;switch(O=0,C&&(j=[2&j[0],C.value]),j[0]){case 0:case 1:C=j;break;case 4:return R.label++,{value:j[1],done:!1};case 5:R.label++,O=j[1],j=[0];continue;case 7:j=R.ops.pop(),R.trys.pop();continue;default:if(!((C=(C=R.trys).length>0&&C[C.length-1])||j[0]!==6&&j[0]!==2)){R=0;continue}if(j[0]===3&&(!C||j[1]>C[0]&&j[1]<C[3])){R.label=j[1];break}if(j[0]===6&&R.label<C[1]){R.label=C[1],C=j;break}if(C&&R.label<C[2]){R.label=C[2],R.ops.push(j);break}C[2]&&R.ops.pop(),R.trys.pop();continue}j=x.call(w,R)}catch(q){j=[6,q],O=0}finally{E=C=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}})([D,L])}}},o=this&&this.__read||function(w,x){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var O,C,A=E.call(w),R=[];try{for(;(x===void 0||x-- >0)&&!(O=A.next()).done;)R.push(O.value)}catch(k){C={error:k}}finally{try{O&&!O.done&&(E=A.return)&&E.call(A)}finally{if(C)throw C.error}}return R},a=this&&this.__spreadArray||function(w,x,E){if(E||arguments.length===2)for(var O,C=0,A=x.length;C<A;C++)!O&&C in x||(O||(O=Array.prototype.slice.call(x,0,C)),O[C]=x[C]);return w.concat(O||Array.prototype.slice.call(x))},s=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(2696),l=t(6587),c=t(326),f=t(9691),h=s(t(9512)),d=t(3618),v=t(6189),p=t(9730),m=t(754),y=s(t(4569)),b=s(t(5909)),g=t(6030),_=(function(){function w(x){var E,O=x.mode,C=x.connectionProvider,A=x.bookmarks,R=x.database,k=x.config,D=x.reactive,L=x.fetchSize,j=x.impersonatedUser,q=x.bookmarkManager,B=x.notificationFilter,U=x.auth,W=x.log,H=x.homeDatabaseCallback;this._mode=O,this._database=R,this._reactive=D,this._fetchSize=L,this._homeDatabaseCallback=H,this._auth=U,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:U,database:R,bookmarks:A,connectionProvider:C,impersonatedUser:j,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:W}),this._writeConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:U,database:R,bookmarks:A,connectionProvider:C,impersonatedUser:j,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:W}),this._open=!0,this._hasTx=!1,this._impersonatedUser=j,this._lastBookmarks=A??p.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=(function(Z){var ce,$=(ce=Z==null?void 0:Z.maxTransactionRetryTime)!==null&&ce!==void 0?ce:null;return new v.TransactionExecutor($)})(k),this._databaseNameResolved=this._database!=="";var Y=this._calculateWatermaks();this._lowRecordWatermark=Y.low,this._highRecordWatermark=Y.high,this._results=[],this._bookmarkManager=q,this._notificationFilter=B,this._log=W,this._databaseGuess=k==null?void 0:k.cachedHomeDatabase,this._isRoutingSession=(E=k==null?void 0:k.routingDriver)!==null&&E!==void 0&&E}return w.prototype.run=function(x,E,O){var C=this,A=(0,l.validateQueryAndParameters)(x,E),R=A.validatedQuery,k=A.params,D=O!=null?new m.TxConfig(O,this._log):m.TxConfig.empty(),L=this._run(R,k,function(j){return n(C,void 0,void 0,function(){var q,B=this;return i(this,function(U){switch(U.label){case 0:return[4,this._bookmarks()];case 1:return q=U.sent(),this._assertSessionIsOpen(),[2,j.run(R,k,{bookmarks:q,txConfig:D,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(W){return B._onCompleteCallback(W,q)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(L),L},w.prototype._run=function(x,E,O){var C=this._acquireAndConsumeConnection(O),A=C.connectionHolder,R=C.resultPromise.catch(function(D){return Promise.resolve(new u.FailedObserver({error:D}))}),k={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new h.default(R,x,E,A,k)},w.prototype._acquireConnection=function(x){var E=this,O=this._acquireAndConsumeConnection(x),C=O.connectionHolder;return O.resultPromise.then(function(A){return n(E,void 0,void 0,function(){return i(this,function(R){switch(R.label){case 0:return[4,C.releaseConnection()];case 1:return R.sent(),[2,A]}})})})},w.prototype._acquireAndConsumeConnection=function(x){var E,O=this._connectionHolderWithMode(this._mode);return E=this._open?!this._hasTx&&O.initializeConnection(this._databaseGuess)?O.getConnection().then(function(C){return x(C)}):Promise.reject((0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,f.newError)("Cannot run query in a closed session.")),{connectionHolder:O,resultPromise:E}},w.prototype.beginTransaction=function(x){var E=x,O=m.TxConfig.empty();return E!=null&&(O=new m.TxConfig(E,this._log)),this._beginTransaction(this._mode,O,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},w.prototype._beginTransaction=function(x,E,O){var C=this;if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var A=w._validateSessionMode(x),R=this._connectionHolderWithMode(A);R.initializeConnection(this._databaseGuess),this._hasTx=!0;var k=new y.default({connectionHolder:R,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(D,L,j){return C._updateBookmarks(D,L,j)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:O,onDbCallback:this._onDatabaseNameResolved.bind(this)});return k._begin(function(){return C._bookmarks()},E),k},w.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")},w.prototype._transactionClosed=function(){this._hasTx=!1},w.prototype.lastBookmark=function(){return this.lastBookmarks()},w.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},w.prototype._bookmarks=function(){var x;return n(this,void 0,void 0,function(){var E;return i(this,function(O){switch(O.label){case 0:return[4,(x=this._bookmarkManager)===null||x===void 0?void 0:x.getBookmarks()];case 1:return(E=O.sent())===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(a(a([],o(E),!1),o(this._configuredBookmarks),!1))]}})})},w.prototype.readTransaction=function(x,E){var O=new m.TxConfig(E,this._log);return this._runTransaction(c.ACCESS_MODE_READ,O,x)},w.prototype.writeTransaction=function(x,E){var O=new m.TxConfig(E,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,O,x)},w.prototype._runTransaction=function(x,E,O){var C=this;return this._transactionExecutor.execute(function(A){return C._beginTransaction(x,E,A)},O)},w.prototype.executeRead=function(x,E){var O=new m.TxConfig(E,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,O,x)},w.prototype.executeWrite=function(x,E){var O=new m.TxConfig(E,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,O,x)},w.prototype._executeInTransaction=function(x,E,O){var C=this;return this._transactionExecutor.execute(function(A){return C._beginTransaction(x,E,A)},O,b.default.fromTransaction)},w.prototype._onDatabaseNameResolved=function(x){if(this._isRoutingSession&&(this._databaseGuess=x,!this._databaseNameResolved)){var E=x??"";this._database=E,this._readConnectionHolder.setDatabase(E),this._writeConnectionHolder.setDatabase(E),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,g.cacheKey)(this._auth,this._impersonatedUser),x)}},w.prototype._getConnectionAcquistionBookmarks=function(){var x;return n(this,void 0,void 0,function(){var E;return i(this,function(O){switch(O.label){case 0:return[4,(x=this._bookmarkManager)===null||x===void 0?void 0:x.getBookmarks()];case 1:return(E=O.sent())===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(a(a([],o(this._configuredBookmarks),!1),o(E),!1))]}})})},w.prototype._updateBookmarks=function(x,E,O){var C,A,R;x==null||x.isEmpty()||((C=this._bookmarkManager)===null||C===void 0||C.updateBookmarks((A=E==null?void 0:E.values())!==null&&A!==void 0?A:[],(R=x==null?void 0:x.values())!==null&&R!==void 0?R:[]).catch(function(){}),this._lastBookmarks=x,this._configuredBookmarks=p.Bookmarks.empty())},w.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(x){switch(x.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(E){return E._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return x.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:x.sent(),x.label=3;case 3:return[2]}})})},w.prototype[Symbol.asyncDispose]=function(){return this.close()},w.prototype._connectionHolderWithMode=function(x){if(x===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(x===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+x)},w.prototype._onCompleteCallback=function(x,E){this._updateBookmarks(new p.Bookmarks(x.bookmark),E,x.db)},w.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},w.prototype._configureTransactionExecutor=function(x,E){this._transactionExecutor.pipelineBegin=x,this._transactionExecutor.telemetryApi=E},w._validateSessionMode=function(x){var E=x??c.ACCESS_MODE_WRITE;if(E!==c.ACCESS_MODE_READ&&E!==c.ACCESS_MODE_WRITE)throw(0,f.newError)("Illegal session mode "+E);return E},w})();e.default=_},5510:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.every=void 0;var n=t(7843),i=t(3111);e.every=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){o.call(a,c,l++,s)||(u.next(!1),u.complete())},function(){u.next(!0),u.complete()}))})}},5553:function(r,e,t){var n=this&&this.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(e,"__esModule",{value:!0});var i=t(7174),o=t(5319),a=(function(s){function u(l){for(var c=this,f=0,h=0;h<l.length;h++)f+=l[h].length;return(c=s.call(this,f)||this)._buffers=l,c}return n(u,s),u.prototype.getUInt8=function(l){for(var c=0;c<this._buffers.length;c++){var f=this._buffers[c];if(!(l>=f.length))return f.getUInt8(l);l-=f.length}},u.prototype.getInt8=function(l){for(var c=0;c<this._buffers.length;c++){var f=this._buffers[c];if(!(l>=f.length))return f.getInt8(l);l-=f.length}},u.prototype.getFloat64=function(l){for(var c=(0,o.alloc)(8),f=0;f<8;f++)c.putUInt8(f,this.getUInt8(l+f));return c.getFloat64(0)},u})(i.BaseBuffer);e.default=a},5568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorClass=void 0,e.createErrorClass=function(t){var n=t(function(i){Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}},5572:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=void 0;var i=t(7843),o=t(3111),a=t(7479);e.bufferCount=function(s,u){return u===void 0&&(u=null),u=u??s,i.operate(function(l,c){var f=[],h=0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v,p,m,y,b=null;h++%u===0&&f.push([]);try{for(var g=n(f),_=g.next();!_.done;_=g.next())(E=_.value).push(d),s<=E.length&&(b=b??[]).push(E)}catch(O){v={error:O}}finally{try{_&&!_.done&&(p=g.return)&&p.call(g)}finally{if(v)throw v.error}}if(b)try{for(var w=n(b),x=w.next();!x.done;x=w.next()){var E=x.value;a.arrRemove(f,E),c.next(E)}}catch(O){m={error:O}}finally{try{x&&!x.done&&(y=w.return)&&y.call(w)}finally{if(m)throw m.error}}},function(){var d,v;try{for(var p=n(f),m=p.next();!m.done;m=p.next()){var y=m.value;c.next(y)}}catch(b){d={error:b}}finally{try{m&&!m.done&&(v=p.return)&&v.call(p)}finally{if(d)throw d.error}}c.complete()},void 0,function(){f=null}))})}},5584:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raceInit=e.race=void 0;var n=t(4662),i=t(9445),o=t(8535),a=t(3111);function s(u){return function(l){for(var c=[],f=function(d){c.push(i.innerFrom(u[d]).subscribe(a.createOperatorSubscriber(l,function(v){if(c){for(var p=0;p<c.length;p++)p!==d&&c[p].unsubscribe();c=null}l.next(v)})))},h=0;c&&!l.closed&&h<u.length;h++)f(h)}}e.race=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return(u=o.argsOrArgArray(u)).length===1?i.innerFrom(u[0]):new n.Observable(s(u))},e.raceInit=s},5592:(r,e,t)=>{var n=t(7192);n=n.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),r.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},5600:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.raceWith=void 0;var o=t(5584),a=t(7843),s=t(6640);e.raceWith=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.length?a.operate(function(c,f){o.raceInit(i([c],n(u)))(f)}):s.identity}},5636:(r,e,t)=>{var n=t(1048),i=n.Buffer;function o(s,u){for(var l in s)u[l]=s[l]}function a(s,u,l){return i(s,u,l)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(s,u,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,u,l)},a.alloc=function(s,u,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return u!==void 0?typeof l=="string"?c.fill(u,l):c.fill(u):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},5642:function(r,e,t){var n=this&&this.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(x[O]=E[O])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function x(){this.constructor=_}g(_,w),_.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(g){for(var _,w=1,x=arguments.length;w<x;w++)for(var E in _=arguments[w])Object.prototype.hasOwnProperty.call(_,E)&&(g[E]=_[E]);return g},i.apply(this,arguments)},o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(2857)),s=o(t(7021)),u=t(397),l=t(9014),c=o(t(1175)),f=o(t(3321)),h=t(9305),d=(h.internal.bookmarks.Bookmarks,h.internal.constants.BOLT_PROTOCOL_V3),v=h.internal.txConfig.TxConfig,p="context",m="CALL dbms.cluster.routing.getRoutingTable($".concat(p,")"),y=new l.StreamObserver,b=(function(g){function _(){return g!==null&&g.apply(this,arguments)||this}return n(_,g),Object.defineProperty(_.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(x){return x(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.transformMetadata=function(w){return"t_first"in w&&(w.result_available_after=w.t_first,delete w.t_first),"t_last"in w&&(w.result_consumed_after=w.t_last,delete w.t_last),w},_.prototype.initialize=function(w){var x=this,E=w===void 0?{}:w,O=E.userAgent,C=(E.boltAgent,E.authToken),A=E.notificationFilter,R=E.onError,k=E.onComplete,D=new l.LoginObserver({onError:function(L){return x._onLoginError(L,R)},onCompleted:function(L){return x._onLoginCompleted(L,C,k)}});return(0,u.assertNotificationFilterIsEmpty)(A,this._onProtocolError,D),this.write(s.default.hello(O,C),D,!0),D},_.prototype.prepareToClose=function(){this.write(s.default.goodbye(),y,!0)},_.prototype.beginTransaction=function(w){var x=w===void 0?{}:w,E=x.bookmarks,O=x.txConfig,C=x.database,A=x.impersonatedUser,R=x.notificationFilter,k=x.mode,D=x.beforeError,L=x.afterError,j=x.beforeComplete,q=x.afterComplete,B=new l.ResultStreamObserver({server:this._server,beforeError:D,afterError:L,beforeComplete:j,afterComplete:q});return B.prepareToHandleSingleResponse(),(0,u.assertDatabaseIsEmpty)(C,this._onProtocolError,B),(0,u.assertImpersonatedUserIsEmpty)(A,this._onProtocolError,B),(0,u.assertNotificationFilterIsEmpty)(R,this._onProtocolError,B),this.write(s.default.begin({bookmarks:E,txConfig:O,mode:k}),B,!0),B},_.prototype.commitTransaction=function(w){var x=w===void 0?{}:w,E=x.beforeError,O=x.afterError,C=x.beforeComplete,A=x.afterComplete,R=new l.ResultStreamObserver({server:this._server,beforeError:E,afterError:O,beforeComplete:C,afterComplete:A});return R.prepareToHandleSingleResponse(),this.write(s.default.commit(),R,!0),R},_.prototype.rollbackTransaction=function(w){var x=w===void 0?{}:w,E=x.beforeError,O=x.afterError,C=x.beforeComplete,A=x.afterComplete,R=new l.ResultStreamObserver({server:this._server,beforeError:E,afterError:O,beforeComplete:C,afterComplete:A});return R.prepareToHandleSingleResponse(),this.write(s.default.rollback(),R,!0),R},_.prototype.run=function(w,x,E){var O=E===void 0?{}:E,C=O.bookmarks,A=O.txConfig,R=O.database,k=O.impersonatedUser,D=O.notificationFilter,L=O.mode,j=O.beforeKeys,q=O.afterKeys,B=O.beforeError,U=O.afterError,W=O.beforeComplete,H=O.afterComplete,Y=O.flush,Z=Y===void 0||Y,ce=O.highRecordWatermark,$=ce===void 0?Number.MAX_VALUE:ce,K=O.lowRecordWatermark,ie=K===void 0?Number.MAX_VALUE:K,ae=new l.ResultStreamObserver({server:this._server,beforeKeys:j,afterKeys:q,beforeError:B,afterError:U,beforeComplete:W,afterComplete:H,highRecordWatermark:$,lowRecordWatermark:ie});return(0,u.assertDatabaseIsEmpty)(R,this._onProtocolError,ae),(0,u.assertImpersonatedUserIsEmpty)(k,this._onProtocolError,ae),(0,u.assertNotificationFilterIsEmpty)(D,this._onProtocolError,ae),this.write(s.default.runWithMetadata(w,x,{bookmarks:C,txConfig:A,mode:L}),ae,!1),this.write(s.default.pullAll(),ae,Z),ae},_.prototype.requestRoutingInformation=function(w){var x,E=w.routingContext,O=E===void 0?{}:E,C=w.sessionContext,A=C===void 0?{}:C,R=w.onError,k=w.onCompleted,D=this.run(m,((x={})[p]=O,x),i(i({},A),{txConfig:v.empty()}));return new l.ProcedureRouteObserver({resultObserver:D,onProtocolError:this._onProtocolError,onError:R,onCompleted:k})},_})(a.default);e.default=b},5648:function(r,e,t){var n=this&&this.__extends||(function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScheduler=void 0;var i=t(8986),o=(function(a){function s(u,l){l===void 0&&(l=i.Scheduler.now);var c=a.call(this,u,l)||this;return c.actions=[],c._active=!1,c}return n(s,a),s.prototype.flush=function(u){var l=this.actions;if(this._active)l.push(u);else{var c;this._active=!0;do if(c=u.execute(u.state,u.delay))break;while(u=l.shift());if(this._active=!1,c){for(;u=l.shift();)u.unsubscribe();throw c}}},s})(i.Scheduler);e.AsyncScheduler=o},5649:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,n([i,o],t(a))):setInterval.apply(void 0,n([i,o],t(a)))},clearInterval:function(i){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(i)},delegate:void 0}},5742:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=n(t(3057)),a=(n(t(9305)),(function(){function s(u){this._txc=u}return s.prototype.run=function(u,l){var c=this;return new o.default(new i.Observable(function(f){try{f.next(c._txc.run(u,l)),f.complete()}catch(h){f.error(h)}return function(){}}))},s.prototype.commit=function(){var u=this;return new i.Observable(function(l){u._txc.commit().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.rollback=function(){var u=this;return new i.Observable(function(l){u._txc.rollback().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.isOpen=function(){return this._txc.isOpen()},s.prototype.close=function(){var u=this;return new i.Observable(function(l){u._txc.close().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s})());e.default=a},5788:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscriptionError=void 0;var n=t(5568);e.UnsubscriptionError=n.createErrorClass(function(i){return function(o){i(this),this.message=o?o.length+` errors occurred during unsubscription:
`+o.map(function(a,s){return s+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=o}})},5815:function(r,e,t){var n=this&&this.__extends||(function(){var m=function(y,b){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},m(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function g(){this.constructor=y}m(y,b),y.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(m){for(var y,b=1,g=arguments.length;b<g;b++)for(var _ in y=arguments[b])Object.prototype.hasOwnProperty.call(y,_)&&(m[_]=y[_]);return m},i.apply(this,arguments)},o=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(9744)),s=o(t(9238)),u=o(t(3321)),l=o(t(7021)),c=t(9014),f=t(9305).internal.constants,h=f.BOLT_PROTOCOL_V5_5,d=f.FETCH_ALL,v=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),p=(function(m){function y(){return m!==null&&m.apply(this,arguments)||this}return n(y,m),Object.defineProperty(y.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(g){return g(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(b){var g=this,_=b===void 0?{}:b,w=_.userAgent,x=_.boltAgent,E=_.authToken,O=_.notificationFilter,C=_.onError,A=_.onComplete,R={},k=new c.LoginObserver({onError:function(D){return g._onLoginError(D,C)},onCompleted:function(D){return R.metadata=D,g._onLoginCompleted(D)}});return this.write(l.default.hello5x5(w,x,O,this._serversideRouting),k,!1),this.logon({authToken:E,onComplete:function(D){return A(i(i({},D),R.metadata))},onError:C,flush:!0})},y.prototype.beginTransaction=function(b){var g=b===void 0?{}:b,_=g.bookmarks,w=g.txConfig,x=g.database,E=g.mode,O=g.impersonatedUser,C=g.notificationFilter,A=g.beforeError,R=g.afterError,k=g.beforeComplete,D=g.afterComplete,L=new c.ResultStreamObserver({server:this._server,beforeError:A,afterError:R,beforeComplete:k,afterComplete:D});return L.prepareToHandleSingleResponse(),this.write(l.default.begin5x5({bookmarks:_,txConfig:w,database:x,mode:E,impersonatedUser:O,notificationFilter:C}),L,!0),L},y.prototype.run=function(b,g,_){var w=_===void 0?{}:_,x=w.bookmarks,E=w.txConfig,O=w.database,C=w.mode,A=w.impersonatedUser,R=w.notificationFilter,k=w.beforeKeys,D=w.afterKeys,L=w.beforeError,j=w.afterError,q=w.beforeComplete,B=w.afterComplete,U=w.flush,W=U===void 0||U,H=w.reactive,Y=H!==void 0&&H,Z=w.fetchSize,ce=Z===void 0?d:Z,$=w.highRecordWatermark,K=$===void 0?Number.MAX_VALUE:$,ie=w.lowRecordWatermark,ae=ie===void 0?Number.MAX_VALUE:ie,le=new c.ResultStreamObserver({server:this._server,reactive:Y,fetchSize:ce,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:k,afterKeys:D,beforeError:L,afterError:j,beforeComplete:q,afterComplete:B,highRecordWatermark:K,lowRecordWatermark:ae,enrichMetadata:this._enrichMetadata}),te=Y;return this.write(l.default.runWithMetadata5x5(b,g,{bookmarks:x,txConfig:E,database:O,mode:C,impersonatedUser:A,notificationFilter:R}),le,te&&W),Y||this.write(l.default.pull({n:ce}),le,W),le},y.prototype._enrichMetadata=function(b){return Array.isArray(b.statuses)&&(b.statuses=b.statuses.map(function(g){return i(i({},g),{description:g.neo4j_code!=null?g.status_description:g.description,diagnostic_record:g.diagnostic_record!==null?i(i({},v),g.diagnostic_record):null})})),b},y})(a.default);e.default=p},5837:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,n){n===void 0&&(n=function(){return{get userAgent(){}}});var i=n(),o=i.userAgent!=null?i.userAgent.split("(")[1].split(")")[0]:void 0,a=i.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:o,languageDetails:a}}},5880:function(r,e,t){var n,i;n=function(){var o=function(){},a="undefined",s=typeof window!==a&&typeof window.navigator!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],l={},c=null;function f(b,g){var _=b[g];if(typeof _.bind=="function")return _.bind(b);try{return Function.prototype.bind.call(_,b)}catch{return function(){return Function.prototype.apply.apply(_,[b,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(){for(var b=this.getLevel(),g=0;g<u.length;g++){var _=u[g];this[_]=g<b?o:this.methodFactory(_,b,this.name)}if(this.log=this.debug,typeof console===a&&b<this.levels.SILENT)return"No console available for logging"}function v(b){return function(){typeof console!==a&&(d.call(this),this[b].apply(this,arguments))}}function p(b,g,_){return(function(w){return w==="debug"&&(w="log"),typeof console!==a&&(w==="trace"&&s?h:console[w]!==void 0?f(console,w):console.log!==void 0?f(console,"log"):o)})(b)||v.apply(this,arguments)}function m(b,g){var _,w,x,E=this,O="loglevel";function C(){var k;if(typeof window!==a&&O){try{k=window.localStorage[O]}catch{}if(typeof k===a)try{var D=window.document.cookie,L=encodeURIComponent(O),j=D.indexOf(L+"=");j!==-1&&(k=/^([^;]+)/.exec(D.slice(j+L.length+1))[1])}catch{}return E.levels[k]===void 0&&(k=void 0),k}}function A(k){var D=k;if(typeof D=="string"&&E.levels[D.toUpperCase()]!==void 0&&(D=E.levels[D.toUpperCase()]),typeof D=="number"&&D>=0&&D<=E.levels.SILENT)return D;throw new TypeError("log.setLevel() called with invalid level: "+k)}typeof b=="string"?O+=":"+b:typeof b=="symbol"&&(O=void 0),E.name=b,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=g||p,E.getLevel=function(){return x??w??_},E.setLevel=function(k,D){return x=A(k),D!==!1&&(function(L){var j=(u[L]||"silent").toUpperCase();if(typeof window!==a&&O){try{return void(window.localStorage[O]=j)}catch{}try{window.document.cookie=encodeURIComponent(O)+"="+j+";"}catch{}}})(x),d.call(E)},E.setDefaultLevel=function(k){w=A(k),C()||E.setLevel(k,!1)},E.resetLevel=function(){x=null,(function(){if(typeof window!==a&&O){try{window.localStorage.removeItem(O)}catch{}try{window.document.cookie=encodeURIComponent(O)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}})(),d.call(E)},E.enableAll=function(k){E.setLevel(E.levels.TRACE,k)},E.disableAll=function(k){E.setLevel(E.levels.SILENT,k)},E.rebuild=function(){if(c!==E&&(_=A(c.getLevel())),d.call(E),c===E)for(var k in l)l[k].rebuild()},_=A(c?c.getLevel():"WARN");var R=C();R!=null&&(x=A(R)),d.call(E)}(c=new m).getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var g=l[b];return g||(g=l[b]=new m(b,c.methodFactory)),g};var y=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=y),c},c.getLoggers=function(){return l},c.default=c,c},(i=n.call(e,t,e,r))===void 0||(r.exports=i)},5909:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function n(i){var o=i.run;this._run=o}return n.fromTransaction=function(i){return new n({run:i.run.bind(i)})},n.prototype.run=function(i,o){return this._run(i,o)},n})();e.default=t},5918:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(7286),a=t(7843);e.zip=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.operate(function(l,c){o.zip.apply(void 0,i([l],n(s))).subscribe(c)})}},5973:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var n=t(9305),i=n.internal.temporalUtil,o=i.DAYS_0000_TO_1970,a=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,u=i.NANOS_PER_MINUTE,l=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,f=i.floorDiv,h=i.floorMod;function d(p){var m=(p=(0,n.int)(p)).add(o).subtract(60),y=(0,n.int)(0);if(m.lessThan(0)){var b=m.add(1).div(a).subtract(1);y=b.multiply(400),m=m.add(b.multiply(-a))}var g=m.multiply(400).add(591).div(a),_=m.subtract(g.multiply(365).add(g.div(4)).subtract(g.div(100)).add(g.div(400)));_.lessThan(0)&&(g=g.subtract(1),_=m.subtract(g.multiply(365).add(g.div(4)).subtract(g.div(100)).add(g.div(400)))),g=g.add(y);var w=_,x=w.multiply(5).add(2).div(153),E=x.add(2).modulo(12).add(1),O=w.subtract(x.multiply(306).add(5).div(10)).add(1);return g=g.add(x.div(10)),new n.Date(g,E,O)}function v(p){var m=(p=(0,n.int)(p)).div(s),y=(p=p.subtract(m.multiply(s))).div(u),b=(p=p.subtract(y.multiply(u))).div(l),g=p.subtract(b.multiply(l));return new n.LocalTime(m,y,b,g)}e.epochDayToDate=d,e.nanoOfDayToLocalTime=v,e.epochSecondAndNanoToLocalDateTime=function(p,m){var y=f(p,c),b=h(p,c).multiply(l).add(m),g=d(y),_=v(b);return new n.LocalDateTime(g.year,g.month,g.day,_.hour,_.minute,_.second,_.nanosecond)}},6013:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObject=void 0,e.createObject=function(t,n){return t.reduce(function(i,o,a){return i[o]=n[a],i},{})}},6030:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cacheKey=void 0;var n=t(4027);e.cacheKey=function(i,o){var a;return o!=null?"basic:"+o:i===void 0?"DEFAULT":i.scheme==="basic"?"basic:"+((a=i.principal)!==null&&a!==void 0?a:""):i.scheme==="kerberos"?"kerberos:"+i.credentials:i.scheme==="bearer"?"bearer:"+i.credentials:i.scheme==="none"?"none":(0,n.stringify)(i,{sortedElements:!0})}},6033:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var n=t(6995),i=t(1866),o=(function(){function f(h,d,v,p){var m,y,b;this.query={text:h,parameters:d},this.queryType=v.type,this.counters=new u((m=v.stats)!==null&&m!==void 0?m:{}),this.updateStatistics=this.counters,this.plan=(v.plan!=null||v.profile!=null)&&new a((y=v.plan)!==null&&y!==void 0?y:v.profile),this.profile=v.profile!=null&&new s(v.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(v),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(v),this.server=new l(v.server,p),this.resultConsumedAfter=v.result_consumed_after,this.resultAvailableAfter=v.result_available_after,this.database={name:(b=v.db)!==null&&b!==void 0?b:null}}return f.prototype.hasPlan=function(){return this.plan instanceof a},f.prototype.hasProfile=function(){return this.profile instanceof s},f})(),a=function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]};e.Plan=a;var s=(function(){function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.dbHits=c("dbHits",h),this.rows=c("rows",h),this.pageCacheMisses=c("pageCacheMisses",h),this.pageCacheHits=c("pageCacheHits",h),this.pageCacheHitRatio=c("pageCacheHitRatio",h),this.time=c("time",h),this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]}return f.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},f})();e.ProfiledPlan=s,e.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var u=(function(){function f(h){var d=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(h).forEach(function(v){var p=v.replace(/(-\w)/g,function(m){return m[1].toUpperCase()});p in d._stats?d._stats[p]=n.util.toNumber(h[v]):p==="systemUpdates"?d._systemUpdates=n.util.toNumber(h[v]):p==="containsSystemUpdates"?d._containsSystemUpdates=h[v]:p==="containsUpdates"&&(d._containsUpdates=h[v])}),this._stats=Object.freeze(this._stats)}return f.prototype.containsUpdates=function(){var h=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(d,v){return d+h._stats[v]},0)>0},f.prototype.updates=function(){return this._stats},f.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},f.prototype.systemUpdates=function(){return this._systemUpdates},f})();e.QueryStatistics=u;var l=function(f,h){f!=null&&(this.address=f.address,this.agent=f.version),this.protocolVersion=h};function c(f,h,d){if(d===void 0&&(d=0),h!==!1&&f in h){var v=h[f];return n.util.toNumber(v)}return d}e.ServerInfo=l,e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=o},6038:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},6086:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=void 0;var n=t(7961),i=t(1731),o=t(6472);e.sampleTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.sample(o.interval(a,s))}},6102:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=void 0;var n=t(4662),i=t(8535),o=t(3111),a=t(1342),s=t(9445);e.onErrorResumeNext=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=i.argsOrArgArray(u);return new n.Observable(function(f){var h=0,d=function(){if(h<c.length){var v=void 0;try{v=s.innerFrom(c[h++])}catch{return void d()}var p=new o.OperatorSubscriber(f,void 0,a.noop,a.noop);v.subscribe(p),p.add(d)}else f.complete()};d()})}},6106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=void 0;var n=t(95),i=t(8918);e.publishLast=function(){return function(o){var a=new n.AsyncSubject;return new i.ConnectableObservable(o,function(){return a})}}},6161:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(6248));e.default=n({},o.default)},6189:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(v){for(var p,m=1,y=arguments.length;m<y;m++)for(var b in p=arguments[m])Object.prototype.hasOwnProperty.call(p,b)&&(v[b]=p[b]);return v},n.apply(this,arguments)},i=this&&this.__awaiter||function(v,p,m,y){return new(m||(m=Promise))(function(b,g){function _(E){try{x(y.next(E))}catch(O){g(O)}}function w(E){try{x(y.throw(E))}catch(O){g(O)}}function x(E){var O;E.done?b(E.value):(O=E.value,O instanceof m?O:new m(function(C){C(O)})).then(_,w)}x((y=y.apply(v,p||[])).next())})},o=this&&this.__generator||function(v,p){var m,y,b,g,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(x){return function(E){return(function(O){if(m)throw new TypeError("Generator is already executing.");for(;g&&(g=0,O[0]&&(_=0)),_;)try{if(m=1,y&&(b=2&O[0]?y.return:O[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,O[1])).done)return b;switch(y=0,b&&(O=[2&O[0],b.value]),O[0]){case 0:case 1:b=O;break;case 4:return _.label++,{value:O[1],done:!1};case 5:_.label++,y=O[1],O=[0];continue;case 7:O=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||O[0]!==6&&O[0]!==2)){_=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){_.label=O[1];break}if(O[0]===6&&_.label<b[1]){_.label=b[1],b=O;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(O);break}b[2]&&_.ops.pop(),_.trys.pop();continue}O=p.call(v,_)}catch(C){O=[6,C],y=0}finally{m=b=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}})([x,E])}}},a=this&&this.__read||function(v,p){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var y,b,g=m.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=g.next()).done;)_.push(y.value)}catch(w){b={error:w}}finally{try{y&&!y.done&&(m=g.return)&&m.call(g)}finally{if(b)throw b.error}}return _},s=this&&this.__spreadArray||function(v,p,m){if(m||arguments.length===2)for(var y,b=0,g=p.length;b<g;b++)!y&&b in p||(y||(y=Array.prototype.slice.call(p,0,b)),y[b]=p[b]);return v.concat(y||Array.prototype.slice.call(p))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var u=t(9691),l=t(326);function c(v,p){for(var m=[],y=2;y<arguments.length;y++)m[y-2]=arguments[y];return setTimeout.apply(void 0,s([v,p],a(m),!1))}function f(v){return clearTimeout(v)}var h=(function(){function v(p,m,y,b,g){g===void 0&&(g={setTimeout:c,clearTimeout:f}),this._maxRetryTimeMs=d(p,3e4),this._initialRetryDelayMs=d(m,1e3),this._multiplier=d(y,2),this._jitterFactor=d(b,.2),this._setTimeout=g.setTimeout,this._clearTimeout=g.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=l.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return v.prototype.execute=function(p,m,y){var b=this,g={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){g.apiTransactionConfig=void 0}}};return new Promise(function(_,w){b._executeTransactionInsidePromise(p,m,_,w,y,g).catch(w)}).catch(function(_){var w=Date.now(),x=b._initialRetryDelayMs;return b._retryTransactionPromise(p,m,_,w,x,y,g)})},v.prototype.close=function(){var p=this;this._inFlightTimeoutIds.forEach(function(m){return p._clearTimeout(m)}),this._inFlightTimeoutIds=[]},v.prototype._retryTransactionPromise=function(p,m,y,b,g,_,w){var x=this;return Date.now()-b>this._maxRetryTimeMs||!(0,u.isRetriableError)(y)?Promise.reject(y):new Promise(function(E,O){var C=x._computeDelayWithJitter(g),A=x._setTimeout(function(){x._inFlightTimeoutIds=x._inFlightTimeoutIds.filter(function(R){return R!==A}),x._executeTransactionInsidePromise(p,m,E,O,_,w).catch(O)},C);x._inFlightTimeoutIds.push(A)}).catch(function(E){var O=g*x._multiplier;return x._retryTransactionPromise(p,m,E,b,O,_,w)})},v.prototype._executeTransactionInsidePromise=function(p,m,y,b,g,_){return i(this,void 0,void 0,function(){var w,x,E,O,C,A,R=this;return o(this,function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),x=p((_==null?void 0:_.apiTransactionConfig)!=null?n({},_==null?void 0:_.apiTransactionConfig):void 0),this.pipelineBegin?(E=x,[3,3]):[3,1];case 1:return[4,x];case 2:E=k.sent(),k.label=3;case 3:return w=E,[3,5];case 4:return O=k.sent(),b(O),[2];case 5:return C=g??function(D){return D},A=C(w),this._safeExecuteTransactionWork(A,m).then(function(D){return R._handleTransactionWorkSuccess(D,w,y,b)}).catch(function(D){return R._handleTransactionWorkFailure(D,w,b)}),[2]}})})},v.prototype._safeExecuteTransactionWork=function(p,m){try{var y=m(p);return Promise.resolve(y)}catch(b){return Promise.reject(b)}},v.prototype._handleTransactionWorkSuccess=function(p,m,y,b){m.isOpen()?m.commit().then(function(){y(p)}).catch(function(g){b(g)}):y(p)},v.prototype._handleTransactionWorkFailure=function(p,m,y){m.isOpen()?m.rollback().catch(function(b){}).then(function(){return y(p)}).catch(y):y(p)},v.prototype._computeDelayWithJitter=function(p){var m=p*this._jitterFactor,y=p-m,b=p+m;return Math.random()*(b-y)+y},v.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,u.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,u.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,u.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,u.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},v})();function d(v,p){return v??p}e.TransactionExecutor=h},6245:function(r,e,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=o.internal.util,s=a.ENCRYPTION_OFF,u=a.ENCRYPTION_ON,l=(function(){function f(h,d,v){d===void 0&&(d=c),v===void 0&&(v=function(_){return new WebSocket(_)});var p=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=h,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var m=(function(_,w){var x=(function(A){return A.encrypted===!0||A.encrypted===u})(_),E=(function(A){return A.encrypted===!1||A.encrypted===s})(_),O=_.trust,C=(function(A){var R=typeof A=="function"?A():"";return R&&R.toLowerCase().indexOf("https")>=0})(w);return(function(A,R,k){k===null||(A&&!k?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):R&&k&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))})(x,E,C),E?{scheme:"ws",error:null}:C?{scheme:"wss",error:null}:x?O&&O!=="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"?{scheme:null,error:(0,o.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+O+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}})(h,d),y=m.scheme,b=m.error;if(b)this._error=b;else{this._ws=(function(_,w,x){var E=_+"://"+w.asHostPort();try{return x(E)}catch(C){if((function(A,R){return A.name==="SyntaxError"&&(k=R.asHostPort()).charAt(0)==="["&&k.indexOf("]")!==-1;var k})(C,w)){var O=(function(A,R){var k=R.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(A,"://").concat(k,":").concat(R.port())})(_,w);return x(O)}throw C}})(y,h.address,v),this._ws.binaryType="arraybuffer";var g=this;this._ws.onclose=function(_){_&&!_.wasClean&&g._handleConnectionError(),g._open=!1},this._ws.onopen=function(){g._clearConnectionTimeout();var _=g._pending;g._pending=null;for(var w=0;w<_.length;w++)g.write(_[w])},this._ws.onmessage=function(_){if(p._resetTimeout(),g.onmessage){var w=new i.default(_.data);g.onmessage(w)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return f.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,o.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,o.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},f.prototype.write=function(h){if(this._pending!==null)this._pending.push(h);else{if(!(h instanceof i.default))throw(0,o.newError)("Don't know how to send buffer: "+h);try{this._ws.send(h._buffer)}catch(d){if(this._ws.readyState===1)throw d;this._handleConnectionError()}}},f.prototype.close=function(){var h=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(d,v){h._clearConnectionTimeout(),h._ws&&h._ws.readyState!==3?(h._open=!1,h.stopReceiveTimeout(),h._ws.onclose=function(){d()},h._ws.close()):d()})),this._closingPromise},f.prototype.setupReceiveTimeout=function(h){this._receiveTimeout=h},f.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},f.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},f.prototype._resetTimeout=function(){var h=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){h._receiveTimeoutId=null,h._timedout=!0,h.stopReceiveTimeout(),h._error=(0,o.newError)("Connection lost. Server didn't respond in ".concat(h._receiveTimeout,"ms"),h._config.connectionErrorCode),h.close(),h.onerror&&h.onerror(h._error)},this._receiveTimeout))},f.prototype._setupConnectionTimeout=function(){var h=this,d=this._config.connectionTimeout;if(d){var v=this._ws;return setTimeout(function(){v.readyState!==1&&(h._connectionTimeoutFired=!0,v.close())},d)}return null},f.prototype._clearConnectionTimeout=function(){var h=this._connectionTimeoutId;(h||h===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(h))},f})();function c(){return typeof window<"u"&&window.location?window.location.protocol:null}e.default=l},6248:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3399));e.default=n({},o.default)},6293:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var o=t(7245),a=o.Immediate.setImmediate,s=o.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||a).apply(void 0,i([],n(u)))},clearImmediate:function(u){var l=e.immediateProvider.delegate;return((l==null?void 0:l.clearImmediate)||s)(u)},delegate:void 0}},6345:function(r,e,t){var n=this&&this.__extends||(function(){var v=function(p,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(y[g]=b[g])},v(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=p}v(p,m),p.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(v){for(var p,m=1,y=arguments.length;m<y;m++)for(var b in p=arguments[m])Object.prototype.hasOwnProperty.call(p,b)&&(v[b]=p[b]);return v},i.apply(this,arguments)},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(844)),s=t(397),u=o(t(9994)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_1,d=(function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),p.prototype.initialize=function(m){var y=this,b=m===void 0?{}:m,g=b.userAgent,_=(b.boltAgent,b.authToken),w=b.notificationFilter,x=b.onError,E=b.onComplete,O={},C=new f.LoginObserver({onError:function(A){return y._onLoginError(A,x)},onCompleted:function(A){return O.metadata=A,y._onLoginCompleted(A)}});return(0,s.assertNotificationFilterIsEmpty)(w,this._onProtocolError,C),this.write(c.default.hello5x1(g,this._serversideRouting),C,!1),this.logon({authToken:_,onComplete:function(A){return E(i(i({},A),O.metadata))},onError:x,flush:!0})},p.prototype.logon=function(m){var y=this,b=m===void 0?{}:m,g=b.authToken,_=b.onComplete,w=b.onError,x=b.flush,E=new f.LoginObserver({onCompleted:function(){return y._onLoginCompleted(null,g,_)},onError:function(O){return y._onLoginError(O,w)}});return this.write(c.default.logon(g),E,x),E},p.prototype.logoff=function(m){var y=m===void 0?{}:m,b=y.onComplete,g=y.onError,_=y.flush,w=new f.LogoffObserver({onCompleted:b,onError:g});return this.write(c.default.logoff(),w,_),w},p})(a.default);e.default=d},6368:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=void 0;var n=t(1964),i=t(1018);e.isIterable=function(o){return i.isFunction(o==null?void 0:o[n.iterator])}},6377:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(h){for(var d,v=1,p=arguments.length;v<p;v++)for(var m in d=arguments[v])Object.prototype.hasOwnProperty.call(d,m)&&(h[m]=d[m]);return h},i.apply(this,arguments)},o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(6890)),s=o(t(6248)),u=o(t(3321)),l=t(9305).internal.constants.BOLT_PROTOCOL_V5_7,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype.enrichErrorMetadata=function(v){return i(i({},v),{cause:v.cause!==null&&v.cause!==void 0?this.enrichErrorMetadata(v.cause):null,code:v.neo4j_code,diagnostic_record:v.diagnostic_record!==null?i(i({},c),v.diagnostic_record):null})},d})(a.default);e.default=f},6384:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scanInternals=void 0;var n=t(3111);e.scanInternals=function(i,o,a,s,u){return function(l,c){var f=a,h=o,d=0;l.subscribe(n.createOperatorSubscriber(c,function(v){var p=d++;h=f?i(h,v,p):(f=!0,v),s&&c.next(h)},u&&function(){f&&c.next(h),c.complete()}))}}},6385:function(r,e,t){var n=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),t(7666);var i=(function(o){function a(s){var u=o.call(this)||this;return u._errorHandler=s,u}return n(a,o),Object.defineProperty(a.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),a.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(a.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),a.prototype.connect=function(s,u,l,c){throw new Error("not implemented")},a.prototype.write=function(s,u,l){throw new Error("not implemented")},a.prototype.close=function(){throw new Error("not implemented")},a.prototype.handleAndTransformError=function(s,u){return this._errorHandler?this._errorHandler.handleAndTransformError(s,u,this):s},a})(t(9305).Connection);e.default=i},6445:function(r,e,t){var n=this&&this.__extends||(function(){var f=function(h,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(v[m]=p[m])},f(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function v(){this.constructor=h}f(h,d),h.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}})(),i=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(4596)),a=t(9305),s=i(t(5348)),u=i(t(3321)),l=a.internal.constants.BOLT_PROTOCOL_V4_2,c=(function(f){function h(){return f!==null&&f.apply(this,arguments)||this}return n(h,f),Object.defineProperty(h.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var d=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(v){return v(d._config,d._log)}))),this._transformer},enumerable:!1,configurable:!0}),h})(o.default);e.default=c},6472:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interval=void 0;var n=t(7961),i=t(4092);e.interval=function(o,a){return o===void 0&&(o=0),a===void 0&&(a=n.asyncScheduler),o<0&&(o=0),i.timer(o,o,a)}},6492:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var n=t(9305);e.identity=function(i){return i},e.reuseOngoingRequest=function(i,o){o===void 0&&(o=null);var a=new Map;return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=n.json.stringify(s);if(a.has(l))return a.get(l);var c=i.apply(o,s);return a.set(l,c),c.finally(function(){a.delete(l)})}}},6505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=void 0;var n=t(9568),i=t(5471);e.timestamp=function(o){return o===void 0&&(o=n.dateTimestampProvider),i.map(function(a){return{value:a,timestamp:o.now()}})}},6544:function(r,e,t){var n=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=n(t(8320)),a=n(t(2857)),s=n(t(5642)),u=n(t(2539)),l=n(t(4596)),c=n(t(6445)),f=n(t(9054)),h=n(t(1711)),d=n(t(844)),v=n(t(6345)),p=n(t(934)),m=n(t(9125)),y=n(t(9744)),b=n(t(5815)),g=n(t(6890)),_=n(t(6377)),w=n(t(1092)),x=(t(7452),n(t(2578)));e.default=function(E){var O=E===void 0?{}:E,C=O.version,A=O.chunker,R=O.dechunker,k=O.channel,D=O.disableLosslessIntegers,L=O.useBigInt,j=O.serversideRouting,q=O.server,B=O.log,U=O.observer;return(function(W,H,Y,Z,ce,$,K,ie){switch(W){case 1:return new o.default(H,Y,Z,$,ie,K);case 2:return new a.default(H,Y,Z,$,ie,K);case 3:return new s.default(H,Y,Z,$,ie,K);case 4:return new u.default(H,Y,Z,$,ie,K);case 4.1:return new l.default(H,Y,Z,$,ie,K,ce);case 4.2:return new c.default(H,Y,Z,$,ie,K,ce);case 4.3:return new f.default(H,Y,Z,$,ie,K,ce);case 4.4:return new h.default(H,Y,Z,$,ie,K,ce);case 5:return new d.default(H,Y,Z,$,ie,K,ce);case 5.1:return new v.default(H,Y,Z,$,ie,K,ce);case 5.2:return new p.default(H,Y,Z,$,ie,K,ce);case 5.3:return new m.default(H,Y,Z,$,ie,K,ce);case 5.4:return new y.default(H,Y,Z,$,ie,K,ce);case 5.5:return new b.default(H,Y,Z,$,ie,K,ce);case 5.6:return new g.default(H,Y,Z,$,ie,K,ce);case 5.7:return new _.default(H,Y,Z,$,ie,K,ce);case 5.8:return new w.default(H,Y,Z,$,ie,K,ce);default:throw(0,i.newError)("Unknown Bolt protocol version: "+W)}})(C,q,A,{disableLosslessIntegers:D,useBigInt:L},j,function(W){var H=new x.default({transformMetadata:W.transformMetadata.bind(W),enrichErrorMetadata:W.enrichErrorMetadata.bind(W),log:B,observer:U});return k.onerror=U.onError.bind(U),k.onmessage=function(Y){return R.write(Y)},R.onmessage=function(Y){try{H.handleResponse(W.unpack(Y))}catch(Z){return U.onError(Z)}},H},U.onProtocolError.bind(U),B)}},6566:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.repeatWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=!1,v=!1,p=function(){return v&&d&&(l.complete(),!0)},m=function(){v=!1,c=u.subscribe(a.createOperatorSubscriber(l,void 0,function(){v=!0,!p()&&(f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){c?m():h=!0},function(){d=!0,p()}))),f).next()})),h&&(c.unsubscribe(),c=null,h=!1,m())};m()})}},6586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=void 0;var n=t(983),i=t(1018);e.mergeMapTo=function(o,a,s){return s===void 0&&(s=1/0),i.isFunction(a)?n.mergeMap(function(){return o},a,s):(typeof a=="number"&&(s=a),n.mergeMap(function(){return o},s))}},6587:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,p){p===void 0&&(p=v);var m=Object.getOwnPropertyDescriptor(d,v);m&&!("get"in m?!d.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,p,m)}:function(h,d,v,p){p===void 0&&(p=v),h[p]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],p=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&p>=h.length&&(h=void 0),{value:h&&h[p++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var s=o(t(3371)),u=t(4027);function l(h){return typeof h=="object"&&!Array.isArray(h)&&h!==null}function c(h,d){if(!f(h))throw new TypeError((0,u.stringify)(d)+" expected to be string but was: "+(0,u.stringify)(h));return h}function f(h){return Object.prototype.toString.call(h)==="[object String]"}e.ENCRYPTION_ON="ENCRYPTION_ON",e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(h){if(h===null)return!0;if(!l(h))return!1;for(var d in h)if(h[d]!==void 0)return!1;return!0},e.isObject=l,e.validateQueryAndParameters=function(h,d,v){var p,m,y="",b=d??{},g=(p=v==null?void 0:v.skipAsserts)!==null&&p!==void 0&&p;return typeof h=="string"?y=h:h instanceof String?y=h.toString():typeof h=="object"&&h.text!=null&&(y=h.text,b=(m=h.parameters)!==null&&m!==void 0?m:{}),g||((function(_){if(c(_,"Cypher query"),_.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")})(y),(function(_){if(!l(_)){var w=_.constructor!=null?" "+_.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(w," ").concat(JSON.stringify(_)))}})(b)),{validatedQuery:y,params:b}},e.assertObject=function(h,d){if(!l(h))throw new TypeError(d+" expected to be an object but was: "+(0,u.stringify)(h));return h},e.assertString=c,e.assertNumber=function(h,d){if(typeof h!="number")throw new TypeError(d+" expected to be a number but was: "+(0,u.stringify)(h));return h},e.assertNumberOrInteger=function(h,d){if(typeof h!="number"&&typeof h!="bigint"&&!(0,s.isInt)(h))throw new TypeError(d+" expected to be either a number or an Integer object but was: "+(0,u.stringify)(h));return h},e.assertValidDate=function(h,d){if(Object.prototype.toString.call(h)!=="[object Date]")throw new TypeError(d+" expected to be a standard JavaScript Date but was: "+(0,u.stringify)(h));if(Number.isNaN(h.getTime()))throw new TypeError(d+" expected to be valid JavaScript Date but its time was NaN: "+(0,u.stringify)(h));return h},e.isString=f,e.equals=function h(d,v){var p,m;if(d===v)return!0;if(d===null||v===null)return!1;if(typeof d=="object"&&typeof v=="object"){var y=Object.keys(d),b=Object.keys(v);if(y.length!==b.length)return!1;try{for(var g=a(y),_=g.next();!_.done;_=g.next()){var w=_.value;if(!h(d[w],v[w]))return!1}}catch(x){p={error:x}}finally{try{_&&!_.done&&(m=g.return)&&m.call(g)}finally{if(p)throw p.error}}return!0}return!1},e.toNumber=function(h){return h instanceof s.default?h.toNumber():typeof h=="bigint"?(0,s.int)(h).toNumber():h}},6625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=void 0;var n=t(6728);e.combineAll=n.combineLatestAll},6637:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=void 0;var i=t(2483),o=t(8014),a=t(7843),s=t(9445),u=t(3111),l=t(1342),c=t(7479);e.windowToggle=function(f,h){return a.operate(function(d,v){var p=[],m=function(y){for(;0<p.length;)p.shift().error(y);v.error(y)};s.innerFrom(f).subscribe(u.createOperatorSubscriber(v,function(y){var b=new i.Subject;p.push(b);var g,_=new o.Subscription;try{g=s.innerFrom(h(y))}catch(w){return void m(w)}v.next(b.asObservable()),_.add(g.subscribe(u.createOperatorSubscriber(v,function(){c.arrRemove(p,b),b.complete(),_.unsubscribe()},l.noop,m)))},l.noop)),d.subscribe(u.createOperatorSubscriber(v,function(y){var b,g,_=p.slice();try{for(var w=n(_),x=w.next();!x.done;x=w.next())x.value.next(y)}catch(E){b={error:E}}finally{try{x&&!x.done&&(g=w.return)&&g.call(w)}finally{if(b)throw b.error}}},function(){for(;0<p.length;)p.shift().complete();v.complete()},m,function(){for(;0<p.length;)p.shift().unsubscribe()}))})}},6640:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.identity=void 0,e.identity=function(t){return t}},6661:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=t(7168),a=t(3321),s=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new a.TypeTransformer({signature:78,isTypeInstance:function(u){return u instanceof i.Node},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Node",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.Node(c,f,h)}})},createRelationshipTransformer:function(){return new a.TypeTransformer({signature:82,isTypeInstance:function(u){return u instanceof i.Relationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Relationship",5,u.size);var l=n(u.fields,5),c=l[0],f=l[1],h=l[2],d=l[3],v=l[4];return new i.Relationship(c,f,h,d,v)}})},createUnboundRelationshipTransformer:function(){return new a.TypeTransformer({signature:114,isTypeInstance:function(u){return u instanceof i.UnboundRelationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("UnboundRelationship",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.UnboundRelationship(c,f,h)}})},createPathTransformer:function(){return new a.TypeTransformer({signature:80,isTypeInstance:function(u){return u instanceof i.Path},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Path",3,u.size);for(var l=n(u.fields,3),c=l[0],f=l[1],h=l[2],d=[],v=c[0],p=0;p<h.length;p+=2){var m=c[h[p+1]],y=(0,i.toNumber)(h[p]),b=void 0;y>0?(b=f[y-1])instanceof i.UnboundRelationship&&(f[y-1]=b=b.bindTo(v,m)):(b=f[-y-1])instanceof i.UnboundRelationship&&(f[-y-1]=b=b.bindTo(m,v)),d.push(new i.PathSegment(v,b,m)),v=m}return new i.Path(c[0],c[c.length-1],d)}})}}},6672:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,f)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),i=this&&this.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),o=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(u,s,l);return i(u,s),u},a=this&&this.__exportStar||function(s,u){for(var l in s)l==="default"||Object.prototype.hasOwnProperty.call(u,l)||n(u,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=o(t(4455)),e.bolt=o(t(7666)),e.buf=o(t(7174)),e.channel=o(t(7452)),e.packstream=o(t(7168)),a(t(9689),e)},6702:function(r,e){var t=this&&this.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(n,i){var o,a;if(n===i)return!0;if(n===null||i===null)return!1;if(typeof n=="object"&&typeof i=="object"){var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;try{for(var l=t(s),c=l.next();!c.done;c=l.next()){var f=c.value;if(n[f]!==i[f])return!1}}catch(h){o={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0}return!1}},6728:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestAll=void 0;var n=t(3247),i=t(3638);e.combineLatestAll=function(o){return i.joinAllInternals(n.combineLatest,o)}},6746:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=void 0;var i=t(2483),o=t(7843),a=t(3111);e.windowCount=function(s,u){u===void 0&&(u=0);var l=u>0?u:s;return o.operate(function(c,f){var h=[new i.Subject],d=0;f.next(h[0].asObservable()),c.subscribe(a.createOperatorSubscriber(f,function(v){var p,m;try{for(var y=n(h),b=y.next();!b.done;b=y.next())b.value.next(v)}catch(w){p={error:w}}finally{try{b&&!b.done&&(m=y.return)&&m.call(y)}finally{if(p)throw p.error}}var g=d-s+1;if(g>=0&&g%l===0&&h.shift().complete(),++d%l===0){var _=new i.Subject;h.push(_),f.next(_.asObservable())}},function(){for(;h.length>0;)h.shift().complete();f.complete()},function(v){for(;h.length>0;)h.shift().error(v);f.error(v)},function(){h=null}))})}},6755:function(r,e){var t=this&&this.__awaiter||function(l,c,f,h){return new(f||(f=Promise))(function(d,v){function p(b){try{y(h.next(b))}catch(g){v(g)}}function m(b){try{y(h.throw(b))}catch(g){v(g)}}function y(b){var g;b.done?d(b.value):(g=b.value,g instanceof f?g:new f(function(_){_(g)})).then(p,m)}y((h=h.apply(l,c||[])).next())})},n=this&&this.__generator||function(l,c){var f,h,d,v,p={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function m(y){return function(b){return(function(g){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,g[0]&&(p=0)),p;)try{if(f=1,h&&(d=2&g[0]?h.return:g[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,g[1])).done)return d;switch(h=0,d&&(g=[2&g[0],d.value]),g[0]){case 0:case 1:d=g;break;case 4:return p.label++,{value:g[1],done:!1};case 5:p.label++,h=g[1],g=[0];continue;case 7:g=p.ops.pop(),p.trys.pop();continue;default:if(!((d=(d=p.trys).length>0&&d[d.length-1])||g[0]!==6&&g[0]!==2)){p=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){p.label=g[1];break}if(g[0]===6&&p.label<d[1]){p.label=d[1],d=g;break}if(d&&p.label<d[2]){p.label=d[2],p.ops.push(g);break}d[2]&&p.ops.pop(),p.trys.pop();continue}g=c.call(l,p)}catch(_){g=[6,_],h=0}finally{f=d=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}})([y,b])}}},i=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],h=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&h>=l.length&&(l=void 0),{value:l&&l[h++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)p.push(h.value)}catch(m){d={error:m}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return p},a=this&&this.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var h,d=0,v=c.length;d<v;d++)!h&&d in c||(h||(h=Array.prototype.slice.call(c,0,d)),h[d]=c[d]);return l.concat(h||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var s=(function(){function l(){throw new Error("Not implemented")}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){return n(this,function(h){throw new Error("Not implemented")})})},l.prototype.getBookmarks=function(){return t(this,void 0,void 0,function(){return n(this,function(c){throw new Error("Not implemented")})})},l})();e.default=s,e.bookmarkManager=function(l){l===void 0&&(l={});var c=new Set(l.initialBookmarks);return new u(c,l.bookmarksSupplier,l.bookmarksConsumer)};var u=(function(){function l(c,f,h){this._bookmarks=c,this._bookmarksSupplier=f,this._bookmarksConsumer=h}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){var h,d,v,p,m,y,b,g,_,w;return n(this,function(x){switch(x.label){case 0:h=this._bookmarks;try{for(d=i(c),v=d.next();!v.done;v=d.next())y=v.value,h.delete(y)}catch(E){b={error:E}}finally{try{v&&!v.done&&(g=d.return)&&g.call(d)}finally{if(b)throw b.error}}try{for(p=i(f),m=p.next();!m.done;m=p.next())y=m.value,h.add(y)}catch(E){_={error:E}}finally{try{m&&!m.done&&(w=p.return)&&w.call(p)}finally{if(_)throw _.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(a([],o(h),!1))];case 1:x.sent(),x.label=2;case 2:return[2]}})})},l.prototype.getBookmarks=function(){var c;return t(this,void 0,void 0,function(){var f,h,d,v,p,m,y;return n(this,function(b){switch(b.label){case 0:return f=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:h=(c=b.sent())!==null&&c!==void 0?c:[];try{for(d=i(h),v=d.next();!v.done;v=d.next())p=v.value,f.add(p)}catch(g){m={error:g}}finally{try{v&&!v.done&&(y=d.return)&&y.call(d)}finally{if(m)throw m.error}}b.label=2;case 2:return[2,a([],o(f),!1)]}})})},l})()},6781:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(a,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);c&&!("get"in c?!s.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,l,c)}:function(a,s,u,l){l===void 0&&(l=u),a[l]=s[u]}),i=this&&this.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),o=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&n(s,a,u);return i(s,a),s};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=o(t(6492)),e.object=o(t(6702))},6804:r=>{r.exports=function(i,o){Array.isArray(o)||(o=[o]);var a=(function(l){for(var c=-1,f=0;f<l.length;f++){var h=l[f];if(h.type==="preprocessor")/^#(extension|version)/.test(h.data)&&(c=Math.max(c,f));else if(h.type==="keyword"&&h.data==="precision"){var d=n(l,f);if(d===-1)throw new Error("precision statement not followed by any semicolons!");c=Math.max(c,d)}}return c+1})(i),s=a>0?i[a-1]:null;s&&t.test(s.data)&&i.splice(a++,0,e),i.splice.apply(i,[a,0].concat(o));var u=a+o.length;return i[u]&&/[^\r\n]$/.test(i[u].data)&&i.splice(u,0,e),i};var e={data:`
`,type:"whitespace"},t=/[^\r\n]$/;function n(i,o){for(var a=o;a<i.length;a++)if(i[a].type==="operator"&&i[a].data===";")return a;return-1}},6824:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromSubscribable=void 0;var n=t(4662);e.fromSubscribable=function(i){return new n.Observable(function(o){return i.subscribe(o)})}},6842:function(r,e,t){var n=this&&this.__awaiter||function(v,p,m,y){return new(m||(m=Promise))(function(b,g){function _(E){try{x(y.next(E))}catch(O){g(O)}}function w(E){try{x(y.throw(E))}catch(O){g(O)}}function x(E){var O;E.done?b(E.value):(O=E.value,O instanceof m?O:new m(function(C){C(O)})).then(_,w)}x((y=y.apply(v,p||[])).next())})},i=this&&this.__generator||function(v,p){var m,y,b,g,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(x){return function(E){return(function(O){if(m)throw new TypeError("Generator is already executing.");for(;g&&(g=0,O[0]&&(_=0)),_;)try{if(m=1,y&&(b=2&O[0]?y.return:O[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,O[1])).done)return b;switch(y=0,b&&(O=[2&O[0],b.value]),O[0]){case 0:case 1:b=O;break;case 4:return _.label++,{value:O[1],done:!1};case 5:_.label++,y=O[1],O=[0];continue;case 7:O=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||O[0]!==6&&O[0]!==2)){_=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){_.label=O[1];break}if(O[0]===6&&_.label<b[1]){_.label=b[1],b=O;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(O);break}b[2]&&_.ops.pop(),_.trys.pop();continue}O=p.call(v,_)}catch(C){O=[6,C],y=0}finally{m=b=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}})([x,E])}}},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(7589)),s=t(9691),u=t(4883),l=(function(){function v(p){var m=p.create,y=m===void 0?function(B,U,W){return n(q,void 0,void 0,function(){return i(this,function(H){switch(H.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,H.sent()]}})})}:m,b=p.destroy,g=b===void 0?function(B){return n(q,void 0,void 0,function(){return i(this,function(U){switch(U.label){case 0:return[4,Promise.resolve()];case 1:return[2,U.sent()]}})})}:b,_=p.validateOnAcquire,w=_===void 0?function(B,U){return!0}:_,x=p.validateOnRelease,E=x===void 0?function(B){return!0}:x,O=p.installIdleObserver,C=O===void 0?function(B,U){}:O,A=p.removeIdleObserver,R=A===void 0?function(B){}:A,k=p.config,D=k===void 0?a.default.defaultConfig():k,L=p.log,j=L===void 0?u.Logger.noOp():L,q=this;this._create=y,this._destroy=g,this._validateOnAcquire=w,this._validateOnRelease=E,this._installIdleObserver=C,this._removeIdleObserver=R,this._maxSize=D.maxSize,this._acquisitionTimeout=D.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=j,this._closed=!1}return v.prototype.acquire=function(p,m,y){return n(this,void 0,void 0,function(){var b,g,_=this;return i(this,function(w){switch(w.label){case 0:return b=m.asKey(),(g=this._acquireRequests)[b]==null&&(g[b]=[]),[4,new Promise(function(x,E){var O=setTimeout(function(){var A=g[b];if(A!=null&&(g[b]=A.filter(function(D){return D!==C})),!C.isCompleted()){var R=_.activeResourceCount(m),k=_.has(m)?_._pools[b].length:0;C.reject((0,s.newError)("Connection acquisition timed out in ".concat(_._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(R,", Idle conn count = ").concat(k,".")))}},_._acquisitionTimeout);typeof O=="object"&&O.unref();var C=new h(b,p,y,x,E,O,_._log);g[b].push(C),_._processPendingAcquireRequests(m)})];case 1:return[2,w.sent()]}})})},v.prototype.purge=function(p){return n(this,void 0,void 0,function(){return i(this,function(m){switch(m.label){case 0:return[4,this._purgeKey(p.asKey())];case 1:return[2,m.sent()]}})})},v.prototype.apply=function(p,m){var y=p.asKey();y in this._pools&&this._pools[y].apply(m)},v.prototype.close=function(){return n(this,void 0,void 0,function(){var p=this;return i(this,function(m){switch(m.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(y){return n(p,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return[4,this._purgeKey(y)];case 1:return[2,b.sent()]}})})})).then()];case 1:return[2,m.sent()]}})})},v.prototype.keepAll=function(p){return n(this,void 0,void 0,function(){var m,y,b,g=this;return i(this,function(_){switch(_.label){case 0:return m=p.map(function(w){return w.asKey()}),y=Object.keys(this._pools),b=y.filter(function(w){return!m.includes(w)}),[4,Promise.all(b.map(function(w){return n(g,void 0,void 0,function(){return i(this,function(x){switch(x.label){case 0:return[4,this._purgeKey(w)];case 1:return[2,x.sent()]}})})})).then()];case 1:return[2,_.sent()]}})})},v.prototype.has=function(p){return p.asKey()in this._pools},v.prototype.activeResourceCount=function(p){var m;return(m=this._activeResourceCounts[p.asKey()])!==null&&m!==void 0?m:0},v.prototype._getOrInitializePoolFor=function(p){var m=this._pools[p];return m==null&&(m=new d,this._pools[p]=m,this._pendingCreates[p]=0),m},v.prototype._acquire=function(p,m,y){return n(this,void 0,void 0,function(){var b,g,_,w,x,E,O,C=this;return i(this,function(A){switch(A.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(b=m.asKey(),g=this._getOrInitializePoolFor(b),y)return[3,10];A.label=1;case 1:if(!(g.length>0))return[3,10];if((_=g.pop())==null)return[3,1];c(b,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(_),w=!1,A.label=2;case 2:return A.trys.push([2,4,,6]),[4,this._validateOnAcquire(p,_)];case 3:return w=A.sent(),[3,6];case 4:return x=A.sent(),f(b,this._activeResourceCounts),g.removeInUse(_),[4,this._destroy(_)];case 5:throw A.sent(),x;case 6:return w?(this._log.isDebugEnabled()&&this._log.debug("".concat(_," acquired from the pool ").concat(b)),[2,{resource:_,pool:g}]):[3,7];case 7:return f(b,this._activeResourceCounts),g.removeInUse(_),[4,this._destroy(_)];case 8:A.sent(),A.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&this.activeResourceCount(m)+this._pendingCreates[b]>=this._maxSize)return[2,{resource:null,pool:g}];this._pendingCreates[b]=this._pendingCreates[b]+1,A.label=11;case 11:return A.trys.push([11,,15,16]),this.activeResourceCount(m)+g.length>=this._maxSize&&y?(O=g.pop())==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(O),g.removeInUse(O),[4,this._destroy(O)]):[3,13];case 12:A.sent(),A.label=13;case 13:return[4,this._create(p,m,function(R,k){return n(C,void 0,void 0,function(){return i(this,function(D){switch(D.label){case 0:return[4,this._release(R,k,g)];case 1:return[2,D.sent()]}})})})];case 14:return E=A.sent(),g.pushInUse(E),c(b,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(E," created for the pool ").concat(b)),[3,16];case 15:return this._pendingCreates[b]=this._pendingCreates[b]-1,[7];case 16:return[2,{resource:E,pool:g}]}})})},v.prototype._release=function(p,m,y){return n(this,void 0,void 0,function(){var b,g=this;return i(this,function(_){switch(_.label){case 0:b=p.asKey(),_.label=1;case 1:return _.trys.push([1,,9,10]),y.isActive()?[4,this._validateOnRelease(m)]:[3,6];case 2:return _.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(m," destroyed and can't be released to the pool ").concat(b," because it is not functional")),y.removeInUse(m),[4,this._destroy(m)]);case 3:return _.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(m,{onError:function(w){g._log.debug("Idle connection ".concat(m," destroyed because of error: ").concat(w));var x=g._pools[b];x!=null&&(g._pools[b]=x.filter(function(E){return E!==m}),x.removeInUse(m)),g._destroy(m).catch(function(){})}}),y.push(m),this._log.isDebugEnabled()&&this._log.debug("".concat(m," released to the pool ").concat(b)),_.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(m," destroyed and can't be released to the pool ").concat(b," because pool has been purged")),y.removeInUse(m),[4,this._destroy(m)];case 7:_.sent(),_.label=8;case 8:return[3,10];case 9:return f(b,this._activeResourceCounts),this._processPendingAcquireRequests(p),[7];case 10:return[2]}})})},v.prototype._purgeKey=function(p){return n(this,void 0,void 0,function(){var m,y,b;return i(this,function(g){switch(g.label){case 0:if(m=this._pools[p],y=[],m==null)return[3,2];for(;m.length>0;)(b=m.pop())!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(b),y.push(this._destroy(b)));return m.close(),delete this._pools[p],[4,Promise.all(y)];case 1:g.sent(),g.label=2;case 2:return[2]}})})},v.prototype._processPendingAcquireRequests=function(p){var m=this,y=p.asKey(),b=this._acquireRequests[y];if(b!=null){var g=b.shift();g!=null?this._acquire(g.context,p,g.requireNew).catch(function(_){return g.reject(_),{resource:null,pool:null}}).then(function(_){var w=_.resource,x=_.pool;w!=null&&x!=null?g.isCompleted()?m._release(p,w,x).catch(function(E){m._log.isDebugEnabled()&&m._log.debug("".concat(w," could not be release back to the pool. Cause: ").concat(E))}):g.resolve(w):g.isCompleted()||(m._acquireRequests[y]==null&&(m._acquireRequests[y]=[]),m._acquireRequests[y].unshift(g))}).catch(function(_){return g.reject(_)}):delete this._acquireRequests[y]}},v})();function c(v,p){var m,y=(m=p[v])!==null&&m!==void 0?m:0;p[v]=y+1}function f(v,p){var m,y=((m=p[v])!==null&&m!==void 0?m:0)-1;y>0?p[v]=y:delete p[v]}var h=(function(){function v(p,m,y,b,g,_,w){this._key=p,this._context=m,this._resolve=b,this._reject=g,this._timeoutId=_,this._log=w,this._completed=!1,this._config=y??{}}return Object.defineProperty(v.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"requireNew",{get:function(){var p;return(p=this._config.requireNew)!==null&&p!==void 0&&p},enumerable:!1,configurable:!0}),v.prototype.isCompleted=function(){return this._completed},v.prototype.resolve=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(p," acquired from the pool ").concat(this._key)),this._resolve(p))},v.prototype.reject=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(p))},v})(),d=(function(){function v(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return v.prototype.isActive=function(){return this._active},v.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},v.prototype.filter=function(p){return this._elements=this._elements.filter(p),this},v.prototype.apply=function(p){this._elements.forEach(p),this._elementsInUse.forEach(p)},Object.defineProperty(v.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),v.prototype.pop=function(){var p=this._elements.pop();return p!=null&&this._elementsInUse.add(p),p},v.prototype.push=function(p){return this._elementsInUse.delete(p),this._elements.push(p)},v.prototype.pushInUse=function(p){this._elementsInUse.add(p)},v.prototype.removeInUse=function(p){this._elementsInUse.delete(p)},v})();e.default=l},6872:function(r,e){var t=this&&this.__extends||(function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}o(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var n=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=n;var i=(function(o){function a(){return o!==null&&o.apply(this,arguments)||this}return t(a,o),a})(n);e.InternalConfig=i},6890:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(h){for(var d,v=1,p=arguments.length;v<p;v++)for(var m in d=arguments[v])Object.prototype.hasOwnProperty.call(d,m)&&(h[m]=d[m]);return h},i.apply(this,arguments)},o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(5815)),s=o(t(3399)),u=o(t(3321)),l=t(9305).internal.constants.BOLT_PROTOCOL_V5_6,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype._enrichMetadata=function(v){return Array.isArray(v.statuses)&&(v.statuses=v.statuses.map(function(p){return i(i({},p),{diagnostic_record:p.diagnostic_record!==null?i(i({},c),p.diagnostic_record):null})})),v},d})(a.default);e.default=f},6894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lastValueFrom=void 0;var n=t(2823);e.lastValueFrom=function(i,o){var a=typeof o=="object";return new Promise(function(s,u){var l,c=!1;i.subscribe({next:function(f){l=f,c=!0},error:u,complete:function(){c?s(l):a?s(o.defaultValue):u(new n.EmptyError)}})})}},6902:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flatMap=void 0;var n=t(983);e.flatMap=n.mergeMap},6931:r=>{r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},6985:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleArray=void 0;var n=t(4662);e.scheduleArray=function(i,o){return new n.Observable(function(a){var s=0;return o.schedule(function(){s===i.length?a.complete():(a.next(i[s++]),a.closed||this.schedule())})})}},6995:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(w,x,E,O){O===void 0&&(O=E);var C=Object.getOwnPropertyDescriptor(x,E);C&&!("get"in C?!x.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return x[E]}}),Object.defineProperty(w,O,C)}:function(w,x,E,O){O===void 0&&(O=E),w[O]=x[E]}),i=this&&this.__setModuleDefault||(Object.create?function(w,x){Object.defineProperty(w,"default",{enumerable:!0,value:x})}:function(w,x){w.default=x}),o=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var x={};if(w!=null)for(var E in w)E!=="default"&&Object.prototype.hasOwnProperty.call(w,E)&&n(x,w,E);return i(x,w),x};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var a=o(t(6587));e.util=a;var s=o(t(5022));e.temporalUtil=s;var u=o(t(2696));e.observer=u;var l=o(t(9730));e.bookmarks=l;var c=o(t(326));e.constants=c;var f=o(t(3618));e.connectionHolder=f;var h=o(t(754));e.txConfig=h;var d=o(t(6189));e.transactionExecutor=d;var v=o(t(4883));e.logger=v;var p=o(t(407));e.urlUtil=p;var m=o(t(7509));e.serverAddress=m;var y=o(t(9470));e.resolver=y;var b=o(t(93));e.objectUtil=b;var g=o(t(3488));e.boltAgent=g;var _=o(t(2906));e.pool=_},7021:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var n=t(9305),i=n.internal.constants,o=i.ACCESS_MODE_READ,a=i.FETCH_ALL,s=n.internal.util.assertString,u=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=u;var l=(function(){function g(_,w,x){this.signature=_,this.fields=w,this.toString=x}return g.init=function(_,w){return new g(1,[_,w],function(){return"INIT ".concat(_," {...}")})},g.run=function(_,w){return new g(16,[_,w],function(){return"RUN ".concat(_," ").concat(n.json.stringify(w))})},g.pullAll=function(){return v},g.reset=function(){return p},g.hello=function(_,w,x,E){x===void 0&&(x=null),E===void 0&&(E=null);var O=Object.assign({user_agent:_},w);return x&&(O.routing=x),E&&(O.patch_bolt=E),new g(1,[O],function(){return"HELLO {user_agent: '".concat(_,"', ...}")})},g.hello5x1=function(_,w){w===void 0&&(w=null);var x={user_agent:_};return w&&(x.routing=w),new g(1,[x],function(){return"HELLO {user_agent: '".concat(_,"', ...}")})},g.hello5x2=function(_,w,x){w===void 0&&(w=null),x===void 0&&(x=null);var E={user_agent:_};return h(E,w),x&&(E.routing=x),new g(1,[E],function(){return"HELLO ".concat(n.json.stringify(E))})},g.hello5x3=function(_,w,x,E){x===void 0&&(x=null),E===void 0&&(E=null);var O={};return _&&(O.user_agent=_),w&&(O.bolt_agent={product:w.product,platform:w.platform,language:w.language,language_details:w.languageDetails}),h(O,x),E&&(O.routing=E),new g(1,[O],function(){return"HELLO ".concat(n.json.stringify(O))})},g.hello5x5=function(_,w,x,E){x===void 0&&(x=null),E===void 0&&(E=null);var O={};return _&&(O.user_agent=_),w&&(O.bolt_agent={product:w.product,platform:w.platform,language:w.language,language_details:w.languageDetails}),d(O,x),E&&(O.routing=E),new g(1,[O],function(){return"HELLO ".concat(n.json.stringify(O))})},g.logon=function(_){return new g(106,[_],function(){return"LOGON { ... }"})},g.logoff=function(){return new g(107,[],function(){return"LOGOFF"})},g.begin=function(_){var w=_===void 0?{}:_,x=c(w.bookmarks,w.txConfig,w.database,w.mode,w.impersonatedUser,w.notificationFilter);return new g(17,[x],function(){return"BEGIN ".concat(n.json.stringify(x))})},g.begin5x5=function(_){var w=_===void 0?{}:_,x=c(w.bookmarks,w.txConfig,w.database,w.mode,w.impersonatedUser,w.notificationFilter,{appendNotificationFilter:d});return new g(17,[x],function(){return"BEGIN ".concat(n.json.stringify(x))})},g.commit=function(){return m},g.rollback=function(){return y},g.runWithMetadata=function(_,w,x){var E=x===void 0?{}:x,O=c(E.bookmarks,E.txConfig,E.database,E.mode,E.impersonatedUser,E.notificationFilter);return new g(16,[_,w,O],function(){return"RUN ".concat(_," ").concat(n.json.stringify(w)," ").concat(n.json.stringify(O))})},g.runWithMetadata5x5=function(_,w,x){var E=x===void 0?{}:x,O=c(E.bookmarks,E.txConfig,E.database,E.mode,E.impersonatedUser,E.notificationFilter,{appendNotificationFilter:d});return new g(16,[_,w,O],function(){return"RUN ".concat(_," ").concat(n.json.stringify(w)," ").concat(n.json.stringify(O))})},g.goodbye=function(){return b},g.pull=function(_){var w=_===void 0?{}:_,x=w.stmtId,E=x===void 0?-1:x,O=w.n,C=f(E??-1,(O===void 0?a:O)||a);return new g(63,[C],function(){return"PULL ".concat(n.json.stringify(C))})},g.discard=function(_){var w=_===void 0?{}:_,x=w.stmtId,E=x===void 0?-1:x,O=w.n,C=f(E??-1,(O===void 0?a:O)||a);return new g(47,[C],function(){return"DISCARD ".concat(n.json.stringify(C))})},g.telemetry=function(_){var w=_.api,x=(0,n.int)(w);return new g(84,[x],function(){return"TELEMETRY ".concat(x.toString())})},g.route=function(_,w,x){return _===void 0&&(_={}),w===void 0&&(w=[]),x===void 0&&(x=null),new g(102,[_,w,x],function(){return"ROUTE ".concat(n.json.stringify(_)," ").concat(n.json.stringify(w)," ").concat(x)})},g.routeV4x4=function(_,w,x){_===void 0&&(_={}),w===void 0&&(w=[]),x===void 0&&(x={});var E={};return x.databaseName&&(E.db=x.databaseName),x.impersonatedUser&&(E.imp_user=x.impersonatedUser),new g(102,[_,w,E],function(){return"ROUTE ".concat(n.json.stringify(_)," ").concat(n.json.stringify(w)," ").concat(n.json.stringify(E))})},g})();function c(g,_,w,x,E,O,C){var A;C===void 0&&(C={});var R={};return g.isEmpty()||(R.bookmarks=g.values()),_.timeout!==null&&(R.tx_timeout=_.timeout),_.metadata&&(R.tx_metadata=_.metadata),w&&(R.db=s(w,"database")),E&&(R.imp_user=s(E,"impersonatedUser")),x===o&&(R.mode="r"),((A=C.appendNotificationFilter)!==null&&A!==void 0?A:h)(R,O),R}function f(g,_){var w={n:(0,n.int)(_)};return g!==-1&&(w.qid=(0,n.int)(g)),w}function h(g,_){_&&(_.minimumSeverityLevel&&(g.notifications_minimum_severity=_.minimumSeverityLevel),_.disabledCategories&&(g.notifications_disabled_categories=_.disabledCategories),_.disabledClassifications&&(g.notifications_disabled_categories=_.disabledClassifications))}function d(g,_){_&&(_.minimumSeverityLevel&&(g.notifications_minimum_severity=_.minimumSeverityLevel),_.disabledCategories&&(g.notifications_disabled_classifications=_.disabledCategories),_.disabledClassifications&&(g.notifications_disabled_classifications=_.disabledClassifications))}e.default=l;var v=new l(63,[],function(){return"PULL_ALL"}),p=new l(15,[],function(){return"RESET"}),m=new l(18,[],function(){return"COMMIT"}),y=new l(19,[],function(){return"ROLLBACK"}),b=new l(2,[],function(){return"GOODBYE"})},7041:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(m){try{p(c.next(m))}catch(y){h(y)}}function v(m){try{p(c.throw(m))}catch(y){h(y)}}function p(m){var y;m.done?f(m.value):(y=m.value,y instanceof l?y:new l(function(b){b(y)})).then(d,v)}p((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(p){return function(m){return(function(y){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}})([p,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(326),a=(function(){function s(u){this._createSession=u}return s.prototype.execute=function(u,l,c){return n(this,void 0,void 0,function(){var f,h,d=this;return i(this,function(v){switch(v.label){case 0:f=this._createSession({database:u.database,bookmarkManager:u.bookmarkManager,impersonatedUser:u.impersonatedUser,auth:u.auth}),p=u.signal,m="abort",y=function(){return n(d,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return[4,f.close()];case 1:return[2,b.sent()]}})})},typeof(p==null?void 0:p.addEventListener)=="function"&&p.addEventListener(m,y),h={uninstall:function(){typeof(p==null?void 0:p.removeEventListener)=="function"&&p.removeEventListener(m,y)}},f._configureTransactionExecutor(!0,o.TELEMETRY_APIS.EXECUTE_QUERY),v.label=1;case 1:return v.trys.push([1,,3,5]),[4,(u.routing==="READ"?f.executeRead.bind(f):f.executeWrite.bind(f))(function(b){return n(d,void 0,void 0,function(){var g;return i(this,function(_){switch(_.label){case 0:return g=b.run(l,c),[4,u.resultTransformer(g)];case 1:return[2,_.sent()]}})})},u.transactionConfig)];case 2:return[2,v.sent()];case 3:return h.uninstall(),[4,f.close()];case 4:return v.sent(),[7];case 5:return[2]}var p,m,y})})},s})();e.default=a},7045:(r,e,t)=>{var n=t(3206);r.exports=function(i,o){var a=n(o),s=[];return(s=s.concat(a(i))).concat(a(null))}},7057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentOutOfRangeError=void 0;var n=t(5568);e.ArgumentOutOfRangeError=n.createErrorClass(function(i){return function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},7093:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var n=t(6587),i="__isPoint__",o=(function(){function s(u,l,c,f){this.srid=(0,n.assertNumberOrInteger)(u,"SRID"),this.x=(0,n.assertNumber)(l,"X coordinate"),this.y=(0,n.assertNumber)(c,"Y coordinate"),this.z=f==null?f:(0,n.assertNumber)(f,"Z coordinate"),Object.freeze(this)}return s.prototype.toString=function(){return this.z==null||isNaN(this.z)?"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),"}"):"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),", z=").concat(a(this.z),"}")},s})();function a(s){return Number.isInteger(s)?s.toString()+".0":s.toString()}e.Point=o,Object.defineProperty(o.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(s){return s!=null&&s[i]===!0}},7101:r=>{r.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},7110:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.executeSchedule=void 0,e.executeSchedule=function(t,n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var s=n.schedule(function(){i(),a?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(s),!a)return s}},7168:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var a=o(t(5361));e.v1=a;var s=o(t(2072));e.v2=s;var u=o(t(7665));e.structure=u,e.default=s},7174:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=n(t(45));e.BaseBuffer=i.default,e.default=i.default},7192:r=>{r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7210:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=void 0;var i=t(8014),o=t(7843),a=t(3111),s=t(7479),u=t(7961),l=t(1107),c=t(7110);e.bufferTime=function(f){for(var h,d,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var m=(h=l.popScheduler(v))!==null&&h!==void 0?h:u.asyncScheduler,y=(d=v[0])!==null&&d!==void 0?d:null,b=v[1]||1/0;return o.operate(function(g,_){var w=[],x=!1,E=function(A){var R=A.buffer;A.subs.unsubscribe(),s.arrRemove(w,A),_.next(R),x&&O()},O=function(){if(w){var A=new i.Subscription;_.add(A);var R={buffer:[],subs:A};w.push(R),c.executeSchedule(A,m,function(){return E(R)},f)}};y!==null&&y>=0?c.executeSchedule(_,m,O,y,!0):x=!0,O();var C=a.createOperatorSubscriber(_,function(A){var R,k,D=w.slice();try{for(var L=n(D),j=L.next();!j.done;j=L.next()){var q=j.value,B=q.buffer;B.push(A),b<=B.length&&E(q)}}catch(U){R={error:U}}finally{try{j&&!j.done&&(k=L.return)&&k.call(L)}finally{if(R)throw R.error}}},function(){for(;w!=null&&w.length;)_.next(w.shift().buffer);C==null||C.unsubscribe(),_.complete(),_.unsubscribe()},void 0,function(){return w=null});g.subscribe(C)})}},7220:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=void 0;var n=t(1637),i=t(8918);e.publishBehavior=function(o){return function(a){var s=new n.BehaviorSubject(o);return new i.ConnectableObservable(a,function(){return s})}}},7245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TestTools=e.Immediate=void 0;var t,n=1,i={};function o(a){return a in i&&(delete i[a],!0)}e.Immediate={setImmediate:function(a){var s=n++;return i[s]=!0,t||(t=Promise.resolve()),t.then(function(){return o(s)&&a()}),s},clearImmediate:function(a){o(a)}},e.TestTools={pending:function(){return Object.keys(i).length}}},7264:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(A){for(var R,k=1,D=arguments.length;k<D;k++)for(var L in R=arguments[k])Object.prototype.hasOwnProperty.call(R,L)&&(A[L]=R[L]);return A},n.apply(this,arguments)},i=this&&this.__awaiter||function(A,R,k,D){return new(k||(k=Promise))(function(L,j){function q(W){try{U(D.next(W))}catch(H){j(H)}}function B(W){try{U(D.throw(W))}catch(H){j(H)}}function U(W){var H;W.done?L(W.value):(H=W.value,H instanceof k?H:new k(function(Y){Y(H)})).then(q,B)}U((D=D.apply(A,R||[])).next())})},o=this&&this.__generator||function(A,R){var k,D,L,j,q={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return j={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function B(U){return function(W){return(function(H){if(k)throw new TypeError("Generator is already executing.");for(;j&&(j=0,H[0]&&(q=0)),q;)try{if(k=1,D&&(L=2&H[0]?D.return:H[0]?D.throw||((L=D.return)&&L.call(D),0):D.next)&&!(L=L.call(D,H[1])).done)return L;switch(D=0,L&&(H=[2&H[0],L.value]),H[0]){case 0:case 1:L=H;break;case 4:return q.label++,{value:H[1],done:!1};case 5:q.label++,D=H[1],H=[0];continue;case 7:H=q.ops.pop(),q.trys.pop();continue;default:if(!((L=(L=q.trys).length>0&&L[L.length-1])||H[0]!==6&&H[0]!==2)){q=0;continue}if(H[0]===3&&(!L||H[1]>L[0]&&H[1]<L[3])){q.label=H[1];break}if(H[0]===6&&q.label<L[1]){q.label=L[1],L=H;break}if(L&&q.label<L[2]){q.label=L[2],q.ops.push(H);break}L[2]&&q.ops.pop(),q.trys.pop();continue}H=R.call(A,q)}catch(Y){H=[6,Y],D=0}finally{k=L=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}})([U,W])}}},a=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var s=t(9730),u=a(t(8341)),l=t(326),c=t(4883),f=a(t(5481)),h=t(6587),d=t(6755),v=a(t(1573)),p=a(t(7041)),m=t(9691),y=a(t(3001)),b=t(6030),g=l.ACCESS_MODE_READ;e.READ=g;var _=l.ACCESS_MODE_WRITE;e.WRITE=_;var w=0;e.SessionConfig=function(){this.defaultAccessMode=_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var x={WRITE:"WRITE",READ:"READ"};e.routing=x,Object.freeze(x),e.QueryConfig=function(){this.routing=x.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var E=(function(){function A(R,k,D,L,j){k===void 0&&(k={}),L===void 0&&(L=function(B){return new f.default(B)}),j===void 0&&(j=function(B){return new p.default(B)}),(function(B){B.maxConnectionLifetime=O(B.maxConnectionLifetime,36e5),B.maxConnectionPoolSize=O(B.maxConnectionPoolSize,l.DEFAULT_POOL_MAX_SIZE),B.connectionAcquisitionTimeout=O(B.connectionAcquisitionTimeout,l.DEFAULT_POOL_ACQUISITION_TIMEOUT),B.fetchSize=C(B.fetchSize,1e3),B.connectionTimeout=(function(U){var W=parseInt(U.connectionTimeout,10);return W===0||!isNaN(W)&&W<0?null:isNaN(W)?l.DEFAULT_CONNECTION_TIMEOUT_MILLIS:W})(B),B.connectionLivenessCheckTimeout=(function(U){if(U!=null){var W=parseInt(U,10);if(W<0||Number.isNaN(W))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(W));return W}})(B.connectionLivenessCheckTimeout)})(k);var q=c.Logger.create(k);(function(B,U){var W,H,Y=B.resolver;if(Y!=null&&typeof Y!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof Y));if(B.connectionAcquisitionTimeout<B.connectionTimeout&&U.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((W=B.notificationFilter)===null||W===void 0?void 0:W.disabledCategories)!=null&&((H=B.notificationFilter)===null||H===void 0?void 0:H.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`)})(k,q),this._id=w++,this._meta=R,this._config=k,this._log=q,this._createConnectionProvider=D,this._createSession=L,this._defaultExecuteQueryBookmarkManager=(0,d.bookmarkManager)(),this._queryExecutor=j(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new y.default(1e4),this._afterConstruction()}return Object.defineProperty(A.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),A.prototype.executeQuery=function(R,k,D){var L,j,q;return D===void 0&&(D={}),i(this,void 0,void 0,function(){var B,U,W;return o(this,function(H){switch(H.label){case 0:if(B=D.bookmarkManager===null?void 0:(L=D.bookmarkManager)!==null&&L!==void 0?L:this.executeQueryBookmarkManager,U=(j=D.resultTransformer)!==null&&j!==void 0?j:v.default.eagerResultTransformer(),(W=(q=D.routing)!==null&&q!==void 0?q:x.WRITE)!==x.READ&&W!==x.WRITE)throw(0,m.newError)('Illegal query routing config: "'.concat(W,'"'));return[4,this._queryExecutor.execute({resultTransformer:U,bookmarkManager:B,routing:W,database:D.database,impersonatedUser:D.impersonatedUser,transactionConfig:D.transactionConfig,auth:D.auth,signal:D.signal},R,k)];case 1:return[2,H.sent()]}})})},A.prototype.verifyConnectivity=function(R){var k=(R===void 0?{}:R).database,D=k===void 0?"":k;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:D,accessMode:g})},A.prototype.verifyAuthentication=function(R){var k=R===void 0?{}:R,D=k.database,L=k.auth;return i(this,void 0,void 0,function(){return o(this,function(j){switch(j.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:D??"system",auth:L,accessMode:g})];case 1:return[2,j.sent()]}})})},A.prototype.getServerInfo=function(R){var k=(R===void 0?{}:R).database,D=k===void 0?"":k;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:D,accessMode:g})},A.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},A.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},A.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},A.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},A.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},A.prototype.isEncrypted=function(){return this._isEncrypted()},A.prototype._supportsRouting=function(){return this._meta.routing},A.prototype._isEncrypted=function(){return this._config.encrypted===h.ENCRYPTION_ON||this._config.encrypted===!0},A.prototype._getTrust=function(){return this._config.trust},A.prototype.session=function(R){var k=R===void 0?{}:R,D=k.defaultAccessMode,L=D===void 0?_:D,j=k.bookmarks,q=k.database,B=q===void 0?"":q,U=k.impersonatedUser,W=k.fetchSize,H=k.bookmarkManager,Y=k.notificationFilter,Z=k.auth;return this._newSession({defaultAccessMode:L,bookmarkOrBookmarks:j,database:B,reactive:!1,impersonatedUser:U,fetchSize:C(W,this._config.fetchSize),bookmarkManager:H,notificationFilter:Y,auth:Z})},A.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},A.prototype[Symbol.asyncDispose]=function(){return this.close()},A.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},A.prototype._homeDatabaseCallback=function(R,k){this.homeDatabaseCache.set(R,k)},A.prototype._newSession=function(R){var k=R.defaultAccessMode,D=R.bookmarkOrBookmarks,L=R.database,j=R.reactive,q=R.impersonatedUser,B=R.fetchSize,U=R.bookmarkManager,W=R.notificationFilter,H=R.auth,Y=f.default._validateSessionMode(k),Z=this._getOrCreateConnectionProvider(),ce=this.homeDatabaseCache.get((0,b.cacheKey)(H,q)),$=this._homeDatabaseCallback.bind(this),K=D!=null?new s.Bookmarks(D):s.Bookmarks.empty();return this._createSession({mode:Y,database:L??"",connectionProvider:Z,bookmarks:K,config:n({cachedHomeDatabase:ce,routingDriver:this._supportsRouting()},this._config),reactive:j,impersonatedUser:q,fetchSize:B,bookmarkManager:U,notificationFilter:W,auth:H,log:this._log,homeDatabaseCallback:$})},A.prototype._getOrCreateConnectionProvider=function(){var R;return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(R=this._config,new u.default(R.resolver)))),this._connectionProvider},A})();function O(A,R){var k=parseInt(A,10);return k>0||k===0?k:k<0?Number.MAX_SAFE_INTEGER:R}function C(A,R){var k=parseInt(A,10);if(k>0||k===l.FETCH_ALL)return k;if(k===0||k<0)throw new Error("The fetch size can only be a positive value or ".concat(l.FETCH_ALL," for ALL. However fetchSize = ").concat(k));return R}e.Driver=E,e.default=E},7286:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(4662),a=t(9445),s=t(8535),u=t(8616),l=t(3111),c=t(1107);e.zip=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f),v=s.argsOrArgArray(f);return v.length?new o.Observable(function(p){var m=v.map(function(){return[]}),y=v.map(function(){return!1});p.add(function(){m=y=null});for(var b=function(_){a.innerFrom(v[_]).subscribe(l.createOperatorSubscriber(p,function(w){if(m[_].push(w),m.every(function(E){return E.length})){var x=m.map(function(E){return E.shift()});p.next(d?d.apply(void 0,i([],n(x))):x),m.some(function(E,O){return!E.length&&y[O]})&&p.complete()}},function(){y[_]=!0,!m[_].length&&p.complete()}))},g=0;!p.closed&&g<v.length;g++)b(g);return function(){m=y=null}}):u.EMPTY}},7302:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=void 0;var n=t(983),i=t(6640);e.mergeAll=function(o){return o===void 0&&(o=1/0),n.mergeMap(i.identity,o)}},7315:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportUnhandledError=void 0;var n=t(3413),i=t(9155);e.reportUnhandledError=function(o){i.timeoutProvider.setTimeout(function(){var a=n.config.onUnhandledError;if(!a)throw o;a(o)})}},7331:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(5348));e.default=n({},o.default)},7360:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsArgArrayOrObject=void 0;var t=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;e.argsArgArrayOrObject=function(a){if(a.length===1){var s=a[0];if(t(s))return{args:s,keys:null};if((l=s)&&typeof l=="object"&&n(l)===i){var u=o(s);return{args:u.map(function(c){return s[c]}),keys:u}}}var l;return{args:a,keys:null}}},7372:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.skipUntil=function(s){return n.operate(function(u,l){var c=!1,f=i.createOperatorSubscriber(l,function(){f==null||f.unsubscribe(),c=!0},a.noop);o.innerFrom(s).subscribe(f),u.subscribe(i.createOperatorSubscriber(l,function(h){return c&&l.next(h)}))})}},7428:function(r,e,t){var n=this&&this.__extends||(function(){var ae=function(le,te){return ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,re){ee.__proto__=re}||function(ee,re){for(var he in re)Object.prototype.hasOwnProperty.call(re,he)&&(ee[he]=re[he])},ae(le,te)};return function(le,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function ee(){this.constructor=le}ae(le,te),le.prototype=te===null?Object.create(te):(ee.prototype=te.prototype,new ee)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(ae){for(var le,te=1,ee=arguments.length;te<ee;te++)for(var re in le=arguments[te])Object.prototype.hasOwnProperty.call(le,re)&&(ae[re]=le[re]);return ae},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(ae,le,te,ee){ee===void 0&&(ee=te);var re=Object.getOwnPropertyDescriptor(le,te);re&&!("get"in re?!le.__esModule:re.writable||re.configurable)||(re={enumerable:!0,get:function(){return le[te]}}),Object.defineProperty(ae,ee,re)}:function(ae,le,te,ee){ee===void 0&&(ee=te),ae[ee]=le[te]}),a=this&&this.__setModuleDefault||(Object.create?function(ae,le){Object.defineProperty(ae,"default",{enumerable:!0,value:le})}:function(ae,le){ae.default=le}),s=this&&this.__importStar||function(ae){if(ae&&ae.__esModule)return ae;var le={};if(ae!=null)for(var te in ae)te!=="default"&&Object.prototype.hasOwnProperty.call(ae,te)&&o(le,ae,te);return a(le,ae),le},u=this&&this.__awaiter||function(ae,le,te,ee){return new(te||(te=Promise))(function(re,he){function ve(Pe){try{Oe(ee.next(Pe))}catch(me){he(me)}}function _e(Pe){try{Oe(ee.throw(Pe))}catch(me){he(me)}}function Oe(Pe){var me;Pe.done?re(Pe.value):(me=Pe.value,me instanceof te?me:new te(function(F){F(me)})).then(ve,_e)}Oe((ee=ee.apply(ae,le||[])).next())})},l=this&&this.__generator||function(ae,le){var te,ee,re,he,ve={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return he={next:_e(0),throw:_e(1),return:_e(2)},typeof Symbol=="function"&&(he[Symbol.iterator]=function(){return this}),he;function _e(Oe){return function(Pe){return(function(me){if(te)throw new TypeError("Generator is already executing.");for(;he&&(he=0,me[0]&&(ve=0)),ve;)try{if(te=1,ee&&(re=2&me[0]?ee.return:me[0]?ee.throw||((re=ee.return)&&re.call(ee),0):ee.next)&&!(re=re.call(ee,me[1])).done)return re;switch(ee=0,re&&(me=[2&me[0],re.value]),me[0]){case 0:case 1:re=me;break;case 4:return ve.label++,{value:me[1],done:!1};case 5:ve.label++,ee=me[1],me=[0];continue;case 7:me=ve.ops.pop(),ve.trys.pop();continue;default:if(!((re=(re=ve.trys).length>0&&re[re.length-1])||me[0]!==6&&me[0]!==2)){ve=0;continue}if(me[0]===3&&(!re||me[1]>re[0]&&me[1]<re[3])){ve.label=me[1];break}if(me[0]===6&&ve.label<re[1]){ve.label=re[1],re=me;break}if(re&&ve.label<re[2]){ve.label=re[2],ve.ops.push(me);break}re[2]&&ve.ops.pop(),ve.trys.pop();continue}me=le.call(ae,ve)}catch(F){me=[6,F],ee=0}finally{te=re=0}if(5&me[0])throw me[1];return{value:me[0]?me[1]:void 0,done:!0}})([Oe,Pe])}}},c=this&&this.__values||function(ae){var le=typeof Symbol=="function"&&Symbol.iterator,te=le&&ae[le],ee=0;if(te)return te.call(ae);if(ae&&typeof ae.length=="number")return{next:function(){return ae&&ee>=ae.length&&(ae=void 0),{value:ae&&ae[ee++],done:!ae}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__read||function(ae,le){var te=typeof Symbol=="function"&&ae[Symbol.iterator];if(!te)return ae;var ee,re,he=te.call(ae),ve=[];try{for(;(le===void 0||le-- >0)&&!(ee=he.next()).done;)ve.push(ee.value)}catch(_e){re={error:_e}}finally{try{ee&&!ee.done&&(te=he.return)&&te.call(he)}finally{if(re)throw re.error}}return ve},h=this&&this.__importDefault||function(ae){return ae&&ae.__esModule?ae:{default:ae}};Object.defineProperty(e,"__esModule",{value:!0});var d=t(9305),v=s(t(206)),p=t(7452),m=h(t(4132)),y=h(t(8987)),b=t(4455),g=t(7721),_=t(6781),w=d.error.SERVICE_UNAVAILABLE,x=d.error.SESSION_EXPIRED,E=d.internal.bookmarks.Bookmarks,O=d.internal.constants,C=O.ACCESS_MODE_READ,A=O.ACCESS_MODE_WRITE,R=O.BOLT_PROTOCOL_V3,k=O.BOLT_PROTOCOL_V4_0,D=O.BOLT_PROTOCOL_V4_4,L=O.BOLT_PROTOCOL_V5_1,j="Neo.ClientError.Database.DatabaseNotFound",q="Neo.ClientError.Transaction.InvalidBookmark",B="Neo.ClientError.Transaction.InvalidBookmarkMixture",U="Neo.ClientError.Security.AuthorizationExpired",W="Neo.ClientError.Statement.ArgumentError",H="Neo.ClientError.Request.Invalid",Y="Neo.ClientError.Statement.TypeError",Z="N/A",ce=null,$=(0,d.int)(3e4),K=(function(ae){function le(te){var ee=te.id,re=te.address,he=te.routingContext,ve=te.hostNameResolver,_e=te.config,Oe=te.log,Pe=te.userAgent,me=te.boltAgent,F=te.authTokenManager,G=te.routingTablePurgeDelay,X=te.newPool,se=ae.call(this,{id:ee,config:_e,log:Oe,userAgent:Pe,boltAgent:me,authTokenManager:F,newPool:X},function(pe){return u(se,void 0,void 0,function(){var ge,xe;return l(this,function(Ne){switch(Ne.label){case 0:return ge=g.createChannelConnection,xe=[pe,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,ge.apply(void 0,xe.concat([Ne.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return se._routingContext=i(i({},he),{address:re.toString()}),se._seedRouter=re,se._rediscovery=new v.default(se._routingContext),se._loadBalancingStrategy=new b.LeastConnectedLoadBalancingStrategy(se._connectionPool),se._hostNameResolver=ve,se._dnsResolver=new p.HostNameResolver,se._log=Oe,se._useSeedRouter=!0,se._routingTableRegistry=new ie(G?(0,d.int)(G):$),se._refreshRoutingTable=_.functional.reuseOngoingRequest(se._refreshRoutingTable,se),se._withSSR=0,se._withoutSSR=0,se}return n(le,ae),le.prototype._createConnectionErrorHandler=function(){return new g.ConnectionErrorHandler(x)},le.prototype._handleUnavailability=function(te,ee,re){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(ee," for database '").concat(re,"' because of an error ").concat(te.code," '").concat(te.message,"'")),this.forget(ee,re||ce),te},le.prototype._handleSecurityError=function(te,ee,re,he){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(ee," for database '").concat(he,"' because of an error ").concat(te.code," '").concat(te.message,"'")),ae.prototype._handleSecurityError.call(this,te,ee,re,he)},le.prototype._handleWriteFailure=function(te,ee,re){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(ee," for database '").concat(re,"' because of an error ").concat(te.code," '").concat(te.message,"'")),this.forgetWriter(ee,re||ce),(0,d.newError)("No longer possible to write to server at "+ee,x,te)},le.prototype.acquireConnection=function(te){var ee=te===void 0?{}:te,re=ee.accessMode,he=ee.database,ve=ee.bookmarks,_e=ee.impersonatedUser,Oe=ee.onDatabaseNameResolved,Pe=ee.auth,me=ee.homeDb;return u(this,void 0,void 0,function(){var F,G,X,se,pe,ge=this;return l(this,function(xe){switch(xe.label){case 0:return F={database:he||ce},G=new g.ConnectionErrorHandler(x,function(Ne,He){return ge._handleUnavailability(Ne,He,F.database)},function(Ne,He){return ge._handleWriteFailure(Ne,He,me??F.database)},function(Ne,He,at){return ge._handleSecurityError(Ne,He,at,F.database)}),this.SSREnabled()&&me!==void 0&&he===""?!(se=this._routingTableRegistry.get(me,function(){return new v.RoutingTable({database:me})}))||se.isStaleFor(re)?[3,2]:[4,this.getConnectionFromRoutingTable(se,Pe,re,G)]:[3,2];case 1:if(X=xe.sent(),this.SSREnabled())return[2,X];X.release(),xe.label=2;case 2:return[4,this._freshRoutingTable({accessMode:re,database:F.database,bookmarks:ve,impersonatedUser:_e,auth:Pe,onDatabaseNameResolved:function(Ne){F.database=F.database||Ne,Oe&&Oe(Ne)}})];case 3:return pe=xe.sent(),[2,this.getConnectionFromRoutingTable(pe,Pe,re,G)]}})})},le.prototype.getConnectionFromRoutingTable=function(te,ee,re,he){return u(this,void 0,void 0,function(){var ve,_e,Oe,Pe;return l(this,function(me){switch(me.label){case 0:if(re===C)_e=this._loadBalancingStrategy.selectReader(te.readers),ve="read";else{if(re!==A)throw(0,d.newError)("Illegal mode "+re);_e=this._loadBalancingStrategy.selectWriter(te.writers),ve="write"}if(!_e)throw(0,d.newError)("Failed to obtain connection towards ".concat(ve," server. Known routing table is: ").concat(te),x);me.label=1;case 1:return me.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:ee},_e)];case 2:return Oe=me.sent(),ee?[4,this._verifyStickyConnection({auth:ee,connection:Oe,address:_e})]:[3,4];case 3:return me.sent(),[2,Oe];case 4:return[2,new g.DelegateConnection(Oe,he)];case 5:throw Pe=me.sent(),he.handleAndTransformError(Pe,_e);case 6:return[2]}})})},le.prototype._hasProtocolVersion=function(te){return u(this,void 0,void 0,function(){var ee,re,he,ve,_e,Oe;return l(this,function(Pe){switch(Pe.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:ee=Pe.sent(),he=0,Pe.label=2;case 2:if(!(he<ee.length))return[3,8];Pe.label=3;case 3:return Pe.trys.push([3,6,,7]),[4,this._createChannelConnection(ee[he])];case 4:return ve=Pe.sent(),_e=ve.protocol()?ve.protocol().version:null,[4,ve.close()];case 5:return Pe.sent(),_e?[2,te(_e)]:[2,!1];case 6:return Oe=Pe.sent(),re=Oe,[3,7];case 7:return he++,[3,2];case 8:if(re)throw re;return[2,!1]}})})},le.prototype.supportsMultiDb=function(){return u(this,void 0,void 0,function(){return l(this,function(te){switch(te.label){case 0:return[4,this._hasProtocolVersion(function(ee){return ee>=k})];case 1:return[2,te.sent()]}})})},le.prototype.supportsTransactionConfig=function(){return u(this,void 0,void 0,function(){return l(this,function(te){switch(te.label){case 0:return[4,this._hasProtocolVersion(function(ee){return ee>=R})];case 1:return[2,te.sent()]}})})},le.prototype.supportsUserImpersonation=function(){return u(this,void 0,void 0,function(){return l(this,function(te){switch(te.label){case 0:return[4,this._hasProtocolVersion(function(ee){return ee>=D})];case 1:return[2,te.sent()]}})})},le.prototype.supportsSessionAuth=function(){return u(this,void 0,void 0,function(){return l(this,function(te){switch(te.label){case 0:return[4,this._hasProtocolVersion(function(ee){return ee>=L})];case 1:return[2,te.sent()]}})})},le.prototype.getNegotiatedProtocolVersion=function(){var te=this;return new Promise(function(ee,re){te._hasProtocolVersion(ee).catch(re)})},le.prototype.verifyAuthentication=function(te){var ee=te.database,re=te.accessMode,he=te.auth;return u(this,void 0,void 0,function(){var ve=this;return l(this,function(_e){return[2,this._verifyAuthentication({auth:he,getAddress:function(){return u(ve,void 0,void 0,function(){var Oe,Pe,me;return l(this,function(F){switch(F.label){case 0:return Oe={database:ee||ce},[4,this._freshRoutingTable({accessMode:re,database:Oe.database,auth:he,onDatabaseNameResolved:function(G){Oe.database=Oe.database||G}})];case 1:if(Pe=F.sent(),(me=re===A?Pe.writers:Pe.readers).length===0)throw(0,d.newError)("No servers available for database '".concat(Oe.database,"' with access mode '").concat(re,"'"),w);return[2,me[0]]}})})}})]})})},le.prototype.verifyConnectivityAndGetServerInfo=function(te){var ee=te.database,re=te.accessMode;return u(this,void 0,void 0,function(){var he,ve,_e,Oe,Pe,me,F,G,X,se,pe;return l(this,function(ge){switch(ge.label){case 0:return he={database:ee||ce},[4,this._freshRoutingTable({accessMode:re,database:he.database,onDatabaseNameResolved:function(xe){he.database=he.database||xe}})];case 1:ve=ge.sent(),_e=re===A?ve.writers:ve.readers,Oe=(0,d.newError)("No servers available for database '".concat(he.database,"' with access mode '").concat(re,"'"),w),ge.label=2;case 2:ge.trys.push([2,9,10,11]),Pe=c(_e),me=Pe.next(),ge.label=3;case 3:if(me.done)return[3,8];F=me.value,ge.label=4;case 4:return ge.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:F})];case 5:return[2,ge.sent()];case 6:return G=ge.sent(),Oe=G,[3,7];case 7:return me=Pe.next(),[3,3];case 8:return[3,11];case 9:return X=ge.sent(),se={error:X},[3,11];case 10:try{me&&!me.done&&(pe=Pe.return)&&pe.call(Pe)}finally{if(se)throw se.error}return[7];case 11:throw Oe}})})},le.prototype.forget=function(te,ee){this._routingTableRegistry.apply(ee,{applyWhenExists:function(re){return re.forget(te)}}),this._connectionPool.purge(te).catch(function(){})},le.prototype.forgetWriter=function(te,ee){this._routingTableRegistry.apply(ee,{applyWhenExists:function(re){return re.forgetWriter(te)}})},le.prototype._freshRoutingTable=function(te){var ee=te===void 0?{}:te,re=ee.accessMode,he=ee.database,ve=ee.bookmarks,_e=ee.impersonatedUser,Oe=ee.onDatabaseNameResolved,Pe=ee.auth,me=this._routingTableRegistry.get(he,function(){return new v.RoutingTable({database:he})});return me.isStaleFor(re)?(this._log.info('Routing table is stale for database: "'.concat(he,'" and access mode: "').concat(re,'": ').concat(me)),this._refreshRoutingTable(me,ve,_e,Pe).then(function(F){return Oe(F.database),F})):me},le.prototype._refreshRoutingTable=function(te,ee,re,he){var ve=te.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(ve,te,ee,re,he):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(ve,te,ee,re,he)},le.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(te,ee,re,he,ve){return u(this,void 0,void 0,function(){var _e,Oe,Pe,me,F,G,X;return l(this,function(se){switch(se.label){case 0:return _e=[],[4,this._fetchRoutingTableUsingSeedRouter(_e,this._seedRouter,ee,re,he,ve)];case 1:return Oe=f.apply(void 0,[se.sent(),2]),Pe=Oe[0],me=Oe[1],Pe?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(te,ee,re,he,ve)];case 3:F=f.apply(void 0,[se.sent(),2]),G=F[0],X=F[1],Pe=G,me=X||me,se.label=4;case 4:return[4,this._applyRoutingTableIfPossible(ee,Pe,me)];case 5:return[2,se.sent()]}})})},le.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(te,ee,re,he,ve){return u(this,void 0,void 0,function(){var _e,Oe,Pe,me;return l(this,function(F){switch(F.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(te,ee,re,he,ve)];case 1:return _e=f.apply(void 0,[F.sent(),2]),Oe=_e[0],Pe=_e[1],Oe?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(te,this._seedRouter,ee,re,he,ve)];case 2:me=f.apply(void 0,[F.sent(),2]),Oe=me[0],Pe=me[1],F.label=3;case 3:return[4,this._applyRoutingTableIfPossible(ee,Oe,Pe)];case 4:return[2,F.sent()]}})})},le.prototype._fetchRoutingTableUsingKnownRouters=function(te,ee,re,he,ve){return u(this,void 0,void 0,function(){var _e,Oe,Pe,me;return l(this,function(F){switch(F.label){case 0:return[4,this._fetchRoutingTable(te,ee,re,he,ve)];case 1:return _e=f.apply(void 0,[F.sent(),2]),Oe=_e[0],Pe=_e[1],Oe?[2,[Oe,null]]:(me=te.length-1,le._forgetRouter(ee,te,me),[2,[null,Pe]])}})})},le.prototype._fetchRoutingTableUsingSeedRouter=function(te,ee,re,he,ve,_e){return u(this,void 0,void 0,function(){var Oe,Pe;return l(this,function(me){switch(me.label){case 0:return[4,this._resolveSeedRouter(ee)];case 1:return Oe=me.sent(),Pe=Oe.filter(function(F){return te.indexOf(F)<0}),[4,this._fetchRoutingTable(Pe,re,he,ve,_e)];case 2:return[2,me.sent()]}})})},le.prototype._resolveSeedRouter=function(te){return u(this,void 0,void 0,function(){var ee,re,he=this;return l(this,function(ve){switch(ve.label){case 0:return[4,this._hostNameResolver.resolve(te)];case 1:return ee=ve.sent(),[4,Promise.all(ee.map(function(_e){return he._dnsResolver.resolve(_e)}))];case 2:return re=ve.sent(),[2,[].concat.apply([],re)]}})})},le.prototype._fetchRoutingTable=function(te,ee,re,he,ve){return u(this,void 0,void 0,function(){var _e=this;return l(this,function(Oe){return[2,te.reduce(function(Pe,me,F){return u(_e,void 0,void 0,function(){var G,X,se,pe,ge,xe,Ne;return l(this,function(He){switch(He.label){case 0:return[4,Pe];case 1:return G=f.apply(void 0,[He.sent(),1]),(X=G[0])?[2,[X,null]]:(se=F-1,le._forgetRouter(ee,te,se),[4,this._createSessionForRediscovery(me,re,he,ve)]);case 2:if(pe=f.apply(void 0,[He.sent(),2]),ge=pe[0],xe=pe[1],!ge)return[3,8];He.label=3;case 3:return He.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(ge,ee.database,me,he)];case 4:return[2,[He.sent(),null]];case 5:return Ne=He.sent(),[2,this._handleRediscoveryError(Ne,me)];case 6:return ge.close(),[7];case 7:return[3,9];case 8:return[2,[null,xe]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},le.prototype._createSessionForRediscovery=function(te,ee,re,he){return u(this,void 0,void 0,function(){var ve,_e,Oe,Pe,me,F=this;return l(this,function(G){switch(G.label){case 0:return G.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:he},te)];case 1:return ve=G.sent(),he?[4,this._verifyStickyConnection({auth:he,connection:ve,address:te})]:[3,3];case 2:G.sent(),G.label=3;case 3:return _e=g.ConnectionErrorHandler.create({errorCode:x,handleSecurityError:function(X,se,pe){return F._handleSecurityError(X,se,pe)}}),Oe=ve._sticky?new g.DelegateConnection(ve):new g.DelegateConnection(ve,_e),Pe=new m.default(Oe),ve.protocol().version<4?[2,[new d.Session({mode:A,bookmarks:E.empty(),connectionProvider:Pe}),null]]:[2,[new d.Session({mode:C,database:"system",bookmarks:ee,connectionProvider:Pe,impersonatedUser:re}),null]];case 4:return me=G.sent(),[2,this._handleRediscoveryError(me,te)];case 5:return[2]}})})},le.prototype._handleRediscoveryError=function(te,ee){if((function(re){return[j,q,B,W,H,Y,Z].includes(re.code)})(te)||(function(re){return re.code.startsWith("Neo.ClientError.Security.")&&![U].includes(re.code)})(te))throw te;if(te.code==="Neo.ClientError.Procedure.ProcedureNotFound")throw(0,d.newError)("Server at ".concat(ee.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),w,te);return this._log.warn("unable to fetch routing table because of an error ".concat(te)),[null,te]},le.prototype._applyRoutingTableIfPossible=function(te,ee,re){return u(this,void 0,void 0,function(){return l(this,function(he){switch(he.label){case 0:if(!ee)throw(0,d.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(te),w,re);return ee.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(ee)];case 1:return he.sent(),[2,ee]}})})},le.prototype._updateRoutingTable=function(te){return u(this,void 0,void 0,function(){return l(this,function(ee){switch(ee.label){case 0:return[4,this._connectionPool.keepAll(te.allServers())];case 1:return ee.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(te),this._log.info("Updated routing table ".concat(te)),[2]}})})},le._forgetRouter=function(te,ee,re){var he=ee[re];te&&he&&te.forgetRouter(he)},le.prototype._channelSsrCallback=function(te,ee){if(ee==="OPEN")te===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else{if(ee!=="CLOSE")throw(0,d.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'");te===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1}},le.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},le})(y.default);e.default=K;var ie=(function(){function ae(le){this._tables=new Map,this._routingTablePurgeDelay=le}return ae.prototype.register=function(le){return this._tables.set(le.database,le),this},ae.prototype.apply=function(le,te){var ee=te===void 0?{}:te,re=ee.applyWhenExists,he=ee.applyWhenDontExists,ve=he===void 0?function(){}:he;return this._tables.has(le)?re(this._tables.get(le)):typeof le=="string"||le===null?ve():this._forEach(re),this},ae.prototype.get=function(le,te){return this._tables.has(le)?this._tables.get(le):typeof te=="function"?te():te},ae.prototype.removeExpired=function(){var le=this;return this._removeIf(function(te){return te.isExpiredFor(le._routingTablePurgeDelay)})},ae.prototype._forEach=function(le){var te,ee;try{for(var re=c(this._tables),he=re.next();!he.done;he=re.next())le(f(he.value,2)[1])}catch(ve){te={error:ve}}finally{try{he&&!he.done&&(ee=re.return)&&ee.call(re)}finally{if(te)throw te.error}}return this},ae.prototype._remove=function(le){return this._tables.delete(le),this},ae.prototype._removeIf=function(le){var te,ee;try{for(var re=c(this._tables),he=re.next();!he.done;he=re.next()){var ve=f(he.value,2),_e=ve[0];le(ve[1])&&this._remove(_e)}}catch(Oe){te={error:Oe}}finally{try{he&&!he.done&&(ee=re.return)&&ee.call(re)}finally{if(te)throw te.error}}return this},ae})()},7441:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.dematerialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){return n.observeNotification(u,s)}))})}},7449:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,p=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(d=p.next()).done;)m.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(v)throw v.error}}return m},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7168),s=t(9305),u=o(t(7518)),l=o(t(5045));e.default=n(n(n({},u.default),l.default),{createNodeTransformer:function(c){return u.default.createNodeTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Node",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],p=h[2],m=h[3];return new s.Node(d,v,p,m)}})},createRelationshipTransformer:function(c){return u.default.createRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Relationship",8,f.size);var h=i(f.fields,8),d=h[0],v=h[1],p=h[2],m=h[3],y=h[4],b=h[5],g=h[6],_=h[7];return new s.Relationship(d,v,p,m,y,b,g,_)}})},createUnboundRelationshipTransformer:function(c){return u.default.createUnboundRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("UnboundRelationship",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],p=h[2],m=h[3];return new s.UnboundRelationship(d,v,p,m)}})}})},7452:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__exportStar||function(l,c){for(var f in l)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,l,f)},o=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(t(3951),e),i(t(373),e);var a=t(2481);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return o(a).default}});var s=t(5319);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return s.alloc}});var u=t(3473);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return o(u).default}})},7479:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrRemove=void 0,e.arrRemove=function(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}},7509:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var a=t(6587),s=o(t(407)),u=(function(){function l(c,f,h,d){this._host=(0,a.assertString)(c,"host"),this._resolved=f!=null?(0,a.assertString)(f,"resolved"):null,this._port=(0,a.assertNumber)(h,"port"),this._hostPort=d,this._stringValue=f!=null?"".concat(d,"(").concat(f,")"):"".concat(d)}return l.prototype.host=function(){return this._host},l.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},l.prototype.port=function(){return this._port},l.prototype.resolveWith=function(c){return new l(this._host,c,this._port,this._hostPort)},l.prototype.asHostPort=function(){return this._hostPort},l.prototype.asKey=function(){return this._hostPort},l.prototype.toString=function(){return this._stringValue},l.fromUrl=function(c){var f=s.parseDatabaseUrl(c);return new l(f.host,null,f.port,f.hostAndPort)},l})();e.ServerAddress=u},7518:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7331));e.default=n({},o.default)},7521:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2066));e.default=n({},o.default)},7561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=void 0;var n=t(7843),i=t(3111);e.refCount=function(){return n.operate(function(o,a){var s=null;o._refCount++;var u=i.createOperatorSubscriber(a,void 0,void 0,void 0,function(){if(!o||o._refCount<=0||0<--o._refCount)s=null;else{var l=o._connection,c=s;s=null,!l||c&&l!==c||l.unsubscribe(),a.unsubscribe()}});o.subscribe(u),u.closed||(s=o.connect())})}},7579:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connectable=void 0;var n=t(2483),i=t(4662),o=t(9353),a={connector:function(){return new n.Subject},resetOnDisconnect:!0};e.connectable=function(s,u){u===void 0&&(u=a);var l=null,c=u.connector,f=u.resetOnDisconnect,h=f===void 0||f,d=c(),v=new i.Observable(function(p){return d.subscribe(p)});return v.connect=function(){return l&&!l.closed||(l=o.defer(function(){return s}).subscribe(d),h&&l.add(function(){return d=c()})),l},v}},7589:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var t=100;e.DEFAULT_MAX_SIZE=t;var n=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=n;var i=(function(){function s(u,l){this.maxSize=o(u,t),this.acquisitionTimeout=o(l,n)}return s.defaultConfig=function(){return new s(t,n)},s.fromDriverConfig=function(u){return new s(a(u.maxConnectionPoolSize)?u.maxConnectionPoolSize:t,a(u.connectionAcquisitionTimeout)?u.connectionAcquisitionTimeout:n)},s})();function o(s,u){return a(s)?s:u}function a(s){return s===0||s!=null}e.default=i},7601:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)p.push(h.value)}catch(m){d={error:m}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return p},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var o=t(7843),a=t(8158),s=t(1107),u=t(4917);e.concat=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l);return o.operate(function(h,d){a.concatAll()(u.from(i([h],n(l)),f)).subscribe(d)})}},7610:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(m){return function(y){return(function(b){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,f&&(h=2&b[0]?f.return:b[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;switch(f=0,h&&(b=[2&b[0],h.value]),b[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){v.label=b[1];break}if(b[0]===6&&v.label<h[1]){v.label=h[1],h=b;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(b);break}h[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(g){b=[6,g],f=0}finally{c=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([m,y])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.generate=void 0;var i=t(6640),o=t(8613),a=t(9353),s=t(8808);e.generate=function(u,l,c,f,h){var d,v,p,m;function y(){var b;return n(this,function(g){switch(g.label){case 0:b=m,g.label=1;case 1:return l&&!l(b)?[3,4]:[4,p(b)];case 2:g.sent(),g.label=3;case 3:return b=c(b),[3,1];case 4:return[2]}})}return arguments.length===1?(m=(d=u).initialState,l=d.condition,c=d.iterate,v=d.resultSelector,p=v===void 0?i.identity:v,h=d.scheduler):(m=u,!f||o.isScheduler(f)?(p=i.identity,h=f):p=f),a.defer(h?function(){return s.scheduleIterable(y(),h)}:y)}},7614:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createInvalidObservableTypeError=void 0,e.createInvalidObservableTypeError=function(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},7629:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=void 0;var n=t(1018);e.isPromise=function(i){return n.isFunction(i==null?void 0:i.then)}},7640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=void 0;var n=t(7961),i=t(8941),o=t(4092);e.throttleTime=function(a,s,u){s===void 0&&(s=n.asyncScheduler);var l=o.timer(a,s);return i.throttle(function(){return l},u)}},7661:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand=void 0;var n=t(7843),i=t(1983);e.expand=function(o,a,s){return a===void 0&&(a=1/0),a=(a||0)<1?1/0:a,n.operate(function(u,l){return i.mergeInternals(u,l,o,a,void 0,!0,s)})}},7665:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var n=t(9305),i=n.error.PROTOCOL_ERROR,o=(function(){function a(s,u){this.signature=s,this.fields=u}return Object.defineProperty(a.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),a.prototype.toString=function(){for(var s="",u=0;u<this.fields.length;u++)u>0&&(s+=", "),s+=this.fields[u];return"Structure("+this.signature+", ["+s+"])"},a})();e.Structure=o,e.verifyStructSize=function(a,s,u){if(s!==u)throw(0,n.newError)("Wrong struct size for ".concat(a,", expected ").concat(s," but was ").concat(u),i)},e.default=o},7666:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),i=this&&this.__exportStar||function(c,f){for(var h in c)h==="default"||Object.prototype.hasOwnProperty.call(f,h)||n(f,c,h)},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var a=o(t(8731)),s=o(t(6544)),u=o(t(9054)),l=o(t(7790));i(t(9014),e),e.BoltProtocol=u.default,e.RawRoutingTable=l.default,e.default={handshake:a.default,create:s.default}},7714:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFind=e.find=void 0;var n=t(7843),i=t(3111);function o(a,s,u){var l=u==="index";return function(c,f){var h=0;c.subscribe(i.createOperatorSubscriber(f,function(d){var v=h++;a.call(s,d,v,c)&&(f.next(l?v:d),f.complete())},function(){f.next(l?-1:void 0),f.complete()}))}}e.find=function(a,s){return n.operate(o(a,s,"value"))},e.createFind=o},7721:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var p=Object.getOwnPropertyDescriptor(h,d);p&&!("get"in p?!h.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,p)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h},a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var s=a(t(6385));e.Connection=s.default;var u=o(t(8031));e.ChannelConnection=u.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});var l=a(t(9857));e.DelegateConnection=l.default;var c=a(t(2363));e.ConnectionErrorHandler=c.default,e.default=s.default},7740:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairs=void 0;var n=t(4917);e.pairs=function(i,o){return n.from(Object.entries(i),o)}},7790:function(r,e,t){var n=this&&this.__extends||(function(){var l=function(c,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(h[v]=d[v])},l(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=c}l(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}})(),i=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),i(t(9305));var o=(function(){function l(){}return l.ofRecord=function(c){return c===null?l.ofNull():new u(c)},l.ofMessageResponse=function(c){return c===null?l.ofNull():new a(c)},l.ofNull=function(){return new s},Object.defineProperty(l.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),l})();e.default=o;var a=(function(l){function c(f){var h=l.call(this)||this;return h._response=f,h}return n(c,l),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),c})(o),s=(function(l){function c(){return l!==null&&l.apply(this,arguments)||this}return n(c,l),Object.defineProperty(c.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),c})(o),u=(function(l){function c(f){var h=l.call(this)||this;return h._record=f,h}return n(c,l),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),c})(o)},7800:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n,i=t(8616),o=t(1004),a=t(1103),s=t(1018);(n=e.NotificationKind||(e.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=(function(){function c(f,h,d){this.kind=f,this.value=h,this.error=d,this.hasValue=f==="N"}return c.prototype.observe=function(f){return l(this,f)},c.prototype.do=function(f,h,d){var v=this,p=v.kind,m=v.value,y=v.error;return p==="N"?f==null?void 0:f(m):p==="E"?h==null?void 0:h(y):d==null?void 0:d()},c.prototype.accept=function(f,h,d){var v;return s.isFunction((v=f)===null||v===void 0?void 0:v.next)?this.observe(f):this.do(f,h,d)},c.prototype.toObservable=function(){var f=this,h=f.kind,d=f.value,v=f.error,p=h==="N"?o.of(d):h==="E"?a.throwError(function(){return v}):h==="C"?i.EMPTY:0;if(!p)throw new TypeError("Unexpected notification kind "+h);return p},c.createNext=function(f){return new c("N",f)},c.createError=function(f){return new c("E",void 0,f)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c})();function l(c,f){var h,d,v,p=c,m=p.kind,y=p.value,b=p.error;if(typeof m!="string")throw new TypeError('Invalid notification, missing "kind"');m==="N"?(h=f.next)===null||h===void 0||h.call(f,y):m==="E"?(d=f.error)===null||d===void 0||d.call(f,b):(v=f.complete)===null||v===void 0||v.call(f)}e.Notification=u,e.observeNotification=l},7815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=void 0;var n=t(4662),i=t(9445),o=t(2483),a=t(7843),s=t(3111);e.groupBy=function(u,l,c,f){return a.operate(function(h,d){var v;l&&typeof l!="function"?(c=l.duration,v=l.element,f=l.connector):v=l;var p=new Map,m=function(w){p.forEach(w),w(d)},y=function(w){return m(function(x){return x.error(w)})},b=0,g=!1,_=new s.OperatorSubscriber(d,function(w){try{var x=u(w),E=p.get(x);if(!E){p.set(x,E=f?f():new o.Subject);var O=(A=x,R=E,(k=new n.Observable(function(D){b++;var L=R.subscribe(D);return function(){L.unsubscribe(),--b===0&&g&&_.unsubscribe()}})).key=A,k);if(d.next(O),c){var C=s.createOperatorSubscriber(E,function(){E.complete(),C==null||C.unsubscribe()},void 0,void 0,function(){return p.delete(x)});_.add(i.innerFrom(c(O)).subscribe(C))}}E.next(v?v(w):w)}catch(D){y(D)}var A,R,k},function(){return m(function(w){return w.complete()})},y,function(){return p.clear()},function(){return g=!0,b===0});h.subscribe(_)})}},7835:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retry=void 0;var n=t(7843),i=t(3111),o=t(6640),a=t(4092),s=t(9445);e.retry=function(u){var l;u===void 0&&(u=1/0);var c=(l=u&&typeof u=="object"?u:{count:u}).count,f=c===void 0?1/0:c,h=l.delay,d=l.resetOnSuccess,v=d!==void 0&&d;return f<=0?o.identity:n.operate(function(p,m){var y,b=0,g=function(){var _=!1;y=p.subscribe(i.createOperatorSubscriber(m,function(w){v&&(b=0),m.next(w)},void 0,function(w){if(b++<f){var x=function(){y?(y.unsubscribe(),y=null,g()):_=!0};if(h!=null){var E=typeof h=="number"?a.timer(h):s.innerFrom(h(w,b)),O=i.createOperatorSubscriber(m,function(){O.unsubscribe(),x()},function(){m.complete()});E.subscribe(O)}else x()}else m.error(w)})),_&&(y.unsubscribe(),y=null,g())};g()})}},7843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.operate=e.hasLift=void 0;var n=t(1018);function i(o){return n.isFunction(o==null?void 0:o.lift)}e.hasLift=i,e.operate=function(o){return function(a){if(i(a))return a.lift(function(s){try{return o(s,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},7853:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.using=void 0;var n=t(4662),i=t(9445),o=t(8616);e.using=function(a,s){return new n.Observable(function(u){var l=a(),c=s(l);return(c?i.innerFrom(c):o.EMPTY).subscribe(u),function(){l&&l.unsubscribe()}})}},7857:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.WRITE=e.READ=e.Driver=void 0;var o=t(9305),a=i(t(3466)),s=o.internal.constants.FETCH_ALL,u=o.driver.READ,l=o.driver.WRITE;e.READ=u,e.WRITE=l;var c=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),d.prototype.rxSession=function(v){var p=v===void 0?{}:v,m=p.defaultAccessMode,y=m===void 0?l:m,b=p.bookmarks,g=p.database,_=g===void 0?"":g,w=p.fetchSize,x=p.impersonatedUser,E=p.bookmarkManager,O=p.notificationFilter,C=p.auth;return new a.default({session:this._newSession({defaultAccessMode:y,bookmarkOrBookmarks:b,database:_,impersonatedUser:x,auth:C,reactive:!1,fetchSize:f(w,this._config.fetchSize),bookmarkManager:E,notificationFilter:O,log:this._log}),config:this._config,log:this._log})},d})(o.Driver);function f(h,d){var v=parseInt(h,10);if(v>0||v===s)return v;if(v===0||v<0)throw new Error("The fetch size can only be a positive value or ".concat(s," for ALL. However fetchSize = ").concat(v));return d}e.Driver=c,e.default=c},7961:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var n=t(5267),i=t(5648);e.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),e.async=e.asyncScheduler},7991:(r,e)=>{e.byteLength=function(c){var f=s(c),h=f[0],d=f[1];return 3*(h+d)/4-d},e.toByteArray=function(c){var f,h,d=s(c),v=d[0],p=d[1],m=new i((function(g,_,w){return 3*(_+w)/4-w})(0,v,p)),y=0,b=p>0?v-4:v;for(h=0;h<b;h+=4)f=n[c.charCodeAt(h)]<<18|n[c.charCodeAt(h+1)]<<12|n[c.charCodeAt(h+2)]<<6|n[c.charCodeAt(h+3)],m[y++]=f>>16&255,m[y++]=f>>8&255,m[y++]=255&f;return p===2&&(f=n[c.charCodeAt(h)]<<2|n[c.charCodeAt(h+1)]>>4,m[y++]=255&f),p===1&&(f=n[c.charCodeAt(h)]<<10|n[c.charCodeAt(h+1)]<<4|n[c.charCodeAt(h+2)]>>2,m[y++]=f>>8&255,m[y++]=255&f),m},e.fromByteArray=function(c){for(var f,h=c.length,d=h%3,v=[],p=16383,m=0,y=h-d;m<y;m+=p)v.push(l(c,m,m+p>y?y:m+p));return d===1?(f=c[h-1],v.push(t[f>>2]+t[f<<4&63]+"==")):d===2&&(f=(c[h-2]<<8)+c[h-1],v.push(t[f>>10]+t[f>>4&63]+t[f<<2&63]+"=")),v.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=o[a],n[o.charCodeAt(a)]=a;function s(c){var f=c.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=c.indexOf("=");return h===-1&&(h=f),[h,h===f?0:4-h%4]}function u(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[63&c]}function l(c,f,h){for(var d,v=[],p=f;p<h;p+=3)d=(c[p]<<16&16711680)+(c[p+1]<<8&65280)+(255&c[p+2]),v.push(u(d));return v.join("")}n[45]=62,n[95]=63},8014:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,p,m=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=m.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},o=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,p=f.length;d<v;d++,p++)f[p]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.isSubscription=e.EMPTY_SUBSCRIPTION=e.Subscription=void 0;var a=t(1018),s=t(5788),u=t(7479),l=(function(){function f(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}var h;return f.prototype.unsubscribe=function(){var d,v,p,m,y;if(!this.closed){this.closed=!0;var b=this._parentage;if(b)if(this._parentage=null,Array.isArray(b))try{for(var g=n(b),_=g.next();!_.done;_=g.next())_.value.remove(this)}catch(A){d={error:A}}finally{try{_&&!_.done&&(v=g.return)&&v.call(g)}finally{if(d)throw d.error}}else b.remove(this);var w=this.initialTeardown;if(a.isFunction(w))try{w()}catch(A){y=A instanceof s.UnsubscriptionError?A.errors:[A]}var x=this._finalizers;if(x){this._finalizers=null;try{for(var E=n(x),O=E.next();!O.done;O=E.next()){var C=O.value;try{c(C)}catch(A){y=y??[],A instanceof s.UnsubscriptionError?y=o(o([],i(y)),i(A.errors)):y.push(A)}}}catch(A){p={error:A}}finally{try{O&&!O.done&&(m=E.return)&&m.call(E)}finally{if(p)throw p.error}}}if(y)throw new s.UnsubscriptionError(y)}},f.prototype.add=function(d){var v;if(d&&d!==this)if(this.closed)c(d);else{if(d instanceof f){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=(v=this._finalizers)!==null&&v!==void 0?v:[]).push(d)}},f.prototype._hasParent=function(d){var v=this._parentage;return v===d||Array.isArray(v)&&v.includes(d)},f.prototype._addParent=function(d){var v=this._parentage;this._parentage=Array.isArray(v)?(v.push(d),v):v?[v,d]:d},f.prototype._removeParent=function(d){var v=this._parentage;v===d?this._parentage=null:Array.isArray(v)&&u.arrRemove(v,d)},f.prototype.remove=function(d){var v=this._finalizers;v&&u.arrRemove(v,d),d instanceof f&&d._removeParent(this)},f.EMPTY=((h=new f).closed=!0,h),f})();function c(f){a.isFunction(f)?f():f.unsubscribe()}e.Subscription=l,e.EMPTY_SUBSCRIPTION=l.EMPTY,e.isSubscription=function(f){return f instanceof l||f&&"closed"in f&&a.isFunction(f.remove)&&a.isFunction(f.add)&&a.isFunction(f.unsubscribe)}},8015:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.buffer=function(s){return n.operate(function(u,l){var c=[];return u.subscribe(o.createOperatorSubscriber(l,function(f){return c.push(f)},function(){l.next(c),l.complete()})),a.innerFrom(s).subscribe(o.createOperatorSubscriber(l,function(){var f=c;c=[],l.next(f)},i.noop)),function(){c=null}})}},8031:function(r,e,t){var n=this&&this.__extends||(function(){var p=function(m,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,g){b.__proto__=g}||function(b,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])},p(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=m}p(m,y),m.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}})(),i=this&&this.__awaiter||function(p,m,y,b){return new(y||(y=Promise))(function(g,_){function w(O){try{E(b.next(O))}catch(C){_(C)}}function x(O){try{E(b.throw(O))}catch(C){_(C)}}function E(O){var C;O.done?g(O.value):(C=O.value,C instanceof y?C:new y(function(A){A(C)})).then(w,x)}E((b=b.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var y,b,g,_,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(E){return function(O){return(function(C){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,C[0]&&(w=0)),w;)try{if(y=1,b&&(g=2&C[0]?b.return:C[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,C[1])).done)return g;switch(b=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return w.label++,{value:C[1],done:!1};case 5:w.label++,b=C[1],C=[0];continue;case 7:C=w.ops.pop(),w.trys.pop();continue;default:if(!((g=(g=w.trys).length>0&&g[g.length-1])||C[0]!==6&&C[0]!==2)){w=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){w.label=C[1];break}if(C[0]===6&&w.label<g[1]){w.label=g[1],g=C;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(C);break}g[2]&&w.ops.pop(),w.trys.pop();continue}C=m.call(p,w)}catch(A){C=[6,A],b=0}finally{y=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}})([E,O])}}},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var s=t(7452),u=t(9305),l=a(t(6385)),c=a(t(7666)),f=u.error.PROTOCOL_ERROR,h=u.internal.logger.Logger,d=0;e.createChannelConnection=function(p,m,y,b,g,_,w,x){_===void 0&&(_=null),x===void 0&&(x=function(O){return new s.Channel(O)});var E=x(new s.ChannelConfig(p,m,y.errorCode(),g));return c.default.handshake(E,b).then(function(O){var C=O.protocolVersion,A=O.consumeRemainingBuffer,R=new s.Chunker(E),k=new s.Dechunker,D=new v(E,y,p,b,m.disableLosslessIntegers,_,R,m.notificationFilter,function(L){return c.default.create({version:C,channel:E,chunker:R,dechunker:k,disableLosslessIntegers:m.disableLosslessIntegers,useBigInt:m.useBigInt,serversideRouting:_,server:L.server,log:L.logger,observer:{onObserversCountChange:L._handleOngoingRequestsNumberChange.bind(L),onError:L._handleFatalError.bind(L),onFailure:L._resetOnFailure.bind(L),onProtocolError:L._handleProtocolError.bind(L),onErrorApplyTransformation:function(j){return L.handleAndTransformError(j,L._address)}}})},m.telemetryDisabled,w);return A(function(L){return k.write(L)}),D}).catch(function(O){return E.close().then(function(){throw O})})};var v=(function(p){function m(y,b,g,_,w,x,E,O,C,A,R){w===void 0&&(w=!1),x===void 0&&(x=null),R===void 0&&(R=function(j){});var k,D,L=p.call(this,b)||this;return L._authToken=null,L._idle=!1,L._reseting=!1,L._resetObservers=[],L._id=d++,L._address=g,L._server={address:g.asHostPort()},L._creationTimestamp=Date.now(),L._disableLosslessIntegers=w,L._ch=y,L._chunker=E,L._log=(k=L,new h((D=_)._level,function(j,q){return D._loggerFunction(j,"".concat(k," ").concat(q))})),L._serversideRouting=x,L._notificationFilter=O,L._telemetryDisabledDriverConfig=A===!0,L._telemetryDisabledConnection=!0,L._ssrCallback=R,L._dbConnectionId=null,L._protocol=C(L),L._isBroken=!1,L._log.isDebugEnabled()&&L._log.debug("created towards ".concat(g)),L}return n(m,p),m.prototype.beginTransaction=function(y){return this._sendTelemetryIfEnabled(y),this._protocol.beginTransaction(y)},m.prototype.run=function(y,b,g){return this._sendTelemetryIfEnabled(g),this._protocol.run(y,b,g)},m.prototype._sendTelemetryIfEnabled=function(y){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||y==null||y.apiTelemetryConfig==null||this._protocol.telemetry({api:y.apiTelemetryConfig.api},{onCompleted:y.apiTelemetryConfig.onTelemetrySuccess,onError:y.beforeError})},m.prototype.commitTransaction=function(y){return this._protocol.commitTransaction(y)},m.prototype.rollbackTransaction=function(y){return this._protocol.rollbackTransaction(y)},m.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(m.prototype,"authToken",{get:function(){return this._authToken},set:function(y){this._authToken=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(y){this._dbConnectionId=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(y){this._idleTimestamp=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),m.prototype.connect=function(y,b,g,_){return i(this,void 0,void 0,function(){var w=this;return o(this,function(x){switch(x.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,u.newError)("Connection does not support re-auth");return this._authToken=g,this._protocol.initialized?[3,2]:[4,this._initialize(y,b,g)];case 1:case 3:return[2,x.sent()];case 2:return _?[4,new Promise(function(E,O){w._protocol.logoff({onError:O}),w._protocol.logon({authToken:g,onError:O,onComplete:function(){return E(w)},flush:!0})})]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:g,flush:!0}),[2,this]}})})},m.prototype._initialize=function(y,b,g){var _=this,w=this;return new Promise(function(x,E){_._protocol.initialize({userAgent:y,boltAgent:b,authToken:g,notificationFilter:_._notificationFilter,onError:function(O){return E(O)},onComplete:function(O){var C;if(O){var A=O.server;_.version&&!A||(_.version=A);var R=O.connection_id;if(_.databaseId||(_.databaseId=R),O.hints){var k=O.hints["connection.recv_timeout_seconds"];if(k!=null){var D=(0,u.toNumber)(k);Number.isInteger(D)&&D>0?_._ch.setupReceiveTimeout(1e3*D):_._log.info("Server located at ".concat(_._address," supplied an invalid connection receive timeout value (").concat(D,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}O.hints["telemetry.enabled"]===!0&&(_._telemetryDisabledConnection=!1),_.SSREnabledHint=O.hints["ssr.enabled"]}_._ssrCallback((C=_.SSREnabledHint)!==null&&C!==void 0&&C,"OPEN")}x(w)}})})},m.prototype.protocol=function(){return this._protocol},Object.defineProperty(m.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"version",{get:function(){return this._server.version},set:function(y){this._server.version=y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),m.prototype._handleFatalError=function(y){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||y,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(u.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},m.prototype._setIdle=function(y){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(y)},m.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},m.prototype._queueObserver=function(y){return this._protocol.queueObserverIfProtocolIsNotBroken(y)},m.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},m.prototype.resetAndFlush=function(){var y=this;return new Promise(function(b,g){y._reset({onError:function(_){if(y._isBroken)g(_);else{var w=y._handleProtocolError("Received FAILURE as a response for RESET: ".concat(_));g(w)}},onComplete:function(){b()}})})},m.prototype._resetOnFailure=function(){var y=this;this.isOpen()&&this._reset({onError:function(){y._protocol.resetFailure()},onComplete:function(){y._protocol.resetFailure()}})},m.prototype._reset=function(y){var b=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(y):this._protocol.reset({onError:function(_){y.onError(_)},onComplete:function(){y.onComplete()}});else{this._resetObservers.push(y),this._reseting=!0;var g=function(_){b._reseting=!1;var w=b._resetObservers;b._resetObservers=[],w.forEach(_)};this._protocol.reset({onError:function(_){g(function(w){return w.onError(_)})},onComplete:function(){g(function(_){return _.onComplete()})}})}},m.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},m.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},m.prototype._handleOngoingRequestsNumberChange=function(y){this._idle||(y===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},m.prototype.close=function(){var y;return i(this,void 0,void 0,function(){return o(this,function(b){switch(b.label){case 0:return this._ssrCallback((y=this.SSREnabledHint)!==null&&y!==void 0&&y,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return b.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},m.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},m.prototype._handleProtocolError=function(y){this._protocol.resetFailure(),this._updateCurrentObserver();var b=(0,u.newError)(y,f);return this._handleFatalError(b),b},m})(l.default);e.default=v},8046:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0,e.isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"}},8079:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=void 0;var n=t(7961),i=t(7843),o=t(3111);e.debounceTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=null,f=null,h=null,d=function(){if(c){c.unsubscribe(),c=null;var p=f;f=null,l.next(p)}};function v(){var p=h+a,m=s.now();if(m<p)return c=this.schedule(void 0,p-m),void l.add(c);d()}u.subscribe(o.createOperatorSubscriber(l,function(p){f=p,h=s.now(),c||(c=s.schedule(v,a),l.add(c))},function(){d(),l.complete()},void 0,function(){f=c=null}))})}},8118:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=void 0;var n=t(9445),i=t(3111),o=t(7843);e.catchError=function a(s){return o.operate(function(u,l){var c,f=null,h=!1;f=u.subscribe(i.createOperatorSubscriber(l,void 0,void 0,function(d){c=n.innerFrom(s(d,a(s)(u))),f?(f.unsubscribe(),f=null,c.subscribe(l)):h=!0})),h&&(f.unsubscribe(),f=null,c.subscribe(l))})}},8157:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=void 0;var n=t(1242),i=t(9247),o=t(1018);e.publishReplay=function(a,s,u,l){u&&!o.isFunction(u)&&(l=u);var c=o.isFunction(u)?u:void 0;return function(f){return i.multicast(new n.ReplaySubject(a,s,l),c)(f)}}},8158:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=void 0;var n=t(7302);e.concatAll=function(){return n.mergeAll(1)}},8208:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=void 0;var n=t(2483),i=t(7961),o=t(8014),a=t(7843),s=t(3111),u=t(7479),l=t(1107),c=t(7110);e.windowTime=function(f){for(var h,d,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var m=(h=l.popScheduler(v))!==null&&h!==void 0?h:i.asyncScheduler,y=(d=v[0])!==null&&d!==void 0?d:null,b=v[1]||1/0;return a.operate(function(g,_){var w=[],x=!1,E=function(R){var k=R.window,D=R.subs;k.complete(),D.unsubscribe(),u.arrRemove(w,R),x&&O()},O=function(){if(w){var R=new o.Subscription;_.add(R);var k=new n.Subject,D={window:k,subs:R,seen:0};w.push(D),_.next(k.asObservable()),c.executeSchedule(R,m,function(){return E(D)},f)}};y!==null&&y>=0?c.executeSchedule(_,m,O,y,!0):x=!0,O();var C=function(R){return w.slice().forEach(R)},A=function(R){C(function(k){var D=k.window;return R(D)}),R(_),_.unsubscribe()};return g.subscribe(s.createOperatorSubscriber(_,function(R){C(function(k){k.window.next(R),b<=++k.seen&&E(k)})},function(){return A(function(R){return R.complete()})},function(R){return A(function(k){return k.error(R)})})),function(){w=null}})}},8239:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestWith=void 0;var o=t(2551);e.combineLatestWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.combineLatest.apply(void 0,i([],n(a)))}},8253:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeWith=void 0;var o=t(361);e.mergeWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.merge.apply(void 0,i([],n(a)))}},8264:function(r,e,t){var n=this&&this.__extends||(function(){var y=function(b,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(_[x]=w[x])},y(b,g)};return function(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=b}y(b,g),b.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(y){for(var b,g=1,_=arguments.length;g<_;g++)for(var w in b=arguments[g])Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w]);return y},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(y,b,g,_){_===void 0&&(_=g);var w=Object.getOwnPropertyDescriptor(b,g);w&&!("get"in w?!b.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return b[g]}}),Object.defineProperty(y,_,w)}:function(y,b,g,_){_===void 0&&(_=g),y[_]=b[g]}),a=this&&this.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),s=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var g in y)g!=="default"&&Object.prototype.hasOwnProperty.call(y,g)&&o(b,y,g);return a(b,y),b};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var u=s(t(4027));e.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var l=(function(){function y(){}return y.prototype.hasUpdate=function(){throw new Error("Not Implemented")},y.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},y})();e.ClientCertificateProvider=l;var c=(function(y){function b(){return y!==null&&y.apply(this,arguments)||this}return n(b,y),b.prototype.updateCertificate=function(g){throw new Error("Not implemented")},b})(l);e.RotatingClientCertificateProvider=c;var f=new((function(){function y(){}return y.prototype.rotating=function(b){var g=b.initialCertificate;if(g==null||!h(g))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(u.stringify(g)));var _=i({},g);return new m(_)},y})());function h(y){return y!=null&&typeof y=="object"&&"certfile"in y&&(d(b=y.certfile)||v(b,d))&&"keyfile"in y&&(function(g){function _(w){return typeof w=="string"||w!=null&&typeof w=="object"&&"path"in w&&typeof w.path=="string"&&p("password",w)}return _(g)||v(g,_)})(y.keyfile)&&p("password",y);var b}function d(y){return typeof y=="string"}function v(y,b,g){return g===void 0&&(g=!1),Array.isArray(y)&&(g||y.length>0)&&y.filter(b).length===y.length}function p(y,b){return!(y in b)||b[y]==null||typeof b[y]=="string"}e.clientCertificateProviders=f,Object.freeze(f),e.resolveCertificateProvider=function(y){if(y!=null){if(typeof y=="object"&&"hasUpdate"in y&&"getClientCertificate"in y&&typeof y.getClientCertificate=="function"&&typeof y.hasUpdate=="function")return y;if(h(y)){var b=i({},y);return{getClientCertificate:function(){return b},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(u.stringify(y)))}};var m=(function(){function y(b,g){g===void 0&&(g=!1),this._certificate=b,this._updated=g}return y.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},y.prototype.getClientCertificate=function(){return this._certificate},y.prototype.updateCertificate=function(b){if(!h(b))throw new TypeError("certificate should be ClientCertificate, but got ".concat(u.stringify(b)));this._certificate=i({},b),this._updated=!0},y})()},8275:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.first=void 0;var n=t(2823),i=t(783),o=t(846),a=t(378),s=t(4869),u=t(6640);e.first=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.take(1),f?a.defaultIfEmpty(c):s.throwIfEmpty(function(){return new n.EmptyError}))}}},8320:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(x){for(var E,O=1,C=arguments.length;O<C;O++)for(var A in E=arguments[O])Object.prototype.hasOwnProperty.call(E,A)&&(x[A]=E[A]);return x},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(x,E,O,C){C===void 0&&(C=O);var A=Object.getOwnPropertyDescriptor(E,O);A&&!("get"in A?!E.__esModule:A.writable||A.configurable)||(A={enumerable:!0,get:function(){return E[O]}}),Object.defineProperty(x,C,A)}:function(x,E,O,C){C===void 0&&(C=O),x[C]=E[O]}),o=this&&this.__setModuleDefault||(Object.create?function(x,E){Object.defineProperty(x,"default",{enumerable:!0,value:E})}:function(x,E){x.default=E}),a=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var E={};if(x!=null)for(var O in x)O!=="default"&&Object.prototype.hasOwnProperty.call(x,O)&&i(E,x,O);return o(E,x),E},s=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(397),l=(t(7452),t(7168)),c=a(t(7021)),f=t(9014),h=t(9305),d=s(t(6661)),v=s(t(3321)),p=h.internal.bookmarks.Bookmarks,m=h.internal.constants,y=m.ACCESS_MODE_WRITE,b=m.BOLT_PROTOCOL_V1,g=(h.internal.logger.Logger,h.internal.txConfig.TxConfig),_=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),w=(function(){function x(E,O,C,A,R,k){var D=C===void 0?{}:C,L=D.disableLosslessIntegers,j=D.useBigInt;A===void 0&&(A=function(){return null}),this._server=E||{},this._chunker=O,this._packer=this._createPacker(O),this._unpacker=this._createUnpacker(L,j),this._responseHandler=A(this),this._log=R,this._onProtocolError=k,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:L,useBigInt:j}}return Object.defineProperty(x.prototype,"transformer",{get:function(){var E=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(d.default).map(function(O){return O(E._config,E._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"version",{get:function(){return b},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),x.prototype.packer=function(){return this._packer},x.prototype.packable=function(E){return this._packer.packable(E,this.transformer.toStructure)},x.prototype.unpacker=function(){return this._unpacker},x.prototype.unpack=function(E){return this._unpacker.unpack(E,this.transformer.fromStructure)},x.prototype.transformMetadata=function(E){return E},x.prototype.enrichErrorMetadata=function(E){return n(n({},E),{diagnostic_record:E.diagnostic_record!==null?n(n({},_),E.diagnostic_record):null})},x.prototype.initialize=function(E){var O=this,C=E===void 0?{}:E,A=C.userAgent,R=(C.boltAgent,C.authToken),k=C.notificationFilter,D=C.onError,L=C.onComplete,j=new f.LoginObserver({onError:function(q){return O._onLoginError(q,D)},onCompleted:function(q){return O._onLoginCompleted(q,L)}});return(0,u.assertNotificationFilterIsEmpty)(k,this._onProtocolError,j),this.write(c.default.init(A,R),j,!0),j},x.prototype.logoff=function(E){var O=E===void 0?{}:E,C=O.onComplete,A=O.onError,R=(O.flush,new f.LogoffObserver({onCompleted:C,onError:A})),k=(0,h.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(k.message),R.onError(k),k},x.prototype.logon=function(E){var O=this,C=E===void 0?{}:E,A=C.authToken,R=C.onComplete,k=C.onError,D=(C.flush,new f.LoginObserver({onCompleted:function(){return O._onLoginCompleted({},A,R)},onError:function(j){return O._onLoginError(j,k)}})),L=(0,h.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(L.message),D.onError(L),L},x.prototype.prepareToClose=function(){},x.prototype.beginTransaction=function(E){var O=E===void 0?{}:E,C=O.bookmarks,A=O.txConfig,R=O.database,k=O.mode,D=O.impersonatedUser,L=O.notificationFilter,j=O.beforeError,q=O.afterError,B=O.beforeComplete,U=O.afterComplete;return this.run("BEGIN",C?C.asBeginTransactionParameters():{},{bookmarks:C,txConfig:A,database:R,mode:k,impersonatedUser:D,notificationFilter:L,beforeError:j,afterError:q,beforeComplete:B,afterComplete:U,flush:!1})},x.prototype.commitTransaction=function(E){var O=E===void 0?{}:E,C=O.beforeError,A=O.afterError,R=O.beforeComplete,k=O.afterComplete;return this.run("COMMIT",{},{bookmarks:p.empty(),txConfig:g.empty(),mode:y,beforeError:C,afterError:A,beforeComplete:R,afterComplete:k})},x.prototype.rollbackTransaction=function(E){var O=E===void 0?{}:E,C=O.beforeError,A=O.afterError,R=O.beforeComplete,k=O.afterComplete;return this.run("ROLLBACK",{},{bookmarks:p.empty(),txConfig:g.empty(),mode:y,beforeError:C,afterError:A,beforeComplete:R,afterComplete:k})},x.prototype.run=function(E,O,C){var A=C===void 0?{}:C,R=(A.bookmarks,A.txConfig),k=A.database,D=(A.mode,A.impersonatedUser),L=A.notificationFilter,j=A.beforeKeys,q=A.afterKeys,B=A.beforeError,U=A.afterError,W=A.beforeComplete,H=A.afterComplete,Y=A.flush,Z=Y===void 0||Y,ce=A.highRecordWatermark,$=ce===void 0?Number.MAX_VALUE:ce,K=A.lowRecordWatermark,ie=K===void 0?Number.MAX_VALUE:K,ae=new f.ResultStreamObserver({server:this._server,beforeKeys:j,afterKeys:q,beforeError:B,afterError:U,beforeComplete:W,afterComplete:H,highRecordWatermark:$,lowRecordWatermark:ie});return(0,u.assertTxConfigIsEmpty)(R,this._onProtocolError,ae),(0,u.assertDatabaseIsEmpty)(k,this._onProtocolError,ae),(0,u.assertImpersonatedUserIsEmpty)(D,this._onProtocolError,ae),(0,u.assertNotificationFilterIsEmpty)(L,this._onProtocolError,ae),this.write(c.default.run(E,O),ae,!1),this.write(c.default.pullAll(),ae,Z),ae},Object.defineProperty(x.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),x.prototype.reset=function(E){var O=E===void 0?{}:E,C=O.onError,A=O.onComplete,R=new f.ResetObserver({onProtocolError:this._onProtocolError,onError:C,onComplete:A});return this.write(c.default.reset(),R,!0),R},x.prototype.telemetry=function(E,O){E.api;var C=O===void 0?{}:O,A=(C.onError,C.onCompleted),R=new f.CompletedObserver;return A&&A(),R},x.prototype._createPacker=function(E){return new l.v1.Packer(E)},x.prototype._createUnpacker=function(E,O){return new l.v1.Unpacker(E,O)},x.prototype.write=function(E,O,C){if(this.queueObserverIfProtocolIsNotBroken(O)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(E)),this._lastMessageSignature=E.signature;var A=new l.structure.Structure(E.signature,E.fields);this.packable(A)(),this._chunker.messageBoundary(),C&&this._chunker.flush()}},x.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===c.SIGNATURES.HELLO||this._lastMessageSignature===c.SIGNATURES.LOGON},x.prototype.isLastMessageReset=function(){return this._lastMessageSignature===c.SIGNATURES.RESET},x.prototype.notifyFatalError=function(E){return this._fatalError=E,this._responseHandler._notifyErrorToObservers(E)},x.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},x.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},x.prototype.queueObserverIfProtocolIsNotBroken=function(E){return this.isBroken()?(this.notifyFatalErrorToObserver(E),!1):this._responseHandler._queueObserver(E)},x.prototype.isBroken=function(){return!!this._fatalError},x.prototype.notifyFatalErrorToObserver=function(E){E&&E.onError&&E.onError(this._fatalError)},x.prototype.resetFailure=function(){this._responseHandler._resetFailure()},x.prototype._onLoginCompleted=function(E,O,C){if(this._initialized=!0,this._authToken=O,E){var A=E.server;this._server.version||(this._server.version=A)}C&&C(E)},x.prototype._onLoginError=function(E,O){this._onProtocolError(E.message),O&&O(E)},x})();e.default=w},8330:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=void 0;var i=t(8616),o=t(7843),a=t(3111);e.takeLast=function(s){return s<=0?function(){return i.EMPTY}:o.operate(function(u,l){var c=[];u.subscribe(a.createOperatorSubscriber(l,function(f){c.push(f),s<c.length&&c.shift()},function(){var f,h;try{for(var d=n(c),v=d.next();!v.done;v=d.next()){var p=v.value;l.next(p)}}catch(m){f={error:m}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}l.complete()},void 0,function(){c=null}))})}},8341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7509);function i(a){return Promise.resolve([a])}var o=(function(){function a(s){this._resolverFunction=s??i}return a.prototype.resolve=function(s){var u=this;return new Promise(function(l){return l(u._resolverFunction(s.asHostPort()))}).then(function(l){if(!Array.isArray(l))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(l));return l.map(function(c){return n.ServerAddress.fromUrl(c)})})},a})();e.default=o},8522:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=void 0;var n=t(8616),i=t(7843),o=t(3111),a=t(9445),s=t(4092);e.repeat=function(u){var l,c,f=1/0;return u!=null&&(typeof u=="object"?(l=u.count,f=l===void 0?1/0:l,c=u.delay):f=u),f<=0?function(){return n.EMPTY}:i.operate(function(h,d){var v,p=0,m=function(){if(v==null||v.unsubscribe(),v=null,c!=null){var b=typeof c=="number"?s.timer(c):a.innerFrom(c(p)),g=o.createOperatorSubscriber(d,function(){g.unsubscribe(),y()});b.subscribe(g)}else y()},y=function(){var b=!1;v=h.subscribe(o.createOperatorSubscriber(d,void 0,function(){++p<f?v?m():b=!0:d.complete()})),b&&m()};y()})}},8535:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsOrArgArray=void 0;var t=Array.isArray;e.argsOrArgArray=function(n){return n.length===1&&t(n[0])?n[0]:n}},8538:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.zipWith=void 0;var o=t(5918);e.zipWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.zip.apply(void 0,i([],n(a)))}},8561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindNodeCallback=void 0;var n=t(1439);e.bindNodeCallback=function(i,o,a){return n.bindCallbackInternals(!0,i,o,a)}},8613:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=void 0;var n=t(1018);e.isScheduler=function(i){return i&&n.isFunction(i.schedule)}},8616:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var n=t(4662);e.EMPTY=new n.Observable(function(i){return i.complete()}),e.empty=function(i){return i?(function(o){return new n.Observable(function(a){return o.schedule(function(){return a.complete()})})})(i):e.EMPTY}},8624:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scan=void 0;var n=t(7843),i=t(6384);e.scan=function(o,a){return n.operate(i.scanInternals(o,a,arguments.length>=2,!0))}},8655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var n=t(4662),i=t(1342);e.NEVER=new n.Observable(i.noop),e.never=function(){return e.NEVER}},8669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.last=void 0;var n=t(2823),i=t(783),o=t(8330),a=t(4869),s=t(378),u=t(6640);e.last=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.takeLast(1),f?s.defaultIfEmpty(c):a.throwIfEmpty(function(){return new n.EmptyError}))}}},8712:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchScan=void 0;var n=t(3879),i=t(7843);e.switchScan=function(o,a){return i.operate(function(s,u){var l=a;return n.switchMap(function(c,f){return o(l,c,f)},function(c,f){return l=f,f})(s).subscribe(u),function(){l=null}})}},8731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7452),i=t(9305),o=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"];function a(u,l){return{major:u,minor:l}}function s(u){for(var l=[],c=u[3],f=u[2],h=0;h<=u[1];h++)l.push({major:c,minor:f-h});return l}e.default=function(u,l){return(function(c,f){var h=this;return new Promise(function(d,v){var p=function(m){v(m)};c.onerror=p.bind(h),c._error&&p(c._error),c.onmessage=function(m){try{var y=(function(b,g){var _=[b.readUInt8(),b.readUInt8(),b.readUInt8(),b.readUInt8()];if(_[0]===72&&_[1]===84&&_[2]===84&&_[3]===80)throw g.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(_[3]+"."+_[2])})(m,f);d({protocolVersion:y,capabilites:0,buffer:m,consumeRemainingBuffer:function(b){m.hasRemaining()&&b(m.readSlice(m.remaining()))}})}catch(b){v(b)}},c.write((function(m){if(m.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var y=(0,n.alloc)(20);return y.writeInt32(1616949271),m.forEach(function(b){if(b instanceof Array){var g=b[0],_=g.major,w=(x=g.minor)-b[1].minor;y.writeInt32(w<<16|x<<8|_)}else{_=b.major;var x=b.minor;y.writeInt32(x<<8|_)}}),y.reset(),y})([a(255,1),[a(5,8),a(5,0)],[a(4,4),a(4,2)],a(3,0)]))})})(u,l).then(function(c){return c.protocolVersion===255.1?(function(f,h){for(var d=h.readVarInt(),v=[],p=0;p<d;p++){var m=[h.readUInt8(),h.readUInt8(),h.readUInt8(),h.readUInt8()];v=v.concat(s(m))}h.readVarInt();var y=0,b=0;for(v.sort(function(_,w){return Number(_.major)!==Number(w.major)?Number(w.major)-Number(_.major):Number(w.minor)-Number(_.minor)}),p=0;p<v.length;p++){var g=v[p];if(o.includes(g.major+"."+g.minor)){y=g.major,b=g.minor;break}}return new Promise(function(_,w){try{var x=(0,n.alloc)(5);x.writeInt32(b<<8|y),x.writeVarInt(0),f.write(x),_({protocolVersion:+(y+"."+b),capabilites:0,consumeRemainingBuffer:function(E){h.hasRemaining()&&E(h.readSlice(h.remaining()))}})}catch(E){w(E)}})})(u,c.buffer):c})}},8766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=void 0;var n=t(3865),i=t(846),o=t(490),a=t(3218),s=t(983),u=t(9445);e.delayWhen=function l(c,f){return f?function(h){return n.concat(f.pipe(i.take(1),o.ignoreElements()),h.pipe(l(c)))}:s.mergeMap(function(h,d){return u.innerFrom(c(h,d)).pipe(i.take(1),a.mapTo(h))})}},8774:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=void 0;var n=t(3879),i=t(6640);e.switchAll=function(){return n.switchMap(i.identity)}},8784:(r,e,t)=>{var n=t(4704);r.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},8808:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleIterable=void 0;var n=t(4662),i=t(1964),o=t(1018),a=t(7110);e.scheduleIterable=function(s,u){return new n.Observable(function(l){var c;return a.executeSchedule(l,u,function(){c=s[i.iterator](),a.executeSchedule(l,u,function(){var f,h,d;try{h=(f=c.next()).value,d=f.done}catch(v){return void l.error(v)}d?l.complete():l.next(h)},0,!0)}),function(){return o.isFunction(c==null?void 0:c.return)&&c.return()}})}},8813:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(Cn,Fo,Qi,Di){Di===void 0&&(Di=Qi),Object.defineProperty(Cn,Di,{enumerable:!0,get:function(){return Fo[Qi]}})}:function(Cn,Fo,Qi,Di){Di===void 0&&(Di=Qi),Cn[Di]=Fo[Qi]}),i=this&&this.__exportStar||function(Cn,Fo){for(var Qi in Cn)Qi==="default"||Object.prototype.hasOwnProperty.call(Fo,Qi)||n(Fo,Cn,Qi)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var o=t(4662);Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return o.Observable}});var a=t(8918);Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return a.ConnectableObservable}});var s=t(3327);Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return s.observable}});var u=t(3110);Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return u.animationFrames}});var l=t(2483);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return l.Subject}});var c=t(1637);Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var f=t(1242);Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var h=t(95);Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return h.AsyncSubject}});var d=t(3692);Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var v=t(7961);Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var p=t(2886);Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var m=t(3862);Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}});var y=t(182);Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var b=t(8986);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return b.Scheduler}});var g=t(8014);Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return g.Subscription}});var _=t(5);Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return _.Subscriber}});var w=t(7800);Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return w.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return w.NotificationKind}});var x=t(2706);Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return x.pipe}});var E=t(1342);Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return E.noop}});var O=t(6640);Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return O.identity}});var C=t(1751);Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return C.isObservable}});var A=t(6894);Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return A.lastValueFrom}});var R=t(9060);Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return R.firstValueFrom}});var k=t(7057);Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return k.ArgumentOutOfRangeError}});var D=t(2823);Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return D.EmptyError}});var L=t(1759);Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return L.NotFoundError}});var j=t(9686);Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return j.ObjectUnsubscribedError}});var q=t(1505);Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return q.SequenceError}});var B=t(1554);Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return B.TimeoutError}});var U=t(5788);Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return U.UnsubscriptionError}});var W=t(2713);Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return W.bindCallback}});var H=t(8561);Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return H.bindNodeCallback}});var Y=t(3247);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return Y.combineLatest}});var Z=t(3865);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return Z.concat}});var ce=t(7579);Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return ce.connectable}});var $=t(9353);Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return $.defer}});var K=t(8616);Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return K.empty}});var ie=t(9105);Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return ie.forkJoin}});var ae=t(4917);Object.defineProperty(e,"from",{enumerable:!0,get:function(){return ae.from}});var le=t(5337);Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return le.fromEvent}});var te=t(347);Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return te.fromEventPattern}});var ee=t(7610);Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return ee.generate}});var re=t(4209);Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return re.iif}});var he=t(6472);Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return he.interval}});var ve=t(2833);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ve.merge}});var _e=t(8655);Object.defineProperty(e,"never",{enumerable:!0,get:function(){return _e.never}});var Oe=t(1004);Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Oe.of}});var Pe=t(6102);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Pe.onErrorResumeNext}});var me=t(7740);Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return me.pairs}});var F=t(1699);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return F.partition}});var G=t(5584);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return G.race}});var X=t(9376);Object.defineProperty(e,"range",{enumerable:!0,get:function(){return X.range}});var se=t(1103);Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return se.throwError}});var pe=t(4092);Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return pe.timer}});var ge=t(7853);Object.defineProperty(e,"using",{enumerable:!0,get:function(){return ge.using}});var xe=t(7286);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return xe.zip}});var Ne=t(1656);Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Ne.scheduled}});var He=t(8616);Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return He.EMPTY}});var at=t(8655);Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return at.NEVER}}),i(t(6038),e);var Ze=t(3413);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Ze.config}});var et=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return et.audit}});var Qe=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Qe.auditTime}});var Xe=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Xe.buffer}});var ke=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return ke.bufferCount}});var oe=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return oe.bufferTime}});var Ee=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Ee.bufferToggle}});var Re=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Re.bufferWhen}});var De=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return De.catchError}});var Me=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Me.combineAll}});var it=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return it.combineLatestAll}});var Fe=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Fe.combineLatestWith}});var ut=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ut.concatAll}});var rt=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return rt.concatMap}});var ft=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return ft.concatMapTo}});var xt=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return xt.concatWith}});var yt=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return yt.connect}});var nt=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return nt.count}});var It=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return It.debounce}});var St=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return St.debounceTime}});var or=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return or.defaultIfEmpty}});var rr=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return rr.delay}});var Gt=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Gt.delayWhen}});var Pt=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return Pt.dematerialize}});var ur=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ur.distinct}});var nr=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return nr.distinctUntilChanged}});var Ir=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Ir.distinctUntilKeyChanged}});var Kr=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Kr.elementAt}});var Dt=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Dt.endWith}});var fr=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return fr.every}});var Br=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Br.exhaust}});var Wr=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Wr.exhaustAll}});var yn=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return yn.exhaustMap}});var cn=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return cn.expand}});var mr=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return mr.filter}});var Sr=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Sr.finalize}});var gr=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return gr.find}});var wi=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return wi.findIndex}});var Dn=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Dn.first}});var Ma=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ma.groupBy}});var ws=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ws.ignoreElements}});var No=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return No.isEmpty}});var ca=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return ca.last}});var jo=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return jo.map}});var Es=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Es.mapTo}});var Os=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Os.materialize}});var xs=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return xs.max}});var Zi=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Zi.mergeAll}});var hr=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return hr.flatMap}});var ar=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return ar.mergeMap}});var La=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return La.mergeMapTo}});var Na=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Na.mergeScan}});var Al=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Al.mergeWith}});var Yn=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Yn.min}});var ja=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return ja.multicast}});var Zr=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Zr.observeOn}});var mo=t(1226);Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return mo.onErrorResumeNextWith}});var fn=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return fn.pairwise}});var su=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return su.pluck}});var Ss=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Ss.publish}});var Sn=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Sn.publishBehavior}});var Rl=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Rl.publishLast}});var pf=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return pf.publishReplay}});var Il=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Il.raceWith}});var kl=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return kl.reduce}});var uu=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return uu.repeat}});var gf=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return gf.repeatWhen}});var Xn=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Xn.retry}});var Dl=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Dl.retryWhen}});var $n=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return $n.refCount}});var Fa=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Fa.sample}});var Ml=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Ml.sampleTime}});var bo=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return bo.scan}});var lu=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return lu.sequenceEqual}});var cu=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return cu.share}});var Fr=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Fr.shareReplay}});var _o=t(5382);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return _o.single}});var fu=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return fu.skip}});var Ed=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Ed.skipLast}});var Ll=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Ll.skipUntil}});var Od=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Od.skipWhile}});var Nl=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Nl.startWith}});var hu=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return hu.subscribeOn}});var Ba=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Ba.switchAll}});var xd=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return xd.switchMap}});var yf=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return yf.switchMapTo}});var du=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return du.switchScan}});var jl=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return jl.take}});var Fl=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Fl.takeLast}});var mf=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return mf.takeUntil}});var Bl=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Bl.takeWhile}});var Ul=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Ul.tap}});var kr=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return kr.throttle}});var $t=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return $t.throttleTime}});var ql=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return ql.throwIfEmpty}});var Ts=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Ts.timeInterval}});var bf=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return bf.timeout}});var _f=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return _f.timeoutWith}});var Sd=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Sd.timestamp}});var Td=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Td.toArray}});var wf=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return wf.window}});var Ua=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Ua.windowCount}});var hn=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return hn.windowTime}});var vu=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return vu.windowToggle}});var Kn=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Kn.windowWhen}});var Cs=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Cs.withLatestFrom}});var zl=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return zl.zipAll}});var Tn=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Tn.zipWith}})},8831:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.bufferWhen=function(s){return n.operate(function(u,l){var c=null,f=null,h=function(){f==null||f.unsubscribe();var d=c;c=[],d&&l.next(d),a.innerFrom(s()).subscribe(f=o.createOperatorSubscriber(l,h,i.noop))};h(),u.subscribe(o.createOperatorSubscriber(l,function(d){return c==null?void 0:c.push(d)},function(){c&&l.next(c),l.complete()},void 0,function(){return c=f=null}))})}},8888:(r,e,t)=>{var n=t(5636).Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(v){var p;switch(this.encoding=(function(m){var y=(function(b){if(!b)return"utf8";for(var g;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(g)return;b=(""+b).toLowerCase(),g=!0}})(m);if(typeof y!="string"&&(n.isEncoding===i||!i(m)))throw new Error("Unknown encoding: "+m);return y||m})(v),this.encoding){case"utf16le":this.text=u,this.end=l,p=4;break;case"utf8":this.fillLast=s,p=4;break;case"base64":this.text=c,this.end=f,p=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(p)}function a(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function s(v){var p=this.lastTotal-this.lastNeed,m=(function(y,b){if((192&b[0])!=128)return y.lastNeed=0,"";if(y.lastNeed>1&&b.length>1){if((192&b[1])!=128)return y.lastNeed=1,"";if(y.lastNeed>2&&b.length>2&&(192&b[2])!=128)return y.lastNeed=2,""}})(this,v);return m!==void 0?m:this.lastNeed<=v.length?(v.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,p,0,v.length),void(this.lastNeed-=v.length))}function u(v,p){if((v.length-p)%2==0){var m=v.toString("utf16le",p);if(m){var y=m.charCodeAt(m.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",p,v.length-1)}function l(v){var p=v&&v.length?this.write(v):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return p+this.lastChar.toString("utf16le",0,m)}return p}function c(v,p){var m=(v.length-p)%3;return m===0?v.toString("base64",p):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",p,v.length-m))}function f(v){var p=v&&v.length?this.write(v):"";return this.lastNeed?p+this.lastChar.toString("base64",0,3-this.lastNeed):p}function h(v){return v.toString(this.encoding)}function d(v){return v&&v.length?this.write(v):""}e.StringDecoder=o,o.prototype.write=function(v){if(v.length===0)return"";var p,m;if(this.lastNeed){if((p=this.fillLast(v))===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<v.length?p?p+this.text(v,m):this.text(v,m):p||""},o.prototype.end=function(v){var p=v&&v.length?this.write(v):"";return this.lastNeed?p+"":p},o.prototype.text=function(v,p){var m=(function(b,g,_){var w=g.length-1;if(w<_)return 0;var x=a(g[w]);return x>=0?(x>0&&(b.lastNeed=x-1),x):--w<_||x===-2?0:(x=a(g[w]))>=0?(x>0&&(b.lastNeed=x-2),x):--w<_||x===-2?0:(x=a(g[w]))>=0?(x>0&&(x===2?x=0:b.lastNeed=x-3),x):0})(this,v,p);if(!this.lastNeed)return v.toString("utf8",p);this.lastTotal=m;var y=v.length-(m-this.lastNeed);return v.copy(this.lastChar,0,y),v.toString("utf8",p,y)},o.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},8917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n,i){this.keys=t,this.records=n,this.summary=i}},8918:function(r,e,t){var n=this&&this.__extends||(function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(d[p]=v[p])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}c(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectableObservable=void 0;var i=t(4662),o=t(8014),a=t(7561),s=t(3111),u=t(7843),l=(function(c){function f(h,d){var v=c.call(this)||this;return v.source=h,v.subjectFactory=d,v._subject=null,v._refCount=0,v._connection=null,u.hasLift(h)&&(v.lift=h.lift),v}return n(f,c),f.prototype._subscribe=function(h){return this.getSubject().subscribe(h)},f.prototype.getSubject=function(){var h=this._subject;return h&&!h.isStopped||(this._subject=this.subjectFactory()),this._subject},f.prototype._teardown=function(){this._refCount=0;var h=this._connection;this._subject=this._connection=null,h==null||h.unsubscribe()},f.prototype.connect=function(){var h=this,d=this._connection;if(!d){d=this._connection=new o.Subscription;var v=this.getSubject();d.add(this.source.subscribe(s.createOperatorSubscriber(v,void 0,function(){h._teardown(),v.complete()},function(p){h._teardown(),v.error(p)},function(){return h._teardown()}))),d.closed&&(this._connection=null,d=o.Subscription.EMPTY)}return d},f.prototype.refCount=function(){return a.refCount()(this)},f})(i.Observable);e.ConnectableObservable=l},8937:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=void 0;var n=t(6640),i=t(7843),o=t(3111);function a(s,u){return s===u}e.distinctUntilChanged=function(s,u){return u===void 0&&(u=n.identity),s=s??a,i.operate(function(l,c){var f,h=!0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v=u(d);!h&&s(f,v)||(h=!1,f=v,c.next(d))}))})}},8941:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;var n=t(7843),i=t(3111),o=t(9445);e.throttle=function(a,s){return n.operate(function(u,l){var c=s??{},f=c.leading,h=f===void 0||f,d=c.trailing,v=d!==void 0&&d,p=!1,m=null,y=null,b=!1,g=function(){y==null||y.unsubscribe(),y=null,v&&(x(),b&&l.complete())},_=function(){y=null,b&&l.complete()},w=function(E){return y=o.innerFrom(a(E)).subscribe(i.createOperatorSubscriber(l,g,_))},x=function(){if(p){p=!1;var E=m;m=null,l.next(E),!b&&w(E)}};u.subscribe(i.createOperatorSubscriber(l,function(E){p=!0,m=E,(!y||y.closed)&&(h?x():w(E))},function(){b=!0,(!(v&&p&&y)||y.closed)&&l.complete()}))})}},8960:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=void 0;var n=t(7843);e.subscribeOn=function(i,o){return o===void 0&&(o=0),n.operate(function(a,s){s.add(i.schedule(function(){return a.subscribe(s)},o))})}},8977:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,p=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(d=p.next()).done;)m.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=p.return)&&h.call(p)}finally{if(v)throw v.error}}return m},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.share=void 0;var o=t(9445),a=t(2483),s=t(5),u=t(7843);function l(c,f){for(var h=[],d=2;d<arguments.length;d++)h[d-2]=arguments[d];if(f!==!0){if(f!==!1){var v=new s.SafeSubscriber({next:function(){v.unsubscribe(),c()}});return o.innerFrom(f.apply(void 0,i([],n(h)))).subscribe(v)}}else c()}e.share=function(c){c===void 0&&(c={});var f=c.connector,h=f===void 0?function(){return new a.Subject}:f,d=c.resetOnError,v=d===void 0||d,p=c.resetOnComplete,m=p===void 0||p,y=c.resetOnRefCountZero,b=y===void 0||y;return function(g){var _,w,x,E=0,O=!1,C=!1,A=function(){w==null||w.unsubscribe(),w=void 0},R=function(){A(),_=x=void 0,O=C=!1},k=function(){var D=_;R(),D==null||D.unsubscribe()};return u.operate(function(D,L){E++,C||O||A();var j=x=x??h();L.add(function(){--E!==0||C||O||(w=l(k,b))}),j.subscribe(L),!_&&E>0&&(_=new s.SafeSubscriber({next:function(q){return j.next(q)},error:function(q){C=!0,A(),w=l(R,v,q),j.error(q)},complete:function(){O=!0,A(),w=l(R,m),j.complete()}}),o.innerFrom(D).subscribe(_))})(g)}}},8986:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;var n=t(9568),i=(function(){function o(a,s){s===void 0&&(s=o.now),this.schedulerActionCtor=a,this.now=s}return o.prototype.schedule=function(a,s,u){return s===void 0&&(s=0),new this.schedulerActionCtor(this,a).schedule(u,s)},o.now=n.dateTimestampProvider.now,o})();e.Scheduler=i},8987:function(r,e,t){var n=this&&this.__extends||(function(){var w=function(x,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,C){O.__proto__=C}||function(O,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(O[A]=C[A])},w(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=x}w(x,E),x.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}})(),i=this&&this.__awaiter||function(w,x,E,O){return new(E||(E=Promise))(function(C,A){function R(L){try{D(O.next(L))}catch(j){A(j)}}function k(L){try{D(O.throw(L))}catch(j){A(j)}}function D(L){var j;L.done?C(L.value):(j=L.value,j instanceof E?j:new E(function(q){q(j)})).then(R,k)}D((O=O.apply(w,x||[])).next())})},o=this&&this.__generator||function(w,x){var E,O,C,A,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return A={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function k(D){return function(L){return(function(j){if(E)throw new TypeError("Generator is already executing.");for(;A&&(A=0,j[0]&&(R=0)),R;)try{if(E=1,O&&(C=2&j[0]?O.return:j[0]?O.throw||((C=O.return)&&C.call(O),0):O.next)&&!(C=C.call(O,j[1])).done)return C;switch(O=0,C&&(j=[2&j[0],C.value]),j[0]){case 0:case 1:C=j;break;case 4:return R.label++,{value:j[1],done:!1};case 5:R.label++,O=j[1],j=[0];continue;case 7:j=R.ops.pop(),R.trys.pop();continue;default:if(!((C=(C=R.trys).length>0&&C[C.length-1])||j[0]!==6&&j[0]!==2)){R=0;continue}if(j[0]===3&&(!C||j[1]>C[0]&&j[1]<C[3])){R.label=j[1];break}if(j[0]===6&&R.label<C[1]){R.label=C[1],C=j;break}if(C&&R.label<C[2]){R.label=C[2],R.ops.push(j);break}C[2]&&R.ops.pop(),R.trys.pop();continue}j=x.call(w,R)}catch(q){j=[6,q],O=0}finally{E=C=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}})([D,L])}}},a=this&&this.__read||function(w,x){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var O,C,A=E.call(w),R=[];try{for(;(x===void 0||x-- >0)&&!(O=A.next()).done;)R.push(O.value)}catch(k){C={error:k}}finally{try{O&&!O.done&&(E=A.return)&&E.call(A)}finally{if(C)throw C.error}}return R},s=this&&this.__spreadArray||function(w,x,E){if(E||arguments.length===2)for(var O,C=0,A=x.length;C<A;C++)!O&&C in x||(O||(O=Array.prototype.slice.call(x,0,C)),O[C]=x[C]);return w.concat(O||Array.prototype.slice.call(x))},u=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var l=t(7721),c=t(9305),f=u(t(1839)),h=t(6781),d=u(t(4531)),v=u(t(4271)),p=c.error.SERVICE_UNAVAILABLE,m=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],y=c.internal.pool,b=y.Pool,g=y.PoolConfig,_=(function(w){function x(E,O){var C=E.id,A=E.config,R=E.log,k=E.userAgent,D=E.boltAgent,L=E.authTokenManager,j=E.newPool,q=j===void 0?function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];return new(b.bind.apply(b,s([void 0],a(U),!1)))}:j;O===void 0&&(O=null);var B=w.call(this)||this;return B._id=C,B._config=A,B._log=R,B._clientCertificateHolder=new v.default({clientCertificateProvider:B._config.clientCertificate}),B._authenticationProvider=new f.default({authTokenManager:L,userAgent:k,boltAgent:D}),B._livenessCheckProvider=new d.default({connectionLivenessCheckTimeout:A.connectionLivenessCheckTimeout}),B._userAgent=k,B._boltAgent=D,B._createChannelConnection=O||function(U){return i(B,void 0,void 0,function(){var W,H;return o(this,function(Y){switch(Y.label){case 0:return W=l.createChannelConnection,H=[U,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,W.apply(void 0,H.concat([Y.sent()]))]}})})},B._connectionPool=q({create:B._createConnection.bind(B),destroy:B._destroyConnection.bind(B),validateOnAcquire:B._validateConnectionOnAcquire.bind(B),validateOnRelease:B._validateConnectionOnRelease.bind(B),installIdleObserver:x._installIdleObserverOnConnection.bind(B),removeIdleObserver:x._removeIdleObserverOnConnection.bind(B),config:g.fromDriverConfig(A),log:B._log}),B._openConnections={},B}return n(x,w),x.prototype._createConnectionErrorHandler=function(){return new l.ConnectionErrorHandler(p)},x.prototype._getClientCertificate=function(){return i(this,void 0,void 0,function(){return o(this,function(E){return[2,this._config.clientCertificate.getClientCertificate()]})})},x.prototype._createConnection=function(E,O,C){var A=this,R=E.auth;return this._createChannelConnection(O).then(function(k){return k.release=function(){return k.idleTimestamp=Date.now(),C(O,k)},A._openConnections[k.id]=k,A._authenticationProvider.authenticate({connection:k,auth:R}).catch(function(D){throw A._destroyConnection(k),D})})},x.prototype._validateConnectionOnAcquire=function(E,O){var C=E.auth,A=E.skipReAuth;return i(this,void 0,void 0,function(){var R,k;return o(this,function(D){switch(D.label){case 0:if(!this._validateConnection(O))return[2,!1];D.label=1;case 1:return D.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(O)];case 2:return D.sent(),[3,4];case 3:return R=D.sent(),this._log.debug("The connection ".concat(O.id," is not alive because of an error ").concat(R.code," '").concat(R.message,"'")),[2,!1];case 4:return D.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:O,auth:C,skipReAuth:A})];case 5:return D.sent(),[2,!0];case 6:return k=D.sent(),this._log.debug("The connection ".concat(O.id," is not valid because of an error ").concat(k.code," '").concat(k.message,"'")),[2,!1];case 7:return[2]}})})},x.prototype._validateConnectionOnRelease=function(E){return E._sticky!==!0&&this._validateConnection(E)},x.prototype._validateConnection=function(E){if(!E.isOpen())return!1;var O=this._config.maxConnectionLifetime;return!(Date.now()-E.creationTimestamp>O)},x.prototype._destroyConnection=function(E){return delete this._openConnections[E.id],E.close()},x.prototype._verifyConnectivityAndGetServerVersion=function(E){var O=E.address;return i(this,void 0,void 0,function(){var C,A;return o(this,function(R){switch(R.label){case 0:return[4,this._connectionPool.acquire({},O)];case 1:C=R.sent(),A=new c.ServerInfo(C.server,C.protocol().version),R.label=2;case 2:return R.trys.push([2,,5,7]),C.protocol().isLastMessageLogon()?[3,4]:[4,C.resetAndFlush()];case 3:R.sent(),R.label=4;case 4:return[3,7];case 5:return[4,C.release()];case 6:return R.sent(),[7];case 7:return[2,A]}})})},x.prototype._verifyAuthentication=function(E){var O=E.getAddress,C=E.auth;return i(this,void 0,void 0,function(){var A,R,k,D,L,j;return o(this,function(q){switch(q.label){case 0:A=[],q.label=1;case 1:return q.trys.push([1,8,9,11]),[4,O()];case 2:return R=q.sent(),[4,this._connectionPool.acquire({auth:C,skipReAuth:!0},R)];case 3:if(k=q.sent(),A.push(k),D=!k.protocol().isLastMessageLogon(),!k.supportsReAuth)throw(0,c.newError)("Driver is connected to a database that does not support user switch.");return D&&k.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:k,auth:C,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return q.sent(),[3,7];case 5:return!D||k.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:C},R,{requireNew:!0})];case 6:(L=q.sent())._sticky=!0,A.push(L),q.label=7;case 7:return[2,!0];case 8:if(j=q.sent(),m.includes(j.code))return[2,!1];throw j;case 9:return[4,Promise.all(A.map(function(B){return B.release()}))];case 10:return q.sent(),[7];case 11:return[2]}})})},x.prototype._verifyStickyConnection=function(E){var O=E.auth,C=E.connection;return E.address,i(this,void 0,void 0,function(){var A,R;return o(this,function(k){switch(k.label){case 0:return A=h.object.equals(O,C.authToken),R=!A,C._sticky=A&&!C.supportsReAuth,R||C._sticky?[4,C.release()]:[3,2];case 1:throw k.sent(),(0,c.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},x.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(E){switch(E.label){case 0:return[4,this._connectionPool.close()];case 1:return E.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(O){return O.close()}))];case 2:return E.sent(),[2]}})})},x._installIdleObserverOnConnection=function(E,O){E._setIdle(O)},x._removeIdleObserverOnConnection=function(E){E._unsetIdle()},x.prototype._handleSecurityError=function(E,O,C){return this._authenticationProvider.handleError({connection:C,code:E.code})&&(E.retriable=!0),E.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(O,function(A){A.authToken=null}),C&&C.close().catch(function(){}),E},x})(c.ConnectionProvider);e.default=_},8995:function(r,e,t){var n=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],d=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=void 0;var i=t(8014),o=t(7843),a=t(9445),s=t(3111),u=t(1342),l=t(7479);e.bufferToggle=function(c,f){return o.operate(function(h,d){var v=[];a.innerFrom(c).subscribe(s.createOperatorSubscriber(d,function(p){var m=[];v.push(m);var y=new i.Subscription;y.add(a.innerFrom(f(p)).subscribe(s.createOperatorSubscriber(d,function(){l.arrRemove(v,m),d.next(m),y.unsubscribe()},u.noop)))},u.noop)),h.subscribe(s.createOperatorSubscriber(d,function(p){var m,y;try{for(var b=n(v),g=b.next();!g.done;g=b.next())g.value.push(p)}catch(_){m={error:_}}finally{try{g&&!g.done&&(y=b.return)&&y.call(b)}finally{if(m)throw m.error}}},function(){for(;v.length>0;)d.next(v.shift());d.complete()}))})}},9014:function(r,e,t){var n=this&&this.__extends||(function(){var w=function(x,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,C){O.__proto__=C}||function(O,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(O[A]=C[A])},w(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function O(){this.constructor=x}w(x,E),x.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}})(),i=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var o=t(9305),a=i(t(7790)),s=t(6781),u=o.internal.constants.FETCH_ALL,l=o.error.PROTOCOL_ERROR,c=(function(){function w(){}return w.prototype.onNext=function(x){},w.prototype.onError=function(x){},w.prototype.onCompleted=function(x){},w})();e.StreamObserver=c;var f=(function(w){function x(E){var O=E===void 0?{}:E,C=O.reactive,A=C!==void 0&&C,R=O.moreFunction,k=O.discardFunction,D=O.fetchSize,L=D===void 0?u:D,j=O.beforeError,q=O.afterError,B=O.beforeKeys,U=O.afterKeys,W=O.beforeComplete,H=O.afterComplete,Y=O.server,Z=O.highRecordWatermark,ce=Z===void 0?Number.MAX_VALUE:Z,$=O.lowRecordWatermark,K=$===void 0?Number.MAX_VALUE:$,ie=O.enrichMetadata,ae=O.onDb,le=w.call(this)||this;return le._fieldKeys=null,le._fieldLookup=null,le._head=null,le._queuedRecords=[],le._tail=null,le._error=null,le._observers=[],le._meta={},le._server=Y,le._beforeError=j,le._afterError=q,le._beforeKeys=B,le._afterKeys=U,le._beforeComplete=W,le._afterComplete=H,le._enrichMetadata=ie||s.functional.identity,le._queryId=null,le._moreFunction=R,le._discardFunction=k,le._discard=!1,le._fetchSize=L,le._lowRecordWatermark=K,le._highRecordWatermark=ce,le._setState(A?_.READY:_.READY_STREAMING),le._setupAutoPull(),le._paused=!1,le._pulled=!A,le._haveRecordStreamed=!1,le._onDb=ae,le}return n(x,w),x.prototype.pause=function(){this._paused=!0},x.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},x.prototype.onNext=function(E){this._haveRecordStreamed=!0;var O=new o.Record(this._fieldKeys,E,this._fieldLookup);this._observers.some(function(C){return C.onNext})?this._observers.forEach(function(C){C.onNext&&C.onNext(O)}):(this._queuedRecords.push(O),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},x.prototype.onCompleted=function(E){this._state.onSuccess(this,E)},x.prototype.onError=function(E){this._state.onError(this,E)},x.prototype.cancel=function(){this._discard=!0},x.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(_.STREAMING)},x.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(_.SUCCEEDED)},x.prototype.subscribe=function(E){if(this._head&&E.onKeys&&E.onKeys(this._head),this._queuedRecords.length>0&&E.onNext)for(var O=0;O<this._queuedRecords.length;O++)E.onNext(this._queuedRecords[O]),this._queuedRecords.length-O-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===_.READY&&this._handleStreaming());this._tail&&E.onCompleted&&E.onCompleted(this._tail),this._error&&E.onError(this._error),this._observers.push(E),this._state===_.READY&&this._handleStreaming()},x.prototype._handleHasMore=function(E){this._setState(_.READY),this._handleStreaming(),delete E.has_more},x.prototype._handlePullSuccess=function(E){var O=this,C=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},E));if([void 0,null,"r","w","rw","s"].includes(C.type)){this._setState(_.SUCCEEDED);var A=null;this._beforeComplete&&(A=this._beforeComplete(C));var R=function(){O._tail=C,O._observers.some(function(k){return k.onCompleted})&&O._observers.forEach(function(k){k.onCompleted&&k.onCompleted(C)}),O._afterComplete&&O._afterComplete(C)};A?Promise.resolve(A).then(function(){return R()}):R()}else this.onError((0,o.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(C.type,"'"),l))},x.prototype._handleRunSuccess=function(E,O){var C=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},E.fields&&E.fields.length>0){this._fieldKeys=E.fields;for(var A=0;A<E.fields.length;A++)this._fieldLookup[E.fields[A]]=A}E.db!==null&&this._onDb!==void 0&&this._onDb(E.db),E.fields!=null&&delete E.fields,E.qid!==null&&E.qid!==void 0&&(this._queryId=E.qid,delete E.qid),this._storeMetadataForCompletion(E);var R=null;this._beforeKeys&&(R=this._beforeKeys(this._fieldKeys));var k=function(){C._head=C._fieldKeys,C._observers.some(function(D){return D.onKeys})&&C._observers.forEach(function(D){D.onKeys&&D.onKeys(C._fieldKeys)}),C._afterKeys&&C._afterKeys(C._fieldKeys),O()};R?Promise.resolve(R).then(function(){return k()}):k()}},x.prototype._handleError=function(E){var O=this;this._setState(_.FAILED),this._error=E;var C=null;this._beforeError&&(C=this._beforeError(E));var A=function(){O._observers.some(function(R){return R.onError})&&O._observers.forEach(function(R){R.onError&&R.onError(E)}),O._afterError&&O._afterError(E)};C?Promise.resolve(C).then(function(){return A()}):A()},x.prototype._handleStreaming=function(){this._head&&this._observers.some(function(E){return E.onNext||E.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},x.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(_.STREAMING)},x.prototype._storeMetadataForCompletion=function(E){for(var O=Object.keys(E),C=O.length,A="";C--;)A=O[C],this._meta[A]=E[A]},x.prototype._setState=function(E){this._state=E},x.prototype._setupAutoPull=function(){this._autoPull=!0},x})(c);e.ResultStreamObserver=f;var h=(function(w){function x(E){var O=E===void 0?{}:E,C=O.onError,A=O.onCompleted,R=w.call(this)||this;return R._onError=C,R._onCompleted=A,R}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when initializing "+o.json.stringify(E)))},x.prototype.onError=function(E){this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(E)},x})(c);e.LoginObserver=h;var d=(function(w){function x(E){var O=E===void 0?{}:E,C=O.onError,A=O.onCompleted,R=w.call(this)||this;return R._onError=C,R._onCompleted=A,R}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when logging off "+o.json.stringify(E)))},x.prototype.onError=function(E){this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(E)},x})(c);e.LogoffObserver=d;var v=(function(w){function x(E){var O=E===void 0?{}:E,C=O.onProtocolError,A=O.onError,R=O.onComplete,k=w.call(this)||this;return k._onProtocolError=C,k._onError=A,k._onComplete=R,k}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(E),l))},x.prototype.onError=function(E){E.code===l&&this._onProtocolError&&this._onProtocolError(E.message),this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onComplete&&this._onComplete(E)},x})(c);e.ResetObserver=v;var p=(function(w){function x(E){var O=E===void 0?{}:E,C=O.onError,A=O.onCompleted,R=w.call(this)||this;return R._onError=C,R._onCompleted=A,R}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when sending telemetry "+o.json.stringify(E),l))},x.prototype.onError=function(E){this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(E)},x})(f);e.TelemetryObserver=p;var m=(function(w){function x(E){var O=E.error,C=E.onError,A=w.call(this,{beforeError:C})||this;return A.onError(O),A}return n(x,w),x})(f);e.FailedObserver=m;var y=(function(w){function x(){var E=w.call(this)||this;return w.prototype.markCompleted.call(E),E}return n(x,w),x})(f);e.CompletedObserver=y;var b=(function(w){function x(E){var O=E.resultObserver,C=E.onProtocolError,A=E.onError,R=E.onCompleted,k=w.call(this)||this;return k._resultObserver=O,k._onError=A,k._onCompleted=R,k._records=[],k._onProtocolError=C,O.subscribe(k),k}return n(x,w),x.prototype.onNext=function(E){this._records.push(E)},x.prototype.onError=function(E){E.code===l&&this._onProtocolError&&this._onProtocolError(E.message),this._onError&&this._onError(E)},x.prototype.onCompleted=function(){this._records===null||this._records.length===1?this._onCompleted&&this._onCompleted(a.default.ofRecord(this._records[0])):this.onError((0,o.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+o.json.stringify(this._records),l))},x})(c);e.ProcedureRouteObserver=b;var g=(function(w){function x(E){var O=E===void 0?{}:E,C=O.onProtocolError,A=O.onError,R=O.onCompleted,k=w.call(this)||this;return k._onProtocolError=C,k._onError=A,k._onCompleted=R,k}return n(x,w),x.prototype.onNext=function(E){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(E),l))},x.prototype.onError=function(E){E.code===l&&this._onProtocolError&&this._onProtocolError(E.message),this._onError&&this._onError(E)},x.prototype.onCompleted=function(E){this._onCompleted&&this._onCompleted(a.default.ofMessageResponse(E))},x})(c);e.RouteObserver=g;var _={READY_STREAMING:{onSuccess:function(w,x){w._handleRunSuccess(x,function(){w._setState(_.STREAMING)})},onError:function(w,x){w._handleError(x)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(w,x){w._handleRunSuccess(x,function(){return w._handleStreaming()})},onError:function(w,x){w._handleError(x)},name:function(){return"READY"},pull:function(w){return w._more()}},STREAMING:{onSuccess:function(w,x){x.has_more?w._handleHasMore(x):w._handlePullSuccess(x)},onError:function(w,x){w._handleError(x)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(w){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},9018:function(r,e,t){var n=this&&this.__read||function(m,y){var b=typeof Symbol=="function"&&m[Symbol.iterator];if(!b)return m;var g,_,w=b.call(m),x=[];try{for(;(y===void 0||y-- >0)&&!(g=w.next()).done;)x.push(g.value)}catch(E){_={error:E}}finally{try{g&&!g.done&&(b=w.return)&&b.call(w)}finally{if(_)throw _.error}}return x},i=this&&this.__spreadArray||function(m,y,b){if(b||arguments.length===2)for(var g,_=0,w=y.length;_<w;_++)!g&&_ in y||(g||(g=Array.prototype.slice.call(y,0,_)),g[_]=y[_]);return m.concat(g||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var o=t(9305),a=o.internal.constants,s=a.ACCESS_MODE_WRITE,u=a.ACCESS_MODE_READ,l=o.internal.serverAddress.ServerAddress,c=o.error.PROTOCOL_ERROR,f=(function(){function m(y){var b=y===void 0?{}:y,g=b.database,_=b.routers,w=b.readers,x=b.writers,E=b.expirationTime,O=b.ttl;this.database=g||null,this.databaseName=g||"default database",this.routers=_||[],this.readers=w||[],this.writers=x||[],this.expirationTime=E||(0,o.int)(0),this.ttl=O}return m.fromRawRoutingTable=function(y,b,g){return d(y,b,g)},m.prototype.forget=function(y){this.readers=h(this.readers,y),this.writers=h(this.writers,y)},m.prototype.forgetRouter=function(y){this.routers=h(this.routers,y)},m.prototype.forgetWriter=function(y){this.writers=h(this.writers,y)},m.prototype.isStaleFor=function(y){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||y===u&&this.readers.length===0||y===s&&this.writers.length===0},m.prototype.isExpiredFor=function(y){return this.expirationTime.add(y).lessThan(Date.now())},m.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},m.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},m})();function h(m,y){return m.filter(function(b){return b.asKey()!==y.asKey()})}function d(m,y,b){var g=b.ttl,_=(function(C,A){try{var R=(0,o.int)(Date.now()),k=(0,o.int)(C.ttl).multiply(1e3).add(R);return k.lessThan(R)?o.Integer.MAX_VALUE:k}catch(D){throw(0,o.newError)("Unable to parse TTL entry from router ".concat(A,` from raw routing table:
`).concat(o.json.stringify(C),`
Error message: `).concat(D.message),c)}})(b,y),w=(function(C,A){try{var R=[],k=[],D=[];return C.servers.forEach(function(L){var j=L.role,q=L.addresses;j==="ROUTE"?R=p(q).map(function(B){return l.fromUrl(B)}):j==="WRITE"?D=p(q).map(function(B){return l.fromUrl(B)}):j==="READ"&&(k=p(q).map(function(B){return l.fromUrl(B)}))}),{routers:R,readers:k,writers:D}}catch(L){throw(0,o.newError)("Unable to parse servers entry from router ".concat(A,` from addresses:
`).concat(o.json.stringify(C.servers),`
Error message: `).concat(L.message),c)}})(b,y),x=w.routers,E=w.readers,O=w.writers;return v(x,"routers",y),v(E,"readers",y),new f({database:m||b.db,routers:x,readers:E,writers:O,expirationTime:_,ttl:g})}function v(m,y,b){if(m.length===0)throw(0,o.newError)("Received no "+y+" from router "+b,c)}function p(m){if(!Array.isArray(m))throw new TypeError("Array expected but got: "+m);return Array.from(m)}e.default=f,e.createValidRoutingTable=d},9052:(r,e)=>{function t(n,i,o){return{kind:n,value:i,error:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.nextNotification=e.errorNotification=e.COMPLETE_NOTIFICATION=void 0,e.COMPLETE_NOTIFICATION=t("C",void 0,void 0),e.errorNotification=function(n){return t("E",void 0,n)},e.nextNotification=function(n){return t("N",n,void 0)},e.createNotification=t},9054:function(r,e,t){var n=this&&this.__extends||(function(){var y=function(b,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(_[x]=w[x])},y(b,g)};return function(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=b}y(b,g),b.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(y){for(var b,g=1,_=arguments.length;g<_;g++)for(var w in b=arguments[g])Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w]);return y},i.apply(this,arguments)},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(6445)),s=o(t(7021)),u=t(9014),l=t(397),c=o(t(7331)),f=o(t(5045)),h=o(t(3321)),d=t(9305),v=d.internal.bookmarks.Bookmarks,p=d.internal.constants.BOLT_PROTOCOL_V4_3,m=(function(y){function b(){return y!==null&&y.apply(this,arguments)||this}return n(b,y),Object.defineProperty(b.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(c.default).map(function(_){return _(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),b.prototype.requestRoutingInformation=function(g){var _=g.routingContext,w=_===void 0?{}:_,x=g.databaseName,E=x===void 0?null:x,O=g.sessionContext,C=O===void 0?{}:O,A=g.onError,R=g.onCompleted,k=new u.RouteObserver({onProtocolError:this._onProtocolError,onError:A,onCompleted:R}),D=C.bookmarks||v.empty();return this.write(s.default.route(w,D.values(),E),k,!0),k},b.prototype.initialize=function(g){var _=this,w=g===void 0?{}:g,x=w.userAgent,E=(w.boltAgent,w.authToken),O=w.notificationFilter,C=w.onError,A=w.onComplete,R=new u.LoginObserver({onError:function(k){return _._onLoginError(k,C)},onCompleted:function(k){return k.patch_bolt!==void 0&&_._applyPatches(k.patch_bolt),_._onLoginCompleted(k,E,A)}});return(0,l.assertNotificationFilterIsEmpty)(O,this._onProtocolError,R),this.write(s.default.hello(x,E,this._serversideRouting,["utc"]),R,!0),R},b.prototype._applyPatches=function(g){g.includes("utc")&&this._applyUtcPatch()},b.prototype._applyUtcPatch=function(){var g=this;this._transformer=new h.default(Object.values(i(i({},c.default),f.default)).map(function(_){return _(g._config,g._log)}))},b})(a.default);e.default=m},9060:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstValueFrom=void 0;var n=t(2823),i=t(5);e.firstValueFrom=function(o,a){var s=typeof a=="object";return new Promise(function(u,l){var c=new i.SafeSubscriber({next:function(f){u(f),c.unsubscribe()},error:l,complete:function(){s?u(a.defaultValue):l(new n.EmptyError)}});o.subscribe(c)})}},9098:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=void 0;var n=t(6640),i=t(7843),o=t(3111);e.skipLast=function(a){return a<=0?n.identity:i.operate(function(s,u){var l=new Array(a),c=0;return s.subscribe(o.createOperatorSubscriber(u,function(f){var h=c++;if(h<a)l[h]=f;else{var d=h%a,v=l[d];l[d]=f,u.next(v)}})),function(){l=null}})}},9105:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forkJoin=void 0;var n=t(4662),i=t(7360),o=t(9445),a=t(1107),s=t(3111),u=t(1251),l=t(6013);e.forkJoin=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=a.popResultSelector(c),d=i.argsArgArrayOrObject(c),v=d.args,p=d.keys,m=new n.Observable(function(y){var b=v.length;if(b)for(var g=new Array(b),_=b,w=b,x=function(O){var C=!1;o.innerFrom(v[O]).subscribe(s.createOperatorSubscriber(y,function(A){C||(C=!0,w--),g[O]=A},function(){return _--},void 0,function(){_&&C||(w||y.next(p?l.createObject(p,g):g),y.complete())}))},E=0;E<b;E++)x(E);else y.complete()});return h?m.pipe(u.mapOneOrManyArgs(h)):m}},9125:function(r,e,t){var n=this&&this.__extends||(function(){var d=function(v,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},d(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=v}d(v,p),v.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),i=this&&this.__assign||function(){return i=Object.assign||function(d){for(var v,p=1,m=arguments.length;p<m;p++)for(var y in v=arguments[p])Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y]);return d},i.apply(this,arguments)},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(934)),s=o(t(2204)),u=o(t(3321)),l=o(t(7021)),c=t(9014),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_3,h=(function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return n(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(m){return m(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.initialize=function(p){var m=this,y=p===void 0?{}:p,b=y.userAgent,g=y.boltAgent,_=y.authToken,w=y.notificationFilter,x=y.onError,E=y.onComplete,O={},C=new c.LoginObserver({onError:function(A){return m._onLoginError(A,x)},onCompleted:function(A){return O.metadata=A,m._onLoginCompleted(A)}});return this.write(l.default.hello5x3(b,g,w,this._serversideRouting),C,!1),this.logon({authToken:_,onComplete:function(A){return E(i(i({},A),O.metadata))},onError:x,flush:!0})},v})(a.default);e.default=h},9135:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=void 0;var n=t(983),i=t(1018);e.concatMap=function(o,a){return i.isFunction(a)?n.mergeMap(o,a,1):n.mergeMap(o,1)}},9137:function(r,e,t){var n=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(p){return function(m){return(function(y){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}})([p,m])}}},i=this&&this.__await||function(s){return this instanceof i?(this.v=s,this):new i(s)},o=this&&this.__asyncGenerator||function(s,u,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=l.apply(s,u||[]),h=[];return c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c;function d(b){f[b]&&(c[b]=function(g){return new Promise(function(_,w){h.push([b,g,_,w])>1||v(b,g)})})}function v(b,g){try{(_=f[b](g)).value instanceof i?Promise.resolve(_.value.v).then(p,m):y(h[0][2],_)}catch(w){y(h[0][3],w)}var _}function p(b){v("next",b)}function m(b){v("throw",b)}function y(b,g){b(g),h.shift(),h.length&&v(h[0][0],h[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.isReadableStreamLike=e.readableStreamLikeToAsyncGenerator=void 0;var a=t(1018);e.readableStreamLikeToAsyncGenerator=function(s){return o(this,arguments,function(){var u,l,c;return n(this,function(f){switch(f.label){case 0:u=s.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,i(u.read())];case 3:return l=f.sent(),c=l.value,l.done?[4,i(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,i(c)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})},e.isReadableStreamLike=function(s){return a.isFunction(s==null?void 0:s.getReader)}},9139:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;var n=t(6384),i=t(7843);e.reduce=function(o,a){return i.operate(n.scanInternals(o,a,arguments.length>=2,!1,!0))}},9155:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,n([i,o],t(a))):setTimeout.apply(void 0,n([i,o],t(a)))},clearTimeout:function(i){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(i)},delegate:void 0}},9223:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.captureError=e.errorContext=void 0;var n=t(3413),i=null;e.errorContext=function(o){if(n.config.useDeprecatedSynchronousErrorHandling){var a=!i;if(a&&(i={errorThrown:!1,error:null}),o(),a){var s=i,u=s.errorThrown,l=s.error;if(i=null,u)throw l}}else o()},e.captureError=function(o){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=o)}},9238:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(4325));e.default=n({},o.default)},9247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=void 0;var n=t(8918),i=t(1018),o=t(1483);e.multicast=function(a,s){var u=i.isFunction(a)?a:function(){return a};return i.isFunction(s)?o.connect(s,{connector:u}):function(l){return new n.ConnectableObservable(l,u)}}},9305:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(Y,Z,ce,$){$===void 0&&($=ce);var K=Object.getOwnPropertyDescriptor(Z,ce);K&&!("get"in K?!Z.__esModule:K.writable||K.configurable)||(K={enumerable:!0,get:function(){return Z[ce]}}),Object.defineProperty(Y,$,K)}:function(Y,Z,ce,$){$===void 0&&($=ce),Y[$]=Z[ce]}),i=this&&this.__setModuleDefault||(Object.create?function(Y,Z){Object.defineProperty(Y,"default",{enumerable:!0,value:Z})}:function(Y,Z){Y.default=Z}),o=this&&this.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var Z={};if(Y!=null)for(var ce in Y)ce!=="default"&&Object.prototype.hasOwnProperty.call(Y,ce)&&n(Z,Y,ce);return i(Z,Y),Z},a=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var s=t(9691);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return s.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return s.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var u=o(t(3371));e.Integer=u.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return u.toString}});var l=t(5459);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}});var c=t(1517);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var f=a(t(4820));e.Record=f.default;var h=t(7093);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h.Point}});var d=o(t(6033));e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var v=o(t(1866));e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var p=t(1985);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var m=a(t(9512));e.Result=m.default;var y=a(t(8917));e.EagerResult=y.default;var b=o(t(2007));e.ConnectionProvider=b.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return b.Releasable}});var g=a(t(1409));e.Connection=g.default;var _=a(t(9473));e.Transaction=_.default;var w=a(t(5909));e.ManagedTransaction=w.default;var x=a(t(4569));e.TransactionPromise=x.default;var E=a(t(5481));e.Session=E.default;var O=o(t(7264)),C=O;e.Driver=O.default,e.driver=C;var A=a(t(1967));e.auth=A.default;var R=t(6755);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return R.bookmarkManager}});var k=t(2069);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return k.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return k.staticAuthTokenManager}});var D=t(7264);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return D.routing}});var L=o(t(6872));e.types=L;var j=o(t(4027));e.json=j;var q=a(t(1573));e.resultTransformers=q.default;var B=t(8264);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return B.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return B.resolveCertificateProvider}});var U=o(t(6995));e.internal=U;var W={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};e.error=W;var H={authTokenManagers:k.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,newGQLError:s.newGQLError,GQLError:s.GQLError,isRetriableError:s.isRetriableError,error:W,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:U,isPoint:h.isPoint,Point:h.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,isDate:l.isDate,isDateTime:l.isDateTime,isDuration:l.isDuration,isLocalDateTime:l.isLocalDateTime,isLocalTime:l.isLocalTime,isTime:l.isTime,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:f.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:m.default,EagerResult:y.default,Transaction:_.default,ManagedTransaction:w.default,TransactionPromise:x.default,Session:E.default,Driver:O.default,Connection:g.default,Releasable:b.Releasable,types:L,driver:C,json:j,auth:A.default,bookmarkManager:R.bookmarkManager,routing:D.routing,resultTransformers:q.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:B.clientCertificateProviders,resolveCertificateProvider:B.resolveCertificateProvider};e.default=H},9318:(r,e)=>{e.read=function(t,n,i,o,a){var s,u,l=8*a-o-1,c=(1<<l)-1,f=c>>1,h=-7,d=i?a-1:0,v=i?-1:1,p=t[n+d];for(d+=v,s=p&(1<<-h)-1,p>>=-h,h+=l;h>0;s=256*s+t[n+d],d+=v,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=o;h>0;u=256*u+t[n+d],d+=v,h-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,o),s-=f}return(p?-1:1)*u*Math.pow(2,s-o)},e.write=function(t,n,i,o,a,s){var u,l,c,f=8*s-a-1,h=(1<<f)-1,d=h>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:s-1,m=o?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-u))<1&&(u--,c*=2),(n+=u+d>=1?v/c:v*Math.pow(2,1-d))*c>=2&&(u++,c/=2),u+d>=h?(l=0,u=h):u+d>=1?(l=(n*c-1)*Math.pow(2,a),u+=d):(l=n*Math.pow(2,d-1)*Math.pow(2,a),u=0));a>=8;t[i+p]=255&l,p+=m,l/=256,a-=8);for(u=u<<a|l,f+=a;f>0;t[i+p]=255&u,p+=m,u/=256,f-=8);t[i+p-m]|=128*y}},9353:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defer=void 0;var n=t(4662),i=t(9445);e.defer=function(o){return new n.Observable(function(a){i.innerFrom(o()).subscribe(a)})}},9356:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var n=t(7843),i=t(3111);e.isEmpty=function(){return n.operate(function(o,a){o.subscribe(i.createOperatorSubscriber(a,function(){a.next(!1),a.complete()},function(){a.next(!0),a.complete()}))})}},9376:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0;var n=t(4662),i=t(8616);e.range=function(o,a,s){if(a==null&&(a=o,o=0),a<=0)return i.EMPTY;var u=a+o;return new n.Observable(s?function(l){var c=o;return s.schedule(function(){c<u?(l.next(c++),this.schedule()):l.complete()})}:function(l){for(var c=o;c<u&&!l.closed;)l.next(c++);l.complete()})}},9419:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var n=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return n.audit}});var i=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var o=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return o.buffer}});var a=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return a.bufferCount}});var s=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var u=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return u.bufferToggle}});var l=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return l.bufferWhen}});var c=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var f=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return f.combineAll}});var h=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return h.combineLatestAll}});var d=t(2551);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var v=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var p=t(7601);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var m=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return m.concatAll}});var y=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var b=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return b.concatMapTo}});var g=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return g.concatWith}});var _=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return _.connect}});var w=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return w.count}});var x=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return x.debounce}});var E=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return E.debounceTime}});var O=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return O.defaultIfEmpty}});var C=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return C.delay}});var A=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return A.delayWhen}});var R=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return R.dematerialize}});var k=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return k.distinct}});var D=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return D.distinctUntilChanged}});var L=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return L.distinctUntilKeyChanged}});var j=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return j.elementAt}});var q=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return q.endWith}});var B=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return B.every}});var U=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return U.exhaust}});var W=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return W.exhaustAll}});var H=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return H.exhaustMap}});var Y=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Y.expand}});var Z=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Z.filter}});var ce=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return ce.finalize}});var $=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return $.find}});var K=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return K.findIndex}});var ie=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return ie.first}});var ae=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return ae.groupBy}});var le=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return le.ignoreElements}});var te=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return te.isEmpty}});var ee=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return ee.last}});var re=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return re.map}});var he=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return he.mapTo}});var ve=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return ve.materialize}});var _e=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return _e.max}});var Oe=t(361);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Oe.merge}});var Pe=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Pe.mergeAll}});var me=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return me.flatMap}});var F=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return F.mergeMap}});var G=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return G.mergeMapTo}});var X=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return X.mergeScan}});var se=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return se.mergeWith}});var pe=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return pe.min}});var ge=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return ge.multicast}});var xe=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return xe.observeOn}});var Ne=t(1226);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Ne.onErrorResumeNext}});var He=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return He.pairwise}});var at=t(2171);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return at.partition}});var Ze=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Ze.pluck}});var et=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return et.publish}});var Qe=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Qe.publishBehavior}});var Xe=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Xe.publishLast}});var ke=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return ke.publishReplay}});var oe=t(4440);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return oe.race}});var Ee=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Ee.raceWith}});var Re=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Re.reduce}});var De=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return De.repeat}});var Me=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Me.repeatWhen}});var it=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return it.retry}});var Fe=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Fe.retryWhen}});var ut=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ut.refCount}});var rt=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return rt.sample}});var ft=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return ft.sampleTime}});var xt=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return xt.scan}});var yt=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return yt.sequenceEqual}});var nt=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return nt.share}});var It=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return It.shareReplay}});var St=t(5382);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return St.single}});var or=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return or.skip}});var rr=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return rr.skipLast}});var Gt=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Gt.skipUntil}});var Pt=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Pt.skipWhile}});var ur=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return ur.startWith}});var nr=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return nr.subscribeOn}});var Ir=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Ir.switchAll}});var Kr=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Kr.switchMap}});var Dt=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Dt.switchMapTo}});var fr=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return fr.switchScan}});var Br=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Br.take}});var Wr=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Wr.takeLast}});var yn=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return yn.takeUntil}});var cn=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return cn.takeWhile}});var mr=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return mr.tap}});var Sr=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Sr.throttle}});var gr=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return gr.throttleTime}});var wi=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return wi.throwIfEmpty}});var Dn=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Dn.timeInterval}});var Ma=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ma.timeout}});var ws=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return ws.timeoutWith}});var No=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return No.timestamp}});var ca=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return ca.toArray}});var jo=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return jo.window}});var Es=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Es.windowCount}});var Os=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Os.windowTime}});var xs=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return xs.windowToggle}});var Zi=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Zi.windowWhen}});var hr=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return hr.withLatestFrom}});var ar=t(5918);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return ar.zip}});var La=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return La.zipAll}});var Na=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Na.zipWith}})},9445:function(r,e,t){var n=this&&this.__awaiter||function(O,C,A,R){return new(A||(A=Promise))(function(k,D){function L(B){try{q(R.next(B))}catch(U){D(U)}}function j(B){try{q(R.throw(B))}catch(U){D(U)}}function q(B){var U;B.done?k(B.value):(U=B.value,U instanceof A?U:new A(function(W){W(U)})).then(L,j)}q((R=R.apply(O,C||[])).next())})},i=this&&this.__generator||function(O,C){var A,R,k,D,L={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return D={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function j(q){return function(B){return(function(U){if(A)throw new TypeError("Generator is already executing.");for(;L;)try{if(A=1,R&&(k=2&U[0]?R.return:U[0]?R.throw||((k=R.return)&&k.call(R),0):R.next)&&!(k=k.call(R,U[1])).done)return k;switch(R=0,k&&(U=[2&U[0],k.value]),U[0]){case 0:case 1:k=U;break;case 4:return L.label++,{value:U[1],done:!1};case 5:L.label++,R=U[1],U=[0];continue;case 7:U=L.ops.pop(),L.trys.pop();continue;default:if(!((k=(k=L.trys).length>0&&k[k.length-1])||U[0]!==6&&U[0]!==2)){L=0;continue}if(U[0]===3&&(!k||U[1]>k[0]&&U[1]<k[3])){L.label=U[1];break}if(U[0]===6&&L.label<k[1]){L.label=k[1],k=U;break}if(k&&L.label<k[2]){L.label=k[2],L.ops.push(U);break}k[2]&&L.ops.pop(),L.trys.pop();continue}U=C.call(O,L)}catch(W){U=[6,W],R=0}finally{A=k=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}})([q,B])}}},o=this&&this.__asyncValues||function(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,A=O[Symbol.asyncIterator];return A?A.call(O):(O=typeof a=="function"?a(O):O[Symbol.iterator](),C={},R("next"),R("throw"),R("return"),C[Symbol.asyncIterator]=function(){return this},C);function R(k){C[k]=O[k]&&function(D){return new Promise(function(L,j){(function(q,B,U,W){Promise.resolve(W).then(function(H){q({value:H,done:U})},B)})(L,j,(D=O[k](D)).done,D.value)})}}},a=this&&this.__values||function(O){var C=typeof Symbol=="function"&&Symbol.iterator,A=C&&O[C],R=0;if(A)return A.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&R>=O.length&&(O=void 0),{value:O&&O[R++],done:!O}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadableStreamLike=e.fromAsyncIterable=e.fromIterable=e.fromPromise=e.fromArrayLike=e.fromInteropObservable=e.innerFrom=void 0;var s=t(8046),u=t(7629),l=t(4662),c=t(1116),f=t(1358),h=t(7614),d=t(6368),v=t(9137),p=t(1018),m=t(7315),y=t(3327);function b(O){return new l.Observable(function(C){var A=O[y.observable]();if(p.isFunction(A.subscribe))return A.subscribe(C);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function g(O){return new l.Observable(function(C){for(var A=0;A<O.length&&!C.closed;A++)C.next(O[A]);C.complete()})}function _(O){return new l.Observable(function(C){O.then(function(A){C.closed||(C.next(A),C.complete())},function(A){return C.error(A)}).then(null,m.reportUnhandledError)})}function w(O){return new l.Observable(function(C){var A,R;try{for(var k=a(O),D=k.next();!D.done;D=k.next()){var L=D.value;if(C.next(L),C.closed)return}}catch(j){A={error:j}}finally{try{D&&!D.done&&(R=k.return)&&R.call(k)}finally{if(A)throw A.error}}C.complete()})}function x(O){return new l.Observable(function(C){(function(A,R){var k,D,L,j;return n(this,void 0,void 0,function(){var q,B;return i(this,function(U){switch(U.label){case 0:U.trys.push([0,5,6,11]),k=o(A),U.label=1;case 1:return[4,k.next()];case 2:if((D=U.sent()).done)return[3,4];if(q=D.value,R.next(q),R.closed)return[2];U.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return B=U.sent(),L={error:B},[3,11];case 6:return U.trys.push([6,,9,10]),D&&!D.done&&(j=k.return)?[4,j.call(k)]:[3,8];case 7:U.sent(),U.label=8;case 8:return[3,10];case 9:if(L)throw L.error;return[7];case 10:return[7];case 11:return R.complete(),[2]}})})})(O,C).catch(function(A){return C.error(A)})})}function E(O){return x(v.readableStreamLikeToAsyncGenerator(O))}e.innerFrom=function(O){if(O instanceof l.Observable)return O;if(O!=null){if(c.isInteropObservable(O))return b(O);if(s.isArrayLike(O))return g(O);if(u.isPromise(O))return _(O);if(f.isAsyncIterable(O))return x(O);if(d.isIterable(O))return w(O);if(v.isReadableStreamLike(O))return E(O)}throw h.createInvalidObservableTypeError(O)},e.fromInteropObservable=b,e.fromArrayLike=g,e.fromPromise=_,e.fromIterable=w,e.fromAsyncIterable=x,e.fromReadableStreamLike=E},9470:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=n(t(3389));e.BaseHostNameResolver=i.default;var o=n(t(8341));e.ConfiguredCustomResolver=o.default},9473:function(r,e,t){var n=this&&this.__awaiter||function(y,b,g,_){return new(g||(g=Promise))(function(w,x){function E(A){try{C(_.next(A))}catch(R){x(R)}}function O(A){try{C(_.throw(A))}catch(R){x(R)}}function C(A){var R;A.done?w(A.value):(R=A.value,R instanceof g?R:new g(function(k){k(R)})).then(E,O)}C((_=_.apply(y,b||[])).next())})},i=this&&this.__generator||function(y,b){var g,_,w,x,E={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function O(C){return function(A){return(function(R){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,R[0]&&(E=0)),E;)try{if(g=1,_&&(w=2&R[0]?_.return:R[0]?_.throw||((w=_.return)&&w.call(_),0):_.next)&&!(w=w.call(_,R[1])).done)return w;switch(_=0,w&&(R=[2&R[0],w.value]),R[0]){case 0:case 1:w=R;break;case 4:return E.label++,{value:R[1],done:!1};case 5:E.label++,_=R[1],R=[0];continue;case 7:R=E.ops.pop(),E.trys.pop();continue;default:if(!((w=(w=E.trys).length>0&&w[w.length-1])||R[0]!==6&&R[0]!==2)){E=0;continue}if(R[0]===3&&(!w||R[1]>w[0]&&R[1]<w[3])){E.label=R[1];break}if(R[0]===6&&E.label<w[1]){E.label=w[1],w=R;break}if(w&&E.label<w[2]){E.label=w[2],E.ops.push(R);break}w[2]&&E.ops.pop(),E.trys.pop();continue}R=b.call(y,E)}catch(k){R=[6,k],_=0}finally{g=w=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}})([C,A])}}},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(6587),s=t(3618),u=t(9730),l=t(754),c=t(2696),f=t(9691),h=o(t(9512)),d=(function(){function y(b){var g=b.connectionHolder,_=b.onClose,w=b.onBookmarks,x=b.onConnection,E=b.reactive,O=b.fetchSize,C=b.impersonatedUser,A=b.highRecordWatermark,R=b.lowRecordWatermark,k=b.notificationFilter,D=b.apiTelemetryConfig,L=this;this._connectionHolder=g,this._reactive=E,this._state=v.ACTIVE,this._onClose=_,this._onBookmarks=w,this._onConnection=x,this._onError=this._onErrorCallback.bind(this),this._fetchSize=O,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=C,this._lowRecordWatermak=R,this._highRecordWatermark=A,this._bookmarks=u.Bookmarks.empty(),this._notificationFilter=k,this._apiTelemetryConfig=D,this._acceptActive=function(){},this._activePromise=new Promise(function(j,q){L._acceptActive=j})}return y.prototype._begin=function(b,g,_){var w=this;this._connectionHolder.getConnection().then(function(x){return n(w,void 0,void 0,function(){var E,O=this;return i(this,function(C){switch(C.label){case 0:return this._onConnection(),x==null?[3,2]:(E=this,[4,b()]);case 1:return E._bookmarks=C.sent(),[2,x.beginTransaction({bookmarks:this._bookmarks,txConfig:g,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(A){_!=null&&_.onError(A),O._onError(A).catch(function(){})},afterComplete:function(A){_!=null&&_.onComplete(A),A.db!==void 0&&(_==null?void 0:_.onDB)!=null&&_.onDB(A.db),O._onComplete(A)}})];case 2:throw(0,f.newError)("No connection available")}})})}).catch(function(x){_!=null&&_.onError(x),w._onError(x).catch(function(){})}).finally(function(){return w._acceptActive()})},y.prototype.run=function(b,g){var _=(0,a.validateQueryAndParameters)(b,g),w=_.validatedQuery,x=_.params,E=this._state.run(w,x,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(E),E},y.prototype.commit=function(){var b=this,g=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(_){return b._onCompleteCallback(_,b._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=g.state,this._onClose(),new Promise(function(_,w){g.result.subscribe({onCompleted:function(){return _()},onError:function(x){return w(x)}})})},y.prototype.rollback=function(){var b=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=b.state,this._onClose(),new Promise(function(g,_){b.result.subscribe({onCompleted:function(){return g()},onError:function(w){return _(w)}})})},y.prototype.isOpen=function(){return this._state===v.ACTIVE},y.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype._onErrorCallback=function(b){return this._state===v.FAILED?Promise.resolve(null):(this._state=v.FAILED,this._onClose(),this._results.forEach(function(g){g.isOpen()&&g._streamObserverPromise.then(function(_){return _.onError(b)}).catch(function(_){})}),this._connectionHolder.releaseConnection())},y.prototype._onCompleteCallback=function(b,g){this._onBookmarks(new u.Bookmarks(b==null?void 0:b.bookmark),g??u.Bookmarks.empty(),b==null?void 0:b.db)},y})(),v={ACTIVE:{commit:function(y){return{result:p(!0,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.SUCCEEDED}},rollback:function(y){return{result:p(!1,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.ROLLED_BACK}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError,x=g.onComplete,E=g.onConnection,O=g.reactive,C=g.fetchSize,A=g.highRecordWatermark,R=g.lowRecordWatermark,k=g.preparationJob,D=k??Promise.resolve();return m(_.getConnection().then(function(L){return D.then(function(){return L})}).then(function(L){if(E(),L!=null)return L.run(y,b,{bookmarks:u.Bookmarks.empty(),txConfig:l.TxConfig.empty(),beforeError:w,afterComplete:x,reactive:O,fetchSize:C,highRecordWatermark:A,lowRecordWatermark:R});throw(0,f.newError)("No connection available")}).catch(function(L){return new c.FailedObserver({error:L,onError:w})}),y,b,_,A,R)}},FAILED:{commit:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:g}),"COMMIT",{},b,0,0),state:v.FAILED}},rollback:function(y){var b=y.connectionHolder;return y.onError,y.onComplete,{result:m(new c.CompletedObserver,"ROLLBACK",{},b,0,0),state:v.FAILED}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError;return g.onComplete,m(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:w}),y,b,_,0,0)}},SUCCEEDED:{commit:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:g}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:b}},rollback:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:g}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:b}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError;return g.onComplete,m(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:w}),y,b,_,0,0)}},ROLLED_BACK:{commit:function(y){var b=y.connectionHolder,g=y.onError;return y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:g}),"COMMIT",{},b,0,0),state:v.ROLLED_BACK}},rollback:function(y){var b=y.connectionHolder;return y.onError,y.onComplete,{result:m(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},b,0,0),state:v.ROLLED_BACK}},run:function(y,b,g){var _=g.connectionHolder,w=g.onError;return g.onComplete,m(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:w}),y,b,_,0,0)}}};function p(y,b,g,_,w,x,E){var O=E??Promise.resolve(),C=b.getConnection().then(function(A){return O.then(function(){return A})}).then(function(A){return w(),x.forEach(function(R){return R._cancel()}),Promise.all(x.map(function(R){return R.summary()})).then(function(R){if(A!=null)return y?A.commitTransaction({beforeError:g,afterComplete:_}):A.rollbackTransaction({beforeError:g,afterComplete:_});throw(0,f.newError)("No connection available")})}).catch(function(A){return new c.FailedObserver({error:A,onError:g})});return new h.default(C,y?"COMMIT":"ROLLBACK",{},b,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function m(y,b,g,_,w,x){return _===void 0&&(_=s.EMPTY_CONNECTION_HOLDER),new h.default(Promise.resolve(y),b,g,new s.ReadOnlyConnectionHolder(_??s.EMPTY_CONNECTION_HOLDER),{low:x,high:w})}e.default=d},9507:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var o=t(8014);e.animationFrameProvider={schedule:function(a){var s=requestAnimationFrame,u=cancelAnimationFrame,l=e.animationFrameProvider.delegate;l&&(s=l.requestAnimationFrame,u=l.cancelAnimationFrame);var c=s(function(f){u=void 0,a(f)});return new o.Subscription(function(){return u==null?void 0:u(c)})},requestAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(a)))},cancelAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(a)))},delegate:void 0}},9512:function(r,e,t){var n,i=this&&this.__awaiter||function(p,m,y,b){return new(y||(y=Promise))(function(g,_){function w(O){try{E(b.next(O))}catch(C){_(C)}}function x(O){try{E(b.throw(O))}catch(C){_(C)}}function E(O){var C;O.done?g(O.value):(C=O.value,C instanceof y?C:new y(function(A){A(C)})).then(w,x)}E((b=b.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var y,b,g,_,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(E){return function(O){return(function(C){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,C[0]&&(w=0)),w;)try{if(y=1,b&&(g=2&C[0]?b.return:C[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,C[1])).done)return g;switch(b=0,g&&(C=[2&C[0],g.value]),C[0]){case 0:case 1:g=C;break;case 4:return w.label++,{value:C[1],done:!1};case 5:w.label++,b=C[1],C=[0];continue;case 7:C=w.ops.pop(),w.trys.pop();continue;default:if(!((g=(g=w.trys).length>0&&g[g.length-1])||C[0]!==6&&C[0]!==2)){w=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){w.label=C[1];break}if(C[0]===6&&w.label<g[1]){w.label=g[1],g=C;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(C);break}g[2]&&w.ops.pop(),w.trys.pop();continue}C=m.call(p,w)}catch(A){C=[6,A],b=0}finally{y=g=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}})([E,O])}}},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6033)),u=t(6995),l=t(9691),c=u.connectionHolder.EMPTY_CONNECTION_HOLDER,f=function(p){""+p},h=function(p){},d=function(p){},v=(function(){function p(m,y,b,g,_){var w;_===void 0&&(_={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=(w=new Error("")).stack!=null?w.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=m,this._p=null,this._query=y,this._parameters=b??{},this._connectionHolder=g??c,this._keys=null,this._summary=null,this._error=null,this._watermarks=_}return p.prototype.keys=function(){var m=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(y,b){m._streamObserverPromise.then(function(g){return g.subscribe(m._decorateObserver({onKeys:function(_){return y(_)},onError:function(_){return b(_)}}))}).catch(b)})},p.prototype.summary=function(){var m=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(y,b){m._streamObserverPromise.then(function(g){g.cancel(),g.subscribe(m._decorateObserver({onCompleted:function(_){return y(_)},onError:function(_){return b(_)}}))}).catch(b)})},p.prototype._getOrCreatePromise=function(){var m=this;return this._p==null&&(this._p=new Promise(function(y,b){var g=[],_={onNext:function(w){g.push(w)},onCompleted:function(w){y({records:g,summary:w})},onError:function(w){b(w)}};m.subscribe(_)})),this._p},p.prototype[Symbol.asyncIterator]=function(){var m=this;if(!this.isOpen()){var y=(0,l.newError)("Result is already consumed");return{next:function(){return Promise.reject(y)},peek:function(){return Promise.reject(y)}}}var b={paused:!0,firstRun:!0,finished:!1},g=function(){var x,E;if(b.streaming!=null){var O=(E=(x=b.queuedObserver)===null||x===void 0?void 0:x.size)!==null&&E!==void 0?E:0,C=O>=m._watermarks.high,A=O<=m._watermarks.low;C&&!b.paused?(b.paused=!0,b.streaming.pause()):(A&&b.paused||b.firstRun&&!C)&&(b.firstRun=!1,b.paused=!1,b.streaming.resume())}},_=function(){return i(m,void 0,void 0,function(){var x;return o(this,function(E){switch(E.label){case 0:return b.queuedObserver!==void 0?[3,2]:(b.queuedObserver=this._createQueuedResultObserver(g),x=b,[4,this._subscribe(b.queuedObserver,!0).catch(function(){})]);case 1:x.streaming=E.sent(),g(),E.label=2;case 2:return[2,b.queuedObserver]}})})},w=function(x){if(x===void 0)throw(0,l.newError)("InvalidState: Result stream finished without Summary",l.PROTOCOL_ERROR);return!0};return{next:function(){return i(m,void 0,void 0,function(){var x;return o(this,function(E){switch(E.label){case 0:return b.finished&&w(b.summary)?[2,{done:!0,value:b.summary}]:[4,_()];case 1:return[4,E.sent().dequeue()];case 2:return(x=E.sent()).done===!0&&(b.finished=x.done,b.summary=x.value),[2,x]}})})},return:function(x){return i(m,void 0,void 0,function(){var E,O;return o(this,function(C){switch(C.label){case 0:return b.finished&&w(b.summary)?[2,{done:!0,value:x??b.summary}]:((O=b.streaming)===null||O===void 0||O.cancel(),[4,_()]);case 1:return[4,C.sent().dequeueUntilDone()];case 2:return E=C.sent(),b.finished=!0,E.value=x??E.value,b.summary=E.value,[2,E]}})})},peek:function(){return i(m,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return b.finished&&w(b.summary)?[2,{done:!0,value:b.summary}]:[4,_()];case 1:return[4,x.sent().head()];case 2:return[2,x.sent()]}})})}}},p.prototype.then=function(m,y){return this._getOrCreatePromise().then(m,y)},p.prototype.catch=function(m){return this._getOrCreatePromise().catch(m)},p.prototype.finally=function(m){return this._getOrCreatePromise().finally(m)},p.prototype.subscribe=function(m){this._subscribe(m).catch(function(){})},p.prototype.isOpen=function(){return this._summary===null&&this._error===null},p.prototype._subscribe=function(m,y){y===void 0&&(y=!1);var b=this._decorateObserver(m);return this._streamObserverPromise.then(function(g){return y&&g.pause(),g.subscribe(b),g}).catch(function(g){return b.onError!=null&&b.onError(g),Promise.reject(g)})},p.prototype._decorateObserver=function(m){var y,b,g,_=this,w=(y=m.onCompleted)!==null&&y!==void 0?y:h,x=(b=m.onError)!==null&&b!==void 0?b:f,E=(g=m.onKeys)!==null&&g!==void 0?g:d;return{onNext:m.onNext!=null?m.onNext.bind(m):void 0,onKeys:function(O){return _._keys=O,E.call(m,O)},onCompleted:function(O){_._releaseConnectionAndGetSummary(O).then(function(C){return _._summary!==null?w.call(m,_._summary):(_._summary=C,w.call(m,C))}).catch(x)},onError:function(O){_._connectionHolder.releaseConnection().then(function(){(function(C,A){A!=null&&(C.stack=C.toString()+`
`+A)})(O,_._stack),_._error=O,x.call(m,O)}).catch(x)}}},p.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(m){return m.cancel()}).catch(function(){})},p.prototype._releaseConnectionAndGetSummary=function(m){var y=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),b=y.validatedQuery,g=y.params,_=this._connectionHolder;return _.getConnection().then(function(w){return _.releaseConnection().then(function(){return w==null?void 0:w.getProtocolVersion()})},function(w){}).then(function(w){return new s.default(b,g,m,w)})},p.prototype._createQueuedResultObserver=function(m){var y=this;function b(){var O={};return O.promise=new Promise(function(C,A){O.resolve=C,O.reject=A}),O}function g(O){return O instanceof Error}function _(){var O;return i(this,void 0,void 0,function(){var C;return o(this,function(A){switch(A.label){case 0:if(w.length>0){if(C=(O=w.shift())!==null&&O!==void 0?O:(0,l.newError)("Unexpected empty buffer",l.PROTOCOL_ERROR),m(),g(C))throw C;return[2,C]}return x.resolvable=b(),[4,x.resolvable.promise];case 1:return[2,A.sent()]}})})}var w=[],x={resolvable:null},E={onNext:function(O){E._push({done:!1,value:O})},onCompleted:function(O){E._push({done:!0,value:O})},onError:function(O){E._push(O)},_push:function(O){if(x.resolvable!==null){var C=x.resolvable;x.resolvable=null,g(O)?C.reject(O):C.resolve(O)}else w.push(O),m()},dequeue:_,dequeueUntilDone:function(){return i(y,void 0,void 0,function(){var O;return o(this,function(C){switch(C.label){case 0:return[4,_()];case 1:return(O=C.sent()).done===!0?[2,O]:[3,0];case 2:return[2]}})})},head:function(){return i(y,void 0,void 0,function(){var O,C;return o(this,function(A){switch(A.label){case 0:if(w.length>0){if(g(O=w[0]))throw O;return[2,O]}x.resolvable=b(),A.label=1;case 1:return A.trys.push([1,3,4,5]),[4,x.resolvable.promise];case 2:return O=A.sent(),w.unshift(O),[2,O];case 3:throw C=A.sent(),w.unshift(C),C;case 4:return m(),[7];case 5:return[2]}})})},get size(){return w.length}};return E},p})();n=Symbol.toStringTag,e.default=v},9567:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleObservable=void 0;var n=t(9445),i=t(5184),o=t(8960);e.scheduleObservable=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},9568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},9589:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.schedulePromise=void 0;var n=t(9445),i=t(5184),o=t(8960);e.schedulePromise=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},9612:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=void 0;var n=t(8937);e.distinctUntilKeyChanged=function(i,o){return n.distinctUntilChanged(function(a,s){return o?o(a[i],s[i]):a[i]===s[i]})}},9669:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.concatWith=void 0;var o=t(7601);e.concatWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.concat.apply(void 0,i([],n(a)))}},9686:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUnsubscribedError=void 0;var n=t(5568);e.ObjectUnsubscribedError=n.createErrorClass(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},9689:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=t(4132);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var o=t(8987);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var a=t(3545);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var s=t(7428);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},9691:function(r,e,t){var n=this&&this.__extends||(function(){var m=function(y,b){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},m(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function g(){this.constructor=y}m(y,b),y.prototype=b===null?Object.create(b):(g.prototype=b.prototype,new g)}})(),i=this&&this.__createBinding||(Object.create?function(m,y,b,g){g===void 0&&(g=b);var _=Object.getOwnPropertyDescriptor(y,b);_&&!("get"in _?!y.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(m,g,_)}:function(m,y,b,g){g===void 0&&(g=b),m[g]=y[b]}),o=this&&this.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),a=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var b in m)b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)&&i(y,m,b);return o(y,m),y};Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.GQLError=e.Neo4jError=e.isRetriableError=e.newGQLError=e.newError=void 0;var s=a(t(4027)),u=t(1053),l={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(l);var c=Object.values(l),f="ServiceUnavailable";e.SERVICE_UNAVAILABLE=f;var h="SessionExpired";e.SESSION_EXPIRED=h,e.PROTOCOL_ERROR="ProtocolError";var d=(function(m){function y(b,g,_,w,x){var E,O=this;return(O=m.call(this,b,x!=null?{cause:x}:void 0)||this).constructor=y,O.__proto__=y.prototype,O.cause=x??void 0,O.gqlStatus=g,O.gqlStatusDescription=_,O.diagnosticRecord=w,O.classification=(function(C){return C===void 0||C._classification===void 0?"UNKNOWN":c.includes(C._classification)?C==null?void 0:C._classification:"UNKNOWN"})(O.diagnosticRecord),O.rawClassification=(E=w==null?void 0:w._classification)!==null&&E!==void 0?E:void 0,O.name="GQLError",O}return n(y,m),Object.defineProperty(y.prototype,"diagnosticRecordAsJsonString",{get:function(){return s.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),y})(Error);e.GQLError=d;var v=(function(m){function y(b,g,_,w,x,E){var O=m.call(this,b,_,w,x,E)||this;return O.constructor=y,O.__proto__=y.prototype,O.code=g,O.name="Neo4jError",O.retriable=(function(C){return C===f||C===h||(function(A){return A==="Neo.ClientError.Security.AuthorizationExpired"})(C)||(function(A){return(A==null?void 0:A.includes("TransientError"))===!0})(C)})(g),O}return n(y,m),y.isRetriable=function(b){return b!=null&&b instanceof y&&b.retriable},y})(d);e.Neo4jError=v,e.newError=function(m,y,b,g,_,w){return new v(m,y??"N/A",g??"50N42",_??"error: general processing exception - unexpected error. "+m,w??u.rawPolyfilledDiagnosticRecord,b)},e.newGQLError=function(m,y,b,g,_){return new d(m,b??"50N42",g??"error: general processing exception - unexpected error. "+m,_??u.rawPolyfilledDiagnosticRecord,y)};var p=v.isRetriable;e.isRetriableError=p},9730:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,p){p===void 0&&(p=v);var m=Object.getOwnPropertyDescriptor(d,v);m&&!("get"in m?!d.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,p,m)}:function(h,d,v,p){p===void 0&&(p=v),h[p]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__read||function(h,d){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var p,m,y=v.call(h),b=[];try{for(;(d===void 0||d-- >0)&&!(p=y.next()).done;)b.push(p.value)}catch(g){m={error:g}}finally{try{p&&!p.done&&(v=y.return)&&v.call(y)}finally{if(m)throw m.error}}return b},s=this&&this.__spreadArray||function(h,d,v){if(v||arguments.length===2)for(var p,m=0,y=d.length;m<y;m++)!p&&m in d||(p||(p=Array.prototype.slice.call(d,0,m)),p[m]=d[m]);return h.concat(p||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var u=o(t(6587)),l=(function(){function h(d){this._values=(function(v){if(v==null||v==="")return[];if(u.isString(v))return[v];if(Array.isArray(v)){for(var p=new Set,m=f(v),y=0;y<m.length;y++){var b=m[y];if(b!=null){if(!u.isString(b))throw new TypeError("Bookmark value should be a string, given: '".concat(b,"'"));p.add(b)}}return s([],a(p),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(v,"'"))})(d)}return h.empty=function(){return c},h.prototype.isEmpty=function(){return this._values.length===0},h.prototype.values=function(){return this._values},h.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},h.prototype.asBeginTransactionParameters=function(){var d;return this.isEmpty()?{}:((d={}).bookmarks=this._values,d)},h})();e.Bookmarks=l;var c=new l(null);function f(h){return h.reduce(function(d,v){return Array.isArray(v)?d.concat(f(v)):d.concat(v)},[])}},9744:function(r,e,t){var n=this&&this.__extends||(function(){var h=function(d,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(p[y]=m[y])},h(d,v)};return function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=d}h(d,v),d.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}})(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9125)),a=i(t(4325)),s=i(t(7021)),u=t(9014),l=i(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_4,f=(function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return n(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(a.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype.telemetry=function(v,p){var m=v.api,y=p===void 0?{}:p,b=y.onError,g=y.onCompleted,_=new u.TelemetryObserver({onCompleted:g,onError:b});return this.write(s.default.telemetry({api:m}),_,!1),_},d})(o.default);e.default=f},9756:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=void 0;var n=t(7843),i=t(7714);e.findIndex=function(o,a){return n.operate(i.createFind(o,a,"index"))}},9792:(r,e,t)=>{var n=t(7045),i=t(4360),o=t(6804);r.exports=function(a,s){if(!s)return a;var u=Object.keys(s);if(u.length===0)return a;for(var l=n(a),c=u.length-1;c>=0;c--){var f=u[c],h=String(s[f]);h&&(h=" "+h),o(l,{type:"preprocessor",data:"#define "+f+h})}return i(l)}},9823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=t(8813),o=t(9419),a=(n.internal.logger.Logger,n.error.SERVICE_UNAVAILABLE),s=(function(){function l(c){var f=c===void 0?{}:c,h=f.maxRetryTimeout,d=h===void 0?3e4:h,v=f.initialDelay,p=v===void 0?1e3:v,m=f.delayMultiplier,y=m===void 0?2:m,b=f.delayJitter,g=b===void 0?.2:b,_=f.logger,w=_===void 0?null:_;this._maxRetryTimeout=u(d,3e4),this._initialDelay=u(p,1e3),this._delayMultiplier=u(y,2),this._delayJitter=u(g,.2),this._logger=w}return l.prototype.retry=function(c){var f=this;return c.pipe((0,o.retryWhen)(function(h){var d=[],v=Date.now(),p=1,m=f._initialDelay;return h.pipe((0,o.mergeMap)(function(y){if(!(0,n.isRetriableError)(y))return(0,i.throwError)(function(){return y});if(d.push(y),p>=2&&Date.now()-v>=f._maxRetryTimeout){var b=(0,n.newError)("Failed after retried for ".concat(p," times in ").concat(f._maxRetryTimeout," ms. Make sure that your database is online and retry again."),a);return b.seenErrors=d,(0,i.throwError)(function(){return b})}var g=f._computeNextDelay(m);return m*=f._delayMultiplier,p++,f._logger&&f._logger.warn("Transaction failed and will be retried in ".concat(g)),(0,i.of)(1).pipe((0,o.delay)(g))}))}))},l.prototype._computeNextDelay=function(c){var f=c*this._delayJitter;return c-f+2*f*Math.random()},l})();function u(l,c){return l||l===0?l:c}e.default=s},9843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.retryWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=function(){c=u.subscribe(a.createOperatorSubscriber(l,void 0,void 0,function(v){f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){return c?d():h=!0}))),f&&f.next(v)})),h&&(c.unsubscribe(),c=null,h=!1,d())};d()})}},9857:function(r,e,t){var n=this&&this.__extends||(function(){var a=function(s,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},a(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}a(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}})(),i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=(function(a){function s(u,l){var c=a.call(this,l)||this;return l&&(c._originalErrorHandler=u._errorHandler,u._errorHandler=c._errorHandler),c._delegate=u,c}return n(s,a),s.prototype.beginTransaction=function(u){return this._delegate.beginTransaction(u)},s.prototype.run=function(u,l,c){return this._delegate.run(u,l,c)},s.prototype.commitTransaction=function(u){return this._delegate.commitTransaction(u)},s.prototype.rollbackTransaction=function(u){return this._delegate.rollbackTransaction(u)},s.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(s.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(u){this._delegate.databaseId=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(u){this._delegate.authToken=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._delegate.version},set:function(u){this._delegate.version=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(u){this._delegate.idleTimestamp=u},enumerable:!1,configurable:!0}),s.prototype.isOpen=function(){return this._delegate.isOpen()},s.prototype.protocol=function(){return this._delegate.protocol()},s.prototype.connect=function(u,l,c,f){return this._delegate.connect(u,l,c,f)},s.prototype.write=function(u,l,c){return this._delegate.write(u,l,c)},s.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},s.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},s.prototype.close=function(){return this._delegate.close()},s.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},s})(i(t(6385)).default);e.default=o},9938:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=void 0;var n=t(9135),i=t(1018);e.concatMapTo=function(o,a){return i.isFunction(a)?n.concatMap(function(){return o},a):n.concatMap(function(){return o})}},9975:(r,e,t)=>{var n=t(7101),i=Array.prototype.concat,o=Array.prototype.slice,a=r.exports=function(s){for(var u=[],l=0,c=s.length;l<c;l++){var f=s[l];n(f)?u=i.call(u,o.call(f)):u.push(f)}return u};a.wrap=function(s){return function(){return s(a(arguments))}}},9994:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7449));e.default=n({},o.default)}},xN={};function pn(r){var e=xN[r];if(e!==void 0)return e.exports;var t=xN[r]={id:r,loaded:!1,exports:{}};return UQ[r].call(t.exports,t,t.exports,pn),t.loaded=!0,t.exports}pn.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return pn.d(e,{a:e}),e},pn.d=(r,e)=>{for(var t in e)pn.o(e,t)&&!pn.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},pn.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),pn.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),pn.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var jr=pn(5250),qQ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])};function Tb(r,e){function t(){this.constructor=r}qQ(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var xg=(function(){function r(e){e===void 0&&(e="Atom@"+yi()),this.name=e,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Or.NOT_TRACKING}return r.prototype.onBecomeUnobserved=function(){},r.prototype.reportObserved=function(){pB(this)},r.prototype.reportChanged=function(){hl(),(function(e){if(e.lowestObserverState!==Or.STALE){e.lowestObserverState=Or.STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===Or.UP_TO_DATE&&(i.isTracing!==Pa.NONE&&gB(i,e),i.onBecomeStale()),i.dependenciesState=Or.STALE}}})(this),dl()},r.prototype.toString=function(){return this.name},r})(),zQ=(function(r){function e(t,n,i){t===void 0&&(t="Atom@"+yi()),n===void 0&&(n=jN),i===void 0&&(i=jN);var o=r.call(this,t)||this;return o.name=t,o.onBecomeObservedHandler=n,o.onBecomeUnobservedHandler=i,o.isPendingUnobservation=!1,o.isBeingTracked=!1,o}return Tb(e,r),e.prototype.reportObserved=function(){return hl(),r.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),dl(),!!Ot.trackingDerivation},e.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},e})(xg),$2=df("Atom",xg);function Jc(r){return r.interceptors&&r.interceptors.length>0}function Cb(r,e){var t=r.interceptors||(r.interceptors=[]);return t.push(e),eP(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function ef(r,e){var t=vf();try{var n=r.interceptors;if(n)for(var i=0,o=n.length;i<o&&(Ht(!(e=n[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{Js(t)}}function cl(r){return r.changeListeners&&r.changeListeners.length>0}function Pb(r,e){var t=r.changeListeners||(r.changeListeners=[]);return t.push(e),eP(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function fl(r,e){var t=vf(),n=r.changeListeners;if(n){for(var i=0,o=(n=n.slice()).length;i<o;i++)n[i](e);Js(t)}}function Xi(){return!!Ot.spyListeners.length}function tf(r){if(Ot.spyListeners.length)for(var e=Ot.spyListeners,t=0,n=e.length;t<n;t++)e[t](r)}function Ia(r){tf(rB({},r,{spyReportStart:!0}))}var SN={spyReportEnd:!0};function ka(r){tf(r?rB({},r,SN):SN)}function jF(r){return Ot.spyListeners.push(r),eP(function(){var e=Ot.spyListeners.indexOf(r);e!==-1&&Ot.spyListeners.splice(e,1)})}var TN="__$$iterating";function o0(r){Ht(r[TN]!==!0,"Illegal state: cannot recycle array as iterator"),ig(r,TN,!0);var e=-1;return ig(r,"next",function(){return{done:++e>=this.length,value:e<this.length?this[e]:void 0}}),r}function FF(r,e){ig(r,typeof Symbol=="function"&&Symbol.iterator||"@@iterator",e)}var Mv,bm,GQ=(function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1})(),nC=0,iC=function(){};Mv=iC,bm=Array.prototype,Object.setPrototypeOf!==void 0?Object.setPrototypeOf(Mv.prototype,bm):Mv.prototype.__proto__!==void 0?Mv.prototype.__proto__=bm:Mv.prototype=bm,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(r){Object.defineProperty(iC.prototype,r,{configurable:!0,writable:!0,value:Array.prototype[r]})});var BF=(function(){function r(e,t,n,i){this.array=n,this.owned=i,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new xg(e||"ObservableArray@"+yi()),this.enhancer=function(o,a){return t(o,a,e+"[..]")}}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.dehanceValues=function(e){return this.dehancer!==void 0?e.map(this.dehancer):e},r.prototype.intercept=function(e){return Cb(this,e)},r.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Pb(this,e)},r.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},r.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},r.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>nC&&K2(e+t+1)},r.prototype.spliceWithArray=function(e,t,n){var i=this;nP(this.atom);var o=this.values.length;if(e===void 0?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=arguments.length===1?o-e:t==null?0:Math.max(0,Math.min(t,o-e)),n===void 0&&(n=[]),Jc(this)){var a=ef(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!a)return tB;t=a.removedCount,n=a.added}var s=(n=n.map(function(l){return i.enhancer(l,void 0)})).length-t;this.updateArrayLength(o,s);var u=this.spliceItemsIntoValues(e,t,n);return t===0&&n.length===0||this.notifyArraySplice(e,n,u),this.dehanceValues(u)},r.prototype.spliceItemsIntoValues=function(e,t,n){if(n.length<1e4)return(i=this.values).splice.apply(i,[e,t].concat(n));var i,o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},r.prototype.notifyArrayChildUpdate=function(e,t,n){var i=!this.owned&&Xi(),o=cl(this),a=o||i?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;i&&Ia(a),this.atom.reportChanged(),o&&fl(this,a),i&&ka()},r.prototype.notifyArraySplice=function(e,t,n){var i=!this.owned&&Xi(),o=cl(this),a=o||i?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;i&&Ia(a),this.atom.reportChanged(),o&&fl(this,a),i&&ka()},r})(),$s=(function(r){function e(t,n,i,o){i===void 0&&(i="ObservableArray@"+yi()),o===void 0&&(o=!1);var a=r.call(this)||this,s=new BF(i,n,a,o);return ig(a,"$mobx",s),t&&t.length&&a.spliceWithArray(0,0,t),GQ&&Object.defineProperty(s.array,"0",VQ),a}return Tb(e,r),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,n){return n===void 0&&(n=!1),this.$mobx.observe(t,n)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map(function(i){return ru(i)?i.peek():i}))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,n,i){i===void 0&&(i=0);var o=this.findIndex.apply(this,arguments);return o===-1?void 0:this.get(o)},e.prototype.findIndex=function(t,n,i){i===void 0&&(i=0);for(var o=this.peek(),a=o.length,s=i;s<a;s++)if(t.call(n,o[s],s,this))return s;return-1},e.prototype.splice=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,n)}return this.$mobx.spliceWithArray(t,n,i)},e.prototype.spliceWithArray=function(t,n,i){return this.$mobx.spliceWithArray(t,n,i)},e.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,t),i.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.$mobx;return i.spliceWithArray(0,0,t),i.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var n=this.slice();return n.sort.apply(n,arguments)},e.prototype.remove=function(t){var n=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},e.prototype.move=function(t,n){function i(s){if(s<0)throw new Error("[mobx.array] Index out of bounds: "+s+" is negative");var u=this.$mobx.values.length;if(s>=u)throw new Error("[mobx.array] Index out of bounds: "+s+" is not smaller than "+u)}if(i.call(this,t),i.call(this,n),t!==n){var o,a=this.$mobx.values;o=t<n?a.slice(0,t).concat(a.slice(t+1,n+1),[a[t]],a.slice(n+1)):a.slice(0,n).concat([a[t]],a.slice(n,t),a.slice(t+1)),this.replace(o)}},e.prototype.get=function(t){var n=this.$mobx;if(n){if(t<n.values.length)return n.atom.reportObserved(),n.dehanceValue(n.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+n.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,n){var i=this.$mobx,o=i.values;if(t<o.length){nP(i.atom);var a=o[t];if(Jc(i)){var s=ef(i,{type:"update",object:this,index:t,newValue:n});if(!s)return;n=s.newValue}(n=i.enhancer(n,a))!==a&&(o[t]=n,i.notifyArrayChildUpdate(t,n,a))}else{if(t!==o.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+o.length);i.spliceWithArray(t,0,[n])}},e})(iC);FF($s.prototype,function(){return o0(this.slice())}),Object.defineProperty($s.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(r){this.$mobx.setArrayLength(r)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(r){var e=Array.prototype[r];Ht(typeof e=="function","Base function not defined on Array prototype: '"+r+"'"),Ol($s.prototype,r,function(){return e.apply(this.peek(),arguments)})}),(function(r,e){for(var t=0;t<e.length;t++)Ol(r,e[t],r[e[t]])})($s.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var VQ=UF(0);function UF(r){return{enumerable:!1,configurable:!1,get:function(){return this.get(r)},set:function(e){this.set(r,e)}}}function WQ(r){Object.defineProperty($s.prototype,""+r,UF(r))}function K2(r){for(var e=nC;e<r;e++)WQ(e);nC=r}K2(1e3);var HQ=df("ObservableArrayAdministration",BF);function ru(r){return tP(r)&&HQ(r.$mobx)}var fp={},El=(function(r){function e(t,n,i,o){i===void 0&&(i="ObservableValue@"+yi()),o===void 0&&(o=!0);var a=r.call(this,i)||this;return a.enhancer=n,a.hasUnreportedChange=!1,a.dehancer=void 0,a.value=n(t,void 0,i),o&&Xi()&&tf({type:"create",object:a,newValue:a.value}),a}return Tb(e,r),e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){var n=this.value;if((t=this.prepareNewValue(t))!==fp){var i=Xi();i&&Ia({type:"update",object:this,newValue:t,oldValue:n}),this.setNewValue(t),i&&ka()}},e.prototype.prepareNewValue=function(t){if(nP(this),Jc(this)){var n=ef(this,{object:this,type:"update",newValue:t});if(!n)return fp;t=n.newValue}return t=this.enhancer(t,this.value,this.name),this.value!==t?t:fp},e.prototype.setNewValue=function(t){var n=this.value;this.value=t,this.reportChanged(),cl(this)&&fl(this,{type:"update",object:this,newValue:t,oldValue:n})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return Cb(this,t)},e.prototype.observe=function(t,n){return n&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Pb(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return oB(this.get())},e})(xg);El.prototype[iB()]=El.prototype.valueOf;var Z2=df("ObservableValue",El),YQ={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:`* This computation is suspended (not in use by any reaction) and won't run automatically.
	Didn't expect this computation to be suspended at this point?
	  1. Make sure this computation is used by a reaction (reaction, autorun, observer).
	  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).`,m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:`Hi there! I'm sorry you have just run into an exception.
If your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)
threw an exception and that mobx caught it, to avoid that it brings the rest of your application down.
The original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.

However, more interesting is the actual stack trace of the error itself.
Hopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.
See \`error.stack\` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.
That stack is more interesting than the stack of this console.error itself.

If the exception you see is an exception you created yourself, make sure to use \`throw new Error("Oops")\` instead of \`throw "Oops"\`,
because the javascript environment will only preserve the original stack trace in the first form.

You can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".
(Note that it might pause on many other, unrelated exception as well).

If that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!
`,m038:`Missing items in this list?
    1. Check whether all used values are properly marked as observable (use isObservable to verify)
    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.
`};function pr(r){return YQ[r]}function tg(r,e){Ht(typeof e=="function",pr("m026")),Ht(typeof r=="string"&&r.length>0,"actions should have valid names, got: '"+r+"'");var t=function(){return Q2(r,e,this,arguments)};return t.originalFn=e,t.isMobxAction=!0,t}function Q2(r,e,t,n){var i=(function(o,a,s,u){var l=Xi()&&!!o,c=0;if(l){c=Date.now();var f=u&&u.length||0,h=new Array(f);if(f>0)for(var d=0;d<f;d++)h[d]=u[d];Ia({type:"action",name:o,fn:a,object:s,arguments:h})}var v=vf();return hl(),{prevDerivation:v,prevAllowStateChanges:zF(!0),notifySpy:l,startTime:c}})(r,e,t,n);try{return e.apply(t,n)}finally{(function(o){GF(o.prevAllowStateChanges),dl(),Js(o.prevDerivation),o.notifySpy&&ka({time:Date.now()-o.startTime})})(i)}}function qF(r){Ht(Ot.trackingDerivation===null,pr("m028")),Ot.strictMode=r,Ot.allowStateChanges=!r}function zF(r){var e=Ot.allowStateChanges;return Ot.allowStateChanges=r,e}function GF(r){Ot.allowStateChanges=r}function Ab(r,e,t,n,i){function o(a,s,u,l,c){if(c===void 0&&(c=0),Ht(i||PN(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),u){Ib(a,"__mobxLazyInitializers")||Ol(a,"__mobxLazyInitializers",a.__mobxLazyInitializers&&a.__mobxLazyInitializers.slice()||[]);var f=u.value,h=u.initializer;return a.__mobxLazyInitializers.push(function(v){r(v,s,h?h.call(v):f,l,u)}),{enumerable:n,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&rg(this),e.call(this,s)},set:function(v){this.__mobxDidRunLazyInitializers!==!0&&rg(this),t.call(this,s,v)}}}var d={enumerable:n,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[s]===!0||CN(this,s,void 0,r,l,u),e.call(this,s)},set:function(v){this.__mobxInitializedProps&&this.__mobxInitializedProps[s]===!0?t.call(this,s,v):CN(this,s,v,r,l,u)}};return(arguments.length<3||arguments.length===5&&c<3)&&Object.defineProperty(a,s,d),d}return i?function(){if(PN(arguments))return o.apply(null,arguments);var a=arguments,s=arguments.length;return function(u,l,c){return o(u,l,c,a,s)}}:o}function CN(r,e,t,n,i,o){Ib(r,"__mobxInitializedProps")||Ol(r,"__mobxInitializedProps",{}),r.__mobxInitializedProps[e]=!0,n(r,e,t,i,o)}function rg(r){r.__mobxDidRunLazyInitializers!==!0&&r.__mobxLazyInitializers&&(Ol(r,"__mobxDidRunLazyInitializers",!0),r.__mobxDidRunLazyInitializers&&r.__mobxLazyInitializers.forEach(function(e){return e(r)}))}function PN(r){return(r.length===2||r.length===3)&&typeof r[1]=="string"}var XQ=Ab(function(r,e,t,n,i){var o=n&&n.length===1?n[0]:t.name||e||"<unnamed action>";Ol(r,e,zr(o,t))},function(r){return this[r]},function(){Ht(!1,pr("m001"))},!1,!0),$Q=Ab(function(r,e,t){VF(r,e,t)},function(r){return this[r]},function(){Ht(!1,pr("m001"))},!1,!1),zr=function(r,e,t,n){return arguments.length===1&&typeof r=="function"?tg(r.name||"<unnamed action>",r):arguments.length===2&&typeof e=="function"?tg(r,e):arguments.length===1&&typeof r=="string"?AN(r):AN(e).apply(null,arguments)};function AN(r){return function(e,t,n){if(n&&typeof n.value=="function")return n.value=tg(r,n.value),n.enumerable=!1,n.configurable=!0,n;if(n!==void 0&&n.get!==void 0)throw new Error("[mobx] action is not expected to be used with getters");return XQ(r).apply(this,arguments)}}function R0(r){return typeof r=="function"&&r.isMobxAction===!0}function VF(r,e,t){var n=function(){return Q2(e,t,r,arguments)};n.isMobxAction=!0,Ol(r,e,n)}zr.bound=function(r,e,t){if(typeof r=="function"){var n=tg("<not yet bound action>",r);return n.autoBind=!0,n}return $Q.apply(null,arguments)};var RN=Object.prototype.toString;function Rb(r,e){return oC(r,e)}function oC(r,e,t,n){if(r===e)return r!==0||1/r==1/e;if(r==null||e==null)return!1;if(r!=r)return e!=e;var i=typeof r;return(i==="function"||i==="object"||typeof e=="object")&&(function(o,a,s,u){o=IN(o),a=IN(a);var l=RN.call(o);if(l!==RN.call(a))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+o==""+a;case"[object Number]":return+o!=+o?+a!=+a:+o==0?1/+o==1/a:+o==+a;case"[object Date]":case"[object Boolean]":return+o==+a;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(o)===Symbol.valueOf.call(a)}var c=l==="[object Array]";if(!c){if(typeof o!="object"||typeof a!="object")return!1;var f=o.constructor,h=a.constructor;if(f!==h&&!(typeof f=="function"&&f instanceof f&&typeof h=="function"&&h instanceof h)&&"constructor"in o&&"constructor"in a)return!1}u=u||[];for(var d=(s=s||[]).length;d--;)if(s[d]===o)return u[d]===a;if(s.push(o),u.push(a),c){if((d=o.length)!==a.length)return!1;for(;d--;)if(!oC(o[d],a[d],s,u))return!1}else{var v,p=Object.keys(o);if(d=p.length,Object.keys(a).length!==d)return!1;for(;d--;)if(!KQ(a,v=p[d])||!oC(o[v],a[v],s,u))return!1}return s.pop(),u.pop(),!0})(r,e,t,n)}function IN(r){return ru(r)?r.peek():ua(r)?r.entries():cd(r)?(function(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t})(r.entries()):r}function KQ(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function kN(r,e){return r===e}var nu={identity:kN,structural:function(r,e){return Rb(r,e)},default:function(r,e){return(function(t,n){return typeof t=="number"&&typeof n=="number"&&isNaN(t)&&isNaN(n)})(r,e)||kN(r,e)}};function I0(r,e,t){var n,i,o;typeof r=="string"?(n=r,i=e,o=t):(n=r.name||"Autorun@"+yi(),i=r,o=e),Ht(typeof i=="function",pr("m004")),Ht(R0(i)===!1,pr("m005")),o&&(i=i.bind(o));var a=new og(n,function(){this.track(s)});function s(){i(a)}return a.schedule(),a.getDisposer()}function WF(r,e,t){var n;arguments.length>3&&mi(pr("m007")),hf(r)&&mi(pr("m008")),(n=typeof t=="object"?t:{}).name=n.name||r.name||e.name||"Reaction@"+yi(),n.fireImmediately=t===!0||n.fireImmediately===!0,n.delay=n.delay||0,n.compareStructural=n.compareStructural||n.struct||!1,e=zr(n.name,n.context?e.bind(n.context):e),n.context&&(r=r.bind(n.context));var i,o=!0,a=!1,s=n.equals?n.equals:n.compareStructural||n.struct?nu.structural:nu.default,u=new og(n.name,function(){o||n.delay<1?l():a||(a=!0,setTimeout(function(){a=!1,l()},n.delay))});function l(){if(!u.isDisposed){var c=!1;u.track(function(){var f=r(u);c=o||!s(i,f),i=f}),o&&n.fireImmediately&&e(i,u),o||c!==!0||e(i,u),o&&(o=!1)}}return u.schedule(),u.getDisposer()}var rf=(function(){function r(e,t,n,i,o){this.derivation=e,this.scope=t,this.equals=n,this.dependenciesState=Or.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Or.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+yi(),this.value=new D0(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Pa.NONE,this.name=i||"ComputedValue@"+yi(),o&&(this.setter=tg(i+"-setter",o))}return r.prototype.onBecomeStale=function(){(function(e){if(e.lowestObserverState===Or.UP_TO_DATE){e.lowestObserverState=Or.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===Or.UP_TO_DATE&&(i.dependenciesState=Or.POSSIBLY_STALE,i.isTracing!==Pa.NONE&&gB(i,e),i.onBecomeStale())}}})(this)},r.prototype.onBecomeUnobserved=function(){cC(this),this.value=void 0},r.prototype.get=function(){Ht(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),Ot.inBatch===0?(hl(),lC(this)&&(this.isTracing!==Pa.NONE&&""+this.name,this.value=this.computeValue(!1)),dl()):(pB(this),lC(this)&&this.trackAndCompute()&&(function(t){if(t.lowestObserverState!==Or.STALE){t.lowestObserverState=Or.STALE;for(var n=t.observers,i=n.length;i--;){var o=n[i];o.dependenciesState===Or.POSSIBLY_STALE?o.dependenciesState=Or.STALE:o.dependenciesState===Or.UP_TO_DATE&&(t.lowestObserverState=Or.UP_TO_DATE)}}})(this));var e=this.value;if(Zv(e))throw e.cause;return e},r.prototype.peek=function(){var e=this.computeValue(!1);if(Zv(e))throw e.cause;return e},r.prototype.set=function(e){if(this.setter){Ht(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else Ht(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},r.prototype.trackAndCompute=function(){Xi()&&tf({object:this.scope,type:"compute",fn:this.derivation});var e=this.value,t=this.dependenciesState===Or.NOT_TRACKING,n=this.value=this.computeValue(!0);return t||Zv(e)||Zv(n)||!this.equals(e,n)},r.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Ot.computationDepth++,e)t=bB(this,this.derivation,this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new D0(n)}return Ot.computationDepth--,this.isComputing=!1,t},r.prototype.observe=function(e,t){var n=this,i=!0,o=void 0;return I0(function(){var a=n.get();if(!i||t){var s=vf();e({type:"update",object:n,newValue:a,oldValue:o}),Js(s)}i=!1,o=a})},r.prototype.toJSON=function(){return this.get()},r.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},r.prototype.valueOf=function(){return oB(this.get())},r.prototype.whyRun=function(){var e=!!Ot.trackingDerivation,t=k0(this.isComputing?this.newObserving:this.observing).map(function(i){return i.name}),n=k0(hB(this).map(function(i){return i.name}));return`
WhyRun? computation '`+this.name+`':
 * Running because: `+(e?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+`
`+(this.dependenciesState===Or.NOT_TRACKING?pr("m032"):` * This computation will re-run if any of the following observables changes:
    `+sC(t)+`
    `+(this.isComputing&&e?" (... or any observable accessed during the remainder of the current run)":"")+`
    `+pr("m038")+`

  * If the outcome of this computation changes, the following observers will be re-run:
    `+sC(n)+`
`)},r})();rf.prototype[iB()]=rf.prototype.valueOf;var Qs=df("ComputedValue",rf),HF=(function(){function r(e,t){this.target=e,this.name=t,this.values={},this.changeListeners=null,this.interceptors=null}return r.prototype.observe=function(e,t){return Ht(t!==!0,"`observe` doesn't support the fire immediately property for observable objects."),Pb(this,e)},r.prototype.intercept=function(e){return Cb(this,e)},r})();function sd(r,e){if(gs(r)&&r.hasOwnProperty("$mobx"))return r.$mobx;Ht(Object.isExtensible(r),pr("m035")),ld(r)||(e=(r.constructor.name||"ObservableObject")+"@"+yi()),e||(e="ObservableObject@"+yi());var t=new HF(r,e);return ig(r,"$mobx",t),t}function ZQ(r,e,t,n){if(r.values[e]&&!Qs(r.values[e]))return Ht("value"in t,"The property "+e+" in "+r.name+" is already observable, cannot redefine it as computed property"),void(r.target[e]=t.value);if("value"in t)if(hf(t.value)){var i=t.value;aC(r,e,i.initialValue,i.enhancer)}else R0(t.value)&&t.value.autoBind===!0?VF(r.target,e,t.value.originalFn):Qs(t.value)?(function(o,a,s){var u=o.name+"."+a;s.name=u,s.scope||(s.scope=o.target),o.values[a]=s,Object.defineProperty(o.target,a,XF(a))})(r,e,t.value):aC(r,e,t.value,n);else YF(r,e,t.get,t.set,nu.default,!0)}function aC(r,e,t,n){if(rP(r.target,e),Jc(r)){var i=ef(r,{object:r.target,name:e,type:"add",newValue:t});if(!i)return;t=i.newValue}t=(r.values[e]=new El(t,n,r.name+"."+e,!1)).value,Object.defineProperty(r.target,e,(function(o){return DN[o]||(DN[o]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[o].get()},set:function(a){$F(this,o,a)}})})(e)),(function(o,a,s,u){var l=cl(o),c=Xi(),f=l||c?{type:"add",object:a,name:s,newValue:u}:null;c&&Ia(f),l&&fl(o,f),c&&ka()})(r,r.target,e,t)}function YF(r,e,t,n,i,o){o&&rP(r.target,e),r.values[e]=new rf(t,r.target,i,r.name+"."+e,n),o&&Object.defineProperty(r.target,e,XF(e))}var DN={},MN={};function XF(r){return MN[r]||(MN[r]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[r].get()},set:function(e){return this.$mobx.values[r].set(e)}})}function $F(r,e,t){var n=r.$mobx,i=n.values[e];if(Jc(n)){if(!(s=ef(n,{type:"update",object:r,name:e,newValue:t})))return;t=s.newValue}if((t=i.prepareNewValue(t))!==fp){var o=cl(n),a=Xi(),s=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:t}:null;a&&Ia(s),i.setNewValue(t),o&&fl(n,s),a&&ka()}}var QQ=df("ObservableObjectAdministration",HF);function gs(r){return!!tP(r)&&(rg(r),QQ(r.$mobx))}function wd(r,e){if(r==null)return!1;if(e!==void 0){if(ru(r)||ua(r))throw new Error(pr("m019"));if(gs(r)){var t=r.$mobx;return t.values&&!!t.values[e]}return!1}return gs(r)||!!r.$mobx||$2(r)||fd(r)||Qs(r)}function Sg(r){return Ht(!!r,":("),Ab(function(e,t,n,i,o){rP(e,t),Ht(!o||!o.get,pr("m022")),aC(sd(e,void 0),t,n,r)},function(e){var t=this.$mobx.values[e];if(t!==void 0)return t.get()},function(e,t){$F(this,e,t)},!0,!1)}function KF(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return J2(r,nl,e)}function ZF(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return J2(r,il,e)}function J2(r,e,t){Ht(arguments.length>=2,pr("m014")),Ht(typeof r=="object",pr("m015")),Ht(!ua(r),pr("m016")),t.forEach(function(u){Ht(typeof u=="object",pr("m017")),Ht(!wd(u),pr("m018"))});for(var n=sd(r),i={},o=t.length-1;o>=0;o--){var a=t[o];for(var s in a)if(i[s]!==!0&&Ib(a,s)){if(i[s]=!0,r===a&&!nB(r,s))continue;ZQ(n,s,Object.getOwnPropertyDescriptor(a,s),e)}}return r}var QF=Sg(nl),JQ=Sg(JF),eJ=Sg(il),tJ=Sg(hp),rJ=Sg(eB),LN={box:function(r,e){return arguments.length>2&&Gu("box"),new El(r,nl,e)},shallowBox:function(r,e){return arguments.length>2&&Gu("shallowBox"),new El(r,il,e)},array:function(r,e){return arguments.length>2&&Gu("array"),new $s(r,nl,e)},shallowArray:function(r,e){return arguments.length>2&&Gu("shallowArray"),new $s(r,il,e)},map:function(r,e){return arguments.length>2&&Gu("map"),new ud(r,nl,e)},shallowMap:function(r,e){return arguments.length>2&&Gu("shallowMap"),new ud(r,il,e)},object:function(r,e){arguments.length>2&&Gu("object");var t={};return sd(t,e),KF(t,r),t},shallowObject:function(r,e){arguments.length>2&&Gu("shallowObject");var t={};return sd(t,e),ZF(t,r),t},ref:function(){return arguments.length<2?Kv(il,arguments[0]):eJ.apply(null,arguments)},shallow:function(){return arguments.length<2?Kv(JF,arguments[0]):JQ.apply(null,arguments)},deep:function(){return arguments.length<2?Kv(nl,arguments[0]):QF.apply(null,arguments)},struct:function(){return arguments.length<2?Kv(hp,arguments[0]):tJ.apply(null,arguments)}},un=function(r){if(r===void 0&&(r=void 0),typeof arguments[1]=="string")return QF.apply(null,arguments);if(Ht(arguments.length<=1,pr("m021")),Ht(!hf(r),pr("m020")),wd(r))return r;var e=nl(r,0,void 0);return e!==r?e:un.box(r)};function Gu(r){mi("Expected one or two arguments to observable."+r+". Did you accidentally try to use observable."+r+" as decorator?")}function hf(r){return typeof r=="object"&&r!==null&&r.isMobxModifierDescriptor===!0}function Kv(r,e){return Ht(!hf(e),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:e,enhancer:r}}function nl(r,e,t){return hf(r)&&mi("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),wd(r)?r:Array.isArray(r)?un.array(r,t):ld(r)?un.object(r,t):cd(r)?un.map(r,t):r}function JF(r,e,t){return hf(r)&&mi("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),r==null||gs(r)||ru(r)||ua(r)?r:Array.isArray(r)?un.shallowArray(r,t):ld(r)?un.shallowObject(r,t):cd(r)?un.shallowMap(r,t):mi("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function il(r){return r}function hp(r,e,t){if(Rb(r,e))return e;if(wd(r))return r;if(Array.isArray(r))return new $s(r,hp,t);if(cd(r))return new ud(r,hp,t);if(ld(r)){var n={};return sd(n,t),J2(n,hp,[r]),n}return r}function eB(r,e,t){return Rb(r,e)?e:r}function Fh(r,e){e===void 0&&(e=void 0),hl();try{return r.apply(e)}finally{dl()}}Object.keys(LN).forEach(function(r){return un[r]=LN[r]}),un.deep.struct=un.struct,un.ref.struct=function(){return arguments.length<2?Kv(eB,arguments[0]):rJ.apply(null,arguments)};var nJ={},ud=(function(){function r(e,t,n){t===void 0&&(t=nl),n===void 0&&(n="ObservableMap@"+yi()),this.enhancer=t,this.name=n,this.$mobx=nJ,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new $s(void 0,il,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(e)}return r.prototype._has=function(e){return this._data[e]!==void 0},r.prototype.has=function(e){return!!this.isValidKey(e)&&(e=""+e,this._hasMap[e]?this._hasMap[e].get():this._updateHasMapEntry(e,!1).get())},r.prototype.set=function(e,t){this.assertValidKey(e),e=""+e;var n=this._has(e);if(Jc(this)){var i=ef(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},r.prototype.delete=function(e){var t=this;if(this.assertValidKey(e),e=""+e,Jc(this)&&!(o=ef(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=Xi(),i=cl(this),o=i||n?{type:"delete",object:this,oldValue:this._data[e].value,name:e}:null;return n&&Ia(o),Fh(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data[e].setNewValue(void 0),t._data[e]=void 0}),i&&fl(this,o),n&&ka(),!0}return!1},r.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap[e];return n?n.setNewValue(t):n=this._hasMap[e]=new El(t,il,this.name+"."+e+"?",!1),n},r.prototype._updateValue=function(e,t){var n=this._data[e];if((t=n.prepareNewValue(t))!==fp){var i=Xi(),o=cl(this),a=o||i?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;i&&Ia(a),n.setNewValue(t),o&&fl(this,a),i&&ka()}},r.prototype._addValue=function(e,t){var n=this;Fh(function(){var s=n._data[e]=new El(t,n.enhancer,n.name+"."+e,!1);t=s.value,n._updateHasMapEntry(e,!0),n._keys.push(e)});var i=Xi(),o=cl(this),a=o||i?{type:"add",object:this,name:e,newValue:t}:null;i&&Ia(a),o&&fl(this,a),i&&ka()},r.prototype.get=function(e){return e=""+e,this.has(e)?this.dehanceValue(this._data[e].get()):this.dehanceValue(void 0)},r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.keys=function(){return o0(this._keys.slice())},r.prototype.values=function(){return o0(this._keys.map(this.get,this))},r.prototype.entries=function(){var e=this;return o0(this._keys.map(function(t){return[t,e.get(t)]}))},r.prototype.forEach=function(e,t){var n=this;this.keys().forEach(function(i){return e.call(t,n.get(i),i,n)})},r.prototype.merge=function(e){var t=this;return ua(e)&&(e=e.toJS()),Fh(function(){ld(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(n){var i=n[0],o=n[1];return t.set(i,o)}):cd(e)?e.forEach(function(n,i){return t.set(i,n)}):e!=null&&mi("Cannot initialize map from "+e)}),this},r.prototype.clear=function(){var e=this;Fh(function(){_B(function(){e.keys().forEach(e.delete,e)})})},r.prototype.replace=function(e){var t=this;return Fh(function(){var n,i=ld(n=e)?Object.keys(n):Array.isArray(n)?n.map(function(o){return o[0]}):cd(n)?Array.from(n.keys()):ua(n)?n.keys():mi("Cannot get keys from "+n);t.keys().filter(function(o){return i.indexOf(o)===-1}).forEach(function(o){return t.delete(o)}),t.merge(e)}),this},Object.defineProperty(r.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),r.prototype.toJS=function(){var e=this,t={};return this.keys().forEach(function(n){return t[n]=e.get(n)}),t},r.prototype.toJSON=function(){return this.toJS()},r.prototype.isValidKey=function(e){return e!=null&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")},r.prototype.assertValidKey=function(e){if(!this.isValidKey(e))throw new Error("[mobx.map] Invalid key: '"+e+"', only strings, numbers and booleans are accepted as key in observable maps.")},r.prototype.toString=function(){var e=this;return this.name+"[{ "+this.keys().map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},r.prototype.observe=function(e,t){return Ht(t!==!0,pr("m033")),Pb(this,e)},r.prototype.intercept=function(e){return Cb(this,e)},r})();FF(ud.prototype,function(){return this.entries()});var ua=df("ObservableMap",ud),tB=[];function ng(){return typeof window<"u"?window:pn.g}function yi(){return++Ot.mobxGuid}function mi(r,e){throw Ht(!1,r,e),"X"}function Ht(r,e,t){if(!r)throw new Error("[mobx] Invariant failed: "+e+(t?" in '"+t+"'":""))}Object.freeze(tB);var NN=[];function Nc(r){return NN.indexOf(r)===-1&&(NN.push(r),console.error("[mobx] Deprecated: "+r),!0)}function eP(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var jN=function(){};function k0(r){var e=[];return r.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function sC(r,e,t){return e===void 0&&(e=100),t===void 0&&(t=" - "),r?r.slice(0,e).join(t)+(r.length>e?" (... and "+(r.length-e)+"more)":""):""}function tP(r){return r!==null&&typeof r=="object"}function ld(r){if(r===null||typeof r!="object")return!1;var e=Object.getPrototypeOf(r);return e===Object.prototype||e===null}function rB(){for(var r=arguments[0],e=1,t=arguments.length;e<t;e++){var n=arguments[e];for(var i in n)Ib(n,i)&&(r[i]=n[i])}return r}var iJ=Object.prototype.hasOwnProperty;function Ib(r,e){return iJ.call(r,e)}function Ol(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function ig(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function nB(r,e){var t=Object.getOwnPropertyDescriptor(r,e);return!t||t.configurable!==!1&&t.writable!==!1}function rP(r,e){Ht(nB(r,e),"Cannot make property '"+e+"' observable, it is not configurable and writable in the target object")}function df(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return tP(n)&&n[t]===!0}}function cd(r){return ng().Map!==void 0&&r instanceof ng().Map}function iB(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function oB(r){return r===null?null:typeof r=="object"?""+r:r}var Or,Pa,oJ=["mobxGuid","resetId","spyListeners","strictMode","runId"],aB=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]},Ot=new aB,sB=!1,uB=!1,FN=!1,$S=ng();function ys(r,e){if(typeof r=="object"&&r!==null){if(ru(r))return Ht(e===void 0,pr("m036")),r.$mobx.atom;if(ua(r)){var t=r;return e===void 0?ys(t._keys):(Ht(!!(n=t._data[e]||t._hasMap[e]),"the entry '"+e+"' does not exist in the observable map '"+uC(r)+"'"),n)}var n;if(rg(r),e&&!r.$mobx&&r[e],gs(r))return e?(Ht(!!(n=r.$mobx.values[e]),"no observable property '"+e+"' found on the observable object '"+uC(r)+"'"),n):mi("please specify a property");if($2(r)||Qs(r)||fd(r))return r}else if(typeof r=="function"&&fd(r.$mobx))return r.$mobx;return mi("Cannot obtain atom from "+r)}function Ks(r,e){return Ht(r,"Expecting some object"),e!==void 0?Ks(ys(r,e)):$2(r)||Qs(r)||fd(r)||ua(r)?r:(rg(r),r.$mobx?r.$mobx:void Ht(!1,"Cannot obtain administration from "+r))}function uC(r,e){return(e!==void 0?ys(r,e):gs(r)||ua(r)?Ks(r):ys(r)).name}function lB(r,e){return cB(ys(r,e))}function cB(r){var e={name:r.name};return r.observing&&r.observing.length>0&&(e.dependencies=k0(r.observing).map(cB)),e}function fB(r){var e={name:r.name};return(function(t){return t.observers&&t.observers.length>0})(r)&&(e.observers=hB(r).map(fB)),e}function hB(r){return r.observers}function aJ(r,e){var t=r.observers.length;t&&(r.observersIndexes[e.__mapid]=t),r.observers[t]=e,r.lowestObserverState>e.dependenciesState&&(r.lowestObserverState=e.dependenciesState)}function dB(r,e){if(r.observers.length===1)r.observers.length=0,vB(r);else{var t=r.observers,n=r.observersIndexes,i=t.pop();if(i!==e){var o=n[e.__mapid]||0;o?n[i.__mapid]=o:delete n[i.__mapid],t[o]=i}delete n[e.__mapid]}}function vB(r){r.isPendingUnobservation||(r.isPendingUnobservation=!0,Ot.pendingUnobservations.push(r))}function hl(){Ot.inBatch++}function dl(){if(--Ot.inBatch===0){OB();for(var r=Ot.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation=!1,t.observers.length===0&&t.onBecomeUnobserved()}Ot.pendingUnobservations=[]}}function pB(r){var e=Ot.trackingDerivation;e!==null?e.runId!==r.lastAccessedBy&&(r.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=r):r.observers.length===0&&vB(r)}function gB(r,e){if(""+r.name+e.name,r.isTracing===Pa.BREAK){var t=[];yB(lB(r),t,1),new Function(`debugger;
/*
Tracing '`+r.name+`'

You are entering this break point because derivation '`+r.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(r instanceof rf?r.derivation.toString():"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function yB(r,e,t){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(t).join("	")+r.name),r.dependencies&&r.dependencies.forEach(function(n){return yB(n,e,t+1)}))}$S.__mobxInstanceCount?($S.__mobxInstanceCount++,setTimeout(function(){sB||uB||FN||(FN=!0,console.warn("[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details."))},1)):$S.__mobxInstanceCount=1,(function(r){r[r.NOT_TRACKING=-1]="NOT_TRACKING",r[r.UP_TO_DATE=0]="UP_TO_DATE",r[r.POSSIBLY_STALE=1]="POSSIBLY_STALE",r[r.STALE=2]="STALE"})(Or||(Or={})),(function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"})(Pa||(Pa={}));var D0=function(r){this.cause=r};function Zv(r){return r instanceof D0}function lC(r){switch(r.dependenciesState){case Or.UP_TO_DATE:return!1;case Or.NOT_TRACKING:case Or.STALE:return!0;case Or.POSSIBLY_STALE:for(var e=vf(),t=r.observing,n=t.length,i=0;i<n;i++){var o=t[i];if(Qs(o)){try{o.get()}catch{return Js(e),!0}if(r.dependenciesState===Or.STALE)return Js(e),!0}}return wB(r),Js(e),!1}}function mB(){return Ot.trackingDerivation!==null}function nP(r){var e=r.observers.length>0;Ot.computationDepth>0&&e&&mi(pr("m031")+r.name),!Ot.allowStateChanges&&e&&mi(pr(Ot.strictMode?"m030a":"m030b")+r.name)}function bB(r,e,t){wB(r),r.newObserving=new Array(r.observing.length+100),r.unboundDepsCount=0,r.runId=++Ot.runId;var n,i=Ot.trackingDerivation;Ot.trackingDerivation=r;try{n=e.call(t)}catch(o){n=new D0(o)}return Ot.trackingDerivation=i,(function(o){for(var a=o.observing,s=o.observing=o.newObserving,u=Or.UP_TO_DATE,l=0,c=o.unboundDepsCount,f=0;f<c;f++)(h=s[f]).diffValue===0&&(h.diffValue=1,l!==f&&(s[l]=h),l++),h.dependenciesState>u&&(u=h.dependenciesState);for(s.length=l,o.newObserving=null,c=a.length;c--;)(h=a[c]).diffValue===0&&dB(h,o),h.diffValue=0;for(;l--;){var h;(h=s[l]).diffValue===1&&(h.diffValue=0,aJ(h,o))}u!==Or.UP_TO_DATE&&(o.dependenciesState=u,o.onBecomeStale())})(r),n}function cC(r){var e=r.observing;r.observing=[];for(var t=e.length;t--;)dB(e[t],r);r.dependenciesState=Or.NOT_TRACKING}function _B(r){var e=vf(),t=r();return Js(e),t}function vf(){var r=Ot.trackingDerivation;return Ot.trackingDerivation=null,r}function Js(r){Ot.trackingDerivation=r}function wB(r){if(r.dependenciesState!==Or.UP_TO_DATE){r.dependenciesState=Or.UP_TO_DATE;for(var e=r.observing,t=e.length;t--;)e[t].lowestObserverState=Or.UP_TO_DATE}}function EB(r){switch(r.length){case 0:return Ot.trackingDerivation;case 1:return ys(r[0]);case 2:return ys(r[0],r[1])}}var og=(function(){function r(e,t){e===void 0&&(e="Reaction@"+yi()),this.name=e,this.onInvalidate=t,this.observing=[],this.newObserving=[],this.dependenciesState=Or.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+yi(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Pa.NONE}return r.prototype.onBecomeStale=function(){this.schedule()},r.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ot.pendingReactions.push(this),OB())},r.prototype.isScheduled=function(){return this._isScheduled},r.prototype.runReaction=function(){this.isDisposed||(hl(),this._isScheduled=!1,lC(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&Xi()&&tf({object:this,type:"scheduled-reaction"})),dl())},r.prototype.track=function(e){hl();var t,n=Xi();n&&(t=Date.now(),Ia({object:this,type:"reaction",fn:e})),this._isRunning=!0;var i=bB(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&cC(this),Zv(i)&&this.reportExceptionInDerivation(i.cause),n&&ka({time:Date.now()-t}),dl()},r.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,i=pr("m037");console.error(n||i,e),Xi()&&tf({type:"error",message:n,error:e,object:this}),Ot.globalReactionErrorHandlers.forEach(function(o){return o(e,t)})}},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(hl(),cC(this),dl()))},r.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e.onError=sJ,e},r.prototype.toString=function(){return"Reaction["+this.name+"]"},r.prototype.whyRun=function(){var e=k0(this._isRunning?this.newObserving:this.observing).map(function(t){return t.name});return`
WhyRun? reaction '`+this.name+`':
 * Status: [`+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+`]
 * This reaction will re-run if any of the following observables changes:
    `+sC(e)+`
    `+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+`
	`+pr("m038")+`
`},r.prototype.trace=function(e){e===void 0&&(e=!1),(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=!1;typeof t[t.length-1]=="boolean"&&(i=t.pop());var o=EB(t);if(!o)return mi("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");o.isTracing===Pa.NONE&&""+o.name,o.isTracing=i?Pa.BREAK:Pa.LOG})(this,e)},r})();function sJ(r){Ht(this&&this.$mobx&&fd(this.$mobx),"Invalid `this`"),Ht(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=r}var BN=100,fC=function(r){return r()};function OB(){Ot.inBatch>0||Ot.isRunningReactions||fC(uJ)}function uJ(){Ot.isRunningReactions=!0;for(var r=Ot.pendingReactions,e=0;r.length>0;){++e===BN&&(console.error("Reaction doesn't converge to a stable state after "+BN+" iterations. Probably there is a cycle in the reactive function: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction()}Ot.isRunningReactions=!1}var fd=df("Reaction",og);function iP(r){return Ab(function(e,t,n,i,o){Ht(o!==void 0,pr("m009")),Ht(typeof o.get=="function",pr("m010")),YF(sd(e,""),t,o.get,o.set,r,!1)},function(e){var t=this.$mobx.values[e];if(t!==void 0)return t.get()},function(e,t){this.$mobx.values[e].set(t)},!1,!1)}var lJ=iP(nu.default),cJ=iP(nu.structural),M0=function(r,e,t){if(typeof e=="string")return lJ.apply(null,arguments);Ht(typeof r=="function",pr("m011")),Ht(arguments.length<3,pr("m012"));var n=typeof e=="object"?e:{};n.setter=typeof e=="function"?e:n.setter;var i=n.equals?n.equals:n.compareStructural||n.struct?nu.structural:nu.default;return new rf(r,n.context,i,n.name||r.name||"",n.setter)};function Yi(r,e,t){function n(c){return e&&t.push([r,c]),c}if(e===void 0&&(e=!0),t===void 0&&(t=[]),wd(r)){if(e&&t===null&&(t=[]),e&&r!==null&&typeof r=="object"){for(var i=0,o=t.length;i<o;i++)if(t[i][0]===r)return t[i][1]}if(ru(r)){var a=n([]),s=r.map(function(c){return Yi(c,e,t)});for(a.length=s.length,i=0,o=s.length;i<o;i++)a[i]=s[i];return a}if(gs(r)){for(var u in a=n({}),r)a[u]=Yi(r[u],e,t);return a}if(ua(r)){var l=n({});return r.forEach(function(c,f){return l[f]=Yi(c,e,t)}),l}if(Z2(r))return Yi(r.get(),e,t)}return r}M0.struct=cJ,M0.equals=iP;var oP={allowStateChanges:function(r,e){var t,n=zF(r);try{t=e()}finally{GF(n)}return t},deepEqual:Rb,getAtom:ys,getDebugName:uC,getDependencyTree:lB,getAdministration:Ks,getGlobalState:function(){return Ot},getObserverTree:function(r,e){return fB(ys(r,e))},interceptReads:function(r,e,t){var n;if(ua(r)||ru(r)||Z2(r))n=Ks(r);else{if(!gs(r))return mi("Expected observable map, object or array as first array");if(typeof e!="string")return mi("InterceptReads can only be used with a specific property, not with an object in general");n=Ks(r,e)}return n.dehancer!==void 0?mi("An intercept reader was already established"):(n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0})},isComputingDerivation:mB,isSpyEnabled:Xi,onReactionError:function(r){return Ot.globalReactionErrorHandlers.push(r),function(){var e=Ot.globalReactionErrorHandlers.indexOf(r);e>=0&&Ot.globalReactionErrorHandlers.splice(e,1)}},reserveArrayBuffer:K2,resetGlobalState:function(){Ot.resetId++;var r=new aB;for(var e in r)oJ.indexOf(e)===-1&&(Ot[e]=r[e]);Ot.allowStateChanges=!Ot.strictMode},isolateGlobalState:function(){uB=!0,ng().__mobxInstanceCount--},shareGlobalState:function(){Nc("Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details."),sB=!0;var r=ng(),e=Ot;if(r.__mobservableTrackingStack||r.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(r.__mobxGlobal&&r.__mobxGlobal.version!==e.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");r.__mobxGlobal?Ot=r.__mobxGlobal:r.__mobxGlobal=e},spyReport:tf,spyReportEnd:ka,spyReportStart:Ia,setReactionScheduler:function(r){var e=fC;fC=function(t){return r(function(){return e(t)})}}},hC={Reaction:og,untracked:_B,Atom:zQ,BaseAtom:xg,useStrict:qF,isStrictModeEnabled:function(){return Ot.strictMode},spy:jF,comparer:nu,asReference:function(r){return Nc("asReference is deprecated, use observable.ref instead"),un.ref(r)},asFlat:function(r){return Nc("asFlat is deprecated, use observable.shallow instead"),un.shallow(r)},asStructure:function(r){return Nc("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),un.struct(r)},asMap:function(r){return Nc("asMap is deprecated, use observable.map or observable.shallowMap instead"),un.map(r||{})},isModifierDescriptor:hf,isObservableObject:gs,isBoxedObservable:Z2,isObservableArray:ru,ObservableMap:ud,isObservableMap:ua,map:function(r){return Nc("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),un.map(r)},transaction:Fh,observable:un,computed:M0,isObservable:wd,isComputed:function(r,e){if(r==null)return!1;if(e!==void 0){if(gs(r)===!1||!r.$mobx.values[e])return!1;var t=ys(r,e);return Qs(t)}return Qs(r)},extendObservable:KF,extendShallowObservable:ZF,observe:function(r,e,t,n){return typeof t=="function"?(function(i,o,a,s){return Ks(i,o).observe(a,s)})(r,e,t,n):(function(i,o,a){return Ks(i).observe(o,a)})(r,e,t)},intercept:function(r,e,t){return typeof t=="function"?(function(n,i,o){return Ks(n,i).intercept(o)})(r,e,t):(function(n,i){return Ks(n).intercept(i)})(r,e)},autorun:I0,autorunAsync:function(r,e,t,n){var i,o,a,s;typeof r=="string"?(i=r,o=e,a=t,s=n):(i=r.name||"AutorunAsync@"+yi(),o=r,a=e,s=t),Ht(R0(o)===!1,pr("m006")),a===void 0&&(a=1),s&&(o=o.bind(s));var u=!1,l=new og(i,function(){u||(u=!0,setTimeout(function(){u=!1,l.isDisposed||l.track(c)},a))});function c(){o(l)}return l.schedule(),l.getDisposer()},when:function(r,e,t,n){var i,o,a,s;return typeof r=="string"?(i=r,o=e,a=t,s=n):(i="When@"+yi(),o=r,a=e,s=t),I0(i,function(u){if(o.call(s)){u.dispose();var l=vf();a.call(s),Js(l)}})},reaction:WF,action:zr,isAction:R0,runInAction:function(r,e,t){var n=typeof r=="string"?r:r.name||"<unnamed action>",i=typeof r=="function"?r:e,o=typeof r=="function"?e:t;return Ht(typeof i=="function",pr("m002")),Ht(i.length===0,pr("m003")),Ht(typeof n=="string"&&n.length>0,"actions should have valid names, got: '"+n+"'"),Q2(n,i,o,void 0)},expr:function(r,e){return mB()||console.warn(pr("m013")),M0(r,{context:e}).get()},toJS:Yi,createTransformer:function(r,e){Ht(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=Ot.resetId,i=(function(o){function a(s,u){var l=o.call(this,function(){return r(u)},void 0,nu.default,"Transformer-"+r.name+"-"+s,void 0)||this;return l.sourceIdentifier=s,l.sourceObject=u,l}return Tb(a,o),a.prototype.onBecomeUnobserved=function(){var s=this.value;o.prototype.onBecomeUnobserved.call(this),delete t[this.sourceIdentifier],e&&e(s,this.sourceObject)},a})(rf);return function(o){n!==Ot.resetId&&(t={},n=Ot.resetId);var a=(function(u){if(typeof u=="string"||typeof u=="number")return u;if(u===null||typeof u!="object")throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+u);var l=u.$transformId;return l===void 0&&Ol(u,"$transformId",l=yi()),l})(o),s=t[a];return s?s.get():(s=t[a]=new i(a,o)).get()}},whyRun:function(r,e){return Nc("`whyRun` is deprecated in favor of `trace`"),(r=EB(arguments))?Qs(r)||fd(r)?r.whyRun():mi(pr("m025")):pr("m024")},isArrayLike:function(r){return Array.isArray(r)||ru(r)},extras:oP},UN=!1,fJ=function(r){var e=hC[r];Object.defineProperty(hC,r,{get:function(){return UN||(UN=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and wont work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),e}})};for(var hJ in hC)fJ(hJ);function dp(r){return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(r)}function dJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,xB(n.key),n)}}function xB(r){var e=(function(t){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(dp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return dp(e)=="symbol"?e:e+""}typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:jF,extras:oP});var vJ=["onLayoutDone","onLayoutStep","onError","onInitialization","onLayoutComputing","onWebGLContextLost","onZoomTransitionDone","restart"],pJ=(function(){return r=function t(){var n,i,o,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,o=void 0,(i=xB(i="callbacks"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.callbacks=a},e=[{key:"onInitialization",value:function(){this.isValidFunction(this.callbacks.onInitialization)&&this.callbacks.onInitialization()}},{key:"onZoomTransitionDone",value:function(){this.isValidFunction(this.callbacks.onZoomTransitionDone)&&this.callbacks.onZoomTransitionDone()}},{key:"onLayoutDone",value:function(){this.isValidFunction(this.callbacks.onLayoutDone)&&this.callbacks.onLayoutDone()}},{key:"onLayoutStep",value:function(t){this.isValidFunction(this.callbacks.onLayoutStep)&&this.callbacks.onLayoutStep(t)}},{key:"onLayoutComputing",value:function(t){this.isValidFunction(this.callbacks.onLayoutComputing)&&this.callbacks.onLayoutComputing(t)}},{key:"onError",value:function(t){this.isValidFunction(this.callbacks.onError)&&this.callbacks.onError(t)}},{key:"onWebGLContextLost",value:function(t){this.isValidFunction(this.callbacks.onWebGLContextLost)&&this.callbacks.onWebGLContextLost(t)}},{key:"isValidFunction",value:function(t){return t!==void 0&&typeof t=="function"}}],e&&dJ(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),gJ=pn(1803),qN=pn.n(gJ),yJ={value:()=>{}};function SB(){for(var r,e=0,t=arguments.length,n={};e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new a0(n)}function a0(r){this._=r}function mJ(r,e){for(var t,n=0,i=r.length;n<i;++n)if((t=r[n]).name===e)return t.value}function zN(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=yJ,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}a0.prototype=SB.prototype={constructor:a0,on:function(r,e){var t,n,i=this._,o=(n=i,(r+"").trim().split(/^|\s+/).map(function(u){var l="",c=u.indexOf(".");if(c>=0&&(l=u.slice(c+1),u=u.slice(0,c)),u&&!n.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:l}})),a=-1,s=o.length;if(!(arguments.length<2)){if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(t=(r=o[a]).type)i[t]=zN(i[t],r.name,e);else if(e==null)for(t in i)i[t]=zN(i[t],r.name,null);return this}for(;++a<s;)if((t=(r=o[a]).type)&&(t=mJ(i[t],r.name)))return t},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new a0(r)},call:function(r,e){if((t=arguments.length-2)>0)for(var t,n,i=new Array(t),o=0;o<t;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=0,t=(n=this._[r]).length;o<t;++o)n[o].value.apply(e,i)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,o=n.length;i<o;++i)n[i].value.apply(e,t)}};const bJ=SB;var s0,Qv,Gh=0,Jv=0,Lv=0,L0=0,Wc=0,kb=0,ag=typeof performance=="object"&&performance.now?performance:Date,TB=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function CB(){return Wc||(TB(_J),Wc=ag.now()+kb)}function _J(){Wc=0}function dC(){this._call=this._time=this._next=null}function PB(r,e,t){var n=new dC;return n.restart(r,e,t),n}function GN(){Wc=(L0=ag.now())+kb,Gh=Jv=0;try{(function(){CB(),++Gh;for(var r,e=s0;e;)(r=Wc-e._time)>=0&&e._call.call(void 0,r),e=e._next;--Gh})()}finally{Gh=0,(function(){for(var r,e,t=s0,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:s0=e);Qv=r,vC(n)})(),Wc=0}}function wJ(){var r=ag.now(),e=r-L0;e>1e3&&(kb-=e,L0=r)}function vC(r){Gh||(Jv&&(Jv=clearTimeout(Jv)),r-Wc>24?(r<1/0&&(Jv=setTimeout(GN,r-ag.now()-kb)),Lv&&(Lv=clearInterval(Lv))):(Lv||(L0=ag.now(),Lv=setInterval(wJ,1e3)),Gh=1,TB(GN)))}dC.prototype=PB.prototype={constructor:dC,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?CB():+t)+(e==null?0:+e),this._next||Qv===this||(Qv?Qv._next=this:s0=this,Qv=this),this._call=r,this._time=t,vC()},stop:function(){this._call&&(this._call=null,this._time=1/0,vC())}};const VN=4294967296;function EJ(r){return r.x}function OJ(r){return r.y}var xJ=Math.PI*(3-Math.sqrt(5));function WN(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,o,a,s,u,l,c,f,h,d=r._root,v={data:n},p=r._x0,m=r._y0,y=r._x1,b=r._y1;if(!d)return r._root=v,r;for(;d.length;)if((l=e>=(o=(p+y)/2))?p=o:y=o,(c=t>=(a=(m+b)/2))?m=a:b=a,i=d,!(d=d[f=c<<1|l]))return i[f]=v,r;if(s=+r._x.call(null,d.data),u=+r._y.call(null,d.data),e===s&&t===u)return v.next=d,i?i[f]=v:r._root=v,r;do i=i?i[f]=new Array(4):r._root=new Array(4),(l=e>=(o=(p+y)/2))?p=o:y=o,(c=t>=(a=(m+b)/2))?m=a:b=a;while((f=c<<1|l)==(h=(u>=a)<<1|s>=o));return i[h]=d,i[f]=v,r}function Bi(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function SJ(r){return r[0]}function TJ(r){return r[1]}function aP(r,e,t){var n=new sP(e??SJ,t??TJ,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function sP(r,e,t,n,i,o){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function HN(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Ui=aP.prototype=sP.prototype;function Vi(r){return function(){return r}}function ol(r){return 1e-6*(r()-.5)}function KS(){var r,e,t,n,i,o=Vi(-30),a=1,s=1/0,u=.81;function l(d){var v,p=r.length,m=aP(r,EJ,OJ).visitAfter(f);for(n=d,v=0;v<p;++v)e=r[v],m.visit(h)}function c(){if(r){var d,v,p=r.length;for(i=new Array(p),d=0;d<p;++d)v=r[d],i[v.index]=+o(v,d,r)}}function f(d){var v,p,m,y,b,g=0,_=0;if(d.length){for(m=y=b=0;b<4;++b)(v=d[b])&&(p=Math.abs(v.value))&&(g+=v.value,_+=p,m+=p*v.x,y+=p*v.y);d.x=m/_,d.y=y/_}else{(v=d).x=v.data.x,v.y=v.data.y;do g+=i[v.data.index];while(v=v.next)}d.value=g}function h(d,v,p,m){if(!d.value)return!0;var y=d.x-e.x,b=d.y-e.y,g=m-v,_=y*y+b*b;if(g*g/u<_)return _<s&&(y===0&&(_+=(y=ol(t))*y),b===0&&(_+=(b=ol(t))*b),_<a&&(_=Math.sqrt(a*_)),e.vx+=y*d.value*n/_,e.vy+=b*d.value*n/_),!0;if(!(d.length||_>=s)){(d.data!==e||d.next)&&(y===0&&(_+=(y=ol(t))*y),b===0&&(_+=(b=ol(t))*b),_<a&&(_=Math.sqrt(a*_)));do d.data!==e&&(g=i[d.data.index]*n/_,e.vx+=y*g,e.vy+=b*g);while(d=d.next)}}return l.initialize=function(d,v){r=d,t=v,c()},l.strength=function(d){return arguments.length?(o=typeof d=="function"?d:Vi(+d),c(),l):o},l.distanceMin=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.distanceMax=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.theta=function(d){return arguments.length?(u=d*d,l):Math.sqrt(u)},l}function CJ(r){return r.x+r.vx}function PJ(r){return r.y+r.vy}function AJ(r){return r.index}function YN(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}Ui.copy=function(){var r,e,t=new sP(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return t;if(!n.length)return t._root=HN(n),t;for(r=[{source:n,target:t._root=new Array(4)}];n=r.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?r.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=HN(e));return t},Ui.add=function(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return WN(this.cover(e,t),e,t,r)},Ui.addAll=function(r){var e,t,n,i,o=r.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(t=0;t<o;++t)isNaN(n=+this._x.call(null,e=r[t]))||isNaN(i=+this._y.call(null,e))||(a[t]=n,s[t]=i,n<u&&(u=n),n>c&&(c=n),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),t=0;t<o;++t)WN(this,a[t],s[t],r[t]);return this},Ui.cover=function(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,o=(n=Math.floor(e))+1;else{for(var a,s,u=i-t||1,l=this._root;t>r||r>=i||n>e||e>=o;)switch(s=(e<n)<<1|r<t,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=t+u,o=n+u;break;case 1:t=i-u,o=n+u;break;case 2:i=t+u,n=o-u;break;case 3:t=i-u,n=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=n,this._x1=i,this._y1=o,this},Ui.data=function(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r},Ui.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ui.find=function(r,e,t){var n,i,o,a,s,u,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,v=[],p=this._root;for(p&&v.push(new Bi(p,c,f,h,d)),t==null?t=1/0:(c=r-t,f=e-t,h=r+t,d=e+t,t*=t);u=v.pop();)if(!(!(p=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<c||(s=u.y1)<f))if(p.length){var m=(i+a)/2,y=(o+s)/2;v.push(new Bi(p[3],m,y,a,s),new Bi(p[2],i,y,m,s),new Bi(p[1],m,o,a,y),new Bi(p[0],i,o,m,y)),(l=(e>=y)<<1|r>=m)&&(u=v[v.length-1],v[v.length-1]=v[v.length-1-l],v[v.length-1-l]=u)}else{var b=r-+this._x.call(null,p.data),g=e-+this._y.call(null,p.data),_=b*b+g*g;if(_<t){var w=Math.sqrt(t=_);c=r-w,f=e-w,h=r+w,d=e+w,n=p.data}}return n},Ui.remove=function(r){if(isNaN(o=+this._x.call(null,r))||isNaN(a=+this._y.call(null,r)))return this;var e,t,n,i,o,a,s,u,l,c,f,h,d=this._root,v=this._x0,p=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(s=(v+m)/2))?v=s:m=s,(c=a>=(u=(p+y)/2))?p=u:y=u,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(t=e,h=f)}for(;d.data!==r;)if(n=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,n?(i?n.next=i:delete n.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(t?t[h]=d:this._root=d),this):(this._root=i,this)},Ui.removeAll=function(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this},Ui.root=function(){return this._root},Ui.size=function(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r},Ui.visit=function(r){var e,t,n,i,o,a,s=[],u=this._root;for(u&&s.push(new Bi(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!r(u=e.node,n=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(n+o)/2,c=(i+a)/2;(t=u[3])&&s.push(new Bi(t,l,c,o,a)),(t=u[2])&&s.push(new Bi(t,n,c,l,a)),(t=u[1])&&s.push(new Bi(t,l,i,o,c)),(t=u[0])&&s.push(new Bi(t,n,i,l,c))}return this},Ui.visitAfter=function(r){var e,t=[],n=[];for(this._root&&t.push(new Bi(this._root,this._x0,this._y0,this._x1,this._y1));e=t.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&t.push(new Bi(o,a,s,c,f)),(o=i[1])&&t.push(new Bi(o,c,s,u,f)),(o=i[2])&&t.push(new Bi(o,a,f,c,l)),(o=i[3])&&t.push(new Bi(o,c,f,u,l))}n.push(e)}for(;e=n.pop();)r(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ui.x=function(r){return arguments.length?(this._x=r,this):this._x},Ui.y=function(r){return arguments.length?(this._y=r,this):this._y};var Nt=256,ZS=4096,kn=25,AB="#FFDF81",RB="#818790",IB="#EDEDED",kB="#CFD1D4",DB="#F5F6F6",MB="#8FE3E8",uP="#1A1B1D",LB={position:"absolute",top:0,bottom:0,left:0,right:0},RJ=1/.38,Vr=function(){return window.devicePixelRatio||1},IJ=["NVL_basic-wrapper","NVL_interactive-wrapper"];function Nv(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return XN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?XN(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function XN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var NB=function(r,e){var t=[r,e].sort();return"".concat(t[0],".").concat(t[1])},_m=function(r){var e=new Set;return r.forEach(function(t){var n=t.from,i=t.to,o=NB(n,i);e.has(o)||e.add(o)}),e},pC=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:IB,t=new Map;return r.forEach(function(n){var i=n.id,o=n.from,a=n.to,s=n.color,u=n.width,l=n.disabled,c=NB(o,a),f=t.get(c);f?f.bundledRels.push({id:i,color:s??void 0,disabled:l!=null&&l,width:u??1}):t.set(c,{bundledRels:[{id:i,color:s??void 0,disabled:l!=null&&l,width:u??1}],key:c,from:o,to:a,color:s??void 0,disabled:l!=null&&l,width:0})}),t.forEach(function(n){var i=(0,jr.uniqBy)(n.bundledRels,"disabled"),o=i.length===1&&i[0].disabled===!0,a=i.length===1&&i[0].disabled!==!0;if(o)n.color=e,n.width=1;else{var s=n.bundledRels.filter(function(l){return l.disabled!==!0}),u=(0,jr.uniqBy)(s,"color");a?(n.color=u.length>1?void 0:n.bundledRels[0].color,n.bundledRels.forEach(function(l){n.width+=l.width})):(n.color=u.length===1?u[0].color:void 0,n.disabled=!1,n.bundledRels.forEach(function(l){n.width+=l.disabled!==!0?l.width:0}))}n.width=Math.min(n.width,20)}),Array.from(t.values())},sg=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(function(r){return"size"in r})!==void 0};function gC(r){return gC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gC(r)}var kJ=function(r){var e,t;return typeof r.source=="number"||typeof r.target=="number"||typeof r.source=="string"||typeof r.target=="string"?45*devicePixelRatio:((e=r.source.size)!==null&&e!==void 0?e:kn)+((t=r.target.size)!==null&&t!==void 0?t:kn)+90*devicePixelRatio};function $N(r){return gC(r)==="object"}var DJ=function(r){var e;return((e=r.size)!==null&&e!==void 0?e:kn)+25*devicePixelRatio},yC=function(){return-400*Math.pow(devicePixelRatio,2)},MJ=function(){return 2*yC()};function Hc(r){return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(r)}function KN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ZN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function LJ(r,e,t){return(e=jB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function NJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,jB(n.key),n)}}function jB(r){var e=(function(t){if(Hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Hc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Hc(e)=="symbol"?e:e+""}var ss="d3ForceLayout",QS=function(r){return r&&Yi(r)},jJ=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t);var o=n.state;this.state=o,this.d3Nodes={},this.d3RelList={},this.computing=!0,this.center={x:0,y:0},this.nodeRelCount=[];var a=this.state,s=a.nodes,u=a.rels;s.addChannel(ss),u.addChannel(ss),this.simulation=(function(l){var c,f=1,h=.001,d=1-Math.pow(h,1/300),v=0,p=.6,m=new Map,y=PB(_),b=bJ("tick","end"),g=(function(){let O=1;return()=>(O=(1664525*O+1013904223)%VN)/VN})();function _(){w(),b.call("tick",c),f<h&&(y.stop(),b.call("end",c))}function w(O){var C,A,R=l.length;O===void 0&&(O=1);for(var k=0;k<O;++k)for(f+=(v-f)*d,m.forEach(function(D){D(f)}),C=0;C<R;++C)(A=l[C]).fx==null?A.x+=A.vx*=p:(A.x=A.fx,A.vx=0),A.fy==null?A.y+=A.vy*=p:(A.y=A.fy,A.vy=0);return c}function x(){for(var O,C=0,A=l.length;C<A;++C){if((O=l[C]).index=C,O.fx!=null&&(O.x=O.fx),O.fy!=null&&(O.y=O.fy),isNaN(O.x)||isNaN(O.y)){var R=10*Math.sqrt(.5+C),k=C*xJ;O.x=R*Math.cos(k),O.y=R*Math.sin(k)}(isNaN(O.vx)||isNaN(O.vy))&&(O.vx=O.vy=0)}}function E(O){return O.initialize&&O.initialize(l,g),O}return l==null&&(l=[]),x(),c={tick:w,restart:function(){return y.restart(_),c},stop:function(){return y.stop(),c},nodes:function(O){return arguments.length?(l=O,x(),m.forEach(E),c):l},alpha:function(O){return arguments.length?(f=+O,c):f},alphaMin:function(O){return arguments.length?(h=+O,c):h},alphaDecay:function(O){return arguments.length?(d=+O,c):+d},alphaTarget:function(O){return arguments.length?(v=+O,c):v},velocityDecay:function(O){return arguments.length?(p=1-O,c):1-p},randomSource:function(O){return arguments.length?(g=O,m.forEach(E),c):g},force:function(O,C){return arguments.length>1?(C==null?m.delete(O):m.set(O,E(C)),c):m.get(O)},find:function(O,C,A){var R,k,D,L,j,q=0,B=l.length;for(A==null?A=1/0:A*=A,q=0;q<B;++q)(D=(R=O-(L=l[q]).x)*R+(k=C-L.y)*k)<A&&(j=L,A=D);return j},on:function(O,C){return arguments.length>1?(b.on(O,C),c):b.on(O)}}})().velocityDecay(.4).force("charge",KS().strength(yC)).force("centerX",(function(l){var c,f,h,d=Vi(.1);function v(m){for(var y,b=0,g=c.length;b<g;++b)(y=c[b]).vx+=(h[b]-y.x)*f[b]*m}function p(){if(c){var m,y=c.length;for(f=new Array(y),h=new Array(y),m=0;m<y;++m)f[m]=isNaN(h[m]=+l(c[m],m,c))?0:+d(c[m],m,c)}}return typeof l!="function"&&(l=Vi(l==null?0:+l)),v.initialize=function(m){c=m,p()},v.strength=function(m){return arguments.length?(d=typeof m=="function"?m:Vi(+m),p(),v):d},v.x=function(m){return arguments.length?(l=typeof m=="function"?m:Vi(+m),p(),v):l},v})(0).strength(.03)).force("centerY",(function(l){var c,f,h,d=Vi(.1);function v(m){for(var y,b=0,g=c.length;b<g;++b)(y=c[b]).vy+=(h[b]-y.y)*f[b]*m}function p(){if(c){var m,y=c.length;for(f=new Array(y),h=new Array(y),m=0;m<y;++m)f[m]=isNaN(h[m]=+l(c[m],m,c))?0:+d(c[m],m,c)}}return typeof l!="function"&&(l=Vi(l==null?0:+l)),v.initialize=function(m){c=m,p()},v.strength=function(m){return arguments.length?(d=typeof m=="function"?m:Vi(+m),p(),v):d},v.y=function(m){return arguments.length?(l=typeof m=="function"?m:Vi(+m),p(),v):l},v})(0).strength(.03)).alpha(1).alphaMin(.05).on("end",function(){i.simulationStopped=!0,i.shouldUpdate=!1,i.shouldReheatNodes=!1,i.shouldCountNodeRels=!1}).stop(),this.simulationStopped=!0,this.shouldUpdate=!0,this.shouldReheatNodes=!1,this.shouldCountNodeRels=!0,this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){var l=s.channels[ss];if(s.version!==void 0&&l){var c=Object.values(l.adds).length>0,f=Object.values(l.removes).length>0,h=Object.values(l.updates),d=sg(h);c||f||d?(i.shouldUpdate=!0,i.shouldReheatNodes=!0,i.shouldCountNodeRels=!0):i.shouldReheatNodes=!1}var v=u.channels[ss];if(u.version!==void 0&&v){var p=Object.values(v.adds).length>0,m=Object.values(v.removes).length>0;(p||m)&&(i.shouldUpdate=!0,i.shouldReheatNodes=!0,i.shouldCountNodeRels=!0)}}))},e=[{key:"setOptions",value:function(t){}},{key:"updateNodes",value:function(t){var n=this;t.forEach(function(i){n.d3Nodes[i.id]===void 0&&(n.d3Nodes[i.id]={id:i.id}),i!=null&&i.pinned?(n.d3Nodes[i.id].fx=i.x,n.d3Nodes[i.id].fy=i.y):(n.d3Nodes[i.id].x=i.x,n.d3Nodes[i.id].y=i.y),n.d3Nodes[i.id].vy=0,n.d3Nodes[i.id].vx=0}),this.shouldUpdate=!0,this.simulation.tick().alpha(.2)}},{key:"update",value:function(){var t,n=this,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||i){var o=this.state,a=o.nodes,s=o.rels,u=a.channels[ss],l=s.channels[ss],c=Object.values(u.adds).length>0,f=Object.values(l.adds).length>0,h=Object.values(u.removes).length>0,d=Object.values(l.removes).length>0,v=Object.values(u.updates).length>0;if(c||f||h||d||v){var p=c&&Object.keys(this.d3Nodes).length===0,m=QS(u.removes);Object.keys(m).forEach(function(g){delete n.d3Nodes[g]});var y=QS(u.adds);if(Object.keys(y).forEach(function(g){n.d3Nodes[g]=(function(_){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?ZN(Object(x),!0).forEach(function(E){LJ(_,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(x)):ZN(Object(x)).forEach(function(E){Object.defineProperty(_,E,Object.getOwnPropertyDescriptor(x,E))})}return _})({},y[g])}),v&&Object.values(u.updates).forEach(function(g){g.pinned===!0?(n.d3Nodes[g.id].fx=n.d3Nodes[g.id].x,n.d3Nodes[g.id].fy=n.d3Nodes[g.id].y):g.pinned===!1&&(n.d3Nodes[g.id].fx=null,n.d3Nodes[g.id].fy=null),g.size!==void 0&&(n.d3Nodes[g.id].size=g.size)}),(f||d)&&(this.d3RelList=pC(QS(s.items)).filter(function(g){return g.from!==g.to}).map(function(g,_){return{source:g.from,target:g.to,index:_}})),p){var b=Object.values(this.d3Nodes);(function(g,_,w){var x=g.filter(function(E){return E.x===void 0&&E.y===void 0});x.forEach(function(E,O){E.x=_.x+w*Math.sin(2*Math.PI*O/x.length),E.y=_.y+w*Math.cos(2*Math.PI*O/x.length)})})(b,this.center,(t=b.length,45*t/(2*Math.PI)))}this.layout(a.items,s.items,p)}a.clearChannel(ss),s.clearChannel(ss),this.shouldUpdate=!1,this.simulation.alpha()>this.simulation.alphaMin()&&(this.shouldUpdate=!0,this.simulationStopped&&(this.simulation.restart(),this.simulationStopped=!1))}}},{key:"layout",value:function(t,n,i){var o=this;if(!(0,jr.isEmpty)(this.d3Nodes)){if(this.simulation.stop(),this.simulation.nodes(Object.values(this.d3Nodes)).force("collide",(function(l){var c,f,h,d=1,v=1;function p(){for(var b,g,_,w,x,E,O,C=c.length,A=0;A<v;++A)for(g=aP(c,CJ,PJ).visitAfter(m),b=0;b<C;++b)_=c[b],E=f[_.index],O=E*E,w=_.x+_.vx,x=_.y+_.vy,g.visit(R);function R(k,D,L,j,q){var B=k.data,U=k.r,W=E+U;if(!B)return D>w+W||j<w-W||L>x+W||q<x-W;if(B.index>_.index){var H=w-B.x-B.vx,Y=x-B.y-B.vy,Z=H*H+Y*Y;Z<W*W&&(H===0&&(Z+=(H=ol(h))*H),Y===0&&(Z+=(Y=ol(h))*Y),Z=(W-(Z=Math.sqrt(Z)))/Z*d,_.vx+=(H*=Z)*(W=(U*=U)/(O+U)),_.vy+=(Y*=Z)*W,B.vx-=H*(W=1-W),B.vy-=Y*W)}}}function m(b){if(b.data)return b.r=f[b.data.index];for(var g=b.r=0;g<4;++g)b[g]&&b[g].r>b.r&&(b.r=b[g].r)}function y(){if(c){var b,g,_=c.length;for(f=new Array(_),b=0;b<_;++b)g=c[b],f[g.index]=+l(g,b,c)}}return typeof l!="function"&&(l=Vi(l==null?1:+l)),p.initialize=function(b,g){c=b,h=g,y()},p.iterations=function(b){return arguments.length?(v=+b,p):v},p.strength=function(b){return arguments.length?(d=+b,p):d},p.radius=function(b){return arguments.length?(l=typeof b=="function"?b:Vi(+b),y(),p):l},p})().radius(DJ)),this.shouldCountNodeRels&&(this.nodeRelCount=this.countNodeRels()),this.simulation.force("link",(function(l){var c,f,h,d,v,p,m=AJ,y=function(O){return 1/Math.min(d[O.source.index],d[O.target.index])},b=Vi(30),g=1;function _(O){for(var C=0,A=l.length;C<g;++C)for(var R,k,D,L,j,q,B,U=0;U<A;++U)k=(R=l[U]).source,L=(D=R.target).x+D.vx-k.x-k.vx||ol(p),j=D.y+D.vy-k.y-k.vy||ol(p),L*=q=((q=Math.sqrt(L*L+j*j))-f[U])/q*O*c[U],j*=q,D.vx-=L*(B=v[U]),D.vy-=j*B,k.vx+=L*(B=1-B),k.vy+=j*B}function w(){if(h){var O,C,A=h.length,R=l.length,k=new Map(h.map((D,L)=>[m(D,L,h),D]));for(O=0,d=new Array(A);O<R;++O)(C=l[O]).index=O,typeof C.source!="object"&&(C.source=YN(k,C.source)),typeof C.target!="object"&&(C.target=YN(k,C.target)),d[C.source.index]=(d[C.source.index]||0)+1,d[C.target.index]=(d[C.target.index]||0)+1;for(O=0,v=new Array(R);O<R;++O)C=l[O],v[O]=d[C.source.index]/(d[C.source.index]+d[C.target.index]);c=new Array(R),x(),f=new Array(R),E()}}function x(){if(h)for(var O=0,C=l.length;O<C;++O)c[O]=+y(l[O],O,l)}function E(){if(h)for(var O=0,C=l.length;O<C;++O)f[O]=+b(l[O],O,l)}return l==null&&(l=[]),_.initialize=function(O,C){h=O,p=C,w()},_.links=function(O){return arguments.length?(l=O,w(),_):l},_.id=function(O){return arguments.length?(m=O,_):m},_.iterations=function(O){return arguments.length?(g=+O,_):g},_.strength=function(O){return arguments.length?(y=typeof O=="function"?O:Vi(+O),x(),_):y},_.distance=function(O){return arguments.length?(b=typeof O=="function"?O:Vi(+O),E(),_):b},_})(this.d3RelList).id(function(l){return l.id}).distance(kJ).strength(function(l){return(function(c,f){if(!$N(c.source)||!$N(c.target))return 1;var h=1.2/(Math.min(f[c.source.index],f[c.target.index])+(Math.max(f[c.source.index],f[c.target.index])-1)/100);return Math.max(Math.min(h,1),.06)})(l,o.nodeRelCount)})),i){var a=0;this.simulation.force("charge",KS().strength(MJ));for(var s=performance.now();performance.now()-s<300&&a<200;)this.simulation.alpha(1),this.simulation.tick(1),a+=1;this.simulation.force("charge",KS().strength(yC));for(var u=performance.now();performance.now()-u<100&&this.simulation.alpha()>=this.simulation.alphaMin();)this.simulation.tick(1);return this.computing=!1,void this.simulation.restart()}this.shouldReheatNodes?this.simulation.alpha(1).restart():this.simulation.restart()}}},{key:"getNodePositions",value:function(t){var n,i=[],o=(function(l,c){var f=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!f){if(Array.isArray(l)||(f=(function(y,b){if(y){if(typeof y=="string")return KN(y,b);var g={}.toString.call(y).slice(8,-1);return g==="Object"&&y.constructor&&(g=y.constructor.name),g==="Map"||g==="Set"?Array.from(y):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?KN(y,b):void 0}})(l))||c){f&&(l=f);var h=0,d=function(){};return{s:d,n:function(){return h>=l.length?{done:!0}:{done:!1,value:l[h++]}},e:function(y){throw y},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,p=!0,m=!1;return{s:function(){f=f.call(l)},n:function(){var y=f.next();return p=y.done,y},e:function(y){m=!0,v=y},f:function(){try{p||f.return==null||f.return()}finally{if(m)throw v}}}})(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=this.d3Nodes[a.id];if(s!==void 0){var u={id:s.id,x:s.x,y:s.y};i.push(u)}}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return this.computing}},{key:"terminateUpdate",value:function(){this.simulation.alpha(this.simulation.alphaMin()).stop(),this.simulationStopped=!0}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){t()}),this.state.nodes.removeChannel(ss),this.state.rels.removeChannel(ss),this.simulation.stop()}},{key:"setAlpha",value:function(t){this.simulation.alpha(t),this.simulation.restart(),this.simulation.shouldUpdate=!0}},{key:"countNodeRels",value:function(){for(var t=new Map(Object.entries(this.d3Nodes)),n=Object.values(this.d3RelList),i=new Array(t.length),o=0;o<n.length;++o){var a=n[o];a.index=o,Hc(a.source)!=="object"&&(a.source=t.get(a.source)),Hc(a.target)!=="object"&&(a.target=t.get(a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1}return i}}],e&&NJ(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),FJ=pn(5880),FB=pn.n(FJ),Pr=FB().getLogger("NVL");const JS=EK;var BJ={CoseBilkentLayout:{standard:"createCoseBilkentLayoutWorker",fallback:"coseBilkentLayoutFallbackWorker"},HierarchicalLayout:{standard:"createHierarchicalLayoutWorker",fallback:"hierarchicalLayoutFallbackWorker"}},BB=function(r){var e,t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=BJ[r],i=n.standard,o=n.fallback;if(t)e=JS[o];else try{e=JS[i]()}catch(a){console.warn("Failed to initialise ".concat(r,' worker: "').concat(JSON.stringify(a),'". Falling back to syncronous code.')),e=JS[o]}if(e===void 0)throw"".concat(r," code could not be initialized.");return e.port.start(),e};function vp(r){return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(r)}function QN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QN(Object(t),!0).forEach(function(n){Oa(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function tT(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return JN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?JN(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function JN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function UJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,UB(n.key),n)}}function Oa(r,e,t){return(e=UB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function UB(r){var e=(function(t){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(vp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return vp(e)=="symbol"?e:e+""}var ej=function(r,e,t){return r+(e-r)*(function(n){return n*n*(3-2*n)})(t)},qB=(function(){return r=function t(n){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),Oa(this,"positions",void 0),Oa(this,"oldPositions",void 0),Oa(this,"startTime",void 0),Oa(this,"t",void 0),Oa(this,"currentT",void 0),Oa(this,"state",void 0),Oa(this,"shouldUpdateAnimator",void 0),Oa(this,"parents",void 0),Oa(this,"animationCompleteCallback",void 0),Oa(this,"shouldUpdate",void 0);var i=n.state;this.positions={},this.oldPositions={},this.startTime=0,this.t=1,this.currentT=1,this.state=i,this.shouldUpdateAnimator=!1,this.parents={},this.animationCompleteCallback=n.animationCompleteCallback},e=[{key:"getPositionMapFromState",value:function(){var t,n=this.state.nodes,i=n.idToPosition,o={},a=tT(n.items);try{for(a.s();!(t=a.n()).done;){var s=t.value,u=i[s.id];u!==void 0&&(o[s.id]={id:s.id,x:u.x,y:u.y})}}catch(l){a.e(l)}finally{a.f()}return o}},{key:"updatePositionsFromState",value:function(){this.positions=eT({},this.getPositionMapFromState())}},{key:"updateOldPositionFromState",value:function(){this.oldPositions=eT({},this.getPositionMapFromState())}},{key:"startAnimation",value:function(){this.updateOldPositionFromState(),this.startTime=Date.now(),this.t=0,this.currentT=0,this.shouldUpdateAnimator=!0}},{key:"update",value:function(){var t=this.shouldUpdateAnimator,n=(Date.now()-this.startTime)/400;this.t=Math.min(n,1),this.currentT<1?this.shouldUpdateAnimator=!0:(this.shouldUpdateAnimator=!1,t&&!this.shouldUpdateAnimator&&this.animationCompleteCallback!==void 0&&this.animationCompleteCallback(),this.shouldUpdateAnimator||this.updatePositionsFromState())}},{key:"updateNodes",value:function(t){var n,i=tT(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.x!==void 0&&o.y!==void 0&&(this.positions[o.id]={id:o.id,x:o.x,y:o.y}),this.shouldUpdate=!0}}catch(a){i.e(a)}finally{i.f()}}},{key:"getNodePositions",value:function(t){var n,i=this.parents,o=this.state.nodes.idToPosition,a=(function(g,_){for(var w={x:0,y:0},x=g.length,E=0,O=0;O<x;O++){var C=_[g[O].id];C===void 0||isNaN(C.x)||isNaN(C.y)||C.x===0||C.y===0||(w.x+=C.x,w.y+=C.y,E+=1)}return E>0?[w.x/E,w.y/E]:[0,0]})(t,o),s={x:a[0],y:a[1]},u=[],l=tT(t);try{for(l.s();!(n=l.n()).done;){var c=n.value,f=this.positions[c.id],h=o[c.id],d={id:c.id};if(f!==void 0){for(var v,p,m,y=c.id,b=(v=this.oldPositions[c.id])!==null&&v!==void 0?v:eT({},s);b===void 0&&i[y]!==void 0;)y=i[y],b=this.oldPositions[y];b.x=(p=b.x)!==null&&p!==void 0?p:s.x,b.y=(m=b.y)!==null&&m!==void 0?m:s.y,d.x=ej(b.x,f.x,this.t),d.y=ej(b.y,f.y,this.t)}else h!==void 0&&(d.x=h.x||s.x,d.y=h.y||s.y);u.push(d)}}catch(g){l.e(g)}finally{l.f()}return this.currentT=this.t,u}}],e&&UJ(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Zh(r){return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(r)}function tj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qJ(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tj(Object(t),!0).forEach(function(n){jc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zJ(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}})(r,e)||zB(r,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function rj(r){return(function(e){if(Array.isArray(e))return mC(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||zB(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function zB(r,e){if(r){if(typeof r=="string")return mC(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mC(r,e):void 0}}function mC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function GJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,VB(n.key),n)}}function GB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GB=function(){return!!r})()}function bC(){return bC=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=(function(o,a){for(;!{}.hasOwnProperty.call(o,a)&&(o=Qh(o))!==null;);return o})(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},bC.apply(null,arguments)}function Qh(r){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qh(r)}function _C(r,e){return _C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},_C(r,e)}function jc(r,e,t){return(e=VB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VB(r){var e=(function(t){if(Zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Zh(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Zh(e)=="symbol"?e:e+""}var nj=function(r){return r!==void 0?Yi(r):r},VJ=(function(){function r(n){var i;return(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,r),jc(i=(function(o,a,s){return a=Qh(a),(function(u,l){if(l&&(Zh(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c})(u)})(o,GB()?Reflect.construct(a,s||[],Qh(o).constructor):a.apply(o,s))})(this,r,[n]),"stateDisposers",void 0),jc(i,"cytoCompleteCallback",void 0),jc(i,"computing",void 0),jc(i,"pendingLayoutData",void 0),jc(i,"worker",void 0),jc(i,"workersDisabled",void 0),i.stateDisposers=[],i.stateDisposers.push(i.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)})),i.cytoCompleteCallback=n.cytoCompleteCallback,i.shouldUpdate=!0,i.computing=!1,i.workersDisabled=n.state.disableWebWorkers,i.setOptions(),i.worker=BB("CoseBilkentLayout",i.workersDisabled),i.pendingLayoutData=null,i}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&_C(n,i)})(r,qB),e=r,t=[{key:"setOptions",value:function(){this.shouldUpdate=!0}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(this.shouldUpdate||n){var a=nj(i),s=nj(o);(a.length>0||s.length>0)&&(this.updatePositionsFromState(),this.layout(a,s))}(function(u,l,c){var f=bC(Qh(u.prototype),"update",c);return typeof f=="function"?function(h){return f.apply(c,h)}:f})(r,0,this)([]),this.shouldUpdate=!1}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(n,i){var o=this;if(this.worker){if(n.length){var a=n.map(function(l){return{group:"nodes",data:{id:l.id}}}),s=i.map(function(l){return{group:"edges",data:{id:"rel".concat(l.id),source:l.from,target:l.to}}}),u={elements:[].concat(rj(a),rj(s)),spacingFactor:n.reduce(function(l,c){var f;return l+((f=c.size)!==null&&f!==void 0?f:kn)},0)/n.length*4.5/50*Vr()};this.computing?this.pendingLayoutData=u:(this.computing=!0,this.worker.port.onmessage=function(l){var c=l.data.positions;if(o.computing){for(var f=0,h=Object.entries(c);f<h.length;f++){var d=zJ(h[f],2),v=d[0],p=d[1];o.positions[v]=qJ({id:v},p)}o.cytoCompleteCallback(),o.startAnimation()}o.computing=!1,o.shouldUpdate=!0},setTimeout(function(){o.computing&&o.worker.port.postMessage(u)},0))}}else Pr.info("Cose-Bilkent layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){this.computing=!1}},{key:"destroy",value:function(){var n;this.stateDisposers.forEach(function(i){i()}),(n=this.worker)===null||n===void 0||n.port.close()}}],t&&GJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t})(),ij=typeof Float32Array<"u"?Float32Array:Array;function N0(){var r=new ij(16);return ij!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var wC=function(r,e,t,n,i,o,a){var s=1/(e-t),u=1/(n-i),l=1/(o-a);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*u,r[14]=(a+o)*l,r[15]=1,r},WJ=pn(9792),oj=pn.n(WJ);function pp(r){return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(r)}function HJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,WB(n.key),n)}}function jv(r,e,t){return(e=WB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function WB(r){var e=(function(t){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(pp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return pp(e)=="symbol"?e:e+""}var al=(function(){return r=function t(n,i,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")})(this,t),jv(this,"shaderProgram",void 0),jv(this,"gl",void 0),jv(this,"curTexture",void 0),jv(this,"attributeInfo",void 0),jv(this,"uniformInfo",void 0);var s=n.createShader(n.FRAGMENT_SHADER);if(!n.isShader(s))throw new Error("Could not create shader object");var u=oj()(o,a);n.shaderSource(s,u),n.compileShader(s),(0,jr.isNil)(n.getShaderParameter(s,n.COMPILE_STATUS))&&Pr.info(n.getShaderInfoLog(s));var l=n.createShader(n.VERTEX_SHADER);if(!n.isShader(l))throw new Error("Could not create shader object");var c=oj()(i,a);if(n.shaderSource(l,c),n.compileShader(l),(0,jr.isNil)(n.getShaderParameter(l,n.COMPILE_STATUS))&&Pr.info(n.getShaderInfoLog(l)),this.shaderProgram=n.createProgram(),n.attachShader(this.shaderProgram,s),n.attachShader(this.shaderProgram,l),n.linkProgram(this.shaderProgram),(0,jr.isNil)(n.getProgramParameter(this.shaderProgram,n.LINK_STATUS)))throw new Error("Could not initialise shader");this.gl=n,this.curTexture=0,this.scanUniforms(),this.scanAttributes()},e=[{key:"setUniform",value:function(t,n){var i=this.gl,o=this.uniformInfo[t];if(o===void 0)throw new Error("Shader.setUniform - Uniform ".concat(t," not found in shader"));switch(o.type){case i.INT:i.uniform1i(o.location,n);break;case i.INT_VEC2:i.uniform2iv(o.location,n);break;case i.INT_VEC3:i.uniform3iv(o.location,n);break;case i.INT_VEC4:i.uniform4iv(o.location,n);break;case i.SAMPLER_2D:i.activeTexture(i.TEXTURE0+o.texture),i.bindTexture(i.TEXTURE_2D,n),i.uniform1i(o.location,o.texture);break;case i.SAMPLER_CUBE:case i.FLOAT:i.uniform1f(o.location,n);break;case i.FLOAT_VEC2:i.uniform2fv(o.location,n);break;case i.FLOAT_VEC3:i.uniform3fv(o.location,n);break;case i.FLOAT_VEC4:i.uniform4fv(o.location,n);break;case i.FLOAT_MAT2:i.uniformMatrix2fv(o.location,!1,n);break;case i.FLOAT_MAT3:i.uniformMatrix3fv(o.location,!1,n);break;case i.FLOAT_MAT4:i.uniformMatrix4fv(o.location,!1,n)}}},{key:"setAttributePointer",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t],u=i*Float32Array.BYTES_PER_ELEMENT,l=o*Float32Array.BYTES_PER_ELEMENT;a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.FLOAT,!1,l,u)}},{key:"setAttributePointerFloat",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.FLOAT,!1,o,i)}},{key:"setAttributePointerUShort",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.UNSIGNED_SHORT,!1,o,i)}},{key:"setAttributePointerByteNorm",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.UNSIGNED_BYTE,!0,o,i)}},{key:"setAttributePointerByte",value:function(t,n,i,o){var a=this.gl,s=this.attributeInfo[t];a.enableVertexAttribArray(s.position),a.vertexAttribPointer(s.position,n,a.UNSIGNED_BYTE,!1,o,i)}},{key:"use",value:function(){this.gl.useProgram(this.shaderProgram)}},{key:"remove",value:function(){this.gl.deleteProgram(this.shaderProgram)}},{key:"scanAttributes",value:function(){var t=this.gl;this.attributeInfo={};for(var n,i,o=t.getProgramParameter(this.shaderProgram,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++)n=t.getActiveAttrib(this.shaderProgram,a),i=t.getAttribLocation(this.shaderProgram,n.name),this.attributeInfo[n.name]={type:n.type,position:i}}},{key:"scanUniforms",value:function(){var t=this.gl;this.uniformInfo={};for(var n,i=t.getProgramParameter(this.shaderProgram,t.ACTIVE_UNIFORMS),o=0;o<i;o++){n=t.getActiveUniform(this.shaderProgram,o);var a=t.getUniformLocation(this.shaderProgram,n.name),s={type:n.type,location:a};n.type===t.SAMPLER_2D&&(s.texture=this.curTexture,this.curTexture+=1),this.uniformInfo[n.name]=s}}}],e&&HJ(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Jh(r){return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(r)}function YJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,XJ(n.key),n)}}function XJ(r){var e=(function(t){if(Jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Jh(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Jh(e)=="symbol"?e:e+""}function EC(r){var e=typeof Map=="function"?new Map:void 0;return EC=function(t){if(t===null||!(function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}})(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return(function(i,o,a){if(lP())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,o);var u=new(i.bind.apply(i,s));return a&&ug(u,a.prototype),u})(t,arguments,lg(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ug(n,t)},EC(r)}function lP(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lP=function(){return!!r})()}function ug(r,e){return ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ug(r,e)}function lg(r){return lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lg(r)}var HB=(function(){function r(){return(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,r),(function(n,i,o){return i=lg(i),(function(a,s){if(s&&(Jh(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u})(a)})(n,lP()?Reflect.construct(i,o||[],lg(n).constructor):i.apply(n,o))})(this,r,arguments)}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&ug(n,i)})(r,EC(Error)),e=r,(t=[{key:"toString",value:function(){return this.message}}])&&YJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t})();const wm=`uniform mat4 u_projection;

attribute vec2 a_position;
//attribute float a_index;

//varying highp float index;

void main() {
//  index = a_index;
  gl_Position = u_projection * vec4(a_position, 0.0, 1.0);
}`;function gp(r){return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(r)}function $J(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,KJ(n.key),n)}}function KJ(r){var e=(function(t){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(gp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return gp(e)=="symbol"?e:e+""}var aj=(function(){return r=function t(n,i){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),this.graph=this.constructGraphObjects(n,i),this.subGraphs=[],this.sunMap={}},e=[{key:"constructGraphObjects",value:function(t,n){var i=new Array(t.nodes.length),o=new Array(t.rels.length),a={},s=[];return t.nodes.forEach(function(u,l){i[l]=[],o[l]=[],s.push(u)}),t.rels.forEach(function(u){var l=n[u.from],c=n[u.to];l!==void 0&&c!==void 0&&(i[l].push(c),i[c].push(l),o[l].push(u.id),o[c].push(u.id),a[u.id]=u)}),this.relIdMap=o,{nodes:s,relationships:i,idToRel:a}}},{key:"coarsenTo",value:function(t){for(var n=this.graph,i=n.nodes.length,o=0;n.nodes.length>t&&n.relationships.some(function(s){return s.length>0});){var a=this.coarsen(n,o===0);if(o===0&&(this.nodeSortMap=a.nodeSortMap),this.subGraphs.push(a.sortedInput),(n=a.output).relationships.length===0||n.relationships.every(function(s){return s.length===0})||i===n.nodes.length)break;i=n.nodes.length,o+=1}return this.subGraphs.push(n),n}},{key:"coarsenBy",value:function(t){for(var n=t,i=this.graph,o=i.nodes.length,a=n;n>0;){var s=this.coarsen(i,n===a);if(this.subGraphs.push(s.sortedInput),(i=s.output).relationships.length===0||i.relationships.every(function(u){return u.length===0})||o===i.nodes.length)break;o=i.nodes.length,n-=1}return this.subGraphs.push(i),i}},{key:"coarsen",value:function(t,n){var i=this,o=t.nodes,a=t.relationships,s=o.map(function(w,x){return x}),u={},l={};o.forEach(function(w,x){u[x]=w,l[w.id]=x});for(var c=a.map(function(w){return w.slice()}),f={suns:{},planets:{},moons:{}},h=[],d=[],v=function(){var w=s[0];s.splice(s.indexOf(w),1),a[w].forEach(function(O){var C=s.indexOf(O);C>=0&&s.splice(C,1);var A=-1,R=c[O];R.forEach(function(k,D){var L=s.indexOf(k);L>=0?s.splice(L,1):k===w&&(A=D)}),R.splice(A,1)});var x={id:w};if(n)x.originalId=u[w].id;else{var E=u[w];x.finestIndex=E.finestIndex,x.originalId=E.originalId}h.push(x),f.suns[w]=x};s.length>0;)v();h.forEach(function(w,x){d[x]=[]}),h.forEach(function(w,x){var E={},O=[];a[w.id].forEach(function(C){if(C!==w.id&&!E[C]){var A={id:C,parent:w,sunId:x,moons:[]},R=u[C];A.size=function(){return A.moons.length+1},A.weight=R.weight||1,A.children=function(){return A.moons},n?A.originalId=R.id:(A.finestIndex=R.finestIndex,A.originalId=R.originalId),O.push(A),E[C]=!0}}),O.forEach(function(C){f.planets[C.id]=C}),w.planets=O,w.children=function(){return w.planets},w.weight=w.planets.reduce(function(C,A){return C+(A.weight||1)},0)+(u[w.id].weight||1),w.size=function(){return w.planets.reduce(function(C,A){return C+A.size()},0)+1}});var p=o.filter(function(w,x){return!h.find(function(E){return E.id===x})&&!f.planets[x]});p.forEach(function(w){for(var x=l[w.id],E=c[x],O=null,C=-1,A=0;A<E.length;A++){var R=E[A];if(R!==x&&(O=f.planets[R])){C=A;break}}if(E.splice(C,1),O){var k={id:x,size:function(){return 0}};k.weight=u[x].weight||1,k.parent=O,k.sunId=O.sunId,n?k.originalId=w.id:(k.finestIndex=w.finestIndex,k.originalId=w.originalId),f.moons[x]=k,O.moons.push(k),O.weight+=k.weight,O.parent.weight+=k.weight;var D=c[O.id];D.splice(D.indexOf(x),1)}}),c.forEach(function(w,x){if(!f.suns[x]){var E=f.planets[x]||f.moons[x];c[x].forEach(function(O){var C=f.planets[O];if(C||(C=f.moons[O]),E.sunId!==C.sunId){var A=d[E.sunId];A.includes(C.sunId)||A.push(C.sunId)}})}});var m=[],y=0,b={};h.forEach(function(w,x){var E=o[w.id];b[w.id]=y,w.previousIndex=x,w.id=y,y+=1,n&&(E.finestIndex=w.id,w.finestIndex=w.id),m.push(E),w.planets.forEach(function(O){var C=o[O.id];b[O.id]=y,O.id=y,y+=1,O.sunId=w.id,n&&(C.finestIndex=O.id),i.sunMap[O.originalId]=w.originalId,m.push(C),O.moons.forEach(function(A){var R=o[A.id];b[A.id]=y,A.id=y,y+=1,A.sunId=w.id,n&&(R.finestIndex=A.id),i.sunMap[A.originalId]=w.originalId,m.push(R)})})});var g=[],_=[];return a.forEach(function(w,x){var E=b[x];g[E]=w.map(function(O){return b[O]}),n&&(_[E]=w.map(function(O,C){return i.relIdMap[x][C]}))}),_&&_.length>0&&(this.relIdMap=_),{output:{nodes:h,relationships:d},sortedInput:{nodes:m,relationships:g},nodeSortMap:b}}}],e&&$J(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),sj=function(r,e,t){for(var n=2*Math.PI/t,i=[],o=0;o<t;o++){var a=n*o;i.push({x:r.x+e*Math.cos(a),y:r.y+e*Math.sin(a)})}return i};function yp(r){return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(r)}function Fv(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return uj(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?uj(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function uj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ZJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,YB(n.key),n)}}function Ft(r,e,t){return(e=YB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function YB(r){var e=(function(t){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(yp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return yp(e)=="symbol"?e:e+""}var hi="PhysLayout",Bv=new Float32Array(4),ea=256,rT=function(r){for(var e={},t={},n=0;n<r.length;n++)e[r[n].id]=n,t[n]=r[n].id;return{nodeIdToIndex:e,nodeIndexToId:t}},QJ=(function(){return r=function t(n){var i=this;(function(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")})(this,t),Ft(this,"physVbo",void 0),Ft(this,"physSmallVbo",void 0),Ft(this,"physProjection",void 0),Ft(this,"physSmallProjection",void 0),Ft(this,"gl",void 0),Ft(this,"useReadpixelWorkaround",void 0),Ft(this,"averageNodeSize",void 0),Ft(this,"shouldUpdate",void 0),Ft(this,"iterationCount",void 0),Ft(this,"lastSpeedValues",void 0),Ft(this,"rollingAvgGraphSpeed",void 0),Ft(this,"nodeVariation",void 0),Ft(this,"nodeCenterPoint",void 0),Ft(this,"peakIterationMultiplier",void 0),Ft(this,"stateDisposers",void 0),Ft(this,"state",void 0),Ft(this,"dpr",void 0),Ft(this,"intelWorkaround",void 0),Ft(this,"simulationStopVelocitySquared",void 0),Ft(this,"gravity",void 0),Ft(this,"force",void 0),Ft(this,"nodeIdToIndex",void 0),Ft(this,"nodeIndexToId",void 0),Ft(this,"flatRelationshipKeys",void 0),Ft(this,"numNodes",void 0),Ft(this,"solarMerger",void 0),Ft(this,"subGraphs",void 0),Ft(this,"nodeSortMap",void 0),Ft(this,"firstUpdate",void 0),Ft(this,"curPhysData",void 0),Ft(this,"apprxRepForceShader",void 0),Ft(this,"levelsClusterTexture",void 0),Ft(this,"levelsFinestIndexTexture",void 0),Ft(this,"initalLevelTexture",void 0),Ft(this,"levelsData",void 0),Ft(this,"collisionDetectionMultiplier",void 0),Ft(this,"physShader",void 0),Ft(this,"physData",void 0),Ft(this,"workaroundData",void 0),Ft(this,"pinData",void 0),Ft(this,"updateData",void 0),Ft(this,"updateShader",void 0),Ft(this,"workaroundShader",void 0),Ft(this,"physPositions",void 0),Ft(this,"springTexture",void 0),Ft(this,"sizeTexture",void 0),Ft(this,"offsetTexture",void 0),Ft(this,"pinTexture",void 0),Ft(this,"addedNodes",void 0),Ft(this,"updateTexture",void 0),Ft(this,"enableVerlet",void 0);var o=n.state,a=n.webGLContext;if(Pr.info("layout - webGLContext",!!a),n.webGLContext===void 0)throw new Error("PhysLayout missing options: webGLContext - webgl context");if(n.state===void 0)throw new Error("PhysLayout missing options: state - state object");var s=a;this.checkCompatibility(s),this.printGlStats(s),this.physVbo=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.physVbo);var u=new Float32Array([0,0,Nt,0,0,Nt,Nt,Nt]);s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW),this.physSmallVbo=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.physSmallVbo);var l=new Float32Array([0,0,ea,0,0,ea,ea,ea]);s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW),this.physProjection=N0(),wC(this.physProjection,0,Nt,Nt,0,0,1e6),this.physSmallProjection=N0(),wC(this.physSmallProjection,0,ea,ea,0,0,1e6),s.disable(s.DEPTH_TEST),this.gl=s,this.useReadpixelWorkaround&&this.setupReadpixelWorkaround(),this.setupUpdates(),this.averageNodeSize=kn,this.shouldUpdate=!0,this.iterationCount=0,this.lastSpeedValues=[],this.rollingAvgGraphSpeed=0,this.nodeVariation=0,this.nodeCenterPoint=[0,0],this.peakIterationMultiplier=160,this.setOptions(n,!0),this.definePhysicsArrays(),this.flatRelationshipKeys=new Set;var c=o.nodes,f=o.rels;c.addChannel(hi),f.addChannel(hi),this.stateDisposers=[],this.stateDisposers.push(o.reaction(function(){return o.graphUpdates},function(){var h=c.channels[hi];if(c.version!==void 0&&h){var d=Object.values(h.adds).length>0,v=Object.values(h.removes).length>0,p=Object.values(h.updates),m=sg(p);(d||v||m)&&(i.shouldUpdate=!0,i.checkForUpdates())}var y=f.channels[hi];if(f.version!==void 0&&y){var b=Object.values(y.adds).length>0,g=Object.values(y.removes).length>0;(b||g)&&(i.shouldUpdate=!0,i.checkForUpdates())}})),this.setData({nodes:c.items,rels:f.items}),this.state=o,this.dpr=window.devicePixelRatio||1},e=[{key:"setOptions",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(t){var i=t.intelWorkaround,o=t.simulationStopVelocity,a=t.gravity,s=t.enableVerlet,u=s!==void 0&&s;n&&(this.intelWorkaround=i,this.enableVerlet=u);var l=this.enableVerlet?.25:o??100;this.simulationStopVelocitySquared=l*l,this.gravity=a??100,this.force=0}}},{key:"setData",value:function(t){var n=rT(t.nodes),i=n.nodeIdToIndex,o=n.nodeIndexToId;return this.nodeIdToIndex=i,this.nodeIndexToId=o,this.numNodes=t.nodes.length,this.flatRelationshipKeys=_m(t.rels),this.solarMerger=new aj(t,i),this.solarMerger.coarsenTo(1),this.subGraphs=this.solarMerger.subGraphs,this.nodeSortMap=this.solarMerger.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]),this.setupPhysics(),this.firstUpdate=!0,this.curPhysData=0,this.shouldUpdate=!0,this.iterationCount=0,this.subGraphs[0]}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.gl;if(this.checkForUpdates(t),!this.shouldUpdate)return n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(0).frameBuffer),n.readPixels(0,0,Nt,Nt,n.RGBA,n.FLOAT,this.physPositions),!1;n.disable(n.BLEND);for(var i=this.nodeVariation/(this.numNodes||1)>.3,o=this.getScaleNumber(this.iterationCount),a=this.subGraphs?this.subGraphs.length:0,s=this.getPhysData(0).texture,u=a-1;u>0;u--){var l=this.subGraphs[u].nodes.length,c=u===a-1;this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_physData",s),this.apprxRepForceShader.setUniform("u_clusterData",this.levelsClusterTexture[u]),this.apprxRepForceShader.setUniform("u_finestIndexes",this.levelsFinestIndexTexture[u]),this.apprxRepForceShader.setUniform("u_prevForce",c?this.initalLevelTexture:this.levelsData[u+1].texture),this.apprxRepForceShader.setUniform("u_numNodes",l),this.apprxRepForceShader.setUniform("u_iterationMultiplier",o),this.apprxRepForceShader.setUniform("u_baseLength",this.getBaseLength(l)),this.apprxRepForceShader.setUniform("u_isTopLevel",c?1:0),n.bindBuffer(n.ARRAY_BUFFER,this.physSmallVbo),this.apprxRepForceShader.setAttributePointer("a_position",2,0,2),n.bindFramebuffer(n.FRAMEBUFFER,this.levelsData[u].frameBuffer),n.viewport(0,0,ea,ea),n.drawArrays(n.TRIANGLE_STRIP,0,4)}if(this.collisionDetectionMultiplier=0,this.collisionDetectionMultiplier=i?Math.min(this.iterationCount/Math.min(this.numNodes,300),1):1,this.force=a<=1?this.initalLevelTexture:this.levelsData[1].texture,this.physShader.use(),this.physShader.setUniform("u_prevForce",a<=1?this.initalLevelTexture:this.levelsData[1].texture),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_physData",s),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_iterationMultiplier",o),this.physShader.setUniform("u_curIteration",this.iterationCount),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_clusterData",this.levelsClusterTexture[0]),this.physShader.setUniform("u_collisionMultiplier",this.collisionDetectionMultiplier),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.firstUpdate=!1,n.bindBuffer(n.ARRAY_BUFFER,this.physVbo),this.physShader.setAttributePointer("a_position",2,0,2),n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(1).frameBuffer),n.viewport(0,0,Nt,Nt),n.drawArrays(n.TRIANGLE_STRIP,0,4),this.useReadpixelWorkaround?this.doReadpixelWorkaround():(n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(0).frameBuffer),n.readPixels(0,0,Nt,Nt,n.RGBA,n.FLOAT,this.physPositions)),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.iterationCount+=1,this.numNodes<2)this.shouldUpdate=!1,this.iterationCount=0;else if(this.iterationCount%5==0){var f=this.iterationCount<300,h=f?this.getMaxSpeedSquared():this.getMedianSpeedSquared(this.addedNodes);this.lastSpeedValues.push(h),this.rollingAvgGraphSpeed=this.lastSpeedValues.reduce(function(p,m){return p+m},0)/this.lastSpeedValues.length;var d=f&&h>=this.rollingAvgGraphSpeed,v=this.simulationStopVelocitySquared&&this.rollingAvgGraphSpeed<this.simulationStopVelocitySquared;this.lastSpeedValues.length>20&&this.lastSpeedValues.shift(),!d&&v===!0&&this.iterationCount>2&&this.terminateUpdate()}return this.shouldUpdate}},{key:"terminateUpdate",value:function(){Pr.info("Cooling down after ".concat(this.iterationCount," iterations at graph speed of ").concat(Math.sqrt(this.rollingAvgGraphSpeed))),this.shouldUpdate=!1,this.iterationCount=0,this.rollingAvgGraphSpeed=0,this.lastSpeedValues=[],this.addedNodes=null,this.nodeVariation=0}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"getNodePositions",value:function(t){var n=[];if(this.useReadpixelWorkaround){var i,o=Fv(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this.nodeIdToIndex[a.id],u=a.id,l=void 0,c=void 0;s!==void 0&&(l=this.workaroundData[0].dataFloat[s],c=this.workaroundData[1].dataFloat[s]),n.push({id:u,x:l,y:c})}}catch(b){o.e(b)}finally{o.f()}}else{var f,h=Fv(t);try{for(h.s();!(f=h.n()).done;){var d=f.value,v=this.nodeIdToIndex[d.id],p=d.id,m=void 0,y=void 0;v!==void 0&&(m=this.physPositions[4*v+0],y=this.physPositions[4*v+1]),n.push({id:p,x:m,y})}}catch(b){h.e(b)}finally{h.f()}}return n}},{key:"reheat",value:function(t){this.setupSize(this.subGraphs[0]),this.shouldUpdate=!0,this.iterationCount=0,this.nodeVariation=t.nodes.length}},{key:"updateNodes",value:function(t){var n=this.gl,i=new Set;n.bindTexture(n.TEXTURE_2D,this.getPhysData().texture);var o,a=Fv(t);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=this.nodeIdToIndex[s.id];if(s.x!==void 0&&s.y!==void 0){Bv[0]=s.x,Bv[1]=s.y,Bv[2]=0,Bv[3]=0;var l=u%Nt,c=(u-l)/Nt;n.texSubImage2D(n.TEXTURE_2D,0,l,c,1,1,n.RGBA,n.FLOAT,Bv),this.useReadpixelWorkaround?(this.workaroundData[0].dataFloat[u]=s.x,this.workaroundData[1].dataFloat[u]=s.y):(this.physPositions[4*u+0]=s.x,this.physPositions[4*u+1]=s.y)}s.pinned!==void 0&&(this.pinData[u]=s.pinned?255:0),Object.keys(s).forEach(function(f){return i.add(f)})}}catch(f){a.e(f)}finally{a.f()}i.has("pinned")&&(n.bindTexture(n.TEXTURE_2D,this.pinTexture),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,Nt,Nt,0,n.ALPHA,n.UNSIGNED_BYTE,this.pinData)),(i.has("x")||i.has("y")||i.has("size"))&&(this.shouldUpdate=!0,this.iterationCount=0)}},{key:"addRemoveData",value:function(t,n,i){var o=this.gl;this.numNodes=t.nodes.length,this.physShader.use(),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_baseLength",this.getBaseLength());var a=rT(t.nodes).nodeIdToIndex,s=new aj(t,a);s.coarsenTo(1);var u=s.subGraphs[0],l=this.subGraphs[0],c=function(B){return l.nodes.findIndex(function(U){return U.id===B})},f=Object.values(n.adds),h=Object.values(n.removes);this.addedNodes=f.length>0?{}:null,this.nodeVariation=f.length+h.length;for(var d=function(B){return!!n.adds[B]},v=3*Math.sqrt(t.nodes.length),p={x:0,y:0},m=u.nodes.length,y=new Uint8Array(65536),b=0;b<m;b++){var g=0,_=0,w=u.nodes[b];if(d(w.id)){if(this.addedNodes[b]=w.id,g=w.position?w.position.x:void 0,_=w.position?w.position.y:void 0,g===void 0||_===void 0){var x=s.sunMap,E=void 0;for(E=x[w.id];E!==void 0;E=x[E]){var O=c(E);if(O!==-1){var C=this.getNodePosition(O);g=C.x+10*(Math.random()-.5),_=C.y+10*(Math.random()-.5);break}}E===void 0&&(g=this.nodeCenterPoint[0]+v*(Math.random()-.5),_=this.nodeCenterPoint[1]+v*(Math.random()-.5))}this.updateData[2*b]=g,this.updateData[2*b+1]=_,y[b]=w.pinned?255:0}else{var A=c(w.id),R=this.getNodePosition(A);g=R.x,_=R.y,this.updateData[2*b]=A,this.updateData[2*b+1]=999999,y[b]=this.pinData[A]}p.x+=g||0,p.y+=_||0}this.nodeCenterPoint=m?[p.x/m,p.y/m]:[0,0],this.pinData=y,this.subGraphs=s.subGraphs,this.nodeSortMap=s.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]);var k=rT(this.subGraphs[0].nodes),D=k.nodeIdToIndex,L=k.nodeIndexToId;this.nodeIdToIndex=D,this.nodeIndexToId=L,o.bindTexture(o.TEXTURE_2D,this.updateTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,Nt,Nt,0,o.ALPHA,o.FLOAT,this.updateData),Pr.info("Setting gravity center to ",this.nodeCenterPoint),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.updateShader.use(),this.updateShader.setUniform("u_numNodesNew",u.nodes.length),this.updateShader.setUniform("u_physData",this.getPhysData(0).texture),this.updateShader.setUniform("u_updateData",this.updateTexture),o.disable(o.BLEND),o.bindBuffer(o.ARRAY_BUFFER,this.physVbo),this.updateShader.setAttributePointer("a_position",2,0,2),o.bindFramebuffer(o.FRAMEBUFFER,this.getPhysData(1).frameBuffer),o.viewport(0,0,Nt,Nt),o.drawArrays(o.TRIANGLE_STRIP,0,4),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.useReadpixelWorkaround?this.doReadpixelWorkaround():(o.bindFramebuffer(o.FRAMEBUFFER,this.getPhysData().frameBuffer),o.readPixels(0,0,Nt,Nt,o.RGBA,o.FLOAT,this.physPositions)),(f.length>0||h.length>0)&&(o.bindTexture(o.TEXTURE_2D,this.pinTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,Nt,Nt,0,o.ALPHA,o.UNSIGNED_BYTE,this.pinData));var j=_m(t.rels),q=this.hasRelationshipFlatMapChanged(j,i);return this.shouldUpdate=this.nodeVariation>0||q,this.iterationCount=0,this.flatRelationshipKeys=j,this.setupPhysicsForCoarse(),this.subGraphs[0]}},{key:"destroy",value:function(){var t=this;this.gl.deleteBuffer(this.physVbo),this.gl.deleteBuffer(this.physSmallVbo),this.physData.forEach(function(n){t.gl.deleteFramebuffer(n.frameBuffer),t.gl.deleteTexture(n.texture)}),this.levelsData.forEach(function(n){t.gl.deleteFramebuffer(n.frameBuffer),t.gl.deleteTexture(n.texture)}),this.levelsClusterTexture.forEach(function(n){t.gl.deleteTexture(n)}),this.levelsFinestIndexTexture.forEach(function(n){t.gl.deleteTexture(n)}),this.gl.deleteTexture(this.initalLevelTexture),this.gl.deleteTexture(this.sizeTexture),this.gl.deleteTexture(this.offsetTexture),this.gl.deleteTexture(this.springTexture),this.gl.deleteTexture(this.pinTexture),this.gl.deleteTexture(this.updateTexture),this.apprxRepForceShader!==void 0&&this.apprxRepForceShader.remove(),this.updateShader!==void 0&&this.updateShader.remove(),this.physShader!==void 0&&this.physShader.remove(),this.physPositions=null,this.gl=null,this.stateDisposers.forEach(function(n){n()}),this.state.nodes.removeChannel(hi),this.state.rels.removeChannel(hi)}},{key:"hasRelationshipFlatMapChanged",value:function(t,n){if(t.size!==this.flatRelationshipKeys.size)return!0;var i=!1,o=Object.values(n.adds),a=Object.values(n.removes);if(o.length>0||a.length>0){var s,u=Fv(_m(o));try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!this.flatRelationshipKeys.has(l)){i=!0;break}}}catch(d){u.e(d)}finally{u.f()}if(!i){var c,f=Fv(_m(a));try{for(f.s();!(c=f.n()).done;){var h=c.value;if(!t.has(h)){i=!0;break}}}catch(d){f.e(d)}finally{f.f()}}}return i}},{key:"dumpTexture",value:function(t,n,i){var o=this.gl;Pr.info("--- Dumping texture ",i),o.bindFramebuffer(o.FRAMEBUFFER,t),o.readPixels(0,0,Nt,Nt,o.RGBA,o.FLOAT,this.physPositions);for(var a=0;a<n;a++)Pr.info(a,": ",this.physPositions[4*a+0],this.physPositions[4*a+1],this.physPositions[4*a+2],this.physPositions[4*a+3])}},{key:"getScaleNumber",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i,o,a){return a+Math.pow(10,6)*Math.pow(i-120,-1.7)};return t===0?0:t<300?200+-1/Math.pow(10,5)*3*Math.pow(Math.abs(t-200+12),3):n(t,200,10)}},{key:"getBaseLength",value:function(t){if(t===void 0||t===this.numNodes)return 100*this.dpr;var n=Math.pow(this.averageNodeSize/2,2)*Math.PI,i=this.numNodes/t*n;return(100+Math.sqrt(i/Math.PI)/2/t)*this.dpr}},{key:"checkForUpdates",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.state,i=n.nodes,o=n.rels,a={nodes:i.items,rels:o.items},s=Object.values(i.channels[hi].adds).length>0,u=Object.values(o.channels[hi].adds).length>0,l=Object.values(i.channels[hi].removes).length>0,c=Object.values(o.channels[hi].removes).length>0,f=Object.values(i.channels[hi].updates);(s||u||l||c)&&this.addRemoveData(a,{adds:i.channels[hi].adds,removes:i.channels[hi].removes},{adds:o.channels[hi].adds,removes:o.channels[hi].removes}),t?(this.updateNodes(a.nodes),this.reheat(a)):f.length>0&&(this.updateNodes(f),sg(f)&&this.reheat(a)),i.clearChannel(hi),o.clearChannel(hi)}},{key:"getNodePosition",value:function(t){return this.useReadpixelWorkaround?{x:this.workaroundData[0].dataFloat[t],y:this.workaroundData[1].dataFloat[t]}:{x:this.physPositions[4*t+0],y:this.physPositions[4*t+1]}}},{key:"getMaxSpeedSquared",value:function(){var t=0;if(this.useReadpixelWorkaround)for(var n=0;n<this.numNodes;n++){var i=this.workaroundData[2].dataFloat[n],o=this.workaroundData[3].dataFloat[n],a=i*i+o*o;a>t&&(t=a)}else for(var s=0;s<this.numNodes;s++){var u=this.physPositions[4*s+2],l=this.physPositions[4*s+3],c=u*u+l*l;c>t&&(t=c)}return t}},{key:"getMedianSpeedSquared",value:function(t){var n=[];if(this.useReadpixelWorkaround)for(var i=0;i<this.numNodes;i++){var o=this.workaroundData[2].dataFloat[i],a=this.workaroundData[3].dataFloat[i],s=o*o+a*a;n[i]=s}else for(var u=0;u<this.numNodes;u++)if(!t||t[u]){var l=this.physPositions[4*u+2],c=this.physPositions[4*u+3],f=l*l+c*c;n.push(f)}return n.sort(function(h,d){return h-d}),n[Math.floor(n.length/2)]}},{key:"getPhysData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.physData[(this.curPhysData+t)%this.physData.length]}},{key:"newTexture",value:function(t,n,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.FLOAT,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.RGBA,s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,a,i,i,0,a,o,n),s}},{key:"newFramebuffer",value:function(t,n){var i=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),i}},{key:"checkCompatibility",value:function(t){function n(l){throw new HB(l)}t||n("Could not initialize WebGL"),t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0&&n("Vertex shader texture access not available"),t.getExtension("OES_texture_float")||n("OES_texture_float extension not available"),t.getExtension("WEBGL_color_buffer_float")||(Pr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0);var i=t.getParameter(t.MAX_TEXTURE_SIZE),o=Math.max(Nt,ZS);if(i<o&&n("Need larger WebGL texture support. Avaliable: ".concat(i," needed: ").concat(o)),!this.useReadpixelWorkaround){var a=new Float32Array(4),s=this.newTexture(t,a,1),u=this.newFramebuffer(t,s);t.bindFramebuffer(t.FRAMEBUFFER,u),t.readPixels(0,0,1,1,t.RGBA,t.FLOAT,a),t.getError()!==t.NO_ERROR&&(Pr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u),t.deleteTexture(s)}}},{key:"printGlStats",value:function(t){var n="?",i="?";if(t.getParameter(t.RENDERER))i=t.getParameter(t.RENDERER),n=t.getParameter(t.VENDOR);else{var o=t.getExtension("WEBGL_debug_renderer_info");o&&(n=t.getParameter(o.UNMASKED_VENDOR_WEBGL),i=t.getParameter(o.UNMASKED_RENDERER_WEBGL))}Pr.trace("Vendor: ".concat(n)),Pr.trace("Renderer: ".concat(i));var a=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);Pr.trace("Line width range: ".concat(a));var s=t.getSupportedExtensions();Pr.trace("Extentions:"),s.length>0&&s.forEach(function(u){return Pr.trace(u)})}},{key:"adjustToGlSize",value:function(t){return t*this.dpr*2.5}},{key:"setupSize",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{nodes:[]},n=new Float32Array(65536),i=t.nodes,o=i.length,a=0,s=0;s<o;s++){var u,l=parseInt((u=i[s].size)!==null&&u!==void 0?u:kn,10);n[s]=this.adjustToGlSize(l),a+=l}this.averageNodeSize=o?a/o:kn;var c=this.gl;this.sizeTexture===void 0&&(this.sizeTexture=c.createTexture()),c.bindTexture(c.TEXTURE_2D,this.sizeTexture),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,Nt,Nt,0,c.ALPHA,c.FLOAT,n),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)}},{key:"setupSprings",value:function(t){var n,i,o=this.gl,a=t.relationships,s=new Float32Array(16777216),u=new Float32Array(65536),l=0;for(n=0;n<t.nodes.length;n++)for(u[n]=l,s[l]=a[n].length,l+=1,i=0;i<a[n].length;i++)s[l]=a[n][i],l+=1;for(i=l;i<s.length;i++)s[i]=1;for(i=n;i<u.length;i++)u[i]=0;this.offsetTexture===void 0&&(this.offsetTexture=o.createTexture()),o.bindTexture(o.TEXTURE_2D,this.offsetTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,Nt,Nt,0,o.ALPHA,o.FLOAT,u),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),this.springTexture===void 0&&(this.springTexture=o.createTexture()),o.bindTexture(o.TEXTURE_2D,this.springTexture),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,ZS,ZS,0,o.ALPHA,o.FLOAT,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE)}},{key:"setupPhysics",value:function(){this.setupPhysicsForCoarse(),this.setupPhysicsForNodes(),this.physPositions=new Float32Array(262144),this.setupPinData()}},{key:"setupPhysicsForNodes",value:function(){var t=this.gl,n=this.subGraphs.length,i=this.subGraphs[0].nodes,o=3*Math.sqrt(i.length),a=new Float32Array(262144),s=new Float32Array(262144);this.numNodes=i.length;for(var u=0;u<262144;u++)a[u]=0,s[u]=0;for(var l=function(m,y,b,g){g[4*m+0]=y,g[4*m+1]=b,g[4*m+2]=0,g[4*m+3]=0},c=n-1;c>=0;c--){var f=c===n-1?[]:this.subGraphs[c+1].nodes;f.length===0?this.subGraphs[c].nodes.forEach(function(m,y){var b=m.placement?m.placement.x:o*(Math.random()-.5),g=m.placement?m.placement.y:o*(Math.random()-.5);l(m.finestIndex===void 0?y:m.finestIndex,b,g,a)}):f.forEach(function(m){var y=m.finestIndex,b=a[4*m.finestIndex],g=a[4*m.finestIndex+1],_=sj({x:b,y:g},10,m.planets.length+1);y+=1,m.planets.forEach(function(w,x){var E=_[x];l(y+=1,E.x,E.y,a);var O=sj({x:E.x,y:E.y},10,w.moons.length+1);w.moons.forEach(function(C,A){var R=O[A];l(y+=1,R.x,R.y,a)})})})}this.physData=[];for(var h=0;h<2;h++){var d=this.newTexture(t,h===0?a:s,Nt),v=this.newFramebuffer(t,d);this.physData.push({texture:d,frameBuffer:v})}var p=this.enableVerlet?`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;


float DAMP = 0.6;
float COOL = 0.99998;
float TEMP = max(0.02, pow(COOL, u_curIteration));
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 50000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection, float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = (combinedNodeSize - dist) / (dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * fScale) / (dist);
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, myPosition.zw);
  } else {
    vec2 prevVelocity = myPosition.zw;
    vec2 currentPos = myPosition.xy;
    vec2 prevPos = currentPos - prevVelocity;

    vec2 newPos = currentPos + TEMP * ( DAMP * (prevVelocity) + acceleration * TIMESTEP * TIMESTEP);
    vec2 newVelocity = newPos - currentPos;
    gl_FragColor = vec4(newPos, newVelocity);
  }
}`:`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 500000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection,  float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = ((combinedNodeSize - dist) / dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * (fScale / 1.5)) / dist;
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, acceleration * TIMESTEP * 0.5);
  } else {
    myPosition.zw = myPosition.zw * VELOCITYDECAY;
    gl_FragColor = vec4(myPosition.xy + myPosition.zw * TIMESTEP, myPosition.zw + acceleration * TIMESTEP);
  }
}`;this.physShader=new al(t,wm,p,{INTEL_WORKAROUND:this.intelWorkaround?1:0}),this.physShader.use(),this.physShader.setUniform("u_projection",this.physProjection),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_gravity",this.gravity)}},{key:"setupPhysicsForCoarse",value:function(){var t=this,n=this.gl;this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[];var i,o,a=this.subGraphs.length,s=function(v,p,m,y,b){i[4*v+0]=p,i[4*v+1]=m,i[4*v+2]=b.size(),i[4*v+3]=y||1};if(a===1){i=new Float32Array(262144);var u=this.subGraphs[0].nodes;u.forEach(function(v,p){s(p,0,0,v.weight,{size:function(){return u.length}})}),this.levelsClusterTexture[0]=this.newTexture(n,i,ea)}else for(var l=function(){var v=t.subGraphs[c].nodes,p=c===t.subGraphs.length-1?[]:t.subGraphs[c+1].nodes;i=new Float32Array(262144),o=new Float32Array(65536);var m=0;if(p.length>0){var y=p.slice();y.sort(function(_,w){return _.previousIndex-w.previousIndex}),y.forEach(function(_,w){var x=m,E=p.indexOf(_);s(m,E,x,v[_.id].weight,_),o[m]=v[m].finestIndex,m+=1,_.planets.forEach(function(O){s(m,E,x,O.weight,_),o[m]=v[m].finestIndex,m+=1,O.moons.forEach(function(C){s(m,E,x,C.weight,_),o[m]=v[m].finestIndex,m+=1})})})}else v.forEach(function(_,w){s(w,0,0,_.weight,{size:function(){return v.length}}),o[w]=v[w].finestIndex});var b=t.newTexture(n,null,ea),g=t.newFramebuffer(n,b);t.levelsData[c]={texture:b,frameBuffer:g},t.levelsClusterTexture[c]=t.newTexture(n,i,ea),t.levelsFinestIndexTexture[c]=t.newTexture(n,o,Nt,n.FLOAT,n.ALPHA)},c=this.subGraphs.length-1;c>=0;c--)l();for(var f=new Float32Array(262144),h=0;h<f.length;h++)f[h]=0;this.initalLevelTexture=this.newTexture(n,f,ea);var d=this.enableVerlet?`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float PI = 3.1415926535897932384626433832795;
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 1.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getSquaredLogClusterWeight(float value) {
  return pow(log(value), 2.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterArea = pow(clusterSize + u_baseLength * 2.0, 2.0);

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getSquaredLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = (clusterArea * fScale) / (dist * dist);

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.2;
    }

    acceleration += ((delta / sqrt(dist)) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / (dist * dist);
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`:`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getLogClusterWeight(float value) {
  return value / max(log(value), 1.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = ((u_baseLength * u_baseLength) * (fScale / 1.5)) / dist;

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.3;
    }

    acceleration += ((delta / dist) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / dist;
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`;this.apprxRepForceShader=new al(n,wm,d),this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_projection",this.physSmallProjection)}},{key:"setupPinData",value:function(){var t=this.gl;this.pinTexture=t.createTexture(),this.pinData=new Uint8Array(65536);for(var n=0;n<65536;n++)this.pinData[n]=0;t.bindTexture(t.TEXTURE_2D,this.pinTexture),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,Nt,Nt,0,t.ALPHA,t.UNSIGNED_BYTE,this.pinData),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}},{key:"setupUpdates",value:function(){var t=this.gl;this.updateData=new Float32Array(65536),this.updateTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.updateTexture),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,Nt,Nt,0,t.ALPHA,t.FLOAT,this.updateData),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.updateShader=new al(t,wm,`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_updateData;
uniform float u_numNodesNew;

const float INDEX_FLAG = 999999.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5)*textureSide;

  if (index >= u_numNodesNew) {
    discard;
  }

  float firstValue = getTextureData(u_updateData, index * 2.0, 256.0).a;
  float secondValue = getTextureData(u_updateData, index * 2.0 + 1.0, 256.0).a;

  if (secondValue == INDEX_FLAG) {
    vec4 myPosition = getTextureData(u_physData, firstValue, 256.0);
    gl_FragColor = myPosition;
  } else {
    gl_FragColor = vec4(firstValue, secondValue, 0.0, 0.0);
  }
}
`),this.updateShader.use(),this.updateShader.setUniform("u_projection",this.physProjection)}},{key:"setupReadpixelWorkaround",value:function(){var t=this.gl;this.workaroundShader=new al(t,wm,`precision lowp float;

uniform sampler2D u_physData;
uniform float u_index;

float shift_right (float v, float amt) { 
    v = floor(v) + 0.5; 
    return floor(v / exp2(amt)); 
}

float shift_left (float v, float amt) { 
    return floor(v * exp2(amt) + 0.5); 
}

float mask_last (float v, float bits) { 
    return mod(v, shift_left(1.0, bits)); 
}

float extract_bits (float num, float from, float to) { 
    from = floor(from + 0.5); to = floor(to + 0.5); 
    return mask_last(shift_right(num, from), to - from); 
}

// From https://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target
vec4 encode_float (float val) { 
    if (val == 0.0) return vec4(0, 0, 0, 0); 
    float sign = val > 0.0 ? 0.0 : 1.0; 
    val = abs(val); 
    float exponent = floor(log2(val)); 
    float biased_exponent = exponent + 127.0; 
    float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
    float t = biased_exponent / 2.0; 
    float last_bit_of_biased_exponent = fract(t) * 2.0; 
    float remaining_bits_of_biased_exponent = floor(t); 
    float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
    float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
    float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
    float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
    return vec4(byte4, byte3, byte2, byte1); 
}

void main(void) {
  vec4 texData = texture2D(u_physData, gl_FragCoord.xy / 255.0);
  float data;
  if (u_index == 0.0) {
    data = texData.x;
  } else if (u_index == 1.0) {
    data = texData.y;
  } else if (u_index == 2.0) {
    data = texData.z;
  } else if (u_index == 3.0) {
    data = texData.w;
  }

  gl_FragColor = encode_float(data);
}
`),this.workaroundShader.use(),this.workaroundShader.setUniform("u_projection",this.physProjection),this.workaroundData=[];for(var n=0;n<4;n++){var i=new Uint8Array(262144),o=this.newTexture(t,null,Nt,t.UNSIGNED_BYTE),a=this.newFramebuffer(t,o);this.workaroundData.push({dataByte:i,dataFloat:new Float32Array(i.buffer),texture:o,frameBuffer:a})}}},{key:"doReadpixelWorkaround",value:function(){for(var t=this.gl,n=0;n<4;n++){var i=this.workaroundData[n];t.bindFramebuffer(t.FRAMEBUFFER,i.frameBuffer),t.viewport(0,0,Nt,Nt),this.workaroundShader.use(),this.workaroundShader.setUniform("u_index",n),this.workaroundShader.setUniform("u_physData",this.getPhysData(0).texture),t.bindBuffer(t.ARRAY_BUFFER,this.physVbo),this.workaroundShader.setAttributePointer("a_position",2,0,2),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.readPixels(0,0,Nt,Nt,t.RGBA,t.UNSIGNED_BYTE,i.dataByte)}}},{key:"definePhysicsArrays",value:function(){this.physData=[],this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[]}}],e&&ZJ(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function mp(r){return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(r)}function Em(r){return(function(e){if(Array.isArray(e))return nT(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||(function(e,t){if(e){if(typeof e=="string")return nT(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nT(e,t):void 0}})(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function nT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function JJ(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,XB(n.key),n)}}function Rh(r,e,t){return(e=XB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function XB(r){var e=(function(t){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(mp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return mp(e)=="symbol"?e:e+""}var Ih="ForceCytoLayout",Om="forceDirected",xm="coseBilkent",eee=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),Rh(this,"physLayout",void 0),Rh(this,"coseBilkentLayout",void 0),Rh(this,"state",void 0),Rh(this,"currentLayoutType",void 0),Rh(this,"enableCytoscape",void 0),Rh(this,"currentLayout",void 0);var o=n.state,a=n.enableCytoscape;this.enableCytoscape=a==null||a,this.physLayout=new QJ(n),this.coseBilkentLayout=new VJ({state:o,cytoCompleteCallback:function(){for(i.physLayout.update(!0),i.copyLayoutPositions(i.state.nodes.items,i.coseBilkentLayout,i.physLayout);i.physLayout.update(!1););i.copyLayoutPositions(i.state.nodes.items,i.physLayout,i.coseBilkentLayout)},animationCompleteCallback:function(){i.currentLayoutType===xm&&setTimeout(function(){return i.setLayout(Om)},50)}}),this.currentLayout=this.physLayout,this.currentLayoutType=Om;var s=o.nodes,u=o.rels;s.addChannel(Ih),u.addChannel(Ih),this.state=o},e=[{key:"setOptions",value:function(t){t!==void 0&&(this.currentLayout.setOptions(t),this.enableCytoscape=t.enableCytoscape)}},{key:"getLayout",value:function(t){return t===xm?this.coseBilkentLayout:this.physLayout}},{key:"setLayout",value:function(t){if(t!==this.currentLayoutType){Pr.info("Switching to layout: ".concat(t," in ForceCyto"));var n=this.getLayout(t);this.currentLayout=n,this.currentLayoutType=t}}},{key:"copyLayoutPositions",value:function(t,n,i){var o=n.getNodePositions(t);i.updateNodes(o)}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.state,i=n.nodes,o=n.rels,a=i.channels[Ih],s=o.channels[Ih],u=Object.values(a.adds).length,l=Object.values(s.adds).length,c=Object.values(a.adds).map(function(C){return C.id}),f=Object.values(s.adds).map(function(C){return C.id}),h=new Set(Object.keys(a.adds)),d=new Set(Object.keys(s.adds));if(i.clearChannel(Ih),o.clearChannel(Ih),this.currentLayoutType===Om&&this.enableCytoscape&&i.items.length<=100&&u<100&&u>0&&l>0){var v=i.items.map(function(C){return C.id}),p=new Set([].concat(Em(v),Em(c))),m=o.items.map(function(C){return C.id}),y=new Set([].concat(Em(m),Em(f)));if(p.size<=100&&y.size<=300){var b=(function(C,A,R,k){var D,L=new Set(C),j=Nv(new Set(A));try{for(j.s();!(D=j.n()).done;){var q=D.value,B=k.idToItem[q];if(B){var U=B.from,W=B.to;L.add(U),L.add(W)}}}catch(le){j.e(le)}finally{j.f()}var H,Y=(function(le){var te,ee={},re={},he=Nv(le);try{for(he.s();!(te=he.n()).done;){for(var ve=te.value,_e=ve.from,Oe=ve.to,Pe="".concat(_e,"-").concat(Oe),me="".concat(Oe,"-").concat(_e),F=0,G=[Pe,me];F<G.length;F++){var X=G[F];re[X]!==void 0?re[X].push(ve):re[X]=[ve]}ee[_e]||(ee[_e]=new Set),ee[Oe]||(ee[Oe]=new Set),ee[_e].add(Oe),ee[Oe].add(_e)}}catch(se){he.e(se)}finally{he.f()}return{adjNodesMap:ee,relMap:re}})(k.items),Z=Y.adjNodesMap,ce=Y.relMap,$={},K={},ie=function(le){var te=[];for($[le]||te.push(le);te.length>0;){var ee=te.shift();if($[ee]=R.idToItem[ee],Z[ee]!==void 0){var re,he=Nv(Z[ee]);try{for(he.s();!(re=he.n()).done;){var ve=re.value;if(!$[ve]){te.push(ve);var _e=ce["".concat(ee,"-").concat(ve)];if(_e){var Oe,Pe=Nv(_e);try{for(Pe.s();!(Oe=Pe.n()).done;){var me=Oe.value;K[me.id]||(K[me.id]=me)}}catch(F){Pe.e(F)}finally{Pe.f()}}}}}catch(F){he.e(F)}finally{he.f()}}}},ae=Nv(L);try{for(ae.s();!(H=ae.n()).done;)ie(H.value)}catch(le){ae.e(le)}finally{ae.f()}return{connectedNodes:$,connectedRels:K}})(h,d,i,o),g=b.connectedNodes,_=b.connectedRels,w=Object.values(g),x=Object.values(_),E=w.length,O=x.length;E===h.size&&O===d.size&&(d.size>0||h.size>0)?(this.setLayout(xm),this.coseBilkentLayout.update(!0,i.items,o.items)):O>0&&d.size/O>.25&&(this.setLayout(xm),this.coseBilkentLayout.update(!0,w,x))}}this.physLayout.update(t),this.coseBilkentLayout.update(t)}},{key:"getShouldUpdate",value:function(){return this.currentLayout.getShouldUpdate()}},{key:"getComputing",value:function(){return this.currentLayout.getComputing()}},{key:"updateNodes",value:function(t){this.setLayout(Om),this.physLayout.updateNodes(t)}},{key:"getNodePositions",value:function(t){return this.currentLayout.getNodePositions(t)}},{key:"terminateUpdate",value:function(){this.physLayout.terminateUpdate(),this.coseBilkentLayout.terminateUpdate()}},{key:"destroy",value:function(){this.physLayout.destroy(),this.coseBilkentLayout.destroy()}}],e&&JJ(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function bp(r){return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(r)}function lj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tee(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lj(Object(t),!0).forEach(function(n){ep(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cj(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return fj(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?fj(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function fj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ree(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,$B(n.key),n)}}function ep(r,e,t){return(e=$B(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $B(r){var e=(function(t){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(bp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return bp(e)=="symbol"?e:e+""}var us="FreeLayout",nee=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),ep(this,"state",void 0),ep(this,"positions",void 0),ep(this,"shouldUpdate",void 0),ep(this,"stateDisposers",void 0);var o=n.state;this.state=o,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)}));var a=this.state,s=a.nodes,u=a.rels;s.addChannel(us),u.addChannel(us),this.shouldUpdate=!0,this.setOptions(),this.layout(s.items,s.idToItem,s.idToPosition)},e=[{key:"setOptions",value:function(){}},{key:"updateNodes",value:function(t){var n,i=cj(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.x!==void 0&&o.y!==void 0&&(this.positions[o.id]={x:o.x,y:o.y}),this.shouldUpdate=!0}}catch(a){i.e(a)}finally{i.f()}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||t){var n=this.state,i=n.nodes,o=n.rels,a=Object.values(i.channels[us].adds).length>0,s=Object.values(o.channels[us].adds).length>0,u=Object.values(i.channels[us].removes).length>0,l=Object.values(o.channels[us].removes).length>0;(a||s||u||l)&&this.layout(i.items,i.idToItem,i.idToPosition),i.clearChannel(us),o.clearChannel(us)}this.shouldUpdate=!1}},{key:"layout",value:function(t,n,i){var o,a=(o=t)!==void 0?Yi(o):o;if(!(0,jr.isEmpty)(a)){for(var s={},u=0;u<a.length;++u){var l,c=a[u].id,f=(l=i[c])!==null&&l!==void 0?l:{},h=f.x,d=h===void 0?0:h,v=f.y,p=v===void 0?0:v;s[c]={id:c,x:d,y:p}}this.positions=s,this.shouldUpdate=!1}}},{key:"setNodePositions",value:function(t){this.positions=t}},{key:"getNodePositions",value:function(t){var n,i=[],o=cj(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=this.positions[a.id],u=tee({id:a.id},s);i.push(u)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){}},{key:"destroy",value:function(){this.state.nodes.removeChannel(us),this.state.rels.removeChannel(us)}}],e&&ree(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function _p(r){return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(r)}function hj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dj(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hj(Object(t),!0).forEach(function(n){iee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function iee(r,e,t){return(e=KB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vj(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return pj(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?pj(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function pj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function oee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,KB(n.key),n)}}function KB(r){var e=(function(t){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(_p(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return _p(e)=="symbol"?e:e+""}var ls="GridLayout",aee=(function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t);var o=n.state;this.state=o,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)}));var a=this.state,s=a.nodes,u=a.rels;s.addChannel(ls),u.addChannel(ls),this.shouldUpdate=!0,this.setOptions(n),this.layout(s.items,s.idToItem,s.idToPosition,u.items)},e=[{key:"setOptions",value:function(t){}},{key:"updateNodes",value:function(t){var n,i=vj(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.x!==void 0&&o.y!==void 0&&(this.positions[o.id]={x:o.x,y:o.y}),this.shouldUpdate=!0}}catch(a){i.e(a)}finally{i.f()}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||t){var n=this.state,i=n.nodes,o=n.rels,a=Object.values(i.channels[ls].adds).length>0,s=Object.values(o.channels[ls].adds).length>0,u=Object.values(i.channels[ls].removes).length>0,l=Object.values(o.channels[ls].removes).length>0;(a||s||u||l)&&(this.layout(i.items,i.idToItem,i.idToPosition,o.items),i.idToPosition=this.positions),i.clearChannel(ls),o.clearChannel(ls)}this.shouldUpdate=!1}},{key:"layout",value:function(t,n,i,o){var a,s=(a=t)?Yi(a):a;if(!(0,jr.isEmpty)(s)){for(var u=s.length,l=Math.ceil(Math.sqrt(u)),c=new Array(u),f=0,h=0;h<l;++h){for(var d=0;d<l&&(c[f]={y:0+150*h,x:0+150*d},(f+=1)!==u);++d);if(f===u)break}for(var v=s.sort(),p={},m=0;m<u;++m){var y=v[m],b=c[m];y.x===b.x&&y.y===b.y||(p[y.id]=dj({id:y.id},b))}this.positions=p,this.shouldUpdate=!1}}},{key:"getNodePositions",value:function(t){var n,i=[],o=vj(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=this.positions[a.id],u=dj({id:a.id},s);i.push(u)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){this.shouldUpdate=!1}},{key:"destroy",value:function(){this.state.nodes.removeChannel(ls),this.state.rels.removeChannel(ls)}}],e&&oee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),see=new Set(["direction","packing"]),uee="forceDirected",u0="hierarchical",lee="grid",cee="free",fee="d3Force",OC="webgl",xC="canvas";function wp(r){return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(r)}function Sm(r,e,t){return(e=(function(n){var i=(function(o){if(wp(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(wp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return wp(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var SC="down",hee=Sm(Sm(Sm(Sm({},"up","BT"),SC,"TB"),"left","RL"),"right","LR"),TC="bin",dee=[TC,"stack"],vee=["html"],pee=["html"],gee=["captionHtml"];function ed(r){return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(r)}function iT(r,e){if(r==null)return{};var t,n,i=(function(a,s){if(a==null)return{};var u={};for(var l in a)if({}.hasOwnProperty.call(a,l)){if(s.indexOf(l)!==-1)continue;u[l]=a[l]}return u})(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function yee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,QB(n.key),n)}}function ZB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZB=function(){return!!r})()}function CC(){return CC=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=(function(o,a){for(;!{}.hasOwnProperty.call(o,a)&&(o=td(o))!==null;);return o})(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},CC.apply(null,arguments)}function td(r){return td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},td(r)}function PC(r,e){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},PC(r,e)}function cs(r,e,t){return(e=QB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function QB(r){var e=(function(t){if(ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ed(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return ed(e)=="symbol"?e:e+""}var qi="HierarchicalLayout",Tm=function(r){return r!==void 0?Yi(r):r},mee=(function(){function r(n){var i;(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,r),cs(i=(function(u,l,c){return l=td(l),(function(f,h){if(h&&(ed(h)=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d})(f)})(u,ZB()?Reflect.construct(l,c||[],td(u).constructor):l.apply(u,c))})(this,r,[n]),"direction",void 0),cs(i,"packing",void 0),cs(i,"stateDisposers",void 0),cs(i,"oldComputing",void 0),cs(i,"computing",void 0),cs(i,"pendingLayoutData",void 0),cs(i,"worker",void 0),cs(i,"directionChanged",void 0),cs(i,"packingChanged",void 0),cs(i,"workersDisabled",void 0),i.direction=SC,i.packing=TC;var o=i.state,a=o.nodes,s=o.rels;return a.addChannel(qi),s.addChannel(qi),i.stateDisposers=[i.state.reaction(function(){return i.state.graphUpdates},function(){if(a.version!==void 0){var u=a.channels[qi],l=Object.values(u.adds).length>0,c=Object.values(u.removes).length>0,f=Object.values(u.updates),h=sg(f);i.shouldUpdate=i.shouldUpdate||l||c||h}if(s.version!==void 0){var d=s.channels[qi],v=Object.values(d.adds).length>0,p=Object.values(d.removes).length>0;i.shouldUpdate=i.shouldUpdate||v||p}})],i.shouldUpdate=!0,i.oldComputing=!1,i.computing=!1,i.workersDisabled=n.state.disableWebWorkers,i.setOptions(n),i.worker=BB("HierarchicalLayout",i.workersDisabled),i.pendingLayoutData=null,i.layout(a.items,a.idToItem,a.idToPosition,s.items),i}return(function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&PC(n,i)})(r,qB),e=r,t=[{key:"setOptions",value:function(n){if(n!==void 0&&(function(u){return Object.keys(u).every(function(l){return see.has(l)})})(n)){var i=n.direction,o=i===void 0?SC:i,a=n.packing,s=a===void 0?TC:a;Object.keys(hee).includes(o)&&(this.directionChanged=this.direction&&this.direction!==o,this.direction=o),dee.includes(s)&&(this.packingChanged=this.packing&&this.packing!==s,this.packing=s),this.shouldUpdate=this.shouldUpdate||this.directionChanged||this.packingChanged}}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||n){var i=this.state,o=i.nodes,a=i.rels,s=this.directionChanged,u=this.packingChanged,l=Object.values(o.channels[qi].adds).length>0,c=Object.values(a.channels[qi].adds).length>0,f=Object.values(o.channels[qi].removes).length>0,h=Object.values(a.channels[qi].removes).length>0,d=Object.values(o.channels[qi].updates),v=sg(d);(n||l||c||f||h||s||u||v)&&this.layout(o.items,o.idToItem,o.idToPosition,a.items),o.clearChannel(qi),a.clearChannel(qi),this.directionChanged=!1,this.packingChanged=!1}(function(p,m,y){var b=CC(td(p.prototype),"update",y);return typeof b=="function"?function(g){return b.apply(y,g)}:b})(r,0,this)([]),this.shouldUpdate=!1,this.oldComputing=this.computing}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(n,i,o,a){var s=this;if(this.worker){var u=Tm(n).map(function(y){return y.html,iT(y,vee)}),l=Tm(i),c={};Object.keys(l).forEach(function(y){var b=l[y],g=(b.html,iT(b,pee));c[y]=g});var f=Tm(a).map(function(y){return y.captionHtml,iT(y,gee)}),h=Tm(o),d=this.direction,v=this.packing,p=window.devicePixelRatio,m={nodes:u,nodeIds:c,idToPosition:h,rels:f,direction:d,packing:v,pixelRatio:p,forcedDelay:0};this.computing?this.pendingLayoutData=m:(this.worker.port.onmessage=function(y){var b=y.data,g=b.positions,_=b.parents,w=b.waypoints;s.computing&&(s.positions=g),s.parents=_,s.state.setWaypoints(w),s.pendingLayoutData!==null?(s.worker.port.postMessage(s.pendingLayoutData),s.pendingLayoutData=null):s.computing=!1,s.shouldUpdate=!0,s.startAnimation()},this.computing=!0,this.worker.port.postMessage(m))}else Pr.info("Hierarchical layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){var n,i;this.computing=!1,this.shouldUpdate=!1,(n=this.state.nodes)===null||n===void 0||n.clearChannel(qi),(i=this.state.rels)===null||i===void 0||i.clearChannel(qi)}},{key:"destroy",value:function(){var n;this.stateDisposers.forEach(function(i){i()}),this.state.nodes.removeChannel(qi),this.state.rels.removeChannel(qi),(n=this.worker)===null||n===void 0||n.port.close()}}],t&&yee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t})();function Ep(r){return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(r)}function bee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,JB(n.key),n)}}function fs(r,e,t){return(e=JB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function JB(r){var e=(function(t){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ep(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Ep(e)=="symbol"?e:e+""}var _ee=(function(){return r=function t(n,i){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),fs(this,"elementId",void 0),fs(this,"currentValue",void 0),fs(this,"startValue",void 0),fs(this,"currentTime",void 0),fs(this,"duration",void 0),fs(this,"status",void 0),fs(this,"endValue",void 0),fs(this,"startTime",void 0),fs(this,"endTime",void 0),fs(this,"hasNextAnimation",void 0),this.elementId=n,this.startValue=i,this.status=0,this.currentValue=i,this.duration=0},(e=[{key:"setDuration",value:function(t){this.duration=t,this.setEndTime(this.startTime+this.duration)}},{key:"getStatus",value:function(){return this.status}},{key:"advance",value:function(){if(this.status!==1)return!1;this.currentTime=new Date().getTime();var t,n=this.endTime-this.startTime;return(t=n>0?(this.currentTime-this.startTime)/n:1)>=1?(this.currentValue=this.endValue,this.status=2):(this.currentValue=this.startValue+t*(this.endValue-this.startValue),this.hasNextAnimation=!0),this.hasNextAnimation}},{key:"setEndValue",value:function(t){this.endValue!==t&&(t-this.currentValue!==0?(this.currentTime=new Date().getTime(),this.status=1,this.startValue=this.currentValue,this.endValue=t,this.startTime=this.currentTime,this.setEndTime(this.startTime+this.duration)):this.endValue=t)}},{key:"setEndTime",value:function(t){this.endTime=Math.max(t,this.startTime)}}])&&bee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Op(r){return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(r)}function gj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yj(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gj(Object(t),!0).forEach(function(n){Fc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,eU(n.key),n)}}function Fc(r,e,t){return(e=eU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function eU(r){var e=(function(t){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Op(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Op(e)=="symbol"?e:e+""}var Eee=(function(){return r=function t(){(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),Fc(this,"animations",void 0),Fc(this,"durations",void 0),Fc(this,"defaultDuration",void 0),Fc(this,"hasNextAnimation",void 0),Fc(this,"ignoreAnimationsFlag",void 0),this.animations=new Map,this.durations=[],this.durations[0]=0,this.durations[1]=0,this.defaultDuration=150,this.hasNextAnimation=!1,this.ignoreAnimationsFlag=!1},e=[{key:"advance",value:function(){var t=this;return this.hasNextAnimation=!1,this.animations.forEach(function(n){Object.values(n).forEach(function(i){i.advance()&&(t.hasNextAnimation=!0)})}),this.hasNextAnimation}},{key:"ignoreAnimations",value:function(t){this.ignoreAnimationsFlag=t}},{key:"setOptions",value:function(t){t.fadeDuration!==void 0&&(this.durations[0]=t.fadeDuration),t.sizeDuration!==void 0&&(this.durations[1]=t.sizeDuration)}},{key:"needsToRun",value:function(){return this.hasNextAnimation}},{key:"getValueForAnimationName",value:function(t,n,i){var o,a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(this.ignoreAnimationsFlag)return i;var u=(o=this.getById(t))!==null&&o!==void 0?o:{};if(u[n]===void 0){var l=s===1?this.createSizeAnimation(0,t,n):this.createFadeAnimation(0,t,n);l.setEndValue(i),a=l.currentValue}else{var c=u[n];if(c.currentValue===i)return i;c.setEndValue(i),a=c.currentValue}return this.hasNextAnimation=!0,a}},{key:"createAnimation",value:function(t,n,i){var o,a=new _ee(n,t),s=(o=this.animations.get(n))!==null&&o!==void 0?o:{};return this.animations.set(n,yj(yj({},s),{},Fc({},i,a))),a}},{key:"getById",value:function(t){return this.animations.get(t)}},{key:"createFadeAnimation",value:function(t,n,i){var o,a=this.createAnimation(t,n,i);return a.setDuration((o=this.durations[0])!==null&&o!==void 0?o:this.defaultDuration),a}},{key:"createSizeAnimation",value:function(t,n,i){var o,a=this.createAnimation(t,n,i);return a.setDuration((o=this.durations[1])!==null&&o!==void 0?o:this.defaultDuration),a}}],e&&wee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function xp(r){return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(r)}function Oee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,tU(n.key),n)}}function tU(r){var e=(function(t){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(xp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return xp(e)=="symbol"?e:e+""}var ta=64,xee=(function(){return r=function t(){var n,i,o;(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,o=void 0,(i=tU(i="cache"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.cache={}},e=[{key:"getImage",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.getOrCreateEntry(t),o=n?"inverted":"image",a=i[o];return a===void 0&&(a=this.loadImage(t),i[o]=a),this.drawIfNeeded(a,n),a.canvas}},{key:"getOrCreateEntry",value:function(t){return this.cache[t]===void 0&&(this.cache[t]={}),this.cache[t]}},{key:"invertCanvas",value:function(t){for(var n=t.getImageData(0,0,ta,ta),i=n.data,o=0;o<4096;o++){var a=4*o;i[a]^=255,i[a+1]^=255,i[a+2]^=255}t.putImageData(n,0,0)}},{key:"loadImage",value:function(t){var n=document.createElement("canvas");n.width=ta,n.height=ta;var i=new Image;return i.src=t,i.crossOrigin="anonymous",{canvas:n,image:i,drawn:!1}}},{key:"drawIfNeeded",value:function(t,n){var i=t.image,o=t.canvas;if(!t.drawn&&i.complete){var a=o.getContext("2d");try{a.drawImage(i,0,0,ta,ta)}catch(s){Pr.error("Failed to draw image",i.src,s),a.beginPath(),a.strokeStyle="black",a.rect(0,0,ta,ta),a.moveTo(0,0),a.lineTo(ta,ta),a.moveTo(0,ta),a.lineTo(ta,0),a.stroke(),a.closePath()}n&&this.invertCanvas(a),t.drawn=!0}}}],e&&Oee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();const See=xee;function Sp(r){return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(r)}function mj(r,e){if(r){if(typeof r=="string")return AC(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?AC(r,e):void 0}}function AC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Tee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,rU(n.key),n)}}function Vu(r,e,t){return(e=rU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rU(r){var e=(function(t){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Sp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Sp(e)=="symbol"?e:e+""}var Cee=(function(){return r=function t(n,i,o){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),Vu(this,"key",void 0),Vu(this,"rels",void 0),Vu(this,"waypointPath",void 0),Vu(this,"selfReferring",void 0),Vu(this,"fromId",void 0),Vu(this,"toId",void 0),Vu(this,"angles",void 0),Vu(this,"labelInfo",void 0),this.key=n,this.rels=new Map,this.selfReferring=i===o,this.fromId=i,this.toId=o,this.labelInfo={},this.angles=[]},e=[{key:"insert",value:function(t){this.rels.set(t.id,t)}},{key:"setLabelInfo",value:function(t,n){this.labelInfo[t]=n}},{key:"has",value:function(t){var n=t.id;return this.rels.has(n)}},{key:"remove",value:function(t){var n=t.id;if(this.rels.has(n)&&(this.rels.delete(n),this.size()>0)){var i=(function(o,a){return(function(s){if(Array.isArray(s))return s})(o)||(function(s,u){var l=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var c,f,h,d,v=[],p=!0,m=!1;try{if(h=(l=l.call(s)).next,u!==0)for(;!(p=(c=h.call(l)).done)&&(v.push(c.value),v.length!==u);p=!0);}catch(y){m=!0,f=y}finally{try{if(!p&&l.return!=null&&(d=l.return(),Object(d)!==d))return}finally{if(m)throw f}}return v}})(o,a)||mj(o,a)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()})(this.relArray(),1)[0];this.fromId=i.from,this.toId=i.to}}},{key:"size",value:function(){return this.rels.size}},{key:"relArray",value:function(){return Array.from(this.rels.values())}},{key:"maxFontSize",value:function(){if(this.size()===0)return 1;var t=this.relArray().map(function(n){return(0,jr.isNumber)(n.captionSize)?n.captionSize:1});return Math.max.apply(Math,(function(n){return(function(i){if(Array.isArray(i))return AC(i)})(n)||(function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)})(n)||mj(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()})(t))}},{key:"relIsOppositeDirection",value:function(t){var n=t.from,i=t.to,o=this.fromId,a=this.toId;return n!==o&&i!==a||n===a&&i===o}},{key:"indexOf",value:function(t){var n=t.id,i=Array.from(this.rels.keys());return this.rels.has(n)?i.indexOf(n):-1}},{key:"getRel",value:function(t){var n=this.relArray();return t<0||t>=n.length?null:n[t]}},{key:"setWaypoints",value:function(t){this.waypointPath=t}},{key:"setAngles",value:function(t){this.angles=t}}],e&&Tee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),bj=RB,_j=2*Math.PI/50,wj=.1*Math.PI;function Tp(r){return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(r)}function Ej(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=nU(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function Oj(r){return(function(e){if(Array.isArray(e))return RC(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||nU(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function nU(r,e){if(r){if(typeof r=="string")return RC(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?RC(r,e):void 0}}function RC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Pee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,iU(n.key),n)}}function xj(r,e,t){return(e=iU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function iU(r){var e=(function(t){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Tp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Tp(e)=="symbol"?e:e+""}var Aee=function(r){var e=[];if(r.length===0)e.push({size:2*Math.PI,start:0});else{for(var t=r.length-1;t>=0;t--){var n=void 0,i=void 0;t===0?(i=r[r.length-1],n=r[t]-r[r.length-1]+2*Math.PI):(i=r[t-1],n=r[t]-r[t-1]),e.push({size:n,start:i})}e.sort(function(o,a){return a.size-o.size})}return e},Ree=function(r,e){for(;e>r.length||r[0].size>2*r[e-1].size;)r.push({size:r[0].size/2,start:r[0].start}),r.push({size:r[0].size/2,start:r[0].start+r[0].size/2}),r.shift(),r.sort(function(t,n){return n.size-t.size});return r},Iee=(function(){return r=function t(n,i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),xj(this,"bundles",void 0),xj(this,"nodeToBundles",void 0),this.bundles={},this.nodeToBundles={};var o=n.reduce(function(a,s){return a[s.id]=s,a},{});this.updateData(o,{},{},i)},e=[{key:"getBundle",value:function(t){var n=this.bundles,i=this.nodeToBundles,o=this.generatePairId(t.from,t.to),a=n[o];return a===void 0&&(a=new Cee(o,t.from,t.to),n[o]=a,i[t.from]===void 0&&(i[t.from]=[]),i[t.to]===void 0&&(i[t.to]=[]),i[t.from].push(a),i[t.to].push(a)),a}},{key:"updateData",value:function(t,n,i,o){var a,s=this.bundles,u=this.nodeToBundles,l=function(w,x){var E=u[x].findIndex(function(O){return O===w});E!==-1&&u[x].splice(E,1),u[x].length===0&&delete u[x]},c=[].concat(Oj(Object.values(t)),Oj(Object.values(i))),f=Object.values(n),h=Ej(c);try{for(h.s();!(a=h.n()).done;){var d=a.value;this.getBundle(d).insert(d)}}catch(w){h.e(w)}finally{h.f()}for(var v=0,p=f;v<p.length;v++){var m=p[v],y=this.getBundle(m);y.remove(m),y.size()===0&&(delete s[y.key],l(y,m.from),l(y,m.to))}for(var b=0,g=Object.keys(s);b<g.length;b++){var _=s[g[b]];_.setWaypoints(o["".concat(_.fromId,"-").concat(_.toId)])}}},{key:"updatePositions",value:function(t){for(var n=this.nodeToBundles,i=0,o=Object.keys(t);i<o.length;i++){var a,s=o[i],u=(a=n[s])!==null&&a!==void 0?a:[];if(u.length!==0){var l=u.find(function(O){return O.selfReferring}),c=u.filter(function(O){return!O.selfReferring});if(l!==void 0){var f,h=[],d=Ej(c);try{for(d.s();!(f=d.n()).done;){var v=f.value,p=t[v.fromId],m=t[v.toId];if(p!==void 0&&m!==void 0)for(var y=_j*v.size(),b=p.id===s?Math.atan2(m.y-p.y,m.x-p.x):Math.atan2(p.y-m.y,p.x-m.x),g=0;g<v.size();g++)h.push(b+y/2-g*_j);else{var _=p===void 0?v.fromId:v.toId;Pr.warn("Arrowbundler: Node with id ".concat(_," is not in position map"))}}}catch(O){d.e(O)}finally{d.f()}var w=h.map(function(O){return(O+2*Math.PI)%(2*Math.PI)}).sort(),x=Aee(w);Ree(x,l.size());var E=x.map(function(O){return O.start+O.size/2}).slice(0,l.size());l.setAngles(E)}}}}},{key:"generatePairId",value:function(t,n){return[t.toString(),n.toString()].sort(function(i,o){return i.localeCompare(o)}).join("-")}}],e&&Pee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Cp(r){return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(r)}function Sj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function kee(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,oU(n.key),n)}}function Bc(r,e,t){return(e=oU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function oU(r){var e=(function(t){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Cp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Cp(e)=="symbol"?e:e+""}var Db=function(r,e){return(0,jr.isFinite)(r.x)&&(0,jr.isFinite)(r.y)&&(0,jr.isFinite)(e.x)&&(0,jr.isFinite)(e.y)},Cm=function(r,e){if(r===void 0||e===void 0||!Db(r,e))return!1;var t=e.x-r.x,n=e.y-r.y,i=Vr();return t*t+n*n<100*i*i},Ai=(function(){return r=function t(n,i){(function(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")})(this,t),Bc(this,"p1",void 0),Bc(this,"p2",void 0),Bc(this,"unit",void 0),Bc(this,"norm",void 0),Bc(this,"length",void 0),Bc(this,"vector",void 0),this.p1=n,this.p2=i,this.vector=this.getVector(),this.length=this.getLength(),this.unit=this.getUnitVector(),this.norm=this.getUnitNormalVector()},e=[{key:"getVector",value:function(){return{x:this.p2.x-this.p1.x,y:this.p2.y-this.p1.y}}},{key:"getLength",value:function(){var t=this.vector,n=t.x,i=t.y;return Math.sqrt(n*n+i*i)}},{key:"getUnitVector",value:function(){var t=this.vector,n=this.length;return{x:t.x/n,y:t.y/n}}},{key:"getUnitNormalVector",value:function(){return{x:this.unit.y,y:-this.unit.x}}}],e&&kee(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),cP=function(r,e,t){var n={x:e.x-r.x,y:e.y-r.y},i=(function(l,c){var f=(l.x*c.x+l.y*c.y)/(c.x*c.x+c.y*c.y);return(0,jr.clamp)(f,0,1)})({x:t.x-r.x,y:t.y-r.y},n),o=r.x+i*n.x,a=r.y+i*n.y,s=o-t.x,u=a-t.y;return Math.sqrt(s*s+u*u)},Dee=function(r,e,t,n){if(e.x===t.x&&e.y===t.y)return e;var i=e.y-r.y,o=r.x-e.x,a=i*r.x+o*r.y,s=n.y-t.y,u=t.x-n.x,l=s*t.x+u*t.y,c=i*u-s*o;return c===0?null:{x:(u*a-o*l)/c,y:(i*l-s*a)/c}},oT=function(r,e,t,n){var i,o,a,s=1e9,u=(function(c){for(var f=1;f<arguments.length;f++){var h=arguments[f]!=null?arguments[f]:{};f%2?Sj(Object(h),!0).forEach(function(d){Bc(c,d,h[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(h)):Sj(Object(h)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(h,d))})}return c})({},r),l={x:0,y:0};for(o=1;o<10;o++)a=.1*o,l.x=Math.pow(1-a,2)*r.x+2*a*(1-a)*t.x+Math.pow(a,2)*e.x,l.y=Math.pow(1-a,2)*r.y+2*a*(1-a)*t.y+Math.pow(a,2)*e.y,o>0&&(s=(i=cP(u,l,n))<s?i:s),u.x=l.x,u.y=l.y;return s},Mee=pn(3269),aU=pn.n(Mee);function Pp(r){return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(r)}function Uv(r){return(function(e){if(Array.isArray(e))return IC(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||sU(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Tj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function j0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(t),!0).forEach(function(n){Lee(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Lee(r,e,t){return(e=(function(n){var i=(function(o){if(Pp(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Pp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Pp(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sU(r,e){if(r){if(typeof r=="string")return IC(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?IC(r,e):void 0}}function IC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var F0="",Cj=function(r){return!(!r||!isNaN(Number(r))||r.toLowerCase()===r.toUpperCase())&&r===r.toUpperCase()},Nee=function(r){var e=r[r.length-1],t=r[r.length-2];return!(!e||!isNaN(Number(e))||e.toLowerCase()===e.toUpperCase())&&!(!t||!isNaN(Number(t))||t.toLowerCase()===t.toUpperCase())&&Cj(e)&&!Cj(t)},jee=function(r){return` 	
\r\v`.includes(r)},kC=function(r,e,t,n){for(var i,o=arguments.length>4&&arguments[4]!==void 0&&arguments[4],a=[],s=[],u=0,l=0,c=!1,f=!1,h=0;h<n;h++)a[h]=t(h,n);for(var d,v=function(){i=r.slice(u,p);var m,y=e(i),b=a[l];if(y>b||(m=r[p-1],`
\r\v`.includes(m))){if(!(l<n-1)){if(o)return{v:[]};for(var g=p,_=function(){return r[g-1]};y>b;){for(g-=1;jee(_());)g-=1;if(!(g-u>1)){i="",f=!0,c=!1;break}i=r.slice(u,g),y=e(i),f=!0,c=!1}return s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:c},{v:s}}c=!1,f=!1;var w=(function(E){var O=E.length,C=Math.min(O-1,3);if(O===1)return{hyphen:!1,cnt:0};for(var A=0;A<C;A++){var R=E[E.length-(A+1)];if(R===" "||R.toLowerCase()===R.toUpperCase())return{hyphen:!1,cnt:A+1};var k=E.slice(0,E.length-A);if(Nee(k))return{hyphen:!1,cnt:A+1}}return{hyphen:!0,cnt:1}})(i),x=p-w.cnt;if(w.hyphen)for(i=r.slice(u,x),y=e(i),c=!0;y>b;){if(!(x-u>1)){i=r[u],x=u+1,y=e(i),c=!1;break}x-=1,i=r.slice(u,x),y=e(i),c=!0}else i=(i=r.slice(u,x)).trim();s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:c},u=x,l+=1}},p=1;p<=r.length;p++)if(d=v())return d.v;return i=r.slice(u,r.length),s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:!1},s},Pj=function(r,e,t,n,i,o,a,s){r.font="bold ".concat(n,"px ").concat(t).replace(/"/g,"");for(var u=function(v){var p;return(p=r.measureText(v))===null||p===void 0?void 0:p.width},l=o?(a<4?["",""]:[""]).length:0,c=function(v,p){return(function(m,y,b){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"top",_=.98*b,w=.89*b,x=.95*b;return y===1?_:y===2?x:y===3&&g==="top"?m===0||m===2?w:_:y===4&&g==="top"?m===0||m===3?.78*b:x:y===5&&g==="top"?m===0||m===4?.65*b:m===1||m===3?w:x:_})(v+l,p+l,i)},f=1,h=[],d=function(){if((h=(function(p,m,y,b){var g,_=p.split(/\s/g).filter(function(D){return D.length>0}),w=[],x=null,E=function(D){return m(D)>y(w.length,b)},O=(function(D){var L=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!L){if(Array.isArray(D)||(L=sU(D))){L&&(D=L);var j=0,q=function(){};return{s:q,n:function(){return j>=D.length?{done:!0}:{done:!1,value:D[j++]}},e:function(H){throw H},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,U=!0,W=!1;return{s:function(){L=L.call(D)},n:function(){var H=L.next();return U=H.done,H},e:function(H){W=!0,B=H},f:function(){try{U||L.return==null||L.return()}finally{if(W)throw B}}}})(_);try{for(O.s();!(g=O.n()).done;){var C=g.value,A=x?"".concat(x," ").concat(C):C;if(m(A)<y(w.length,b))x=A;else{if(x!==null){var R=E(x);w.push({text:x,overflowed:R})}if(x=C,w.length>b)return[]}}}catch(D){O.e(D)}finally{O.f()}if(x){var k=E(x);w.push({text:x,overflowed:k})}return w.length<=b?w:[]})(e,u,c,f)).length===0)h=kC(e,u,c,f,a>f);else if(h.some(function(p){return p.overflowed})){var v=f;h=h.reduce(function(p,m){var y=a-p.length;if(y===0){var b=p[p.length-1];return b.text.endsWith(F0)||(u(b.text)+u(F0)>c(p.length,v)?(p[p.length-1].text=b.text.slice(0,-2),p[p.length-1].hasEllipsisChar=!0):(p[p.length-1].text=b.text,p[p.length-1].hasEllipsisChar=!0)),p}if(m.overflowed){var g=kC(m.text,u,c,y);p=p.concat(g)}else p.push({text:m.text,hasEllipsisChar:!1,hasHyphenChar:!1});return p},[])}else h=h.map(function(p){return j0(j0({},p),{},{hasEllipsisChar:!1,hasHyphenChar:!1})});f+=1};h.length===0;)d();return Array.from(h)},uU=function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(e,t,n){var i=t.value;if(i){var o="".concat(n>0&&e.length?", ":"").concat(i);return[].concat(Uv(e),[j0(j0({},t),{},{value:o,chars:o.split("").map(function(a,s){var u,l;return n!==0&&e.length?s<2?null:Uv((u=t.styles)!==null&&u!==void 0?u:[]):Uv((l=t.styles)!==null&&l!==void 0?l:[])})})])}return[]},[]);return{stylesPerChar:r.reduce(function(e,t){return[].concat(Uv(e),Uv(t.chars))},[]),fullCaption:r.map(function(e){return e.value}).join("")}};function aT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Fee=[[.04,1],[100,2]],l0=[[.8,1.1],[3,1.6],[8,2.5]],Bee=[[l0[0][0],1],[100,1.25]],Dc=function(r,e){if(r.includes("rgba"))return r;if(r.includes("rgb")){var t=r.substr(r.indexOf("(")+1).replace(")","").split(",");return"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(e,")")}var n=aU().get.rgb(r);return n===null?r:"rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(e,")")},Wu=function(r,e,t,n){var i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=arguments.length>5&&arguments[5]!==void 0&&arguments[5],a=n.headPosition,s=n.headAngle,u=n.headHeight,l=n.headChinHeight,c=n.headWidth,f=Math.cos(s),h=Math.sin(s),d=function(m,y){return{x:a.x+m*f-y*h,y:a.y+m*h+y*f}},v=[d(l-u,0),d(-u,c/2),d(0,0),d(-u,-c/2)],p={lineWidth:r.lineWidth,strokeStyle:r.strokeStyle,fillStyle:r.fillStyle};r.lineWidth=e,r.strokeStyle=t,r.fillStyle=t,(function(m,y,b,g){if(m.beginPath(),y.length>0){var _=y[0];m.moveTo(_.x,_.y)}for(var w=1;w<y.length;w++){var x=y[w];m.lineTo(x.x,x.y)}m.closePath(),b&&m.fill(),g&&m.stroke()})(r,v,i,o),r.lineWidth=p.lineWidth,r.strokeStyle=p.strokeStyle,r.fillStyle=p.fillStyle},Uee=function(r,e,t,n,i){var o=n;i.forEach(function(a){var s=a.width,u=a.color,l=o+s;r.beginPath(),r.fillStyle=u,r.arc(e,t,l,0,2*Math.PI,!1),r.arc(e,t,o,2*Math.PI,0,!0),r.fill(),r.closePath(),o=l})},lU=function(r,e,t,n){r.beginPath(),r.arc(e,t,n,0,2*Math.PI,!1),r.closePath()},Aj=function(r,e,t,n,i){r.beginPath(),r.fillStyle=n,lU(r,e,t,i),r.fill(),r.closePath()};function sT(r,e){var t=e.find(function(i){return r<i[0]}),n=e[e.length-1][1];return t!==void 0?t[1]:n}var Rj=function(r,e,t,n,i,o,a,s,u,l){var c=n,f=0,h=0,d="".concat(i,"px ").concat(o),v="normal ".concat(d);e.forEach(function(p){var m;r.font=v;var y,b=-((m=r.measureText(p.text))===null||m===void 0?void 0:m.width)/2,g=p.text?(function(_){if(Array.isArray(_))return aT(_)})(y=p.text)||(function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)})(y)||(function(_,w){if(_){if(typeof _=="string")return aT(_,w);var x={}.toString.call(_).slice(8,-1);return x==="Object"&&_.constructor&&(x=_.constructor.name),x==="Map"||x==="Set"?Array.from(_):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?aT(_,w):void 0}})(y)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})():[];p.hasHyphenChar||p.hasEllipsisChar||g.push(" "),g.forEach(function(_){var w,x=r.measureText(_).width,E=(w=t[h])!==null&&w!==void 0?w:[],O=E.includes("bold"),C=E.includes("italic");r.font=O&&C?"italic 600 ".concat(d):C?"italic 400 ".concat(d):O?"bold ".concat(d):v,E.includes("underline")&&r.fillRect(s+b+f,u+c+.2,x,.2),p.hasEllipsisChar?r.fillText(_,s+b+f-l/2,u+c):r.fillText(_,s+b+f,u+c),f+=x,h+=1}),r.font=v,p.hasHyphenChar&&r.fillText("",s+b+f,u+c),p.hasEllipsisChar&&r.fillText(F0,s+b+f-l/2,u+c),f=0,c+=a})},Bh=function(r,e){return{x:r.x+e.x,y:r.y+e.y}},cU=function(r,e){return{x:r.x-e.x,y:r.y-e.y}},kh=function(r,e){return{x:r.x*e,y:r.y*e}},qee=function(r,e){return r.x*e.x+r.y*e.y},tp=function(r,e){return(function(t){return Math.sqrt(t.x*t.x+t.y*t.y)})(cU(r,e))},Ij=function(r,e){return{x:Math.cos(r)*e,y:Math.sin(r)*e}};function fU(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return kj(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?kj(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function kj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var c0=2*Math.PI,sl=Math.PI/2,Dj=function(r,e,t,n,i,o){var a={x:(r.x+e.x)/2,y:(r.y+e.y)/2},s={x:r.x,y:r.y},u={x:e.x,y:e.y},l=new Ai(u,s),c=(function(h,d){var v=0;return h&&(v+=h),d&&(v-=d),v})(n,t);a.x+=c/2*l.unit.x,a.y+=c/2*l.unit.y;var f=o.size()/2-o.indexOf(i);return a.x+=f*l.unit.x,a.y+=f*l.unit.y,a},DC=function(r){var e=Vr(),t=r.size,n=r.selected;return((t??kn)+4+(n===!0?4:0))*e},Pm=function(r,e){var t=Vr();r.shadowColor=e.color,r.shadowBlur=e.width*t,r.shadowOffsetX=0,r.shadowOffsetY=0},Am=function(r){r.shadowColor="rgba(0,0,0,0)",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0},fP=function(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0&&arguments[5],a=function(j){var q=arguments.length>1&&arguments[1]!==void 0&&arguments[1],B=j.norm.x,U=j.norm.y;return q?{x:-B,y:-U}:j.norm},s=Vr(),u=e.indexOf(r),l=(e.size()-1)/2,c=u>l,f=Math.abs(u-l),h=i?17*e.maxFontSize():8,d=(e.size()-1)*h*s,v=(function(j,q,B,U,W,H,Y){var Z,ce=arguments.length>7&&arguments[7]!==void 0&&arguments[7],$=Vr(),K=j.size(),ie=K>1,ae=j.relIsOppositeDirection(H),le=ae?B:q,te=ae?q:B,ee=j.waypointPath,re=ee==null?void 0:ee.points,he=ee==null?void 0:ee.from,ve=ee==null?void 0:ee.to,_e=Cm(le,he)&&Cm(te,ve)||Cm(te,he)&&Cm(le,ve),Oe=_e?re[1]:null,Pe=_e?re[re.length-2]:null,me=DC(le),F=DC(te),G=function(Gt,Pt){return Math.atan2(Gt.y-Pt.y,Gt.x-Pt.x)},X=Math.max(Math.PI,c0/(K/2)),se=ie?U*X*(Y?1:-1)/((Z=le.size)!==null&&Z!==void 0?Z:kn):0,pe=G(_e?Oe:te,le),ge=_e?G(te,Pe):pe,xe=function(Gt,Pt,ur,nr){return{x:Gt.x+Math.cos(Pt)*ur*(nr?-1:1),y:Gt.y+Math.sin(Pt)*ur*(nr?-1:1)}},Ne=function(Gt,Pt){return xe(le,pe+Gt,Pt,!1)},He=function(Gt,Pt){return xe(te,ge-Gt,Pt,!0)},at=function(Gt,Pt){return{x:Gt.x+(Pt.x-Gt.x)/2,y:Gt.y+(Pt.y-Gt.y)/2}},Ze=function(Gt,Pt){return Math.sqrt((Gt.x-Pt.x)*(Gt.x-Pt.x)+(Gt.y-Pt.y)*(Gt.y-Pt.y))*$},et=Ne(se,me),Qe=He(se,F),Xe=ie?Ne(0,me):null,ke=ie?He(0,F):null,oe=200*$,Ee=[];if(_e){var Re=Ze(et,Oe)<oe;if(ie&&!Re){var De=at(Xe,Oe);Ee.push(new Ai(et,De)),Ee.push(new Ai(De,Oe))}else Ee.push(new Ai(et,Oe));for(var Me=2;Me<re.length-1;Me++)Ee.push(new Ai(re[Me-1],re[Me]));var it=Ze(Qe,Pe)<oe;if(ie&&!it){var Fe=at(ke,Pe);Ee.push(new Ai(Pe,Fe)),Ee.push(new Ai(Fe,Qe))}else Ee.push(new Ai(Pe,Qe))}else{var ut=ie?Ze(Xe,ke):0;if(ie&&ut>2*(30*$+Math.min(me,F)))if(ce){var rt=Dj(le,te,me,F,H,j);Ee.push(new Ai(et,rt)),Ee.push(new Ai(rt,Qe))}else{var ft=U*W,xt=30+me,yt=Math.sqrt(xt*xt+ft*ft),nt=30+F,It=Math.sqrt(nt*nt+ft*ft),St=Ne(0,yt),or=He(0,It);Ee.push(new Ai(et,St)),Ee.push(new Ai(St,or)),Ee.push(new Ai(or,Qe))}else if(ut>(me+F)/2){var rr=Dj(le,te,me,F,H,j);Ee.push(new Ai(et,rr)),Ee.push(new Ai(rr,Qe))}else Ee.push(new Ai(et,Qe))}return Ee})(e,t,n,f,h,r,c,o),p=[],m=v[0],y=a(m,c);p.push({x:m.p1.x+y.x,y:m.p1.y+y.y});for(var b=1;b<v.length;b++)if(e.size()===1)p.push(v[b-1].p2);else{var g=v[b-1],_=v[b],w=a(g,c),x=a(_,c),E=Bh(g.p1,kh(w,d/2)),O=Bh(g.p2,kh(w,d/2)),C=Bh(_.p1,kh(x,d/2)),A=Bh(_.p2,kh(x,d/2)),R=null;qee(w,x)<.99&&(R=Dee(E,O,C,A));var k=R!==null?cU(R,g.p2):kh(w,d/2);p.push(Bh(g.p2,kh(k,f/l)))}var D=v[v.length-1],L=a(D,c);return p.push({x:D.p2.x+L.x,y:D.p2.y+L.y}),e.relIsOppositeDirection(r)?p.reverse():p},Mj=function(r,e,t,n,i,o,a,s){var u,l=arguments.length>8&&arguments[8]!==void 0&&arguments[8],c=Vr(),f=i.selected,h=i.captions,d=h===void 0?[]:h,v=i.caption,p=v===void 0?"":v,m=i.width,y=i.disabled,b=i.captionAlign,g=b===void 0?"top":b,_=i.captionSize,w=_===void 0?1:_,x=d.length>0?(u=uU(d))===null||u===void 0?void 0:u.fullCaption:p;if(x!==void 0){var E=6*w*c,O=f===!0?"bold":"normal",C=x;r.fillStyle=y===!0?a.fontColor:s,r.font="".concat(O," ").concat(E,"px ").concat('"Open Sans", sans-serif');var A=function(K){return r.measureText(K).width},R=(m??1)*(f===!0?1.5:1),k=A(C);if(k>n){var D=kC(C,A,function(){return n},1,!1)[0];C=D.hasEllipsisChar===!0?"".concat(D.text,"..."):C,k=n}var L=Math.cos(t),j=Math.sin(t),q={x:e.x,y:e.y},B=q.x,U=q.y,W=t;l&&(W=t-sl,B+=2*E*L,U+=2*E*j,W-=sl);var H=(1+w)*c,Y=g==="bottom"?E/2+R+H:-(R+H);r.translate(B,U),r.rotate(W),r.fillText(C,-k/2,Y),r.rotate(-W),r.translate(-B,-U);var Z=2*Y*Math.sin(t),ce=2*Y*Math.cos(t),$={position:{x:e.x-Z,y:e.y+ce},rotation:l?t-Math.PI:t,width:n/c,height:(E+H)/c};o.setLabelInfo(i.id,$)}},Rm=function(r,e,t,n,i){if(r.beginPath(),r.moveTo(e[0].x,e[0].y),i&&e.length>2){for(var o=1;o<e.length-2;){var a=(e[o].x+e[o+1].x)/2,s=(e[o].y+e[o+1].y)/2;r.quadraticCurveTo(e[o].x,e[o].y,a,s),o+=1}r.quadraticCurveTo(e[o].x,e[o].y,e[o+1].x,e[o+1].y)}else for(var u=1;u<e.length;u++)r.lineTo(e[u].x,e[u].y);r.lineWidth=t,r.strokeStyle=n,r.lineCap="round",r.stroke()},uT=function(r){return r.rings[0].width*Vr()*1.5},Lj=function(r){return 6*r*Vr()},Nj=function(r,e,t){var n,i;return{widthAlign:e/2*((n=r[0])!==null&&n!==void 0?n:0),heightAlign:t/2*((i=r[1])!==null&&i!==void 0?i:0)}},hP=function(r,e,t){var n,i,o=t.indexOf(r),a=(n=t.angles[o])!==null&&n!==void 0?n:0,s=a-wj/2,u=a+wj/2,l=(i=r.width)!==null&&i!==void 0?i:1,c=Vr(),f=DC(e),h={x:e.x+Math.cos(s)*(f+l/2),y:e.y+Math.sin(s)*(f+l/2)},d={x:e.x+Math.cos(u)*(f+l/2),y:e.y+Math.sin(u)*(f+l/2)},v={x:e.x+Math.cos(a)*(f+35*c),y:e.y+Math.sin(a)*(f+35*c)};return{startAngle:s,endAngle:u,startPoint:h,endPoint:d,apexPoint:v,control1Point:{x:v.x+25*Math.cos(a-sl)*c/2,y:v.y+25*Math.sin(a-sl)*c/2},control2Point:{x:v.x+25*Math.cos(a+sl)*c/2,y:v.y+25*Math.sin(a+sl)*c/2}}},Im=function(r,e,t,n,i,o){r.beginPath(),r.moveTo(e.x,e.y),r.quadraticCurveTo(i.x,i.y,n.x,n.y),r.quadraticCurveTo(o.x,o.y,t.x,t.y),r.stroke()},zee=function(r,e,t,n,i,o,a,s,u,l){var c=!(arguments.length>10&&arguments[10]!==void 0)||arguments[10];Db(t,n)&&(t.id===n.id?(function(f,h,d,v,p,m,y,b){var g=arguments.length>8&&arguments[8]!==void 0?arguments[8]:bj,_=h.overlayIcon,w=h.selected,x=h.width,E=h.hovered,O=h.disabled,C=h.color,A=hP(h,d,v),R=A.startPoint,k=A.endPoint,D=A.apexPoint,L=A.control1Point,j=A.control2Point,q=y.rings,B=y.shadow,U=Vr(),W=q[0].color,H=q[1].color,Y=q[0].width*U,Z=q[1].width*U,ce=40*U,$=(x??1)*U,K=$>1?$/2:1,ie=9*K,ae=2*K,le=7*K,te=w===!0,ee=O===!0,re=_!==void 0,he=Math.atan2(k.y-j.y,k.x-j.x),ve=te?Y*Math.sqrt(1+2*ie/le*(2*ie/le)):0,_e={x:k.x-Math.cos(he)*(.5*ie-ae+ve),y:k.y-Math.sin(he)*(.5*ie-ae+ve)},Oe={headPosition:{x:k.x+Math.cos(he)*(.5*ie-ae-ve),y:k.y+Math.sin(he)*(.5*ie-ae-ve)},headAngle:he,headHeight:ie,headChinHeight:ae,headWidth:le};if(f.save(),f.lineCap="round",te&&(Pm(f,B),f.lineWidth=$+Z,f.strokeStyle=H,Im(f,R,_e,D,L,j),Wu(f,Z,H,Oe,!1,!0),Am(f),f.lineWidth=$+Y,f.strokeStyle=W,Im(f,R,_e,D,L,j),Wu(f,Y,W,Oe,!1,!0)),f.lineWidth=$,E===!0&&!te&&!ee){var Pe=B.color;Pm(f,B),f.strokeStyle=Pe,f.fillStyle=Pe,Im(f,R,_e,D,L,j),Wu(f,$,Pe,Oe),Am(f)}var me=ee?b.color:C??g;if(f.fillStyle=me,f.strokeStyle=me,Im(f,R,_e,D,L,j),Wu(f,$,me,Oe),m||re){var F,G=v.indexOf(h),X=(F=v.angles[G])!==null&&F!==void 0?F:0,se=D.x-Math.cos(he)*(ve/4),pe=D.y-Math.sin(he)*(ve/4),ge=(X+sl)%c0,xe=(X+c0)%c0<Math.PI;if(m&&Mj(f,{x:se,y:pe},ge,ce,h,v,b,g,xe),re){var Ne=_.position,He=Ne===void 0?[0,0]:Ne,at=_.url,Ze=_.size,et=Lj(Ze===void 0?1:Ze),Qe=Nj(He,ce,et),Xe=Qe.widthAlign,ke=Qe.heightAlign+(te?uT(y):0)*(He[1]<0?-1:1);f.save(),f.translate(se,pe),xe?(f.rotate(ge-Math.PI),f.translate(2*-Xe,2*-ke)):f.rotate(ge);var oe=et/2,Ee=-oe+Xe,Re=-oe+ke;f.drawImage(p.getImage(at),Ee,Re,et,et),f.restore()}}f.restore()})(r,e,t,i,o,a,s,u,l):(function(f,h,d,v,p,m,y,b,g,_){var w=arguments.length>10&&arguments[10]!==void 0?arguments[10]:bj,x=h.overlayIcon,E=h.color,O=h.disabled,C=h.selected,A=h.width,R=h.hovered,k=h.captionAlign,D=C===!0,L=O===!0,j=x!==void 0,q=g.rings,B=g.shadow,U=fP(h,p,d,v,y,b),W=Vr(),H=(function(Kr){var Dt,fr=Kr.selected===!0?1.5:1;return((Dt=Kr.width)!==null&&Dt!==void 0?Dt:1)*fr*Vr()})(h),Y=L?_.color:E??w,Z=q[0].width*W,ce=q[1].width*W,$=W*(A>1?A/2:1),K=9*$,ie=2*$,ae=7*$,le=tp(U[U.length-2],U[U.length-1]),te=2*K,ee=D?Z*Math.sqrt(1+te/ae*(te/ae)):0,re=2-ee,he=Math.floor(U.length/2);U.length>2&&D&&le<K+ee-ie&&(re+=le,ee-=le/2+ie,U.pop(),he=Math.floor(U.length/2));var ve,_e,Oe=U[U.length-2],Pe=U[U.length-1],me=(ve=Oe,_e=Pe,Math.atan2(_e.y-ve.y,_e.x-ve.x)),F=K/2+ee,G=Math.cos(me),X=Math.sin(me);U[U.length-1]={x:Pe.x-G*F,y:Pe.y-X*F};var se,pe={headPosition:{x:Pe.x+G*re,y:Pe.y+X*re},headAngle:me,headHeight:K,headChinHeight:ie,headWidth:ae},ge=fU(U);try{for(ge.s();!(se=ge.n()).done;){var xe=se.value;xe.x=Math.round(xe.x),xe.y=Math.round(xe.y)}}catch(Kr){ge.e(Kr)}finally{ge.f()}if(f.save(),D){var Ne=q[0].color,He=q[1].color,at=Math.atan2(U[1].y-U[0].y,U[1].x-U[0].x),Ze=Ij(at,uT(g));U[0]=Bh(U[0],Ze),Pm(f,B),Rm(f,U,H+ce,He,b),Wu(f,ce,He,pe,!1,!0),Am(f),Rm(f,U,H+Z,Ne,b),Wu(f,Z,Ne,pe,!1,!0)}if(R===!0&&!D&&!L){var et=B.color;Pm(f,B),Rm(f,U,H,et,b),Wu(f,H,et,pe),Am(f)}if(Rm(f,U,H,Y,b),Wu(f,H,Y,pe),y||j){var Qe,Xe,ke,oe,Ee,Re=d.x>v.x,De=U[he];1&~U.length?(Qe=U[Re?he:he-1],Xe=U[Re?he-1:he],ke=(Qe.x+Xe.x)/2,oe=(Qe.y+Xe.y)/2,Ee=Math.atan2(Xe.y-Qe.y,Xe.x-Qe.x)):(Qe=U[Re?he+1:he-1],Xe=U[Re?he-1:he+1],b?(ke=(De.x+(Qe.x+Xe.x)/2)/2,oe=(De.y+(Qe.y+Xe.y)/2)/2,Ee=Re?Math.atan2(d.y-v.y,d.x-v.x):Math.atan2(v.y-d.y,v.x-d.x)):(tp(De,Qe)>tp(De,Xe)?Xe=De:Qe=De,ke=(Qe.x+Xe.x)/2,oe=(Qe.y+Xe.y)/2,Ee=Math.atan2(Xe.y-Qe.y,Xe.x-Qe.x)));var Me=D?Ij(Ee+sl,uT(g)):{x:0,y:0},it=tp(Qe,Xe);if(y){var Fe=k==="bottom"?1:-1,ut={x:ke+Me.x*Fe,y:oe+Me.y*Fe};Mj(f,ut,Ee,it,h,p,_,w)}if(j){var rt=x.position,ft=rt===void 0?[0,0]:rt,xt=x.url,yt=x.size,nt=Lj(yt===void 0?1:yt),It=Nj(ft,it,nt),St=It.widthAlign,or=It.heightAlign,rr=ft[1]<0?-1:1,Gt=Me.x*rr,Pt=Me.y*rr,ur=nt/2;f.translate(ke,oe),f.rotate(Ee);var nr=-ur+Gt+St,Ir=-ur+Pt+or;f.drawImage(m.getImage(xt),nr,Ir,nt,nt),f.rotate(-Ee),f.translate(-ke,-oe)}}f.restore()})(r,e,t,n,i,o,a,c,s,u,l))},Gee=function(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=arguments.length>5&&arguments[5]!==void 0&&arguments[5];return Db(t,n)?t.id===n.id?(function(a,s,u){for(var l=hP(a,s,u),c={left:1/0,top:1/0,right:-1/0,bottom:-1/0},f=["startPoint","endPoint","apexPoint","control1Point","control2Point"],h=0;h<f.length;h++){var d=l[f[h]],v=d.x,p=d.y;v<c.left&&(c.left=v),v>c.right&&(c.right=v),p<c.top&&(c.top=p),p>c.bottom&&(c.bottom=p)}return c})(r,t,e):(function(a,s,u,l,c,f){var h,d={left:1/0,top:1/0,right:-1/0,bottom:-1/0},v=fU(fP(a,s,u,l,c,f));try{for(v.s();!(h=v.n()).done;){var p=h.value,m=p.x,y=p.y;m<d.left&&(d.left=m),m>d.right&&(d.right=m),y<d.top&&(d.top=y),y>d.bottom&&(d.bottom=y)}}catch(b){v.e(b)}finally{v.f()}return d})(r,e,t,n,i,o):null};function B0(r){return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(r)}var Vee=/^\s+/,Wee=/\s+$/;function Et(r,e){if(e=e||{},(r=r||"")instanceof Et)return r;if(!(this instanceof Et))return new Et(r,e);var t=(function(n){var i,o,a,s={r:0,g:0,b:0},u=1,l=null,c=null,f=null,h=!1,d=!1;return typeof n=="string"&&(n=(function(v){v=v.replace(Vee,"").replace(Wee,"").toLowerCase();var p,m=!1;if(MC[v])v=MC[v],m=!0;else if(v=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(p=xa.rgb.exec(v))?{r:p[1],g:p[2],b:p[3]}:(p=xa.rgba.exec(v))?{r:p[1],g:p[2],b:p[3],a:p[4]}:(p=xa.hsl.exec(v))?{h:p[1],s:p[2],l:p[3]}:(p=xa.hsla.exec(v))?{h:p[1],s:p[2],l:p[3],a:p[4]}:(p=xa.hsv.exec(v))?{h:p[1],s:p[2],v:p[3]}:(p=xa.hsva.exec(v))?{h:p[1],s:p[2],v:p[3],a:p[4]}:(p=xa.hex8.exec(v))?{r:ko(p[1]),g:ko(p[2]),b:ko(p[3]),a:zj(p[4]),format:m?"name":"hex8"}:(p=xa.hex6.exec(v))?{r:ko(p[1]),g:ko(p[2]),b:ko(p[3]),format:m?"name":"hex"}:(p=xa.hex4.exec(v))?{r:ko(p[1]+""+p[1]),g:ko(p[2]+""+p[2]),b:ko(p[3]+""+p[3]),a:zj(p[4]+""+p[4]),format:m?"name":"hex8"}:!!(p=xa.hex3.exec(v))&&{r:ko(p[1]+""+p[1]),g:ko(p[2]+""+p[2]),b:ko(p[3]+""+p[3]),format:m?"name":"hex"}})(n)),B0(n)=="object"&&(Vs(n.r)&&Vs(n.g)&&Vs(n.b)?(i=n.r,o=n.g,a=n.b,s={r:255*sn(i,255),g:255*sn(o,255),b:255*sn(a,255)},h=!0,d=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Vs(n.h)&&Vs(n.s)&&Vs(n.v)?(l=rp(n.s),c=rp(n.v),s=(function(v,p,m){v=6*sn(v,360),p=sn(p,100),m=sn(m,100);var y=Math.floor(v),b=v-y,g=m*(1-p),_=m*(1-b*p),w=m*(1-(1-b)*p),x=y%6;return{r:255*[m,_,g,g,w,m][x],g:255*[w,m,m,_,g,g][x],b:255*[g,g,w,m,m,_][x]}})(n.h,l,c),h=!0,d="hsv"):Vs(n.h)&&Vs(n.s)&&Vs(n.l)&&(l=rp(n.s),f=rp(n.l),s=(function(v,p,m){var y,b,g;function _(E,O,C){return C<0&&(C+=1),C>1&&(C-=1),C<1/6?E+6*(O-E)*C:C<.5?O:C<2/3?E+(O-E)*(2/3-C)*6:E}if(v=sn(v,360),p=sn(p,100),m=sn(m,100),p===0)y=b=g=m;else{var w=m<.5?m*(1+p):m+p-m*p,x=2*m-w;y=_(x,w,v+1/3),b=_(x,w,v),g=_(x,w,v-1/3)}return{r:255*y,g:255*b,b:255*g}})(n.h,l,f),h=!0,d="hsl"),n.hasOwnProperty("a")&&(u=n.a)),u=hU(u),{ok:h,format:n.format||d,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:u}})(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}function jj(r,e,t){r=sn(r,255),e=sn(e,255),t=sn(t,255);var n,i,o=Math.max(r,e,t),a=Math.min(r,e,t),s=(o+a)/2;if(o==a)n=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case r:n=(e-t)/u+(e<t?6:0);break;case e:n=(t-r)/u+2;break;case t:n=(r-e)/u+4}n/=6}return{h:n,s:i,l:s}}function Fj(r,e,t){r=sn(r,255),e=sn(e,255),t=sn(t,255);var n,i,o=Math.max(r,e,t),a=Math.min(r,e,t),s=o,u=o-a;if(i=o===0?0:u/o,o==a)n=0;else{switch(o){case r:n=(e-t)/u+(e<t?6:0);break;case e:n=(t-r)/u+2;break;case t:n=(r-e)/u+4}n/=6}return{h:n,s:i,v:s}}function Bj(r,e,t,n){var i=[Aa(Math.round(r).toString(16)),Aa(Math.round(e).toString(16)),Aa(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Uj(r,e,t,n){return[Aa(dU(n)),Aa(Math.round(r).toString(16)),Aa(Math.round(e).toString(16)),Aa(Math.round(t).toString(16))].join("")}function Hee(r,e){e=e===0?0:e||10;var t=Et(r).toHsl();return t.s-=e/100,t.s=Mb(t.s),Et(t)}function Yee(r,e){e=e===0?0:e||10;var t=Et(r).toHsl();return t.s+=e/100,t.s=Mb(t.s),Et(t)}function Xee(r){return Et(r).desaturate(100)}function $ee(r,e){e=e===0?0:e||10;var t=Et(r).toHsl();return t.l+=e/100,t.l=Mb(t.l),Et(t)}function Kee(r,e){e=e===0?0:e||10;var t=Et(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),Et(t)}function Zee(r,e){e=e===0?0:e||10;var t=Et(r).toHsl();return t.l-=e/100,t.l=Mb(t.l),Et(t)}function Qee(r,e){var t=Et(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Et(t)}function Jee(r){var e=Et(r).toHsl();return e.h=(e.h+180)%360,Et(e)}function qj(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Et(r).toHsl(),n=[Et(r)],i=360/e,o=1;o<e;o++)n.push(Et({h:(t.h+o*i)%360,s:t.s,l:t.l}));return n}function ete(r){var e=Et(r).toHsl(),t=e.h;return[Et(r),Et({h:(t+72)%360,s:e.s,l:e.l}),Et({h:(t+216)%360,s:e.s,l:e.l})]}function tte(r,e,t){e=e||6,t=t||30;var n=Et(r).toHsl(),i=360/t,o=[Et(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,o.push(Et(n));return o}function rte(r,e){e=e||6;for(var t=Et(r).toHsv(),n=t.h,i=t.s,o=t.v,a=[],s=1/e;e--;)a.push(Et({h:n,s:i,v:o})),o=(o+s)%1;return a}Et.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(299*r.r+587*r.g+114*r.b)/1e3},getLuminance:function(){var r,e,t,n=this.toRgb();return r=n.r/255,e=n.g/255,t=n.b/255,.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))},setAlpha:function(r){return this._a=hU(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=Fj(this._r,this._g,this._b);return{h:360*r.h,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=Fj(this._r,this._g,this._b),e=Math.round(360*r.h),t=Math.round(100*r.s),n=Math.round(100*r.v);return this._a==1?"hsv("+e+", "+t+"%, "+n+"%)":"hsva("+e+", "+t+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var r=jj(this._r,this._g,this._b);return{h:360*r.h,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=jj(this._r,this._g,this._b),e=Math.round(360*r.h),t=Math.round(100*r.s),n=Math.round(100*r.l);return this._a==1?"hsl("+e+", "+t+"%, "+n+"%)":"hsla("+e+", "+t+"%, "+n+"%, "+this._roundA+")"},toHex:function(r){return Bj(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return(function(e,t,n,i,o){var a=[Aa(Math.round(e).toString(16)),Aa(Math.round(t).toString(16)),Aa(Math.round(n).toString(16)),Aa(dU(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")})(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*sn(this._r,255))+"%",g:Math.round(100*sn(this._g,255))+"%",b:Math.round(100*sn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*sn(this._r,255))+"%, "+Math.round(100*sn(this._g,255))+"%, "+Math.round(100*sn(this._b,255))+"%)":"rgba("+Math.round(100*sn(this._r,255))+"%, "+Math.round(100*sn(this._g,255))+"%, "+Math.round(100*sn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(nte[Bj(this._r,this._g,this._b,!0)]||!1)},toFilter:function(r){var e="#"+Uj(this._r,this._g,this._b,this._a),t=e,n=this._gradientType?"GradientType = 1, ":"";if(r){var i=Et(r);t="#"+Uj(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+t+")"},toString:function(r){var e=!!r;r=r||this._format;var t=!1,n=this._a<1&&this._a>=0;return e||!n||r!=="hex"&&r!=="hex6"&&r!=="hex3"&&r!=="hex4"&&r!=="hex8"&&r!=="name"?(r==="rgb"&&(t=this.toRgbString()),r==="prgb"&&(t=this.toPercentageRgbString()),r!=="hex"&&r!=="hex6"||(t=this.toHexString()),r==="hex3"&&(t=this.toHexString(!0)),r==="hex4"&&(t=this.toHex8String(!0)),r==="hex8"&&(t=this.toHex8String()),r==="name"&&(t=this.toName()),r==="hsl"&&(t=this.toHslString()),r==="hsv"&&(t=this.toHsvString()),t||this.toHexString()):r==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return Et(this.toString())},_applyModification:function(r,e){var t=r.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification($ee,arguments)},brighten:function(){return this._applyModification(Kee,arguments)},darken:function(){return this._applyModification(Zee,arguments)},desaturate:function(){return this._applyModification(Hee,arguments)},saturate:function(){return this._applyModification(Yee,arguments)},greyscale:function(){return this._applyModification(Xee,arguments)},spin:function(){return this._applyModification(Qee,arguments)},_applyCombination:function(r,e){return r.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(tte,arguments)},complement:function(){return this._applyCombination(Jee,arguments)},monochromatic:function(){return this._applyCombination(rte,arguments)},splitcomplement:function(){return this._applyCombination(ete,arguments)},triad:function(){return this._applyCombination(qj,[3])},tetrad:function(){return this._applyCombination(qj,[4])}},Et.fromRatio=function(r,e){if(B0(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=n==="a"?r[n]:rp(r[n]));r=t}return Et(r,e)},Et.equals=function(r,e){return!(!r||!e)&&Et(r).toRgbString()==Et(e).toRgbString()},Et.random=function(){return Et.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Et.mix=function(r,e,t){t=t===0?0:t||50;var n=Et(r).toRgb(),i=Et(e).toRgb(),o=t/100;return Et({r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a})},Et.readability=function(r,e){var t=Et(r),n=Et(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)},Et.isReadable=function(r,e,t){var n,i,o,a,s,u=Et.readability(r,e);switch(i=!1,(a=((o=(o=t)||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&a!=="AAA"&&(a="AA"),(s=(o.size||"small").toLowerCase())!=="small"&&s!=="large"&&(s="small"),(n={level:a,size:s}).level+n.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},Et.mostReadable=function(r,e,t){var n,i,o,a,s=null,u=0;i=(t=t||{}).includeFallbackColors,o=t.level,a=t.size;for(var l=0;l<e.length;l++)(n=Et.readability(r,e[l]))>u&&(u=n,s=Et(e[l]));return Et.isReadable(r,s,{level:o,size:a})||!i?s:(t.includeFallbackColors=!1,Et.mostReadable(r,["#fff","#000"],t))};var MC=Et.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},nte=Et.hexNames=(function(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e})(MC);function hU(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function sn(r,e){(function(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1})(r)&&(r="100%");var t=(function(n){return typeof n=="string"&&n.indexOf("%")!=-1})(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function Mb(r){return Math.min(1,Math.max(0,r))}function ko(r){return parseInt(r,16)}function Aa(r){return r.length==1?"0"+r:""+r}function rp(r){return r<=1&&(r=100*r+"%"),r}function dU(r){return Math.round(255*parseFloat(r)).toString(16)}function zj(r){return ko(r)/255}var Hu,km,Dm,xa=(km="[\\s|\\(]+("+(Hu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Hu+")[,|\\s]+("+Hu+")\\s*\\)?",Dm="[\\s|\\(]+("+Hu+")[,|\\s]+("+Hu+")[,|\\s]+("+Hu+")[,|\\s]+("+Hu+")\\s*\\)?",{CSS_UNIT:new RegExp(Hu),rgb:new RegExp("rgb"+km),rgba:new RegExp("rgba"+Dm),hsl:new RegExp("hsl"+km),hsla:new RegExp("hsla"+Dm),hsv:new RegExp("hsv"+km),hsva:new RegExp("hsva"+Dm),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Vs(r){return!!xa.CSS_UNIT.exec(r)}var ite=function(r){return Et.mostReadable(r,[uP,"#FFFFFF"]).toString()},cg=function(r){return aU().get.rgb(r)},Mm=function(r){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e),i=cg(r);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=255*i[3],t[0]},Lm=function(r){return[(e=cg(r))[0]/255,e[1]/255,e[2]/255];var e};function ote(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}})(r,e)||(function(t,n){if(t){if(typeof t=="string")return Gj(t,n);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Gj(t,n):void 0}})(r,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Gj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var ate=function(r){var e=r.x,t=e===void 0?0:e,n=r.y,i=n===void 0?0:n,o=r.size,a=o===void 0?kn:o;return{top:i-a,left:t-a,right:t+a,bottom:i+a}},ste=function(r,e,t,n,i,o){var a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:AB,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:1,u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,l=e.x,c=l===void 0?0:l,f=e.y,h=f===void 0?0:f,d=e.size,v=d===void 0?kn:d,p=e.caption,m=p===void 0?"":p,y=e.captions,b=y===void 0?[]:y,g=e.captionAlign,_=g===void 0?"center":g,w=e.captionSize,x=w===void 0?1:w,E=e.disabled,O=e.activated,C=e.selected,A=e.hovered,R=e.id,k=e.icon,D=e.overlayIcon,L=Vr(),j=(function(Dt,fr,Br){var Wr=Dt.selected?Br.selected.rings:Br.default.rings;if(!Wr.length){var yn=fr.getById(Dt.id);return yn!==void 0&&Object.entries(yn).forEach(function(cn){var mr=ote(cn,2),Sr=mr[0],gr=mr[1];Sr.startsWith("ring-")&&gr.setEndValue(0)}),[{width:0,color:""}]}return Wr.map(function(cn,mr){var Sr=cn.widthFactor,gr=cn.color,wi=(Dt.size||kn)*Sr*Vr();return{width:fr.getValueForAnimationName(Dt.id,"ring-".concat(mr),wi),color:gr}})})(e,n,i),q=j.reduce(function(Dt,fr){return Dt+fr.width},0),B=v*L,U=2*B,W=(function(Dt,fr){if(!Dt||!fr)return{nodeInfoLevel:0,fontInfoLevel:1.25,iconInfoLevel:1};var Br=Vr(),Wr=1600*Br*(1200*Br),yn=Math.pow(Dt,2)*Math.PI*Math.pow(fr,2)/(Wr/100);return{nodeInfoLevel:sT(yn,Fee),fontInfoLevel:sT(yn,l0),iconInfoLevel:sT(yn,Bee)}})(B,u),H=W.nodeInfoLevel,Y=W.fontInfoLevel,Z=W.iconInfoLevel,ce=e.color||a,$=(function(Dt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:kn)/({1:3.5,2:2.75,3:2}[arguments.length>2&&arguments[2]!==void 0?arguments[2]:1]+(arguments.length>3&&arguments[3]!==void 0&&arguments[3]?1:0))/Dt})(Y,B,x,!!k),K=ite(ce),ie=B;if(q>0&&(ie=B+q),E)ce=o.color,K=o.fontColor;else{var ae;if(O){var le=Date.now()%1e3/1e3,te=le<.7?le/.7:0,ee=Dc(ce,.4-.4*te);Aj(r,c,h,ee,B+.88*B*te)}var re=(ae=i.selected.shadow)!==null&&ae!==void 0?ae:{width:0,opacity:0,color:""},he=re.width*L,ve=re.opacity,_e=re.color,Oe=C||A?he:0,Pe=n.getValueForAnimationName(R,"shadowWidth",Oe);Pe>0&&(function(Dt,fr,Br,Wr,yn,cn){var mr=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,Sr=yn+cn,gr=Dt.createRadialGradient(fr,Br,yn,fr,Br,Sr);gr.addColorStop(0,"transparent"),gr.addColorStop(.01,Dc(Wr,.5*mr)),gr.addColorStop(.05,Dc(Wr,.5*mr)),gr.addColorStop(.5,Dc(Wr,.12*mr)),gr.addColorStop(.75,Dc(Wr,.03*mr)),gr.addColorStop(1,Dc(Wr,0)),Dt.fillStyle=gr,lU(Dt,fr,Br,Sr),Dt.fill()})(r,c,h,_e,ie,Pe,ve)}Aj(r,c,h,ce,B),q>0&&Uee(r,c,h,B,j);var me=!!m.length,F=!!b.length,G=!!k;if(k){var X=H<2||!(me||F),se=H>0?1:0,pe=X?1*B:.75*B;pe/=Z;var ge=X?.5*pe:pe*(Z===1?_==="center"?1.3:_==="bottom"||X?1.1:0:_==="center"?1.35:_==="bottom"||X?1.1:0),xe=pe/2;pe=n.getValueForAnimationName(R,"iconSize",pe),xe=n.getValueForAnimationName(R,"iconXPos",xe),ge=n.getValueForAnimationName(R,"iconYPos",ge);var Ne=r.globalAlpha,He=E?.1:se;r.globalAlpha=n.getValueForAnimationName(R,"iconOpacity",He);var at=K==="#ffffff",Ze=t.getImage(k,at);r.drawImage(Ze,c-xe,h-ge,Math.floor(pe),Math.floor(pe)),r.globalAlpha=Ne}if(D!==void 0){var et,Qe,Xe,ke,oe,Ee=U*((et=D.size)!==null&&et!==void 0?et:1),Re=Ee/2-B*((Qe=(Xe=D.position)===null||Xe===void 0?void 0:Xe[1])!==null&&Qe!==void 0?Qe:0),De=Ee/2-B*((ke=(oe=D.position)===null||oe===void 0?void 0:oe[0])!==null&&ke!==void 0?ke:0),Me=r.globalAlpha,it=E?.1:1;r.globalAlpha=n.getValueForAnimationName(R,"iconOpacity",it);var Fe=t.getImage(D.url);r.drawImage(Fe,c-De,h-Re,Ee,Ee),r.globalAlpha=Me}if(me||F){var ut=H<2?0:1,rt=n.getValueForAnimationName(R,"textOpacity",ut,0);if(rt>0){var ft,xt,yt='"Open Sans", sans-serif',nt=2;Y===((ft=l0[1])===null||ft===void 0?void 0:ft[1])?nt=3:Y===((xt=l0[2])===null||xt===void 0?void 0:xt[1])&&(nt=4);var It=_==="center"?.7*U:2*Math.sqrt(Math.pow(U/2,2)-Math.pow(U/3,2));if(r.fillStyle=Dc(K,rt),F){var St,or=uU(b),rr=or.stylesPerChar,Gt=or.fullCaption,Pt=Pj(r,Gt,yt,$,It,G,nt,e==null||e.captionAlign),ur=-(Pt.length-2)*$/2;St=_&&_!=="center"?_==="bottom"?ur+B/Math.PI:ur-B/Math.PI:ur,Rj(r,Pt,rr,St,$,yt,$,c,h,s)}else if(me){var nr=Pj(r,m,yt,$,It,G,nt,e==null||e.captionAlign),Ir=-(nr.length-2)*$/2,Kr=m.split("").map(function(Dt){return[]});Rj(r,nr,Kr,Ir,$,yt,$,c,h,s)}}}};function Ap(r){return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(r)}function Vj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vj(Object(t),!0).forEach(function(n){Gi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Dh(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return Wj(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Wj(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function Wj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ute(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,vU(n.key),n)}}function Gi(r,e,t){return(e=vU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vU(r){var e=(function(t){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ap(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Ap(e)=="symbol"?e:e+""}var Yu="canvasRenderer",lte=(function(){return r=function t(n,i,o){var a=this,s=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).relationshipThreshold,u=s===void 0?0:s;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),Gi(this,"arrowBundler",void 0),Gi(this,"activeNodes",void 0),Gi(this,"canvas",void 0),Gi(this,"context",void 0),Gi(this,"state",void 0),Gi(this,"stateDisposers",void 0),Gi(this,"relationshipThreshold",void 0),Gi(this,"animationHandler",void 0),Gi(this,"imageCache",void 0),Gi(this,"needsRun",void 0),Gi(this,"nodeVersion",void 0),Gi(this,"relVersion",void 0),Gi(this,"waypointVersion",void 0),Gi(this,"ellipsisWidth",void 0),i!==null&&(this.activeNodes=new Set,this.canvas=n,this.context=i,this.state=o,this.stateDisposers=[],this.stateDisposers.push(o.autorun(function(){o.zoom!==void 0&&(a.needsRun=!0),o.panX!==void 0&&(a.needsRun=!0),o.panY!==void 0&&(a.needsRun=!0),o.nodes.version!==void 0&&(a.needsRun=!0),o.rels.version!==void 0&&(a.needsRun=!0),o.waypoints.counter>0&&(a.needsRun=!0),o.layout!==void 0&&(a.needsRun=!0)})),o.nodes.addChannel(Yu),o.rels.addChannel(Yu),this.relationshipThreshold=u,this.nodeVersion=o.nodes.version,this.relVersion=o.rels.version,this.waypointVersion=o.waypoints.counter,this.animationHandler=new Eee,this.animationHandler.setOptions({fadeDuration:150,sizeDuration:150}),this.arrowBundler=new Iee(o.rels.items,o.waypoints.data),this.imageCache=new See,this.needsRun=!0,this.ellipsisWidth=i.measureText(F0).width)},e=[{key:"needsToRun",value:function(){return this.needsRun||this.animationHandler.needsToRun()||this.activeNodes.size>0}},{key:"processUpdates",value:function(){var t=this.state,n=!1,i=t.nodes.channels[Yu],o=t.rels.channels[Yu],a=o.adds,s=o.removes,u=o.updates;this.nodeVersion<t.nodes.version&&(this.handleChannelUpdate(i,t.nodes,!0),this.nodeVersion=t.nodes.version,t.nodes.clearChannel(Yu)),this.relVersion<t.rels.version&&(n=Object.keys(a).length>0||Object.keys(s).length>0||Object.keys(u).length>0,t.rels.clearChannel(Yu),this.relVersion=t.rels.version),(n||this.waypointVersion<t.waypoints.counter)&&(this.arrowBundler.updateData(a,s,u,t.waypoints.data),this.waypointVersion=t.waypoints.counter)}},{key:"render",value:function(t){var n,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.state,s=this.animationHandler,u=this.arrowBundler,l=a.zoom,c=a.layout,f=a.nodes.idToPosition,h=(n=o.canvas)!==null&&n!==void 0?n:this.canvas,d=(i=o.context)!==null&&i!==void 0?i:this.context,v=Vr(),p=h.clientWidth*v,m=h.clientHeight*v;d.save(),o.backgroundColor!==void 0?(d.fillStyle=o.backgroundColor,d.fillRect(0,0,p,m)):d.clearRect(0,0,p,m),this.zoomAndPan(d,h),s.ignoreAnimations(!!o.ignoreAnimations),o.ignoreAnimations||s.advance(),u.updatePositions(f);var y=this.getRelationshipsToRender(o.showCaptions,p,m);this.renderRelationships(y,d,c!==u0);var b=this.getNodesToRender(t,p,m);this.renderNodes(b,d,l),d.restore(),this.needsRun=!1}},{key:"getRelationshipsToRender",value:function(t,n,i){var o,a=[],s=[],u=[],l=this.arrowBundler,c=this.state,f=this.relationshipThreshold,h=c.layout,d=c.zoom,v=c.rels,p=c.nodes,m=p.idToItem,y=p.idToPosition,b=Dh(v.items);try{for(b.s();!(o=b.n()).done;){var g=o.value,_=l.getBundle(g),w=zi(zi({},m[g.from]),y[g.from]),x=zi(zi({},m[g.to]),y[g.to]),E=t||d>f||g.captionHtml!==void 0,O=Gee(g,_,w,x,E,h!==u0);if(O!==null){var C,A,R,k,D,L,j=this.isBoundingBoxOffScreen(O,n,i),q=tp({x:(C=w.x)!==null&&C!==void 0?C:0,y:(A=w.y)!==null&&A!==void 0?A:0},{x:(R=x.x)!==null&&R!==void 0?R:0,y:(k=x.y)!==null&&k!==void 0?k:0}),B=(((D=w.size)!==null&&D!==void 0?D:kn)+((L=x.size)!==null&&L!==void 0?L:kn))*devicePixelRatio,U=w.id!==x.id&&B>q;j||U||(g.disabled?s.push(zi(zi({},g),{},{fromNode:w,toNode:x,showLabel:E})):g.selected?a.push(zi(zi({},g),{},{fromNode:w,toNode:x,showLabel:E})):u.push(zi(zi({},g),{},{fromNode:w,toNode:x,showLabel:E})))}}}catch(W){b.e(W)}finally{b.f()}return[].concat(s,u,a)}},{key:"getNodesToRender",value:function(t,n,i){var o,a=[],s=[],u=[],l=this.state.nodes.idToItem,c=Dh(t);try{for(c.s();!(o=c.n()).done;){var f=o.value,h=ate(f);this.isBoundingBoxOffScreen(h,n,i)||(l[f.id].disabled?a.push(zi({},f)):l[f.id].selected?s.push(zi({},f)):u.push(zi({},f)))}}catch(d){c.e(d)}finally{c.f()}return[].concat(a,u,s)}},{key:"renderNodes",value:function(t,n,i){var o,a=this.imageCache,s=this.animationHandler,u=this.state,l=this.ellipsisWidth,c=u.nodes.idToItem,f=u.nodeBorderStyles,h=u.disabledItemStyles,d=u.defaultNodeColor,v=Dh(t);try{for(v.s();!(o=v.n()).done;){var p=o.value;ste(n,zi(zi({},c[p.id]),p),a,s,f,h,d,l,i)}}catch(m){v.e(m)}finally{v.f()}}},{key:"renderRelationships",value:function(t,n,i){var o,a=this.state.relationshipBorderStyles.selected,s=this.arrowBundler,u=this.imageCache,l=this.state,c=l.disabledItemStyles,f=l.defaultRelationshipColor,h=Dh(t);try{for(h.s();!(o=h.n()).done;){var d=o.value,v=s.getBundle(d),p=d.fromNode,m=d.toNode,y=d.showLabel;zee(n,d,p,m,v,u,y,a,c,f,i)}}catch(b){h.e(b)}finally{h.f()}}},{key:"getNodesAt",value:function(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=[],a=this.state.nodes,s=a.items,u=a.idToPosition,l=Vr(),c=Dh(s);try{var f=function(){var h=n.value,d=h.id,v=h.size,p=v===void 0?kn:v,m=u[d],y=m.x,b=m.y,g=Math.sqrt(Math.pow(t.x-y,2)+Math.pow(t.y-b,2));if(g<=(p+i)*l){var _=o.findIndex(function(w){return w.distance>g});o.splice(_!==-1?_:o.length,0,{data:h,targetCoordinates:{x:y,y:b},pointerCoordinates:t,distanceVector:{x:t.x-y,y:t.y-b},insideNode:g<=p*l,distance:g})}};for(c.s();!(n=c.n()).done;)f()}catch(h){c.e(h)}finally{c.f()}return o}},{key:"getRelsAt",value:function(t){var n,i=[],o=this.state,a=this.arrowBundler,s=this.relationshipThreshold,u=o.zoom,l=o.rels.items,c=o.nodes.idToPosition,f=o.layout,h=u>s,d=Dh(l);try{var v=function(){var p=n.value,m=a.getBundle(p),y=c[p.from],b=c[p.to];if(y!==void 0&&b!==void 0&&m.has(p)){var g=(function(w,x,E,O,C,A){var R=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(!Db(E,O))return 1/0;var k=E===O?(function(D,L,j,q){var B=hP(L,j,q),U=B.startPoint,W=B.endPoint,H=B.apexPoint,Y=B.control1Point,Z=B.control2Point,ce=oT(U,H,Y,D),$=oT(H,W,Z,D);return Math.min(ce,$)})(w,x,E,C):(function(D,L,j,q,B,U,W){var H=fP(L,j,q,B,U,W),Y=1/0;if(W&&H.length===3)Y=oT(H[0],H[2],H[1],D);else for(var Z=1;Z<H.length;Z++){var ce=H[Z-1],$=H[Z],K=cP(ce,$,D);Y=K<Y?K:Y}return Y})(w,x,C,E,O,A,R);return k})(t,p,y,b,m,h,f!==u0);if(g<10){var _=i.findIndex(function(w){return w.distance>g});i.splice(_!==-1?_:i.length,0,{data:p,fromTargetCoordinates:y,toTargetCoordinates:b,pointerCoordinates:t,distance:g})}}};for(d.s();!(n=d.n()).done;)v()}catch(p){d.e(p)}finally{d.f()}return i}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){t()}),this.state.nodes.removeChannel(Yu),this.state.rels.removeChannel(Yu)}},{key:"isBoundingBoxOffScreen",value:function(t,n,i){var o=this.state,a=o.zoom,s=n/a,u=i/a,l=o.panX-s/2,c=o.panY-u/2,f=t.right<l,h=t.bottom<c,d=t.left>l+s,v=t.top>c+u;return f||d||h||v}},{key:"handleChannelUpdate",value:function(t,n,i){for(var o=Object.keys(t.adds),a=0;a<o.length;a++){var s=o[a];t.adds[s].activated&&this.activeNodes.add(s)}for(var u=Object.keys(t.removes),l=0;l<u.length;l++){var c=u[l];this.activeNodes.delete(c)}if(i)for(var f=Object.keys(t.updates),h=0;h<f.length;h++){var d=f[h];n.idToItem[d].activated?this.activeNodes.add(d):this.activeNodes.delete(d)}}},{key:"zoomAndPan",value:function(t,n){var i=n.width,o=n.height,a=this.state,s=a.zoom,u=a.panX,l=a.panY;t.translate(-i/2*s,-o/2*s),t.translate(-u*s,-l*s),t.scale(s,s),t.translate(i/2/s,o/2/s),t.translate(i/2,o/2)}}],e&&ute(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),pU=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=(function(a,s){if((0,jr.isNil)(a)||(0,jr.isNil)(s))return{offsetX:0,offsetY:0};var u=s.getBoundingClientRect(),l=window.devicePixelRatio||1;return{offsetX:l*(a.clientX-u.left-.5*u.width),offsetY:l*(a.clientY-u.top-.5*u.height)}})(r,e);return{x:n+o.offsetX/t,y:i+o.offsetY/t}};function Rp(r){return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(r)}function gU(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function cte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,mU(n.key),n)}}function yU(r,e,t){return e&&cte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function oa(r,e,t){return(e=mU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mU(r){var e=(function(t){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Rp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Rp(e)=="symbol"?e:e+""}var ra="WebGLRenderer",fte=(function(){return yU(function r(e){var t=this;if(gU(this,r),oa(this,"mainSceneRenderer",void 0),oa(this,"minimapRenderer",void 0),oa(this,"needsRun",void 0),oa(this,"minimapMouseDown",void 0),oa(this,"stateDisposers",void 0),oa(this,"state",void 0),e.state===void 0)throw new Error("Renderer missing options: state - state object");var n=e.state,i=e.mainSceneRenderer,o=e.minimapRenderer,a=n.nodes,s=n.rels;this.mainSceneRenderer=i,this.minimapRenderer=o,this.needsRun=!1,this.minimapMouseDown=!1,this.stateDisposers=[],this.stateDisposers.push(n.autorun(function(){t.updateMainViewport(n.zoom,n.panX,n.panY)})),this.stateDisposers.push(n.autorun(function(){t.updateMinimapViewport(n.minimapZoom,n.minimapPanX,n.minimapPanY)})),this.stateDisposers.push(n.autorun(function(){n.nodes.version!==void 0&&(t.needsRun=!0),n.rels.version!==void 0&&(t.needsRun=!0)})),a.addChannel(ra),s.addChannel(ra),this.state=n,this.setupMinimapInteractions()},[{key:"needsToRun",value:function(){return this.needsRun||Object.keys(this.mainSceneRenderer.activeNodes).length>0}},{key:"renderMainScene",value:function(r){var e=this.state,t=e.nodes,n=e.rels;this.checkForUpdates(t,n),this.mainSceneRenderer.render(r,t,n),this.needsRun=!1}},{key:"renderMinimap",value:function(r){var e=this.state,t=e.nodes,n=e.rels;this.checkForUpdates(t,n),this.minimapRenderer.render(r,t,n),this.minimapRenderer.renderViewbox(),this.needsRun=!1}},{key:"checkForUpdates",value:function(r,e){var t=Object.values(r.channels[ra].adds).length>0,n=Object.values(e.channels[ra].adds).length>0,i=Object.values(r.channels[ra].removes).length>0,o=Object.values(e.channels[ra].removes).length>0,a=Object.values(r.channels[ra].updates),s=Object.values(e.channels[ra].updates);t||n||i||o?(this.mainSceneRenderer.setData({nodes:r.items,rels:e.items}),this.minimapRenderer.setData({nodes:r.items,rels:e.items})):(a.length>0&&(this.mainSceneRenderer.updateNodes(a),this.minimapRenderer.updateNodes(a)),s.length>0&&(this.mainSceneRenderer.updateRelationships(e.items),this.minimapRenderer.updateRelationships(e.items))),r.clearChannel(ra),e.clearChannel(ra)}},{key:"onResize",value:function(){var r=this.state,e=r.zoom,t=r.panX,n=r.panY,i=r.minimapZoom,o=r.minimapPanX,a=r.minimapPanY;this.updateMainViewport(e,t,n),this.updateMinimapViewport(i,o,a)}},{key:"updateMainViewport",value:function(r,e,t){this.mainSceneRenderer.updateViewport(r,e,t);var n=this.mainSceneRenderer.canvas.clientWidth,i=this.mainSceneRenderer.canvas.clientHeight;this.minimapRenderer.updateViewportBox(r,e,t,n,i),this.needsRun=!0}},{key:"updateMinimapViewport",value:function(r,e,t){this.minimapRenderer.updateViewport(r,e,t),this.needsRun=!0}},{key:"handleMinimapDrag",value:function(r){var e=this.state,t=this.minimapRenderer,n=pU(r,t.canvas,e.minimapZoom,e.minimapPanX,e.minimapPanY),i=n.x,o=n.y;e.setPan(i,o)}},{key:"handleMinimapWheel",value:function(r){var e=this.state,t=this.mainSceneRenderer;e.setZoom((function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(0,jr.isNil)(n)||isNaN(n.deltaY)?i:i-n.deltaY/500*Math.min(1,i)})(r,e.zoom),t.canvas),r.preventDefault()}},{key:"setupMinimapInteractions",value:function(){var r=this,e=this.minimapRenderer.canvas;e.addEventListener("mousedown",function(t){r.handleMinimapDrag(t),r.minimapMouseDown=!0}),e.addEventListener("mousemove",function(t){r.minimapMouseDown&&r.handleMinimapDrag(t)}),e.addEventListener("mouseup",function(){r.minimapMouseDown=!1}),e.addEventListener("mouseleave",function(){r.minimapMouseDown=!1}),e.addEventListener("wheel",function(t){r.handleMinimapWheel(t)})}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(r){r()}),this.state.nodes.removeChannel(ra),this.state.rels.removeChannel(ra),this.mainSceneRenderer.destroy(),this.minimapRenderer.destroy()}}])})(),hte=(function(){return yU(function r(){gU(this,r),oa(this,"mainSceneRenderer",void 0),oa(this,"minimapRenderer",void 0),oa(this,"needsRun",void 0),oa(this,"minimapMouseDown",void 0),oa(this,"stateDisposers",void 0),oa(this,"state",void 0)},[{key:"renderMainScene",value:function(r){}},{key:"renderMinimap",value:function(r){}},{key:"checkForUpdates",value:function(r,e){}},{key:"onResize",value:function(){}},{key:"updateMainViewport",value:function(r,e,t){}},{key:"updateMinimapViewport",value:function(r,e,t){}},{key:"handleMinimapDrag",value:function(r){}},{key:"handleMinimapWheel",value:function(r){}},{key:"setupMinimapInteractions",value:function(){}},{key:"destroy",value:function(){}},{key:"needsToRun",value:function(){return!1}}])})();function Ip(r){return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(r)}function lT(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return Hj(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Hj(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function Hj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function dte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,bU(n.key),n)}}function an(r,e,t){return(e=bU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bU(r){var e=(function(t){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ip(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Ip(e)=="symbol"?e:e+""}var LC,di=24,Yj=(function(){return r=function t(n,i,o,a){var s;if((function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),an(this,"nodeShader",void 0),an(this,"nodeAnimShader",void 0),an(this,"relShader",void 0),an(this,"relDataBuffer",void 0),an(this,"viewportBoxShader",void 0),an(this,"defaultRelColor",void 0),an(this,"defaultNodeColor",void 0),an(this,"disableRelColor",void 0),an(this,"disableNodeColor",void 0),an(this,"gl",void 0),an(this,"activeNodes",void 0),an(this,"canvas",void 0),an(this,"projection",void 0),an(this,"idToIndex",void 0),an(this,"posBuffer",void 0),an(this,"numRels",void 0),an(this,"numNodes",void 0),an(this,"nodeDataByte",void 0),an(this,"relIdToIndex",void 0),an(this,"relData",void 0),an(this,"viewportBoxBuffer",void 0),an(this,"relBuffer",void 0),an(this,"nodeBuffer",void 0),an(this,"posTexture",void 0),((s=n.getExtension("OES_texture_float"))!==null&&s!==void 0?s:void 0)===void 0)throw new Error("Renderer needs floating point texture support");this.nodeShader=new al(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;
uniform lowp vec3 u_nodeBorderColor;
uniform lowp vec3 u_selectedBorderColor;
uniform lowp vec3 u_selectedInnerBorderColor;
uniform lowp vec3 u_shadowColor;
uniform lowp float u_drawDefaultBorder;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_selected;
attribute lowp float a_hovered;

varying lowp float window;
varying lowp vec4 color;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float drawDefaultBorder;

lowp float MinNodeSize = 5.0;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);
  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  lowp float nodeSize = a_size * u_zoom * u_glAdjust;
  if (nodeSize < MinNodeSize) {
   gl_PointSize = MinNodeSize;
   varNodeSize = MinNodeSize;
  } else {
    gl_PointSize = nodeSize;
    varNodeSize = nodeSize;
  }

  color = a_color;
  selected = a_selected;
  hovered = a_hovered;
  nodeBorderColor = u_nodeBorderColor;
  selectedBorderColor = u_selectedBorderColor;
  selectedInnerBorderColor = u_selectedInnerBorderColor;
  shadowColor = u_shadowColor;
  drawDefaultBorder = u_drawDefaultBorder;
}`,`uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float drawDefaultBorder;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;

mediump float circleSize = 0.40;
mediump float defaultBoderSize = 0.42;
mediump float innerSelectedRingSize = 0.43;
mediump float outerSelectedRingSize = 0.47;
mediump float shadowSize = 0.51;

lowp float getShadowAlpha(lowp float size, lowp float dist) {
  return (1.0 - smoothstep(size, shadowSize, dist)) * 0.25;
}

lowp float getCircleAlpha(lowp float ringSize, lowp float nodeSize, lowp float dist) {
  return color.w - smoothstep(ringSize - nodeSize, ringSize, dist);
}

void main() {
  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float nodeSize = 1.0 / varNodeSize;
    lowp float nodeAlpha = getCircleAlpha(circleSize, nodeSize, dist);
    lowp float borderAlpha = getCircleAlpha(defaultBoderSize, nodeSize, dist);
    lowp float ringAlpha = getCircleAlpha(innerSelectedRingSize, nodeSize, dist);
    lowp vec3 finalColor = color.xyz;
    lowp float finalAlpha = nodeAlpha;

    if (selected > 0.0) {
      lowp float shadowAlpha = getShadowAlpha(outerSelectedRingSize, dist);
      lowp float ringAlpha2 = getCircleAlpha(outerSelectedRingSize, nodeSize, dist);

      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedInnerBorderColor, finalColor, borderAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(borderAlpha, ringAlpha2)));
      } else {
        finalColor = mix(selectedInnerBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(ringAlpha, ringAlpha2)));
      }
    } else if (hovered > 0.0) {
      if (drawDefaultBorder > 0.0) {
        lowp float shadowAlpha = getShadowAlpha(defaultBoderSize, dist);
  
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(shadowColor, finalColor, borderAlpha);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, ringAlpha));
      } else {
        lowp float shadowAlpha = getShadowAlpha(circleSize, dist);

        finalColor = mix(shadowColor, finalColor, nodeAlpha);
        finalAlpha = max(shadowAlpha, nodeAlpha);
      }
    } else {
      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalAlpha = borderAlpha;
      }
    }
    gl_FragColor = vec4(finalColor, 1.0) * finalAlpha;
  }
}
`),this.nodeAnimShader=new al(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform lowp float u_animPos;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_active;

varying lowp float varNodeSize;
varying lowp vec4 color;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);

  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  float nodeSize = a_size * u_zoom * u_glAdjust;
  nodeSize = nodeSize * (0.4 / 0.5); // Remove extra space added for shadow and selection ring

  gl_PointSize = a_active > 0.5
    ? nodeSize + 0.88 * nodeSize * u_animPos
    : 0.0;

  color = a_color;
  varNodeSize = a_size;
}`,`uniform mediump float u_zoom;
uniform lowp float u_animPos;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float varNodeSize;
mediump float circleSize = 0.50;

void main(void) {

  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float alpha = 1.0 - smoothstep(circleSize - (1.0 / (varNodeSize * 2.0 * u_zoom * u_glAdjust)), circleSize, dist);
    lowp float pulseAlpha = 0.9 - 0.9 * u_animPos;
    gl_FragColor = vec4(color.xyz, 1.0) * alpha * pulseAlpha;
  }
}
`),this.relShader=new al(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_glAdjust;

attribute vec2 a_from;
attribute vec2 a_to;
attribute lowp vec4 a_color;
attribute lowp float a_triside;
attribute float a_width;

varying lowp vec4 color;

void main(void) {
  vec4 from = texture2D(u_positions, a_from);
  vec4 to = texture2D(u_positions, a_to);
  vec2 direction = normalize(to.xy - from.xy);
  direction = vec2(-direction.y, direction.x);

  float width = a_width * u_glAdjust * 0.5;

  if (a_triside == 0.0) {
    from.y += (width / 2.0) * direction.y;
    from.x += (width / 2.0) * direction.x;
  } else {
    from.y -= (width / 2.0) * direction.y;
    from.x -= (width / 2.0) * direction.x;
  }

  color = a_color;
  gl_Position = u_projection * vec4(from.xy, 0.0, 1.0);
}
`,`varying lowp vec4 color;

void main(void) {
  gl_FragColor = vec4(color.xyz, 1.0) * color.w;
}
`),this.viewportBoxShader=new al(n,`
attribute vec2 coordinates;
uniform mat4 u_projection;
uniform lowp vec4 u_minimapViewportBoxColor;

varying lowp vec4 minimapViewportBoxColor;

void main(void) {
  gl_Position = u_projection * vec4(coordinates, 0.0, 1.0);
  minimapViewportBoxColor = u_minimapViewportBoxColor;
}
`,`
varying lowp vec4 minimapViewportBoxColor;

void main(void) {
 gl_FragColor = minimapViewportBoxColor;
}
`),this.setShaderUniforms(a),n.clearColor(0,0,0,0),n.disable(n.DEPTH_TEST),this.defaultRelColor=a.defaultRelationshipColor,this.defaultNodeColor=a.defaultNodeColor,this.disableRelColor=a.disabledItemStyles.color,this.disableNodeColor=a.disabledItemStyles.color,n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this.gl=n,this.activeNodes={},this.canvas=n.canvas,this.projection=N0(),this.setData({nodes:i.items,rels:o.items}),this.createPositionTexture(),this.setupViewportRendering(a.minimapViewportBoxColor)},e=[{key:"setShaderUniforms",value:function(t){var n,i,o,a,s,u=t.nodeBorderStyles,l=null;((n=u.default)===null||n===void 0?void 0:n.rings.length)>0&&(l=(s=u.default.rings[0])===null||s===void 0?void 0:s.color);var c,f,h=null,d=null,v=(i=(o=u.selected)===null||o===void 0?void 0:o.rings)!==null&&i!==void 0?i:[],p=v.length;p>1&&(d=(c=v[p-2])===null||c===void 0?void 0:c.color,h=(f=v[p-1])===null||f===void 0?void 0:f.color);var m=null;(a=u.selected)!==null&&a!==void 0&&a.shadow&&(m=u.selected.shadow.color),this.nodeShader.use(),(0,jr.isNil)(l)?this.nodeShader.setUniform("u_drawDefaultBorder",0):(this.nodeShader.setUniform("u_nodeBorderColor",Lm(l)),this.nodeShader.setUniform("u_drawDefaultBorder",1));var y=Lm(h),b=Lm(d),g=Lm(m);this.nodeShader.setUniform("u_selectedBorderColor",y),this.nodeShader.setUniform("u_selectedInnerBorderColor",b),this.nodeShader.setUniform("u_shadowColor",g)}},{key:"setData",value:function(t){var n=pC(t.rels,this.disableRelColor);this.setupNodeRendering(t.nodes),this.setupRelationshipRendering(n)}},{key:"render",value:function(t,n,i){var o,a=this.gl,s=this.idToIndex,u=lT(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=s[l.id];this.posBuffer[4*c+0]=l.x,this.posBuffer[4*c+1]=l.y}}catch(f){u.e(f)}finally{u.f()}a.bindTexture(a.TEXTURE_2D,this.posTexture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,Nt,Nt,0,a.RGBA,a.FLOAT,this.posBuffer),a.enable(a.BLEND),a.bindFramebuffer(a.FRAMEBUFFER,null),a.clear(a.COLOR_BUFFER_BIT),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),this.renderAnimations(this.posTexture),this.numRels>0&&(this.relShader.use(),this.relShader.setUniform("u_positions",this.posTexture),a.bindBuffer(a.ARRAY_BUFFER,this.relBuffer),this.relShader.setAttributePointerByteNorm("a_color",4,0,16),this.relShader.setAttributePointerByteNorm("a_from",2,4,16),this.relShader.setAttributePointerByteNorm("a_to",2,6,16),this.relShader.setAttributePointerByteNorm("a_triside",1,8,16),this.relShader.setAttributePointerFloat("a_width",1,12,16),a.drawArrays(a.TRIANGLES,0,6*this.numRels)),this.numNodes>0&&(this.nodeShader.use(),this.nodeShader.setUniform("u_positions",this.posTexture),a.bindBuffer(a.ARRAY_BUFFER,this.nodeBuffer),this.nodeShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeShader.setAttributePointerByteNorm("a_selected",1,4,12),this.nodeShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeShader.setAttributePointerByte("a_size",4,8,12),this.nodeShader.setAttributePointerByteNorm("a_hovered",1,9,12),a.drawArrays(a.POINTS,0,this.numNodes))}},{key:"renderViewbox",value:function(){var t=this.gl,n=this.projection,i=this.viewportBoxBuffer;this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_projection",n),t.bindBuffer(t.ARRAY_BUFFER,i),this.viewportBoxShader.setAttributePointerFloat("coordinates",2,0,0),t.drawArrays(t.LINES,0,8)}},{key:"updateNodes",value:function(t){var n,i=this.gl,o=this.idToIndex,a=this.disableNodeColor,s=this.nodeBuffer,u=this.nodeDataByte,l=!1,c=lT(t);try{for(c.s();!(n=c.n()).done;){var f=n.value,h=o[f.id];if(!(0,jr.isNil)(f.color)||f.disabled===!0){var d=cg(f.disabled===!0?a:f.color);this.nodeDataByte[3*h*4+0]=d[0],this.nodeDataByte[3*h*4+1]=d[1],this.nodeDataByte[3*h*4+2]=d[2],this.nodeDataByte[3*h*4+3]=255*d[3],l=!0}if(f.selected!==void 0){var v=f.selected;this.nodeDataByte[3*h*4+4]=v?255:0,l=!0}if(f.activated!==void 0&&(this.nodeDataByte[3*h*4+7]=f.activated?255:0,l=!0,f.activated?this.activeNodes[f.id]=!0:delete this.activeNodes[f.id]),f.hovered!==void 0){var p=f.disabled!==!0&&f.hovered;this.nodeDataByte[3*h*4+9]=p?255:0,l=!0}if(f.size!==void 0){var m=f.size;this.nodeDataByte[3*h*4+8]=m||kn,l=!0}}}catch(y){c.e(y)}finally{c.f()}l&&(i.bindBuffer(i.ARRAY_BUFFER,s),i.bufferData(i.ARRAY_BUFFER,u,i.DYNAMIC_DRAW))}},{key:"updateRelationships",value:function(t){var n,i=pC(t,this.disableRelColor),o=this.gl,a=!1,s=lT(i);try{for(s.s();!(n=s.n()).done;){var u=n.value,l=u.key,c=u.width,f=u.color,h=u.disabled,d=this.relIdToIndex[l],v=(0,jr.isNil)(f)?this.defaultRelColor:f,p=Mm(h?this.disableRelColor:v);this.relData.positionsAndColors[d*di+0]=p,this.relData.positionsAndColors[d*di+4]=p,this.relData.positionsAndColors[d*di+8]=p,this.relData.positionsAndColors[d*di+12]=p,this.relData.positionsAndColors[d*di+16]=p,this.relData.positionsAndColors[d*di+20]=p,a=!0,c!==void 0&&(this.relData.widths[d*di+3]=c,this.relData.widths[d*di+7]=c,this.relData.widths[d*di+11]=c,this.relData.widths[d*di+15]=c,this.relData.widths[d*di+19]=c,this.relData.widths[d*di+23]=c,a=!0)}}catch(m){s.e(m)}finally{s.f()}a&&(o.bindBuffer(o.ARRAY_BUFFER,this.relBuffer),o.bufferData(o.ARRAY_BUFFER,this.relDataBuffer,o.DYNAMIC_DRAW))}},{key:"createPositionTexture",value:function(){var t=this.gl,n=t.createTexture(),i=new Float32Array(262144);t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,Nt,Nt,0,t.RGBA,t.FLOAT,i),this.posTexture=n,this.posBuffer=i}},{key:"updateViewportBox",value:function(t,n,i,o,a){var s=this.gl,u=Vr(),l=o*u,c=a*u,f=(.5*l+n*t)/t,h=(.5*c+i*t)/t,d=(.5*-l+n*t)/t,v=(.5*-c+i*t)/t,p=[f,h,d,h,d,h,d,v,d,v,f,v,f,v,f,h];s.bindBuffer(s.ARRAY_BUFFER,this.viewportBoxBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(p),s.DYNAMIC_DRAW)}},{key:"updateViewport",value:function(t,n,i){var o=this.gl,a=1/t,s=n-o.drawingBufferWidth*a*.5,u=i-o.drawingBufferHeight*a*.5,l=o.drawingBufferWidth*a,c=o.drawingBufferHeight*a,f=N0(),h=RJ*Vr();wC(f,s,s+l,u+c,u,0,1e6),this.nodeShader.use(),this.nodeShader.setUniform("u_zoom",t),this.nodeShader.setUniform("u_glAdjust",h),this.nodeShader.setUniform("u_projection",f),this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_zoom",t),this.nodeAnimShader.setUniform("u_glAdjust",h),this.nodeAnimShader.setUniform("u_projection",f),this.relShader.use(),this.relShader.setUniform("u_glAdjust",h),this.relShader.setUniform("u_projection",f),this.projection=f}},{key:"setupViewportRendering",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uP;this.viewportBoxBuffer=this.gl.createBuffer(),this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_minimapViewportBoxColor",[(t=cg(n))[0]/255,t[1]/255,t[2]/255,t[3]])}},{key:"setupNodeRendering",value:function(t){var n=this.gl,i=new ArrayBuffer(8),o=new Uint32Array(i),a=new Uint8Array(i);this.nodeBuffer===void 0&&(this.nodeBuffer=n.createBuffer()),this.numNodes=t.length;var s=new ArrayBuffer(3*t.length*8),u=new Uint32Array(s),l={};this.activeNodes={};for(var c=0;c<t.length;c++){var f=t[c],h=f.selected,d=f.hovered,v=f.color,p=f.activated,m=f.size,y=f.id,b=f.disabled,g=Mm((0,jr.isNil)(v)?this.defaultNodeColor:v);u[3*c+0]=b?Mm(this.disableNodeColor):g,a[0]=h?255:0,a[1]=c%Nt,a[2]=Math.floor(c/Nt),a[3]=p?255:0,a[4]=!b&&d?255:0,p&&(this.activeNodes[y]=!0),u[3*c+1]=o[0],u[3*c+2]=m??kn,u[3*c+3]=o[1],l[y]=c}n.bindBuffer(n.ARRAY_BUFFER,this.nodeBuffer),n.bufferData(n.ARRAY_BUFFER,u,n.DYNAMIC_DRAW),this.numNodes=t.length,this.nodeDataByte=new Uint8Array(s),this.idToIndex=l}},{key:"setupRelationshipRendering",value:function(t){var n=this,i=this.gl,o=new ArrayBuffer(4),a=new Uint32Array(o),s=new Uint8Array(o),u={};this.relBuffer===void 0&&(this.relBuffer=i.createBuffer());for(var l=new ArrayBuffer(t.length*di*4),c=new Uint32Array(l),f=new Float32Array(l),h=function(v){var p=t[v],m=p.from,y=p.to,b=p.color,g=p.width,_=g===void 0?1:g,w=p.key,x=p.disabled,E=n.idToIndex[m],O=n.idToIndex[y],C=E%Nt,A=Math.floor(E/Nt),R=O%Nt,k=Math.floor(O/Nt),D=[C,A,R,k],L=[R,k,C,A],j=(0,jr.isNil)(b)?n.defaultRelColor:b,q=Mm(x?n.disableRelColor:j);u[w]=v;var B=0,U=function(W,H,Y,Z){c[v*di+B]=W,B+=1;for(var ce=0;ce<H.length;ce++)s[ce]=H[ce];c[v*di+B]=a[0],B+=1,s[0]=Y,c[v*di+B]=a[0],f[v*di+(B+=1)]=Z,B+=1};U(q,D,255,_),U(q,L,0,_),U(q,D,0,_),U(q,L,0,_),U(q,D,0,_),U(q,L,255,_)},d=0;d<t.length;d++)h(d);i.bindBuffer(i.ARRAY_BUFFER,this.relBuffer),i.bufferData(i.ARRAY_BUFFER,l,i.DYNAMIC_DRAW),this.numRels=t.length,this.relDataBuffer=l,this.relData={positionsAndColors:c,widths:f},this.relIdToIndex=u}},{key:"renderAnimations",value:function(t){var n=this.gl,i=this.nodeBuffer,o=this.numNodes,a=Date.now()%1e3/1e3,s=a<.7?a/.7:0;this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_positions",t),this.nodeAnimShader.setUniform("u_animPos",s),n.bindBuffer(n.ARRAY_BUFFER,i),this.nodeAnimShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeAnimShader.setAttributePointerByteNorm("a_active",1,7,12),this.nodeAnimShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeAnimShader.setAttributePointerByte("a_size",4,8,12),n.drawArrays(n.POINTS,0,o)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.nodeBuffer),this.gl.deleteBuffer(this.relBuffer),this.nodeShader.remove(),this.nodeAnimShader.remove(),this.relShader.remove()}}],e&&dte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),_U=function(r,e,t){var n=Vr();r.width=e*n,r.height=t*n,r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px")},wU=function(r){Pr.warn("Error: WebGL context lost - visualization will stop working!",r),LC!==void 0&&LC(r)},f0=function(r){var e=r.parentElement,t=e.getBoundingClientRect(),n=t.width,i=t.height;n!==0||i!==0||e.isConnected||(n=parseInt(e.style.width,10)||0,i=parseInt(e.style.height,10)||0),_U(r,n,i)},cT=function(r,e){var t=document.createElement("canvas");return Object.assign(t.style,LB),r!==void 0&&(r.appendChild(t),f0(t)),(function(n,i){LC=i,n.addEventListener("webglcontextlost",wU)})(t,e),t},Mh=function(r){r.width=0,r.height=0,r.remove()},Xj=function(r){var e={antialias:!0},t=r.getContext("webgl",e);return t===null&&(t=r.getContext("experimental-webgl",e)),(function(n){return n instanceof WebGLRenderingContext})(t)?t:null},$j=function(r){r.canvas.removeEventListener("webglcontextlost",wU);var e=r.getExtension("WEBGL_lose_context");e==null||e.loseContext()};function Nm(r){return(function(e){if(Array.isArray(e))return jC(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||EU(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function NC(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=EU(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function EU(r,e){if(r){if(typeof r=="string")return jC(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?jC(r,e):void 0}}function jC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var vte=kn*Vr();function kp(r){return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(r)}function Kj(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function jm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kj(Object(t),!0).forEach(function(n){pte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kj(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function pte(r,e,t){return(e=(function(n){var i=(function(o){if(kp(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(kp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return kp(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var U0=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,t={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},n=0;n<r.length;n++)t.minX>r[n].x&&(t.minX=r[n].x),t.minY>r[n].y&&(t.minY=r[n].y),t.maxX<r[n].x&&(t.maxX=r[n].x),t.maxY<r[n].y&&(t.maxY=r[n].y);var i=(t.minX+t.maxX)/2,o=(t.minY+t.maxY)/2,a=2*e,s=Vr()*a;return{centerX:i,centerY:o,nodesWidth:t.maxX-t.minX+a+s,nodesHeight:t.maxY-t.minY+a+s}},FC=function(r,e,t,n){var i=1/0,o=1/0;return r>1&&(i=t/r),e>1&&(o=n/e),{zoomX:i,zoomY:o}},OU=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0,i=Math.min(r,e);return Math.min(n,Math.max(t,i))},Dp=function(r,e,t,n){return Math.max(Math.min(e,t),Math.min(r,n))},fT=function(r,e,t,n,i,o){var a=e;return(function(s,u,l){return s<u&&s<l})(i,o,e)&&r.length>1?(a=(function(s,u,l){var c=(function(p){var m=new Array(4).fill(p[0]);return p.forEach(function(y){m[0]=y.x<m[0].x?m[0]:jm({},y),m[1]=y.y<m[1].y?m[1]:jm({},y),m[2]=y.x<m[2].x?jm({},y):m[2],m[3]=y.y<m[3].y?jm({},y):m[3]}),m})(s),f=(function(){for(var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=0,y=0,b=0;b<p.length;b++)for(var g=b+1;g<p.length;g++)m=Math.hypot(Math.abs(p[b].x-p[g].x),Math.abs(p[b].y-p[g].y)),y=Math.max(y,m);return y})(c),h=2*l,d=Vr()*h,v=u.height<=u.width?u.height-h-d:u.width-h-d;return f>v?.9*v/f:.9*f/v})(r,n,25),Dp(i,o,Math.min(e,a),t)):Dp(i,o,e,t)};function Mp(r){return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(r)}function gte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,xU(n.key),n)}}function xU(r){var e=(function(t){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Mp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Mp(e)=="symbol"?e:e+""}var yte=(function(){return r=function t(){var n,i,o;(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,o=void 0,(i=xU(i="callbacks"))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.callbacks={}},e=[{key:"register",value:function(t,n){this.isCallbackRegistered(t)||(this.callbacks[t]=[]),this.callbacks[t].push(n)}},{key:"isCallbackRegistered",value:function(t){return this.callbacks[t]!==void 0}},{key:"callIfRegistered",value:function(){var t,n=arguments,i=Array.prototype.slice.call(arguments)[0];t=i,vJ.includes(t)&&this.isCallbackRegistered(i)&&this.callbacks[i].slice(0).forEach(function(o){return o.apply(null,Array.prototype.slice.call(n,1))})}}],e&&gte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})(),mte=pn(481),hT=pn.n(mte);function Lp(r){return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(r)}function bte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,SU(n.key),n)}}function Xu(r,e,t){return(e=SU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SU(r){var e=(function(t){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Lp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Lp(e)=="symbol"?e:e+""}var Zj=5e-5,_te=(function(){return r=function t(n){var i,o=this,a=n.state,s=n.getNodePositions,u=n.canvas;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),Xu(this,"xCtrl",void 0),Xu(this,"yCtrl",void 0),Xu(this,"zoomCtrl",void 0),Xu(this,"getNodePositions",void 0),Xu(this,"firstUpdate",void 0),Xu(this,"state",void 0),Xu(this,"canvas",void 0),Xu(this,"stateDisposers",void 0),this.state=a,this.getNodePositions=s,this.canvas=u,this.xCtrl=new(hT())(.35,Zj,.05,1),this.yCtrl=new(hT())(.35,Zj,.05,1),this.zoomCtrl=new(hT())(.3,1e-5,.01,1),this.stateDisposers=[],this.stateDisposers.push(a.autorun(function(){a.fitNodeIds===null&&(o.xCtrl.reset(),o.yCtrl.reset(),o.zoomCtrl.reset())})),this.stateDisposers.push(a.autorun(function(){i!==a.fitNodeIds&&(i=a.fitNodeIds,o.firstUpdate=!0)})),this.stateDisposers.push(a.autorun(function(){a.resetZoom&&(o.firstUpdate=!0)}))},e=[{key:"needsToRun",value:function(){var t=this.state,n=t.fitNodeIds,i=t.resetZoom;return n.length>0||i}},{key:"update",value:function(t,n){var i=this.state,o=i.fitNodeIds,a=i.resetZoom;o.length>0?this.fitNodes(o,t,n):a&&this.reset(t,n)}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){return t()})}},{key:"recalculateTarget",value:function(t,n,i,o){for(var a=this.xCtrl,s=this.yCtrl,u=this.zoomCtrl,l=this.state,c=[],f=0;f<t.length;f++)c.push({id:t[f]});var h=l.zoom,d=l.panX,v=l.panY,p=l.maxNodeRadius,m=l.nodes,y=l.defaultZoomLevel,b=this.getNodePositions(c);m.updatePositions(b);var g=U0(b,p),_=g.centerX,w=g.centerY,x=g.nodesWidth,E=g.nodesHeight;if(isNaN(_)||isNaN(w))return Pr.info("fit() function couldn't calculate center point, not updating viewport"),!1;var O=n.noPan,C=n.outOnly,A=n.minZoom,R=n.maxZoom;a.setTarget(O?d:_),s.setTarget(O?v:w);var k=FC(x,E,i,o),D=k.zoomX,L=k.zoomY;if(D===1/0&&L===1/0)u.setTarget(y);else{var j=OU(D,L,A,R);C&&h<j?u.setTarget(h):u.setTarget(j)}return!0}},{key:"allNodesAreVisible",value:function(t,n,i){var o=FC(n,i,this.canvas.width,this.canvas.height),a=o.zoomX,s=o.zoomY;return t<a&&t<s}},{key:"reset",value:function(t,n){var i=this.xCtrl,o=this.yCtrl,a=this.zoomCtrl,s=this.state,u=this.firstUpdate,l=this.canvas,c=s.zoom,f=s.panX,h=s.panY,d=s.nodes,v=s.maxNodeRadius,p=s.defaultZoomLevel;if(u||t){a.setTarget(p);var m=U0(Object.values(d.idToPosition),v),y=m.centerX,b=m.centerY,g=m.nodesWidth,_=m.nodesHeight;this.allNodesAreVisible(c,g,_)?(i.setTarget(y),o.setTarget(b)):(i.setTarget(f),o.setTarget(h)),this.firstUpdate=!1}var w=c+a.update(c),x=f+i.update(f),E=h+o.update(h);s.updateZoomToFit(w,x,E,l),Math.abs(a.target-w)<.01&&(s.updateZoomToFit(p,x,E,l),s.clearReset(),n!==void 0&&n())}},{key:"fitNodes",value:function(t,n,i){var o=this.state,a=this.firstUpdate,s=this.canvas,u=this.xCtrl,l=this.yCtrl,c=this.zoomCtrl,f=o.zoomOptions,h=f===void 0?{}:f,d=o.zoom,v=o.panX,p=o.panY,m=!0;if(a||n){var y=s.width,b=s.height;m=this.recalculateTarget(t,h,y,b),this.firstUpdate=!1}if(m){if(!h.animated)return o.setZoomPan(c.target,u.target,l.target,s),void o.clearFit();var g=v+u.update(v),_=p+l.update(p),w=d+c.update(d);o.updateZoomToFit(w,g,_,s);var x=Math.max(5,10/c.target),E=Math.min(.01,.01*c.target);!n&&Math.abs(c.target-w)<E&&Math.abs(u.target-g)<x&&Math.abs(l.target-_)<x&&(o.setZoom(c.target,s),o.clearFit(),i!==void 0&&i())}}}],e&&bte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function Np(r){return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(r)}function BC(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function o(d,v,p,m){var y=v&&v.prototype instanceof s?v:s,b=Object.create(y.prototype);return Do(b,"_invoke",(function(g,_,w){var x,E,O,C=0,A=w||[],R=!1,k={p:0,n:0,v:r,a:D,f:D.bind(r,4),d:function(L,j){return x=L,E=0,O=r,k.n=j,a}};function D(L,j){for(E=L,O=j,e=0;!R&&C&&!q&&e<A.length;e++){var q,B=A[e],U=k.p,W=B[2];L>3?(q=W===j)&&(O=B[(E=B[4])?5:(E=3,3)],B[4]=B[5]=r):B[0]<=U&&((q=L<2&&U<B[1])?(E=0,k.v=j,k.n=B[1]):U<W&&(q=L<3||B[0]>j||j>W)&&(B[4]=L,B[5]=j,k.n=W,E=0))}if(q||L>1)return a;throw R=!0,j}return function(L,j,q){if(C>1)throw TypeError("Generator is already running");for(R&&j===1&&D(j,q),E=j,O=q;(e=E<2?r:O)||!R;){x||(E?E<3?(E>1&&(k.n=-1),D(E,O)):k.n=O:k.v=O);try{if(C=2,x){if(E||(L="next"),e=x[L]){if(!(e=e.call(x,O)))throw TypeError("iterator result is not an object");if(!e.done)return e;O=e.value,E<2&&(E=0)}else E===1&&(e=x.return)&&e.call(x),E<2&&(O=TypeError("The iterator does not provide a '"+L+"' method"),E=1);x=r}else if((e=(R=k.n<0)?O:g.call(_,k))!==a)break}catch(B){x=r,E=1,O=B}finally{C=1}}return{value:e,done:R}}})(d,p,m),!0),b}var a={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(Do(e={},n,function(){return this}),e),f=l.prototype=s.prototype=Object.create(c);function h(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,l):(d.__proto__=l,Do(d,i,"GeneratorFunction")),d.prototype=Object.create(f),d}return u.prototype=l,Do(f,"constructor",l),Do(l,"constructor",u),u.displayName="GeneratorFunction",Do(l,i,"GeneratorFunction"),Do(f),Do(f,i,"Generator"),Do(f,n,function(){return this}),Do(f,"toString",function(){return"[object Generator]"}),(BC=function(){return{w:o,m:h}})()}function Do(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Do=function(o,a,s,u){if(a)i?i(o,a,{value:s,enumerable:!u,configurable:!u,writable:!u}):o[a]=s;else{var l=function(c,f){Do(o,c,function(h){return this._invoke(c,f,h)})};l("next",0),l("throw",1),l("return",2)}},Do(r,e,t,n)}function Qj(r,e,t,n,i,o,a){try{var s=r[o](a),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function Jj(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function e5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Pi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(t),!0).forEach(function(n){er(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):e5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,TU(n.key),n)}}function er(r,e,t){return(e=TU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TU(r){var e=(function(t){if(Np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Np(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return Np(e)=="symbol"?e:e+""}var Fm="NvlController",Bm={filename:"visualisation.png",backgroundColor:"rgba(0,0,0,0)"},Lh="onError",t5="onLayoutDone",r5="onLayoutStep",q0={},qv=function(){var r;return(r=q0[arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default"])!==null&&r!==void 0?r:Object.values(q0).pop()},Ete=(function(){return r=function i(o,a){var s,u,l,c=this;(function(B,U){if(!(B instanceof U))throw new TypeError("Cannot call a class as a function")})(this,i),er(this,"destroyed",void 0),er(this,"state",void 0),er(this,"callbacks",void 0),er(this,"instanceId",void 0),er(this,"glController",void 0),er(this,"webGLContext",void 0),er(this,"webGLMinimapContext",void 0),er(this,"htmlOverlay",void 0),er(this,"hasResized",void 0),er(this,"hierarchicalLayout",void 0),er(this,"gridLayout",void 0),er(this,"freeLayout",void 0),er(this,"d3ForceLayout",void 0),er(this,"forceLayout",void 0),er(this,"canvasRenderer",void 0),er(this,"glCanvas",void 0),er(this,"canvasRect",void 0),er(this,"glMinimapCanvas",void 0),er(this,"c2dCanvas",void 0),er(this,"isInRenderSwitchAnimation",void 0),er(this,"justSwitchedRenderer",void 0),er(this,"justSwitchedLayout",void 0),er(this,"layoutUpdating",void 0),er(this,"layoutComputing",void 0),er(this,"isRenderingDisabled",void 0),er(this,"setRenderSwitchAnimation",void 0),er(this,"stateDisposers",void 0),er(this,"zoomTransitionHandler",void 0),er(this,"currentLayout",void 0),er(this,"layoutTimeLimit",void 0),er(this,"pixelRatio",void 0),er(this,"removeResizeListener",void 0),er(this,"removeMinimapResizeListener",void 0),er(this,"pendingZoomOperation",void 0),er(this,"layoutRunner",void 0),er(this,"animationRequestId",void 0),er(this,"layoutDoneCallback",void 0),er(this,"layoutComputingCallback",void 0),er(this,"currentLayoutType",void 0),er(this,"descriptionElement",void 0),this.destroyed=!1;var f=a.frame,h=a.minimapContainer,d=h===void 0?document.createElement("span"):h,v=a.layoutOptions,p=a.layout,m=a.instanceId,y=m===void 0?"default":m,b=a.disableAria,g=b!==void 0&&b,_=o.nodes,w=o.rels,x=o.webGLVisible,E=o.disableWebGL;this.state=o,this.callbacks=new yte,this.instanceId=y;var O=f;O.setAttribute("instanceId",y),O.setAttribute("data-testid","nvl-parent"),(s=O.style.height)!==null&&s!==void 0&&s.length||Object.assign(O.style,{height:"100%"}),(u=O.style.outline)!==null&&u!==void 0&&u.length||Object.assign(O.style,{outline:"none"}),this.descriptionElement=g?document.createElement("div"):(function(B,U){var W;B.setAttribute("role","img"),B.setAttribute("aria-label","Graph visualization");var H="nvl-".concat(U,"-description"),Y=(W=document.getElementById(H))!==null&&W!==void 0?W:document.createElement("div");return Y.innerHTML="",Y.id="nvl-".concat(U,"-description"),Y.setAttribute("role","status"),Y.setAttribute("aria-live","polite"),Y.setAttribute("aria-atomic","false"),Y.style.display="none",B.appendChild(Y),B.setAttribute("aria-describedby",Y.id),Y})(O,y);var C=cT(O,this.onWebGLContextLost.bind(this)),A=cT(d,this.onWebGLContextLost.bind(this));if(C.setAttribute("data-testid","nvl-gl-canvas"),E)this.glController=new hte;else{var R=Xj(C),k=Xj(A);this.glController=new fte({mainSceneRenderer:new Yj(R,_,w,this.state),minimapRenderer:new Yj(k,_,w,this.state),state:o}),this.webGLContext=R,this.webGLMinimapContext=k}var D=cT(O,this.onWebGLContextLost.bind(this));D.setAttribute("data-testid","nvl-c2d-canvas");var L=D.getContext("2d"),j=document.createElement("div");Object.assign(j.style,Pi(Pi({},LB),{},{overflow:"hidden"})),O.appendChild(j),this.htmlOverlay=j,this.hasResized=!0,this.hierarchicalLayout=new mee(Pi(Pi({},v),{},{state:this.state})),this.gridLayout=new aee({state:this.state}),this.freeLayout=new nee({state:this.state}),this.d3ForceLayout=new jJ({state:this.state}),this.forceLayout=E?this.d3ForceLayout:new eee(Pi(Pi({},v),{},{webGLContext:this.webGLContext,state:this.state})),this.state.setLayout(p),this.state.setLayoutOptions(v);var q=new lte(D,L,o,a);this.canvasRenderer=q,this.glCanvas=C,this.canvasRect=C.getBoundingClientRect(),this.glMinimapCanvas=A,this.c2dCanvas=D,this.glCanvas.style.opacity=x?"1":"0",this.c2dCanvas.style.opacity=x?"0":"1",this.isInRenderSwitchAnimation=!1,this.justSwitchedRenderer=!1,this.justSwitchedLayout=!1,this.hasResized=!1,this.layoutUpdating=!1,this.layoutComputing=!1,this.isRenderingDisabled=!1,_.addChannel(Fm),w.addChannel(Fm),this.setRenderSwitchAnimation=function(){c.isInRenderSwitchAnimation=!1},this.stateDisposers=[],this.stateDisposers.push(o.autorun(function(){c.callIfRegistered("zoom",o.zoom)})),this.stateDisposers.push(o.autorun(function(){c.callIfRegistered("pan",{panX:o.panX,panY:o.panY})})),this.stateDisposers.push(o.autorun(function(){c.setLayout(o.layout)})),this.stateDisposers.push(o.autorun(function(){c.setLayoutOptions(o.layoutOptions)})),g||this.stateDisposers.push(o.autorun(function(){(function(B,U){var W=B.nodes,H=B.rels,Y=B.layout,Z=W.items.length,ce=H.items.length;if(Z!==0||ce!==0){var $="".concat(Z," node").concat(Z!==1?"s":""),K="".concat(ce," relationship").concat(ce!==1?"s":""),ie="displayed using a ".concat(Y??"forceDirected"," layout");U.innerHTML="A graph visualization with ".concat($," and ").concat(K,", ").concat(ie,".")}else U.innerHTML="An empty graph visualization."})(o,c.descriptionElement)})),this.stateDisposers.push(o.autorun(function(){var B=o.webGLVisible?"1":"0";B!==c.glCanvas.style.opacity&&(c.justSwitchedRenderer=!0,c.glCanvas.style.opacity=B,c.c2dCanvas.style.opacity=o.webGLVisible?"0":"1")})),this.startMainLoop(),this.zoomTransitionHandler=new _te({state:o,getNodePositions:function(B){return c.currentLayout.getNodePositions(B)},canvas:C}),this.layoutTimeLimit=(l=a.layoutTimeLimit)!==null&&l!==void 0?l:16,this.pixelRatio=Vr(),this.removeResizeListener=qN()(O,function(){f0(C),f0(D),c.canvasRect=C.getBoundingClientRect(),c.hasResized=!0}),this.removeMinimapResizeListener=qN()(d,function(){f0(A)}),q0[y]=this,window.__Nvl_dumpNodes=function(B){var U;return(U=qv(B))===null||U===void 0?void 0:U.dumpNodes()},window.__Nvl_dumpRelationships=function(B){var U;return(U=qv(B))===null||U===void 0?void 0:U.dumpRelationships()},window.__Nvl_registerDoneCallback=function(B,U){var W;return(W=qv(U))===null||W===void 0?void 0:W.on(t5,B)},window.__Nvl_getNodesOnScreen=function(B){var U;return(U=qv(B))===null||U===void 0?void 0:U.getNodesOnScreen()},window.__Nvl_getZoomLevel=function(B){var U;return(U=qv(B))===null||U===void 0?void 0:U.getScale()},this.pendingZoomOperation=null},e=[{key:"onWebGLContextLost",value:function(i){this.callIfRegistered("onWebGLContextLost",i)}},{key:"updateMinimapZoom",value:function(){var i=this.state,o=i.nodes,a=i.maxNodeRadius,s=i.maxMinimapZoom,u=i.minMinimapZoom,l=U0(Object.values(o.idToPosition),a),c=l.centerX,f=l.centerY,h=l.nodesWidth,d=l.nodesHeight,v=FC(h,d,this.glMinimapCanvas.width,this.glMinimapCanvas.height),p=v.zoomX,m=v.zoomY,y=OU(p,m,u,s);this.state.updateMinimapZoomToFit(y,c,f)}},{key:"startMainLoop",value:function(){var i=this,o=this.state,a=o.nodes,s=o.rels;this.currentLayout.update();var u=this.currentLayout.getNodePositions(a.items);a.updatePositions(u),this.isRenderingDisabled||(this.glController.renderMainScene(u),this.glController.renderMinimap(u),this.canvasRenderer.processUpdates(),this.canvasRenderer.render(u)),this.layoutRunner=setInterval(function(){try{(function(){var c=i.currentLayout.getShouldUpdate(),f=c||i.justSwitchedLayout,h=f&&!i.layoutUpdating&&!i.justSwitchedLayout;if(f)for(var d=window.performance.now(),v=h?0:50,p=0;p<v;p++){i.currentLayout.update(i.justSwitchedLayout),i.justSwitchedLayout=!1;var m=window.performance.now();if(!c||m-d>i.layoutTimeLimit)break}})()}catch(c){if(!i.callbacks.isCallbackRegistered(Lh))throw c;i.callIfRegistered(Lh,c)}},13);var l=function(){try{(function(c){if(i.destroyed)Pr.info("STEP IN A DESTROYED STRIP");else{var f=Vr();if(f!==i.pixelRatio)return i.pixelRatio=f,void i.callIfRegistered("restart");var h=i.currentLayout.getShouldUpdate(),d=h||i.justSwitchedLayout,v=i.currentLayout.getComputing(),p=i.zoomTransitionHandler.needsToRun(),m=d&&!i.layoutUpdating&&!i.justSwitchedLayout,y=i.layoutComputing&&!v,b=i.state.webGLVisible&&i.glController.needsToRun(),g=!i.state.webGLVisible&&i.canvasRenderer.needsToRun(),_=i.isInRenderSwitchAnimation||i.justSwitchedRenderer,w=i.hasResized,x=i.pendingZoomOperation!==null,E=i.glController.minimapMouseDown;if(a.clearChannel(Fm),s.clearChannel(Fm),p||d||y||_||b||g||E||w||x){!x||m||i.currentLayout.getComputing()||(i.pendingZoomOperation(),i.pendingZoomOperation=null);var O=h||v||y;i.zoomTransitionHandler.update(O,function(){return i.callIfRegistered("onZoomTransitionDone")}),w&&i.glController.onResize();var C=i.currentLayout.getNodePositions(a.items);if(a.updatePositions(C),i.callbacks.isCallbackRegistered(r5)&&i.callIfRegistered(r5,i.dumpNodes()),i.updateMinimapZoom(),i.glController.renderMinimap(C),!i.isRenderingDisabled){if((i.state.webGLVisible||_)&&i.glController.renderMainScene(C),!i.state.webGLVisible||_){i.canvasRenderer.processUpdates(),i.canvasRenderer.render(C);for(var A=0;A<s.items.length;A++){var R=s.items[A].id,k=i.canvasRenderer.arrowBundler.getBundle(s.items[A]),D=s.idToHtmlOverlay[R],L=k.labelInfo[R];if(D&&L){var j=L.rotation,q=L.position,B=L.width,U=L.height,W=i.mapCanvasSpaceToRelativePosition(q.x,q.y),H=W.x,Y=W.y,Z=B>5&&!i.state.webGLVisible;Object.assign(D.style,{top:"".concat(Y,"px"),left:"".concat(H,"px"),width:"".concat(B,"px"),height:"".concat(U,"px"),display:Z?"block":"none",transform:"translate(-50%, -50%) scale(".concat(Number(i.state.zoom),") rotate(").concat(j,"rad")})}}}for(var ce=0;ce<a.items.length;ce++){var $=a.items[ce],K=$.id,ie=$.size,ae=a.idToHtmlOverlay[K];if(ae){var le=i.state.nodes.idToPosition[K],te=i.mapCanvasSpaceToRelativePosition(le.x,le.y),ee=te.x,re=te.y,he="".concat(2*(ie??kn),"px");Object.assign(ae.style,{top:"".concat(re,"px"),left:"".concat(ee,"px"),width:he,height:he,transform:"translate(-50%, -50%) scale(".concat(Number(i.state.zoom),")")})}}}}var ve=!d&&i.layoutUpdating,_e=v!==i.layoutComputing;i.layoutComputing=v,i.layoutUpdating=d,ve&&i.callIfRegistered(t5),_e&&i.callIfRegistered("onLayoutComputing",v),i.justSwitchedRenderer=!1,i.hasResized=!1,c!==void 0&&c()}})(function(){i.animationRequestId=window.requestAnimationFrame(l)})}catch(c){if(!i.callbacks.isCallbackRegistered(Lh))throw c;i.callIfRegistered(Lh,c)}};this.animationRequestId=window.requestAnimationFrame(l)}},{key:"updateHtmlOverlay",value:function(){this.state.nodes.updateHtmlOverlay(this.htmlOverlay),this.state.rels.updateHtmlOverlay(this.htmlOverlay)}},{key:"dumpNodes",value:function(){var i,o=Yi(this.state.nodes.items),a=this.state.nodes.idToPosition,s=[],u=(function(h,d){var v=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!v){if(Array.isArray(h)||(v=(function(_,w){if(_){if(typeof _=="string")return Jj(_,w);var x={}.toString.call(_).slice(8,-1);return x==="Object"&&_.constructor&&(x=_.constructor.name),x==="Map"||x==="Set"?Array.from(_):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?Jj(_,w):void 0}})(h))||d){v&&(h=v);var p=0,m=function(){};return{s:m,n:function(){return p>=h.length?{done:!0}:{done:!1,value:h[p++]}},e:function(_){throw _},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,b=!0,g=!1;return{s:function(){v=v.call(h)},n:function(){var _=v.next();return b=_.done,_},e:function(_){g=!0,y=_},f:function(){try{b||v.return==null||v.return()}finally{if(g)throw y}}}})(o);try{for(u.s();!(i=u.n()).done;){var l=i.value,c=a[l.id],f=this.mapCanvasSpaceToRelativePosition(c.x,c.y);s.push(Pi(Pi({},l),{},{x:f.x,y:f.y}))}}catch(h){u.e(h)}finally{u.f()}return s}},{key:"dumpRelationships",value:function(){return Yi(this.state.rels.items)}},{key:"mapCanvasSpaceToRelativePosition",value:function(i,o){var a=this.canvasRect,s=window.devicePixelRatio||1,u=(i-this.state.panX)*this.state.zoom/s,l=(o-this.state.panY)*this.state.zoom/s;return{x:u+.5*a.width,y:l+.5*a.height}}},{key:"mapRelativePositionToCanvasSpace",value:function(i,o){var a=this.glCanvas.getBoundingClientRect(),s=window.devicePixelRatio||1,u=s*(i-.5*a.width),l=s*(o-.5*a.height);return{x:this.state.panX+u/this.state.zoom,y:this.state.panY+l/this.state.zoom}}},{key:"getNodePositions",value:function(){return Object.values(Yi(this.state.nodes.idToPosition))}},{key:"setNodePositions",value:function(i){var o=this,a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s=[],u=i.filter(function(l){var c=l.id,f=o.state.nodes.idToItem[c]!==void 0;return f||s.push(c),f});s.length>0&&Pr.warn("Failed to set positions for following nodes:",s,"They do not exist in the graph."),this.state.nodes.updatePositions(u),this.currentLayout.updateNodes(u),a||this.currentLayout.terminateUpdate(),this.hasResized=!0,this.getNodesOnScreen().nodes.length===0&&this.state.setPan(0,0),this.state.clearFit()}},{key:"isLayoutMoving",value:function(){return this.layoutUpdating}},{key:"getNodesOnScreen",value:function(){var i=this.glCanvas.getBoundingClientRect(),o=this.mapRelativePositionToCanvasSpace(0,0),a=o.x,s=o.y,u=this.mapRelativePositionToCanvasSpace(i.width,i.height);return(function(l,c,f,h,d){var v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:["node"],p=d.nodes,m=d.rels,y=Math.min(l,f),b=Math.max(l,f),g=Math.min(c,h),_=Math.max(c,h),w=[],x=[];if(v.includes("node"))for(var E=0,O=Object.values(p.idToPosition);E<O.length;E++){var C=O[E],A=C.x,R=C.y;A!==void 0&&R!==void 0&&A>y&&A<b&&R>g&&R<_&&w.push(C)}if(v.includes("relationship")){var k,D=NC(m.items);try{for(D.s();!(k=D.n()).done;){var L=k.value,j=L.from,q=L.to,B=p.idToPosition[j],U=p.idToPosition[q];if(B.x!==void 0&&B.y!==void 0&&U.x!==void 0&&U.y!==void 0){var W=B.x>y&&B.x<b&&B.y>g&&B.y<_,H=U.x>y&&U.x<b&&U.y>g&&U.y<_;W&&H&&x.push(L)}}}catch(Y){D.e(Y)}finally{D.f()}}return{nodes:w,rels:x}})(a,s,u.x,u.y,this.state,["node"])}},{key:"registerDoneCallback",value:function(i){this.layoutDoneCallback=i}},{key:"registerComputingCallback",value:function(i){this.layoutComputingCallback=i}},{key:"getPosition",value:function(i){return this.currentLayout.getNodePositions([{id:i}])[0]}},{key:"getScale",value:function(){return this.state.zoom}},{key:"getPan",value:function(){return{x:this.state.panX,y:this.state.panY}}},{key:"setZoomLevel",value:function(i){var o=this;this.pendingZoomOperation=function(){return o.state.setZoom(i,o.glCanvas)}}},{key:"setPanCoordinates",value:function(i,o){this.state.setPan(i,o)}},{key:"setZoomAndPan",value:function(i,o,a){var s=this;this.pendingZoomOperation=function(){return s.state.setZoomPan(i,o,a,s.glCanvas)}}},{key:"fit",value:function(i,o){var a=this;this.pendingZoomOperation=function(){return a.state.fitNodes(i,o)}}},{key:"resetZoom",value:function(){var i=this;this.pendingZoomOperation=function(){return i.state.setZoomReset()}}},{key:"setRenderer",value:function(i){this.state.setRenderer(i)}},{key:"on",value:function(i,o){this.callbacks.register(i,o)}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"destroy",value:function(){var i;this.destroyed||(this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.layoutRunner!==void 0&&window.clearInterval(this.layoutRunner),this.glController.destroy(),this.glCanvas.removeEventListener("transitionend",this.setRenderSwitchAnimation),this.webGLContext!==void 0&&$j(this.webGLContext),this.webGLMinimapContext!==void 0&&$j(this.webGLMinimapContext),Mh(this.glCanvas),Mh(this.glMinimapCanvas),this.canvasRenderer.destroy(),Mh(this.c2dCanvas),this.removeResizeListener(),this.removeMinimapResizeListener(),this.forceLayout.destroy(),this.hierarchicalLayout.destroy(),this.gridLayout.destroy(),this.freeLayout.destroy(),this.htmlOverlay.remove(),this.descriptionElement.remove(),this.zoomTransitionHandler.destroy(),this.stateDisposers.forEach(function(o){o()}),i=this.instanceId,delete q0[i],this.destroyed=!0)}},{key:"callIfRegistered",value:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];this.callbacks.callIfRegistered.apply(this.callbacks,arguments)}},{key:"getCanvasRelsAt",value:function(i){return this.canvasRenderer.getRelsAt(i)}},{key:"getCanvasNodesAt",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.canvasRenderer.getNodesAt(i,o)}},{key:"getLayout",value:function(i){return i===u0?this.hierarchicalLayout:i===uee?this.forceLayout:i===lee?this.gridLayout:i===cee?this.freeLayout:i===fee?this.d3ForceLayout:this.forceLayout}},{key:"setLayout",value:function(i){Pr.info("Switching to layout: ".concat(i));var o=this.currentLayoutType,a=this.getLayout(i);i==="free"&&a.setNodePositions(this.state.nodes.idToPosition),this.currentLayout=a,this.currentLayoutType=i,o&&o!==this.currentLayoutType&&(this.justSwitchedLayout=!0)}},{key:"setLayoutOptions",value:function(i){this.getLayout(this.state.layout).setOptions(i)}},{key:"getDataUrlForCanvas",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=i.toDataURL("image/png");return o?a.replace(/^data:image\/png/,"data:application/octet-stream"):a}},{key:"initiateFileDownload",value:function(i,o){var a=document.createElement("a");a.style.display="none",a.setAttribute("download",i);var s=this.getDataUrlForCanvas(o,!0);a.setAttribute("href",s),a.click()}},{key:"updateLayoutAndPositions",value:function(){var i=this.state.nodes,o=i.items;this.currentLayout.update(this.justSwitchedLayout),this.justSwitchedLayout=!1;var a=this.currentLayout.getNodePositions(o);return i.updatePositions(a),a}},{key:"saveToFile",value:function(i){var o=Pi(Pi({},Bm),i),a=this.createCanvasAndRenderImage(this.c2dCanvas.width,this.c2dCanvas.height,o.backgroundColor);this.initiateFileDownload(o.filename,a),Mh(a),a=null}},{key:"getImageDataURL",value:function(i){var o=Pi(Pi({},Bm),i),a=this.createCanvasAndRenderImage(this.c2dCanvas.width,this.c2dCanvas.height,o.backgroundColor),s=this.getDataUrlForCanvas(a);return Mh(a),a=null,s}},{key:"prepareLargeFileForDownload",value:function(i){var o=this,a=Pi(Pi({},Bm),i),s=this.currentLayout.getNodePositions(this.state.nodes.items),u=U0(s,100),l=u.nodesWidth,c=u.nodesHeight,f=u.centerX,h=u.centerY,d=Math.max(Math.min(l+100,15e3),5e3),v=Math.max(Math.min(c+100,15e3),5e3);return this.isRenderingDisabled=!0,new Promise(function(p,m){try{o.setPanCoordinates(f,h);var y=Math.max(d/l-.02,o.state.minZoom),b=Math.max(v/c-.02,o.state.minZoom);o.setZoomLevel(Math.min(y,b))}catch(g){return Pr.error("An error occurred while downloading the file"),void m(g)}setTimeout(function(){try{var g=o.createCanvasAndRenderImage(d,v,a.backgroundColor);o.initiateFileDownload(a.filename,g),Mh(g),g=null,p(!0)}catch(_){m(_)}},500)})}},{key:"createCanvasAndRenderImage",value:function(i,o,a){var s=(function(c,f){var h=document.createElement("canvas");return document.body.appendChild(h),_U(h,c,f),h})(i,o),u=(function(c){return c.getContext("2d")})(s),l=this.updateLayoutAndPositions();return this.canvasRenderer.processUpdates(),this.canvasRenderer.render(l,{canvas:s,context:u,backgroundColor:a,ignoreAnimations:!0,showCaptions:!0}),s}},{key:"saveFullGraphToLargeFile",value:(t=BC().m(function i(o){var a,s,u,l,c;return BC().w(function(f){for(;;)switch(f.n){case 0:return a=Pi(Pi({},Bm),o),s=this.state.zoom,u=this.state.panX,l=this.state.panY,f.p=1,f.n=2,this.prepareLargeFileForDownload(a);case 2:f.n=5;break;case 3:if(f.p=3,c=f.v,Pr.error("An error occurred while downloading the image"),!this.callbacks.isCallbackRegistered(Lh)){f.n=4;break}this.callIfRegistered(Lh,c),f.n=5;break;case 4:throw c;case 5:return f.p=5,this.isRenderingDisabled=!1,this.setZoomLevel(s),this.setPanCoordinates(u,l),f.f(5);case 6:return f.a(2)}},i,this,[[1,3,5,6]])}),n=function(){var i=this,o=arguments;return new Promise(function(a,s){var u=t.apply(i,o);function l(f){Qj(u,a,s,l,c,"next",f)}function c(f){Qj(u,a,s,l,c,"throw",f)}l(void 0)})},function(i){return n.apply(this,arguments)})}],e&&wte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e,t,n})();function jp(r){return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(r)}function Lb(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ote(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,xte(n.key),n)}}function Nb(r,e,t){return e&&Ote(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function xte(r){var e=(function(t){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(jp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return jp(e)=="symbol"?e:e+""}var dT=(function(){return Nb(function r(e,t){if(Lb(this,r),!e)throw new Error("Tried to create a node with no data");this.data=e,this.parent=t,this.children=[]},[{key:"addChild",value:function(r){this.children.push(r)}},{key:"isRoot",value:function(){return this.parent===null}},{key:"print",value:function(){var r=this.data.name;this.isRoot()||(r="".concat(r,"		").concat((function(n){for(var i=(Math.round(1e3*n)/1e3).toFixed(3);i.length<6;)i=" ".concat(i);return i})(this.data._timeSpent())," ms"),this.parent.isRoot()||(r="".concat(r,"	").concat(this._percentageOfParentSpent(),"%")));var e=this.noOfChildren()>0;for(var t in e&&(r="".concat(r,"	 Children: ").concat(this.noOfChildren()),console.groupCollapsed(r)),this.children)this.children[t].print();e&&console.groupEnd()}},{key:"noOfChildren",value:function(){return this.children.length}},{key:"_percentageOfParentSpent",value:function(){return Math.round(this.data._timeSpent()/this.parent.data._timeSpent()*100)}}])})(),CU=(function(){return Nb(function r(e){Lb(this,r),this.name=e,this.startTime=performance.now(),this.endTime=null},[{key:"close",value:function(){this.endTime=performance.now()}},{key:"_timeSpent",value:function(){if(this.startTime===null||this.endTime===null)throw new Error("You have an error in your performance measurements that makes the whole tree unreliable. You probably forgot to call performanceTestEnd on ".concat(this.name));return this.endTime-this.startTime}}])})(),Ste=(function(){return Nb(function r(){Lb(this,r),this.root=new dT(new CU("Performance Tree"),null),this.current=this.root},[{key:"clear",value:function(){this.root.children=[],this.current=this.root}},{key:"add",value:function(r){if(this.current){var e=new dT(r,this.current);this.current.addChild(e),this.current=e}else{if(this.root)throw new Error("Performance tree is screwed up");this.root=new dT(r,null),this.current=this.root}}},{key:"close",value:function(){if(this.current.isRoot())throw new Error("Tried to close performance tree root. You probably have one too many Performance.endTest() in your code.");this.current.data.close(),this.current=this.current.parent}},{key:"getCurrentData",value:function(){return this.current.data}},{key:"print",value:function(){this.root.noOfChildren()>0&&this.root.print()}}])})(),Tte=(function(){return Nb(function r(){Lb(this,r),window.performance?(this.disabled=!1,this.tree=new Ste):(this.disabled=!0,this.tree=null)},[{key:"startTest",value:function(r){if(!this.disabled){var e,t=r||(e=(e=new Error().stack.split(`
`)[3].trim()).split(" ")[0]==="at"?e.split(" ")[1]:e.split("@")[0]),n=new CU(t);this.tree.add(n)}}},{key:"endTest",value:function(){this.disabled||this.tree.close()}},{key:"reset",value:function(){this.disabled||this.tree.clear()}},{key:"print",value:function(){this.disabled||this.tree.print()}}])})();function jb(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=(function(u,l){if(u){if(typeof u=="string")return n5(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?n5(u,l):void 0}})(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function n5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Cte(r){return"from"in r&&"to"in r}function Pte(r){this.channels[r]={adds:{},updates:{},removes:{}}}function Ate(r){delete this.channels[r]}function Rte(r){this.channels[r].adds={},this.channels[r].updates={},this.channels[r].removes={}}var PU=function(r){return"html"in r?r.html:"captionHtml"in r?r.captionHtml:void 0};function Ite(r,e){var t,n=!1,i=jb(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.id;if(this.idToItem[a]===void 0){if(o=(0,jr.cloneDeep)(o),this.items.push(o),this.idToItem[a]=o,this.idToPosition[a]={id:a,x:0,y:0},"x"in o&&"y"in o){var s=o,u=s.x,l=s.y;isNaN(u)||isNaN(l)||(this.idToPosition[a].x=u,this.idToPosition[a].y=l)}var c=PU(o);if(c instanceof HTMLElement){var f=document.createElement("div");Object.assign(f.style,{position:"absolute"}),f.appendChild(c),this.idToHtmlOverlay[a]=f}for(var h=Object.values(this.channels),d=0,v=h;d<v.length;d++){var p=v[d];p.removes[a]===void 0?p.adds[a]=o:(delete p.removes[a],p.updates[a]=o)}n=!0}}}catch(m){i.e(m)}finally{i.f()}n&&(this.version+=1,e!==void 0&&(e.added=!0))}function kte(r,e){var t,n=!1,i=jb(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=o.id,s=this.idToItem[a];if(s!==void 0){Object.assign(s,o);var u=PU(o);if(u instanceof HTMLElement){var l;(l=this.idToHtmlOverlay[a])===null||l===void 0||l.remove(),delete this.idToHtmlOverlay[a];var c=document.createElement("div");Object.assign(c.style,{position:"absolute"}),c.appendChild(u),this.idToHtmlOverlay[a]=c}for(var f=Object.values(this.channels),h=0,d=f;h<d.length;h++){var v=d[h];if(v.adds[a]===void 0){var p=v.updates[a];p===void 0&&(p={id:a},Cte(s)&&(p={id:a,from:s.from,to:s.to}),v.updates[a]=p),Object.assign(p,o)}}e!==void 0&&(e.updated=!0)}n=!0}}catch(m){i.e(m)}finally{i.f()}n&&(this.version+=1)}function Dte(r,e){var t,n=!1,i=jb(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=this.idToItem[o];if(a!==void 0){var s;n=!0,delete this.idToItem[a.id],delete this.idToPosition[a.id],(s=this.idToHtmlOverlay[a.id])===null||s===void 0||s.remove(),delete this.idToHtmlOverlay[a.id],this.items.splice(this.items.indexOf(a),1);for(var u=Object.values(this.channels),l=0,c=u;l<c.length;l++){var f=c[l];f.adds[o]!==void 0?delete f.adds[o]:(delete f.updates[o],f.removes[o]=a)}}}}catch(h){i.e(h)}finally{i.f()}n&&(e!==void 0&&(e.removed=!0),this.version+=1)}function Mte(r){var e,t=jb(r);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.idToPosition[n.id]!==void 0){var i=this.idToPosition[n.id];Object.assign(i,n)}else this.idToPosition[n.id]={id:n.id,x:n.x,y:n.y,pinned:n.pinned}}}catch(o){t.e(o)}finally{t.f()}}function Lte(r){for(var e in this.idToHtmlOverlay){var t=this.idToHtmlOverlay[e];r.appendChild(t)}}var i5=function(){return{idToItem:un.shallow({}),items:un.shallow([]),channels:un.shallow({}),idToPosition:un.shallow({}),idToHtmlOverlay:un.shallow({}),version:0,addChannel:zr(Pte),removeChannel:zr(Ate),clearChannel:zr(Rte),add:zr(Ite),update:zr(kte),remove:zr(Dte),updatePositions:zr(Mte),updateHtmlOverlay:zr(Lte)}},o5={selected:{rings:[{widthFactor:.05,color:DB},{widthFactor:.1,color:MB}],shadow:{width:10,opacity:1,color:kB}},default:{rings:[]}},a5={selected:{rings:[{color:DB,width:2},{color:MB,width:4}],shadow:{width:18,opacity:1,color:kB}},default:{rings:[]}},vT=.75,pT={noPan:!1,outOnly:!1,animated:!0};function Fp(r){return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(r)}function gT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function s5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(t),!0).forEach(function(n){Nte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Nte(r,e,t){return(e=(function(n){var i=(function(o){if(Fp(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Fp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Fp(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var $u=function(r,e,t){(0,jr.isNil)(r)||((function(n){return typeof n=="string"&&cg(n)!==null})(r)?e(r):FB().warn("Invalid color string for ".concat(t,":"),r))};function Bp(r){return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(r)}function u5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function l5(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(t),!0).forEach(function(n){jte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):u5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function jte(r,e,t){return(e=(function(n){var i=(function(o){if(Bp(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Bp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Bp(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Fte=function(r){var e=r.minZoom,t=r.maxZoom,n=r.allowDynamicMinZoom,i=n===void 0||n,o=r.layout,a=r.layoutOptions,s=r.styling,u=s===void 0?{}:s,l=r.panX,c=l===void 0?0:l,f=r.panY,h=f===void 0?0:f,d=r.initialZoom,v=r.renderer,p=v===void 0?r.useWebGL===!0?OC:xC:v,m=r.disableWebGL,y=m!==void 0&&m,b=r.disableWebWorkers,g=b!==void 0&&b,_=r.disableTelemetry,w=_!==void 0&&_;qF(!0),oP.isolateGlobalState();var x=(0,jr.isNil)(e)?.075:e,E=(0,jr.isNil)(t)?10:t,O=(function(q,B){var U=B.legacyNodeDefaultBorderColor,W=B.legacySelectedBorderColor,H=B.legacyDisabledItemColor,Y=B.legacyDisabledItemFontColor,Z=q.nodeDefaultBorderColor,ce=Z===void 0?U:Z,$=q.selectedBorderColor,K=$===void 0?W:$,ie=q.disabledItemColor,ae=ie===void 0?H:ie,le=q.disabledItemFontColor,te=le===void 0?Y:le,ee=q.selectedInnerBorderColor,re=q.dropShadowColor,he=q.defaultNodeColor,ve=q.defaultRelationshipColor,_e=q.minimapViewportBoxColor,Oe=yT({},o5.default),Pe=yT({},o5.selected),me=yT({},a5.selected),F={color:IB,fontColor:"#DDDDDD"},G=RB,X=AB;return $u(ee,function(se){Pe.rings[0].color=se,me.rings[0].color=se},"selectedInnerBorderColor"),$u(K,function(se){Pe.rings[1].color=se,me.rings[1].color=se},"selectedBorderColor"),$u(ce,function(se){var pe;Oe.rings=[{color:se,widthFactor:.05}],Pe.rings=[{color:se,widthFactor:.05}].concat((function(ge){if(Array.isArray(ge))return gT(ge)})(pe=Pe.rings)||(function(ge){if(typeof Symbol<"u"&&ge[Symbol.iterator]!=null||ge["@@iterator"]!=null)return Array.from(ge)})(pe)||(function(ge,xe){if(ge){if(typeof ge=="string")return gT(ge,xe);var Ne={}.toString.call(ge).slice(8,-1);return Ne==="Object"&&ge.constructor&&(Ne=ge.constructor.name),Ne==="Map"||Ne==="Set"?Array.from(ge):Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne)?gT(ge,xe):void 0}})(pe)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})())},"nodeDefaultBorderColor"),$u(re,function(se){Pe.shadow.color=se,me.shadow.color=se},"dropShadowColor"),$u(ae,function(se){F.color=se},"disabledItemColor"),$u(te,function(se){F.fontColor=se},"disabledItemFontColor"),$u(he,function(se){X=se},"defaultNodeColor"),$u(ve,function(se){G=se},"defaultRelationshipColor"),{nodeBorderStyles:{default:Oe,selected:Pe},relationshipBorderStyles:{default:a5.default,selected:me},disabledItemStyles:F,defaultNodeColor:X,defaultRelationshipColor:G,minimapViewportBoxColor:_e||uP}})(u,{legacyNodeDefaultBorderColor:r.nodeDefaultBorderColor,legacySelectedBorderColor:r.selectedBorderColor,legacyDisabledItemColor:r.disabledItemColor,legacyDisabledItemFontColor:r.disabledItemFontColor}),C=O.nodeBorderStyles,A=O.relationshipBorderStyles,R=O.disabledItemStyles,k=O.defaultNodeColor,D=O.defaultRelationshipColor,L=O.minimapViewportBoxColor,j=un({zoom:d||vT,minimapZoom:vT,defaultZoomLevel:vT,panX:c,panY:h,minimapPanX:0,minimapPanY:0,fitNodeIds:[],resetZoom:!1,zoomOptions:pT,forceWebGL:!1,renderer:p,disableWebGL:y,disableWebWorkers:g,disableTelemetry:w,fitMovement:0,layout:o,layoutOptions:a,maxDistance:0,maxNodeRadius:50,nodeBorderStyles:C,relationshipBorderStyles:A,disabledItemStyles:R,defaultNodeColor:k,defaultRelationshipColor:D,minimapViewportBoxColor:L,get minZoom(){return x},get maxZoom(){return E},get minMinimapZoom(){return 0},get maxMinimapZoom(){return .2},get webGLVisible(){var q=this.fitMovement>50;return this.renderer===OC||q},nodes:i5(),rels:i5(),graphUpdates:0,waypoints:{data:un.shallow({}),counter:0},setGraphUpdated:zr(function(){this.graphUpdates+=1}),setRenderer:zr(function(q){zr(function(){this.graphUpdates+=1}),this.renderer=q}),setWaypoints:zr(function(q){this.waypoints.data=q,this.waypoints.counter+=1}),setZoomPan:zr(function(q,B,U,W){if(i){var H=Object.values(this.nodes.idToPosition),Y=fT(H,x,E,W,q,this.zoom);Y!==this.zoom&&(this.zoom=Y,q===Y&&(this.panX=B,this.panY=U))}else{var Z=Dp(q,this.zoom,x,E);Z!==this.zoom&&(this.zoom=Z,this.panX=B,this.panY=U)}this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setZoom:zr(function(q,B){if(i){var U=Object.values(this.nodes.idToPosition);this.zoom=fT(U,x,E,B,q,this.zoom)}else this.zoom=Dp(q,this.zoom,x,E);this.fitNodeIds=[],this.fitMovement=0,this.resetZoom=!1,this.forceWebGL=!1}),setPan:zr(function(q,B){this.panX=q,this.panY=B,this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setLayout:zr(function(q){this.layout=q}),setLayoutOptions:zr(function(q){this.layoutOptions=q}),fitNodes:zr(function(q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fitNodeIds=(0,jr.intersection)(q,(0,jr.map)(this.nodes.items,"id")),this.zoomOptions=l5(l5({},pT),B)}),setZoomReset:zr(function(){this.resetZoom=!0}),clearFit:zr(function(){this.fitNodeIds=[],this.forceWebGL=!1,this.fitMovement=0,this.zoomOptions=pT}),clearReset:zr(function(){this.resetZoom=!1,this.fitMovement=0}),updateZoomToFit:zr(function(q,B,U,W){var H;if(this.fitMovement=Math.abs(q-this.zoom)+Math.abs(B-this.panX)+Math.abs(U-this.panY),i){var Y=Object.values(this.nodes.idToPosition);H=fT(Y,x,E,W,q,this.zoom)}else H=Dp(q,this.zoom,x,E);this.zoom=H,this.panX=B,this.panY=U}),updateMinimapZoomToFit:zr(function(q,B,U){this.minimapZoom=q,this.minimapPanX=B,this.minimapPanY=U}),autorun:I0,reaction:WF});return j},Bte=function(r){return!!r&&typeof r.id=="string"&&r.id.length>0},Um=pn(1187);function Up(r){return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(r)}function c5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function f5(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(t),!0).forEach(function(n){Ute(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):c5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ute(r,e,t){return(e=(function(n){var i=(function(o){if(Up(o)!="object"||!o)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var s=a.call(o,"string");if(Up(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(n);return Up(i)=="symbol"?i:i+""})(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function h5(r){return(function(e){if(Array.isArray(e))return mT(e)})(r)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(r)||(function(e,t){if(e){if(typeof e=="string")return mT(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mT(e,t):void 0}})(r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function mT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var bT=function(r){return{id:r.elementId}},d5=function(r){return{id:r.elementId,from:r.startNodeElementId,to:r.endNodeElementId}};Um.resultTransformers.mappedResultTransformer({map:function(r){return Object.values(r.toObject())},collect:function(r){var e={nodes:[],relationships:[]},t=new Map;return(function(n){for(var i=h5(n),o=[];i.length;){var a=i.pop();Array.isArray(a)?i.push.apply(i,h5(a)):o.push(a)}return o})(r).forEach(function(n){(0,Um.isNode)(n)?(e.nodes.push(bT(n)),t.set(n.elementId,n)):(0,Um.isPath)(n)?n.segments.forEach(function(i){e.nodes.push(bT(i.start)),e.nodes.push(bT(i.end)),e.relationships.push(d5(i.relationship)),t.set(i.start.elementId,i.start),t.set(i.end.elementId,i.end),t.set(i.relationship.elementId,i.relationship)}):(0,Um.isRelationship)(n)&&(e.relationships.push(d5(n)),t.set(n.elementId,n))}),f5(f5({},e),{},{recordObjectMap:t})}});const qte=(r=>{var e={};return pn.d(e,r),e})({AnalyticsBrowser:()=>BQ});var _T,zte=new Uint8Array(16);function Gte(){if(!_T&&!(_T=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _T(zte)}const Vte=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var vi=[],wT=0;wT<256;++wT)vi.push((wT+256).toString(16).substr(1));const Wte=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(vi[r[e+0]]+vi[r[e+1]]+vi[r[e+2]]+vi[r[e+3]]+"-"+vi[r[e+4]]+vi[r[e+5]]+"-"+vi[r[e+6]]+vi[r[e+7]]+"-"+vi[r[e+8]]+vi[r[e+9]]+"-"+vi[r[e+10]]+vi[r[e+11]]+vi[r[e+12]]+vi[r[e+13]]+vi[r[e+14]]+vi[r[e+15]]).toLowerCase();if(!(function(n){return typeof n=="string"&&Vte.test(n)})(t))throw TypeError("Stringified UUID is invalid");return t};var v5,ET,OT=0,xT=0;const Hte=function(r,e,t){var n=0,i=new Array(16),o=(r=r||{}).node||v5,a=r.clockseq!==void 0?r.clockseq:ET;if(o==null||a==null){var s=r.random||(r.rng||Gte)();o==null&&(o=v5=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=ET=16383&(s[6]<<8|s[7]))}var u=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:xT+1,c=u-OT+(l-xT)/1e4;if(c<0&&r.clockseq===void 0&&(a=a+1&16383),(c<0||u>OT)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");OT=u,xT=l,ET=a;var f=(1e4*(268435455&(u+=122192928e5))+l)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var h=u/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=255&h,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var d=0;d<6;++d)i[n+d]=o[d];return e||Wte(i)};function qp(r){return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(r)}function UC(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function o(d,v,p,m){var y=v&&v.prototype instanceof s?v:s,b=Object.create(y.prototype);return Mo(b,"_invoke",(function(g,_,w){var x,E,O,C=0,A=w||[],R=!1,k={p:0,n:0,v:r,a:D,f:D.bind(r,4),d:function(L,j){return x=L,E=0,O=r,k.n=j,a}};function D(L,j){for(E=L,O=j,e=0;!R&&C&&!q&&e<A.length;e++){var q,B=A[e],U=k.p,W=B[2];L>3?(q=W===j)&&(O=B[(E=B[4])?5:(E=3,3)],B[4]=B[5]=r):B[0]<=U&&((q=L<2&&U<B[1])?(E=0,k.v=j,k.n=B[1]):U<W&&(q=L<3||B[0]>j||j>W)&&(B[4]=L,B[5]=j,k.n=W,E=0))}if(q||L>1)return a;throw R=!0,j}return function(L,j,q){if(C>1)throw TypeError("Generator is already running");for(R&&j===1&&D(j,q),E=j,O=q;(e=E<2?r:O)||!R;){x||(E?E<3?(E>1&&(k.n=-1),D(E,O)):k.n=O:k.v=O);try{if(C=2,x){if(E||(L="next"),e=x[L]){if(!(e=e.call(x,O)))throw TypeError("iterator result is not an object");if(!e.done)return e;O=e.value,E<2&&(E=0)}else E===1&&(e=x.return)&&e.call(x),E<2&&(O=TypeError("The iterator does not provide a '"+L+"' method"),E=1);x=r}else if((e=(R=k.n<0)?O:g.call(_,k))!==a)break}catch(B){x=r,E=1,O=B}finally{C=1}}return{value:e,done:R}}})(d,p,m),!0),b}var a={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(Mo(e={},n,function(){return this}),e),f=l.prototype=s.prototype=Object.create(c);function h(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,l):(d.__proto__=l,Mo(d,i,"GeneratorFunction")),d.prototype=Object.create(f),d}return u.prototype=l,Mo(f,"constructor",l),Mo(l,"constructor",u),u.displayName="GeneratorFunction",Mo(l,i,"GeneratorFunction"),Mo(f),Mo(f,i,"Generator"),Mo(f,n,function(){return this}),Mo(f,"toString",function(){return"[object Generator]"}),(UC=function(){return{w:o,m:h}})()}function Mo(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Mo=function(o,a,s,u){if(a)i?i(o,a,{value:s,enumerable:!u,configurable:!u,writable:!u}):o[a]=s;else{var l=function(c,f){Mo(o,c,function(h){return this._invoke(c,f,h)})};l("next",0),l("throw",1),l("return",2)}},Mo(r,e,t,n)}function p5(r,e,t,n,i,o,a){try{var s=r[o](a),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function Yte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,AU(n.key),n)}}function AU(r){var e=(function(t){if(qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(qp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return qp(e)=="symbol"?e:e+""}var g5=window.localStorage,y5="neo4j.nvl.sTid",m5=!1,Xte=(function(){return r=function i(){var o,a,s;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,i),o=this,s=void 0,(a=AU(a="analytics"))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s;var u=new qte.AnalyticsBrowser;this.analytics=u},e=[{key:"init",value:function(i){this.analytics.load({writeKey:i}),this.analytics.addSourceMiddleware(function(o){var a=o.payload,s=o.next,u=a.obj.context.page;u!==void 0&&(u.url="",u.title="",u.search="",u.referrer="",u.path=""),s(a)})}},{key:"trackEvent",value:(t=UC().m(function i(o){var a;return UC().w(function(s){for(;;)switch(s.n){case 0:return s.n=1,this.ready();case 1:a="".concat(o.eventPrefix?o.eventPrefix:"NVL_core","-").concat(o.event),this.analytics.track(a,o.properties).catch(function(u){Pr.warn("TRACKING: Event tracking is failed. err: ".concat(u))});case 2:return s.a(2)}},i,this)}),n=function(){var i=this,o=arguments;return new Promise(function(a,s){var u=t.apply(i,o);function l(f){p5(u,a,s,l,c,"next",f)}function c(f){p5(u,a,s,l,c,"throw",f)}l(void 0)})},function(i){return n.apply(this,arguments)})},{key:"identify",value:function(){if(!m5){var i=this.getSegmentTrackingId();this.analytics.identify(i).catch(function(o){Pr.debug("TRACKING: Identifying user for Segment tracking failed. err: ".concat(o))}),m5=!0}}},{key:"loadSavedSegmentId",value:function(){try{var i=g5.getItem(y5);return typeof i=="string"?i:null}catch(o){return Pr.debug("TRACKING: Retrieving tracking Id failed. err: ".concat(o)),null}}},{key:"getSegmentTrackingId",value:function(){var i=this.loadSavedSegmentId(),o=i??Hte();return this.saveTrackingId(o),o}},{key:"saveTrackingId",value:function(i){g5.setItem(y5,i)}},{key:"ready",value:function(){return this.analytics.ready().catch(function(i){Pr.debug("TRACKING: segment track instance not ready. err: ".concat(i))})}}],e&&Yte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e,t,n})();function zp(r){return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(r)}function $te(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(h){f=!0,a=h}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}})(r,e)||RU(r,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function qC(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=RU(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function RU(r,e){if(r){if(typeof r=="string")return b5(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b5(r,e):void 0}}function b5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function _5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ti(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(t),!0).forEach(function(n){Kte(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Kte(r,e,t){return(e=IU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Zte(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,IU(n.key),n)}}function IU(r){var e=(function(t){if(zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(zp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)})(r);return zp(e)=="symbol"?e:e+""}function Nh(r,e,t){kU(r,e),e.set(r,t)}function kU(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tt(r,e){return r.get(co(r,e))}function Vh(r,e,t){return r.set(co(r,e),t),t}function co(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Gp=new WeakMap,w5=new WeakMap,vr=new WeakMap,Cr=new WeakMap,Wi=new WeakMap,np=new WeakMap,Io=new WeakSet,Zre=(function(){return r=function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),(function(u,l){kU(u,l),l.add(u)})(this,Io),Nh(this,Gp,void 0),Nh(this,w5,void 0),Nh(this,vr,void 0),Nh(this,Cr,void 0),Nh(this,Wi,void 0),Nh(this,np,void 0),a.disableTelemetry!==!0&&(Vh(np,this,new Xte),tt(np,this).init("4SGwdwzuDm5WkFvQtz7D6ATQlo14yjmW"),tt(np,this).identify()),co(Io,this,Qte).call(this,a),Vh(Gp,this,new pJ(s)),Vh(w5,this,new Tte),Vh(Wi,this,a),tt(Wi,this).frame=n,this.checkWebGLCompatibility(),co(Io,this,E5).call(this,i,o,a)},e=[{key:"restart",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.getNodePositions(),o=tt(vr,this),a=o.zoom,s=o.layout,u=o.layoutOptions,l=o.nodes,c=o.rels;tt(Cr,this).destroy(),Object.assign(tt(Wi,this),t),co(Io,this,E5).call(this,l.items,c.items,tt(Wi,this)),this.setZoom(a),this.setLayout(s),this.setLayoutOptions(u),this.addAndUpdateElementsInGraph(l.items,c.items),n&&this.setNodePositions(i)}},{key:"addAndUpdateElementsInGraph",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];co(Io,this,ST).call(this,t),co(Io,this,TT).call(this,n,t);var i={added:!1,updated:!1};tt(vr,this).nodes.update(t,ti({},i)),tt(vr,this).rels.update(n,ti({},i)),tt(vr,this).nodes.add(t,ti({},i)),tt(vr,this).rels.add(n,ti({},i)),tt(vr,this).setGraphUpdated(),tt(Cr,this).updateHtmlOverlay()}},{key:"getSelectedNodes",value:function(){var t=this;return Yi(tt(vr,this).nodes.items).filter(function(n){return n.selected}).map(function(n){return ti(ti({},n),tt(vr,t).nodes.idToPosition[n.id])})}},{key:"getSelectedRelationships",value:function(){return Yi(tt(vr,this).rels.items).filter(function(t){return t.selected})}},{key:"updateElementsInGraph",value:function(t,n){var i=this,o={added:!1,updated:!1},a=t.filter(function(u){return tt(vr,i).nodes.idToItem[u.id]!==void 0}),s=n.filter(function(u){return tt(vr,i).rels.idToItem[u.id]!==void 0});co(Io,this,ST).call(this,a),co(Io,this,TT).call(this,s,t),tt(vr,this).nodes.update(a,ti({},o)),tt(vr,this).rels.update(s,ti({},o)),tt(Cr,this).updateHtmlOverlay()}},{key:"addElementsToGraph",value:function(t,n){co(Io,this,ST).call(this,t),co(Io,this,TT).call(this,n,t);var i={added:!1,updated:!1};tt(vr,this).nodes.add(t,ti({},i)),tt(vr,this).rels.add(n,ti({},i)),tt(Cr,this).updateHtmlOverlay()}},{key:"removeNodesWithIds",value:function(t){if(Array.isArray(t)&&!(0,jr.isEmpty)(t)){var n,i={},o=qC(t);try{for(o.s();!(n=o.n()).done;)i[n.value]=!0}catch(c){o.e(c)}finally{o.f()}var a,s=[],u=qC(tt(vr,this).rels.items);try{for(u.s();!(a=u.n()).done;){var l=a.value;i[l.from]!==!0&&i[l.to]!==!0||s.push(l.id)}}catch(c){u.e(c)}finally{u.f()}s.length>0&&co(Io,this,O5).call(this,s),co(Io,this,Jte).call(this,t),tt(vr,this).setGraphUpdated(),tt(Cr,this).updateHtmlOverlay()}}},{key:"removeRelationshipsWithIds",value:function(t){Array.isArray(t)&&!(0,jr.isEmpty)(t)&&(co(Io,this,O5).call(this,t),tt(vr,this).setGraphUpdated(),tt(Cr,this).updateHtmlOverlay())}},{key:"getNodes",value:function(){return tt(Cr,this).dumpNodes()}},{key:"getRelationships",value:function(){return tt(Cr,this).dumpRelationships()}},{key:"getNodeById",value:function(t){return tt(vr,this).nodes.idToItem[t]}},{key:"getRelationshipById",value:function(t){return tt(vr,this).rels.idToItem[t]}},{key:"getPositionById",value:function(t){return tt(vr,this).nodes.idToPosition[t]}},{key:"getCurrentOptions",value:function(){return tt(Wi,this)}},{key:"destroy",value:function(){tt(Cr,this).destroy()}},{key:"deselectAll",value:function(){this.updateElementsInGraph(tt(vr,this).nodes.items.map(function(t){return ti(ti({},t),{},{selected:!1})}),tt(vr,this).rels.items.map(function(t){return ti(ti({},t),{},{selected:!1})}))}},{key:"fit",value:function(t,n){tt(Cr,this).fit(t,n)}},{key:"resetZoom",value:function(){tt(Cr,this).resetZoom()}},{key:"setUseWebGLRenderer",value:function(t){tt(Cr,this).setRenderer(t?OC:xC)}},{key:"setRenderer",value:function(t){tt(Cr,this).setRenderer(t)}},{key:"setDisableWebGL",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];tt(Wi,this).disableWebGL!==t&&(tt(Wi,this).disableWebGL=t,this.restart())}},{key:"pinNode",value:function(t){tt(vr,this).nodes.update([{id:t,pinned:!0}],{})}},{key:"unPinNode",value:function(t){tt(vr,this).nodes.update(t.map(function(n){return{id:n,pinned:!1}}),{})}},{key:"setLayout",value:function(t){tt(vr,this).setLayout(t)}},{key:"setLayoutOptions",value:function(t){tt(vr,this).setLayoutOptions(t)}},{key:"getNodesOnScreen",value:function(){return tt(Cr,this).getNodesOnScreen()}},{key:"getNodePositions",value:function(){return tt(Cr,this).getNodePositions()}},{key:"setNodePositions",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];tt(Cr,this).setNodePositions(t,n)}},{key:"isLayoutMoving",value:function(){return tt(Cr,this).isLayoutMoving()}},{key:"saveToFile",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(Cr,this).saveToFile(t)}},{key:"getImageDataUrl",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tt(Cr,this).getImageDataURL(t)}},{key:"saveFullGraphToLargeFile",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(Cr,this).saveFullGraphToLargeFile(t)}},{key:"setZoom",value:function(t){tt(Cr,this).setZoomLevel(t)}},{key:"setPan",value:function(t,n){tt(Cr,this).setPanCoordinates(t,n)}},{key:"setZoomAndPan",value:function(t,n,i){tt(Cr,this).setZoomAndPan(t,n,i)}},{key:"getScale",value:function(){return tt(Cr,this).getScale()}},{key:"getPan",value:function(){return tt(Cr,this).getPan()}},{key:"getHits",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node","relationship"],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{hitNodeMarginWidth:0},o=tt(vr,this),a=o.zoom,s=o.panX,u=o.panY,l=o.webGLVisible,c=pU(t,tt(Wi,this).frame,a,s,u),f=c.x,h=c.y,d=l?(function(v,p,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},g=[],_=[],w=m.nodes,x=m.rels;return y.includes("node")&&g.push.apply(g,Nm((function(E,O){var C,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,k=[],D=NC(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var L=function(){var j,q=C.value,B=A[q.id];if((B==null?void 0:B.x)===void 0||B.y===void 0)return 1;var U=((j=q.size)!==null&&j!==void 0?j:kn)*Vr(),W={x:B.x-E,y:B.y-O},H=Math.pow(U,2),Y=Math.pow(U+R,2),Z=Math.pow(W.x,2)+Math.pow(W.y,2),ce=Math.sqrt(Z);if(Z<Y){var $=k.findIndex(function(K){return K.distance>ce});k.splice($!==-1?$:k.length,0,{data:q,targetCoordinates:{x:B.x,y:B.y},pointerCoordinates:{x:E,y:O},distanceVector:W,distance:ce,insideNode:Z<H})}};for(D.s();!(C=D.n()).done;)L()}catch(j){D.e(j)}finally{D.f()}return k})(v,p,w.items,w.idToPosition,b.hitNodeMarginWidth))),y.includes("relationship")&&_.push.apply(_,Nm((function(E,O){var C,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},R=[],k={},D=NC(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var L=function(){var j=C.value,q=j.from,B=j.to;if(k["".concat(q,".").concat(B)]===void 0){var U=A[q],W=A[B];if((U==null?void 0:U.x)===void 0||U.y===void 0||(W==null?void 0:W.x)===void 0||W.y===void 0)return 0;var H=cP({x:U.x,y:U.y},{x:W.x,y:W.y},{x:E,y:O});if(H<=vte){var Y=R.findIndex(function(Z){return Z.distance>H});R.splice(Y!==-1?Y:R.length,0,{data:j,fromTargetCoordinates:{x:U.x,y:U.y},toTargetCoordinates:{x:W.x,y:W.y},pointerCoordinates:{x:E,y:O},distance:H})}k["".concat(q,".").concat(B)]=1,k["".concat(B,".").concat(q)]=1}};for(D.s();!(C=D.n()).done;)L()}catch(j){D.e(j)}finally{D.f()}return R})(v,p,x.items,w.idToPosition))),{nodes:g,relationships:_}})(f,h,tt(vr,this),n,i):(function(v,p,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},g=[],_=[];return y.includes("node")&&g.push.apply(g,Nm(m.getCanvasNodesAt({x:v,y:p},b.hitNodeMarginWidth))),y.includes("relationship")&&_.push.apply(_,Nm(m.getCanvasRelsAt({x:v,y:p}))),{nodes:g,relationships:_}})(f,h,tt(Cr,this),n,i);return ti(ti({},t),{},{nvlTargets:d})}},{key:"getContainer",value:function(){return tt(Wi,this).frame}},{key:"checkWebGLCompatibility",value:function(){var t=tt(Wi,this).disableWebGL;if(t===void 0||!t){var n=(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("canvas");try{return window.WebGLRenderingContext!==void 0&&(i.getContext("webgl")!==null||i.getContext("experimental-webgl")!==null)}catch{return!1}})();if(!n){if(t!==void 0)throw new HB("Could not initialize WebGL");tt(Wi,this).renderer=xC,console.warn("GPU acceleration is not available on your browser. Falling back to CPU layout and rendering. You can disable this warning by setting the disableWebGL option to true.")}t===void 0&&(tt(Wi,this).disableWebGL=!n)}}}],e&&Zte(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e})();function E5(){var r,e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Vh(vr,this,Fte(i)),i.minimapContainer instanceof HTMLElement||delete i.minimapContainer,Vh(Cr,this,new Ete(tt(vr,this),i)),this.addAndUpdateElementsInGraph(t,n),tt(Cr,this).on("restart",this.restart.bind(this));var o,a,s=qC((o=tt(Gp,this).callbacks,Object.entries(o)));try{for(s.s();!(a=s.n()).done;){var u=$te(a.value,2),l=u[0];u[1]!==void 0&&tt(Cr,this).on(l,tt(Gp,this)[l].bind(tt(Gp,this)))}}catch(f){s.e(f)}finally{s.f()}setTimeout(function(){tt(Cr,e).callIfRegistered("onInitialization")});var c=(r=tt(Wi,this).frame)===null||r===void 0?void 0:r.getAttribute("id");tt(Wi,this).disableTelemetry!==!0&&setTimeout(function(){tt(Cr,e).isDestroyed()||tt(np,e).trackEvent({eventPrefix:IJ.includes(c)?c:null,event:"instantiated",properties:{}})},200)}function Qte(r){var e,t=r.logging;(t==null?void 0:t.level)!==void 0&&(e=t.level,Pr.setLevel(e),(function(n,i){var o=n.methodFactory;n.methodFactory=function(a,s,u){var l=o(a,s,u);return function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];typeof i.logger=="function"?i.logger.apply(i,[a].concat(f)):l.apply(void 0,f)}},n.setLevel(n.getLevel())})(Pr,t))}function Jte(r){var e=Array.isArray(r)?r:[r],t=tt(vr,this),n=t.nodes,i=t.fitNodeIds;n.remove(e,{removed:!1}),i.length&&e.find(function(o){return i.includes(o)})!==void 0&&tt(vr,this).fitNodes(i.filter(function(o){return!e.includes(o)}))}function O5(r){var e=Array.isArray(r)?r:[r];tt(vr,this).rels.remove(e,{removed:!1})}function ST(r){var e=r.find(function(n){return!(function(i){return!!i&&typeof i.id=="string"&&i.id.length>0})(n)});if(e){var t="";throw/^\d+$/.test(e.id)||(t=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported."),new TypeError("Invalid node provided: ".concat(JSON.stringify(e),".").concat(t))}}function TT(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t="",n=null,i=tt(vr,this),o=i.nodes,a=i.rels,s={},u=0;u<e.length;u++){var l=e[u];s[l.id]=l}for(var c=ti(ti({},o.idToItem),s),f=a.idToItem,h=0;h<r.length;h++){var d=r[h];if(!Bte(d)){n=d,/^\d+$/.test(d.id)&&(t=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported.");break}if(f[d.id]===void 0){var v=c[d.from],p=c[d.to];if(v===void 0){t=' Node with id "'.concat(d.from,'" does not exist.'),n=d;break}if(p===void 0){t=' Node with id "'.concat(d.to,'" does not exist.'),n=d;break}}}if(n!==null)throw new TypeError("Invalid relationship provided: ".concat(JSON.stringify(n),".").concat(t))}const ere=10,CT=10;class Fb{constructor(e,t){wr(this,"nvl");wr(this,"options");wr(this,"container");wr(this,"callbackMap");wr(this,"addEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.addEventListener(e,t,n)});wr(this,"removeEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.removeEventListener(e,t,n)});wr(this,"callCallbackIfRegistered",(e,...t)=>{const n=this.callbackMap.get(e);typeof n=="function"&&n(...t)});wr(this,"updateCallback",(e,t)=>{this.callbackMap.set(e,t)});wr(this,"removeCallback",e=>{this.callbackMap.delete(e)});wr(this,"toggleGlobalTextSelection",(e,t)=>{e?(document.body.style.removeProperty("user-select"),t&&document.body.removeEventListener("mouseup",t)):(document.body.style.setProperty("user-select","none","important"),t&&document.body.addEventListener("mouseup",t))});this.nvl=e,this.options=t,this.container=this.nvl.getContainer(),this.callbackMap=new Map}get nvlInstance(){return this.nvl}get currentOptions(){return this.options}get containerInstance(){return this.container}}const tre=(r,e)=>{const t=Math.abs(r.clientX-e.x),n=Math.abs(r.clientY-e.y);return t>CT||n>CT?!0:Math.pow(t,2)+Math.pow(n,2)>CT},rre=(r,e)=>{const t=r.getBoundingClientRect(),n=window.devicePixelRatio||1;return{x:(e.clientX-t.left-t.width*.5)*n,y:(e.clientY-t.top-t.height*.5)*n}};class Qre extends Fb{constructor(t,n={selectOnClick:!1}){super(t,n);wr(this,"moved",!1);wr(this,"mousePosition",{x:0,y:0});wr(this,"handleMouseDown",t=>{this.mousePosition={x:t.clientX,y:t.clientY}});wr(this,"handleRightClick",t=>{var a,s;t.preventDefault();const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasRightClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeRightClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipRightClick",(s=o[0])==null?void 0:s.data,n,t)});wr(this,"handleDoubleClick",t=>{var a,s;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasDoubleClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeDoubleClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipDoubleClick",(s=o[0])==null?void 0:s.data,n,t)});wr(this,"handleClick",t=>{var a,s;if(tre(t,this.mousePosition)||t.button!==0)return;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.currentOptions.selectOnClick===!0&&this.nvlInstance.deselectAll(),this.callCallbackIfRegistered("onCanvasClick",t);return}if(i.length>0){const u=i.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),h=[...u[0]?[{id:u[0].id,selected:!0}]:[],...l.map(v=>({id:v.id,selected:!1}))],d=c.map(v=>({...v,selected:!1}));this.nvlInstance.updateElementsInGraph(h,d)}this.callCallbackIfRegistered("onNodeClick",(a=i[0])==null?void 0:a.data,n,t)}else if(o.length>0){const u=o.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),f=l.map(v=>({id:v.id,selected:!1})),d=[...u[0]?[{id:u[0].id,selected:!0}]:[],...c.map(v=>({...v,selected:!1}))];this.nvlInstance.updateElementsInGraph(f,d)}this.callCallbackIfRegistered("onRelationshipClick",(s=o[0])==null?void 0:s.data,n,t)}});wr(this,"destroy",()=>{this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("click",this.handleClick,!0),this.removeEventListener("dblclick",this.handleDoubleClick,!0),this.removeEventListener("contextmenu",this.handleRightClick,!0)});this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("click",this.handleClick,!0),this.addEventListener("dblclick",this.handleDoubleClick,!0),this.addEventListener("contextmenu",this.handleRightClick,!0)}}class Jre extends Fb{constructor(t,n={drawShadowOnHover:!1}){super(t,n);wr(this,"currentHoveredElementId");wr(this,"currentHoveredElementIsNode");wr(this,"updates",{nodes:[],relationships:[]});wr(this,"handleHover",t=>{const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n,a=i[0]??o[0],s=a==null?void 0:a.data,u=s!==void 0&&i[0]!==void 0,l=this.currentHoveredElementId===void 0&&s===void 0,c=(s==null?void 0:s.id)!==void 0&&this.currentHoveredElementId===s.id&&u===this.currentHoveredElementIsNode;if(l||c){this.callCallbackIfRegistered("onHover",s,n,t);return}if(this.currentHoveredElementId!==void 0&&this.currentHoveredElementId!==(s==null?void 0:s.id)&&this.unHoverCurrentElement(),u)this.updates.nodes.push({id:s.id,hovered:!0}),this.currentHoveredElementId=s.id,this.currentHoveredElementIsNode=!0;else if(s!==void 0){const{id:h}=s;this.updates.relationships.push({id:h,hovered:!0}),this.currentHoveredElementId=s.id,this.currentHoveredElementIsNode=!1}else this.currentHoveredElementId=void 0,this.currentHoveredElementIsNode=void 0;this.callCallbackIfRegistered("onHover",s,n,t),this.updateElementsInNVL(),this.clearUpdates()});this.addEventListener("mousemove",this.handleHover,!0)}updateElementsInNVL(){this.currentOptions.drawShadowOnHover===!0&&this.nvlInstance.getNodes().length>0&&this.nvlInstance.updateElementsInGraph(this.updates.nodes,this.updates.relationships)}clearUpdates(){this.updates.nodes=[],this.updates.relationships=[]}unHoverCurrentElement(){if(this.currentHoveredElementId===void 0)return;const t={id:this.currentHoveredElementId,hovered:!1};this.currentHoveredElementIsNode===!0?this.updates.nodes.push(t):this.updates.relationships.push({...t})}destroy(){this.removeEventListener("mousemove",this.handleHover,!0)}}var qm={exports:{}},h0={exports:{}},nre=h0.exports,x5;function ire(){return x5||(x5=1,(function(r,e){(function(t,n){r.exports=n()})(nre,function(){function t(b,g,_,w,x){(function E(O,C,A,R,k){for(;R>A;){if(R-A>600){var D=R-A+1,L=C-A+1,j=Math.log(D),q=.5*Math.exp(2*j/3),B=.5*Math.sqrt(j*q*(D-q)/D)*(L-D/2<0?-1:1),U=Math.max(A,Math.floor(C-L*q/D+B)),W=Math.min(R,Math.floor(C+(D-L)*q/D+B));E(O,C,U,W,k)}var H=O[C],Y=A,Z=R;for(n(O,A,C),k(O[R],H)>0&&n(O,A,R);Y<Z;){for(n(O,Y,Z),Y++,Z--;k(O[Y],H)<0;)Y++;for(;k(O[Z],H)>0;)Z--}k(O[A],H)===0?n(O,A,Z):n(O,++Z,R),Z<=C&&(A=Z+1),C<=Z&&(R=Z-1)}})(b,g,_||0,w||b.length-1,x||i)}function n(b,g,_){var w=b[g];b[g]=b[_],b[_]=w}function i(b,g){return b<g?-1:b>g?1:0}var o=function(b){b===void 0&&(b=9),this._maxEntries=Math.max(4,b),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(b,g,_){if(!_)return g.indexOf(b);for(var w=0;w<g.length;w++)if(_(b,g[w]))return w;return-1}function s(b,g){u(b,0,b.children.length,g,b)}function u(b,g,_,w,x){x||(x=m(null)),x.minX=1/0,x.minY=1/0,x.maxX=-1/0,x.maxY=-1/0;for(var E=g;E<_;E++){var O=b.children[E];l(x,b.leaf?w(O):O)}return x}function l(b,g){return b.minX=Math.min(b.minX,g.minX),b.minY=Math.min(b.minY,g.minY),b.maxX=Math.max(b.maxX,g.maxX),b.maxY=Math.max(b.maxY,g.maxY),b}function c(b,g){return b.minX-g.minX}function f(b,g){return b.minY-g.minY}function h(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function d(b){return b.maxX-b.minX+(b.maxY-b.minY)}function v(b,g){return b.minX<=g.minX&&b.minY<=g.minY&&g.maxX<=b.maxX&&g.maxY<=b.maxY}function p(b,g){return g.minX<=b.maxX&&g.minY<=b.maxY&&g.maxX>=b.minX&&g.maxY>=b.minY}function m(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(b,g,_,w,x){for(var E=[g,_];E.length;)if(!((_=E.pop())-(g=E.pop())<=w)){var O=g+Math.ceil((_-g)/w/2)*w;t(b,O,g,_,x),E.push(g,O,O,_)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(b){var g=this.data,_=[];if(!p(b,g))return _;for(var w=this.toBBox,x=[];g;){for(var E=0;E<g.children.length;E++){var O=g.children[E],C=g.leaf?w(O):O;p(b,C)&&(g.leaf?_.push(O):v(b,C)?this._all(O,_):x.push(O))}g=x.pop()}return _},o.prototype.collides=function(b){var g=this.data;if(!p(b,g))return!1;for(var _=[];g;){for(var w=0;w<g.children.length;w++){var x=g.children[w],E=g.leaf?this.toBBox(x):x;if(p(b,E)){if(g.leaf||v(b,E))return!0;_.push(x)}}g=_.pop()}return!1},o.prototype.load=function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var g=0;g<b.length;g++)this.insert(b[g]);return this}var _=this._build(b.slice(),0,b.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var w=this.data;this.data=_,_=w}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},o.prototype.insert=function(b){return b&&this._insert(b,this.data.height-1),this},o.prototype.clear=function(){return this.data=m([]),this},o.prototype.remove=function(b,g){if(!b)return this;for(var _,w,x,E=this.data,O=this.toBBox(b),C=[],A=[];E||C.length;){if(E||(E=C.pop(),w=C[C.length-1],_=A.pop(),x=!0),E.leaf){var R=a(b,E.children,g);if(R!==-1)return E.children.splice(R,1),C.push(E),this._condense(C),this}x||E.leaf||!v(E,O)?w?(_++,E=w.children[_],x=!1):E=null:(C.push(E),A.push(_),_=0,w=E,E=E.children[0])}return this},o.prototype.toBBox=function(b){return b},o.prototype.compareMinX=function(b,g){return b.minX-g.minX},o.prototype.compareMinY=function(b,g){return b.minY-g.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(b){return this.data=b,this},o.prototype._all=function(b,g){for(var _=[];b;)b.leaf?g.push.apply(g,b.children):_.push.apply(_,b.children),b=_.pop();return g},o.prototype._build=function(b,g,_,w){var x,E=_-g+1,O=this._maxEntries;if(E<=O)return s(x=m(b.slice(g,_+1)),this.toBBox),x;w||(w=Math.ceil(Math.log(E)/Math.log(O)),O=Math.ceil(E/Math.pow(O,w-1))),(x=m([])).leaf=!1,x.height=w;var C=Math.ceil(E/O),A=C*Math.ceil(Math.sqrt(O));y(b,g,_,A,this.compareMinX);for(var R=g;R<=_;R+=A){var k=Math.min(R+A-1,_);y(b,R,k,C,this.compareMinY);for(var D=R;D<=k;D+=C){var L=Math.min(D+C-1,k);x.children.push(this._build(b,D,L,w-1))}}return s(x,this.toBBox),x},o.prototype._chooseSubtree=function(b,g,_,w){for(;w.push(g),!g.leaf&&w.length-1!==_;){for(var x=1/0,E=1/0,O=void 0,C=0;C<g.children.length;C++){var A=g.children[C],R=h(A),k=(D=b,L=A,(Math.max(L.maxX,D.maxX)-Math.min(L.minX,D.minX))*(Math.max(L.maxY,D.maxY)-Math.min(L.minY,D.minY))-R);k<E?(E=k,x=R<x?R:x,O=A):k===E&&R<x&&(x=R,O=A)}g=O||g.children[0]}var D,L;return g},o.prototype._insert=function(b,g,_){var w=_?b:this.toBBox(b),x=[],E=this._chooseSubtree(w,this.data,g,x);for(E.children.push(b),l(E,w);g>=0&&x[g].children.length>this._maxEntries;)this._split(x,g),g--;this._adjustParentBBoxes(w,x,g)},o.prototype._split=function(b,g){var _=b[g],w=_.children.length,x=this._minEntries;this._chooseSplitAxis(_,x,w);var E=this._chooseSplitIndex(_,x,w),O=m(_.children.splice(E,_.children.length-E));O.height=_.height,O.leaf=_.leaf,s(_,this.toBBox),s(O,this.toBBox),g?b[g-1].children.push(O):this._splitRoot(_,O)},o.prototype._splitRoot=function(b,g){this.data=m([b,g]),this.data.height=b.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(b,g,_){for(var w,x,E,O,C,A,R,k=1/0,D=1/0,L=g;L<=_-g;L++){var j=u(b,0,L,this.toBBox),q=u(b,L,_,this.toBBox),B=(x=j,E=q,O=void 0,C=void 0,A=void 0,R=void 0,O=Math.max(x.minX,E.minX),C=Math.max(x.minY,E.minY),A=Math.min(x.maxX,E.maxX),R=Math.min(x.maxY,E.maxY),Math.max(0,A-O)*Math.max(0,R-C)),U=h(j)+h(q);B<k?(k=B,w=L,D=U<D?U:D):B===k&&U<D&&(D=U,w=L)}return w||_-g},o.prototype._chooseSplitAxis=function(b,g,_){var w=b.leaf?this.compareMinX:c,x=b.leaf?this.compareMinY:f;this._allDistMargin(b,g,_,w)<this._allDistMargin(b,g,_,x)&&b.children.sort(w)},o.prototype._allDistMargin=function(b,g,_,w){b.children.sort(w);for(var x=this.toBBox,E=u(b,0,g,x),O=u(b,_-g,_,x),C=d(E)+d(O),A=g;A<_-g;A++){var R=b.children[A];l(E,b.leaf?x(R):R),C+=d(E)}for(var k=_-g-1;k>=g;k--){var D=b.children[k];l(O,b.leaf?x(D):D),C+=d(O)}return C},o.prototype._adjustParentBBoxes=function(b,g,_){for(var w=_;w>=0;w--)l(g[w],b)},o.prototype._condense=function(b){for(var g=b.length-1,_=void 0;g>=0;g--)b[g].children.length===0?g>0?(_=b[g-1].children).splice(_.indexOf(b[g]),1):this.clear():s(b[g],this.toBBox)},o})})(h0)),h0.exports}class ore{constructor(e=[],t=are){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(n(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1,s=t[a];const u=a+1;if(u<this.length&&n(t[u],s)<0&&(a=u,s=t[u]),n(s,o)>=0)break;t[e]=s,e=a}t[e]=o}}function are(r,e){return r<e?-1:r>e?1:0}const sre=Object.freeze(Object.defineProperty({__proto__:null,default:ore},Symbol.toStringTag,{value:"Module"})),ure=Xq(sre);var zv={exports:{}},PT,S5;function lre(){return S5||(S5=1,PT=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,l=0,c=u-1;l<u;c=l++){var f=t[n+l*2+0],h=t[n+l*2+1],d=t[n+c*2+0],v=t[n+c*2+1],p=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;p&&(s=!s)}return s}),PT}var AT,T5;function cre(){return T5||(T5=1,AT=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,l=0,c=u-1;l<u;c=l++){var f=t[l+n][0],h=t[l+n][1],d=t[c+n][0],v=t[c+n][1],p=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;p&&(s=!s)}return s}),AT}var C5;function fre(){if(C5)return zv.exports;C5=1;var r=lre(),e=cre();return zv.exports=function(n,i,o,a){return i.length>0&&Array.isArray(i[0])?e(n,i,o,a):r(n,i,o,a)},zv.exports.nested=e,zv.exports.flat=r,zv.exports}var ip={exports:{}},hre=ip.exports,P5;function dre(){return P5||(P5=1,(function(r,e){(function(t,n){n(e)})(hre,function(t){const i=33306690738754706e-32;function o(p,m,y,b,g){let _,w,x,E,O=m[0],C=b[0],A=0,R=0;C>O==C>-O?(_=O,O=m[++A]):(_=C,C=b[++R]);let k=0;if(A<p&&R<y)for(C>O==C>-O?(x=_-((w=O+_)-O),O=m[++A]):(x=_-((w=C+_)-C),C=b[++R]),_=w,x!==0&&(g[k++]=x);A<p&&R<y;)C>O==C>-O?(x=_-((w=_+O)-(E=w-_))+(O-E),O=m[++A]):(x=_-((w=_+C)-(E=w-_))+(C-E),C=b[++R]),_=w,x!==0&&(g[k++]=x);for(;A<p;)x=_-((w=_+O)-(E=w-_))+(O-E),O=m[++A],_=w,x!==0&&(g[k++]=x);for(;R<y;)x=_-((w=_+C)-(E=w-_))+(C-E),C=b[++R],_=w,x!==0&&(g[k++]=x);return _===0&&k!==0||(g[k++]=_),k}function a(p){return new Float64Array(p)}const s=33306690738754716e-32,u=22204460492503146e-32,l=11093356479670487e-47,c=a(4),f=a(8),h=a(12),d=a(16),v=a(4);t.orient2d=function(p,m,y,b,g,_){const w=(m-_)*(y-g),x=(p-g)*(b-_),E=w-x;if(w===0||x===0||w>0!=x>0)return E;const O=Math.abs(w+x);return Math.abs(E)>=s*O?E:-(function(C,A,R,k,D,L,j){let q,B,U,W,H,Y,Z,ce,$,K,ie,ae,le,te,ee,re,he,ve;const _e=C-D,Oe=R-D,Pe=A-L,me=k-L;H=(ee=(ce=_e-(Z=(Y=134217729*_e)-(Y-_e)))*(K=me-($=(Y=134217729*me)-(Y-me)))-((te=_e*me)-Z*$-ce*$-Z*K))-(ie=ee-(he=(ce=Pe-(Z=(Y=134217729*Pe)-(Y-Pe)))*(K=Oe-($=(Y=134217729*Oe)-(Y-Oe)))-((re=Pe*Oe)-Z*$-ce*$-Z*K))),c[0]=ee-(ie+H)+(H-he),H=(le=te-((ae=te+ie)-(H=ae-te))+(ie-H))-(ie=le-re),c[1]=le-(ie+H)+(H-re),H=(ve=ae+ie)-ae,c[2]=ae-(ve-H)+(ie-H),c[3]=ve;let F=(function(ge,xe){let Ne=xe[0];for(let He=1;He<ge;He++)Ne+=xe[He];return Ne})(4,c),G=u*j;if(F>=G||-F>=G||(q=C-(_e+(H=C-_e))+(H-D),U=R-(Oe+(H=R-Oe))+(H-D),B=A-(Pe+(H=A-Pe))+(H-L),W=k-(me+(H=k-me))+(H-L),q===0&&B===0&&U===0&&W===0)||(G=l*j+i*Math.abs(F),(F+=_e*W+me*q-(Pe*U+Oe*B))>=G||-F>=G))return F;H=(ee=(ce=q-(Z=(Y=134217729*q)-(Y-q)))*(K=me-($=(Y=134217729*me)-(Y-me)))-((te=q*me)-Z*$-ce*$-Z*K))-(ie=ee-(he=(ce=B-(Z=(Y=134217729*B)-(Y-B)))*(K=Oe-($=(Y=134217729*Oe)-(Y-Oe)))-((re=B*Oe)-Z*$-ce*$-Z*K))),v[0]=ee-(ie+H)+(H-he),H=(le=te-((ae=te+ie)-(H=ae-te))+(ie-H))-(ie=le-re),v[1]=le-(ie+H)+(H-re),H=(ve=ae+ie)-ae,v[2]=ae-(ve-H)+(ie-H),v[3]=ve;const X=o(4,c,4,v,f);H=(ee=(ce=_e-(Z=(Y=134217729*_e)-(Y-_e)))*(K=W-($=(Y=134217729*W)-(Y-W)))-((te=_e*W)-Z*$-ce*$-Z*K))-(ie=ee-(he=(ce=Pe-(Z=(Y=134217729*Pe)-(Y-Pe)))*(K=U-($=(Y=134217729*U)-(Y-U)))-((re=Pe*U)-Z*$-ce*$-Z*K))),v[0]=ee-(ie+H)+(H-he),H=(le=te-((ae=te+ie)-(H=ae-te))+(ie-H))-(ie=le-re),v[1]=le-(ie+H)+(H-re),H=(ve=ae+ie)-ae,v[2]=ae-(ve-H)+(ie-H),v[3]=ve;const se=o(X,f,4,v,h);H=(ee=(ce=q-(Z=(Y=134217729*q)-(Y-q)))*(K=W-($=(Y=134217729*W)-(Y-W)))-((te=q*W)-Z*$-ce*$-Z*K))-(ie=ee-(he=(ce=B-(Z=(Y=134217729*B)-(Y-B)))*(K=U-($=(Y=134217729*U)-(Y-U)))-((re=B*U)-Z*$-ce*$-Z*K))),v[0]=ee-(ie+H)+(H-he),H=(le=te-((ae=te+ie)-(H=ae-te))+(ie-H))-(ie=le-re),v[1]=le-(ie+H)+(H-re),H=(ve=ae+ie)-ae,v[2]=ae-(ve-H)+(ie-H),v[3]=ve;const pe=o(se,h,4,v,d);return d[pe-1]})(p,m,y,b,g,_,O)},t.orient2dfast=function(p,m,y,b,g,_){return(m-_)*(y-g)-(p-g)*(b-_)},Object.defineProperty(t,"__esModule",{value:!0})})})(ip,ip.exports)),ip.exports}var A5;function vre(){if(A5)return qm.exports;A5=1;var r=ire(),e=ure,t=fre(),n=dre().orient2d;e.default&&(e=e.default),qm.exports=i,qm.exports.default=i;function i(_,w,x){w=Math.max(0,w===void 0?2:w),x=x||0;var E=d(_),O=new r(16);O.toBBox=function(Z){return{minX:Z[0],minY:Z[1],maxX:Z[0],maxY:Z[1]}},O.compareMinX=function(Z,ce){return Z[0]-ce[0]},O.compareMinY=function(Z,ce){return Z[1]-ce[1]},O.load(_);for(var C=[],A=0,R;A<E.length;A++){var k=E[A];O.remove(k),R=v(k,R),C.push(R)}var D=new r(16);for(A=0;A<C.length;A++)D.insert(h(C[A]));for(var L=w*w,j=x*x;C.length;){var q=C.shift(),B=q.p,U=q.next.p,W=p(B,U);if(!(W<j)){var H=W/L;k=o(O,q.prev.p,B,U,q.next.next.p,H,D),k&&Math.min(p(k,B),p(k,U))<=H&&(C.push(q),C.push(v(k,q)),O.remove(k),D.remove(q),D.insert(h(q)),D.insert(h(q.next)))}}q=R;var Y=[];do Y.push(q.p),q=q.next;while(q!==R);return Y.push(q.p),Y}function o(_,w,x,E,O,C,A){for(var R=new e([],a),k=_.data;k;){for(var D=0;D<k.children.length;D++){var L=k.children[D],j=k.leaf?m(L,x,E):s(x,E,L);j>C||R.push({node:L,dist:j})}for(;R.length&&!R.peek().node.children;){var q=R.pop(),B=q.node,U=m(B,w,x),W=m(B,E,O);if(q.dist<U&&q.dist<W&&l(x,B,A)&&l(E,B,A))return B}k=R.pop(),k&&(k=k.node)}return null}function a(_,w){return _.dist-w.dist}function s(_,w,x){if(u(_,x)||u(w,x))return 0;var E=y(_[0],_[1],w[0],w[1],x.minX,x.minY,x.maxX,x.minY);if(E===0)return 0;var O=y(_[0],_[1],w[0],w[1],x.minX,x.minY,x.minX,x.maxY);if(O===0)return 0;var C=y(_[0],_[1],w[0],w[1],x.maxX,x.minY,x.maxX,x.maxY);if(C===0)return 0;var A=y(_[0],_[1],w[0],w[1],x.minX,x.maxY,x.maxX,x.maxY);return A===0?0:Math.min(E,O,C,A)}function u(_,w){return _[0]>=w.minX&&_[0]<=w.maxX&&_[1]>=w.minY&&_[1]<=w.maxY}function l(_,w,x){for(var E=Math.min(_[0],w[0]),O=Math.min(_[1],w[1]),C=Math.max(_[0],w[0]),A=Math.max(_[1],w[1]),R=x.search({minX:E,minY:O,maxX:C,maxY:A}),k=0;k<R.length;k++)if(f(R[k].p,R[k].next.p,_,w))return!1;return!0}function c(_,w,x){return n(_[0],_[1],w[0],w[1],x[0],x[1])}function f(_,w,x,E){return _!==E&&w!==x&&c(_,w,x)>0!=c(_,w,E)>0&&c(x,E,_)>0!=c(x,E,w)>0}function h(_){var w=_.p,x=_.next.p;return _.minX=Math.min(w[0],x[0]),_.minY=Math.min(w[1],x[1]),_.maxX=Math.max(w[0],x[0]),_.maxY=Math.max(w[1],x[1]),_}function d(_){for(var w=_[0],x=_[0],E=_[0],O=_[0],C=0;C<_.length;C++){var A=_[C];A[0]<w[0]&&(w=A),A[0]>E[0]&&(E=A),A[1]<x[1]&&(x=A),A[1]>O[1]&&(O=A)}var R=[w,x,E,O],k=R.slice();for(C=0;C<_.length;C++)t(_[C],R)||k.push(_[C]);return g(k)}function v(_,w){var x={p:_,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return w?(x.next=w.next,x.prev=w,w.next.prev=x,w.next=x):(x.prev=x,x.next=x),x}function p(_,w){var x=_[0]-w[0],E=_[1]-w[1];return x*x+E*E}function m(_,w,x){var E=w[0],O=w[1],C=x[0]-E,A=x[1]-O;if(C!==0||A!==0){var R=((_[0]-E)*C+(_[1]-O)*A)/(C*C+A*A);R>1?(E=x[0],O=x[1]):R>0&&(E+=C*R,O+=A*R)}return C=_[0]-E,A=_[1]-O,C*C+A*A}function y(_,w,x,E,O,C,A,R){var k=x-_,D=E-w,L=A-O,j=R-C,q=_-O,B=w-C,U=k*k+D*D,W=k*L+D*j,H=L*L+j*j,Y=k*q+D*B,Z=L*q+j*B,ce=U*H-W*W,$,K,ie,ae,le=ce,te=ce;ce===0?(K=0,le=1,ae=Z,te=H):(K=W*Z-H*Y,ae=U*Z-W*Y,K<0?(K=0,ae=Z,te=H):K>le&&(K=le,ae=Z+W,te=H)),ae<0?(ae=0,-Y<0?K=0:-Y>U?K=le:(K=-Y,le=U)):ae>te&&(ae=te,-Y+W<0?K=0:-Y+W>U?K=le:(K=-Y+W,le=U)),$=K===0?0:K/le,ie=ae===0?0:ae/te;var ee=(1-$)*_+$*x,re=(1-$)*w+$*E,he=(1-ie)*O+ie*A,ve=(1-ie)*C+ie*R,_e=he-ee,Oe=ve-re;return _e*_e+Oe*Oe}function b(_,w){return _[0]===w[0]?_[1]-w[1]:_[0]-w[0]}function g(_){_.sort(b);for(var w=[],x=0;x<_.length;x++){for(;w.length>=2&&c(w[w.length-2],w[w.length-1],_[x])<=0;)w.pop();w.push(_[x])}for(var E=[],O=_.length-1;O>=0;O--){for(;E.length>=2&&c(E[E.length-2],E[E.length-1],_[O])<=0;)E.pop();E.push(_[O])}return E.pop(),w.pop(),w.concat(E)}return qm.exports}vre();var DU=nn();class ene extends Fb{constructor(t,n={excludeNodeMargin:!1}){super(t,n);wr(this,"mousePosition",{x:0,y:0});wr(this,"targets",[]);wr(this,"shouldPan",!1);wr(this,"isPanning",!1);wr(this,"updateTargets",(t,n)=>{this.targets=t,this.currentOptions.excludeNodeMargin=n});wr(this,"handleMouseDown",t=>{const n=this.nvlInstance.getHits(t,DU.difference(["node","relationship"],this.targets),{hitNodeMarginWidth:this.currentOptions.excludeNodeMargin===!0?ere:0});n.nvlTargets.nodes.length>0||n.nvlTargets.relationships.length>0?this.shouldPan=!1:(this.mousePosition={x:t.clientX,y:t.clientY},this.shouldPan=!0)});wr(this,"handleMouseMove",t=>{if(!this.shouldPan||t.buttons!==1)return;this.isPanning||(this.toggleGlobalTextSelection(!1,this.handleMouseUp),this.isPanning=!0);const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=(t.clientX-this.mousePosition.x)/n*window.devicePixelRatio,s=(t.clientY-this.mousePosition.y)/n*window.devicePixelRatio;this.nvlInstance.setPan(i-a,o-s),this.callCallbackIfRegistered("onPan",{x:i-a,y:o-s},t),this.mousePosition={x:t.clientX,y:t.clientY}});wr(this,"handleMouseUp",()=>{this.isPanning&&(this.toggleGlobalTextSelection(!0,this.handleMouseUp),this.isPanning=!1),this.shouldPan=!1});this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("mousemove",this.handleMouseMove,!0),this.addEventListener("mouseup",this.handleMouseUp,!0)}destroy(){this.toggleGlobalTextSelection(!0,this.handleMouseUp),this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("mousemove",this.handleMouseMove,!0),this.removeEventListener("mouseup",this.handleMouseUp,!0)}}class tne extends Fb{constructor(t,n={}){super(t,n);wr(this,"throttledZoom",DU.throttle(t=>{const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=t.deltaY/500,s=n>=1?a*Math.pow(n,1):a,u=n-s*Math.min(1,n),l=rre(this.containerInstance,t),c=i+(l.x/n-l.x/u),f=o+(l.y/n-l.y/u);this.nvlInstance.setZoomAndPan(u,c,f),this.callCallbackIfRegistered("onZoom",u,t)},25,{leading:!0}));wr(this,"handleWheel",t=>{t.ctrlKey||t.metaKey||(t.preventDefault(),this.throttledZoom(t))});wr(this,"destroy",()=>{this.removeEventListener("wheel",this.handleWheel)});this.addEventListener("wheel",this.handleWheel)}}const pre={name:"NodeCommon",props:{title:{type:String,default:""}},data(){return{isShowMenu:!1,menus:[{label:"10%",value:.1},{label:"50%",value:.5},{label:"100%",value:1},{label:"200%",value:2},{label:"300%",value:3},{label:"400%",value:4},{label:"500%",value:5}]}},mounted(){document.addEventListener("click",this.documentClick)},beforeUnmount(){document.removeEventListener("click",this.documentClick)},methods:{handleMenu(r){this.$emit("change",r)},showMenu(){this.isShowMenu=!this.isShowMenu},documentClick(r){this.isShowMenu&&!this.$el.querySelector(".zoom-select-options").contains(r.target)&&r.target!==this.$el.querySelector(".zoom-select-label")&&(this.isShowMenu=!1)}}},gre={class:"zoom-select"},yre={class:"zoom-select-options"},mre=["onClick"];function bre(r,e,t,n,i,o){return ap(),op("div",gre,[Ju("div",{class:"zoom-select-label",onClick:e[0]||(e[0]=(...a)=>o.showMenu&&o.showMenu(...a))},qP(t.title),1),$q(Ju("div",yre,[(ap(!0),op(Zq,null,Qq(i.menus,a=>(ap(),op("div",{class:"zoom-select-option",key:a.value,onClick:s=>o.handleMenu(a)},qP(a.label),9,mre))),128)),e[2]||(e[2]=Ju("div",{class:"option-line"},null,-1)),Ju("div",{class:"zoom-select-option",onClick:e[1]||(e[1]=a=>o.handleMenu({label:"5%",value:5}))},"")],512),[[Kq,i.isShowMenu]])])}const _re=zC(pre,[["render",bre],["__scopeId","data-v-223f6542"]]),wre={class:"custom-control-warpper"},Ere={class:"custom-control"},Ore={__name:"index",props:{value:{type:Number,default:1}},emits:["change"],setup(r,{emit:e}){const t=e,n=r,i=Jq(()=>`${(n.value*100).toFixed(0)}%`),o=({value:l})=>{u(l)},a=()=>{let l=n.value-.1;l<.1&&(l=.1),u(l)},s=()=>{let l=n.value+.1;l>5&&(l=5),u(l)},u=l=>{l=Number(l.toFixed(1)),t("change",l)};return(l,c)=>{const f=az;return ap(),op("div",wre,[Ju("div",Ere,[Ju("div",{class:"action-btn zoom-btn",onClick:a},[N_(f,{name:"minus",size:"16"})]),N_(_re,{onChange:o,title:i.value},null,8,["title"]),Ju("div",{class:"action-btn zoom-btn",onClick:s},[N_(f,{name:"plus",size:"16"})])])])}}},rne=zC(Ore,[["__scopeId","data-v-f2e37dca"]]);/*!
 * better-scroll / nested-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function R5(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function xre(r){console.error("[BScroll warn]: "+r)}var Tg=typeof window<"u",z0=Tg&&navigator.userAgent.toLowerCase();z0&&z0.indexOf("android")>0;(function(){if(typeof z0=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(z0);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var Sre=!1;if(Tg){var Tre="test-passive";try{var I5={};Object.defineProperty(I5,"passive",{get:function(){Sre=!0}}),window.addEventListener(Tre,function(){},I5)}catch{}}var Cre=function(r,e){for(var t in e)r[t]=e[t];return r};function Wh(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,o){var a=e(n,i,o);if(a)return t=i,a}),t}var MU=Tg&&document.createElement("div").style,rd=(function(){if(!Tg)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(MU[n.value]!==void 0)return n.key}return!1})();function Hs(r){return rd===!1?r:rd==="standard"?r==="transitionEnd"?"transitionend":r:rd+r.charAt(0).toUpperCase()+r.substr(1)}rd&&rd!=="standard"&&""+rd.toLowerCase();Hs("transform");Hs("transition");Tg&&Hs("perspective")in MU;Hs("transitionTimingFunction"),Hs("transitionDuration"),Hs("transitionDelay"),Hs("transformOrigin"),Hs("transitionEnd"),Hs("transitionProperty");var Pre=(function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=Wh(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=Wh(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,o){return i[1]-o[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,o){return i[1]-o[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=Wh(this.ancestors,function(i){var o=i[0];return o===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=Wh(this.descendants,function(i){var o=i[0];return o===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],o=t[2];n.off(i,o)}),this.hooksManager=[]},r})(),Are="plugins.nestedScroll",Rre=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],Ire=Rre.map(function(r){return{key:r.key,sourceKey:Are+"."+r.name}}),kre="INTERNAL_NESTED_SCROLL",Dre=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},k5=function(r){r.forEach(function(e){e.enable()})},zm=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},Mre=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,o=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),o.start(),i.resetStartPos(),o.resetStartPos(),n.startTime=+new Date})},Lre=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,o=r.minScrollX,a=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=r.movingDirectionX,c=r.movingDirectionY,f=!1,h=n>=o&&l===-1,d=n<=a&&l===1,v=i>=s&&c===-1,p=i<=u&&c===1;return t?f=v||p:e&&(f=h||d),f},Nre=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,o=r.minScrollX,a=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=!1,c=n>o,f=n<a,h=i>s,d=i<u;return t?l=h||d:e&&(l=c||f),l},jre=function(r){r.scroller.reflow(),r.resetPosition(0)},Fre=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},Bre=(function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:kre};this.options=Cre(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&xre("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy(Ire),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,o=Wh(n,function(h){return h.selfScroll===e});if(o>-1){var a=n[o];a.purge(),n.splice(o,1)}var s=Wh(i,function(h){var d=h[0];return d===e.hooks});if(s>-1){var u=i[s],l=u[0],c=u[1],f=u[2];l.off(c,f),i.splice(s,1)}},r.prototype.addBScroll=function(e){this.store.push(Pre.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,o,a=this.store.length,s=0;s<a;s++){t=e[s],i=t.selfScroll.wrapper;for(var u=0;u<a;u++)if(n=e[u],o=n.selfScroll.wrapper,t!==n&&i.contains(o)){var l=Fre(o,i);t.hasDescendants(n)||t.addDescendant(n,l),n.hasAncestors(t)||n.addAncestor(t,l)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,o=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});Dre(R5(u,l)),Nre(i)&&jre(i),Mre(u),zm(u,i)},a=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});k5(R5(u,l))};e.registerHooks(i,i.eventTypes.beforeScrollStart,o),e.registerHooks(i,i.eventTypes.touchEnd,a);var s=i.scroller.actions.hooks;e.registerHooks(s,s.eventTypes.detectMovingDirection,function(){var u=t.map(function(d){var v=d[0];return v.selfScroll}),l=u[0],c=u.slice(1),f=i.scroller.actions.contentMoved,h=u.length===0;if(f)zm(u,i);else if(!h&&Lre(i))return zm([i],i),l&&k5([l]),zm(c,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],o=t[2];n.off(i,o)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r})();const Ure={class:"scroll-content"},qre={__name:"cu-scroll",props:{scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!0},scrollbar:{type:[Boolean,Object],default:null},pullUpLoad:{type:[Boolean,Object],default:!0},groupId:{type:String,default:""}},emits:["onScrollEnd","scroll"],setup(r,{expose:e,emit:t}){yh.use(sz),yh.use(uz),yh.use(cz),yh.use(lz),yh.use(Bre);const n=t,i=r,o=ez(null);let a=null;const s=()=>{a.refresh()},u=f=>{let{el:h,time:d,offsetX:v,offsetY:p,easing:m}=f;a.scrollToElement(h,d,v,p,m)},l=()=>{a.enable()},c=()=>{a.disable()};return tz(()=>{let f={scrollX:i.scrollX,scrollY:i.scrollY,scrollbar:i.scrollbar||{},observeDOM:!0,pullUpLoad:i.pullUpLoad,probeType:0,mouseWheel:{speed:20,invert:!1,easeTime:300},preventDefault:!1,bounce:!1,click:!0};i.groupId&&(f.nestedScroll={groupId:i.groupId}),a=new yh(o.value,f),a.on("pullingUp",()=>{n("onScrollEnd"),rz(()=>{a.finishPullUp()})}),a.on("scroll",h=>{n("scroll",h)})}),nz(()=>{a&&a.destroy()}),e({refresh:s,scrollToElement:u,enable:l,disable:c}),(f,h)=>(ap(),op("div",{class:"scroll-wrapper",ref_key:"scroller",ref:o},[Ju("div",Ure,[iz(f.$slots,"default",{},void 0,!0)])],512))}},nne=zC(qre,[["__scopeId","data-v-feb19931"]]);export{Qre as C,Jre as H,ene as P,rne as Z,mt as _,tne as a,nne as b,bt as c,Vn as d,Ke as e,ad as f,$re as g,Zre as h,eg as i,NF as j,kc as k,YS as l,Xre as m,cQ as n,Ca as o,lF as p,j2 as q,mm as r,q2 as s,JZ as t,Kre as u,cp as v,Zs as w,QK as x,LK as y,fQ as z};
