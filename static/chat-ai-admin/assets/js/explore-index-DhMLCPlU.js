import{_ as F}from"./cu-scroll-CeyRYmkN.js";import{aa as E,Y as y,_ as g,F as R,a9 as N,a5 as s,k as c,a7 as $,G as I,f as k,o as O,w as U,a2 as x}from"./vue-chunks-yZ4gwLzA.js";import{g as V}from"./index-BT8AeJHF.js";import{w as z,x as L}from"./index-CT0SjT0W.js";import{b as q,d as Y}from"../../index-ZzVqUZIR.js";import{H as G,M as T,N as H,B as K,a as B}from"./ui-antd-BJtyvQX6.js";import{_ as W}from"./main-tab-Ue5DTRSS.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./utils-smNh_pj2.js";import"./list-tabs-DVVNXmfG.js";import"./index-CqPQTDjX.js";const j={class:"list-box"},J=["onClick"],P={class:"explore-info"},Q={class:"explore-info-content"},X={class:"explore-title"},Z={class:"item-body"},tt={class:"explore-desc"},ot={class:"support-box"},et={class:"item-footer"},st={__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["switchChange","clickItem"],setup(D,{emit:C}){const v=C,_=E(),f=D,d=(p,i)=>v("switchChange",p,i),S=async(p,i)=>{try{const r=p==null?void 0:p.target;if(r&&typeof r.closest=="function"&&r.closest(".no-bubble"))return;if(i.robot_only_show=="1"){const u=_.resolve({path:i.menu.path});window.open(u.href,"_blank");return}}catch{}v("clickItem",i)};return(p,i)=>{const r=Y,u=G;return g(),y("div",j,[(g(!0),y(R,null,N(f.list,a=>{var m,t;return g(),y("div",{class:"list-item-wrapper",key:a.id},[s("div",{class:"list-item",onClick:o=>S(o,a)},[s("div",P,[c(r,{class:"explore-icon",name:a.ability_type,style:{"font-size":"62px",color:"white"}},null,8,["name"]),s("div",Q,[s("div",X,$(a.explore_name||a.name),1),i[0]||(i[0]=s("div",{class:"explore-type"},"ChatWiki",-1))])]),s("div",Z,[s("div",tt,$(a.explore_intro||a.introduction),1),s("span",ot,[(g(!0),y(R,null,N(a.support_channels_list,o=>(g(),y("span",{key:o,class:"support-item"},[c(r,{name:"support",class:"icon"}),I(" "+$(o),1)]))),128))])]),s("div",et,[c(u,{checked:((m=a.user_config)==null?void 0:m.switch_status)=="1"||((t=a.robot_config)==null?void 0:t.switch_status)=="1","checked-children":"开","un-checked-children":"关",class:"no-bubble",onChange:o=>d(a,o)},null,8,["checked","onChange"])])],8,J)])}),128))])}}},nt=q(st,[["__scopeId","data-v-de1bf55d"]]),at={"bg-color":"#f5f9ff",class:"explore-page"},lt={class:"explore-page-body"},it={class:"list-toolbar"},ct={class:"toolbar-box"},rt={class:"list-group-box"},_t={class:"enable-tip-footer"},pt={class:"footer-actions"},M="explore_enable_tip_suppress_until",ut={__name:"explore-index",setup(D){const C=k(null),v=k([]),_=k(!1),f=k(!1),d=E();O(()=>{let t=localStorage.getItem("zm:explore:active");t>1?C.value.change(t):p()});let S=k([]);const p=()=>{z().then(t=>{const o=((t==null?void 0:t.data)||[]).map(e=>({...e,explore_name:e.name,explore_intro:e.introduction}));v.value=o,S.value=(t==null?void 0:t.data)||[]})},i=(t,o)=>{const e=o?"1":"0";if(e==="0"){const l={robot_auto_reply:"关闭后，该功能默认关闭不再支持使用，所有的公众号菜单都会停用，确认关闭？",library_ability_official_account:"关闭后，知识库模块将不再显示公众号知识库模块，历史已导入的文章将无法引用，确认关闭？"};T.confirm({title:"提示",content:l[t.ability_type]||"关闭后，该功能默认关闭不再支持使用，所有的公众号菜单都会停用，确认关闭？",onOk:()=>{L({ability_type:t.ability_type,switch_status:e}).then(n=>{n&&n.res==0&&(B.success("操作成功"),t.user_config?t.user_config.switch_status=e:t.robot_config&&(t.robot_config.switch_status=e))})}});return}L({ability_type:t.ability_type,switch_status:e}).then(l=>{if(l&&l.res==0){if(B.success("操作成功"),t.user_config?t.user_config.switch_status=e:t.robot_config&&(t.robot_config.switch_status=e),t.ability_type==="library_ability_official_account")return;const n=Number(localStorage.getItem(M)||0),h=Date.now();n<=h&&(f.value=!1,t.robot_only_show!=1&&(_.value=!0))}})},r=t=>{switch(t.ability_type){case"library_ability_official_account":const o=d.resolve({path:"/library/list",query:{active:3}});window.open(o.href,"_blank");break;default:t.module_type==="robot"&&t.robot_only_show==0&&m(t);break}},u=()=>{if(f.value){const t=Date.now()+2592e5;localStorage.setItem(M,String(t))}},a=()=>{u(),_.value=!1},m=async t=>{var e;u(),_.value=!1;const o=localStorage.getItem("last_local_robot_id");try{const{data:l=[]}=await V();if(!l.length){const w=d.resolve({path:"/robot/list"});window.open(w.href,"_blank");return}let n;o&&(n=l.find(w=>w.id==o)),n=n||l[0];const{id:h,robot_key:b}=n;if((e=t.menu)!=null&&e.path){const w=d.resolve({path:t.menu.path,query:{id:h,robot_key:b}});window.open(w.href,"_blank");return}const A=d.resolve({path:"/robot/config/function-center",query:{id:h,robot_key:b}});window.open(A.href,"_blank")}catch{const n=d.resolve({path:"/robot/list"});window.open(n.href,"_blank")}};return U(_,(t,o)=>{o&&!t&&u()}),(t,o)=>{const e=F,l=H,n=K,h=T;return g(),y("div",at,[s("div",lt,[s("div",it,[s("div",ct,[c(W,{ref_key:"tabRef",ref:C},null,512)])]),s("div",rt,[c(e,{style:{"padding-right":"16px",flex:"1"}},{default:x(()=>[c(nt,{list:v.value,onSwitchChange:i,onClickItem:r},null,8,["list"])]),_:1})])]),c(h,{open:_.value,"onUpdate:open":o[1]||(o[1]=b=>_.value=b),title:"提示",footer:null},{default:x(()=>[o[5]||(o[5]=s("div",null,"开启该功能后请到机器人>功能中心，配置并使用该功能",-1)),s("div",_t,[c(l,{checked:f.value,"onUpdate:checked":o[0]||(o[0]=b=>f.value=b)},{default:x(()=>[...o[2]||(o[2]=[I("3天内不再提醒",-1)])]),_:1},8,["checked"]),s("div",pt,[c(n,{onClick:a},{default:x(()=>[...o[3]||(o[3]=[I("取消",-1)])]),_:1}),c(n,{type:"primary",onClick:m},{default:x(()=>[...o[4]||(o[4]=[I("去使用",-1)])]),_:1})])])]),_:1},8,["open"])])}}},It=q(ut,[["__scopeId","data-v-09149010"]]);export{It as default};
