import{ab as q,e as h,l as n,Y as y,_ as u,k as _,a2 as g,F as R,a9 as S,a1 as w,G as T,a7 as K,u as L,af as k,d as B,a5 as I,ae as F,ag as N,aa as P}from"./vue-chunks-BSjLwu6d.js";import{u as v}from"./robot-DwqmFfQP.js";import{b as $,d as t,ae as C}from"../../index-0SFcfYGN.js";import{c as V,b as H}from"./ui-antd-BIopZvX3.js";import{T as j}from"./top-header-0GRPYDnM.js";import"./index-B4oOBcCh.js";import"./utils-BMKRjDTh.js";import"./add-group-CvrKwfP2.js";import"./index-B3eanVnA.js";const z={class:"left-menu-box"},A={__name:"left-menu",props:{robotInfo:{type:Object,default:()=>{}}},emits:["changeMenu"],setup(a,{emit:m}){const o=q(),i=a,c=o.query,e=h(()=>[o.path.split("/")[3]]),f=[{key:"workflow",id:"workflow",icon:()=>n(t,{name:"workflow",class:"menu-icon"}),label:"工作流编排",title:"工作流编排",path:"/robot/config/workflow",menuIn:["1"]},{key:"basic-config",id:"basic-config",icon:()=>n(t,{name:"jichupeizhi",class:"menu-icon"}),label:"基础配置",title:"基础配置",path:"/robot/config/basic-config",menuIn:["0"]},{key:"library-config",id:"library-config",icon:()=>n(t,{name:"guanlianzhishiku",class:"menu-icon"}),label:"知识库",title:"知识库",path:"/robot/config/library-config",menuIn:["0"]},{key:"skill-config",id:"skill-config",icon:()=>n(t,{name:"skii",class:"menu-icon"}),label:"工作流",title:"工作流",path:"/robot/config/skill-config",menuIn:["0"]},{key:"external-services",id:"external-services",icon:()=>n(t,{name:"duiwaifuwu",class:"menu-icon"}),label:"对外服务",title:"对外服务",path:"/robot/config/external-services",menuIn:["0","1"]},{key:"test",id:"test",icon:()=>n(t,{name:"liaotianceshi",class:"menu-icon"}),label:"聊天测试",title:"聊天测试",path:"/robot/test",query:{robot_key:i.robotInfo.robot_key,id:i.robotInfo.id},target:"_blank",menuIn:["0","1"]},{key:"qa-feedbacks",id:"qa-feedbacks",icon:()=>n(t,{name:"qa-feedback",class:"menu-icon"}),label:"问答反馈",title:"问答反馈",path:"/robot/config/qa-feedbacks",menuIn:["0","1"]},{key:"session-record",id:"session-record",icon:()=>n(t,{name:"session-record",class:"menu-icon"}),label:"会话记录",title:"会话记录",path:"/robot/config/session-record",query:{robot_key:i.robotInfo.robot_key,id:i.robotInfo.id},menuIn:["0","1"]},{key:"api-key-manage",id:"api-key-manage",icon:()=>n(t,{name:"duiwaifuwu",class:"menu-icon"}),label:"API Key管理",title:"API Key管理",path:"/robot/config/api-key-manage",menuIn:["0","1"]},{key:"unknown_issue",id:"unknown_issue",icon:()=>n(t,{name:"unknown-issue",class:"menu-icon"}),label:"未知问题",title:"未知问题",path:"/robot/config/unknown_issue",menuIn:["0","1"]},{key:"statistical_analysis",id:"statistical_analysis",icon:()=>n(t,{name:"statistical-analysis",class:"menu-icon"}),label:"统计分析",title:"统计分析",path:"/robot/config/statistical_analysis",menuIn:["0","1"]},{key:"export-record",id:"export-record",icon:()=>n(t,{name:"export-record",class:"menu-icon"}),label:"导出记录",title:"导出记录",path:"/robot/config/export-record",menuIn:["0","1"]},{key:"invoke-logs",id:"invoke-logs",icon:()=>n(t,{name:"doc-file",class:"menu-icon"}),label:"调用日志",title:"调用日志",path:"/robot/config/invoke-logs",menuIn:["1"]}],d=h(()=>{let r=f;return C(c.id)==1?r.filter(p=>p.id=="external-services"):r.filter(p=>{var b;return p.menuIn.includes((b=i.robotInfo)==null?void 0:b.application_type)})}),l=({item:r})=>{e.value.includes(r.id)};return(r,p)=>{const b=V,M=k("router-link"),x=H;return u(),y("div",z,[_(x,{class:"left-menu",selectedKeys:e.value,onClick:l},{default:g(()=>[(u(!0),y(R,null,S(d.value,s=>(u(),w(M,{class:"default-color",tag:"a",target:s.target||"_self",to:{path:s.path,query:s.query||L(c)},key:s.key},{default:g(()=>[(u(),w(b,{icon:s.icon,path:s.path,key:s.key},{default:g(()=>[T(K(s.label),1)]),_:2},1032,["icon","path"]))]),_:2},1032,["target","to"]))),128))]),_:1},8,["selectedKeys"])])}}},E=$(A,[["__scopeId","data-v-1c15e7e1"]]),G=B({name:"robotPage",components:{leftMenu:E,TopHeader:j},async beforeRouteEnter(a,m,o){const i=v(),{getRobot:c,robotInfo:e,getRobotLists:f,getGroupList:d}=i;await c(a.query.id),f(),d();let l=C(a.query.id);if(l==0){o("/no-permission");return}if(l==1){window.location.href=`${e.h5_domain}/#/chat/pc?robot_key=${e.robot_key}`,o("/robot/list");return}let r=["basicConfig","libraryConfig","skillConfig"];if(e.application_type==1&&r.includes(a.name)){o(`/robot/config/workflow?id=${e.id}&robot_key=${e.robot_key}`);return}if(e.application_type==0&&a.name=="robotWorkflow"){o(`/robot/config/basic-config?id=${e.id}&robot_key=${e.robot_key}`);return}o()},setup(){const a=P(),m=v(),{robotInfo:o}=N(m),i=h(()=>q().name!="robotWorkflow");return{robotInfo:o,changeMenu:e=>{a.push({path:e.path,query:{robot_key:o.value.robot_key,id:o.value.id}})},isShowLeft:i}}}),W={class:"robot-main-container"},D={class:"robot-page-layout"},O={key:0,class:"layout-left"},Y={class:"layout-body"};function J(a,m,o,i,c,e){const f=k("TopHeader"),d=k("leftMenu"),l=k("router-view");return u(),y("div",W,[I("div",D,[a.isShowLeft?(u(),y("div",O,[_(f),_(d,{onChangeMenu:a.changeMenu,robotInfo:a.robotInfo},null,8,["onChangeMenu","robotInfo"])])):F("",!0),I("div",Y,[_(l)])])])}const ie=$(G,[["render",J],["__scopeId","data-v-f64f13e3"]]);export{ie as default};
