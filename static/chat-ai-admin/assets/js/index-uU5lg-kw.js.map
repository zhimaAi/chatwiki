{"version":3,"file":"index-uU5lg-kw.js","sources":["../../../../front-end/chat-ai-admin-vue/src/api/chat-monitor/index.js","../../../../front-end/chat-ai-admin-vue/src/stores/modules/chat-monitor.js","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/list-empty.vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/chat-list .vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/chat-message-scroll.vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/chat-message.vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/library-info-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/chat-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/components/date-filter.vue","../../../../front-end/chat-ai-admin-vue/src/views/chat-monitor/index.vue"],"sourcesContent":["import request from '@/utils/http/axios'\r\n\r\nexport const getReceiverList = (params = {}) => {\r\n  return request.get({\r\n    url: '/manage/getReceiverList',\r\n    params: params\r\n  })\r\n}\r\n\r\nexport const getChatMessage = (data = {}) => {\r\n  return request.post({\r\n    url: '/chat/message',\r\n    data: data\r\n  })\r\n}\r\n\r\nexport const setReceiverRead = (data = {}) => {\r\n  return request.post({\r\n    url: '/manage/setReceiverRead',\r\n    data: data\r\n  })\r\n}\r\n","import { defineStore } from 'pinia'\r\nimport { getRobotList } from '@/api/robot'\r\nimport { getUuid, formatDisplayChatTime, extractVoiceInfo, removeVoiceFormat } from '@/utils/index'\r\nimport { useIM } from '@/hooks/event/useIM'\r\nimport { useUserStore } from '@/stores/modules/user'\r\nimport { useEventBus } from '@/hooks/event/useEventBus'\r\nimport { getReceiverList, getChatMessage, setReceiverRead } from '@/api/chat-monitor'\r\n\r\nexport const useChatMonitorStore = defineStore('chatMonitor', {\r\n  state: () => {\r\n    return {\r\n      im: null,\r\n      selectedRobotId: '',\r\n      robotList: [],\r\n      selectedReceiverId: '',\r\n      receiverList: [],\r\n      receiverListPage: {\r\n        page: 0,\r\n        size: 10\r\n      },\r\n      activeChat: null,\r\n      chatMessagePageSize: 10, // 消息列表分页大小\r\n      messageList: [],\r\n      messageListScrollTop: 0,\r\n      chatMessageLoadCompleted: false, // 消息加载完了\r\n      messageListLoading: false // 消息列表加载中\r\n    }\r\n  },\r\n  getters: {},\r\n  actions: {\r\n    async init() {\r\n      this.selectedRobotId = ''\r\n      this.selectedReceiverId = ''\r\n      this.robotList = []\r\n      this.receiverList = []\r\n      this.messageList = []\r\n      this.receiverListPage = {\r\n        page: 0,\r\n        size: 10\r\n      }\r\n      this.messageListScrollTop = 0\r\n      this.chatMessageLoadCompleted = false\r\n      this.messageListLoading = false\r\n      this.activeChat = null\r\n      await this.getRobotList()\r\n      await this.getReceiverList()\r\n\r\n      if (this.receiverList.length > 0) {\r\n        await this.switchChat(this.receiverList[0])\r\n      }\r\n\r\n      this.initIM()\r\n    },\r\n    closeIM() {\r\n      if (this.im) {\r\n        this.im.close()\r\n      }\r\n    },\r\n    initIM() {\r\n      const im = useIM()\r\n      const user = useUserStore()\r\n\r\n      this.im = im\r\n\r\n      im.connect(user.user_id)\r\n      im.on('message', (res) => {\r\n        let msg = res.data\r\n\r\n        if (!msg || res.msg_type !== 'receiver_notify') {\r\n          return\r\n        }\r\n\r\n        if (res.change == 'create' || res.change == 'update') {\r\n          this.onAddReceiver(res)\r\n        }\r\n\r\n        if (res.change == 'delete') {\r\n          this.onDeleteReceiver(res)\r\n        }\r\n\r\n        if (res.change == 'c_message' || res.change == 'ai_message') {\r\n          this.onAddMessage(res)\r\n        }\r\n      })\r\n    },\r\n    onAddMessage(res) {\r\n      if(!this.activeChat){\r\n        return\r\n      }\r\n\r\n      const emitter = useEventBus()\r\n\r\n      let msg = res.data\r\n\r\n      if (this.activeChat.session_id != msg.session_id) {\r\n        return\r\n      }\r\n\r\n      msg.displayName = msg.name || msg.nickname\r\n      msg.dispayTime = formatDisplayChatTime(msg.create_time)\r\n\r\n      msg.uid = getUuid(32)\r\n      msg.loading = false\r\n      // msg.robot_avatar = robot.robot_avatar\r\n\r\n      if (msg.menu_json && typeof msg.menu_json === 'string') {\r\n        msg.menu_json = JSON.parse(msg.menu_json)\r\n      }\r\n\r\n      if (msg.quote_file && typeof msg.quote_file === 'string') {\r\n        msg.quote_file = JSON.parse(msg.quote_file)\r\n      }\r\n      if (msg.reply_content_list && typeof msg.reply_content_list === 'string') {\r\n        try { msg.reply_content_list = JSON.parse(msg.reply_content_list) } catch (_) { msg.reply_content_list = [] }\r\n      }\r\n\r\n      msg.voice_content = extractVoiceInfo(msg.content)\r\n      msg.content = removeVoiceFormat(msg.content)\r\n\r\n      this.messageList.push(msg)\r\n\r\n      emitter.emit('onAddMessage', msg)\r\n    },\r\n    onAddReceiver(res) {\r\n      let data = res.data\r\n\r\n      data.displayName = data.name || data.nickname\r\n      data.come_from = JSON.parse(data.come_from)\r\n\r\n       let index = this.receiverList.findIndex((item) => item.session_id == data.session_id);\r\n\r\n      if (index !== -1) {\r\n        this.receiverList.splice(index, 1, data);\r\n      }else{\r\n        if(this.selectedRobotId == '' || this.selectedRobotId == data.robot_id) {\r\n          this.receiverList.unshift(data)\r\n        }\r\n      }\r\n    },\r\n    onDeleteReceiver(res) {\r\n      let data = res.data\r\n      let index = this.receiverList.findIndex((item) => item.id == data)\r\n\r\n      if (index == -1) {\r\n        return\r\n      }\r\n\r\n      if (this.activeChat && this.activeChat.id == data) {\r\n        this.activeChat = null\r\n      }\r\n\r\n      this.receiverList.splice(index, 1)\r\n    },\r\n    async getRobotList(params) {\r\n      try {\r\n        const res = await getRobotList(params)\r\n        this.robotList = res.data || []\r\n        return res\r\n      } catch (err) {\r\n        console.error('Failed to get robot list:', err)\r\n        throw err\r\n      }\r\n    },\r\n    async getReceiverList(params) {\r\n      if (params?.page) {\r\n        this.receiverListPage.page = params.page\r\n      } else {\r\n        this.receiverListPage.page++\r\n      }\r\n\r\n      const queryParams = { ...this.receiverListPage, robot_id: this.selectedRobotId, ...params }\r\n\r\n      try {\r\n        const res = await getReceiverList(queryParams)\r\n        let list = res.data.list || []\r\n\r\n        for (let i = 0; i < list.length; i++) {\r\n          list[i].displayName = list[i].name || list[i].nickname\r\n          if (list[i].come_from) {\r\n            try {\r\n              list[i].come_from = JSON.parse(list[i].come_from)\r\n            } catch (e) {\r\n              console.error('Failed to parse come_from:', e)\r\n            }\r\n          }\r\n        }\r\n\r\n        if (this.receiverListPage.page === 1) {\r\n          this.receiverList = list\r\n        } else {\r\n          this.receiverList = this.receiverList.concat(list)\r\n        }\r\n\r\n        return res\r\n      } catch (err) {\r\n        console.error('Failed to get receiver list:', err)\r\n        if (this.receiverListPage.page > 1) {\r\n          this.receiverListPage.page--\r\n        }\r\n        throw err\r\n      }\r\n    },\r\n    changeRobot(params) {\r\n      this.activeChat = null\r\n      this.resetReceiverList(params)\r\n    },\r\n    resetReceiverList(params) {\r\n      this.receiverListPage.page = 0\r\n      this.receiverList = []\r\n\r\n      return this.getReceiverList(params)\r\n    },\r\n    async getChatMessage() {\r\n      if (this.messageListLoading) {\r\n        return\r\n      }\r\n\r\n      this.messageListLoading = true\r\n\r\n      let min_id = 0\r\n      let list = this.messageList.filter((item) => !item.isWelcome)\r\n\r\n      if (list.length > 0) {\r\n        min_id = list[0].id\r\n      }\r\n\r\n      let params = {\r\n        robot_key: this.activeChat.robot_key,\r\n        openid: this.activeChat.openid,\r\n        min_id: min_id,\r\n        size: this.chatMessagePageSize,\r\n        rel_user_id: this.activeChat.rel_user_id\r\n      }\r\n\r\n      return getChatMessage(params)\r\n        .then((res) => {\r\n          this.messageListLoading = false\r\n\r\n          let list = res.data.list || []\r\n          const _customer = res?.data?.customer || {}\r\n          const _robot = res?.data?.robot || {}\r\n\r\n          list.sort((a, b) => {\r\n            return a.id - b.id\r\n          })\r\n\r\n          for (let i = 0; i < list.length; i++) {\r\n            list[i].displayName = list[i].name || list[i].nickname\r\n            if (list[i].is_customer == 1) {\r\n              list[i].displayName = list[i].displayName || _customer.name\r\n              list[i].avatar = list[i].avatar || _customer.avatar\r\n            } else {\r\n              list[i].displayName = list[i].displayName || _robot.robot_name\r\n              list[i].avatar = list[i].avatar || _robot.robot_avatar\r\n            }\r\n            list[i].uid = getUuid(32)\r\n\r\n            if (list[i].menu_json && typeof list[i].menu_json === 'string') {\r\n              list[i].menu_json = JSON.parse(list[i].menu_json)\r\n            }\r\n\r\n\r\n            if (list[i].quote_file && typeof list[i].quote_file === 'string') {\r\n              list[i].quote_file = JSON.parse(list[i].quote_file)\r\n            }\r\n\r\n            if (list[i].reply_content_list && typeof list[i].reply_content_list === 'string') {\r\n              try { list[i].reply_content_list = JSON.parse(list[i].reply_content_list) } catch (_) { list[i].reply_content_list = [] }\r\n            }\r\n\r\n            list[i].dispayTime = formatDisplayChatTime(list[i].create_time)\r\n            list[i].voice_content = extractVoiceInfo(list[i].content)\r\n            list[i].content = removeVoiceFormat(list[i].content)\r\n          }\r\n\r\n          this.messageList = [...list, ...this.messageList]\r\n\r\n          // 消息加载完了\r\n          if (list.length < this.chatMessagePageSize) {\r\n            this.chatMessageLoadCompleted = true\r\n          }\r\n\r\n          return res\r\n        })\r\n        .catch((err) => {\r\n          this.messageListLoading = false\r\n          console.log(err)\r\n        })\r\n    },\r\n    // 清除红点\r\n    claerUnread() {\r\n      return setReceiverRead({ id: this.selectedReceiverId })\r\n    },\r\n    async switchChat(receiver) {\r\n      this.chatMessageLoadCompleted = false\r\n      this.messageListLoading = false\r\n      this.messageList = []\r\n      this.messageListScrollTop = 0\r\n      this.selectedReceiverId = receiver.id\r\n      this.activeChat = receiver\r\n\r\n      this.claerUnread()\r\n\r\n      await this.getChatMessage()\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <div class=\"no-data\">\r\n    <svg-icon name=\"empty\" :style=\"{'font-size': `${props.size}px`}\" />\r\n    <div class=\"no-data-text\">\r\n      <slot name=\"default\">{{ displayText }}</slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { computed } from 'vue'\r\n\r\nconst { t } = useI18n('views.chat-monitor.components.list-empty')\r\n\r\nconst props = defineProps({\r\n  text: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  size: {\r\n    type: [Number, String],\r\n    default: 100\r\n  }\r\n});\r\n\r\nconst displayText = computed(() => {\r\n  return props.text || t('no_data')\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.no-data {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  .no-data-text {\r\n    margin-top: 16px;\r\n    font-size: 14px;\r\n    color: #999;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>","<style lang=\"less\" scoped>\r\n.scroll-wrapper {\r\n  position: relative;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n.chat-list {\r\n  padding: 0 16px 16px 16px;\r\n  .loading-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 16px 0;\r\n    .loading-text {\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #8c8c8c;\r\n    }\r\n  }\r\n  .finished-text {\r\n    text-align: center;\r\n    padding: 16px 0;\r\n    font-size: 14px;\r\n    color: #8c8c8c;\r\n  }\r\n  .chat-item {\r\n    display: flex;\r\n    padding: 12px 16px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    background-color: #fff;\r\n    transition: background-color 0.2s ease;\r\n\r\n    &:hover {\r\n      background-color: rgba(242, 244, 247, 1);\r\n    }\r\n\r\n    &.active {\r\n      background-color: rgba(230, 239, 255, 1);\r\n    }\r\n\r\n    .avatar {\r\n      position: relative;\r\n      width: 48px;\r\n      height: 48px;\r\n      margin-right: 12px;\r\n\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n        border-radius: 12px;\r\n        object-fit: cover;\r\n      }\r\n\r\n      .dot {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        position: absolute;\r\n        top: -8px;\r\n        right: -8px;\r\n        width: 16px;\r\n        height: 16px;\r\n        font-size: 12px;\r\n        border-radius: 50%;\r\n        font-weight: 400;\r\n        color: #ffffff;\r\n        background-color: #fb363f;\r\n        &.plus {\r\n          width: auto;\r\n          padding: 0 4px;\r\n          border-radius: 8px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .chat-info {\r\n      flex: 1;\r\n      overflow: hidden;\r\n\r\n      .nickname {\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        color: rgb(38, 38, 38);\r\n      }\r\n\r\n      .last-message {\r\n        margin-top: 2px;\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        color: rgb(89, 89, 89);\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .webapp-source {\r\n        line-height: 20px;\r\n        margin-top: 2px;\r\n        font-size: 12px;\r\n        color: rgb(140, 140, 140);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<template>\r\n  <div class=\"scroll-wrapper\" ref=\"scrollRef\">\r\n    <list-empty size=\"140\" :text=\"t('no_bot_sessions')\" v-if=\"receiverList.length == 0\" />\r\n    <div class=\"chat-list\" v-else>\r\n      <div\r\n        v-for=\"item in receiverList\"\r\n        :key=\"item.id\"\r\n        class=\"chat-item\"\r\n        :class=\"{ active: item.id === selectedReceiverId }\"\r\n        @click=\"changeReceiver(item)\"\r\n      >\r\n        <div class=\"avatar\">\r\n          <img :src=\"item.avatar\" :alt=\"item.displayName\" />\r\n          <span class=\"dot\" :class=\"{ plus: item.unread > 9 }\" v-if=\"item.unread > 0\">{{ item.unread }}</span>\r\n        </div>\r\n        <div class=\"chat-info\">\r\n          <div class=\"nickname\">{{ item.displayName }}</div>\r\n          <div class=\"last-message\">{{ item.last_chat_message }}</div>\r\n          <div class=\"webapp-source\">{{ t('from_prefix') }}{{ item.come_from.app_name }}</div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"loading\" class=\"loading-wrapper\">\r\n        <a-spin size=\"small\" />\r\n        <span class=\"loading-text\">{{ t('loading') }}</span>\r\n      </div>\r\n      <div v-if=\"finished\" class=\"finished-text\">{{ t('no_more') }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport BScroll from '@better-scroll/core'\r\nimport ScrollBar from '@better-scroll/scroll-bar'\r\nimport MouseWheel from '@better-scroll/mouse-wheel'\r\nimport ObserveDOM from '@better-scroll/observe-dom'\r\nimport Pullup from '@better-scroll/pull-up'\r\nimport { storeToRefs } from 'pinia'\r\nimport { useChatMonitorStore } from '@/stores/modules/chat-monitor.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { ref, onMounted, nextTick, onUnmounted, watch } from 'vue'\r\nimport ListEmpty from './list-empty.vue'\r\n\r\nBScroll.use(MouseWheel)\r\nBScroll.use(ScrollBar)\r\nBScroll.use(ObserveDOM)\r\nBScroll.use(Pullup)\r\n\r\nconst emit = defineEmits(['switchChat'])\r\n\r\nconst { t } = useI18n('views.chat-monitor.components.chat-list')\r\n\r\nconst chatMonitorStore = useChatMonitorStore()\r\nconst { getReceiverList } = chatMonitorStore\r\nconst { receiverList, selectedReceiverId } = storeToRefs(chatMonitorStore)\r\n\r\nconst scrollRef = ref(null)\r\nlet scrollController = null\r\nconst loading = ref(false)\r\nconst finished = ref(false)\r\nconst lastParams = ref({})\r\n\r\nconst initScroll = () => {\r\n  scrollController = new BScroll(scrollRef.value, {\r\n    scrollY: true,\r\n    click: true,\r\n    observeDOM: true,\r\n    mouseWheel: true,\r\n    bounce: false,\r\n    scrollbar: {\r\n      fade: true,\r\n      interactive: true\r\n    },\r\n    pullUpLoad: true\r\n  })\r\n\r\n  scrollController.on('pullingUp', () => {\r\n    getData(lastParams.value)\r\n  })\r\n}\r\n\r\nconst getData = async (params = {}) => {\r\n  if (params.page === 1) {\r\n    finished.value = false\r\n  }\r\n  if (loading.value || finished.value) {\r\n    scrollController.finishPullUp()\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  if (params && Object.keys(params).length > 0) {\r\n    lastParams.value = { ...params }\r\n  }\r\n\r\n  try {\r\n    let res = await getReceiverList(params)\r\n\r\n    if (res.data.list.length === 0 && !params.keyword) {\r\n      finished.value = true\r\n    }\r\n  } catch (error) {\r\n    console.error(t('load_more_failed'), error)\r\n  } finally {\r\n    loading.value = false\r\n    scrollController.finishPullUp()\r\n  }\r\n}\r\n\r\nconst changeReceiver = (item) => {\r\n  emit('switchChat', item)\r\n}\r\n\r\nwatch(receiverList, (newValue) => {\r\n  if (newValue.length > 0) {\r\n    nextTick(() => {\r\n      scrollController && scrollController.refresh()\r\n    })\r\n  }\r\n})\r\n\r\nonMounted(() => {\r\n  nextTick(() => {\r\n    initScroll()\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (scrollController) {\r\n    scrollController.destroy()\r\n  }\r\n})\r\n\r\ndefineExpose({\r\n  getData\r\n})\r\n</script>\r\n","<template>\r\n  <div class=\"chat-message-scroll\" ref=\"scrollContainer\" @scroll=\"onScroll\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n/**\r\n * 聊天消息滚动容器组件\r\n * 用于处理消息列表的滚动事件，包括触顶和触底检测\r\n * 支持自定义触发距离，可用于实现上拉加载更多、下拉刷新等功能\r\n */\r\n\r\nimport { ref, watch } from 'vue'\r\n\r\n// 组件属性定义\r\nconst props = defineProps({\r\n  // 触发顶部滚动事件的距离，默认40px\r\n  topTriggerDistance: {\r\n    type: Number,\r\n    default: 10\r\n  },\r\n  // 触发底部滚动事件的距离，默认40px\r\n  bottomTriggerDistance: {\r\n    type: Number,\r\n    default: 40\r\n  },\r\n  // 是否正在加载数据，加载数据时不触发触顶和触底事件\r\n  isLoading: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  // 控制滚动位置\r\n  scrollTop: {\r\n    type: Number,\r\n    default: 0\r\n  }\r\n})\r\n\r\n// 定义组件事件\r\nconst emit = defineEmits([\r\n  'scroll-top', // 滚动到顶部时触发\r\n  'scroll-bottom', // 滚动到底部时触发\r\n  'scroll' // 滚动时触发\r\n])\r\n\r\n// 滚动容器引用\r\nconst scrollContainer = ref(null)\r\n\r\n// 滚动状态配置\r\nconst scrollOption = ref({\r\n  scrollTop: 0, // 当前滚动位置\r\n  scrollHeight: 0, // 滚动内容总高度\r\n  clientHeight: 0, // 可视区域高度\r\n  scrollDirection: 'down', // 滚动方向：up-向上滚动，down-向下滚动\r\n  scrollStartDiff: props.topTriggerDistance, // 触发顶部事件的距离\r\n  scrollEndDiff: props.bottomTriggerDistance // 触发底部事件的距离\r\n})\r\n\r\n// 滚动事件锁，防止重复触发\r\nlet isScrollLocked = false\r\n\r\n// 使用Vue的ref来存储防抖定时器\r\nconst scrollDebounceTimer = ref(null)\r\n\r\n/**\r\n * 更新滚动状态\r\n * @param {HTMLElement} target - 滚动容器元素\r\n */\r\nconst updateScrollState = (target) => {\r\n  const { scrollTop: currentScrollTop } = target\r\n  const scrollDiff = scrollOption.value.scrollTop - currentScrollTop\r\n\r\n  // 更新滚动方向\r\n  scrollOption.value.scrollDirection = scrollDiff > 0 ? 'up' : 'down'\r\n\r\n  // 更新滚动状态\r\n  Object.assign(scrollOption.value, {\r\n    scrollTop: currentScrollTop,\r\n    scrollHeight: target.scrollHeight,\r\n    clientHeight: target.clientHeight\r\n  })\r\n}\r\n\r\n/**\r\n * 检查是否触发滚动边界事件\r\n */\r\nconst checkScrollBoundaries = () => {\r\n  const { scrollTop, scrollHeight, clientHeight, scrollStartDiff, scrollEndDiff, scrollDirection } =\r\n    scrollOption.value\r\n\r\n  // 触发通用滚动事件\r\n  emit('scroll', { ...scrollOption.value })\r\n\r\n  if (!props.isLoading) {\r\n    // 检测是否触顶\r\n    const isAtTop = Math.abs(scrollTop) <= scrollStartDiff\r\n    if (isAtTop && scrollDirection === 'up') {\r\n      emit('scroll-top', { ...scrollOption.value })\r\n    }\r\n\r\n    // 检测是否触底\r\n    const isAtBottom = Math.abs(scrollHeight - scrollTop - clientHeight) <= scrollEndDiff\r\n    if (isAtBottom && scrollDirection === 'down') {\r\n      emit('scroll-bottom', { ...scrollOption.value })\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 监听滚动事件\r\n * 处理滚动方向判断、触顶和触底检测\r\n * @param {Event} e - 滚动事件对象\r\n */\r\nconst onScroll = (e) => {\r\n  updateScrollState(e.target)\r\n\r\n  if (isScrollLocked) return\r\n\r\n  if (scrollDebounceTimer.value) {\r\n    clearTimeout(scrollDebounceTimer.value)\r\n    scrollDebounceTimer.value = null\r\n  }\r\n\r\n  scrollDebounceTimer.value = setTimeout(() => {\r\n    checkScrollBoundaries()\r\n  }, 100)\r\n}\r\n\r\n/**\r\n * 滚动到顶部\r\n */\r\nfunction scrollToTop() {\r\n  if (scrollContainer.value) {\r\n    scrollContainer.value.scrollTop = 0\r\n  }\r\n}\r\n\r\n/**\r\n * 滚动到底部\r\n */\r\nfunction scrollToBottom() {\r\n  if (scrollContainer.value) {\r\n    scrollContainer.value.scrollTop = scrollContainer.value.scrollHeight\r\n  }\r\n}\r\n\r\nfunction getState() {\r\n  if (scrollContainer.value) {\r\n    Object.assign(scrollOption.value, {\r\n      scrollTop: scrollContainer.value.scrollTop,\r\n      scrollHeight: scrollContainer.value.scrollHeight,\r\n      clientHeight: scrollContainer.value.clientHeight\r\n    })\r\n  }\r\n\r\n  return JSON.parse(JSON.stringify(scrollOption.value))\r\n}\r\n\r\n// 监听scrollTop属性变化\r\nwatch(\r\n  () => props.scrollTop,\r\n  (newVal) => {\r\n    if (scrollContainer.value) {\r\n      scrollContainer.value.scrollTop = newVal\r\n    }\r\n  }\r\n)\r\n\r\n// 暴露方法给父组件\r\ndefineExpose({\r\n  scrollToTop,\r\n  scrollToBottom,\r\n  getState\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.chat-message-scroll {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"chat-message-warpper\">\r\n    <ChatMessageScroll\r\n      ref=\"scrollViewRef\"\r\n      v-model:scrollTop=\"messageListScrollTop\"\r\n      :is-loading=\"messageListLoading\"\r\n      @scroll=\"onScroll\"\r\n      @scroll-top=\"onScrollTop\"\r\n      @scroll-bottom=\"onScrollBottom\"\r\n    >\r\n      <div class=\"chat-message-content\">\r\n        <div class=\"is-loaded\" v-if=\"chatMessageLoadCompleted\">{{ t('no_more_messages') }}</div>\r\n        <div\r\n          v-for=\"(message, index) in messageList\"\r\n          :key=\"index\"\r\n          :class=\"['message-item', message.is_customer == 0 ? 'right' : '']\"\r\n        >\r\n          <div class=\"avatar\">\r\n            <img :src=\"message.avatar\" :alt=\"message.displayName\" />\r\n          </div>\r\n          <div class=\"message-content\">\r\n            <div class=\"message-info\">\r\n              <span class=\"nickname\">{{ message.displayName }}</span>\r\n              <i class=\"gap\"></i>\r\n              <span class=\"time\">{{ message.dispayTime }}</span>\r\n            </div>\r\n            <template v-if=\"parseReplyList(message.reply_content_list).length\">\r\n              <div class=\"reply-list\">\r\n                <template v-for=\"(rc, idx) in parseReplyList(message.reply_content_list)\" :key=\"idx\">\r\n                  <div v-if=\"(rc.reply_type || rc.type) === 'text'\" class=\"reply-item reply-text\">\r\n                    <div class=\"message-content\" v-html=\"rc.description\"></div>\r\n                  </div>\r\n                  <div v-else-if=\"(rc.reply_type || rc.type) === 'image'\" class=\"reply-item reply-image\">\r\n                    <div class=\"message-content\">\r\n                      <img v-viewer class=\"msg-img\" :src=\"rc.pic || rc.thumb_url\" />\r\n                    </div>\r\n                  </div>\r\n                  <div v-else-if=\"(rc.reply_type || rc.type) === 'url'\" class=\"reply-item reply-url\">\r\n                    <div class=\"url-row\">\r\n                      <a class=\"url-link\" :href=\"rc.url\" target=\"_blank\">{{ rc.url }}</a>\r\n                    </div>\r\n                  </div>\r\n                  <div v-else-if=\"(rc.reply_type || rc.type) === 'card'\" class=\"reply-item reply-card\">\r\n                    <div class=\"card-row\">\r\n                      <img v-if=\"rc.thumb_url\" :src=\"rc.thumb_url\" class=\"card-thumb\" />\r\n                      <div class=\"card-title-box\">\r\n                        <svg-icon class=\"think-icon\" name=\"applet\"></svg-icon>\r\n                        <span class=\"card-title\">{{ rc.title }}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div v-else-if=\"(rc.reply_type || rc.type) === 'imageText'\" class=\"reply-item reply-imageText\">\r\n                    <a class=\"imageText-row\" :href=\"rc.url\" target=\"_blank\">\r\n                      <img v-if=\"rc.thumb_url\" :src=\"rc.thumb_url\" class=\"imageText-thumb\" />\r\n                      <div class=\"imageText-text\">\r\n                        <div class=\"imageText-title\">{{ rc.title }}</div>\r\n                        <div class=\"imageText-desc\">{{ rc.description }}</div>\r\n                      </div>\r\n                </a>\r\n              </div>\r\n              <div v-else-if=\"(rc.reply_type || rc.type) === 'smartMenu'\" class=\"reply-item reply-smartMenu\">\r\n                <div class=\"smart-menu-box\">\r\n                  <div class=\"card-title\" v-if=\"rc.smart_menu && rc.smart_menu.menu_description\">{{ rc.smart_menu.menu_description }}</div>\r\n                  <div class=\"card-text\">\r\n                    <template v-for=\"(line, li) in buildMenuLines(rc.smart_menu?.menu_content || [])\" :key=\"li\">\r\n                      <div class=\"reply-line\">\r\n                        <span class=\"line-text\" v-if=\"line.kind === 'text'\">{{ line.text }}</span>\r\n                        <div v-else-if=\"line.kind === 'newline'\" class=\"empty-line\"></div>\r\n                        <span v-else-if=\"line.kind === 'html'\" v-html=\"line.html\"></span>\r\n                        <a v-else-if=\"line.kind === 'keyword'\" href=\"javascript:;\" class=\"link\">\r\n                          <div v-if=\"line.serial_no\">{{ line.serial_no }}</div>\r\n                          {{ line.text }}\r\n                        </a>\r\n                      </div>\r\n                    </template>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </div>\r\n        </template>\r\n            <div class=\"message-bubble\" v-if=\"!(message.msg_type == 1 && message.content == '')\">\r\n              <!-- 文本消息 -->\r\n              <div v-if=\"message.msg_type == 1\" class=\"text-content\">\r\n                <cherry-markdown\r\n                  style=\"text-align: left;\"\r\n                  :content=\"message.content\"\r\n                  v-if=\"message.is_customer == 0\"\r\n                ></cherry-markdown>\r\n                <div v-else>{{ message.content }}</div>\r\n              </div>\r\n              <!-- 收到消息类型处理，目前只处理了image 后续有其他的在这里添加 -->\r\n              <div v-else-if=\"message.received_message_type == 'image' && message.media_id_to_oss_url\" class=\"image-content\">\r\n                <img :src=\"message.media_id_to_oss_url\" alt=\"image\" />\r\n              </div>\r\n              <!-- 图片消息 -->\r\n              <div v-else-if=\"message.msg_type == 3\" class=\"image-content\">\r\n                <img :src=\"message.content\" alt=\"image\" />\r\n              </div>\r\n              <!-- 菜单消息 -->\r\n              <div v-else-if=\"message.msg_type == 2\" class=\"menu-content\">\r\n                <div class=\"menus-label\">{{ message.menu_json.content }}</div>\r\n                <div\r\n                  class=\"menu-items\"\r\n                  v-if=\"message.menu_json.question && message.menu_json.question.length > 0\"\r\n                >\r\n                  <div\r\n                    v-for=\"(item, menuIndex) in message.menu_json.question\"\r\n                    :key=\"menuIndex\"\r\n                    class=\"menu-item\"\r\n                    @click=\"handleMenuClick(item)\"\r\n                  >\r\n                    {{ item }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <!-- 多模态 -->\r\n              <div v-else-if=\"message.msg_type == 99\" class=\"multiple-content\">\r\n                <MultipleMessage :message=\"message.content\" />\r\n              </div>\r\n              <!-- 参考文件 -->\r\n              <div class=\"answer-reference-box\" v-if=\"message.quote_file && message.quote_file.length\">\r\n                <div class=\"answer-reference-label\">{{ t('answer_reference') }}</div>\r\n                <div>\r\n                  <div\r\n                    class=\"list-item\"\r\n                    v-for=\"(file, index) in message.quote_file\"\r\n                    :key=\"index\"\r\n                  >\r\n                    <svg-icon name=\"attachment\" />\r\n                    <span @click=\"openLibrary(message.quote_file, file, message)\">{{ file.file_name}}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-if=\"message.voice_content && message.voice_content.length\">\r\n              <VoiceMessage :voice_content=\"message.voice_content\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ChatMessageScroll>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, nextTick, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { storeToRefs } from 'pinia'\r\nimport { useChatMonitorStore } from '@/stores/modules/chat-monitor.js'\r\nimport CherryMarkdown from '@/components/cherry-markdown/index.vue'\r\nimport ChatMessageScroll from './chat-message-scroll.vue'\r\nimport MultipleMessage from '@/views/robot/robot-test/components/messages/multiple-message.vue'\r\nimport VoiceMessage from '@/views/robot/robot-test/components/voice-message.vue'\r\n\r\nconst { t } = useI18n('views.chat-monitor.components.chat-message')\r\n\r\nconst emit = defineEmits([\r\n  'openLibrary'\r\n])\r\n\r\nconst scrollViewRef = ref(null)\r\n\r\nconst chatMonitorStore = useChatMonitorStore()\r\nconst { getChatMessage } = chatMonitorStore\r\nconst { messageList, messageListScrollTop, messageListLoading, chatMessageLoadCompleted, activeChat } =\r\n  storeToRefs(chatMonitorStore)\r\n\r\n// 处理菜单点击事件\r\nconst handleMenuClick = () => {\r\n  // console.log('Menu item clicked:', item)\r\n}\r\n\r\n// 打开知识库\r\nfunction openLibrary(files, file, message) {\r\n  let newfiles = toRaw(files)\r\n  \r\n  file.robot_key = activeChat.value.robot_key\r\n  file.robot_id = activeChat.value.robot_id\r\n\r\n  newfiles.forEach((item) => {\r\n    item.message_id = message.id\r\n    item.openid = message.openid\r\n    item.robot_key = activeChat.value.robot_key\r\n    item.robot_id = activeChat.value.robot_id\r\n  })\r\n\r\n  emit('openLibrary', newfiles, toRaw(file))\r\n}\r\n\r\nfunction buildMenuLines(menu_content) {\r\n  const out = []\r\n  ;(Array.isArray(menu_content) ? menu_content : []).forEach((mc) => {\r\n    const t = String(mc?.menu_type || '')\r\n    const txt = String(mc?.content || '')\r\n    if (t === '0') {\r\n      if (txt === '') { out.push({ kind: 'newline' }) }\r\n      else if (/<a[\\s\\S]*?<\\/a>/.test(txt)) {\r\n        const sanitized = /href\\s*=\\s*['\"]\\s*#\\s*['\"]/i.test(txt)\r\n          ? txt.replace(/href\\s*=\\s*['\"]\\s*#\\s*['\"]/ig, 'href=\"javascript:;\"')\r\n          : txt.replace(/href=/ig, 'target=\"_blank\" href=')\r\n        out.push({ kind: 'html', html: sanitized })\r\n      } else { out.push({ kind: 'text', text: txt }) }\r\n    } else if (t === '1') { out.push({ kind: 'keyword', text: txt, serial_no: mc?.serial_no || '' }) }\r\n  })\r\n  return out.slice(0, 20)\r\n}\r\n\r\nconst onScroll = (e) => {\r\n  const { scrollTop } = e\r\n\r\n  messageListScrollTop.value = scrollTop\r\n}\r\n\r\nconst onScrollTop = async () => {\r\n  if (chatMessageLoadCompleted.value) {\r\n    return\r\n  }\r\n\r\n  let oldState = scrollViewRef.value.getState()\r\n\r\n  await getChatMessage()\r\n\r\n  nextTick(() => {\r\n    let newState = scrollViewRef.value.getState()\r\n\r\n    // 如果是向上滚动，则将滚动条位置设置为新的高度减去旧的高度\r\n    if (newState.scrollDirection == 'up') {\r\n      messageListScrollTop.value = newState.scrollHeight - oldState.scrollHeight\r\n    }\r\n  })\r\n}\r\n\r\nconst onScrollBottom = async () => {\r\n  // console.log('onScrollBottom')\r\n}\r\n\r\nconst scrollToBottom = () => {\r\n  scrollViewRef.value.scrollToBottom()\r\n}\r\n\r\nconst scrollToTop = () => {\r\n  scrollViewRef.value.scrollToTop()\r\n}\r\n\r\nfunction parseReplyList(val) {\r\n  try {\r\n    if (!val) return []\r\n    if (Array.isArray(val)) return val\r\n    if (typeof val === 'string') return JSON.parse(val || '[]')\r\n    return []\r\n  } catch (_e) {\r\n    return []\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  scrollToTop,\r\n  scrollToBottom\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.chat-message-warpper {\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: hidden;\r\n}\r\n.chat-message-content {\r\n  padding: 8px 24px 8px 24px;\r\n\r\n  .is-loaded {\r\n    text-align: center;\r\n    line-height: 20px;\r\n    font-size: 12px;\r\n    padding-bottom: 8px;\r\n    color: rgb(122, 134, 153);\r\n  }\r\n}\r\n.message-item {\r\n  display: flex;\r\n  margin-bottom: 16px;\r\n  &.right {\r\n    flex-direction: row-reverse;\r\n    .avatar {\r\n      margin-right: 0;\r\n      margin-left: 12px;\r\n    }\r\n    .message-info {\r\n      flex-direction: row-reverse;\r\n    }\r\n    .message-content{\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n.avatar {\r\n  width: 48px;\r\n  height: 48px;\r\n  margin-right: 12px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n  }\r\n}\r\n.message-content {\r\n  max-width: 70%;\r\n}\r\n.message-info {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 4px;\r\n  line-height: 20px;\r\n  justify-content: flex-start;\r\n  .nickname,\r\n  .time {\r\n    line-height: 20px;\r\n    font-size: 12px;\r\n    color: rgb(122, 134, 153);\r\n  }\r\n  .gap {\r\n    width: 8px;\r\n  }\r\n}\r\n.message-bubble {\r\n  display: inline-block;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  .text-content {\r\n    padding: 12px 16px;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    word-break: break-all;\r\n    &::v-deep(.cherry-markdown) {\r\n      p:last-child {\r\n        margin-bottom: 0;\r\n      }\r\n    }\r\n  }\r\n  .image-content {\r\n    padding: 12px 16px;\r\n    max-width: 200px;\r\n    img {\r\n      width: 100%;\r\n      border-radius: 4px;\r\n    }\r\n  }\r\n  .menu-content {\r\n    padding: 12px 16px;\r\n\r\n    .menus-label {\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      color: rgb(38, 38, 38);\r\n      text-align: right;\r\n    }\r\n    .menu-items {\r\n      margin-top: 8px;\r\n    }\r\n    .menu-item {\r\n      line-height: 20px;\r\n      padding: 6px 12px;\r\n      margin-bottom: 8px;\r\n      border-radius: 6px;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n      transition: all 0.3s;\r\n      color: rgb(22, 71, 153);\r\n      background-color: rgba(230, 239, 255, 1);\r\n      &:hover {\r\n        opacity: 0.8;\r\n      }\r\n      &:last-child {\r\n        margin-bottom: 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  .multiple-content{\r\n    padding: 12px 16px;\r\n  }\r\n}\r\n\r\n.answer-reference-box{\r\n  padding: 12px 16px;\r\n  border-top: 1px solid #EDEFF2;\r\n  .answer-reference-label{\r\n    color: #7a8699;\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n    font-weight: 400;\r\n  }\r\n  .list-item{\r\n    cursor: pointer;\r\n    margin-top: 8px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    line-height: 22px;\r\n    color: #164799;\r\n  }\r\n}\r\n\r\n.reply-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.reply-url .url-link {\r\n  color: #2475fc;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 20px;\r\n  text-decoration: none;\r\n}\r\n\r\n.reply-url .url-row {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.reply-card .card-row {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.reply-card .card-title-box {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.reply-card .card-thumb {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.reply-card .card-title {\r\n  color: #595959;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n\r\n.reply-imageText .imageText-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.reply-imageText .imageText-thumb {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 6px;\r\n  object-fit: cover;\r\n}\r\n\r\n.reply-imageText .imageText-text {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.reply-imageText .imageText-title {\r\n  color: #595959;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n\r\n.reply-imageText .imageText-desc {\r\n  color: #8c8c8c;\r\n  font-size: 12px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 16px;\r\n}\r\n\r\n.reply-item {\r\n  width: 100%;\r\n  border-radius: 16px 4px 16px 16px;\r\n  padding: 16px 12px;\r\n  background: #fff;\r\n}\r\n\r\n.reply-text .message-content {\r\n  max-width: 100%;\r\n  color: #1a1a1a;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 20px;\r\n}\r\n\r\n.reply-image .msg-img {\r\n  max-width: 500px;\r\n}\r\n\r\n.reply-smartMenu {\r\n  color: #1a1a1a;\r\n  .smart-menu-box {\r\n    .card-title {\r\n      white-space: pre-wrap;\r\n      align-self: stretch;\r\n      font-size: 14px;\r\n      font-style: normal;\r\n      font-weight: 400;\r\n      line-height: 20px;\r\n      margin-bottom: 14px;\r\n    }\r\n    .card-text {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n      .reply-line {\r\n        line-height: 22px;\r\n        .line-text {\r\n          color: #3a4559;\r\n        }\r\n        .empty-line {\r\n          height: 22px;\r\n        }\r\n        .link {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 4px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","<style lang=\"less\" scoped>\r\n.library-info-alert {\r\n  .close-btn {\r\n    font-size: 16px;\r\n    color: rgba(0, 0, 0, 0.45);\r\n    cursor: pointer;\r\n  }\r\n\r\n  .library-info-content {\r\n    .file-list {\r\n      font-size: 0;\r\n      width: 100%;\r\n      overflow: hidden;\r\n      overflow-x: auto;\r\n      white-space: nowrap;\r\n\r\n      .file-item {\r\n        display: inline-block;\r\n        line-height: 22px;\r\n        padding: 5px 16px;\r\n        margin-right: 8px;\r\n        font-size: 14px;\r\n        border-radius: 2px;\r\n        color: #595959;\r\n        border: 1px solid #d9d9d9;\r\n        white-space: nowrap;\r\n        cursor: pointer;\r\n        transition: all 0.2s;\r\n\r\n        &.active {\r\n          color: #2475fc;\r\n          border: 1px solid #2475fc;\r\n          background-color: #f5f9ff;\r\n        }\r\n      }\r\n    }\r\n\r\n    .document-items {\r\n      .document-item {\r\n        padding: 16px;\r\n        margin-top: 8px;\r\n        border-radius: 2px;\r\n        background-color: #ffffff;\r\n      }\r\n\r\n      .document-item-header {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        height: 22px;\r\n        line-height: 22px;\r\n      }\r\n\r\n      .document-title {\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n        color: #000000;\r\n        padding-right: 8px;\r\n      }\r\n\r\n      .document-size {\r\n        font-size: 14px;\r\n        color: #8c8c8c;\r\n      }\r\n\r\n      .document-similarity {\r\n        margin-top: 4px;\r\n        font-size: 14px;\r\n        color: #8c8c8c;\r\n        display: flex;\r\n        align-items: center;\r\n        .svg-action{\r\n          margin-right: 4px;\r\n        }\r\n      }\r\n\r\n      .document-content {\r\n        line-height: 22px;\r\n        margin-top: 8px;\r\n        font-size: 14px;\r\n        color: #595959;\r\n        white-space: pre-wrap;\r\n      }\r\n      .fragment-img {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 8px;\r\n        margin-top: 8px;\r\n        img {\r\n          width: 80px;\r\n          height: 80px;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-drawer\r\n    class=\"library-info-alert\"\r\n    v-model:open=\"show\"\r\n    :title=\"t('answer_source')\"\r\n    placement=\"right\"\r\n    width=\"746px\"\r\n    :closable=\"false\"\r\n    :bodyStyle=\"{ background: '#F2F4F7' }\"\r\n  >\r\n    <template #extra>\r\n      <span class=\"close-btn\" @click=\"onClose\"><CloseOutlined /></span>\r\n    </template>\r\n\r\n    <div class=\"library-info-content\">\r\n      <div class=\"file-list\">\r\n        <div\r\n          class=\"file-item\"\r\n          :class=\"{ active: activeFileId == file.id }\"\r\n          v-for=\"file in fileList\"\r\n          :key=\"file.id\"\r\n          @click=\"chagenFile(file)\"\r\n        >\r\n          {{ file.file_name }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"document-items\" ref=\"docBoxRef\">\r\n        <div class=\"document-item\" v-for=\"item in documentList\" :key=\"item.id\">\r\n          <div class=\"document-item-header\">\r\n            <div class=\"left-box\">\r\n              <span class=\"document-title\">{{ t('id_prefix') }}{{ item.id }}</span>\r\n              <span class=\"document-title\" v-if=\"item.title\">{{ item.title }}</span>\r\n              <span class=\"document-size\"> {{ t('total_characters', { count: item.word_total }) }} </span>\r\n            </div>\r\n            <div class=\"right-box\"><a @click=\"toSource\">{{ t('view_source_document') }}</a></div>\r\n          </div>\r\n\r\n          <div class=\"document-item-body\">\r\n            <div class=\"document-similarity\">\r\n              {{ t('similarity') }} <svg-icon name=\"similarity\" style=\"font-size: 16px\"></svg-icon\r\n              >{{ item.similarity }}\r\n            </div>\r\n            <div class=\"document-content\" v-if=\"item.question\">{{ t('question_prefix') }}{{ item.question }}</div>\r\n            <div class=\"document-content\" v-if=\"item.answer\">{{ t('answer_prefix') }}{{ item.answer }}</div>\r\n            <div class=\"document-content\">\r\n              {{ item.content }}\r\n            </div>\r\n            <div class=\"fragment-img\" v-viewer>\r\n              <img v-for=\"(item, index) in item.images\" :key=\"index\" :src=\"item\" alt=\"\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </a-drawer>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { CloseOutlined } from '@ant-design/icons-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { getAnswerSource } from '@/api/chat/index'\r\nimport {useMathJax} from \"@/composables/useMathJax.js\";\r\n\r\nconst { t } = useI18n('views.chat-monitor.components.library-info-alert')\r\n\r\nconst router = useRouter()\r\nconst { renderMath } = useMathJax()\r\n\r\nconst show = ref(false)\r\nconst docBoxRef = ref(null)\r\n\r\nconst fileList = ref([])\r\nconst activeFileId = ref(null)\r\n\r\nconst reset = () => {\r\n  fileList.value = []\r\n  activeFileId.value = null\r\n}\r\n\r\nconst open = (files, file) => {\r\n  reset()\r\n\r\n  fileList.value = files\r\n  activeFileId.value = file.id\r\n  show.value = true\r\n\r\n  getDocumentList(file)\r\n}\r\n\r\nconst chagenFile = (file) => {\r\n  if (file.id == activeFileId.value) {\r\n    return\r\n  }\r\n\r\n  activeFileId.value = file.id\r\n\r\n  getDocumentList(file)\r\n}\r\n\r\nconst documentList = ref([])\r\n\r\nconst getDocumentList = (file) => {\r\n  getAnswerSource({\r\n    message_id: file.message_id,\r\n    file_id: file.id,\r\n    robot_key: file.robot_key,\r\n    openid: file.openid,\r\n  }).then((res) => {\r\n    documentList.value = res.data || []\r\n    renderMath(docBoxRef.value)\r\n  })\r\n}\r\n\r\n// 查看原文档\r\nconst toSource = () => {\r\n  router.push('/library/preview?id=' + activeFileId.value)\r\n}\r\n\r\nconst onClose = () => {\r\n  show.value = false\r\n}\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.chat-box-warpper {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  background: #F2F4F7;\r\n}\r\n.chat-box-header {\r\n  padding: 12px 16px;\r\n  .nickname {\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n    color: rgb(36, 41, 51);\r\n    text-align: center;\r\n  }\r\n  .chat-source {\r\n    line-height: 20px;\r\n    margin-top: 4px;\r\n    font-size: 12px;\r\n    color: rgb(122, 134, 153);\r\n    text-align: center;\r\n  }\r\n}\r\n.chat-box-content {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"chat-box-warpper\" v-if=\"activeChat\">\r\n    <div class=\"chat-box-header\">\r\n      <div class=\"nickname\">{{ activeChat.name || activeChat.nickname }}</div>\r\n      <div class=\"chat-source\">\r\n        {{ t('from_source', { robot: activeChat.come_from.robot_name, app: activeChat.come_from.app_name }) }}\r\n      </div>\r\n    </div>\r\n    <div class=\"chat-box-content\">\r\n      <ChatMessage ref=\"chatMessageRef\" @openLibrary=\"handleOpenLibraryInfo\" />\r\n    </div>\r\n  </div>\r\n  <div v-else></div>\r\n  <LibraryInfoAlert ref=\"libraryInfoAlertRef\" />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { storeToRefs } from 'pinia'\r\nimport { useChatMonitorStore } from '@/stores/modules/chat-monitor.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport ChatMessage from './chat-message.vue'\r\nimport LibraryInfoAlert from './library-info-alert.vue'\r\n\r\nconst { t } = useI18n('views.chat-monitor.components.chat-box')\r\n\r\nconst chatMonitorStore = useChatMonitorStore()\r\n\r\nconst { activeChat } = storeToRefs(chatMonitorStore)\r\n\r\nconst chatMessageRef = ref(null)\r\n\r\nconst scrollToBottom = () => {\r\n  chatMessageRef.value.scrollToBottom()\r\n}\r\n\r\nconst scrollToTop = () => {\r\n  chatMessageRef.value.scrollToTop()\r\n}\r\n\r\nconst libraryInfoAlertRef = ref(null)\r\nconst handleOpenLibraryInfo = (files, file) => {\r\n  libraryInfoAlertRef.value.open(files, file)\r\n}\r\n\r\ndefineExpose({\r\n  scrollToTop,\r\n  scrollToBottom\r\n})\r\n</script>","<template>\r\n  <div class=\"zm-date-quick\">\r\n    <div class=\"btns\">\r\n      <template v-for=\"item in tagDateArr\" :key=\"item.key\">\r\n        <span\r\n          class=\"btn\"\r\n          :class=\"{ active: item.key === create_time_type }\"\r\n          @click=\"handleTagChange(item.key)\"\r\n        >\r\n          {{ t(item.label) }}\r\n          <DownOutlined v-if=\"item.key === 5\" class=\"down-icon\" :class=\"{ rotate: showCustomPanel }\" />\r\n        </span>\r\n      </template>\r\n    </div>\r\n    <div class=\"custom-panel\" v-if=\"showCustomPanel\">\r\n      <a-range-picker\r\n        v-model:value=\"range\"\r\n        format=\"YYYY-MM-DD\"\r\n        :disabledDate=\"disabledDate\"\r\n        :allowClear=\"false\"\r\n        @change=\"handleDateChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport dayjs from 'dayjs'\r\nimport { ref, reactive, onMounted, watch } from 'vue'\r\nimport { DownOutlined } from '@ant-design/icons-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.chat-monitor.components.date-filter')\r\n\r\nconst props = defineProps({\r\n  datekey: {\r\n    type: String,\r\n    default: '2'\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['dateChange'])\r\n\r\nconst create_time_type = ref(2)\r\nconst showCustomPanel = ref(false)\r\nconst range = ref([])\r\n\r\nconst tagDateArr = reactive([\r\n  {\r\n    label: 'label_today',\r\n    key: 2,\r\n    start_date: dayjs().startOf('day'),\r\n    end_date: dayjs().endOf('day')\r\n  },\r\n  {\r\n    label: 'label_yesterday',\r\n    key: 3,\r\n    start_date: dayjs().subtract(1, 'day').startOf('day'),\r\n    end_date: dayjs().startOf('day').subtract(1, 'millisecond')\r\n  },\r\n  {\r\n    label: 'label_this_week',\r\n    key: 6,\r\n    start_date: dayjs().startOf('week'),\r\n    end_date: dayjs().endOf('day').subtract(1, 'millisecond')\r\n  },\r\n  {\r\n    label: 'label_last_3_months',\r\n    key: 7,\r\n    start_date: dayjs().subtract(3, 'month').startOf('day'),\r\n    end_date: dayjs().endOf('day').subtract(1, 'millisecond')\r\n  },\r\n  {\r\n    label: 'label_custom',\r\n    key: 5,\r\n    start_date: dayjs().startOf('day'),\r\n    end_date: dayjs().endOf('day')\r\n  }\r\n])\r\n\r\nconst disabledDate = (current) => {\r\n  return current && current.valueOf() > dayjs().endOf('day').valueOf()\r\n}\r\n\r\nconst emitRange = (start, end) => {\r\n  emit('dateChange', {\r\n    start_time: start.startOf('day').format('YYYYMMDD'),\r\n    end_time: end.endOf('day').format('YYYYMMDD')\r\n  })\r\n}\r\n\r\nconst handleTagChange = (key) => {\r\n  create_time_type.value = key\r\n  const dateItem = tagDateArr.find((i) => i.key === key)\r\n  if (!dateItem) return\r\n\r\n  if (key === 5) {\r\n    range.value = [dateItem.start_date, dateItem.end_date]\r\n    showCustomPanel.value = !showCustomPanel.value\r\n    create_time_type.value = 5\r\n    return\r\n  }\r\n\r\n  range.value = [dateItem.start_date, dateItem.end_date]\r\n  emitRange(dateItem.start_date, dateItem.end_date)\r\n}\r\n\r\nconst handleDateChange = (dates) => {\r\n  if (!dates || dates.length < 2) return\r\n  const [start, end] = dates\r\n  create_time_type.value = 5\r\n  tagDateArr.forEach((i) => {\r\n    if (i.key === 5) {\r\n      i.start_date = start\r\n      i.end_date =end\r\n    }\r\n  })\r\n  emitRange(start, end)\r\n}\r\n\r\nonMounted(() => {\r\n  const initKey = parseInt(props.datekey.split('-')[0]) || 2\r\n  handleTagChange(initKey)\r\n})\r\n\r\nwatch(\r\n  () => props.datekey,\r\n  (newVal) => {\r\n    const key = parseInt(String(newVal).split('-')[0]) || 2\r\n    handleTagChange(key)\r\n  }\r\n)\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.zm-date-quick {\r\n  .btns {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n    .btn {\r\n      font-size: 14px;\r\n      color: #595959;\r\n      cursor: pointer;\r\n      transition: color 0.2s ease;\r\n      display: inline-flex;\r\n      align-items: center;\r\n      .down-icon {\r\n        margin-left: 4px;\r\n        font-size: 12px;\r\n        color: #8c8c8c;\r\n      }\r\n      &:hover {\r\n        color: #2475fc;\r\n      }\r\n      &.active {\r\n        color: #2475fc;\r\n      }\r\n    }\r\n  }\r\n  .custom-dropdown {\r\n    padding: 8px;\r\n    background: #fff;\r\n    border-radius: 6px;\r\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\r\n  }\r\n  .custom-panel {\r\n    margin-top: 8px;\r\n    padding: 8px;\r\n    background: #fff;\r\n    border-radius: 6px;\r\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\r\n  }\r\n  .down-icon {\r\n    transition: transform 0.2s ease;\r\n    &.rotate {\r\n      transform: rotate(180deg);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.chat-monitor-page {\r\n  display: flex;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 6px;\r\n}\r\n.page-left {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 368px;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  background-color: #fff;\r\n  .app-list-box {\r\n    padding: 16px 16px 8px;\r\n  }\r\n\r\n  .search-box {\r\n    padding: 0 16px 16px;\r\n    .search-input-row {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n    }\r\n    .time-filter-btn {\r\n      display: inline-flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 32px;\r\n      height: 32px;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n      background-color: #E4E6EB;\r\n      transition: background-color 0.2s ease, color 0.2s ease;\r\n      &:hover {\r\n        background-color: rgba(242, 244, 247, 1);\r\n        color: #262626;\r\n      }\r\n      .time-icon {\r\n        font-size: 20px;\r\n        color: #595959;\r\n      }\r\n      &.active {\r\n        background-color: #E5EFFF;\r\n        .time-icon {\r\n          color: #2475FC;\r\n        }\r\n      }\r\n    }\r\n    .date-filter-wrapper {\r\n      margin-top: 8px;\r\n      padding: 8px;\r\n      border-radius: 6px;\r\n      background-color: #fff;\r\n    }\r\n  }\r\n\r\n  .chat-list-wrapper {\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n}\r\n.page-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"chat-monitor-page\">\r\n    <div class=\"page-left\">\r\n      <div class=\"app-list-box\">\r\n        <a-select v-model:value=\"selectedRobotId\" style=\"width: 100%\" @change=\"onChangeRobot\">\r\n          <a-select-option value=\"\">{{ t('all_apps') }}</a-select-option>\r\n          <a-select-option :value=\"item.id\" v-for=\"item in robotList\" :key=\"item.id\">\r\n            <span>{{ item.robot_name }}</span>\r\n          </a-select-option>\r\n        </a-select>\r\n      </div>\r\n\r\n      <div class=\"search-box\">\r\n        <div class=\"search-input-row\">\r\n          <a-input\r\n            v-model:value=\"keyword\"\r\n            :placeholder=\"t('search_placeholder')\"\r\n            enter-button\r\n            style=\"flex: 1;\"\r\n            @search=\"onSearch\"\r\n            allowClear\r\n            @pressEnter=\"onSearch\"\r\n          />\r\n          <div class=\"time-filter-btn\" :class=\"{ active: showDateFilter }\" @click=\"toggleDateFilter\">\r\n            <svg-icon name=\"time-line-icon\" class=\"time-icon\"></svg-icon>\r\n          </div>\r\n        </div>\r\n        <div class=\"date-filter-wrapper\" v-if=\"showDateFilter\">\r\n          <DateFilter :datekey=\"defaultDateKey\" @dateChange=\"onDateChange\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"chat-list-wrapper\">\r\n        <ChatList ref=\"chatListRef\" @switchChat=\"handleSwitchChat\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"page-body\" ref=\"bodyRef\">\r\n      <ChatBox v-if=\"activeChat\" ref=\"chatBoxRef\" />\r\n      <list-empty style=\"background: #F2F4F7;\" size=\"250\" v-else>\r\n        <div>\r\n          <p>{{ t('select_conversation_tip') }}</p>\r\n          <p>{{ t('feature_description') }}</p>\r\n        </div>\r\n      </list-empty>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted, nextTick } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { storeToRefs } from 'pinia'\r\nimport { useEventBus } from '@/hooks/event/useEventBus'\r\nimport { useChatMonitorStore } from '@/stores/modules/chat-monitor.js'\r\nimport ChatList from './components/chat-list .vue'\r\nimport ChatBox from './components/chat-box.vue'\r\nimport ListEmpty from './components/list-empty.vue'\r\nimport DateFilter from './components/date-filter.vue'\r\nimport dayjs from 'dayjs'\r\n\r\nconst { t } = useI18n('views.chat-monitor')\r\nconst emitter = useEventBus()\r\n\r\nconst chatMonitorStore = useChatMonitorStore()\r\nconst { init, changeRobot, switchChat, closeIM } = chatMonitorStore\r\nconst { robotList, selectedRobotId, activeChat } = storeToRefs(chatMonitorStore)\r\n\r\nconst bodyRef = ref(null)\r\nconst chatListRef = ref(null)\r\nconst chatBoxRef = ref(null)\r\nconst keyword = ref('')\r\nconst showDateFilter = ref(false)\r\nconst defaultDateKey = ref('2')\r\nconst start_time = ref('')\r\nconst end_time = ref('')\r\n\r\nconst toggleDateFilter = () => {\r\n  showDateFilter.value = !showDateFilter.value\r\n}\r\n\r\nconst onDateChange = ({ start_time: s, end_time: e }) => {\r\n  start_time.value = dayjs(String(s), 'YYYYMMDD').startOf('day').unix()\r\n  end_time.value = dayjs(String(e), 'YYYYMMDD').endOf('day').unix()\r\n  const params = {\r\n    keyword: keyword.value,\r\n    page: 1,\r\n    start_time: start_time.value,\r\n    end_time: end_time.value\r\n  }\r\n  if (chatListRef.value) {\r\n    chatListRef.value.getData(params)\r\n  }\r\n}\r\nconst onChangeRobot = () => {\r\n  const params = {\r\n    keyword: keyword.value,\r\n    page: 1,\r\n    start_time: start_time.value || undefined,\r\n    end_time: end_time.value || undefined\r\n  }\r\n  changeRobot(params)\r\n}\r\n\r\n\r\nconst handleSwitchChat = async (item) => {\r\n  await switchChat(item)\r\n\r\n  chatBoxRef.value?.scrollToBottom()\r\n}\r\n\r\nconst onAddMessage = () => {\r\n  nextTick(() => {\r\n    chatBoxRef.value?.scrollToBottom()\r\n  })\r\n}\r\n\r\nconst onSearch = () => {\r\n  const params = {\r\n    keyword: keyword.value,\r\n    page: 1,\r\n    start_time: start_time.value || undefined,\r\n    end_time: end_time.value || undefined\r\n  }\r\n  if (chatListRef.value) {\r\n    chatListRef.value.getData(params)\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  await init()\r\n\r\n  nextTick(() => {\r\n    chatBoxRef.value?.scrollToBottom()\r\n  })\r\n\r\n  // 监听 updateAiMessage 触发消息列表滚动\r\n  emitter.on('onAddMessage', onAddMessage)\r\n})\r\n\r\nonUnmounted(() => {\r\n  emitter.off('onAddMessage', onAddMessage)\r\n\r\n  closeIM()\r\n})\r\n</script>\r\n"],"names":["getReceiverList","params","request","getChatMessage","data","setReceiverRead","useChatMonitorStore","defineStore","im","useIM","user","useUserStore","res","emitter","useEventBus","msg","formatDisplayChatTime","getUuid","extractVoiceInfo","removeVoiceFormat","index","item","getRobotList","err","queryParams","list","i","e","min_id","_customer","_a","_robot","_b","a","b","receiver","t","useI18n","props","__props","displayText","computed","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_svg_icon","_normalizeStyle","_createElementVNode","_hoisted_2","_renderSlot","_ctx","BScroll","MouseWheel","ScrollBar","ObserveDOM","Pullup","emit","__emit","chatMonitorStore","receiverList","selectedReceiverId","storeToRefs","scrollRef","ref","scrollController","loading","finished","lastParams","initScroll","getData","error","changeReceiver","watch","newValue","nextTick","onMounted","onUnmounted","__expose","_unref","_createBlock","ListEmpty","_Fragment","_renderList","$event","_hoisted_3","_normalizeClass","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_component_a_spin","_hoisted_10","_hoisted_11","scrollContainer","scrollOption","scrollDebounceTimer","updateScrollState","target","currentScrollTop","scrollDiff","checkScrollBoundaries","scrollTop","scrollHeight","clientHeight","scrollStartDiff","scrollEndDiff","scrollDirection","onScroll","scrollToTop","scrollToBottom","getState","newVal","scrollViewRef","messageList","messageListScrollTop","messageListLoading","chatMessageLoadCompleted","activeChat","handleMenuClick","openLibrary","files","file","message","newfiles","toRaw","buildMenuLines","menu_content","out","mc","txt","sanitized","onScrollTop","oldState","newState","onScrollBottom","parseReplyList","val","ChatMessageScroll","_hoisted_4","rc","idx","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","line","li","_hoisted_34","_hoisted_35","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","CherryMarkdown","_hoisted_41","_hoisted_42","_hoisted_44","_hoisted_46","_hoisted_47","_hoisted_48","menuIndex","_hoisted_49","_hoisted_50","MultipleMessage","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","VoiceMessage","router","useRouter","renderMath","useMathJax","show","docBoxRef","fileList","activeFileId","reset","open","getDocumentList","chagenFile","documentList","getAnswerSource","toSource","onClose","_component_a_drawer","CloseOutlined","_createTextVNode","_hoisted_12","_withDirectives","_hoisted_15","chatMessageRef","libraryInfoAlertRef","handleOpenLibraryInfo","ChatMessage","LibraryInfoAlert","create_time_type","showCustomPanel","range","tagDateArr","reactive","dayjs","disabledDate","current","emitRange","start","end","handleTagChange","key","dateItem","handleDateChange","dates","initKey","DownOutlined","_component_a_range_picker","init","changeRobot","switchChat","closeIM","robotList","selectedRobotId","bodyRef","chatListRef","chatBoxRef","keyword","showDateFilter","defaultDateKey","start_time","end_time","toggleDateFilter","onDateChange","s","onChangeRobot","handleSwitchChat","onAddMessage","onSearch","_component_a_select","_component_a_select_option","_component_a_input","DateFilter","ChatList","ChatBox"],"mappings":"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"}