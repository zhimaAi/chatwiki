import{b as Ne,u as me,bY as Ye,d as je,b$ as G,c0 as Q,bX as ue,ce as Fe,c8 as We,_ as Ve,c1 as qe}from"../../index-DSFcP5NQ.js";import{d as ee}from"./utils-CvB22N-W.js";import{c as M,E as te,j as A,o as we,a as h,p as o,h as q,b as d,r as b,w as be,y as l,e as Y,t as S,C as Ae,Y as Ke,q as U,u as i,v as r,F as _e,l as ye,i as ge,ah as Je,ag as Xe}from"./vue-chunks-BdaA73Wf.js";import{u as Ze}from"./useCopyShareUrl-B33FjLtG.js";import{E as pe}from"./editor-cherry-CFIsbKoN.js";import{u as Ge}from"./index-B_UHbFfL.js";import{b as j,I as oe,W as Se,a9 as Qe,a4 as ve,ad as he,B as et,ag as tt,h as ot,M as nt}from"./ui-antd-Dl1wwwCD.js";import{_ as K}from"./emoji-mart-BBMRoEa3.js";import{W as st,S as at}from"./wiki-dropdown-BkKKYb8k.js";import"./neo4j-MWxXN7EM.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./other-LrIFyvU9.js";function it(C,g){Ge({file:C,category:"library_doc_image"}).then(n=>{if(n.res!=0)return j.error(n.msg);let u=n.data.link;/video/i.test(C.type)?g(u,{name:`${C.name.replace(/\.[^.]+$/,"")}`,isBorder:!1,isShadow:!1,isRadius:!1}):/image/i.test(C.type)?g(u,{name:`${C.name.replace(/\.[^.]+$/,"")}`,isBorder:!1,isShadow:!1,isRadius:!1}):g(u)}).catch(n=>{j.error("å›¾ç‰‡ä¸Šä¼ å¤±è´¥")})}const fe={fileUpload:it,externals:{echarts:!1,katex:!1,MathJax:!1},isPreviewOnly:!1,engine:{global:{},syntax:{image:{videoWrapper:(C,g,n)=>n},link:{target:"_blank",rel:""},autoLink:{target:"_blank",rel:"",enableShortLink:!1,shortLinkLength:20},header:{anchorStyle:"none"},codeBlock:{theme:"twilight",lineNumber:!0,expandCode:!0,copyCode:!0,editCode:!0,changeLang:!0,customBtns:[]},table:{enableChart:!1},fontEmphasis:{allowWhitespace:!1},strikethrough:{needWhitespace:!1}}},multipleFileSelection:{video:!1,audio:!1,image:!1,word:!1,pdf:!1,file:!1},toolbars:{toolbar:["bold","italic",{strikethrough:["strikethrough","underline","sub","sup","ruby","customMenuAName"]},"size","|","color","header","|","ol","ul","checklist","panel","justify","detail","|","formula",{insert:["image","audio","video","link","hr","br","code","inlineCode","formula","toc","table","pdf","word","file"]},"graph","togglePreview","shortcutKey"],toolbarRight:["fullScreen","|","export","changeLocale","wordCount"],bubble:["bold","italic","underline","strikethrough","sub","sup","quote","ruby","|","size","color","theme"],sidebar:["mobilePreview","copy"],toc:{updateLocationHash:!1,defaultModel:"full"}},editor:{autoSave2Textarea:!0,defaultModel:"edit&preview",showFullWidthMark:!0,showSuggestList:!0},themeSettings:{mainTheme:"ant-design",themeList:[{className:"ant-design",label:"ant-design"}],codeBlockTheme:"one-light"}},lt={class:"md-editor-body"},ct={__name:"md-editor",emits:["inited","input","blur"],setup(C,{expose:g,emit:n}){const u=n,y={"en-US":"en_US","zh-CN":"zh_cn"},m=Ne(),k=M(()=>y[m.getCurrentLocale.lang]);let _=null;k.value;const a=te({type:"editor",content:""}),D=()=>{_=new pe({...fe,id:"md-editor",locale:k.value,value:a.content,editor:{defaultModel:"previewOnly",keepDocumentScrollAfterInit:!0},previewer:{enablePreviewerBubble:!1,floatWhenClosePreviewer:!1},toolbars:{toolbar:!1,toc:{updateLocationHash:!0,defaultModel:"full",position:"fixed",cssText:"right: 20px;"}}}),_.setTheme("ant-design"),_.setLocale(k.value)},p=()=>{let v={...fe,id:"md-editor",locale:k.value,value:a.content,event:{afterInit(){u("inited")},afterChange(B){f(B)},blur:()=>{w()}}};_=new pe(v),_.setTheme("ant-design"),_.setLocale(k.value)},L=(v,B=!1)=>{_.setValue(v,B)},x=()=>_.getMarkdown(),c=v=>{L(v.content)},t=()=>({content:x()}),$=()=>{L("",!0)},f=v=>{u("input",v)},w=v=>{u("blur",v)},T=(v,B)=>{a.type=v,a.content=B,_&&_.destroy(),v==="editor"?p():v==="preview"&&D()};return A(()=>{}),we(()=>{_&&_.destroy()}),g({init:T,setContent:L,getContent:x,setDoc:c,getDoc:t,clearDoc:$}),(v,B)=>(d(),h("div",{class:q(["md-editor-wrapper",["is-"+a.type]])},[o("div",lt,[o("div",{class:q([a.type+"-box"]),id:"md-editor"},null,2)])],2))}},rt=K(ct,[["__scopeId","data-v-5ecf6179"]]),dt={class:"doc-title-input-wrapper"},ut={__name:"doc-title-input",props:{title:{type:String,default:""},isHighlight:{type:Boolean,default:!1}},emits:["update:title","input","blur","titleClick"],setup(C,{emit:g}){const n=g,u=b(null),y=C,m=b(y.title),k=()=>{n("blur",m.value)},_=()=>{n("input",m.value),n("update:title",m.value)};return be(()=>y.title,()=>{m.value=y.title}),A(()=>{}),(a,D)=>{const p=oe;return d(),h("div",dt,[l(p,{class:"doc-title-input",value:m.value,"onUpdate:value":D[0]||(D[0]=L=>m.value=L),valueModifiers:{trim:!0},type:"text",placeholder:"",maxlength:100,onInput:_,onBlur:k,ref_key:"inputRef",ref:u},null,8,["value"])])}}},_t=K(ut,[["__scopeId","data-v-eafb1830"]]),ke=[{content:"ðŸ¥‡",keywords:["ç¬¬ä¸€æ­¥","ç¬¬ä¸€å","ä¼˜å…ˆ","é¦–é€‰"]},{content:"ðŸ¥ˆ",keywords:["ç¬¬äºŒæ­¥","ç¬¬äºŒå","æ¬¡é€‰"]},{content:"ðŸ¥‰",keywords:["ç¬¬ä¸‰æ­¥","ç¬¬ä¸‰å"]},{content:"ðŸ”¹",keywords:["å°èŠ‚æ ‡é¢˜","åˆ—è¡¨å‰ç¼€"]},{content:"ðŸ”¸",keywords:["å°èŠ‚æ ‡é¢˜","é‡ç‚¹æç¤º"]},{content:"ðŸ“Œ",keywords:["å›ºå®š","å…³é”®ç‚¹","é‡è¦"]},{content:"ðŸ“",keywords:["å†™ä½œ","ç¬”è®°","è®°å½•"]},{content:"âœ…",keywords:["æˆåŠŸ","å®Œæˆ","æŽ¨è","æ­£ç¡®"]},{content:"âŒ",keywords:["å¤±è´¥","ç¦æ­¢","ä¸è¦åš","é”™è¯¯"]},{content:"âš ï¸",keywords:["è­¦å‘Š","æ³¨æ„äº‹é¡¹"]},{content:"â›”",keywords:["ä¸¥é‡è­¦å‘Š","ç¦ç”¨"]},{content:"â—",keywords:["å¼ºæé†’","é«˜äº®æç¤º","é‡è¦"]},{content:"ðŸ””",keywords:["é€šçŸ¥","æé†’æ“ä½œ"]},{content:"ðŸ”•",keywords:["å…³é—­æé†’","é™éŸ³çŠ¶æ€"]},{content:"ðŸ’¡",keywords:["å»ºè®®","çµæ„Ÿ","ç»éªŒåˆ†äº«","æƒ³æ³•"]},{content:"ðŸ”„",keywords:["æ›´æ–°","åˆ·æ–°","ä¿®æ”¹"]},{content:"ðŸ”§",keywords:["é…ç½®","è°ƒè¯•","è®¾ç½®"]},{content:"ðŸ› ï¸",keywords:["å·¥å…·","ç»´æŠ¤","æ‰‹åŠ¨æ“ä½œ"]},{content:"ðŸ“",keywords:["æ–‡ä»¶å¤¹","è·¯å¾„","ç›®å½•"]},{content:"ðŸ“„",keywords:["æ–‡ä»¶","æ–‡æ¡£","å†…å®¹"]},{content:"ðŸ“‚",keywords:["å±•å¼€æ–‡ä»¶å¤¹","æ‰“å¼€"]},{content:"ðŸ“‹",keywords:["å¤åˆ¶å†…å®¹","å‰ªè´´æ¿"]},{content:"ðŸ—‘ï¸",keywords:["åˆ é™¤æ“ä½œ","æ¸…ç†"]},{content:"ðŸ’¾",keywords:["ä¿å­˜","å­˜å‚¨"]},{content:"ðŸ—‚ï¸",keywords:["åˆ†ç±»","å½’æ¡£","æ•´ç†"]},{content:"ðŸ’»",keywords:["ç¼–ç¨‹","å¼€å‘","ä»£ç "]},{content:"ðŸ–¥ï¸",keywords:["æ¡Œé¢","ç³»ç»Ÿæ“ä½œ"]},{content:"ðŸ“Ÿ",keywords:["å‘½ä»¤è¡Œ","ç»ˆç«¯"]},{content:"ðŸ“¦",keywords:["å®‰è£…åŒ…","ä¾èµ–","ç»„ä»¶"]},{content:"ðŸ§°",keywords:["å·¥å…·é›†","å¼€å‘è€…å·¥å…·ç®±"]},{content:"ðŸ§ª",keywords:["æµ‹è¯•","å®žéªŒ"]},{content:"ðŸš€",keywords:["å‘å¸ƒ","å¯åŠ¨","ä¸Šçº¿"]},{content:"ðŸ§±",keywords:["æž„å»º","æ¨¡å—","ç»„ä»¶"]},{content:"ðŸš¨",keywords:["ç´§æ€¥æç¤º","è­¦æŠ¥"]},{content:"ðŸ”¥",keywords:["é«˜äº®","çƒ­åº¦é«˜","é‡ç‚¹","çƒ­é—¨"]},{content:"ðŸ“£",keywords:["å…¬å‘Š","æé†’","é€šçŸ¥"]},{content:"ðŸ“¢",keywords:["å¼ºè°ƒ","æç¤º","å®£å‘Š"]},{content:"ðŸ‘€",keywords:["æ³¨æ„","æŸ¥çœ‹","æ˜“é”™ç‚¹"]},{content:"ðŸ”œ",keywords:["æŽ¥ä¸‹æ¥","ä¸‹ä¸€æ­¥"]},{content:"ðŸ”™",keywords:["è¿”å›ž","æ’¤é”€"]},{content:"ðŸ”›",keywords:["æ¿€æ´»ä¸­","å½“å‰"]},{content:"â©",keywords:["å¿«è¿›","ä¸‹ä¸€æ­¥"]},{content:"âª",keywords:["ä¸Šä¸€æ­¥","å›žé€€"]},{content:"ðŸ”",keywords:["å¾ªçŽ¯","é‡å¤"]},{content:"ðŸ§­",keywords:["æŒ‡å¼•","å¯¼èˆª","å¼•å¯¼æ–‡æ¡£"]},{content:"âš™ï¸",keywords:["é«˜çº§è®¾ç½®","å‚æ•°è°ƒæ•´"]},{content:"ðŸŽ›ï¸",keywords:["é¢æ¿è®¾ç½®","å¯è§†åŒ–é…ç½®"]},{content:"ðŸ›‘",keywords:["å¼ºåˆ¶åœæ­¢","ç«‹å³ç»ˆæ­¢"]},{content:"ðŸš«",keywords:["æ‹’ç»","é˜»æ­¢æ“ä½œ"]},{content:"ðŸ§¯",keywords:["ç†„ç«","å†·å¤„ç†","å–æ¶ˆè®¡åˆ’"]},{content:"ðŸ“š",keywords:["æ–‡æ¡£é›†åˆ","æ•™ç¨‹"]},{content:"ðŸ“°",keywords:["å…¬å‘Š","èµ„è®¯","æ›´æ–°è¯´æ˜Ž"]},{content:"âœï¸",keywords:["ç¼–è¾‘","ä¿®æ”¹","è‰ç¨¿"]},{content:"ðŸ·ï¸",keywords:["æ ‡ç­¾åˆ†ç±»"]},{content:"ðŸ§¾",keywords:["åˆ—è¡¨","æ•°æ®æ˜Žç»†"]},{content:"ðŸ—ƒï¸",keywords:["å½’æ¡£å†…å®¹"]},{content:"â±ï¸",keywords:["è®¡æ—¶","æ•ˆçŽ‡å·¥å…·"]},{content:"â³",keywords:["ç­‰å¾…ä¸­","å»¶è¿Ÿ"]},{content:"ðŸ“…",keywords:["æ—¥æœŸ","è®¡åˆ’å®‰æŽ’"]},{content:"ðŸ•’",keywords:["æ—¶é—´è¯´æ˜Ž"]},{content:"ðŸ“†",keywords:["æ—¥åŽ†è§†å›¾","æŒ‰æ—¥åˆ†ç±»"]},{content:"ðŸŽ¯",keywords:["ç›®æ ‡","ä»»åŠ¡å®Œæˆ"]},{content:"ðŸŽ–ï¸",keywords:["å¥–åŠ±","æˆå°±"]},{content:"ðŸ“ˆ",keywords:["è¿›åº¦ä¸Šå‡","ä¼˜åŒ–æ•ˆæžœ"]},{content:"ðŸ“‰",keywords:["é—®é¢˜å›žé€€","å¼‚å¸¸æ³¢åŠ¨"]},{content:"1ï¸âƒ£",keywords:["æ•°å­—ä¸€","ç¬¬ä¸€æ­¥"]},{content:"2ï¸âƒ£",keywords:["æ•°å­—äºŒ","ç¬¬äºŒæ­¥"]},{content:"3ï¸âƒ£",keywords:["æ•°å­—ä¸‰","ç¬¬ä¸‰æ­¥"]},{content:"4ï¸âƒ£",keywords:["æ•°å­—å››"]},{content:"5ï¸âƒ£",keywords:["æ•°å­—äº”"]},{content:"6ï¸âƒ£",keywords:["æ•°å­—å…­"]},{content:"7ï¸âƒ£",keywords:["æ•°å­—ä¸ƒ"]},{content:"8ï¸âƒ£",keywords:["æ•°å­—å…«"]},{content:"9ï¸âƒ£",keywords:["æ•°å­—ä¹"]},{content:"ðŸ”Ÿ",keywords:["æ•°å­—å"]}],yt={class:"icon-selector-container"},pt={class:"search-box"},vt={key:0,class:"recent-section"},ht={class:"icon-list-label"},ft={class:"icon-list"},kt=["title","onClick"],mt={class:"icon-list-label"},wt={class:"icon-list"},bt=["title","onClick"],gt={key:0,class:"no-result"},St={__name:"icon-selector",emits:["select"],setup(C,{emit:g}){const{t:n}=me("views.public-library.editor.components.icon-selector"),u=b(""),y=b([]),m=c=>{c&&ge(()=>{u.value=""})},k=()=>{try{const c=localStorage.getItem("recent-icons");c&&(y.value=JSON.parse(c))}catch(c){console.warn(n("load_recent_failed"),c),y.value=[]}},_=()=>{try{localStorage.setItem("recent-icons",JSON.stringify(y.value))}catch(c){console.warn(n("save_recent_failed"),c)}},a=c=>{const t=y.value.findIndex($=>$.content===c.content);t>-1&&y.value.splice(t,1),y.value.unshift({...c,lastUsed:Date.now()}),y.value.length>10&&(y.value=y.value.slice(0,10)),_()},D=M(()=>{if(!u.value.trim())return ke;const c=u.value.toLowerCase().trim();return ke.filter(t=>t.keywords.some($=>$.toLowerCase().includes(c)))}),p=()=>{},L=g,x=c=>{a(c),L("select",c)};return A(()=>{k()}),(c,t)=>{const $=oe,f=Qe;return d(),Y(f,{class:"icon-selector",placement:"bottomLeft",arrow:!1,onOpenChange:m},{content:S(()=>[o("div",yt,[o("div",pt,[l($,{placeholder:i(n)("search_placeholder"),value:u.value,"onUpdate:value":t[0]||(t[0]=w=>u.value=w),onPressEnter:p,allowClear:""},{suffix:S(()=>[l(i(Se),{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1},8,["placeholder","value"])]),y.value.length>0&&!u.value?(d(),h("div",vt,[o("div",ht,r(i(n)("recent_used")),1),o("div",ft,[(d(!0),h(_e,null,ye(y.value,(w,T)=>(d(),h("div",{class:"icon-item",key:`recent-${T}`,title:w.keywords.join(", "),onClick:v=>x(w)},r(w.content),9,kt))),128))])])):U("",!0),o("div",mt,r(u.value?i(n)("search_result"):i(n)("emoji_and_character")),1),o("div",wt,[(d(!0),h(_e,null,ye(D.value,(w,T)=>(d(),h("div",{class:"icon-item",key:T,title:w.keywords.join(", "),onClick:v=>x(w)},r(w.content),9,bt))),128)),D.value.length===0?(d(),h("div",gt,r(i(n)("no_matching_icon")),1)):U("",!0)])])]),default:S(()=>[o("span",{class:"icon-selector-handler",onClick:t[1]||(t[1]=Ke(()=>{},["prevent"]))},[Ae(c.$slots,"default",{},void 0,!0)])]),_:3})}}},Ct=K(St,[["__scopeId","data-v-033a56be"]]),xt={class:"toolbar-wrapper"},Dt={class:"toolbar-left"},Lt={class:"library-info"},It={class:"library-info-content"},$t={key:0,class:"publish-status"},Mt={class:"status-name"},Tt={key:1,class:"publish-status is-publish"},Bt={class:"status-name"},Ut={class:"toolbar-right"},Et={class:"action-item"},Rt={class:"action-item"},Pt={class:"action-name"},zt={class:"action-name"},Ot={class:"action-item"},Ht={class:"action-name"},Nt={class:"action-item"},Yt={class:"action-name"},jt={class:"action-item"},Ft={class:"action-name"},Wt={key:0,class:"loading-wrapper"},Vt={class:"editor-page-header"},qt={class:"header-left"},At={key:0,class:"title-wrapper"},Kt={class:"doc-icon"},Jt={class:"doc-title"},Xt={key:1,class:"title-wrapper"},Zt={class:"doc-icon"},Gt={class:"doc-title"},Qt={class:"doc-last-update"},eo={class:"header-right"},to={class:"last-save-time"},oo={key:0,class:"edit-user"},no=["src"],so={class:"user-name"},ao={class:"edit-status-text"},io={key:1,class:"action-box"},lo={key:2,class:"action-box"},co={class:"editor-page-body"},ro=1e3*15,uo={__name:"index",emits:["changeDoc"],setup(C,{emit:g}){const{t:n}=me("views.public-library.editor.index"),u=g,y=Je(),m=Xe(),k=Ye(),{user_id:_}=je(),a=M(()=>k.libraryInfo),D=M(()=>k.docTreeStateMap),p=M(()=>y.query.doc_id),L=M(()=>D.value[p.value]&&D.value[p.value].doc_icon||""),x=b(!1),c=b(""),t=te({library_key:"",doc_id:p.value,doc_key:"",doc_icon:"",title:"",content:"",update_time_str:"",is_draft:"",pid:"",seo_title:"",seo_desc:"",seo_keywords:""}),$=M(()=>t.seo_title||t.seo_desc||t.seo_keywords),f=te({show:!1,user_name:"",avatar:"",nick_name:""}),w=e=>{t.doc_icon=e.content,H()},T=M(()=>a.value.share_url!=""&&a.value.access_rights==1),v=()=>{if(!T.value)return;const e=a.value.share_url+Q+"/doc/"+t.doc_key;window.open(e)},{copyShareUrl:B}=Ze(),Ce=async()=>{const e=Q+"/doc/"+t.doc_key;await B(e)},ne=b(null),xe=()=>{ne.value.open({...t})},De=e=>{t.seo_title=e.seo_title,t.seo_desc=e.seo_desc,t.seo_keywords=e.seo_keywords,Te()};let E=null;const J=()=>{E&&(clearTimeout(E),E=null),E=setTimeout(()=>{z.value&&H()},ro)},se=()=>{E&&(clearTimeout(E),E=null)},O=b(!0),z=b(!1),Le=e=>{t.title=e,z.value=!0,J()},Ie=()=>{z.value&&H()},$e=()=>{z.value=!0,J()},Me=()=>{z.value&&H()},F=b(null),ae=b(""),X=()=>{ae.value=ee().format("HH:mm")},Te=()=>{G({library_key:a.value.library_key,doc_id:p.value}).then(e=>{e.data.library_key=a.value.library_key,e.data.doc_id=p.value,e.data.update_time_str=ee(e.data.update_time*1e3).format("YYYY-MM-DD HH:mm:ss"),Object.assign(t,e.data)})},W=e=>{x.value=e,F.value.init(e?"editor":"preview",t.content)},ie=()=>{O.value=!0,f.show=!1,G({library_key:a.value.library_key,doc_id:p.value}).then(e=>{e.data.library_key=a.value.library_key,e.data.doc_id=p.value,e.data.update_time_str=ee(e.data.update_time*1e3).format("YYYY-MM-DD HH:mm:ss"),Object.assign(t,e.data);let s=e.data.edit_user&&e.data.edit_user!=0;s&&e.data.edit_user!=_&&(f.show=!0,ce(e.data.edit_user)),s&&e.data.edit_user==_?W(!0):W(!1),X(e.data.update_time*1e3),O.value=!1}).catch(()=>{O.value=!1})},Z=b(!1),le=e=>{se();let s=F.value.getDoc();t.content=s.content,s.title=t.title;let R={library_key:a.value.library_key,pid:t.pid,doc_id:p.value,title:s.title,content:s.content,doc_icon:t.doc_icon,doc_type:4};e&&(Z.value=!0),ue(R).then(()=>{e&&(Z.value=!1,j.success(n("save_success"))),X(),t.is_draft=1,z.value=!1,u("changeDoc",{...R,id:R.doc_id,is_draft:1})}).catch(()=>{Z.value=!1,J()})},ce=async e=>{let s=await We({id:e});return f.avatar=s.data.avatar,f.user_name=s.data.user_name,f.nick_name=s.data.nick_name,s},Be=async()=>{try{let e=await G({doc_id:p.value,library_key:a.value.library_key});if(e.data.edit_user&&e.data.edit_user!=0&&e.data.edit_user!=_){let I=await ce(e.data.edit_user),P=I.data.nick_name||I.data.user_name;f.show=!0,nt.warning({title:n("editing_document",{name:P}),content:n("need_collaborator_finish"),okText:n("got_it")});return}f.show=!1;let R={library_key:a.value.library_key,pid:t.pid,doc_id:p.value,title:t.title,content:t.content,doc_type:4,doc_icon:t.doc_icon};ue(R),W(!0)}catch(e){return}},V=b(!1),Ue=()=>{let e=F.value.getDoc();t.content=e.content,e.title=t.title;let s={library_key:a.value.library_key,pid:t.pid,doc_id:p.value,title:e.title,doc_type:4,content:e.content,doc_icon:t.doc_icon};V.value=!0,qe(s).then(()=>{V.value=!1,j.success(n("publish_success")),X(),t.is_draft=0,W(!1),u("changeDoc",{...s,id:s.doc_id,is_draft:0})}).catch(()=>{V.value=!1})},H=(e,s)=>{le(s==="manuallySave")},re=e=>{e.ctrlKey&&e.key==="s"&&(e.preventDefault(),H())},Ee=()=>{Fe({library_key:a.value.library_key,doc_id:p.value}).then(e=>{window.open(`${a.value.share_url}${Q}/doc/${t.doc_key}?preview=${e.data.preview_key}`,"_blank")})},Re=()=>{a.value,m.push({path:"/public-library/config",query:{library_id:a.value.id,library_key:a.value.library_key}})},Pe=M(()=>k.libraryList),ze=()=>{k.getLibraryList()},Oe=async e=>{await m.replace({path:"/public-library/home",query:{library_id:e.id,library_key:e.library_key}}),window.location.reload()},de=()=>{j.warn(n("edit_mode_no_search"))};return be(p,()=>{ge(()=>{ie()})}),A(()=>{document.addEventListener("keydown",re),ze(),ie()}),we(()=>{se(),document.removeEventListener("keydown",re)}),(e,s)=>{const R=oe,I=et,P=Ve,He=tt;return d(),h("div",{class:q(["editor-page",{"is-loading":O.value}])},[o("div",xt,[o("div",Dt,[o("div",Lt,[o("div",It,[l(st,{libraryInfo:a.value,libraryList:Pe.value,onChange:Oe},null,8,["libraryInfo","libraryList"]),a.value.access_rights==0?(d(),h("div",$t,[l(i(ve),{class:"status-icon"}),o("span",Mt,r(i(n)("not_public")),1)])):U("",!0),a.value.access_rights==1?(d(),h("div",Tt,[l(i(he),{class:"status-icon"}),o("span",Bt,r(i(n)("published")),1)])):U("",!0)])])]),o("div",Ut,[o("div",Et,[l(R,{placeholder:i(n)("knowledge_search"),value:c.value,"onUpdate:value":s[0]||(s[0]=N=>c.value=N),onPressEnter:de,allowClear:""},{suffix:S(()=>[l(i(Se),{style:{color:"rgba(0, 0, 0, 0.45)"},onClick:de})]),_:1},8,["placeholder","value"])]),o("div",Rt,[x.value?(d(),Y(I,{key:0,type:"primary",loading:V.value,onClick:Ue},{default:S(()=>[l(i(ot)),o("span",Pt,r(i(n)("publish")),1)]),_:1},8,["loading"])):(d(),Y(I,{key:1,type:"primary",onClick:Be},{default:S(()=>[l(P,{class:"action-icon",name:"edit",style:{"font-size":"16px",color:"#fff"}}),o("span",zt,r(i(n)("edit")),1)]),_:1}))]),o("div",Ot,[l(I,{onClick:Ce},{default:S(()=>[l(P,{class:"action-icon",name:"link-left",style:{"font-size":"16px"}}),o("span",Ht,r(i(n)("copy_link")),1)]),_:1})]),o("div",Nt,[l(I,{onClick:xe},{default:S(()=>[$.value?(d(),Y(i(he),{key:0,style:{color:"#21a665","font-size":"14px"},class:"status-icon actin-icon"})):(d(),Y(i(ve),{key:1,style:{color:"#ccc","font-size":"14px"},class:"status-icon actin-icon"})),o("span",Yt,r(i(n)("seo")),1)]),_:1})]),o("div",jt,[l(I,{onClick:Re},{default:S(()=>[l(P,{class:"actin-icon",name:"jibenpeizhi",style:{"font-size":"14px",color:"#595959"}}),o("span",Ft,r(i(n)("settings")),1)]),_:1})])])]),O.value?(d(),h("div",Wt,[l(He,{tip:"Loading..."})])):U("",!0),o("div",Vt,[o("div",qt,[x.value?(d(),h("div",At,[l(Ct,{onSelect:w},{default:S(()=>[o("span",Kt,r(t.doc_icon||L.value),1)]),_:1}),o("div",Jt,[l(_t,{title:t.title,"onUpdate:title":s[1]||(s[1]=N=>t.title=N),onBlur:Ie,onInput:Le},null,8,["title"])])])):(d(),h("div",Xt,[o("span",Zt,r(t.doc_icon||L.value),1),o("div",Gt,[o("div",{class:q(["doc-title-text",{"title-highlight":T.value}]),onClick:v},r(t.title),3)])])),o("div",Qt,r(i(n)("last_update_time"))+r(t.update_time_str),1)]),o("div",eo,[o("span",to,r(ae.value)+" "+r(i(n)("auto_save_draft")),1),f.show&&f.user_name?(d(),h("div",oo,[s[4]||(s[4]=o("i",{class:"line"},null,-1)),o("img",{class:"user-avatar",src:f.avatar,alt:""},null,8,no),o("span",so,r(f.nick_name||f.user_name),1),o("span",ao,r(i(n)("editing")),1)])):U("",!0),x.value?(d(),h("div",io,[l(I,{class:"action-btn",onClick:s[2]||(s[2]=N=>le(!0))},{default:S(()=>[l(P,{class:"action-icon",name:"save-draft",style:{"font-size":"16px"}}),o("span",null,r(i(n)("save_draft")),1)]),_:1})])):U("",!0),x.value?(d(),h("div",lo,[l(I,{class:"action-btn",onClick:s[3]||(s[3]=N=>Ee())},{default:S(()=>[l(P,{class:"action-icon",name:"eye-open",style:{"font-size":"16px"}}),o("span",null,r(i(n)("preview")),1)]),_:1})])):U("",!0)])]),o("div",co,[l(rt,{ref_key:"MdDitorRef",ref:F,onInput:$e,onBlur:Me},null,512)]),l(at,{ref_key:"seoSettingRef",ref:ne,onOk:De},null,512)],2)}}},xo=K(uo,[["__scopeId","data-v-8035ae05"]]);export{xo as default};
//# sourceMappingURL=index-QrZFVgIq.js.map
