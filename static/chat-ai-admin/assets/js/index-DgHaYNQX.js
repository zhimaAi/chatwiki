import{_ as T}from"./cu-scroll-C_QJcxx1.js";import{_ as W,X,a0 as Q}from"../../index-C5-B0r5-.js";import{v as F,aq as R,B as Y,az as Z,al as tt,D as st,av as et,br as ot,an as nt,M as P,W as rt}from"./ui-antd-B11sc9DP.js";import{f as m,ac as r,ad as e,k as a,ar as c,as as s,F as h,ax as N,ai as lt,ae as k,az as i,at as n,u as y,G as u,l as ct,K as at,e as A,ak as E,aE as G,af as V}from"./vue-chunks-CGLjTDrY.js";const it={class:"prompt-wrapper"},dt={class:"group-box"},ut={class:"group-list-box"},_t=["onClick"],pt={class:"group-name"},vt={class:"name-text"},mt={class:"content-box"},ht={class:"opration-btn-block"},kt={class:"content-scroll-box"},yt={key:0,class:"loading-box"},bt={class:"prompt-list-box"},ft={class:"prompt-header"},gt={class:"prompt-title"},Ct={key:0,class:"prompt-type diy"},xt={key:1,class:"prompt-type"},Lt={class:"title"},wt={class:"right-btn-box"},Ht=["onClick"],jt=["onClick"],Ot={class:"prompt-content-box"},$t={key:0,class:"prompt-content"},Bt=["onClick"],Nt={key:1,class:"structure-list-box"},St={class:"structure-list"},zt={class:"structure-title"},Dt={class:"structure-content"},It={class:"structure-list"},Pt={class:"structure-title"},At={class:"structure-content"},Et=["onClick"],Gt={class:"structure-list"},Vt={class:"structure-title"},Ft={class:"structure-content"},Mt={key:0,class:"structure-list"},Ut={class:"structure-title"},qt={class:"structure-content"},Jt={class:"structure-list"},Kt={class:"structure-title"},Tt={class:"structure-content"},Wt={class:"structure-list"},Xt={class:"structure-title"},Qt={class:"structure-content"},Rt={class:"structure-title"},Yt={class:"structure-content"},Zt={class:"empty-content"},ts={__name:"index",emits:["ok"],setup(S,{expose:f,emit:L}){const _=m(!1),p=L,b=()=>{_.value=!0,C(),O()},z=l=>{P.confirm({title:"导入确认",icon:ct(rt),content:"确定将该条提示导入",onOk(){p("ok",l),_.value=!1},onCancel(){}})},g=m(-1),w=m([]),C=()=>{X().then(l=>{w.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...l.data]})},M=l=>{g.value=l.id,O()},H=m([]),j=m(!1),x=m(!1),U=()=>{x.value=!0,O(),C()},O=()=>{j.value=!0,Q({group_id:g.value,page:1,size:9999}).then(l=>{let o=l.data.list||[];o=o.map(v=>({...v,isHide:!0,prompt_struct:v.prompt_struct?JSON.parse(v.prompt_struct):{}})),H.value=o}).finally(()=>{j.value=!1,x.value=!1})},$=l=>{l.isHide=!l.isHide},D=()=>{window.open("#/user/prompt-library")};return f({show:b}),(l,o)=>{const v=F,I=T,B=Y,q=tt,J=nt,K=P;return e(),r("div",null,[a(K,{open:_.value,"onUpdate:open":o[0]||(o[0]=t=>_.value=t),title:null,width:950,footer:null,wrapClassName:"add-prommpt-modal"},{default:c(()=>[s("div",it,[s("div",dt,[o[1]||(o[1]=s("div",{class:"main-title"},"导入提示词",-1)),a(I,{style:{height:"480px"}},{default:c(()=>[s("div",ut,[(e(!0),r(h,null,N(w.value,t=>(e(),r("div",{class:lt(["group-list",{active:t.id==g.value}]),onClick:d=>M(t),key:t.id},[s("div",pt,[s("div",vt,n(t.group_name),1),t.group_desc?(e(),k(v,{key:0},{title:c(()=>[u(n(t.group_desc),1)]),default:c(()=>[a(y(R))]),_:2},1024)):i("",!0)])],10,_t))),128))])]),_:1})]),s("div",mt,[s("div",ht,[a(B,{loading:x.value,onClick:U},{default:c(()=>[x.value?i("",!0):(e(),k(y(Z),{key:0})),o[2]||(o[2]=u("刷新列表",-1))]),_:1},8,["loading"]),a(B,{onClick:D},{default:c(()=>[...o[3]||(o[3]=[u("管理知识库",-1)])]),_:1})]),s("div",kt,[a(I,{style:{padding:"0 24px"}},{default:c(()=>[j.value?(e(),r("div",yt,[a(q)])):i("",!0),s("div",bt,[(e(!0),r(h,null,N(H.value,t=>(e(),r("div",{class:"prompt-list",key:t.id},[s("div",ft,[s("div",gt,[t.prompt_type==0?(e(),r("div",Ct,"自定义")):i("",!0),t.prompt_type==1?(e(),r("div",xt,"结构化")):i("",!0),s("div",Lt,n(t.title),1)]),s("div",wt,[a(v,{title:t.isHide?"展开":"收起"},{default:c(()=>[s("div",{class:"hover-btn-box",onClick:d=>$(t)},[t.isHide?(e(),k(y(st),{key:0})):(e(),k(y(et),{key:1}))],8,Ht)]),_:2},1032,["title"]),s("div",{class:"hover-btn-box primary",onClick:d=>z(t)},[a(y(ot)),o[4]||(o[4]=u("导入 ",-1))],8,jt)])]),s("div",Ot,[t.prompt_type==0?(e(),r("div",$t,[t.isHide?(e(),r(h,{key:0},[u(n(t.prompt.slice(0,200))+" ",1),t.prompt.length>200?(e(),r("span",{key:0,onClick:d=>$(t),style:{cursor:"pointer"}},"...",8,Bt)):i("",!0)],64)):(e(),r(h,{key:1},[u(n(t.prompt),1)],64))])):(e(),r("div",Nt,[s("div",St,[s("div",zt,n(t.prompt_struct.role.subject),1),s("div",Dt,n(t.prompt_struct.role.describe),1)]),s("div",It,[s("div",Pt,n(t.prompt_struct.task.subject),1),s("div",At,[u(n(t.prompt_struct.task.describe)+" ",1),t.isHide?(e(),r("span",{key:0,onClick:d=>$(t),style:{cursor:"pointer"}},"...",8,Et)):i("",!0)])]),t.isHide?i("",!0):(e(),r(h,{key:0},[s("div",Gt,[s("div",Vt,n(t.prompt_struct.constraints.subject),1),s("div",Ft,n(t.prompt_struct.constraints.describe),1)]),t.prompt_struct.skill?(e(),r("div",Mt,[s("div",Ut,n(t.prompt_struct.skill.subject),1),s("div",qt,n(t.prompt_struct.skill.describe),1)])):i("",!0),s("div",Jt,[s("div",Kt,n(t.prompt_struct.output.subject),1),s("div",Tt,n(t.prompt_struct.output.describe),1)]),s("div",Wt,[s("div",Xt,n(t.prompt_struct.tone.subject),1),s("div",Qt,n(t.prompt_struct.tone.describe),1)]),(e(!0),r(h,null,N(t.prompt_struct.custom,d=>(e(),r("div",{class:"structure-list",key:d.subject},[s("div",Rt,n(d.subject),1),s("div",Yt,n(d.describe),1)]))),128))],64))]))])]))),128))]),H.value.length==0?(e(),k(J,{key:1,style:{"padding-top":"100px"}},{description:c(()=>[s("div",Zt,[o[6]||(o[6]=s("div",{class:"title"},"你还没有添加任何提示词",-1)),o[7]||(o[7]=s("div",{class:"desc"}," 可以在系统设置-提示词库中维护提示词模板，然后再聊天机器人和工作流中引用 ",-1)),s("div",null,[a(B,{type:"primary",onClick:D},{default:c(()=>[...o[5]||(o[5]=[u("立即添加",-1)])]),_:1})])])]),_:1})):i("",!0)]),_:1})])])])]),_:1},8,["open"])])}}},rs=W(ts,[["__scopeId","data-v-9e7df6fd"]]),ls={__name:"index",props:{disabled:{type:Boolean,default:!1}},setup(S){const f=at(),L=A(()=>{const{disabled:p,...b}=f;return b}),_=A(()=>{const{title:p,overlayClassName:b,overlayStyle:z,mouseEnterDelay:g,mouseLeaveDelay:w,...C}=f;return C});return(p,b)=>S.disabled?(e(),r("div",G(V({key:1},_.value)),[E(p.$slots,"default")],16)):(e(),k(y(F),G(V({key:0},L.value)),{default:c(()=>[E(p.$slots,"default")]),_:3},16))}};export{rs as _,ls as a};
