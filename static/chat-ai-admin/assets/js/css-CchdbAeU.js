import{av as w,bu as D,cp as z,aC as B}from"../../index-CyiwD4fB.js";import{r as F,s as G,h as M}from"./vue-chunks-CwaUyaYI.js";function Q(e){for(var t=-1,r=e==null?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n}function Z(e,t){if(!e)return[];const r=e.slice(),n=r.indexOf(t);return n>=0&&r.splice(n,1),r}function ee(e,t){const r=(e||[]).slice();return r.indexOf(t)===-1&&r.push(t),r}function T(e){return e.split("-")}function _(e,t){return`${e}-${t}`}function R(e){return e&&e.type&&e.type.isTreeNode}function te(e,t){const r=[],n=t[e];function o(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(a=>{let{key:f,children:u}=a;r.push(f),o(u)})}return o(n.children),r}function H(e){if(e.parent){const t=T(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function W(e){const t=T(e.pos);return Number(t[t.length-1])===0}function ne(e,t,r,n,o,i,a,f,u,l){var c;const{clientX:s,clientY:d}=e,{top:p,height:h}=e.target.getBoundingClientRect(),g=((l==="rtl"?-1:1)*(((o==null?void 0:o.x)||0)-s)-12)/n;let y=f[r.eventKey];if(d<p+h/2){const P=a.findIndex(I=>I.key===y.key),N=P<=0?0:P-1,L=a[N].key;y=f[L]}const k=y.key,b=y,v=y.key;let K=0,S=0;if(!u.has(k))for(let P=0;P<g&&H(y);P+=1)y=y.parent,S+=1;const C=t.eventData,O=y.node;let E=!0;return W(y)&&y.level===0&&d<p+h/2&&i({dragNode:C,dropNode:O,dropPosition:-1})&&y.key===r.eventKey?K=-1:(b.children||[]).length&&u.has(v)?i({dragNode:C,dropNode:O,dropPosition:0})?K=0:E=!1:S===0?g>-1.5?i({dragNode:C,dropNode:O,dropPosition:1})?K=1:E=!1:i({dragNode:C,dropNode:O,dropPosition:0})?K=0:i({dragNode:C,dropNode:O,dropPosition:1})?K=1:E=!1:i({dragNode:C,dropNode:O,dropPosition:1})?K=1:E=!1,{dropPosition:K,dropLevelOffset:S,dropTargetKey:y.key,dropTargetPos:y.pos,dragOverNodeKey:v,dropContainerKey:K===0?null:((c=y.parent)===null||c===void 0?void 0:c.key)||null,dropAllowed:E}}function re(e,t){if(!e)return;const{multiple:r}=t;return r?e.slice():e.length?[e[0]]:e}function oe(e){if(!e)return null;let t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else if(typeof e=="object")t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return null;return t}function ie(e,t){const r=new Set;function n(o){if(r.has(o))return;const i=t[o];if(!i)return;r.add(o);const{parent:a,node:f}=i;f.disabled||a&&n(a.key)}return(e||[]).forEach(o=>{n(o)}),[...r]}var X=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function x(e,t){return e??t}function j(e){const{title:t,_title:r,key:n,children:o}=e||{},i=t||"title";return{title:i,_title:r||[i],key:n||"key",children:o||"children"}}function se(e){function t(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(r).map(o=>{var i,a,f,u;if(!R(o))return null;const l=o.children||{},c=o.key,s={};for(const[P,N]of Object.entries(o.props))s[z(P)]=N;const{isLeaf:d,checkable:p,selectable:h,disabled:m,disableCheckbox:g}=s,y={isLeaf:d||d===""||void 0,checkable:p||p===""||void 0,selectable:h||h===""||void 0,disabled:m||m===""||void 0,disableCheckbox:g||g===""||void 0},k=w(w({},s),y),{title:b=(i=l.title)===null||i===void 0?void 0:i.call(l,k),icon:v=(a=l.icon)===null||a===void 0?void 0:a.call(l,k),switcherIcon:K=(f=l.switcherIcon)===null||f===void 0?void 0:f.call(l,k)}=s,S=X(s,["title","icon","switcherIcon"]),C=(u=l.default)===null||u===void 0?void 0:u.call(l),O=w(w(w({},S),{title:b,icon:v,switcherIcon:K,key:c,isLeaf:d}),y),E=t(C);return E.length&&(O.children=E),O})}return t(e)}function le(e,t,r){const{_title:n,key:o,children:i}=j(r),a=new Set(t===!0?[]:t),f=[];function u(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return l.map((s,d)=>{const p=_(c?c.pos:"0",d),h=x(s[o],p);let m;for(let y=0;y<n.length;y+=1){const k=n[y];if(s[k]!==void 0){m=s[k];break}}const g=w(w({},B(s,[...n,o,i])),{title:m,key:h,parent:c,pos:p,children:null,data:s,isStart:[...c?c.isStart:[],d===0],isEnd:[...c?c.isEnd:[],d===l.length-1]});return f.push(g),t===!0||a.has(h)?g.children=u(s[i]||[],g):g.children=[],g})}return u(e),f}function Y(e,t,r){let n={};typeof r=="object"?n=r:n={externalGetKey:r},n=n||{};const{childrenPropName:o,externalGetKey:i,fieldNames:a}=n,{key:f,children:u}=j(a),l=o||u;let c;i?typeof i=="string"?c=d=>d[i]:typeof i=="function"&&(c=d=>i(d)):c=(d,p)=>x(d[f],p);function s(d,p,h,m){const g=d?d[l]:e,y=d?_(h.pos,p):"0",k=d?[...m,d]:[];if(d){const b=c(d,y),v={node:d,index:p,pos:y,key:b,parentPos:h.node?h.pos:null,level:h.level+1,nodes:k};t(v)}g&&g.forEach((b,v)=>{s(b,v,{node:d,pos:y,level:h?h.level+1:-1},k)})}s(null)}function ce(e){let{initWrapper:t,processEntity:r,onProcessFinished:n,externalGetKey:o,childrenPropName:i,fieldNames:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2?arguments[2]:void 0;const u=o||f,l={},c={};let s={posEntities:l,keyEntities:c};return t&&(s=t(s)||s),Y(e,d=>{const{node:p,index:h,pos:m,key:g,parentPos:y,level:k,nodes:b}=d,v={node:p,nodes:b,index:h,key:g,pos:m,level:k},K=x(g,m);l[m]=v,c[K]=v,v.parent=l[y],v.parent&&(v.parent.children=v.parent.children||[],v.parent.children.push(v)),r&&r(v,s)},{externalGetKey:u,childrenPropName:i,fieldNames:a}),n&&n(s),s}function de(e,t){let{expandedKeysSet:r,selectedKeysSet:n,loadedKeysSet:o,loadingKeysSet:i,checkedKeysSet:a,halfCheckedKeysSet:f,dragOverNodeKey:u,dropPosition:l,keyEntities:c}=t;const s=c[e];return{eventKey:e,expanded:r.has(e),selected:n.has(e),loaded:o.has(e),loading:i.has(e),checked:a.has(e),halfChecked:f.has(e),pos:String(s?s.pos:""),parent:s.parent,dragOver:u===e&&l===0,dragOverGapTop:u===e&&l===-1,dragOverGapBottom:u===e&&l===1}}function ae(e){const{data:t,expanded:r,selected:n,checked:o,loaded:i,loading:a,halfChecked:f,dragOver:u,dragOverGapTop:l,dragOverGapBottom:c,pos:s,active:d,eventKey:p}=e,h=w(w({dataRef:t},t),{expanded:r,selected:n,checked:o,loaded:i,loading:a,halfChecked:f,dragOver:u,dragOverGapTop:l,dragOverGapBottom:c,pos:s,active:d,eventKey:p,key:p});return"props"in h||Object.defineProperty(h,"props",{get(){return e}}),h}function A(e,t){const r=new Set;return e.forEach(n=>{t.has(n)||r.add(n)}),r}function $(e){const{disabled:t,disableCheckbox:r,checkable:n}=e||{};return!!(t||r)||n===!1}function q(e,t,r,n){const o=new Set(e),i=new Set;for(let f=0;f<=r;f+=1)(t.get(f)||new Set).forEach(l=>{const{key:c,node:s,children:d=[]}=l;o.has(c)&&!n(s)&&d.filter(p=>!n(p.node)).forEach(p=>{o.add(p.key)})});const a=new Set;for(let f=r;f>=0;f-=1)(t.get(f)||new Set).forEach(l=>{const{parent:c,node:s}=l;if(n(s)||!l.parent||a.has(l.parent.key))return;if(n(l.parent.node)){a.add(c.key);return}let d=!0,p=!1;(c.children||[]).filter(h=>!n(h.node)).forEach(h=>{let{key:m}=h;const g=o.has(m);d&&!g&&(d=!1),!p&&(g||i.has(m))&&(p=!0)}),d&&o.add(c.key),p&&i.add(c.key),a.add(c.key)});return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(A(i,o))}}function U(e,t,r,n,o){const i=new Set(e);let a=new Set(t);for(let u=0;u<=n;u+=1)(r.get(u)||new Set).forEach(c=>{const{key:s,node:d,children:p=[]}=c;!i.has(s)&&!a.has(s)&&!o(d)&&p.filter(h=>!o(h.node)).forEach(h=>{i.delete(h.key)})});a=new Set;const f=new Set;for(let u=n;u>=0;u-=1)(r.get(u)||new Set).forEach(c=>{const{parent:s,node:d}=c;if(o(d)||!c.parent||f.has(c.parent.key))return;if(o(c.parent.node)){f.add(s.key);return}let p=!0,h=!1;(s.children||[]).filter(m=>!o(m.node)).forEach(m=>{let{key:g}=m;const y=i.has(g);p&&!y&&(p=!1),!h&&(y||a.has(g))&&(h=!0)}),p||i.delete(s.key),h&&a.add(s.key),f.add(s.key)});return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(A(a,i))}}function fe(e,t,r,n,o,i){let a;i?a=i:a=$;const f=new Set(e.filter(l=>!!r[l]));let u;return t===!0?u=q(f,o,n,a):u=U(f,t.halfCheckedKeys,o,n,a),u}function ue(e){const t=F(0),r=G();return M(()=>{const n=new Map;let o=0;const i=e.value||{};for(const a in i)if(Object.prototype.hasOwnProperty.call(i,a)){const f=i[a],{level:u}=f;let l=n.get(u);l||(l=new Set,n.set(u,l)),l.add(f),o=Math.max(o,u)}t.value=o,r.value=n}),{maxLevel:t,levelEntities:r}}function he(){const e=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:t}}function pe(e){const t=e.getBoundingClientRect(),r=document.documentElement;return{left:t.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||document.body.clientTop||0)}}export{fe as a,pe as b,ce as c,de as d,ae as e,Q as f,he as g,Z as h,ee as i,x as j,se as k,j as l,ie as m,le as n,re as o,oe as p,te as q,ne as r,T as s,ue as u};
