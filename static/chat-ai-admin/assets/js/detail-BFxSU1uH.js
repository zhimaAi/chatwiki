import{u as N,_ as T}from"../../index-DSFcP5NQ.js";import{r,e as g,b as n,t as x,y as c,u as o,j as U,ah as j,a as y,p as t,ag as q,v as s,q as V,_,F,z as $,V as E}from"./vue-chunks-BdaA73Wf.js";import{d as L}from"./utils-CvB22N-W.js";import{x as K,M as P,e as S,B as A,z as G,R as J}from"./ui-antd-Dl1wwwCD.js";import{U as Q}from"./update-modal-D3ZNMX09.js";import{L as W}from"./loading-box-CQ9Pukre.js";import{g as X}from"./index-BuURB1pl.js";import{_ as Z}from"./emoji-mart-BBMRoEa3.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./other-LrIFyvU9.js";/* empty css                                                                     */const tt={__name:"version-modal",setup(z,{expose:a}){const{t:u}=N("views.explore.plugins.components.version-modal"),v=r(!1),p=r([]),m=[{title:u("label_version"),dataIndex:"version",width:100},{title:u("label_update_time"),dataIndex:"update_time_text",width:160},{title:u("label_publisher"),dataIndex:"author",width:100}];function k(h=[]){p.value=h,v.value=!0}return a({show:k}),(h,e)=>{const b=K,B=P;return n(),g(B,{title:o(u)("title_version_history"),open:v.value,"onUpdate:open":e[0]||(e[0]=w=>v.value=w),width:"500px",footer:null},{default:x(()=>[c(b,{columns:m,"data-source":p.value},null,8,["data-source"])]),_:1},8,["title","open"])}}},et={class:"_container _plugin-detail-cont"},st={class:"header"},ot={class:"title"},at={key:1,class:"content"},it={class:"base-info"},nt={class:"top"},lt=["src"],_t={class:"info"},ct={class:"left"},dt={class:"name zm-line1"},rt={class:"source"},ut={class:"right"},vt=["href"],pt={class:"desc"},mt={class:"action-box"},ht={class:"left"},ft={class:"detail-info"},yt={class:"left"},gt={key:0,class:"main-block"},xt={class:"main-tit"},kt={class:"text-cont"},bt={class:"main-block"},wt={class:"main-tit"},Mt=["innerHTML"],Bt={class:"right"},Rt={class:"main-block"},Yt={class:"main-tit"},Dt={class:"text-cont flex-center"},Ht=["src"],It={class:"main-block"},Ct={class:"main-tit"},Vt={class:"version-info"},Lt={class:"text-cont"},Nt={class:"main-block"},zt={class:"main-tit"},Ot={class:"text-cont"},Tt={__name:"detail",setup(z){const{t:a}=N("views.explore.plugins.detail"),u=q(),v=j(),p=r(!0),m=r(!0),k=r(null),h=r(null),e=r({});U(()=>{var l;k.value=(l=v.query)==null?void 0:l.name,b()});function b(){m.value=!0,X({name:k.value}).then(l=>{var d,M;let i=(l==null?void 0:l.data)||{};e.value=i.remote,e.value.local=i.local,e.value.has_update=((d=i.local)==null?void 0:d.version)!=((M=i.remote)==null?void 0:M.latest_version),e.value.latest_version_history.map(f=>{f.update_time_text=L.unix(f.update_time).format("YYYY-MM-DD HH:mm"),f.author=e.value.author})}).finally(()=>{m.value=!1})}function B(){h.value.show(e.value.latest_version_history||[])}function w(){let{latest_version_detail:l,local:i}=e.value;p.value.show(e.value,l,i)}return(l,i)=>{var R,Y,D,H,I,C;const d=A,M=T,f=G,O=E("viewer");return n(),y("div",et,[t("div",st,[c(o(S),{onClick:i[0]||(i[0]=Ut=>o(u).back()),class:"back-icon"}),t("span",ot,s(o(a)("title_plugin_detail")),1)]),m.value?(n(),g(W,{key:0})):(n(),y("div",at,[t("div",it,[t("div",nt,[t("img",{class:"avatar",src:e.value.icon},null,8,lt),t("div",_t,[t("div",ct,[t("div",dt,s(e.value.title),1),t("div",rt,s(e.value.author),1)]),t("div",ut,[e.value.help_url?(n(),y("a",{key:0,href:e.value.help_url,target:"_blank"},[c(d,{type:"primary",ghost:""},{default:x(()=>[_(s(o(a)("btn_usage_guide")),1)]),_:1})],8,vt)):V("",!0),e.value.local?(n(),y(F,{key:1},[e.value.has_update?(n(),g(d,{key:0,type:"primary",onClick:w},{default:x(()=>[_(s(o(a)("btn_update")),1)]),_:1})):(n(),g(d,{key:1},{default:x(()=>[_(s(o(a)("btn_installed")),1)]),_:1}))],64)):(n(),g(d,{key:2,type:"primary",onClick:w},{default:x(()=>[_(s(o(a)("btn_install")),1)]),_:1}))])])]),t("div",pt,s(e.value.description),1),t("div",mt,[t("div",ht,[c(M,{name:"download"}),_(" "+s(e.value.installed_count||0),1)]),i[1]||(i[1]=t("div",{class:"right"},null,-1))])]),t("div",ft,[t("div",yt,[e.value.overview?(n(),y("div",gt,[t("div",xt,s(o(a)("title_plugin_overview")),1),t("pre",kt,s(e.value.overview),1)])):V("",!0),t("div",bt,[t("div",wt,s(o(a)("btn_usage_guide")),1),$(t("pre",{class:"text-cont",innerHTML:e.value.introduction},null,8,Mt),[[O]])])]),t("div",Bt,[t("div",Rt,[t("div",Yt,s(o(a)("title_category")),1),t("div",Dt,[t("img",{class:"cate-icon",src:e.value.filter_type_icon},null,8,Ht),_(" "+s(e.value.filter_type_title),1)])]),t("div",It,[t("div",Ct,s(o(a)("title_version")),1),t("div",Vt,[_(" v"+s(e.value.latest_version)+" ",1),c(f,{type:"vertical"}),_(" "+s(e.value.author)+" "+s(o(L).unix((Y=(R=e.value)==null?void 0:R.latest_version_detail)==null?void 0:Y.update_time).format("YYYY-MM-DD HH:mm")),1)]),t("div",Lt,s((H=(D=e.value)==null?void 0:D.latest_version_detail)==null?void 0:H.upgrade_description),1),t("div",null,[t("a",{onClick:B},[_(s(o(a)("btn_version_history"))+" ",1),c(o(J))])])]),t("div",Nt,[t("div",zt,s(o(a)("title_permissions")),1),t("div",Ot,s(o(a)("label_max_memory"))+" "+s((C=(I=e.value)==null?void 0:I.latest_version_detail)==null?void 0:C.memory)+"MB",1)])])])])),c(tt,{ref_key:"versionRef",ref:h},null,512),c(Q,{ref_key:"updateRef",ref:p,onOk:b},null,512)])}}},Zt=Z(Tt,[["__scopeId","data-v-12c74602"]]);export{Zt as default};
//# sourceMappingURL=detail-BFxSU1uH.js.map
