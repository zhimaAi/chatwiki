import{_ as F}from"./cu-scroll-C25JoRm3.js";import{b as M,an as q,B as A,bt as J,aq as T,M as N,E as X,ao as Z,au as K}from"../../index-CbM0qccj.js";import{S as Q}from"./SyncOutlined-XXFwszys.js";import{S as R}from"./index-BhAWLImr.js";import{D as W}from"./DownOutlined-1SYVU9mx.js";import{U as Y}from"./UpOutlined-zAGcK8OC.js";import{d as p,N as r,O as o,j as i,U as l,X as s,F as v,a1 as H,a5 as tt,S as m,a6 as a,_ as n,u as h,Z as u,k as st}from"./vue-chunks-BRsu9_To.js";import{_ as ot}from"./index-B45goIcH.js";const et={class:"prompt-wrapper"},nt={class:"group-box"},rt={class:"group-list-box"},ct=["onClick"],it={class:"group-name"},lt={class:"name-text"},at={class:"content-box"},dt={class:"opration-btn-block"},ut={class:"content-scroll-box"},_t={key:0,class:"loading-box"},pt={class:"prompt-list-box"},vt={class:"prompt-header"},mt={class:"prompt-title"},ht={key:0,class:"prompt-type diy"},kt={key:1,class:"prompt-type"},yt={class:"title"},bt={class:"right-btn-box"},gt=["onClick"],ft=["onClick"],Ct={class:"prompt-content-box"},xt={key:0,class:"prompt-content"},jt=["onClick"],Ht={key:1,class:"structure-list-box"},Lt={class:"structure-list"},Ot={class:"structure-title"},wt={class:"structure-content"},It={class:"structure-list"},Nt={class:"structure-title"},St={class:"structure-content"},Bt=["onClick"],$t={class:"structure-list"},Pt={class:"structure-title"},Ut={class:"structure-content"},Vt={key:0,class:"structure-list"},Dt={class:"structure-title"},Et={class:"structure-content"},Gt={class:"structure-list"},zt={class:"structure-title"},Ft={class:"structure-content"},Mt={class:"structure-list"},qt={class:"structure-title"},At={class:"structure-content"},Jt={class:"structure-title"},Tt={class:"structure-content"},Xt={class:"empty-content"},Zt={__name:"index",emits:["ok"],setup(Kt,{expose:S,emit:B}){const k=p(!1),$=B,P=()=>{k.value=!0,O(),C()},U=c=>{N.confirm({title:"导入确认",icon:st(X),content:"确定将该条提示导入",onOk(){$("ok",c),k.value=!1},onCancel(){}})},b=p(-1),L=p([]),O=()=>{Z().then(c=>{L.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...c.data]})},V=c=>{b.value=c.id,C()},g=p([]),f=p(!1),y=p(!1),D=()=>{y.value=!0,C(),O()},C=()=>{f.value=!0,K({group_id:b.value,page:1,size:9999}).then(c=>{let e=c.data.list||[];e=e.map(_=>({..._,isHide:!0,prompt_struct:_.prompt_struct?JSON.parse(_.prompt_struct):{}})),g.value=e}).finally(()=>{f.value=!1,y.value=!1})},x=c=>{c.isHide=!c.isHide},w=()=>{window.open("#/user/prompt-library")};return S({show:P}),(c,e)=>{const _=ot,I=F,j=A,E=R,G=T,z=N;return o(),r("div",null,[i(z,{open:k.value,"onUpdate:open":e[0]||(e[0]=t=>k.value=t),title:null,width:950,footer:null,wrapClassName:"add-prommpt-modal"},{default:l(()=>[s("div",et,[s("div",nt,[e[1]||(e[1]=s("div",{class:"main-title"},"导入提示词",-1)),i(I,{style:{height:"480px"}},{default:l(()=>[s("div",rt,[(o(!0),r(v,null,H(L.value,t=>(o(),r("div",{class:tt(["group-list",{active:t.id==b.value}]),onClick:d=>V(t),key:t.id},[s("div",it,[s("div",lt,n(t.group_name),1),t.group_desc?(o(),m(_,{key:0},{title:l(()=>[u(n(t.group_desc),1)]),default:l(()=>[i(h(q))]),_:2},1024)):a("",!0)])],10,ct))),128))])]),_:1})]),s("div",at,[s("div",dt,[i(j,{loading:y.value,onClick:D},{default:l(()=>[y.value?a("",!0):(o(),m(h(Q),{key:0})),e[2]||(e[2]=u("刷新列表"))]),_:1,__:[2]},8,["loading"]),i(j,{onClick:w},{default:l(()=>e[3]||(e[3]=[u("管理知识库")])),_:1,__:[3]})]),s("div",ut,[i(I,{style:{padding:"0 24px"}},{default:l(()=>[f.value?(o(),r("div",_t,[i(E)])):a("",!0),s("div",pt,[(o(!0),r(v,null,H(g.value,t=>(o(),r("div",{class:"prompt-list",key:t.id},[s("div",vt,[s("div",mt,[t.prompt_type==0?(o(),r("div",ht,"自定义")):a("",!0),t.prompt_type==1?(o(),r("div",kt,"结构化")):a("",!0),s("div",yt,n(t.title),1)]),s("div",bt,[i(_,{title:t.isHide?"展开":"收起"},{default:l(()=>[s("div",{class:"hover-btn-box",onClick:d=>x(t)},[t.isHide?(o(),m(h(W),{key:0})):(o(),m(h(Y),{key:1}))],8,gt)]),_:2},1032,["title"]),s("div",{class:"hover-btn-box primary",onClick:d=>U(t)},[i(h(J)),e[4]||(e[4]=u("导入 "))],8,ft)])]),s("div",Ct,[t.prompt_type==0?(o(),r("div",xt,[t.isHide?(o(),r(v,{key:0},[u(n(t.prompt.slice(0,200))+" ",1),t.prompt.length>200?(o(),r("span",{key:0,onClick:d=>x(t),style:{cursor:"pointer"}},"...",8,jt)):a("",!0)],64)):(o(),r(v,{key:1},[u(n(t.prompt),1)],64))])):(o(),r("div",Ht,[s("div",Lt,[s("div",Ot,n(t.prompt_struct.role.subject),1),s("div",wt,n(t.prompt_struct.role.describe),1)]),s("div",It,[s("div",Nt,n(t.prompt_struct.task.subject),1),s("div",St,[u(n(t.prompt_struct.task.describe)+" ",1),t.isHide?(o(),r("span",{key:0,onClick:d=>x(t),style:{cursor:"pointer"}},"...",8,Bt)):a("",!0)])]),t.isHide?a("",!0):(o(),r(v,{key:0},[s("div",$t,[s("div",Pt,n(t.prompt_struct.constraints.subject),1),s("div",Ut,n(t.prompt_struct.constraints.describe),1)]),t.prompt_struct.skill?(o(),r("div",Vt,[s("div",Dt,n(t.prompt_struct.skill.subject),1),s("div",Et,n(t.prompt_struct.skill.describe),1)])):a("",!0),s("div",Gt,[s("div",zt,n(t.prompt_struct.output.subject),1),s("div",Ft,n(t.prompt_struct.output.describe),1)]),s("div",Mt,[s("div",qt,n(t.prompt_struct.tone.subject),1),s("div",At,n(t.prompt_struct.tone.describe),1)]),(o(!0),r(v,null,H(t.prompt_struct.custom,d=>(o(),r("div",{class:"structure-list",key:d.subject},[s("div",Jt,n(d.subject),1),s("div",Tt,n(d.describe),1)]))),128))],64))]))])]))),128))]),g.value.length==0?(o(),m(G,{key:1,style:{"padding-top":"100px"}},{description:l(()=>[s("div",Xt,[e[6]||(e[6]=s("div",{class:"title"},"你还没有添加任何提示词",-1)),e[7]||(e[7]=s("div",{class:"desc"}," 可以在系统设置-提示词库中维护提示词模板，然后再聊天机器人和工作流中引用 ",-1)),s("div",null,[i(j,{type:"primary",onClick:w},{default:l(()=>e[5]||(e[5]=[u("立即添加")])),_:1,__:[5]})])])]),_:1})):a("",!0)]),_:1})])])])]),_:1},8,["open"])])}}},ns=M(Zt,[["__scopeId","data-v-1a540f46"]]);export{ns as I};
