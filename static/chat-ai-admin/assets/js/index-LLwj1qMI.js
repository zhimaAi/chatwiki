var fo=Object.defineProperty;var _o=(u,i,r)=>i in u?fo(u,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[i]=r;var ce=(u,i,r)=>_o(u,typeof i!="symbol"?i+"":i,r);import{f as H,l as ze,ac as J,ad as D,k as c,ar as m,G as j,as as a,az as te,ak as je,at as ae,o as Pe,aw as ho,aB as We,w as Ee,r as ue,u as ee,af as Zt,ae as X,J as he,e as ve,av as Mn,F as fe,ax as Ce,ai as rt,aA as mo,c as ge,p as go,ag as vo}from"./vue-chunks-CGLjTDrY.js";import{u as Ke}from"./robot-CbQxxX9E.js";import{_ as se,a3 as yo,d as Lt,a4 as Te,f as wo}from"../../index-DxV-PNCd.js";import{h as Un,a as Nn,I as ye,F as me,af as bo,at as ko,Q as Ge,B as pe,ae as Co,ah as Re,e as ke,w as Dt,x as qt,$ as Ot,M as re,b as oe,W as Me,v as Je,y as Ft,z as Vt,T as jt,O as Ht,aG as Ln,R as Ao,a6 as zt,bs as So,ai as Dn,a9 as qn,ar as $o,i as xo,k as Io,o as we,V as Eo,am as Ut,bm as Ro}from"./ui-antd-AfNpv4wx.js";import{T as Bo,U as Po,V as To,W as Mo,X as Uo,Y as On,Z as No,e as Ue,_ as Fn,$ as Vn,r as Wt,c as Qe,f as Ye}from"./index-BNO9ztvM.js";import{u as jn}from"./index-DwtbXc27.js";import{C as Hn}from"./cu-upload-CiYxFes3.js";import{i as Lo}from"./validate-8MtiUsxW.js";import{d as Do}from"./vuedraggable.umd-BzpNiY3c.js";import{L as zn}from"./loading-box-BFrpPJwN.js";import{E as Wn}from"./empty-box-C6xHnjvN.js";import"./neo4j-L2Hgpmga.js";import"./utils-COBjqVvs.js";import"./other-BrZCAsTs.js";import"./vue-pdf-embed-CiRf6fZ3.js";import"./empty-BFmzY9bl.js";const qo={class:"top-menu-box"},Oo={__name:"top-meun",props:{value:{type:String,default:""}},emits:["change","update:value"],setup(u,{emit:i}){const r=i,t=H([u.value]),e=H([{key:"WebAPP",id:"WebAPP",label:"WebAPP",title:"WebAPP"},{key:"EmbedWebsite",id:"EmbedWebsite",label:"嵌入网站",title:"嵌入网站"},{key:"WeChatOfficialAccount",id:"WeChatOfficialAccount",label:ze("div",{class:"tag-text-box"},[ze("span",{},"微信公众号"),ze("span",{class:"text-xs"},"支持未认证")])},{key:"WeChatMiniProgram",id:"WeChatMiniProgram",label:"微信小程序",title:"微信小程序"},{key:"WeChatCustomerService",id:"WeChatCustomerService",label:"微信客服",title:"微信客服"},{key:"FeishuRobot",id:"FeishuRobot",label:"飞书机器人",title:"飞书机器人"},{key:"DingDingRobot",id:"DingDingRobot",label:"钉钉机器人",title:"钉钉机器人"}]),o=({item:d})=>{t.value.includes(d.id)||(r("update:value",d.id),r("change",d))};return(d,s)=>{const h=Un;return D(),J("div",qo,[c(h,{class:"top-menu",items:e.value,selectedKeys:t.value,"onUpdate:selectedKeys":s[0]||(s[0]=_=>t.value=_),mode:"horizontal",onClick:o},{title:m(()=>[...s[1]||(s[1]=[j(" 11 ",-1)])]),_:1},8,["items","selectedKeys"])])}}},Fo=se(Oo,[["__scopeId","data-v-774edbe3"]]);var Ie={},lt,en;function Vo(){return en||(en=1,lt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),lt}var ct={},be={},tn;function Ae(){if(tn)return be;tn=1;let u;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return be.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},be.getSymbolTotalCodewords=function(n){return i[n]},be.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},be.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');u=n},be.isKanjiModeEnabled=function(){return typeof u<"u"},be.toSJIS=function(n){return u(n)},be}var ut={},nn;function Kt(){return nn||(nn=1,(function(u){u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2};function i(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+r)}}u.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},u.from=function(n,t){if(u.isValid(n))return n;try{return i(n)}catch{return t}}})(ut)),ut}var dt,on;function jo(){if(on)return dt;on=1;function u(){this.buffer=[],this.length=0}return u.prototype={get:function(i){const r=Math.floor(i/8);return(this.buffer[r]>>>7-i%8&1)===1},put:function(i,r){for(let n=0;n<r;n++)this.putBit((i>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),i&&(this.buffer[r]|=128>>>this.length%8),this.length++}},dt=u,dt}var pt,an;function Ho(){if(an)return pt;an=1;function u(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return u.prototype.set=function(i,r,n,t){const e=i*this.size+r;this.data[e]=n,t&&(this.reservedBit[e]=!0)},u.prototype.get=function(i,r){return this.data[i*this.size+r]},u.prototype.xor=function(i,r,n){this.data[i*this.size+r]^=n},u.prototype.isReserved=function(i,r){return this.reservedBit[i*this.size+r]},pt=u,pt}var ft={},sn;function zo(){return sn||(sn=1,(function(u){const i=Ae().getSymbolSize;u.getRowColCoords=function(n){if(n===1)return[];const t=Math.floor(n/7)+2,e=i(n),o=e===145?26:Math.ceil((e-13)/(2*t-2))*2,d=[e-7];for(let s=1;s<t-1;s++)d[s]=d[s-1]-o;return d.push(6),d.reverse()},u.getPositions=function(n){const t=[],e=u.getRowColCoords(n),o=e.length;for(let d=0;d<o;d++)for(let s=0;s<o;s++)d===0&&s===0||d===0&&s===o-1||d===o-1&&s===0||t.push([e[d],e[s]]);return t}})(ft)),ft}var _t={},rn;function Wo(){if(rn)return _t;rn=1;const u=Ae().getSymbolSize,i=7;return _t.getPositions=function(n){const t=u(n);return[[0,0],[t-i,0],[0,t-i]]},_t}var ht={},ln;function Ko(){return ln||(ln=1,(function(u){u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};u.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},u.from=function(t){return u.isValid(t)?parseInt(t,10):void 0},u.getPenaltyN1=function(t){const e=t.size;let o=0,d=0,s=0,h=null,_=null;for(let f=0;f<e;f++){d=s=0,h=_=null;for(let w=0;w<e;w++){let C=t.get(f,w);C===h?d++:(d>=5&&(o+=i.N1+(d-5)),h=C,d=1),C=t.get(w,f),C===_?s++:(s>=5&&(o+=i.N1+(s-5)),_=C,s=1)}d>=5&&(o+=i.N1+(d-5)),s>=5&&(o+=i.N1+(s-5))}return o},u.getPenaltyN2=function(t){const e=t.size;let o=0;for(let d=0;d<e-1;d++)for(let s=0;s<e-1;s++){const h=t.get(d,s)+t.get(d,s+1)+t.get(d+1,s)+t.get(d+1,s+1);(h===4||h===0)&&o++}return o*i.N2},u.getPenaltyN3=function(t){const e=t.size;let o=0,d=0,s=0;for(let h=0;h<e;h++){d=s=0;for(let _=0;_<e;_++)d=d<<1&2047|t.get(h,_),_>=10&&(d===1488||d===93)&&o++,s=s<<1&2047|t.get(_,h),_>=10&&(s===1488||s===93)&&o++}return o*i.N3},u.getPenaltyN4=function(t){let e=0;const o=t.data.length;for(let s=0;s<o;s++)e+=t.data[s];return Math.abs(Math.ceil(e*100/o/5)-10)*i.N4};function r(n,t,e){switch(n){case u.Patterns.PATTERN000:return(t+e)%2===0;case u.Patterns.PATTERN001:return t%2===0;case u.Patterns.PATTERN010:return e%3===0;case u.Patterns.PATTERN011:return(t+e)%3===0;case u.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case u.Patterns.PATTERN101:return t*e%2+t*e%3===0;case u.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case u.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}u.applyMask=function(t,e){const o=e.size;for(let d=0;d<o;d++)for(let s=0;s<o;s++)e.isReserved(s,d)||e.xor(s,d,r(t,s,d))},u.getBestMask=function(t,e){const o=Object.keys(u.Patterns).length;let d=0,s=1/0;for(let h=0;h<o;h++){e(h),u.applyMask(h,t);const _=u.getPenaltyN1(t)+u.getPenaltyN2(t)+u.getPenaltyN3(t)+u.getPenaltyN4(t);u.applyMask(h,t),_<s&&(s=_,d=h)}return d}})(ht)),ht}var He={},cn;function Kn(){if(cn)return He;cn=1;const u=Kt(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return He.getBlocksCount=function(t,e){switch(e){case u.L:return i[(t-1)*4+0];case u.M:return i[(t-1)*4+1];case u.Q:return i[(t-1)*4+2];case u.H:return i[(t-1)*4+3];default:return}},He.getTotalCodewordsCount=function(t,e){switch(e){case u.L:return r[(t-1)*4+0];case u.M:return r[(t-1)*4+1];case u.Q:return r[(t-1)*4+2];case u.H:return r[(t-1)*4+3];default:return}},He}var mt={},Oe={},un;function Go(){if(un)return Oe;un=1;const u=new Uint8Array(512),i=new Uint8Array(256);return(function(){let n=1;for(let t=0;t<255;t++)u[t]=n,i[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)u[t]=u[t-255]})(),Oe.log=function(n){if(n<1)throw new Error("log("+n+")");return i[n]},Oe.exp=function(n){return u[n]},Oe.mul=function(n,t){return n===0||t===0?0:u[i[n]+i[t]]},Oe}var dn;function Jo(){return dn||(dn=1,(function(u){const i=Go();u.mul=function(n,t){const e=new Uint8Array(n.length+t.length-1);for(let o=0;o<n.length;o++)for(let d=0;d<t.length;d++)e[o+d]^=i.mul(n[o],t[d]);return e},u.mod=function(n,t){let e=new Uint8Array(n);for(;e.length-t.length>=0;){const o=e[0];for(let s=0;s<t.length;s++)e[s]^=i.mul(t[s],o);let d=0;for(;d<e.length&&e[d]===0;)d++;e=e.slice(d)}return e},u.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let e=0;e<n;e++)t=u.mul(t,new Uint8Array([1,i.exp(e)]));return t}})(mt)),mt}var gt,pn;function Qo(){if(pn)return gt;pn=1;const u=Jo();function i(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(n){this.degree=n,this.genPoly=u.generateECPolynomial(this.degree)},i.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(n.length+this.degree);t.set(n);const e=u.mod(t,this.genPoly),o=this.degree-e.length;if(o>0){const d=new Uint8Array(this.degree);return d.set(e,o),d}return e},gt=i,gt}var vt={},yt={},wt={},fn;function Gn(){return fn||(fn=1,wt.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),wt}var _e={},_n;function Jn(){if(_n)return _e;_n=1;const u="[0-9]+",i="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;_e.KANJI=new RegExp(r,"g"),_e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),_e.BYTE=new RegExp(n,"g"),_e.NUMERIC=new RegExp(u,"g"),_e.ALPHANUMERIC=new RegExp(i,"g");const t=new RegExp("^"+r+"$"),e=new RegExp("^"+u+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return _e.testKanji=function(s){return t.test(s)},_e.testNumeric=function(s){return e.test(s)},_e.testAlphanumeric=function(s){return o.test(s)},_e}var hn;function Se(){return hn||(hn=1,(function(u){const i=Gn(),r=Jn();u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(e,o){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!i.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?e.ccBits[0]:o<27?e.ccBits[1]:e.ccBits[2]},u.getBestModeForData=function(e){return r.testNumeric(e)?u.NUMERIC:r.testAlphanumeric(e)?u.ALPHANUMERIC:r.testKanji(e)?u.KANJI:u.BYTE},u.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},u.isValid=function(e){return e&&e.bit&&e.ccBits};function n(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+t)}}u.from=function(e,o){if(u.isValid(e))return e;try{return n(e)}catch{return o}}})(yt)),yt}var mn;function Yo(){return mn||(mn=1,(function(u){const i=Ae(),r=Kn(),n=Kt(),t=Se(),e=Gn(),o=7973,d=i.getBCHDigit(o);function s(w,C,R){for(let M=1;M<=40;M++)if(C<=u.getCapacity(M,R,w))return M}function h(w,C){return t.getCharCountIndicator(w,C)+4}function _(w,C){let R=0;return w.forEach(function(M){const S=h(M.mode,C);R+=S+M.getBitsLength()}),R}function f(w,C){for(let R=1;R<=40;R++)if(_(w,R)<=u.getCapacity(R,C,t.MIXED))return R}u.from=function(C,R){return e.isValid(C)?parseInt(C,10):R},u.getCapacity=function(C,R,M){if(!e.isValid(C))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=t.BYTE);const S=i.getSymbolTotalCodewords(C),b=r.getTotalCodewordsCount(C,R),F=(S-b)*8;if(M===t.MIXED)return F;const N=F-h(M,C);switch(M){case t.NUMERIC:return Math.floor(N/10*3);case t.ALPHANUMERIC:return Math.floor(N/11*2);case t.KANJI:return Math.floor(N/13);case t.BYTE:default:return Math.floor(N/8)}},u.getBestVersionForData=function(C,R){let M;const S=n.from(R,n.M);if(Array.isArray(C)){if(C.length>1)return f(C,S);if(C.length===0)return 1;M=C[0]}else M=C;return s(M.mode,M.getLength(),S)},u.getEncodedBits=function(C){if(!e.isValid(C)||C<7)throw new Error("Invalid QR Code version");let R=C<<12;for(;i.getBCHDigit(R)-d>=0;)R^=o<<i.getBCHDigit(R)-d;return C<<12|R}})(vt)),vt}var bt={},gn;function Xo(){if(gn)return bt;gn=1;const u=Ae(),i=1335,r=21522,n=u.getBCHDigit(i);return bt.getEncodedBits=function(e,o){const d=e.bit<<3|o;let s=d<<10;for(;u.getBCHDigit(s)-n>=0;)s^=i<<u.getBCHDigit(s)-n;return(d<<10|s)^r},bt}var kt={},Ct,vn;function Zo(){if(vn)return Ct;vn=1;const u=Se();function i(r){this.mode=u.NUMERIC,this.data=r.toString()}return i.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(n){let t,e,o;for(t=0;t+3<=this.data.length;t+=3)e=this.data.substr(t,3),o=parseInt(e,10),n.put(o,10);const d=this.data.length-t;d>0&&(e=this.data.substr(t),o=parseInt(e,10),n.put(o,d*3+1))},Ct=i,Ct}var At,yn;function ea(){if(yn)return At;yn=1;const u=Se(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=u.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let o=i.indexOf(this.data[e])*45;o+=i.indexOf(this.data[e+1]),t.put(o,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},At=r,At}var St,wn;function ta(){if(wn)return St;wn=1;const u=Se();function i(r){this.mode=u.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return i.getBitsLength=function(n){return n*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(r){for(let n=0,t=this.data.length;n<t;n++)r.put(this.data[n],8)},St=i,St}var $t,bn;function na(){if(bn)return $t;bn=1;const u=Se(),i=Ae();function r(n){this.mode=u.KANJI,this.data=n}return r.getBitsLength=function(t){return t*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let e=i.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),n.put(e,13)}},$t=r,$t}var xt={exports:{}},kn;function oa(){return kn||(kn=1,(function(u){var i={single_source_shortest_paths:function(r,n,t){var e={},o={};o[n]=0;var d=i.PriorityQueue.make();d.push(n,0);for(var s,h,_,f,w,C,R,M,S;!d.empty();){s=d.pop(),h=s.value,f=s.cost,w=r[h]||{};for(_ in w)w.hasOwnProperty(_)&&(C=w[_],R=f+C,M=o[_],S=typeof o[_]>"u",(S||M>R)&&(o[_]=R,d.push(_,R),e[_]=h))}if(typeof t<"u"&&typeof o[t]>"u"){var b=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(b)}return e},extract_shortest_path_from_predecessor_list:function(r,n){for(var t=[],e=n;e;)t.push(e),r[e],e=r[e];return t.reverse(),t},find_path:function(r,n,t){var e=i.single_source_shortest_paths(r,n,t);return i.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(r){var n=i.PriorityQueue,t={},e;r=r||{};for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t.queue=[],t.sorter=r.sorter||n.default_sorter,t},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var t={value:r,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};u.exports=i})(xt)),xt.exports}var Cn;function aa(){return Cn||(Cn=1,(function(u){const i=Se(),r=Zo(),n=ea(),t=ta(),e=na(),o=Jn(),d=Ae(),s=oa();function h(b){return unescape(encodeURIComponent(b)).length}function _(b,F,N){const y=[];let $;for(;($=b.exec(N))!==null;)y.push({data:$[0],index:$.index,mode:F,length:$[0].length});return y}function f(b){const F=_(o.NUMERIC,i.NUMERIC,b),N=_(o.ALPHANUMERIC,i.ALPHANUMERIC,b);let y,$;return d.isKanjiModeEnabled()?(y=_(o.BYTE,i.BYTE,b),$=_(o.KANJI,i.KANJI,b)):(y=_(o.BYTE_KANJI,i.BYTE,b),$=[]),F.concat(N,y,$).sort(function(V,L){return V.index-L.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function w(b,F){switch(F){case i.NUMERIC:return r.getBitsLength(b);case i.ALPHANUMERIC:return n.getBitsLength(b);case i.KANJI:return e.getBitsLength(b);case i.BYTE:return t.getBitsLength(b)}}function C(b){return b.reduce(function(F,N){const y=F.length-1>=0?F[F.length-1]:null;return y&&y.mode===N.mode?(F[F.length-1].data+=N.data,F):(F.push(N),F)},[])}function R(b){const F=[];for(let N=0;N<b.length;N++){const y=b[N];switch(y.mode){case i.NUMERIC:F.push([y,{data:y.data,mode:i.ALPHANUMERIC,length:y.length},{data:y.data,mode:i.BYTE,length:y.length}]);break;case i.ALPHANUMERIC:F.push([y,{data:y.data,mode:i.BYTE,length:y.length}]);break;case i.KANJI:F.push([y,{data:y.data,mode:i.BYTE,length:h(y.data)}]);break;case i.BYTE:F.push([{data:y.data,mode:i.BYTE,length:h(y.data)}])}}return F}function M(b,F){const N={},y={start:{}};let $=["start"];for(let E=0;E<b.length;E++){const V=b[E],L=[];for(let q=0;q<V.length;q++){const B=V[q],p=""+E+q;L.push(p),N[p]={node:B,lastCount:0},y[p]={};for(let O=0;O<$.length;O++){const U=$[O];N[U]&&N[U].node.mode===B.mode?(y[U][p]=w(N[U].lastCount+B.length,B.mode)-w(N[U].lastCount,B.mode),N[U].lastCount+=B.length):(N[U]&&(N[U].lastCount=B.length),y[U][p]=w(B.length,B.mode)+4+i.getCharCountIndicator(B.mode,F))}}$=L}for(let E=0;E<$.length;E++)y[$[E]].end=0;return{map:y,table:N}}function S(b,F){let N;const y=i.getBestModeForData(b);if(N=i.from(F,y),N!==i.BYTE&&N.bit<y.bit)throw new Error('"'+b+'" cannot be encoded with mode '+i.toString(N)+`.
 Suggested mode is: `+i.toString(y));switch(N===i.KANJI&&!d.isKanjiModeEnabled()&&(N=i.BYTE),N){case i.NUMERIC:return new r(b);case i.ALPHANUMERIC:return new n(b);case i.KANJI:return new e(b);case i.BYTE:return new t(b)}}u.fromArray=function(F){return F.reduce(function(N,y){return typeof y=="string"?N.push(S(y,null)):y.data&&N.push(S(y.data,y.mode)),N},[])},u.fromString=function(F,N){const y=f(F,d.isKanjiModeEnabled()),$=R(y),E=M($,N),V=s.find_path(E.map,"start","end"),L=[];for(let q=1;q<V.length-1;q++)L.push(E.table[V[q]].node);return u.fromArray(C(L))},u.rawSplit=function(F){return u.fromArray(f(F,d.isKanjiModeEnabled()))}})(kt)),kt}var An;function sa(){if(An)return ct;An=1;const u=Ae(),i=Kt(),r=jo(),n=Ho(),t=zo(),e=Wo(),o=Ko(),d=Kn(),s=Qo(),h=Yo(),_=Xo(),f=Se(),w=aa();function C(E,V){const L=E.size,q=e.getPositions(V);for(let B=0;B<q.length;B++){const p=q[B][0],O=q[B][1];for(let U=-1;U<=7;U++)if(!(p+U<=-1||L<=p+U))for(let G=-1;G<=7;G++)O+G<=-1||L<=O+G||(U>=0&&U<=6&&(G===0||G===6)||G>=0&&G<=6&&(U===0||U===6)||U>=2&&U<=4&&G>=2&&G<=4?E.set(p+U,O+G,!0,!0):E.set(p+U,O+G,!1,!0))}}function R(E){const V=E.size;for(let L=8;L<V-8;L++){const q=L%2===0;E.set(L,6,q,!0),E.set(6,L,q,!0)}}function M(E,V){const L=t.getPositions(V);for(let q=0;q<L.length;q++){const B=L[q][0],p=L[q][1];for(let O=-2;O<=2;O++)for(let U=-2;U<=2;U++)O===-2||O===2||U===-2||U===2||O===0&&U===0?E.set(B+O,p+U,!0,!0):E.set(B+O,p+U,!1,!0)}}function S(E,V){const L=E.size,q=h.getEncodedBits(V);let B,p,O;for(let U=0;U<18;U++)B=Math.floor(U/3),p=U%3+L-8-3,O=(q>>U&1)===1,E.set(B,p,O,!0),E.set(p,B,O,!0)}function b(E,V,L){const q=E.size,B=_.getEncodedBits(V,L);let p,O;for(p=0;p<15;p++)O=(B>>p&1)===1,p<6?E.set(p,8,O,!0):p<8?E.set(p+1,8,O,!0):E.set(q-15+p,8,O,!0),p<8?E.set(8,q-p-1,O,!0):p<9?E.set(8,15-p-1+1,O,!0):E.set(8,15-p-1,O,!0);E.set(q-8,8,1,!0)}function F(E,V){const L=E.size;let q=-1,B=L-1,p=7,O=0;for(let U=L-1;U>0;U-=2)for(U===6&&U--;;){for(let G=0;G<2;G++)if(!E.isReserved(B,U-G)){let ne=!1;O<V.length&&(ne=(V[O]>>>p&1)===1),E.set(B,U-G,ne),p--,p===-1&&(O++,p=7)}if(B+=q,B<0||L<=B){B-=q,q=-q;break}}}function N(E,V,L){const q=new r;L.forEach(function(G){q.put(G.mode.bit,4),q.put(G.getLength(),f.getCharCountIndicator(G.mode,E)),G.write(q)});const B=u.getSymbolTotalCodewords(E),p=d.getTotalCodewordsCount(E,V),O=(B-p)*8;for(q.getLengthInBits()+4<=O&&q.put(0,4);q.getLengthInBits()%8!==0;)q.putBit(0);const U=(O-q.getLengthInBits())/8;for(let G=0;G<U;G++)q.put(G%2?17:236,8);return y(q,E,V)}function y(E,V,L){const q=u.getSymbolTotalCodewords(V),B=d.getTotalCodewordsCount(V,L),p=q-B,O=d.getBlocksCount(V,L),U=q%O,G=O-U,ne=Math.floor(q/O),P=Math.floor(p/O),l=P+1,g=ne-P,k=new s(g);let T=0;const v=new Array(O),x=new Array(O);let I=0;const A=new Uint8Array(E.buffer);for(let Y=0;Y<O;Y++){const Z=Y<G?P:l;v[Y]=A.slice(T,T+Z),x[Y]=k.encode(v[Y]),T+=Z,I=Math.max(I,Z)}const z=new Uint8Array(q);let W=0,K,Q;for(K=0;K<I;K++)for(Q=0;Q<O;Q++)K<v[Q].length&&(z[W++]=v[Q][K]);for(K=0;K<g;K++)for(Q=0;Q<O;Q++)z[W++]=x[Q][K];return z}function $(E,V,L,q){let B;if(Array.isArray(E))B=w.fromArray(E);else if(typeof E=="string"){let ne=V;if(!ne){const P=w.rawSplit(E);ne=h.getBestVersionForData(P,L)}B=w.fromString(E,ne||40)}else throw new Error("Invalid data");const p=h.getBestVersionForData(B,L);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(!V)V=p;else if(V<p)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+p+`.
`);const O=N(V,L,B),U=u.getSymbolSize(V),G=new n(U);return C(G,V),R(G),M(G,V),b(G,L,0),V>=7&&S(G,V),F(G,O),isNaN(q)&&(q=o.getBestMask(G,b.bind(null,G,L))),o.applyMask(q,G),b(G,L,q),{modules:G,version:V,errorCorrectionLevel:L,maskPattern:q,segments:B}}return ct.create=function(V,L){if(typeof V>"u"||V==="")throw new Error("No input text");let q=i.M,B,p;return typeof L<"u"&&(q=i.from(L.errorCorrectionLevel,i.M),B=h.from(L.version),p=o.from(L.maskPattern),L.toSJISFunc&&u.setToSJISFunction(L.toSJISFunc)),$(V,B,q,p)},ct}var It={},Et={},Sn;function Qn(){return Sn||(Sn=1,(function(u){function i(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(e){return[e,e]}))),n.length===6&&n.push("F","F");const t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}u.getOptions=function(n){n||(n={}),n.color||(n.color={});const t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,e=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:e,scale:e?4:o,margin:t,color:{dark:i(n.color.dark||"#000000ff"),light:i(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},u.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale},u.getImageWidth=function(n,t){const e=u.getScale(n,t);return Math.floor((n+t.margin*2)*e)},u.qrToImageData=function(n,t,e){const o=t.modules.size,d=t.modules.data,s=u.getScale(o,e),h=Math.floor((o+e.margin*2)*s),_=e.margin*s,f=[e.color.light,e.color.dark];for(let w=0;w<h;w++)for(let C=0;C<h;C++){let R=(w*h+C)*4,M=e.color.light;if(w>=_&&C>=_&&w<h-_&&C<h-_){const S=Math.floor((w-_)/s),b=Math.floor((C-_)/s);M=f[d[S*o+b]?1:0]}n[R++]=M.r,n[R++]=M.g,n[R++]=M.b,n[R]=M.a}}})(Et)),Et}var $n;function ia(){return $n||($n=1,(function(u){const i=Qn();function r(t,e,o){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=o,e.width=o,e.style.height=o+"px",e.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}u.render=function(e,o,d){let s=d,h=o;typeof s>"u"&&(!o||!o.getContext)&&(s=o,o=void 0),o||(h=n()),s=i.getOptions(s);const _=i.getImageWidth(e.modules.size,s),f=h.getContext("2d"),w=f.createImageData(_,_);return i.qrToImageData(w.data,e,s),r(f,h,_),f.putImageData(w,0,0),h},u.renderToDataURL=function(e,o,d){let s=d;typeof s>"u"&&(!o||!o.getContext)&&(s=o,o=void 0),s||(s={});const h=u.render(e,o,s),_=s.type||"image/png",f=s.rendererOpts||{};return h.toDataURL(_,f.quality)}})(It)),It}var Rt={},xn;function ra(){if(xn)return Rt;xn=1;const u=Qn();function i(t,e){const o=t.a/255,d=e+'="'+t.hex+'"';return o<1?d+" "+e+'-opacity="'+o.toFixed(2).slice(1)+'"':d}function r(t,e,o){let d=t+e;return typeof o<"u"&&(d+=" "+o),d}function n(t,e,o){let d="",s=0,h=!1,_=0;for(let f=0;f<t.length;f++){const w=Math.floor(f%e),C=Math.floor(f/e);!w&&!h&&(h=!0),t[f]?(_++,f>0&&w>0&&t[f-1]||(d+=h?r("M",w+o,.5+C+o):r("m",s,0),s=0,h=!1),w+1<e&&t[f+1]||(d+=r("h",_),_=0)):s++}return d}return Rt.render=function(e,o,d){const s=u.getOptions(o),h=e.modules.size,_=e.modules.data,f=h+s.margin*2,w=s.color.light.a?"<path "+i(s.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",C="<path "+i(s.color.dark,"stroke")+' d="'+n(_,h,s.margin)+'"/>',R='viewBox="0 0 '+f+" "+f+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+R+' shape-rendering="crispEdges">'+w+C+`</svg>
`;return typeof d=="function"&&d(null,S),S},Rt}var In;function la(){if(In)return Ie;In=1;const u=Vo(),i=sa(),r=ia(),n=ra();function t(e,o,d,s,h){const _=[].slice.call(arguments,1),f=_.length,w=typeof _[f-1]=="function";if(!w&&!u())throw new Error("Callback required as last argument");if(w){if(f<2)throw new Error("Too few arguments provided");f===2?(h=d,d=o,o=s=void 0):f===3&&(o.getContext&&typeof h>"u"?(h=s,s=void 0):(h=s,s=d,d=o,o=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(d=o,o=s=void 0):f===2&&!o.getContext&&(s=d,d=o,o=void 0),new Promise(function(C,R){try{const M=i.create(d,s);C(e(M,o,s))}catch(M){R(M)}})}try{const C=i.create(d,s);h(null,e(C,o,s))}catch(C){h(C)}}return Ie.create=i.create,Ie.toCanvas=t.bind(null,r.render),Ie.toDataURL=t.bind(null,r.renderToDataURL),Ie.toString=t.bind(null,function(e,o,d){return n.render(e,d)}),Ie}var ca=la();const En=Nn(ca),ua={class:"card-box"},da={class:"card-box-header"},pa={class:"card-title"},fa={key:0,class:"card-icon"},_a={class:"title-text"},ha={class:"title-text"},ma={class:"action"},ga={class:"card-box-body"},va={__name:"card-box",props:{title:{type:String,default:""}},setup(u){const i=u;return(r,n)=>(D(),J("div",ua,[a("div",da,[a("div",pa,[r.$slots.icon?(D(),J("span",fa,[je(r.$slots,"icon",{},void 0,!0)])):te("",!0),a("span",_a,ae(i.title),1),a("span",ha,[je(r.$slots,"title",{},void 0,!0)])]),a("div",ma,[je(r.$slots,"action",{},void 0,!0)])]),a("div",ga,[je(r.$slots,"default",{},void 0,!0)])]))}},Be=se(va,[["__scopeId","data-v-13417dcd"]]),ya={class:"page-title-input"},wa={class:"upload-logo"},ba=["src"],ka={__name:"page-title-input",props:{avatar:{type:String,default:""},value:{type:String,default:""},placeholder:{type:String,default:"请输入标题"},autoUpload:{type:Boolean,default:!0}},emits:["update:value","update:avatar","changeAvatar"],setup(u,{emit:i}){const r=i,n=u,t=o=>{r("update:value",o.srcElement.value)},e=o=>{let d={file:o[0],category:"icon"};n.autoUpload&&jn(d).then(s=>{r("update:avatar",s.data.link)}),yo(o[0]).then(s=>{r("changeAvatar",{file:o[0],url:s})})};return(o,d)=>{const s=ye;return D(),J("div",ya,[a("div",wa,[c(Hn,{onChange:e},{default:m(()=>[a("img",{class:"avatar",src:n.avatar},null,8,ba)]),_:1})]),c(s,{size:"large",value:n.value,placeholder:u.placeholder,onInput:t},null,8,["value","placeholder"])])}}},Ne=se(ka,[["__scopeId","data-v-1a1bdb06"]]);var Bt={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var Rn;function Ca(){return Rn||(Rn=1,(function(u,i){(function(r,n){u.exports=n()})(self,(()=>(()=>{var r={d:(P,l)=>{for(var g in l)r.o(l,g)&&!r.o(P,g)&&Object.defineProperty(P,g,{enumerable:!0,get:l[g]})},o:(P,l)=>Object.prototype.hasOwnProperty.call(P,l),r:P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})}},n={};r.d(n,{default:()=>G});var t={};function e(P,l,g,k,T={}){l instanceof HTMLCollection||l instanceof NodeList?l=Array.from(l):Array.isArray(l)||(l=[l]),Array.isArray(g)||(g=[g]);for(const v of l)for(const x of g)v[P](x,k,{capture:!1,...T});return Array.prototype.slice.call(arguments,1)}r.r(t),r.d(t,{adjustableInputNumbers:()=>w,createElementFromString:()=>s,createFromTemplate:()=>h,eventPath:()=>_,off:()=>d,on:()=>o,resolveElement:()=>f});const o=e.bind(null,"addEventListener"),d=e.bind(null,"removeEventListener");function s(P){const l=document.createElement("div");return l.innerHTML=P.trim(),l.firstElementChild}function h(P){const l=(k,T)=>{const v=k.getAttribute(T);return k.removeAttribute(T),v},g=(k,T={})=>{const v=l(k,":obj"),x=l(k,":ref"),I=v?T[v]={}:T;x&&(T[x]=k);for(const A of Array.from(k.children)){const z=l(A,":arr"),W=g(A,z?{}:I);z&&(I[z]||(I[z]=[])).push(Object.keys(W).length?W:A)}return T};return g(s(P))}function _(P){let l=P.path||P.composedPath&&P.composedPath();if(l)return l;let g=P.target.parentElement;for(l=[P.target,g];g=g.parentElement;)l.push(g);return l.push(document,window),l}function f(P){return P instanceof Element?P:typeof P=="string"?P.split(/>>/g).reduce(((l,g,k,T)=>(l=l.querySelector(g),k<T.length-1?l.shadowRoot:l)),document):null}function w(P,l=(g=>g)){function g(k){const T=[.001,.01,.1][Number(k.shiftKey||2*k.ctrlKey)]*(k.deltaY<0?1:-1);let v=0,x=P.selectionStart;P.value=P.value.replace(/[\d.]+/g,((I,A)=>A<=x&&A+I.length>=x?(x=A,l(Number(I),T,v)):(v++,I))),P.focus(),P.setSelectionRange(x,x),k.preventDefault(),P.dispatchEvent(new Event("input"))}o(P,"focus",(()=>o(window,"wheel",g,{passive:!1}))),o(P,"blur",(()=>d(window,"wheel",g)))}const{min:C,max:R,floor:M,round:S}=Math;function b(P,l,g){l/=100,g/=100;const k=M(P=P/360*6),T=P-k,v=g*(1-l),x=g*(1-T*l),I=g*(1-(1-T)*l),A=k%6;return[255*[g,x,v,v,I,g][A],255*[I,g,g,x,v,v][A],255*[v,v,I,g,g,x][A]]}function F(P,l,g){const k=(2-(l/=100))*(g/=100)/2;return k!==0&&(l=k===1?0:k<.5?l*g/(2*k):l*g/(2-2*k)),[P,100*l,100*k]}function N(P,l,g){const k=C(P/=255,l/=255,g/=255),T=R(P,l,g),v=T-k;let x,I;if(v===0)x=I=0;else{I=v/T;const A=((T-P)/6+v/2)/v,z=((T-l)/6+v/2)/v,W=((T-g)/6+v/2)/v;P===T?x=W-z:l===T?x=1/3+A-W:g===T&&(x=2/3+z-A),x<0?x+=1:x>1&&(x-=1)}return[360*x,100*I,100*T]}function y(P,l,g,k){return l/=100,g/=100,[...N(255*(1-C(1,(P/=100)*(1-(k/=100))+k)),255*(1-C(1,l*(1-k)+k)),255*(1-C(1,g*(1-k)+k)))]}function $(P,l,g){l/=100;const k=2*(l*=(g/=100)<.5?g:1-g)/(g+l)*100,T=100*(g+l);return[P,isNaN(k)?0:k,T]}function E(P){return N(...P.match(/.{2}/g).map((l=>parseInt(l,16))))}function V(P){P=P.match(/^[a-zA-Z]+$/)?(function(T){if(T.toLowerCase()==="black")return"#000";const v=document.createElement("canvas").getContext("2d");return v.fillStyle=T,v.fillStyle==="#000"?null:v.fillStyle})(P):P;const l={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},g=T=>T.map((v=>/^(|\d+)\.\d+|\d+$/.test(v)?Number(v):void 0));let k;e:for(const T in l)if(k=l[T].exec(P))switch(T){case"cmyk":{const[,v,x,I,A]=g(k);if(v>100||x>100||I>100||A>100)break e;return{values:y(v,x,I,A),type:T}}case"rgba":{let[,v,,x,,I,,,A]=g(k);if(v=k[2]==="%"?v/100*255:v,x=k[4]==="%"?x/100*255:x,I=k[6]==="%"?I/100*255:I,A=k[9]==="%"?A/100:A,v>255||x>255||I>255||A<0||A>1)break e;return{values:[...N(v,x,I),A],a:A,type:T}}case"hexa":{let[,v]=k;v.length!==4&&v.length!==3||(v=v.split("").map((A=>A+A)).join(""));const x=v.substring(0,6);let I=v.substring(6);return I=I?parseInt(I,16)/255:void 0,{values:[...E(x),I],a:I,type:T}}case"hsla":{let[,v,x,I,,A]=g(k);if(A=k[6]==="%"?A/100:A,v>360||x>100||I>100||A<0||A>1)break e;return{values:[...$(v,x,I),A],a:A,type:T}}case"hsva":{let[,v,x,I,,A]=g(k);if(A=k[6]==="%"?A/100:A,v>360||x>100||I>100||A<0||A>1)break e;return{values:[v,x,I,A],a:A,type:T}}}return{values:null,type:null}}function L(P=0,l=0,g=0,k=1){const T=(x,I)=>(A=-1)=>I(~A?x.map((z=>Number(z.toFixed(A)))):x),v={h:P,s:l,v:g,a:k,toHSVA(){const x=[v.h,v.s,v.v,v.a];return x.toString=T(x,(I=>`hsva(${I[0]}, ${I[1]}%, ${I[2]}%, ${v.a})`)),x},toHSLA(){const x=[...F(v.h,v.s,v.v),v.a];return x.toString=T(x,(I=>`hsla(${I[0]}, ${I[1]}%, ${I[2]}%, ${v.a})`)),x},toRGBA(){const x=[...b(v.h,v.s,v.v),v.a];return x.toString=T(x,(I=>`rgba(${I[0]}, ${I[1]}, ${I[2]}, ${v.a})`)),x},toCMYK(){const x=(function(I,A,z){const W=b(I,A,z),K=W[0]/255,Q=W[1]/255,Y=W[2]/255,Z=C(1-K,1-Q,1-Y);return[100*(Z===1?0:(1-K-Z)/(1-Z)),100*(Z===1?0:(1-Q-Z)/(1-Z)),100*(Z===1?0:(1-Y-Z)/(1-Z)),100*Z]})(v.h,v.s,v.v);return x.toString=T(x,(I=>`cmyk(${I[0]}%, ${I[1]}%, ${I[2]}%, ${I[3]}%)`)),x},toHEXA(){const x=(function(A,z,W){return b(A,z,W).map((K=>S(K).toString(16).padStart(2,"0")))})(v.h,v.s,v.v),I=v.a>=1?"":Number((255*v.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return I&&x.push(I),x.toString=()=>`#${x.join("").toUpperCase()}`,x},clone:()=>L(v.h,v.s,v.v,v.a)};return v}const q=P=>Math.max(Math.min(P,1),0);function B(P){const l={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},P),_keyboard(v){const{options:x}=l,{type:I,key:A}=v;if(document.activeElement===x.wrapper){const{lock:z}=l.options,W=A==="ArrowUp",K=A==="ArrowRight",Q=A==="ArrowDown",Y=A==="ArrowLeft";if(I==="keydown"&&(W||K||Q||Y)){let Z=0,ie=0;z==="v"?Z=W||K?1:-1:z==="h"?Z=W||K?-1:1:(ie=W?-1:Q?1:0,Z=Y?-1:K?1:0),l.update(q(l.cache.x+.01*Z),q(l.cache.y+.01*ie)),v.preventDefault()}else A.startsWith("Arrow")&&(l.options.onstop(),v.preventDefault())}},_tapstart(v){o(document,["mouseup","touchend","touchcancel"],l._tapstop),o(document,["mousemove","touchmove"],l._tapmove),v.cancelable&&v.preventDefault(),l._tapmove(v)},_tapmove(v){const{options:x,cache:I}=l,{lock:A,element:z,wrapper:W}=x,K=W.getBoundingClientRect();let Q=0,Y=0;if(v){const $e=v&&v.touches&&v.touches[0];Q=v?($e||v).clientX:0,Y=v?($e||v).clientY:0,Q<K.left?Q=K.left:Q>K.left+K.width&&(Q=K.left+K.width),Y<K.top?Y=K.top:Y>K.top+K.height&&(Y=K.top+K.height),Q-=K.left,Y-=K.top}else I&&(Q=I.x*K.width,Y=I.y*K.height);A!=="h"&&(z.style.left=`calc(${Q/K.width*100}% - ${z.offsetWidth/2}px)`),A!=="v"&&(z.style.top=`calc(${Y/K.height*100}% - ${z.offsetHeight/2}px)`),l.cache={x:Q/K.width,y:Y/K.height};const Z=q(Q/K.width),ie=q(Y/K.height);switch(A){case"v":return x.onchange(Z);case"h":return x.onchange(ie);default:return x.onchange(Z,ie)}},_tapstop(){l.options.onstop(),d(document,["mouseup","touchend","touchcancel"],l._tapstop),d(document,["mousemove","touchmove"],l._tapmove)},trigger(){l._tapmove()},update(v=0,x=0){const{left:I,top:A,width:z,height:W}=l.options.wrapper.getBoundingClientRect();l.options.lock==="h"&&(x=v),l._tapmove({clientX:I+z*v,clientY:A+W*x})},destroy(){const{options:v,_tapstart:x,_keyboard:I}=l;d(document,["keydown","keyup"],I),d([v.wrapper,v.element],"mousedown",x),d([v.wrapper,v.element],"touchstart",x,{passive:!1})}},{options:g,_tapstart:k,_keyboard:T}=l;return o([g.wrapper,g.element],"mousedown",k),o([g.wrapper,g.element],"touchstart",k,{passive:!1}),o(document,["keydown","keyup"],T),l}function p(P={}){P=Object.assign({onchange:()=>0,className:"",elements:[]},P);const l=o(P.elements,"click",(g=>{P.elements.forEach((k=>k.classList[g.target===k?"add":"remove"](P.className))),P.onchange(g),g.stopPropagation()}));return{destroy:()=>d(...l)}}const O={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},U=(P,l,g)=>{const k=typeof P!="object"||P instanceof HTMLElement?{reference:P,popper:l,...g}:P;return{update(T=k){const{reference:v,popper:x}=Object.assign(k,T);if(!x||!v)throw new Error("Popper- or reference-element missing.");return((I,A,z)=>{const{container:W,arrow:K,margin:Q,padding:Y,position:Z,variantFlipOrder:ie,positionFlipOrder:$e}={container:document.documentElement.getBoundingClientRect(),...O,...z},{left:Ze,top:et}=A.style;A.style.left="0",A.style.top="0";const le=I.getBoundingClientRect(),de=A.getBoundingClientRect(),eo={t:le.top-de.height-Q,b:le.bottom+Q,r:le.right+Q,l:le.left-de.width-Q},to={vs:le.left,vm:le.left+le.width/2-de.width/2,ve:le.left+le.width-de.width,hs:le.top,hm:le.bottom-le.height/2-de.height/2,he:le.bottom-de.height},[no,oo="middle"]=Z.split("-"),ao=$e[no],so=ie[oo],{top:Gt,left:Jt,bottom:Qt,right:Yt}=W;for(const Le of ao){const xe=Le==="t"||Le==="b";let De=eo[Le];const[tt,nt]=xe?["top","left"]:["left","top"],[ot,at]=xe?[de.height,de.width]:[de.width,de.height],[io,ro]=xe?[Qt,Yt]:[Yt,Qt],[lo,co]=xe?[Gt,Jt]:[Jt,Gt];if(!(De<lo||De+ot+Y>io))for(const st of so){let qe=to[(xe?"v":"h")+st];if(!(qe<co||qe+at+Y>ro)){if(qe-=de[nt],De-=de[tt],A.style[nt]=`${qe}px`,A.style[tt]=`${De}px`,K){const it=xe?le.width/2:le.height/2,Ve=at/2,Xt=it>Ve,uo=qe+{s:Xt?Ve:it,m:Ve,e:Xt?Ve:at-it}[st],po=De+{t:ot,b:0,r:0,l:ot}[Le];K.style[nt]=`${uo}px`,K.style[tt]=`${po}px`}return Le+st}}}return A.style.left=Ze,A.style.top=et,null})(v,x,k)}}},ne=class ne{constructor(l){ce(this,"_initializingActive",!0);ce(this,"_recalc",!0);ce(this,"_nanopop",null);ce(this,"_root",null);ce(this,"_color",L());ce(this,"_lastColor",L());ce(this,"_swatchColors",[]);ce(this,"_setupAnimationFrame",null);ce(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=l=Object.assign({...ne.DEFAULT_OPTIONS},l);const{swatches:g,components:k,theme:T,sliders:v,lockOpacity:x,padding:I}=l;["nano","monolith"].includes(T)&&!v&&(l.sliders="h"),k.interaction||(k.interaction={});const{preview:A,opacity:z,hue:W,palette:K}=k;k.opacity=!x&&z,k.palette=K||A||z||W,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),g&&g.length&&g.forEach((ie=>this.addSwatch(ie)));const{button:Q,app:Y}=this._root;this._nanopop=U(Q,Y,{margin:I}),Q.setAttribute("role","button"),Q.setAttribute("aria-label",this._t("btn:toggle"));const Z=this;this._setupAnimationFrame=requestAnimationFrame((function ie(){if(!Y.offsetWidth)return requestAnimationFrame(ie);Z.setColor(l.default),Z._rePositioningPicker(),l.defaultRepresentation&&(Z._representation=l.defaultRepresentation,Z.setColorRepresentation(Z._representation)),l.showAlways&&Z.show(),Z._initializingActive=!1,Z._emit("init")}))}_preBuild(){const{options:l}=this;for(const g of["el","container"])l[g]=f(l[g]);this._root=(g=>{const{components:k,useAsButton:T,inline:v,appClass:x,theme:I,lockOpacity:A}=g.options,z=Y=>Y?"":'style="display:none" hidden',W=Y=>g._t(Y),K=h(`
      <div :ref="root" class="pickr">

        ${T?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${x||""}" data-theme="${I}" ${v?'style="position: unset"':""} aria-label="${W("ui:dialog")}" role="window">
          <div class="pcr-selection" ${z(k.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${z(k.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${W("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${W("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${z(k.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${W("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${z(k.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${W("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${k.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${z(Object.keys(k.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${z(k.interaction.input)} aria-label="${W("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${A?"HEX":"HEXA"}" type="button" ${z(k.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${A?"RGB":"RGBA"}" type="button" ${z(k.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${A?"HSL":"HSLA"}" type="button" ${z(k.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${A?"HSV":"HSVA"}" type="button" ${z(k.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${z(k.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${W("btn:save")}" type="button" ${z(k.interaction.save)} aria-label="${W("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${W("btn:cancel")}" type="button" ${z(k.interaction.cancel)} aria-label="${W("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${W("btn:clear")}" type="button" ${z(k.interaction.clear)} aria-label="${W("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),Q=K.interaction;return Q.options.find((Y=>!Y.hidden&&!Y.classList.add("active"))),Q.type=()=>Q.options.find((Y=>Y.classList.contains("active"))),K})(this),l.useAsButton&&(this._root.button=l.el),l.container.appendChild(this._root.root)}_finalBuild(){const l=this.options,g=this._root;if(l.container.removeChild(g.root),l.inline){const k=l.el.parentElement;l.el.nextSibling?k.insertBefore(g.app,l.el.nextSibling):k.appendChild(g.app)}else l.container.appendChild(g.app);l.useAsButton?l.inline&&l.el.remove():l.el.parentNode.replaceChild(g.root,l.el),l.disabled&&this.disable(),l.comparison||(g.button.style.transition="none",l.useAsButton||(g.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const l=this,g=this.options.components,k=(l.options.sliders||"v").repeat(2),[T,v]=k.match(/^[vh]+$/g)?k:[],x=()=>this._color||(this._color=this._lastColor.clone()),I={palette:B({element:l._root.palette.picker,wrapper:l._root.palette.palette,onstop:()=>l._emit("changestop","slider",l),onchange(A,z){if(!g.palette)return;const W=x(),{_root:K,options:Q}=l,{lastColor:Y,currentColor:Z}=K.preview;l._recalc&&(W.s=100*A,W.v=100-100*z,W.v<0&&(W.v=0),l._updateOutput("slider"));const ie=W.toRGBA().toString(0);this.element.style.background=ie,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${W.a}), transparent),
                        linear-gradient(to left, hsla(${W.h}, 100%, 50%, ${W.a}), rgba(255, 255, 255, ${W.a}))
                    `,Q.comparison?Q.useAsButton||l._lastColor||Y.style.setProperty("--pcr-color",ie):(K.button.style.setProperty("--pcr-color",ie),K.button.classList.remove("clear"));const $e=W.toHEXA().toString();for(const{el:Ze,color:et}of l._swatchColors)Ze.classList[$e===et.toHEXA().toString()?"add":"remove"]("pcr-active");Z.style.setProperty("--pcr-color",ie)}}),hue:B({lock:v==="v"?"h":"v",element:l._root.hue.picker,wrapper:l._root.hue.slider,onstop:()=>l._emit("changestop","slider",l),onchange(A){if(!g.hue||!g.palette)return;const z=x();l._recalc&&(z.h=360*A),this.element.style.backgroundColor=`hsl(${z.h}, 100%, 50%)`,I.palette.trigger()}}),opacity:B({lock:T==="v"?"h":"v",element:l._root.opacity.picker,wrapper:l._root.opacity.slider,onstop:()=>l._emit("changestop","slider",l),onchange(A){if(!g.opacity||!g.palette)return;const z=x();l._recalc&&(z.a=Math.round(100*A)/100),this.element.style.background=`rgba(0, 0, 0, ${z.a})`,I.palette.trigger()}}),selectable:p({elements:l._root.interaction.options,className:"active",onchange(A){l._representation=A.target.getAttribute("data-type").toUpperCase(),l._recalc&&l._updateOutput("swatch")}})};this._components=I}_bindEvents(){const{_root:l,options:g}=this,k=[o(l.interaction.clear,"click",(()=>this._clearColor())),o([l.interaction.cancel,l.preview.lastColor],"click",(()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")})),o(l.interaction.save,"click",(()=>{!this.applyColor()&&!g.showAlways&&this.hide()})),o(l.interaction.result,["keyup","input"],(T=>{this.setColor(T.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),T.stopImmediatePropagation()})),o(l.interaction.result,["focus","blur"],(T=>{this._recalc=T.type==="blur",this._recalc&&this._updateOutput(null)})),o([l.palette.palette,l.palette.picker,l.hue.slider,l.hue.picker,l.opacity.slider,l.opacity.picker],["mousedown","touchstart"],(()=>this._recalc=!0),{passive:!0})];if(!g.showAlways){const T=g.closeWithKey;k.push(o(l.button,"click",(()=>this.isOpen()?this.hide():this.show())),o(document,"keyup",(v=>this.isOpen()&&(v.key===T||v.code===T)&&this.hide())),o(document,["touchstart","mousedown"],(v=>{this.isOpen()&&!_(v).some((x=>x===l.app||x===l.button))&&this.hide()}),{capture:!0}))}if(g.adjustableNumbers){const T={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};w(l.interaction.result,((v,x,I)=>{const A=T[this.getColorRepresentation().toLowerCase()];if(A){const z=A[I],W=v+(z>=100?1e3*x:x);return W<=0?0:Number((W<z?W:z).toPrecision(3))}return v}))}if(g.autoReposition&&!g.inline){let T=null;const v=this;k.push(o(window,["scroll","resize"],(()=>{v.isOpen()&&(g.closeOnScroll&&v.hide(),T===null?(T=setTimeout((()=>T=null),100),requestAnimationFrame((function x(){v._rePositioningPicker(),T!==null&&requestAnimationFrame(x)}))):(clearTimeout(T),T=setTimeout((()=>T=null),100)))}),{capture:!0}))}this._eventBindings=k}_rePositioningPicker(){const{options:l}=this;if(!l.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:l.position})){const g=this._root.app,k=g.getBoundingClientRect();g.style.top=(window.innerHeight-k.height)/2+"px",g.style.left=(window.innerWidth-k.width)/2+"px"}}_updateOutput(l){const{_root:g,_color:k,options:T}=this;if(g.interaction.type()){const v=`to${g.interaction.type().getAttribute("data-type")}`;g.interaction.result.value=typeof k[v]=="function"?k[v]().toString(T.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",k,l,this)}_clearColor(l=!1){const{_root:g,options:k}=this;k.useAsButton||g.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),g.button.classList.add("clear"),k.showAlways||this.hide(),this._lastColor=null,this._initializingActive||l||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(l){const{values:g,type:k,a:T}=V(l),{lockOpacity:v}=this.options,x=T!==void 0&&T!==1;return g&&g.length===3&&(g[3]=void 0),{values:!g||v&&x?null:g,type:k}}_t(l){return this.options.i18n[l]||ne.I18N_DEFAULTS[l]}_emit(l,...g){this._eventListener[l].forEach((k=>k(...g,this)))}on(l,g){return this._eventListener[l].push(g),this}off(l,g){const k=this._eventListener[l]||[],T=k.indexOf(g);return~T&&k.splice(T,1),this}addSwatch(l){const{values:g}=this._parseLocalColor(l);if(g){const{_swatchColors:k,_root:T}=this,v=L(...g),x=s(`<button type="button" style="--pcr-color: ${v.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return T.swatches.appendChild(x),k.push({el:x,color:v}),this._eventBindings.push(o(x,"click",(()=>{this.setHSVA(...v.toHSVA(),!0),this._emit("swatchselect",v),this._emit("change",v,"swatch",this)}))),!0}return!1}removeSwatch(l){const g=this._swatchColors[l];if(g){const{el:k}=g;return this._root.swatches.removeChild(k),this._swatchColors.splice(l,1),!0}return!1}applyColor(l=!1){const{preview:g,button:k}=this._root,T=this._color.toRGBA().toString(0);return g.lastColor.style.setProperty("--pcr-color",T),this.options.useAsButton||k.style.setProperty("--pcr-color",T),k.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||l||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach((l=>d(...l))),Object.keys(this._components).forEach((l=>this._components[l].destroy()))}destroyAndRemove(){this.destroy();const{root:l,app:g}=this._root;l.parentElement&&l.parentElement.removeChild(l),g.parentElement.removeChild(g),Object.keys(this).forEach((k=>this[k]=null))}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(l=360,g=0,k=0,T=1,v=!1){const x=this._recalc;if(this._recalc=!1,l<0||l>360||g<0||g>100||k<0||k>100||T<0||T>1)return!1;this._color=L(l,g,k,T);const{hue:I,opacity:A,palette:z}=this._components;return I.update(l/360),A.update(T),z.update(g/100,1-k/100),v||this.applyColor(),x&&this._updateOutput(),this._recalc=x,!0}setColor(l,g=!1){if(l===null)return this._clearColor(g),!0;const{values:k,type:T}=this._parseLocalColor(l);if(k){const v=T.toUpperCase(),{options:x}=this._root.interaction,I=x.find((A=>A.getAttribute("data-type")===v));if(I&&!I.hidden)for(const A of x)A.classList[A===I?"add":"remove"]("active");return!!this.setHSVA(...k,g)&&this.setColorRepresentation(v)}return!1}setColorRepresentation(l){return l=l.toUpperCase(),!!this._root.interaction.options.find((g=>g.getAttribute("data-type").startsWith(l)&&!g.click()))}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};ce(ne,"utils",t),ce(ne,"version","1.9.1"),ce(ne,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),ce(ne,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),ce(ne,"create",l=>new ne(l));let G=ne;return n=n.default})()))})(Bt)),Bt.exports}var Aa=Ca();const Sa=Nn(Aa),$a={class:"color-picker-wrapper"},xa={class:"color-picker-action"},Ia={__name:"index",props:{value:{type:String,default:"#000000"}},emits:["update:value","change"],setup(u,{emit:i}){const r=i,n=u,t=H(null);return Pe(()=>{const e=Sa.create({el:t.value,container:"body",theme:"nano",default:n.value,defaultRepresentation:"HEX",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}});e.on("save",(o,d)=>{let s=o.toHEXA().toString();r("update:value",s),r("change",s),d.hide()}),e.on("show",()=>{const o=document.querySelectorAll(".pcr-save");o&&o.length&&o.forEach(function(d){d.tagName.toLowerCase()==="input"&&(d.value="保存")})})}),(e,o)=>{const d=ye;return D(),J("div",$a,[c(d,{value:n.value,readonly:!0,placeholder:"Basic usage"},null,8,["value"]),a("span",xa,[a("span",{ref_key:"colorPicker",ref:t},null,512)])])}}},Nt=se(Ia,[["__scopeId","data-v-f2a9e7d0"]]),Ea="/assets/img/quick-help-BZ3Cu-IE.png",Ra={class:"quick-instructions-box"},Ba={class:"quick-action-right"},Pa={class:"quick-list-box"},Ta={class:"list-box-wrap"},Ma={class:"drag-btn"},Ua={class:"left-box"},Na={class:"title"},La={class:"content"},Da={class:"opration-box"},qa={class:"form-box"},Oa={__name:"quick-instruction",props:{type:{type:Number,default:void 0}},emits:["updata"],setup(u,{emit:i}){const r=u,n=i,t=ho(),e=Ke(),{robotInfo:o}=We(e),{getRobot:d}=e,s=H([]),h=H(parseInt(r.type==-1?o.value.fast_command_switch:o.value.yunpc_fast_command_switch)||0);Ee(s,B=>{n("updata",{comand_list:B,fast_command_switch:h.value})});const _=()=>{Bo({robot_key:o.value.robot_key,app_id:r.type}).then(B=>{s.value=B.data||[],e.setQuickCommand(B.data)})};_();const f=me.useForm,w=H(!1),C=H("添加快捷指令"),R=ue({robot_id:t.query.id,app_id:r.type,title:"",typ:1,content:"",id:""}),M=B=>{const{id:p}=o.value;Mo({robot_key:o.value.robot_key,app_id:r.type}).then(O=>{h.value=B,n("updata",{comand_list:s.value,fast_command_switch:h.value}),d(p),oe.success("修改成功")}).catch(O=>{h.value=!h.value})},S=()=>{R.content="",$(["content"])},b=B=>{w.value=!0,N(),C.value=B.id?"编辑快捷指令":"添加快捷指令",R.title=B.title||"",R.content=B.content||"",R.id=B.id||"",R.typ=+B.typ||1},F=ue({title:[{message:"请输入指令标题",required:!0}],content:[{message:"",required:!0},{validator:async(B,p)=>p==""?Promise.reject(new Error(`请输入${R.typ==1?"内容":"网址"}`)):R.typ==1||Lo(p)?Promise.resolve():Promise.reject(new Error("请输入合法网页链接"))}]}),{resetFields:N,validate:y,clearValidate:$,validateInfos:E}=f(R,F),V=()=>{y().then(()=>{Uo({...he(R)}).then(B=>{oe.success("修改成功"),w.value=!1,_()})})},L=B=>{re.confirm({title:"提醒",icon:c(Me),content:"确定要删除该快捷指令吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk(){To({id:B}).then(p=>{oe.success("删除成功"),_()})},onCancel(){}})},q=B=>{let p=s.value.map((O,U)=>({id:+O.id,sort:U+1}));Po({data:p}).then(O=>{oe.success("保存成功"),_()})};return(B,p)=>{const O=Co,U=Lt,G=Ge,ne=pe,P=ye,l=ke,g=qt,k=Dt,T=Ot,v=me,x=re;return D(),J("div",Ra,[c(Be,null,{title:m(()=>[p[9]||(p[9]=j(" 快捷指令设置 ",-1)),c(O,{placement:"top"},{content:m(()=>[...p[8]||(p[8]=[a("div",{class:"help-box"},[a("div",null,"快捷指令是对话输入框上方的按钮,配置完成后,用户可以快速发起预设对话"),a("img",{src:Ea,alt:""})],-1)])]),default:m(()=>[c(ee(Re),{class:"help-icon"})]),_:1})]),icon:m(()=>[c(U,{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),action:m(()=>[a("div",Ba,[c(G,{onChange:M,class:"switch-item",checkedValue:1,unCheckedValue:0,checked:h.value,"onUpdate:checked":p[0]||(p[0]=I=>h.value=I),"checked-children":"开","un-checked-children":"关"},null,8,["checked"]),c(ne,{onClick:b,size:"small",type:"primary"},{default:m(()=>[...p[10]||(p[10]=[j("添加",-1)])]),_:1})])]),default:m(()=>[a("div",Pa,[c(ee(Do),{modelValue:s.value,"onUpdate:modelValue":p[1]||(p[1]=I=>s.value=I),"item-key":"id",onEnd:p[2]||(p[2]=I=>q(I)),handle:".drag-btn"},{item:m(({element:I,index:A})=>[a("div",Ta,[(D(),J("div",{class:"list-item",key:I.id},[a("div",Ma,[c(U,{name:"drag"})]),a("div",Ua,[a("div",Na,ae(I.title),1),a("div",La,ae(I.content),1)]),a("div",Da,[c(ee(bo),{onClick:z=>b(I)},null,8,["onClick"]),c(ee(ko),{onClick:z=>L(I.id)},null,8,["onClick"])])]))])]),_:1},8,["modelValue"])])]),_:1}),c(x,{open:w.value,"onUpdate:open":p[7]||(p[7]=I=>w.value=I),title:C.value,onOk:V,width:"576px"},{default:m(()=>[a("div",qa,[c(v,{layout:"vertical"},{default:m(()=>[c(l,Zt({label:"指令标题"},ee(E).title),{default:m(()=>[c(P,{placeholder:"请输入指令标题",maxLength:20,value:R.title,"onUpdate:value":p[3]||(p[3]=I=>R.title=I)},null,8,["value"])]),_:1},16),c(l,{label:"指令类型",required:""},{default:m(()=>[c(k,{value:R.typ,"onUpdate:value":p[4]||(p[4]=I=>R.typ=I),onChange:S},{default:m(()=>[c(g,{value:1},{default:m(()=>[...p[11]||(p[11]=[j("输入内容",-1)])]),_:1}),c(g,{value:2},{default:m(()=>[...p[12]||(p[12]=[j("跳转网页",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),c(l,Zt({label:R.typ==1?"指令内容":"网页链接",required:""},ee(E).content),{default:m(()=>[R.typ==1?(D(),X(T,{key:0,style:{height:"100px"},value:R.content,"onUpdate:value":p[5]||(p[5]=I=>R.content=I),placeholder:"请输入指令内容"},null,8,["value"])):(D(),X(P,{key:1,placeholder:"请输入网页链接",value:R.content,"onUpdate:value":p[6]||(p[6]=I=>R.content=I)},null,8,["value"]))]),_:1},16,["label"])]),_:1})])]),_:1},8,["open","title"])])}}},Yn=se(Oa,[["__scopeId","data-v-9444f65b"]]),Fa={class:"web-app-box"},Va={class:"box-left"},ja={class:"box-wrapper"},Ha={class:"web-app-info"},za={class:"web-app-link"},Wa=["href"],Ka={class:"link-action"},Ga=["src"],Ja={class:"card-title"},Qa={class:"web-app-link"},Ya=["href"],Xa={class:"link-action"},Za=["src"],es={class:"access-restrictions form-box"},ts={class:"form-item"},ns={class:"form-item-body"},os={class:"box-wrapper"},as={class:"web-app-style form-box"},ss={class:"window-size-box"},is={class:"box-wrapper"},rs={class:"box-right"},ls={class:"demo-box"},cs=["src"],us={__name:"web-app",setup(u){const i=Mn(),r=Ke(),{robotInfo:n,external_config_h5:t}=We(r),{h5_website:e,h5_domain:o,robot_key:d}=n.value,{getRobot:s}=r,h=H(""),_=H(""),f=H(),w=ue({logo:t.value.logo,pageTitle:t.value.pageTitle,navbarShow:t.value.navbarShow,lang:t.value.lang,pageStyle:t.value.pageStyle,open_type:t.value.open_type,window_width:t.value.window_width,window_height:t.value.window_height}),C=ve(()=>`${o}/#/chat/pc?robot_key=${d}`),R=ve(()=>`${o}/#/chat/h5?robot_key=${d}`),M=ve(()=>e);Ee(w,B=>{b(B)});const S=B=>{b(B,"updataQuickComand")},b=(B,p)=>{document.getElementById("mobile-preview").contentWindow.postMessage({type:p||"onPreview",data:JSON.parse(JSON.stringify(B))},"*")},F={lang:[{required:!0,message:"请选择语言",trigger:"change"}],pageTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>w.logo?Promise.resolve():Promise.reject("请上传logo")}],navbarShow:[{required:!0,message:"请选择是否显示标题栏",trigger:"change"}],pageStyle:{navbarBackgroundColor:[{required:!0,message:"请选择标题栏颜色",trigger:"change"}]}},N=H(t.value.accessRestrictionsType||1),y=()=>{let B={...he(t.value)};B.accessRestrictionsType=N.value,$(B)},$=B=>{const{id:p}=n.value;On({id:p,external_config_h5:JSON.stringify(B)}).then(()=>{s(p),oe.success("保存成功"),i.go(0)})},E=()=>{f.value.validate().then(()=>{let B={...he(w)};B.window_width=+B.window_width||1200,B.window_height=+B.window_height||650,B.accessRestrictionsType=N.value,$(B)}).catch(B=>{})},V=B=>{window.open(B)},L=B=>{Te(B),oe.success("复制成功")},q=async()=>{try{h.value=await En.toDataURL(C.value),_.value=await En.toDataURL(R.value)}catch(B){console.error(B)}};return setTimeout(()=>{q()},300),(B,p)=>{const O=Lt,U=pe,G=Je,ne=qt,P=Dt,l=ke,g=Vt,k=Ft,T=Ht,v=jt,x=Ln,I=me;return D(),J("div",Fa,[a("div",Va,[a("div",ja,[c(Be,{title:"H5链接"},{icon:m(()=>[c(O,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),default:m(()=>[a("div",Ha,[a("div",za,[a("a",{href:R.value,target:"_blank"},ae(R.value),9,Wa)]),a("div",Ka,[c(U,{class:"action-btn",type:"primary",ghost:"",onClick:p[0]||(p[0]=A=>L(R.value))},{default:m(()=>[...p[13]||(p[13]=[j("复 制",-1)])]),_:1}),c(U,{class:"action-btn",onClick:p[1]||(p[1]=A=>V(R.value))},{default:m(()=>[...p[14]||(p[14]=[j("预 览",-1)])]),_:1}),c(G,{color:"#fff",placement:"top"},{title:m(()=>[a("img",{style:{width:"180px"},src:_.value,alt:""},null,8,Ga)]),default:m(()=>[c(U,{class:"action-btn"},{default:m(()=>[...p[15]||(p[15]=[j("二维码",-1)])]),_:1})]),_:1})]),a("div",Ja,[c(O,{name:"circularNeedle",style:{"font-size":"16px",color:"#262626"}}),p[16]||(p[16]=a("div",{class:"title-text"},"pc网页链接",-1))]),a("div",Qa,[a("a",{href:C.value,target:"_blank"},ae(C.value),9,Ya)]),a("div",Xa,[c(U,{class:"action-btn",type:"primary",ghost:"",onClick:p[2]||(p[2]=A=>L(C.value))},{default:m(()=>[...p[17]||(p[17]=[j("复 制",-1)])]),_:1}),c(U,{class:"action-btn",onClick:p[3]||(p[3]=A=>V(C.value))},{default:m(()=>[...p[18]||(p[18]=[j("预 览",-1)])]),_:1}),c(G,{color:"#fff",placement:"top"},{title:m(()=>[a("img",{style:{width:"180px"},src:h.value,alt:""},null,8,Za)]),default:m(()=>[c(U,{class:"action-btn"},{default:m(()=>[...p[19]||(p[19]=[j("二维码",-1)])]),_:1})]),_:1})]),a("div",es,[a("div",ts,[p[23]||(p[23]=a("div",{class:"form-item-label"},"访问限制",-1)),a("div",ns,[c(P,{value:N.value,"onUpdate:value":p[4]||(p[4]=A=>N.value=A),onChange:y},{default:m(()=>[c(ne,{value:1},{default:m(()=>[...p[20]||(p[20]=[a("span",{class:"default-text-color"},"无限制",-1)])]),_:1}),c(ne,{value:2},{default:m(()=>[...p[21]||(p[21]=[a("span",{class:"default-text-color"},"登录后才可访问",-1)])]),_:1}),te("",!0)]),_:1},8,["value"])])])])])]),_:1})]),a("div",os,[c(Be,{title:"样式设置"},{icon:m(()=>[c(O,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),action:m(()=>[c(U,{onClick:E,size:"small",type:"primary"},{default:m(()=>[...p[24]||(p[24]=[j("保存",-1)])]),_:1})]),default:m(()=>[a("div",as,[c(I,{ref_key:"formRef",ref:f,layout:"vertical",model:w,rules:F},{default:m(()=>[c(l,{class:"form-item",label:"是否显示标题栏",name:"navbarShow"},{default:m(()=>[c(P,{value:w.navbarShow,"onUpdate:value":p[5]||(p[5]=A=>w.navbarShow=A),name:"navbarShow"},{default:m(()=>[c(ne,{value:1},{default:m(()=>[...p[25]||(p[25]=[j("显示",-1)])]),_:1}),c(ne,{value:2},{default:m(()=>[...p[26]||(p[26]=[j("不显示",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),c(l,{class:"form-item",label:"页面标题",name:"pageTitle"},{default:m(()=>[c(Ne,{avatar:w.logo,"onUpdate:avatar":p[6]||(p[6]=A=>w.logo=A),value:w.pageTitle,"onUpdate:value":p[7]||(p[7]=A=>w.pageTitle=A)},null,8,["avatar","value"])]),_:1}),c(l,{class:"form-item",label:"标题栏颜色",name:["pageStyle","navbarBackgroundColor"]},{default:m(()=>[c(Nt,{value:w.pageStyle.navbarBackgroundColor,"onUpdate:value":p[8]||(p[8]=A=>w.pageStyle.navbarBackgroundColor=A)},null,8,["value"])]),_:1}),c(l,{class:"form-item",label:"语言",name:"lang"},{default:m(()=>[c(k,{style:{width:"180px"},value:w.lang,"onUpdate:value":p[9]||(p[9]=A=>w.lang=A),placeholder:"请选择语言"},{default:m(()=>[c(g,{value:"zh-CN"},{default:m(()=>[...p[27]||(p[27]=[j("简体中文",-1)])]),_:1}),c(g,{value:"en-US"},{default:m(()=>[...p[28]||(p[28]=[j("English",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),c(l,{class:"form-item",label:"网址打开方式",name:"open_type",required:""},{default:m(()=>[c(P,{value:w.open_type,"onUpdate:value":p[10]||(p[10]=A=>w.open_type=A)},{default:m(()=>[c(ne,{value:1},{default:m(()=>[...p[29]||(p[29]=[j("新标签页打开",-1)])]),_:1}),c(ne,{value:2},{default:m(()=>[p[31]||(p[31]=j("新窗口弹窗打开 ",-1)),c(G,{title:"仅管控PC端新窗口打开,移动端依然用新标签页打开"},{title:m(()=>[...p[30]||(p[30]=[j("prompt text",-1)])]),default:m(()=>[c(ee(Re))]),_:1})]),_:1})]),_:1},8,["value"]),w.open_type==2?(D(),X(x,{key:0},{default:m(()=>[a("div",ss,[c(v,{align:"center",gap:8},{default:m(()=>[p[32]||(p[32]=a("div",null,"弹窗高度",-1)),c(T,{value:w.window_height,"onUpdate:value":p[11]||(p[11]=A=>w.window_height=A),min:500,max:2e3},null,8,["value"]),p[33]||(p[33]=j(" PX ",-1))]),_:1}),c(v,{align:"center",gap:8},{default:m(()=>[p[34]||(p[34]=a("div",null,"弹窗宽度",-1)),c(T,{value:w.window_width,"onUpdate:value":p[12]||(p[12]=A=>w.window_width=A),min:500,max:2e3},null,8,["value"]),p[35]||(p[35]=j(" PX ",-1))]),_:1})])]),_:1})):te("",!0)]),_:1})]),_:1},8,["model"])])]),_:1})]),a("div",is,[c(Yn,{type:ee(n).app_id,onUpdata:S},null,8,["type"])])]),a("div",rs,[a("div",ls,[a("iframe",{id:"mobile-preview",src:M.value,frameborder:"0"},null,8,cs)])])])}}},ds=se(us,[["__scopeId","data-v-5a1a978d"]]);function ps({pc_domain:u,robot_key:i,language:r="zh-CN"}){var n=`<script>
  (function (z, h, i, m, a, j, s) {
    z[m] = z[m] || function () {
      (z[m].a = z[m].a || []).push(arguments);
    };
    (j = h.createElement(i)), (s = h.getElementsByTagName(i)[0]);
    j.async = true;
    j.charset = "UTF-8";
    j.setAttribute(
      "data-json",
      JSON.stringify({
        robot_key: "${i}",
        language: "${r}",
      })
    );
    j.id = "ai_chat_js";
    j.src = '${u}/sdk/ai-chat-sdk.umd.cjs';
    s.parentNode.insertBefore(j, s);
  })(window, document, "script", "_ai_chat");
<\/script>`;return n}const fs={class:"gradient-color-picker"},_s={class:"color-picker-box"},hs={class:"gradient-type-select"},ms={class:"color-item"},gs={class:"right-arrow"},vs={class:"color-item"},ys={__name:"gradient-color-picker",props:{value:{type:String,default:""}},emits:["update:value"],setup(u,{emit:i}){const r=i,n=u,t=me.useInjectFormItemContext(),e=H([{key:1,label:"单色",value:"color",type:"color"},{key:2,label:"线性渐变（横向）",value:"to right",type:"linear-gradient"},{key:3,label:"线性渐变（竖向）",value:"to bottom",type:"linear-gradient"},{key:4,label:"径向渐变",value:"circle",type:"radial-gradient"}]),o=H("linear-gradient"),d=H("to right"),s=H("#2435E7"),h=H("#01A0FB"),_=ve(()=>o.value=="color"?s.value:`${o.value}(${d.value}, ${s.value}, ${h.value})`);Ee(()=>_.value,()=>{let w=[o.value,d.value,s.value,h.value].join(",");r("update:value",w),t.onFieldChange()}),Ee(()=>n.value,()=>{const w=n.value.split(","),[C,R,M,S]=w;o.value=C,d.value=R,s.value=M,h.value=S},{immediate:!0});const f=(w,C)=>{o.value=C.type,d.value=w,t.onFieldChange()};return(w,C)=>{const R=Vt,M=Ft;return D(),J("div",fs,[a("div",_s,[a("div",hs,[c(M,{value:d.value,style:{width:"180px"},onChange:f},{default:m(()=>[(D(!0),J(fe,null,Ce(e.value,S=>(D(),X(R,{value:S.value,type:S.type,key:S.key},{default:m(()=>[j(ae(S.label),1)]),_:2},1032,["value","type"]))),128))]),_:1},8,["value"])]),a("div",ms,[c(Nt,{value:s.value,"onUpdate:value":C[0]||(C[0]=S=>s.value=S)},null,8,["value"])]),o.value!="color"?(D(),J(fe,{key:0},[a("div",gs,[c(ee(Ao))]),a("div",vs,[c(Nt,{value:h.value,"onUpdate:value":C[1]||(C[1]=S=>h.value=S)},null,8,["value"])])],64)):te("",!0)])])}}},ws=se(ys,[["__scopeId","data-v-dfea777d"]]),bs="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20x='14'%20y='14'%20width='28'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3crect%20x='14.5'%20y='14.5'%20width='27'%20height='27'%20rx='13.5'%20stroke='black'%20stroke-opacity='0.04'/%3e%3cg%20clip-path='url(%23clip0_2269_42995)'%3e%3cpath%20d='M31.5%2030.3385C32.7887%2030.3385%2033.8333%2029.2939%2033.8333%2028.0052C33.8333%2026.7165%2032.7887%2025.6719%2031.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5013%2025.6719C23.2126%2025.6719%2022.168%2026.7165%2022.168%2028.0052C22.168%2029.2939%2023.2126%2030.3385%2024.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5%2030.3385V30.1927V29.4635V28.0052V25.6719C24.5%2023.7389%2026.067%2022.1719%2028%2022.1719C29.933%2022.1719%2031.5%2023.7389%2031.5%2025.6719V30.3385C31.5%2032.2715%2029.933%2033.8385%2028%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42995'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(21%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ks="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20y='14'%20width='56'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3cg%20clip-path='url(%23clip0_2269_42985)'%3e%3cpath%20d='M19.5%2030.3385C20.7887%2030.3385%2021.8333%2029.2939%2021.8333%2028.0052C21.8333%2026.7165%2020.7887%2025.6719%2019.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5013%2025.6719C11.2126%2025.6719%2010.168%2026.7165%2010.168%2028.0052C10.168%2029.2939%2011.2126%2030.3385%2012.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5%2030.3385V30.1927V29.4635V28.0052V25.6719C12.5%2023.7389%2014.067%2022.1719%2016%2022.1719C17.933%2022.1719%2019.5%2023.7389%2019.5%2025.6719V30.3385C19.5%2032.2715%2017.933%2033.8385%2016%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cpath%20d='M24.5414%2024.224V25.088H26.3894C26.9294%2026.936%2027.8894%2028.544%2029.2814%2029.912C27.9854%2031.088%2026.3294%2031.94%2024.3134%2032.48L24.7694%2033.236C26.8094%2032.648%2028.5134%2031.724%2029.8814%2030.464C31.1774%2031.58%2032.8094%2032.504%2034.8014%2033.248L35.2694%2032.528C33.3494%2031.82%2031.7534%2030.932%2030.4814%2029.852C31.6574%2028.58%2032.5454%2026.984%2033.1334%2025.088H35.0054V24.224H30.4214C30.0374%2023.396%2029.6294%2022.688%2029.1734%2022.112L28.3094%2022.424C28.7894%2022.988%2029.1854%2023.588%2029.5094%2024.224H24.5414ZM27.2414%2025.088H32.2334C31.7294%2026.744%2030.9494%2028.148%2029.8814%2029.312C28.6334%2028.112%2027.7574%2026.708%2027.2414%2025.088ZM40.9574%2024.116C40.7174%2024.452%2040.4534%2024.8%2040.1774%2025.148H37.0094V25.844H39.6134C39.3254%2026.18%2039.0254%2026.516%2038.7134%2026.876C39.5414%2027.032%2040.3694%2027.212%2041.2094%2027.428C40.1534%2027.764%2038.7134%2027.932%2036.8894%2027.932L37.3574%2028.64C39.3974%2028.616%2041.0414%2028.304%2042.3014%2027.716C43.5134%2028.04%2044.7254%2028.412%2045.9254%2028.844L46.4294%2028.184C45.3134%2027.812%2044.2214%2027.488%2043.1654%2027.224C43.6574%2026.864%2044.1134%2026.408%2044.5454%2025.844H46.5614V25.148H41.1254C41.3174%2024.896%2041.5214%2024.632%2041.7374%2024.344L40.9574%2024.116ZM42.2054%2026.984C41.4494%2026.792%2040.7054%2026.636%2039.9734%2026.516C40.1534%2026.324%2040.3574%2026.096%2040.5734%2025.844H43.6214C43.2614%2026.276%2042.7814%2026.648%2042.2054%2026.984ZM46.5974%2023.144H42.2414C42.0974%2022.784%2041.9534%2022.448%2041.7854%2022.148L40.8854%2022.292C41.0654%2022.556%2041.2334%2022.832%2041.3894%2023.144H36.9494V24.836H37.7654V23.876H45.7814V24.836H46.5974V23.144ZM36.6374%2029.336V30.104H40.5854C39.8414%2030.872%2038.4734%2031.556%2036.4814%2032.156L36.9614%2032.924C39.1214%2032.132%2040.5854%2031.196%2041.3534%2030.116V33.176H42.2414V30.152C43.1294%2031.256%2044.6174%2032.156%2046.7054%2032.84L47.0774%2032.084C45.2414%2031.592%2043.8854%2030.932%2043.0214%2030.104H46.9214V29.336H42.2414V28.4H41.3534V29.336H36.6374Z'%20fill='white'/%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42985'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(9%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Cs={class:"float-icon-setting"},As={class:"form-box"},Ss={class:"form-item"},$s={class:"form-content"},xs={class:"display-types"},Is={class:"type-icon"},Es=["src"],Rs={key:1,class:"display-type"},Bs={class:"type-icon"},Ps={class:"type-name"},Ts={key:0,class:"form-item"},Ms={class:"form-content"},Us={class:"form-item"},Ns={class:"form-content"},Ls={class:"number-input"},Ds={class:"form-item"},qs={class:"form-content"},Os={class:"number-input"},Fs={class:"form-item"},Vs={class:"form-content"},js={class:"form-item"},Hs={class:"form-content"},zs={class:"form-item"},Ws={class:"form-content"},Ks={__name:"float-icon-setting",props:{saveLoading:{type:Boolean,default:!1},form:{type:Object,default:()=>{}}},emits:["save"],setup(u,{expose:i,emit:r}){const n=u,t=r,e=ue({displayType:1,buttonText:"快来聊聊吧~",buttonIcon:"",bottomMargin:32,rightMargin:32,showUnreadCount:1,showNewMessageTip:1}),o=_=>{e.displayType=_},d=ve(()=>e.buttonIcon?e.displayType==3:!0),s=_=>{let f=_[0];o(3),jn({file:f,category:"icon"}).then(w=>{e.buttonIcon=w.data.link})},h=()=>{e.rightMargin,(e.rightMargin==""||e.rightMargin==null)&&(e.rightMargin=0),(e.bottomMargin==""||e.rightMargin==null)&&(e.bottomMargin=0),t("save",he(e))};return Ee(()=>n.form,_=>{Object.assign(e,_.floatBtn)},{immediate:!0}),i({handleSubmit:h}),(_,f)=>{const w=ye,C=Ht,R=Ge,M=pe;return D(),X(Be,{title:"悬浮图标设置"},{icon:m(()=>[c(ee(So),{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),default:m(()=>[a("div",Cs,[j(ae(n.title)+" ",1),a("div",As,[a("div",Ss,[f[11]||(f[11]=a("div",{class:"form-item-label"},"展示形式：",-1)),a("div",$s,[a("div",xs,[a("div",{class:rt(["display-type",{"is-checked":e.displayType==1}]),onClick:f[0]||(f[0]=S=>o(1))},[...f[8]||(f[8]=[a("div",{class:"type-icon"},[a("img",{src:bs,alt:""})],-1),a("div",{class:"type-name"},"简洁",-1)])],2),a("div",{class:rt(["display-type",{"is-checked":e.displayType==2}]),onClick:f[1]||(f[1]=S=>o(2))},[...f[9]||(f[9]=[a("div",{class:"type-icon"},[a("img",{src:ks,alt:""})],-1),a("div",{class:"type-name"},"加文案",-1)])],2),e.buttonIcon?(D(),J("div",{key:0,class:rt(["display-type",{"is-checked":e.displayType==3}]),onClick:f[2]||(f[2]=S=>o(3))},[a("div",Is,[a("img",{src:e.buttonIcon,alt:"",title:""},null,8,Es)]),f[10]||(f[10]=a("div",{class:"type-name"},"自定义",-1))],2)):te("",!0),d.value?(D(),J("div",Rs,[c(Hn,{onChange:s},{default:m(()=>[a("div",Bs,[c(ee(zt),{style:{"font-size":"20px"}})])]),_:1}),a("div",Ps,ae(e.buttonIcon?"上传图片":"自定义"),1)])):te("",!0)])])]),e.displayType==2?(D(),J("div",Ts,[f[12]||(f[12]=a("div",{class:"form-item-label"},"按钮文案：",-1)),a("div",Ms,[c(w,{placeholder:"请输入按钮文案",maxlength:15,style:{width:"315px"},value:e.buttonText,"onUpdate:value":f[3]||(f[3]=S=>e.buttonText=S)},null,8,["value"])])])):te("",!0),a("div",Us,[f[14]||(f[14]=a("div",{class:"form-item-label"},"底边距：",-1)),a("div",Ns,[a("div",Ls,[c(C,{class:"input",value:e.bottomMargin,"onUpdate:value":f[4]||(f[4]=S=>e.bottomMargin=S)},null,8,["value"]),f[13]||(f[13]=a("span",{class:"unit"},"PX",-1))])])]),a("div",Ds,[f[16]||(f[16]=a("div",{class:"form-item-label"},"右边距：",-1)),a("div",qs,[a("div",Os,[c(C,{class:"input",value:e.rightMargin,"onUpdate:value":f[5]||(f[5]=S=>e.rightMargin=S)},null,8,["value"]),f[15]||(f[15]=a("span",{class:"unit"},"PX",-1))])])]),a("div",Fs,[f[17]||(f[17]=a("div",{class:"form-item-label"},"显示未读消息数：",-1)),a("div",Vs,[c(R,{checked:e.showUnreadCount,"onUpdate:checked":f[6]||(f[6]=S=>e.showUnreadCount=S),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),a("div",js,[f[18]||(f[18]=a("div",{class:"form-item-label"},"显示新消息提示：",-1)),a("div",Hs,[c(R,{checked:e.showNewMessageTip,"onUpdate:checked":f[7]||(f[7]=S=>e.showNewMessageTip=S),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),a("div",zs,[f[20]||(f[20]=a("div",{class:"form-item-label"},null,-1)),a("div",Ws,[c(M,{type:"primary",loading:n.saveLoading,onClick:h},{default:m(()=>[...f[19]||(f[19]=[j("保存",-1)])]),_:1},8,["loading"])])])])])]),_:1})}}},Gs=se(Ks,[["__scopeId","data-v-3f90a19c"]]),Js={class:"web-app-box"},Qs={class:"box-left"},Ys={class:"box-wrapper"},Xs={class:"web-app-style form-box"},Zs={class:"window-size-box"},ei={class:"box-wrapper"},ti={class:"sdk-code"},ni={class:"box-wrapper"},oi={class:"box-wrapper"},ai={class:"box-right"},si={class:"demo-box"},ii=["src"],ri={__name:"embed-website",setup(u){const i=Ke(),{robotInfo:r,external_config_pc:n}=We(i),{getRobot:t}=i,e=ps(r.value),o=()=>{Te(e),oe.success("复制成功")},d=H(),s=ue({headTitle:n.value.headTitle,headSubTitle:n.value.headSubTitle,headImage:n.value.headImage,lang:n.value.lang,pageStyle:n.value.pageStyle,floatBtn:n.value.floatBtn,open_type:n.value.open_type,window_width:n.value.window_width,window_height:n.value.window_height}),h=ve(()=>{let{pc_domain:S,robot_key:b}=r.value;return`${S}/web/#/chat?robot_key=${b}&language=${s.lang||"zh-CN"}`});Ee(s,S=>{f(S)});const _=S=>{f(S,"updataQuickComand")},f=(S,b)=>{document.getElementById("web-preview").contentWindow.postMessage({type:b||"onPreview",data:JSON.parse(JSON.stringify(S))},"*")},w={lang:[{required:!0,message:"请选择语言",trigger:"change"}],headTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>s.headImage?Promise.resolve():Promise.reject("请上传logo")}],pageStyle:{headBackgroundColor:[{required:!0,message:"请选择颜色",trigger:"change"}]}},C=()=>{const{id:S}=r.value;s.window_width=+s.window_width||1200,s.window_height=+s.window_height||650;let b={...he(s)};On({id:S,external_config_pc:JSON.stringify(b)}).then(()=>{t(S),oe.success("保存成功")})},R=()=>{d.value.validate().then(()=>{C()}).catch(S=>{})},M=S=>{s.floatBtn={...S},R()};return(S,b)=>{const F=Lt,N=pe,y=ke,$=Ot,E=Vt,V=Ft,L=qt,q=mo("QuestionCircleOutlined"),B=Je,p=Dt,O=Ht,U=jt,G=Ln,ne=me;return D(),J("div",Js,[a("div",Qs,[a("div",Ys,[c(Be,{title:"样式设置"},{icon:m(()=>[c(F,{name:"pc",style:{"font-size":"16px",color:"#262626"}})]),action:m(()=>[c(N,{onClick:R,size:"small",type:"primary"},{default:m(()=>[...b[8]||(b[8]=[j("保存",-1)])]),_:1})]),default:m(()=>[a("div",Xs,[c(ne,{ref_key:"formRef",ref:d,layout:"vertical",model:s,rules:w},{default:m(()=>[c(y,{class:"form-item",label:"页面标题",name:"headTitle"},{default:m(()=>[c(Ne,{avatar:s.headImage,"onUpdate:avatar":b[0]||(b[0]=P=>s.headImage=P),value:s.headTitle,"onUpdate:value":b[1]||(b[1]=P=>s.headTitle=P)},null,8,["avatar","value"])]),_:1}),c(y,{class:"form-item",label:"简介",name:"headSubTitle"},{default:m(()=>[c($,{value:s.headSubTitle,"onUpdate:value":b[2]||(b[2]=P=>s.headSubTitle=P),placeholder:"简介将展示在客户端，不超过100个字符"},null,8,["value"])]),_:1}),c(y,{class:"form-item",label:"颜色",name:["pageStyle","headBackgroundColor"]},{default:m(()=>[c(ws,{value:s.pageStyle.headBackgroundColor,"onUpdate:value":b[3]||(b[3]=P=>s.pageStyle.headBackgroundColor=P)},null,8,["value"])]),_:1}),c(y,{class:"form-item",label:"语言",name:"lang"},{default:m(()=>[c(V,{style:{width:"180px"},value:s.lang,"onUpdate:value":b[4]||(b[4]=P=>s.lang=P),placeholder:"请选择语言"},{default:m(()=>[c(E,{value:"zh-CN"},{default:m(()=>[...b[9]||(b[9]=[j("简体中文",-1)])]),_:1}),c(E,{value:"en-US"},{default:m(()=>[...b[10]||(b[10]=[j("English",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),c(y,{class:"form-item",label:"网址打开方式",name:"open_type",required:""},{default:m(()=>[c(p,{value:s.open_type,"onUpdate:value":b[5]||(b[5]=P=>s.open_type=P)},{default:m(()=>[c(L,{value:1},{default:m(()=>[...b[11]||(b[11]=[j("新标签页打开",-1)])]),_:1}),c(L,{value:2},{default:m(()=>[b[13]||(b[13]=j("新窗口弹窗打开 ",-1)),c(B,{title:"仅管控PC端新窗口打开,移动端依然用新标签页打开"},{title:m(()=>[...b[12]||(b[12]=[j("prompt text",-1)])]),default:m(()=>[c(q)]),_:1})]),_:1})]),_:1},8,["value"]),s.open_type==2?(D(),X(G,{key:0},{default:m(()=>[a("div",Zs,[c(U,{align:"center",gap:8},{default:m(()=>[b[14]||(b[14]=a("div",null,"弹窗高度",-1)),c(O,{value:s.window_height,"onUpdate:value":b[6]||(b[6]=P=>s.window_height=P),min:500,max:2e3},null,8,["value"]),b[15]||(b[15]=j(" PX ",-1))]),_:1}),c(U,{align:"center",gap:8},{default:m(()=>[b[16]||(b[16]=a("div",null,"弹窗宽度",-1)),c(O,{value:s.window_width,"onUpdate:value":b[7]||(b[7]=P=>s.window_width=P),min:500,max:2e3},null,8,["value"]),b[17]||(b[17]=j(" PX ",-1))]),_:1})])]),_:1})):te("",!0)]),_:1})]),_:1},8,["model"])])]),_:1})]),a("div",ei,[c(Be,{title:"将以下代码复制到网站代码的< /body>标签之前"},{icon:m(()=>[c(F,{name:"sdk",style:{"font-size":"16px",color:"#262626"}})]),action:m(()=>[c(N,{onClick:o,size:"small"},{default:m(()=>[...b[18]||(b[18]=[j("复制",-1)])]),_:1})]),default:m(()=>[a("div",ti,[a("pre",null,[a("code",null,ae(ee(e)),1)])])]),_:1})]),a("div",ni,[c(Yn,{type:ee(r).app_id_embed,onUpdata:_},null,8,["type"])]),a("div",oi,[c(Gs,{form:s,onSave:M},null,8,["form"])])]),a("div",ai,[a("div",si,[a("iframe",{id:"web-preview",src:h.value,frameborder:"0"},null,8,ii)])])])}}},li=se(ri,[["__scopeId","data-v-1b907fa9"]]),ci={class:"wechat-app-item"},ui={class:"item-body"},di=["src"],pi={class:"app-info"},fi={class:"app-name"},_i={class:"app-desc"},hi={class:"ext-info-list"},mi={class:"ext-content"},gi={class:"ext-info-list"},vi={key:0,class:"status-block status-success"},yi={class:"status-block status-warning"},wi={class:"btn-wrapper-box"},bi={__name:"wechat-app-item",props:{item:{type:Object,default:()=>({})},app_type:{type:String,default:""},showMenu:{type:Array,default:["edit","del"]}},emits:["edit","delete","refresh"],setup(u,{emit:i}){const r=i,n=["mini_program","official_account"],t=u;function e(){r("edit",{...t.item})}function o(){r("delete",{...t.item})}function d(){r("refresh",{...t.item})}return(s,h)=>{const _=jt,f=xo,w=Un,C=Io;return D(),J("div",ci,[a("div",ui,[a("img",{class:"app-avatar",src:u.item.app_avatar,alt:""},null,8,di),a("div",pi,[a("div",fi,ae(u.item.app_name),1),a("div",_i,"Appid："+ae(u.item.app_id),1)])]),n.includes(t.app_type)?(D(),J(fe,{key:0},[a("div",hi,[a("div",mi,ae(u.item.wechat_reply_type),1)]),a("div",gi,[u.item.account_is_verify=="true"?(D(),J("div",vi,[c(ee(Dn)),h[0]||(h[0]=j(" 已认证 ",-1))])):(D(),X(_,{key:1,gap:8},{default:m(()=>[a("div",yi,[c(ee(qn)),h[1]||(h[1]=j(" 未认证 ",-1))]),a("a",{onClick:d},"刷新状态")]),_:1}))])],64)):te("",!0),u.showMenu&&u.showMenu.length?(D(),X(C,{key:1},{overlay:m(()=>[c(w,null,{default:m(()=>[u.showMenu.includes("edit")?(D(),X(f,{key:0,onClick:e},{default:m(()=>[...h[2]||(h[2]=[a("a",null,"编 辑",-1)])]),_:1})):te("",!0),u.showMenu.includes("del")?(D(),X(f,{key:1,onClick:o},{default:m(()=>[...h[3]||(h[3]=[a("a",{style:{color:"#fb363f"}},"删 除",-1)])]),_:1})):te("",!0)]),_:1})]),default:m(()=>[a("div",wi,[c(ee($o))])]),_:1})):te("",!0)])}}},Fe=se(bi,[["__scopeId","data-v-663452b6"]]),ki={class:"form-content-box"},Ci={class:"left-box"},Ai={class:"form-body"},Si={class:"footer-box"},Pt=`正在思考中，请稍后点击下方蓝字\r
获取回复👇👇👇`,Tt="👉👉点我获取回复👈👈",Mt="内容较多，点此查看下文",$i={__name:"add-unverified-alert",emits:["ok"],setup(u,{expose:i,emit:r}){const n=r,{robotInfo:t,getRobot:e}=ge("robotInfo"),o=H(!1),d=H(),s=ue({id:t.id,wechat_not_verify_hand_get_reply:Pt,wechat_not_verify_hand_get_word:Tt,wechat_not_verify_hand_get_next:Mt}),h=()=>{s.wechat_not_verify_hand_get_reply=s.wechat_not_verify_hand_get_reply||Pt,s.wechat_not_verify_hand_get_word=s.wechat_not_verify_hand_get_word||Tt,s.wechat_not_verify_hand_get_next=s.wechat_not_verify_hand_get_next||Mt,d.value.clearValidate()},_={wechat_not_verify_hand_get_reply:[{required:!0,message:"请输入手动获取回复提示语",trigger:"change"}],wechat_not_verify_hand_get_word:[{required:!0,message:"请输入手动获取回复蓝字文案",trigger:"change"}],wechat_not_verify_hand_get_next:[{required:!0,message:"请输入内容超500字截断，获取下文蓝字文案",trigger:"change"}]},f=()=>{let M={...he(s)};No(M).then(S=>{oe.success("保存成功"),C(),e(t.id),n("ok")})},w=()=>{d.value.validate().then(()=>{f()}).catch(M=>{})},C=()=>{d.value.clearValidate(),d.value.resetFields(),o.value=!1};return i({open:()=>{s.wechat_not_verify_hand_get_reply=t.wechat_not_verify_hand_get_reply||Pt,s.wechat_not_verify_hand_get_word=t.wechat_not_verify_hand_get_word||Tt,s.wechat_not_verify_hand_get_next=t.wechat_not_verify_hand_get_next||Mt,o.value=!0}}),(M,S)=>{const b=we,F=Ot,N=ke,y=ye,$=me,E=pe,V=re;return D(),X(V,{width:749,open:o.value,"onUpdate:open":S[3]||(S[3]=L=>o.value=L),title:null,wrapClassName:"remove-model-padding",footer:null},{default:m(()=>[a("div",ki,[a("div",Ci,[a("div",Ai,[S[4]||(S[4]=a("div",{class:"model-title"},"未认证公众号回复设置",-1)),c(b,{class:"zm-alert-info",message:"由于微信接口限制,未认证公众号只能在用户提问后立即回复答案。若答案生成较慢,系统将提示用户手动获取回复",type:"info"}),c($,{style:{"margin-top":"24px"},ref_key:"formRef",ref:d,layout:"vertical",model:s,rules:_},{default:m(()=>[c(N,{label:"手动获取回复提示语",name:"wechat_not_verify_hand_get_reply"},{default:m(()=>[c(F,{value:s.wechat_not_verify_hand_get_reply,"onUpdate:value":S[0]||(S[0]=L=>s.wechat_not_verify_hand_get_reply=L),placeholder:"请输入",maxLength:100,onBlur:h,"auto-size":{minRows:3,maxRows:3}},null,8,["value"])]),_:1}),c(N,{label:"手动获取回复蓝字文案",name:"wechat_not_verify_hand_get_word"},{default:m(()=>[c(y,{maxLength:100,onBlur:h,value:s.wechat_not_verify_hand_get_word,"onUpdate:value":S[1]||(S[1]=L=>s.wechat_not_verify_hand_get_word=L),placeholder:"请输入"},null,8,["value"])]),_:1}),c(N,{label:"内容超500字截断，获取下文蓝字文案",name:"wechat_not_verify_hand_get_next"},{default:m(()=>[c(y,{maxLength:100,onBlur:h,value:s.wechat_not_verify_hand_get_next,"onUpdate:value":S[2]||(S[2]=L=>s.wechat_not_verify_hand_get_next=L),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),a("div",Si,[c(E,{onClick:C},{default:m(()=>[...S[5]||(S[5]=[j("取 消",-1)])]),_:1}),c(E,{type:"primary",onClick:w},{default:m(()=>[...S[6]||(S[6]=[j("确 定",-1)])]),_:1})])]),S[7]||(S[7]=a("div",{class:"preview-box"},[a("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide1.png",alt:""})],-1))])]),_:1},8,["open"])}}},xi=se($i,[["__scopeId","data-v-9f9ceef9"]]),Ii={__name:"demo-preview-modal",setup(u,{expose:i}){const r=H(!1);return i({show:()=>{r.value=!0}}),(t,e)=>{const o=re;return D(),J("div",null,[c(o,{open:r.value,"onUpdate:open":e[0]||(e[0]=d=>r.value=d),width:746,title:"未认证公众号回复效果示例",footer:null},{default:m(()=>[...e[1]||(e[1]=[a("div",{class:"content-block"},[a("div",{class:"img-wrapper-box"},[a("div",{class:"title"},"用户咨询自动回复效果示例"),a("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide1.png",alt:""})]),a("div",{class:"img-wrapper-box"},[a("div",{class:"title"},"回复内容超长自动分段效果示例"),a("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide2.png",alt:""})])],-1)])]),_:1},8,["open"])])}}},Ei=se(Ii,[["__scopeId","data-v-dc6850a3"]]),Ri={class:"action-box"},Bi={class:"wechat-app-list"},Pi={class:"item-body"},Ti=["src"],Mi={class:"app-info"},Ui={class:"app-name"},Ni={class:"app-desc"},Li={class:"ext-info-list"},Di={key:0,class:"status-block status-success"},qi={key:1,class:"status-block status-warning"},Oi={__name:"select-wechat-app",emits:["change"],setup(u,{expose:i,emit:r}){const n=r,t=Mn(),e=wo(),o=H(!1),d=H(!1),s=H(!1),h=H({}),_=H([]);ve(()=>{let{role_permission:M,role_type:S}=e;return S==1||M.includes("OfficialAccountManage")});function f(M,S){h.value=M,w(S),o.value=!0}function w(M){M=Array.isArray(M)?M:[],d.value=!0,Ue({app_type:"official_account",app_name:""}).then(S=>{let b=S.data||[];b.forEach(F=>{F.checked=M.includes(F.app_id)}),_.value=b}).finally(()=>{d.value=!1})}function C(){s.value=!0;let M=_.value.filter(b=>b.checked),S=M.map(b=>b.app_id).toString();Fn({robot_id:h.value.id,app_id_list:S}).then(()=>{o.value=!1,n("change",M,S)}).finally(()=>{s.value=!1})}function R(){const M=t.resolve({path:"/user/official-account"});window.open(M.href,"_blank")}return i({open:f}),(M,S)=>{const b=pe,F=Eo,N=re;return D(),X(N,{open:o.value,"onUpdate:open":S[0]||(S[0]=y=>o.value=y),title:"关联公众号","confirm-loading":s.value,width:"626px",onOk:C},{default:m(()=>[d.value?(D(),X(zn,{key:0,style:{margin:"10vh 0"}})):_.value.length?(D(),J(fe,{key:1},[a("div",Ri,[c(b,{type:"primary",ghost:"",icon:ze(ee(zt)),onClick:R},{default:m(()=>[...S[1]||(S[1]=[j("添加公众号",-1)])]),_:1},8,["icon"])]),a("div",Bi,[(D(!0),J(fe,null,Ce(_.value,y=>(D(),J("div",{key:y.id,class:"wechat-app-item"},[a("div",Pi,[a("img",{class:"app-avatar",src:y.app_avatar,alt:""},null,8,Ti),a("div",Mi,[a("div",Ui,ae(y.app_name),1),a("div",Ni,"Appid："+ae(y.app_id),1)])]),a("div",Li,[y.account_is_verify=="true"?(D(),J("div",Di,[c(ee(Dn)),S[2]||(S[2]=j(" 已认证 ",-1))])):(D(),J("div",qi,[c(ee(qn)),S[3]||(S[3]=j(" 未认证 ",-1))])),c(F,{checked:y.checked,"onUpdate:checked":$=>y.checked=$},null,8,["checked","onUpdate:checked"])])]))),128))])],64)):(D(),X(Wn,{key:2,title:"暂未绑定公众号"},{desc:m(()=>[c(b,{type:"primary",onClick:R},{default:m(()=>[...S[4]||(S[4]=[j("绑定公众号",-1)])]),_:1})]),_:1}))]),_:1},8,["open","confirm-loading"])}}},Fi=se(Oi,[["__scopeId","data-v-b2e90ac5"]]),Xn="/assets/img/official_account_reply_config01-BMOrAtW5.png",Zn="/assets/img/official_account_reply_config02-DZsowVVX.png",Vi={class:"reply-config-content"},ji={class:"setting-item"},Hi={class:"setting-label"},zi={class:"switch-wrapper"},Wi={class:"switch-text"},Ki={class:"setting-item"},Gi={class:"setting-label"},Ji={class:"switch-wrapper"},Qi={class:"switch-text"},Yi={__name:"official-account-reply-config",emits:["change"],setup(u,{expose:i,emit:r}){const n=r,t=H(!1),e=H(!0),o=H(!0),d=H(null),s=(_={})=>{_.aiGenerated!==void 0&&(e.value=_.aiGenerated==1),_.typingIndicator!==void 0&&(o.value=_.typingIndicator==1),d.value=_.robotId,t.value=!0},h=async(_,f)=>{try{(await Vn({id:d.value,key:_,val:f?1:0})).code==0&&(oe.success("保存成功"),n("change"))}catch(w){console.error("保存失败:",w),oe.error("保存失败")}};return i({open:s}),(_,f)=>{const w=Je,C=Ge,R=re;return D(),X(R,{open:t.value,"onUpdate:open":f[4]||(f[4]=M=>t.value=M),title:"已认证公众号回复设置",width:480,footer:null},{default:m(()=>[a("div",Vi,[a("div",ji,[a("div",Hi,[f[6]||(f[6]=a("span",null,"回复显示内容由AI生成",-1)),c(w,null,{title:m(()=>[...f[5]||(f[5]=[a("img",{class:"tip-img",src:Xn,alt:""},null,-1)])]),default:m(()=>[c(ee(Re),{class:"info-icon"})]),_:1})]),a("div",zi,[c(C,{checked:e.value,"onUpdate:checked":f[0]||(f[0]=M=>e.value=M),onChange:f[1]||(f[1]=()=>h("show_ai_msg_gzh",e.value))},null,8,["checked"]),a("span",Wi,ae(e.value?"开":"关"),1)])]),a("div",Ki,[a("div",Gi,[f[8]||(f[8]=a("span",null,"回复时显示正在输入中",-1)),c(w,null,{title:m(()=>[...f[7]||(f[7]=[a("img",{class:"tip-img",src:Zn,alt:""},null,-1)])]),default:m(()=>[c(ee(Re),{class:"info-icon"})]),_:1})]),a("div",Ji,[c(C,{checked:o.value,"onUpdate:checked":f[2]||(f[2]=M=>o.value=M),onChange:f[3]||(f[3]=()=>h("show_typing_gzh",o.value))},null,8,["checked"]),a("span",Qi,ae(o.value?"开":"关"),1)])])])]),_:1},8,["open"])}}},Xi=se(Yi,[["__scopeId","data-v-cd8fbe2c"]]),Zi={class:"add-btn-block"},er={class:"wechat-app-list"},tr={__name:"wechat-official-account",setup(u){const{robotInfo:i,getRobot:r}=ge("robotInfo"),n=H(),t=H(!0),e=H([]);Pe(()=>{o()});const o=()=>{Ue({robot_id:i.id,app_type:"official_account",app_name:""}).then(b=>{e.value=b.data}).finally(()=>{t.value=!1})},d=()=>{n.value.open(i,e.value.map(b=>b.app_id))},s=b=>{Wt({id:b.id}).then(()=>{oe.success("刷新成功"),o()})},h=b=>{re.confirm({title:`确定移除${b.app_name}吗?`,icon:c(Me),content:"移除后，机器人无法继续回复用户消息。",okText:"确定",cancelText:"取消",onOk(){let N=e.value.filter(y=>y.app_id!=b.app_id).map(y=>y.app_id).toString();Fn({robot_id:i.id,app_id_list:N}).then(()=>{o(),oe.success("删除成功")})}})},_=H(null),f=()=>{_.value.open()},w=H(null),C=()=>{let b={robotId:i.id,aiGenerated:i.show_ai_msg_gzh,typingIndicator:i.show_typing_gzh};w.value.open(b)},R=()=>{r(i.id)},M=H(null),S=()=>{M.value.show()};return(b,F)=>{const N=we,y=pe;return D(),J("div",null,[c(N,{banner:""},{message:m(()=>[F[0]||(F[0]=j(" 支持接入未认证公众号，",-1)),a("a",{onClick:S},"查看效果示例")]),_:1}),t.value?(D(),X(zn,{key:0})):e.value.length?(D(),J(fe,{key:1},[a("div",Zi,[c(y,{onClick:d,type:"primary"},{default:m(()=>[...F[1]||(F[1]=[j("关联公众号",-1)])]),_:1}),c(y,{onClick:f,icon:c(ee(Ut))},{default:m(()=>[...F[2]||(F[2]=[j("未认证公众号回复设置",-1)])]),_:1},8,["icon"]),c(y,{onClick:C,icon:c(ee(Ut))},{default:m(()=>[...F[3]||(F[3]=[j("已认证公众号回复设置",-1)])]),_:1},8,["icon"])]),a("div",er,[(D(!0),J(fe,null,Ce(e.value,$=>(D(),X(Fe,{key:$.id,item:$,showMenu:["del"],app_type:"official_account",onDelete:h,onRefresh:s},null,8,["item"]))),128))])],64)):(D(),X(Wn,{key:2,style:{"margin-top":"20vh"},title:"暂未关联公众号"},{desc:m(()=>[c(y,{onClick:d,type:"primary"},{default:m(()=>[...F[4]||(F[4]=[j("关联公众号",-1)])]),_:1})]),_:1})),c(Fi,{ref_key:"selectAppRef",ref:n,onChange:o},null,512),c(xi,{ref_key:"addUnverifiedAlertRef",ref:_},null,512),c(Ei,{ref_key:"demoPreviewModalRef",ref:M},null,512),c(Xi,{ref_key:"replyConfigRef",ref:w,onChange:R},null,512)])}}},nr=se(tr,[["__scopeId","data-v-841ee048"]]),or={class:"add-label"},ar={__name:"add-wechat-app",props:{label:{type:String,default:""}},emits:["click"],setup(u,{emit:i}){const r=i,n=u,t=()=>{r("click")};return(e,o)=>(D(),J("div",{class:"add-wechat-app",onClick:t},[c(ee(zt),{class:"add-icon"}),a("span",or,ae(n.label),1)]))}},Xe=se(ar,[["__scopeId","data-v-7826145c"]]),sr="/assets/img/preview_02-5R4OUtDh.png",ir="/assets/img/config_preview_02-D7tQWjG-.png",rr={key:0,class:"add-wechat-app-alert"},lr={class:"alert-body"},cr={class:"form-box"},ur={class:"my-ip"},dr={class:"ip-text"},pr={key:1,class:"add-wechat-app-alert"},fr={class:"config-preview-box"},_r={class:"config-items"},hr={class:"config-item"},mr={class:"config-value"},gr={class:"config-item"},vr={class:"config-value"},yr={class:"config-item"},wr={class:"config-value"},Bn="/upload/default/mini_program_avatar.png",br={__name:"add-wechat-mini-program-alert",emits:["ok"],setup(u,{expose:i,emit:r}){const n=r,{robotInfo:t}=ge("robotInfo"),e=H(!1),o=H(1),d=H(!1),s=H(),h=ue({id:void 0,robot_id:t.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:Bn,app_type:"mini_program"}),_={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>h.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},f=ve(()=>{let $=h.id?"编辑微信小程序":"添加微信小程序",E=o.value==1?"-填写小程序开发信息":"-服务器配置";return $+E}),w=({file:$,url:E})=>{h.app_avatar=$,h.app_avatar_url=E},C=ue({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let $={...he(h)};delete $.app_avatar_url,Qe($).then(E=>{Object.assign(C,E.data),o.value=2,oe.success("保存成功"),n("ok")})},M=()=>{s.value.validate().then(()=>{R()}).catch($=>{})},S=()=>{e.value=!1},b=()=>{s.value.clearValidate(),s.value.resetFields(),e.value=!1},F=$=>{Te($),oe.success("复制成功")},N=()=>{F(t.wechat_ip)};return i({open:$=>{$?($.app_avatar_url=$.app_avatar,$.app_avatar=""):$={id:void 0,robot_id:t.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:Bn,app_type:"mini_program",wechat_ip:t.wechat_ip},o.value=1,Object.assign(h,$),e.value=!0}}),($,E)=>{const V=pe,L=we,q=ke,B=ye,p=me,O=re;return D(),X(O,{width:"1168px",open:e.value,"onUpdate:open":E[7]||(E[7]=U=>e.value=U),title:f.value,onCancel:b},{footer:m(()=>[o.value===1?(D(),X(V,{key:"back",onClick:b},{default:m(()=>[...E[8]||(E[8]=[j("取 消",-1)])]),_:1})):te("",!0),o.value===1?(D(),X(V,{key:"submit",type:"primary",loading:d.value,onClick:M},{default:m(()=>[...E[9]||(E[9]=[j("保存并进入下一步",-1)])]),_:1},8,["loading"])):te("",!0),o.value===2?(D(),X(V,{key:"submit",type:"primary",loading:d.value,onClick:S},{default:m(()=>[...E[10]||(E[10]=[j("已完成配置",-1)])]),_:1},8,["loading"])):te("",!0)]),default:m(()=>[o.value===1?(D(),J("div",rr,[c(L,{class:"tip-alert",message:"进入微信公众号后台（https://developers.weixin.qq.com/console/product），左上角“我的业务和服务”选择”小程序“后在【基础信息中】获取开发者信息",type:"info","show-icon":""}),a("div",lr,[a("div",cr,[c(p,{ref_key:"formRef",ref:s,layout:"vertical",model:h,rules:_},{default:m(()=>[c(q,{label:"小程序头像/名称",name:"app_name"},{default:m(()=>[c(Ne,{autoUpload:!1,avatar:h.app_avatar_url,"onUpdate:avatar":E[0]||(E[0]=U=>h.app_avatar_url=U),value:h.app_name,"onUpdate:value":E[1]||(E[1]=U=>h.app_name=U),valueModifiers:{trim:!0},placeholder:"请输入您的小程序名称",onChangeAvatar:w},null,8,["avatar","value"])]),_:1}),c(q,{label:"AppId",name:"app_id"},{default:m(()=>[c(B,{value:h.app_id,"onUpdate:value":E[2]||(E[2]=U=>h.app_id=U),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),c(q,{label:"AppSecret",name:"app_secret"},{default:m(()=>[c(B,{value:h.app_secret,"onUpdate:value":E[3]||(E[3]=U=>h.app_secret=U),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1}),c(q,{label:"将以下IP添加到小程序IP白名单中，如未开启ip白名单保护可不添加",name:"wechat_ip",required:""},{default:m(()=>[a("div",ur,[a("span",dr,ae(ee(t).wechat_ip),1),a("a",{class:"copy-btn",onClick:N},"复 制")])]),_:1})]),_:1},8,["model"])]),E[11]||(E[11]=a("div",{class:"preview-box"},[a("img",{class:"preview-img",src:sr})],-1))])])):te("",!0),o.value===2?(D(),J("div",pr,[c(L,{class:"tip-alert",message:"进入微信公众号后台（https://developers.weixin.qq.com/console/product），在【基础信息-域名与消息推送配置-消息推送】中配置并启用服务器配置。请按照下图配置",type:"info","show-icon":""}),a("div",fr,[a("div",_r,[a("div",hr,[a("span",mr,ae(C.push_url),1),a("span",{class:"copy-btn",onClick:E[4]||(E[4]=U=>F(C.push_url))},"复制")]),a("div",gr,[a("span",vr,ae(C.push_token),1),a("span",{class:"copy-btn",onClick:E[5]||(E[5]=U=>F(C.push_token))},"复制")]),a("div",yr,[a("span",wr,ae(C.push_aeskey),1),a("span",{class:"copy-btn",onClick:E[6]||(E[6]=U=>F(C.push_aeskey))},"复制")])]),E[12]||(E[12]=a("img",{class:"config-preview-img",src:ir},null,-1))])])):te("",!0)]),_:1},8,["open","title"])}}},kr=se(br,[["__scopeId","data-v-69ff396c"]]),Cr={class:"reply-config-content"},Ar={class:"setting-item"},Sr={class:"setting-label"},$r={class:"switch-wrapper"},xr={class:"switch-text"},Ir={class:"setting-item"},Er={class:"setting-label"},Rr={class:"switch-wrapper"},Br={class:"switch-text"},Pr={__name:"mini-program-reply-config",emits:["change"],setup(u,{expose:i,emit:r}){const n=r,t=H(!1),e=H(!0),o=H(!0),d=H(null),s=(_={})=>{_.aiGenerated!==void 0&&(e.value=_.aiGenerated==1),_.typingIndicator!==void 0&&(o.value=_.typingIndicator==1),d.value=_.robotId,t.value=!0},h=async(_,f)=>{try{(await Vn({id:d.value,key:_,val:f?1:0})).code==0&&(oe.success("保存成功"),n("change"))}catch(w){console.error("保存失败:",w),oe.error("保存失败")}};return i({open:s}),(_,f)=>{const w=Je,C=Ge,R=re;return D(),X(R,{open:t.value,"onUpdate:open":f[4]||(f[4]=M=>t.value=M),title:"小程序回复设置",width:480,footer:null},{default:m(()=>[a("div",Cr,[a("div",Ar,[a("div",Sr,[f[6]||(f[6]=a("span",null,"回复显示内容由AI生成",-1)),c(w,null,{title:m(()=>[...f[5]||(f[5]=[a("img",{class:"tip-img",src:Xn,alt:""},null,-1)])]),default:m(()=>[c(ee(Re),{class:"info-icon"})]),_:1})]),a("div",$r,[c(C,{checked:e.value,"onUpdate:checked":f[0]||(f[0]=M=>e.value=M),onChange:f[1]||(f[1]=()=>h("show_ai_msg_mini",e.value))},null,8,["checked"]),a("span",xr,ae(e.value?"开":"关"),1)])]),a("div",Ir,[a("div",Er,[f[8]||(f[8]=a("span",null,"回复时显示正在输入中",-1)),c(w,null,{title:m(()=>[...f[7]||(f[7]=[a("img",{class:"tip-img",src:Zn,alt:""},null,-1)])]),default:m(()=>[c(ee(Re),{class:"info-icon"})]),_:1})]),a("div",Rr,[c(C,{checked:o.value,"onUpdate:checked":f[2]||(f[2]=M=>o.value=M),onChange:f[3]||(f[3]=()=>h("show_typing_mini",o.value))},null,8,["checked"]),a("span",Br,ae(o.value?"开":"关"),1)])])])]),_:1},8,["open"])}}},Tr=se(Pr,[["__scopeId","data-v-cb84e90d"]]),Mr={class:""},Ur={class:"add-btn-block"},Nr={class:"wechat-app-list"},Lr={__name:"wechat-mini-program",setup(u){const{robotInfo:i,getRobot:r}=ge("robotInfo"),n=H(),t=H([]),e=()=>{Ue({robot_id:i.id,app_type:"mini_program",app_name:""}).then(R=>{t.value=R.data})},o=()=>{n.value.open()},d=R=>{let M=3;const S=re.confirm({title:`确定移除${R.app_name}吗?`,icon:c(Me),content:"移除后，机器人无法继续回复用户消息。",okText:M+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Ye({id:R.id}).then(()=>{e(),oe.success("删除成功")})},onCancel(){}});let b=setInterval(()=>{M==1?(S.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(b),b=void 0):(M-=1,S.update({okText:M+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},s=R=>{R.wechat_ip=i.wechat_ip,n.value.open({...R})},h=R=>{Wt({id:R.id}).then(()=>{oe.success("刷新成功"),e()})},_=()=>{e()},f=H(null),w=()=>{let R={robotId:i.id,aiGenerated:i.show_ai_msg_mini,typingIndicator:i.show_typing_mini};f.value.open(R)},C=()=>{r(i.id)};return Pe(()=>{e()}),(R,M)=>{const S=pe;return D(),J("div",Mr,[a("div",Ur,[c(S,{onClick:w,icon:c(ee(Ut))},{default:m(()=>[...M[0]||(M[0]=[j("小程序回复设置",-1)])]),_:1},8,["icon"])]),a("div",Nr,[c(Xe,{label:"绑定微信小程序",onClick:o}),(D(!0),J(fe,null,Ce(t.value,b=>(D(),X(Fe,{key:b.id,app_type:"mini_program",item:b,onEdit:s,onDelete:d,onRefresh:h},null,8,["item"]))),128))]),c(kr,{ref_key:"addAppAlertRef",ref:n,onOk:_},null,512),c(Tr,{ref_key:"replyConfigRef",ref:f,onChange:C},null,512)])}}},Dr=se(Lr,[["__scopeId","data-v-d7aedb06"]]),qr="/assets/img/preview_03-DXz9-3qW.png",Or="/assets/img/config_preview_03-DN1fPWUm.png",Fr={key:0,class:"add-wechat-app-alert"},Vr={class:"alert-body"},jr={class:"form-box"},Hr={key:1,class:"add-wechat-app-alert"},zr={class:"config-preview-box"},Wr={class:"config-items"},Kr={class:"config-item"},Gr={class:"config-value"},Jr={class:"config-item"},Qr={class:"config-value"},Yr={class:"config-item"},Xr={class:"config-value"},Pn="/upload/default/wechat_kefu_avatar.png",Zr={__name:"add-wechat-customer-service-alert",emits:["ok"],setup(u,{expose:i,emit:r}){const n=r,{robotInfo:t}=ge("robotInfo"),e=H(!1),o=H(1),d=H(!1),s=H(),h=ue({id:void 0,robot_id:t.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:Pn,app_type:"wechat_kefu"}),_={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>h.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},f=ve(()=>{let N=h.id?"编辑微信客服":"添加微信客服",y=o.value==1?"-服务器配置":"-填写微信客服开发信息";return N+y}),w=({file:N,url:y})=>{h.app_avatar=N,h.app_avatar_url=y},C=ue({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let N={...he(h)};delete N.app_avatar_url,Qe(N).then(y=>{Object.assign(C,y.data),o.value=2,oe.success("保存成功"),n("ok"),e.value=!1})},M=()=>{s.value.validate().then(()=>{R()}).catch(N=>{})},S=()=>{s.value&&(s.value.clearValidate(),s.value.resetFields()),e.value=!1},b=N=>{Te(N),oe.success("复制成功")};return i({open:N=>{N?(N.app_avatar_url=N.app_avatar,N.app_avatar=""):N={id:void 0,robot_id:t.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:Pn,app_type:"wechat_kefu",wechat_ip:t.wechat_ip},o.value=1,Object.assign(h,N),e.value=!0}}),(N,y)=>{const $=pe,E=we,V=ke,L=ye,q=me,B=re;return D(),X(B,{width:"1168px",open:e.value,"onUpdate:open":y[8]||(y[8]=p=>e.value=p),title:f.value,onCancel:S},{footer:m(()=>[c($,{key:"back",onClick:S},{default:m(()=>[...y[9]||(y[9]=[j("取 消",-1)])]),_:1}),o.value===1?(D(),X($,{key:"submit",type:"primary",loading:d.value,onClick:y[0]||(y[0]=p=>o.value=2)},{default:m(()=>[...y[10]||(y[10]=[j("保存并进入下一步",-1)])]),_:1},8,["loading"])):te("",!0),o.value===2?(D(),X($,{key:"submit",type:"primary",loading:d.value,onClick:M},{default:m(()=>[...y[11]||(y[11]=[j("已完成配置",-1)])]),_:1},8,["loading"])):te("",!0)]),default:m(()=>[o.value===2?(D(),J("div",Fr,[c(E,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入后获取开发者信息",type:"info","show-icon":""}),a("div",Vr,[a("div",jr,[c(q,{ref_key:"formRef",ref:s,layout:"vertical",model:h,rules:_},{default:m(()=>[c(V,{label:"企业头像/名称",name:"app_name"},{default:m(()=>[c(Ne,{autoUpload:!1,avatar:h.app_avatar_url,"onUpdate:avatar":y[1]||(y[1]=p=>h.app_avatar_url=p),value:h.app_name,"onUpdate:value":y[2]||(y[2]=p=>h.app_name=p),valueModifiers:{trim:!0},placeholder:"请输入您的企业名称",onChangeAvatar:w},null,8,["avatar","value"])]),_:1}),c(V,{label:"企业id",name:"app_id"},{default:m(()=>[c(L,{value:h.app_id,"onUpdate:value":y[3]||(y[3]=p=>h.app_id=p),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),c(V,{label:"企业Secret",name:"app_secret"},{default:m(()=>[c(L,{value:h.app_secret,"onUpdate:value":y[4]||(y[4]=p=>h.app_secret=p),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),y[12]||(y[12]=a("div",{class:"preview-box"},[a("img",{class:"preview-img",src:qr})],-1))])])):te("",!0),o.value===1?(D(),J("div",Hr,[c(E,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入。请按照下图配置",type:"info","show-icon":""}),a("div",zr,[a("div",Wr,[a("div",Kr,[a("span",Gr,ae(ee(t).push_wechat_kefu),1),a("span",{class:"copy-btn",onClick:y[5]||(y[5]=p=>b(ee(t).push_wechat_kefu))},"复制")]),a("div",Jr,[a("span",Qr,ae(ee(t).push_token),1),a("span",{class:"copy-btn",onClick:y[6]||(y[6]=p=>b(ee(t).push_token))},"复制")]),a("div",Yr,[a("span",Xr,ae(ee(t).push_aeskey),1),a("span",{class:"copy-btn",onClick:y[7]||(y[7]=p=>b(ee(t).push_aeskey))},"复制")])]),y[13]||(y[13]=a("img",{class:"config-preview-img",src:Or},null,-1))])])):te("",!0)]),_:1},8,["open","title"])}}},el=se(Zr,[["__scopeId","data-v-732d0ea4"]]),tl={class:""},nl={class:"wechat-app-list"},ol={__name:"wechat-customer-service",setup(u){const{robotInfo:i}=ge("robotInfo"),r=H(),n=H([]),t=()=>{Ue({robot_id:i.id,app_type:"wechat_kefu",app_name:""}).then(_=>{n.value=_.data})},e=()=>{r.value.open()},o=_=>{let f=3;const w=re.confirm({title:`确定移除${_.app_name}吗?`,icon:c(Me),content:"移除后，机器人无法继续回复用户消息。",okText:f+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Ye({id:_.id}).then(()=>{t(),oe.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{f==1?(w.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(f-=1,w.update({okText:f+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},d=_=>{_.wechat_ip=i.wechat_ip,r.value.open({..._})},s=_=>{Wt({id:_.id}).then(()=>{oe.success("刷新成功"),t()})},h=()=>{t()};return Pe(()=>{t()}),(_,f)=>{const w=we;return D(),J("div",tl,[c(w,{class:"tip-alert",message:"绑定微信客服，用户通过微信客服咨询时由机器人自动回复",type:"info","show-icon":""}),a("div",nl,[c(Xe,{label:"绑定微信客服",onClick:e}),(D(!0),J(fe,null,Ce(n.value,C=>(D(),X(Fe,{key:C.id,item:C,app_type:"wechat_kefu",onEdit:d,onDelete:o,onRefresh:s},null,8,["item"]))),128))]),c(el,{ref_key:"addAppAlertRef",ref:r,onOk:h},null,512)])}}},al=se(ol,[["__scopeId","data-v-f5702e86"]]),sl="/assets/img/feishu-example01-B-07FRqg.png",il="/assets/img/feishu-example02-CpOIEbAr.png",rl="/assets/img/feishu-example03--Ub5FK6L.png",ll={key:0,class:"add-wechat-app-alert"},cl={class:"alert-body"},ul={class:"form-box"},dl={class:"preview-box"},pl={key:1,class:"add-wechat-app-alert"},fl={class:"config-items"},_l={class:"config-item"},hl={class:"config-value"},ml="/upload/default/feishu_robot_avatar.png",gl={__name:"add-feishu-alert",emits:["ok"],setup(u,{expose:i,emit:r}){const n=r,{robotInfo:t}=ge("robotInfo"),e=H(!1),o=H(1),d=H(!1),s=H(),h={id:void 0,robot_id:t.id,app_type:"feishu_robot",app_avatar:"",app_avatar_url:ml,app_name:"",app_id:"",app_secret:"",encrypt_key:"",verification_token:""},_=ue({}),f={app_name:[{required:!0,message:"请输入您的机器人名称",trigger:"change"},{trigger:"change",validator:()=>_.app_avatar_url?Promise.resolve():Promise.reject("请上传机器人头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的Api Secret",trigger:"change"}],encrypt_key:[{required:!0,message:"请输入您的Encrypt Key",trigger:"change"}],verification_token:[{required:!0,message:"请输入您的Verification Token",trigger:"change"}]},w=({file:y,url:$})=>{_.app_avatar=y,_.app_avatar_url=$},C=ue({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let y={...he(_)};delete y.app_avatar_url,Qe(y).then($=>{Object.assign(C,$.data),o.value=2,oe.success("保存成功"),n("ok")})},M=()=>{s.value.validate().then(()=>{R()}).catch(y=>{})},S=()=>{e.value=!1},b=()=>{s.value.clearValidate(),s.value.resetFields(),e.value=!1},F=y=>{Te(y),oe.success("复制成功")};return i({open:y=>{y?(y.app_avatar_url=y.app_avatar,y.app_avatar=""):y=JSON.parse(JSON.stringify(h)),o.value=1,Object.assign(_,y),e.value=!0}}),(y,$)=>{const E=pe,V=we,L=ke,q=ye,B=me,p=Ro,O=re;return D(),X(O,{width:"1000px",open:e.value,"onUpdate:open":$[7]||($[7]=U=>e.value=U),title:"配置飞书机器人",onCancel:b},{footer:m(()=>[o.value===1?(D(),X(E,{key:"back",onClick:b},{default:m(()=>[...$[8]||($[8]=[j("取 消",-1)])]),_:1})):te("",!0),o.value===1?(D(),X(E,{key:"submit",type:"primary",loading:d.value,onClick:M},{default:m(()=>[...$[9]||($[9]=[j("保存并进入下一步 ",-1)])]),_:1},8,["loading"])):te("",!0),o.value===2?(D(),X(E,{key:"submit",type:"primary",loading:d.value,onClick:S},{default:m(()=>[...$[10]||($[10]=[j("已完成配置",-1)])]),_:1},8,["loading"])):te("",!0)]),default:m(()=>[o.value===1?(D(),J("div",ll,[c(V,{class:"tip-alert",type:"info","show-icon":""},{message:m(()=>[...$[11]||($[11]=[a("div",null,[j("登录飞书开放后台，按照文档完成配置井发布应用 "),a("a",{href:"https://open.feishu.cn",target:"_blank"},"登录后台"),j("，"),a("a",{href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/cpoq2kmobhgap70p?singleDoc#",target:"_blank"},"如何配置？")],-1),a("div",null,"应用添加完成后，复制APPID 和API sercet,加密信息：Encrypt Key , Verification Token，填写到以下配置中",-1)])]),_:1}),a("div",cl,[a("div",ul,[c(B,{ref_key:"formRef",ref:s,layout:"vertical",model:_,rules:f},{default:m(()=>[c(L,{label:"机器人头像/名称",name:"app_name"},{default:m(()=>[c(Ne,{autoUpload:!1,avatar:_.app_avatar_url,"onUpdate:avatar":$[0]||($[0]=U=>_.app_avatar_url=U),value:_.app_name,"onUpdate:value":$[1]||($[1]=U=>_.app_name=U),valueModifiers:{trim:!0},placeholder:"请输入您的机器人名称",onChangeAvatar:w},null,8,["avatar","value"])]),_:1}),c(L,{label:"APPID",name:"app_id"},{default:m(()=>[c(q,{value:_.app_id,"onUpdate:value":$[2]||($[2]=U=>_.app_id=U),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),c(L,{label:"API Secret",name:"app_secret"},{default:m(()=>[c(q,{value:_.app_secret,"onUpdate:value":$[3]||($[3]=U=>_.app_secret=U),valueModifiers:{trim:!0},placeholder:"请输入您的APP Secret"},null,8,["value"])]),_:1}),c(L,{label:"Encrypt Key",name:"encrypt_key"},{default:m(()=>[c(q,{value:_.encrypt_key,"onUpdate:value":$[4]||($[4]=U=>_.encrypt_key=U),valueModifiers:{trim:!0},placeholder:"请输入您的Encrypt Key"},null,8,["value"])]),_:1}),c(L,{label:"Verification Token",name:"verification_token"},{default:m(()=>[c(q,{value:_.verification_token,"onUpdate:value":$[5]||($[5]=U=>_.verification_token=U),valueModifiers:{trim:!0},placeholder:"请输入您的Verification Token"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),a("div",dl,[c(p,null,{default:m(()=>[...$[12]||($[12]=[a("div",null,[a("img",{class:"preview-img",src:sl})],-1),a("div",null,[a("img",{class:"preview-img",src:il})],-1)])]),_:1})])])])):te("",!0),o.value===2?(D(),J("div",pl,[c(V,{class:"tip-alert",message:"复制以下htp地址到应用-事件与回调>订阅方式-选择梅事件发送开发者服务器的请求地址中",type:"info","show-icon":""}),a("div",fl,[a("div",_l,[a("span",hl,ae(C.push_url),1),a("span",{class:"copy-btn",onClick:$[6]||($[6]=U=>F(C.push_url))},"复制")])]),$[13]||($[13]=a("div",{class:"config-preview-box"},[a("img",{class:"config-preview-img",src:rl})],-1))])):te("",!0)]),_:1},8,["open"])}}},vl=se(gl,[["__scopeId","data-v-1a967884"]]),yl={class:""},wl={class:"wechat-app-list"},bl={__name:"feishu-robot",setup(u){const{robotInfo:i}=ge("robotInfo"),r=H(),n=H([]),t=()=>{Ue({robot_id:i.id,app_type:"feishu_robot",app_name:""}).then(h=>{n.value=h.data})},e=()=>{r.value.open()},o=h=>{let _=3;const f=re.confirm({title:`确定移除${h.app_name}吗?`,icon:c(Me),content:"移除后，机器人无法继续回复用户消息。",okText:_+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Ye({id:h.id}).then(()=>{t(),oe.success("删除成功")})},onCancel(){}});let w=setInterval(()=>{_==1?(f.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(w),w=void 0):(_-=1,f.update({okText:_+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},d=h=>{h.wechat_ip=i.wechat_ip,r.value.open({...h})},s=()=>{t()};return Pe(()=>{t()}),(h,_)=>{const f=we;return D(),J("div",yl,[c(f,{class:"tip-alert",type:"info","show-icon":""},{message:m(()=>[..._[0]||(_[0]=[j("绑定飞书智能机器人，员工可在飞书单聊或者群聊给飞书机器人发送消息时由机器人自动回复",-1)])]),_:1}),a("div",wl,[c(Xe,{label:"绑定飞书智能机器人",onClick:e}),(D(!0),J(fe,null,Ce(n.value,w=>(D(),X(Fe,{key:w.id,item:w,onEdit:d,onDelete:o},null,8,["item"]))),128))]),c(vl,{ref_key:"addAppAlertRef",ref:r,onOk:s},null,512)])}}},kl=se(bl,[["__scopeId","data-v-a5805f01"]]),Cl="/assets/img/ding-example01-DNWGJGuL.png",Al="/assets/img/ding-example02-CveyoALn.png",Sl={key:0,class:"add-wechat-app-alert"},$l={class:"alert-body"},xl={class:"form-box"},Il={key:1,class:"add-wechat-app-alert"},El={class:"config-items"},Rl={class:"config-item"},Bl={class:"config-value"},Pl="/upload/default/dingtalk_robot_avatar.png",Tl={__name:"add-dingding-alert",emits:["ok"],setup(u,{expose:i,emit:r}){const n=r,{robotInfo:t}=ge("robotInfo"),e=H(!1),o=H(1),d=H(!1),s=H(),h={id:void 0,robot_id:t.id,app_type:"dingtalk_robot",app_avatar:"",app_avatar_url:Pl,app_name:"",app_id:"",app_secret:""},_=ue({}),f={app_name:[{required:!0,message:"请输入您的机器人名称",trigger:"change"},{trigger:"change",validator:()=>_.app_avatar_url?Promise.resolve():Promise.reject("请上传机器人头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的Api Secret",trigger:"change"}]},w=({file:y,url:$})=>{_.app_avatar=y,_.app_avatar_url=$},C=ue({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let y={...he(_)};delete y.app_avatar_url,Qe(y).then($=>{Object.assign(C,$.data),o.value=2,oe.success("保存成功"),n("ok")})},M=()=>{s.value.validate().then(()=>{R()}).catch(y=>{})},S=()=>{e.value=!1},b=()=>{s.value.clearValidate(),s.value.resetFields(),e.value=!1},F=y=>{Te(y),oe.success("复制成功")};return i({open:y=>{y?(y.app_avatar_url=y.app_avatar,y.app_avatar=""):y=JSON.parse(JSON.stringify(h)),o.value=1,Object.assign(_,y),e.value=!0}}),(y,$)=>{const E=pe,V=we,L=ke,q=ye,B=me,p=re;return D(),X(p,{width:"1000px",open:e.value,"onUpdate:open":$[5]||($[5]=O=>e.value=O),title:"配置钉钉机器人",onCancel:b},{footer:m(()=>[o.value===1?(D(),X(E,{key:"back",onClick:b},{default:m(()=>[...$[6]||($[6]=[j("取 消",-1)])]),_:1})):te("",!0),o.value===1?(D(),X(E,{key:"submit",type:"primary",loading:d.value,onClick:M},{default:m(()=>[...$[7]||($[7]=[j("保存并进入下一步 ",-1)])]),_:1},8,["loading"])):te("",!0),o.value===2?(D(),X(E,{key:"submit",type:"primary",loading:d.value,onClick:S},{default:m(()=>[...$[8]||($[8]=[j("已完成配置",-1)])]),_:1},8,["loading"])):te("",!0)]),default:m(()=>[o.value===1?(D(),J("div",Sl,[c(V,{class:"tip-alert",type:"info","show-icon":""},{message:m(()=>[...$[9]||($[9]=[a("div",null,[j("登录钉钉开放后台，按照文档完成配置井发布应用 "),a("a",{href:"https://open.dingtalk.com/",target:"_blank"},"登录后台"),j("，"),a("a",{href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/cou9iaitt0v2pe5v?singleDoc#",target:"_blank"},"如何配置？")],-1),a("div",null,"应用添加完成后，复制Client ID 和API Client Secret填写到以下配置中",-1)])]),_:1}),a("div",$l,[a("div",xl,[c(B,{ref_key:"formRef",ref:s,layout:"vertical",model:_,rules:f},{default:m(()=>[c(L,{label:"机器人头像/名称",name:"app_name"},{default:m(()=>[c(Ne,{autoUpload:!1,avatar:_.app_avatar_url,"onUpdate:avatar":$[0]||($[0]=O=>_.app_avatar_url=O),value:_.app_name,"onUpdate:value":$[1]||($[1]=O=>_.app_name=O),valueModifiers:{trim:!0},placeholder:"请输入您的机器人名称",onChangeAvatar:w},null,8,["avatar","value"])]),_:1}),c(L,{label:"Client ID",name:"app_id"},{default:m(()=>[c(q,{value:_.app_id,"onUpdate:value":$[2]||($[2]=O=>_.app_id=O),valueModifiers:{trim:!0},placeholder:"请输入您的Client ID"},null,8,["value"])]),_:1}),c(L,{label:"Client Secret",name:"app_secret"},{default:m(()=>[c(q,{value:_.app_secret,"onUpdate:value":$[3]||($[3]=O=>_.app_secret=O),valueModifiers:{trim:!0},placeholder:"请输入您的Client Secret"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),$[10]||($[10]=a("div",{class:"preview-box"},[a("img",{class:"preview-img",src:Cl})],-1))])])):te("",!0),o.value===2?(D(),J("div",Il,[c(V,{class:"tip-alert",message:"复制以下http地址，填写钉钉应用详情>应用能力>机器人配置中的消息接收模式-选择HTTP模式的消息接收地址",type:"info","show-icon":""}),a("div",El,[a("div",Rl,[a("span",Bl,ae(C.push_url),1),a("span",{class:"copy-btn",onClick:$[4]||($[4]=O=>F(C.push_url))},"复制")])]),$[11]||($[11]=a("div",{class:"config-preview-box"},[a("img",{class:"config-preview-img",src:Al})],-1))])):te("",!0)]),_:1},8,["open"])}}},Ml=se(Tl,[["__scopeId","data-v-22893492"]]),Ul={class:""},Nl={class:"wechat-app-list"},Ll={__name:"dingding-robot",setup(u){const{robotInfo:i}=ge("robotInfo"),r=H(),n=H([]),t=()=>{Ue({robot_id:i.id,app_type:"dingtalk_robot",app_name:""}).then(h=>{n.value=h.data})},e=()=>{r.value.open()},o=h=>{let _=3;const f=re.confirm({title:`确定移除${h.app_name}吗?`,icon:c(Me),content:"移除后，机器人无法继续回复用户消息。",okText:_+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Ye({id:h.id}).then(()=>{t(),oe.success("删除成功")})},onCancel(){}});let w=setInterval(()=>{_==1?(f.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(w),w=void 0):(_-=1,f.update({okText:_+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},d=h=>{h.wechat_ip=i.wechat_ip,r.value.open({...h})},s=()=>{t()};return Pe(()=>{t()}),(h,_)=>{const f=we;return D(),J("div",Ul,[c(f,{class:"tip-alert",type:"info","show-icon":""},{message:m(()=>[..._[0]||(_[0]=[j("绑定钉钉机器人后，客户通过单聊或者群聊和钉钉机器人聊天，可使用当前机器人回答的内容自动回复",-1)])]),_:1}),a("div",Nl,[c(Xe,{label:"绑定钉钉机器人",onClick:e}),(D(!0),J(fe,null,Ce(n.value,w=>(D(),X(Fe,{key:w.id,item:w,onEdit:d,onDelete:o},null,8,["item"]))),128))]),c(Ml,{ref_key:"addAppAlertRef",ref:r,onOk:s},null,512)])}}},Dl=se(Ll,[["__scopeId","data-v-b8c3d6d6"]]),ql={class:"external-services-page"},Ol={class:"page-header"},Fl={class:"page-body"},Vl={class:"scroll-box"},Tn="/robot/config/external-services/activeKey",jl={__name:"index",setup(u){const i=Ke(),{robotInfo:r}=We(i),{getRobot:n}=i,t={WebAPP:ds,EmbedWebsite:li,WeChatOfficialAccount:nr,WeChatMiniProgram:Dr,WeChatCustomerService:al,FeishuRobot:kl,DingDingRobot:Dl},e=H(localStorage.getItem(Tn)||"WebAPP"),o=d=>{e.value=d.id,localStorage.setItem(Tn,e.value)};return go("robotInfo",{robotInfo:r.value,getRobot:n}),(d,s)=>(D(),J("div",ql,[a("div",Ol,[c(Fo,{onChange:o,value:e.value,"onUpdate:value":s[0]||(s[0]=h=>e.value=h)},null,8,["value"])]),a("div",Fl,[a("div",Vl,[(D(),X(vo(t[e.value])))])])]))}},rc=se(jl,[["__scopeId","data-v-b148fd84"]]);export{rc as default};
