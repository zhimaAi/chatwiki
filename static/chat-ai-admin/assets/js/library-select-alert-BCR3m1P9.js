import{_ as Q}from"./cu-scroll-CpIj948h.js";import{u as X,A as Y,ai as Z}from"../../index-DSFcP5NQ.js";import{u as ee}from"./robot-CIzNpArp.js";import{_ as te}from"./emoji-mart-BBMRoEa3.js";import{I as se,W as ae,m as oe,B as le,au as ne,ag as ce,N as ie,M as re,b as _e}from"./ui-antd-Dl1wwwCD.js";import{E as de,r as p,c as ue,e as pe,b as i,t as r,p as t,y as c,v as a,u as o,a as u,F as B,l as N,h as C,_ as f,q as k}from"./vue-chunks-BdaA73Wf.js";const he={class:"library-checkbox-box"},ye={class:"list-group-box"},be={class:"group-list-box"},fe={class:"main-title-block"},ge={style:{"margin-bottom":"16px"}},ve={class:"classify-box"},me=["onClick"],ke={class:"classify-title"},xe={class:"right-content"},Le={class:"list-item-box"},Ce={class:"alert-box"},we={class:"btn-box"},Se=["onClick"],Be={class:"avatar-box"},Ne=["src"],Ie={class:"info-content-box"},Ae={class:"title-info-block"},Ve={key:0,class:"type-tag"},Ee={key:1,class:"type-tag"},Ge={key:2,class:"type-tag"},Oe={key:3,class:"type-tag"},Re={class:"desc-info-block"},Te={class:"check-block"},We={class:"footer-box"},$e={__name:"library-select-alert",props:{showWxType:{type:Boolean,default:!1}},emits:["change"],setup(I,{expose:A,emit:V}){const E=ee(),{robotInfo:w}=E,{t:l}=X("views.robot.robot-config.basic-config.components.associated-knowledge-base.library-select-alert"),G=V,O=I,_=de({indeterminate:!1,checkAll:!1,checkedList:[]}),h=p(""),S=p([]),R=()=>{Z().then(n=>{let s=n.data||[],d=0;s.forEach(v=>{d+=+v.total}),S.value=[{group_name:l("group_all"),total:d,id:""},...s]})},T=n=>{h.value=n.id,g()},y=p(!1),W=n=>{h.value="",g(),R(),_.checkedList=n,y.value=!0},$=()=>{y.value=!1,F()},x=p(""),q=()=>{g()},L=p([]),z=ue(()=>O.showWxType?L.value:L.value.filter(n=>n.type!=3)),F=()=>{G("change",[..._.checkedList])},g=async()=>{b.value=!0;const n=await Y({library_name:x.value,type:"",show_open_docs:1});if(b.value=!1,n){let s=n.data||[];h.value!=""&&(s=s.filter(d=>d.group_id==h.value)),L.value=s}},M=n=>{let s=n.id;w.default_library_id!=s&&(_.checkedList.includes(s)?_.checkedList=_.checkedList.filter(d=>d!=s):_.checkedList.push(s))},b=p(!1),U=async()=>{b.value=!0,await g(),b.value=!1,_e.success(l("msg_refresh_success"))},D=()=>{window.open("/#/library/list")};return A({open:W}),(n,s)=>{const d=se,v=Q,K=oe,m=le,j=ie,H=ce,J=re;return i(),pe(J,{width:916,open:y.value,"onUpdate:open":s[2]||(s[2]=e=>y.value=e),wrapClassName:"correlation-library-modal",title:null,footer:null},{default:r(()=>[t("div",he,[t("div",ye,[t("div",be,[t("div",fe,a(o(l)("title_associate_library")),1),t("div",ge,[c(d,{style:{width:"216px"},value:x.value,"onUpdate:value":s[0]||(s[0]=e=>x.value=e),placeholder:o(l)("ph_search_library_name"),onChange:q},{suffix:r(()=>[c(o(ae),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value","placeholder"])]),c(v,{style:{"padding-right":"16px",height:"480px"}},{default:r(()=>[t("div",ve,[(i(!0),u(B,null,N(S.value,e=>(i(),u("div",{class:C(["classify-item",{active:e.id==h.value}]),onClick:P=>T(e),key:e.id},[t("div",ke,a(e.group_name),1),t("div",xe,[t("div",{class:C(["num",{"num-block":e.id<=0}])},a(e.total),3)])],10,me))),128))])]),_:1})]),t("div",Le,[t("div",Ce,[c(K,{class:"zm-alert-info",message:o(l)("msg_select_library_tips"),type:"info"},null,8,["message"])]),t("div",we,[c(m,{onClick:U},{default:r(()=>[c(o(ne)),f(" "+a(o(l)("btn_refresh")),1)]),_:1}),c(m,{type:"primary",ghost:"",onClick:D},{default:r(()=>[f(a(o(l)("btn_create_library")),1)]),_:1})]),c(H,{spinning:b.value,delay:100},{default:r(()=>[c(v,{style:{padding:"0 16px",height:"414px"}},{default:r(()=>[(i(!0),u(B,null,N(z.value,e=>(i(),u("div",{class:"library-list-item",onClick:P=>M(e),key:e.id},[t("div",Be,[t("img",{src:e.avatar,alt:""},null,8,Ne)]),t("div",Ie,[t("div",Ae,[f(a(e.library_name)+" ",1),t("span",{class:C(["type-tag",{"gray-tag":e.graph_switch==0}])},a(o(l)("tag_graph")),3),e.type==0?(i(),u("span",Ve,a(o(l)("tag_normal_library")),1)):k("",!0),e.type==1?(i(),u("span",Ee,a(o(l)("tag_external_library")),1)):k("",!0),e.type==2?(i(),u("span",Ge,a(o(l)("tag_qa_library")),1)):k("",!0),e.type==3?(i(),u("span",Oe,a(o(l)("tag_wechat_library")),1)):k("",!0)]),t("div",Re,a(e.library_intro),1)]),t("div",Te,[c(j,{disabled:o(w).default_library_id==e.id,checked:_.checkedList.includes(e.id)},null,8,["disabled","checked"])])],8,Se))),128))]),_:1})]),_:1},8,["spinning"]),t("div",We,[c(m,{onClick:s[1]||(s[1]=e=>y.value=!1)},{default:r(()=>[f(a(o(l)("btn_cancel")),1)]),_:1}),c(m,{type:"primary",onClick:$},{default:r(()=>[f(" ("+a(_.checkedList.length)+") "+a(o(l)("btn_confirm")),1)]),_:1})])])])])]),_:1},8,["open"])}}},Ke=te($e,[["__scopeId","data-v-7d180bd3"]]);export{Ke as L};
//# sourceMappingURL=library-select-alert-BCR3m1P9.js.map
