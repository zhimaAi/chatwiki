import{__esm as v,__toESM as ie}from"./rolldown-runtime-DcCx2Prq.js";import{init_vue_router as ae,init_vue_runtime_esm_bundler as U,useRoute as se}from"./vue-chunks-DkJ44Igi.js";import{require_dayjs_min as le}from"./dayjs-Br8SzNB6.js";import{__plugin_vue_export_helper_default as G,computed as k,createBaseVNode as e,createBlock as C,createCommentVNode as re,createElementBlock as m,createVNode as b,init___plugin_vue_export_helper as Q,init_open_doc as de,normalizeClass as M,onBeforeUnmount as ce,onMounted as X,openBlock as r,reactive as Z,ref as ue,resolveComponent as D,toDisplayString as l,useOpenDocStore as _e,watch as pe,withCtx as p}from"./index-cwQF3kTw.js";import{MF as S,init_cherry_markdown as ve,init_cherry_markdown_esm as me}from"./cherry-markdown-tMuKClW-.js";var fe=v({"src/assets/md-editor/theme/ant-design.less"(){}}),j,x,ge=v({"src/views/open/doc/components/base-config.js"(){j={externals:{echarts:!1,katex:!1,MathJax:!0},isPreviewOnly:!0,engine:{global:{},syntax:{image:{videoWrapper:(w,f,s)=>s},link:{target:"_blank",rel:""},autoLink:{target:"_blank",rel:"",enableShortLink:!1,shortLinkLength:20},header:{anchorStyle:"none"},codeBlock:{theme:"twilight",lineNumber:!0,expandCode:!0,copyCode:!0,editCode:!0,changeLang:!0,customBtns:[]},table:{enableChart:!1},fontEmphasis:{allowWhitespace:!1},strikethrough:{needWhitespace:!1}}},multipleFileSelection:{video:!1,audio:!1,image:!1,word:!1,pdf:!1,file:!1},toolbars:{toolbar:["bold","italic",{strikethrough:["strikethrough","underline","sub","sup","ruby","customMenuAName"]},"size","|","color","header","|","ol","ul","checklist","panel","justify","detail","|","formula",{insert:["image","audio","video","link","hr","br","code","inlineCode","formula","toc","table","pdf","word","file"]},"graph","togglePreview","shortcutKey"],toolbarRight:["fullScreen","|","export","changeLocale","wordCount"],bubble:["bold","italic","underline","strikethrough","sub","sup","quote","ruby","|","size","color","theme"],sidebar:["mobilePreview","copy"],toc:{updateLocationHash:!1,defaultModel:"full"}},editor:{autoSave2Textarea:!0,defaultModel:"edit&preview",showFullWidthMark:!0,showSuggestList:!0},themeSettings:{mainTheme:"ant-design",themeList:[{className:"ant-design",label:"ant-design"}],codeBlockTheme:"one-light"}},x=j}}),he=v({"src/views/open/doc/components/md-editor.vue?vue&type=style&index=0&scoped=0cf24de7&lang.less"(){}}),B,L,ee,ye=v({"src/views/open/doc/components/md-editor.vue"(){U(),ve(),fe(),me(),ge(),he(),Q(),B={class:"md-editor-body"},L={__name:"md-editor",emits:["inited","input","blur"],setup(w,{expose:f,emit:s}){const d=s;let t=null;const i=Z({type:"editor",content:""}),c=()=>{t=new S({...x,id:"md-editor",value:i.content,editor:{defaultModel:"previewOnly",keepDocumentScrollAfterInit:!0},previewer:{enablePreviewerBubble:!1,floatWhenClosePreviewer:!1},toolbars:{toolbar:!1,toc:{updateLocationHash:!0,defaultModel:"full",position:"fixed",cssText:"right: 20px;"}}}),t.setTheme("ant-design")},g=()=>{let n={...x,id:"md-editor",value:i.content,event:{afterInit(){d("inited")},afterChange(_){te(_)},blur:()=>{oe()}}};t=new S(n),t.setTheme("ant-design")},u=(n,_=!1)=>{t.setValue(n,_)},a=()=>t.getMarkdown(),o=n=>{u(n.content)},h=()=>({content:a()}),y=()=>{u("",!0)},te=n=>{d("input",n)},oe=n=>{d("blur",n)},ne=(n,_)=>{i.type=n,i.content=_,t&&t.destroy(),n==="editor"?g():n==="preview"&&c()};return X(()=>{}),ce(()=>{t&&t.destroy()}),f({init:ne,setContent:u,getContent:a,setDoc:o,getDoc:h,clearDoc:y}),(n,_)=>(r(),m("div",{class:M(["md-editor-wrapper",["is-"+i.type]])},[e("div",B,[e("div",{class:M([i.type+"-box"]),id:"md-editor"},null,2)])],2))}},ee=G(L,[["__scopeId","data-v-0cf24de7"]])}}),ke=v({"src/views/open/doc/index.vue?vue&type=style&index=0&scoped=0d3213e9&lang.less"(){}}),$,E,I,N,P,T,z,W,H,R,V,Y,F,K,O,q,A,J,be,xe=v({"src/views/open/doc/index.vue"(){U(),$=ie(le()),ae(),de(),ye(),ke(),Q(),E={class:"open-doc-page"},I={class:"document-page-header"},N={class:"page-header-content"},P={class:"document-title"},T={class:"document-title-icon"},z={class:"document-title-link"},W={class:"document-last-update"},H={class:"document-page-body"},R={class:"markdown-content"},V={class:"vditor-reset"},Y={class:"document-footer"},F={key:0,class:"page-turning"},K={class:"page-title"},O={key:1,class:"prev-page",href:"javascript:;"},q={class:"page-title"},A={key:1,class:"next-page",href:"javascript:;"},J={__name:"index",setup(w){const f=se(),s=_e(),d=ue(null),t=Z({title:"",body:"",prev_doc:null,next_doc:null,updatated_at:"",doc_icon:""}),i=k(()=>s.token),c=k(()=>s.previewKey),g=k(()=>f.params.id),u=async()=>{let a=await s.getDoc(g.value);t.title=a.title,t.body=a.body,t.prev_doc=a.prev_doc,t.next_doc=a.next_doc,t.doc_icon=a.doc_icon,t.updatated_at=(0,$.default)(a.update_time*1e3).format("YYYY-MM-DD HH:mm:ss"),d.value.init("preview",a.body)};return X(()=>{u()}),pe(g,()=>{u()}),(a,o)=>{const h=D("router-link"),y=D("a-tooltip");return r(),m("div",E,[e("div",I,[e("div",N,[e("h1",P,[e("span",T,l(t.doc_icon),1),e("a",z,l(t.title),1)]),e("div",W,"最近更新时间："+l(t.updatated_at),1)])]),e("div",H,[e("div",R,[e("div",V,[b(ee,{ref_key:"mdEditorRef",ref:d},null,512)]),e("div",Y,[t.prev_doc||t.next_doc?(r(),m("div",F,[e("div",null,[t.prev_doc?(r(),C(y,{key:0},{title:p(()=>[e("span",null,l(t.prev_doc.title),1)]),default:p(()=>[b(h,{class:"prev-page page-link",to:`/doc/${t.prev_doc.doc_key}?${c.value?"preview="+c.value:""}${i.value?"&token="+i.value:""}`},{default:p(()=>[o[0]||(o[0]=e("svg",{class:"w-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-jiantou_xiangzuo"})],-1)),o[1]||(o[1]=e("span",null,"上一篇：",-1)),e("span",K,l(t.prev_doc.title),1)]),_:1,__:[0,1]},8,["to"])]),_:1})):(r(),m("a",O,o[2]||(o[2]=[e("svg",{class:"w-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-jiantou_xiangzuo"})],-1),e("span",null,"上一篇：",-1),e("span",null,"无",-1)])))]),e("div",null,[t.next_doc?(r(),C(y,{key:0},{title:p(()=>[e("span",null,l(t.next_doc.title),1)]),default:p(()=>[b(h,{class:"next-page page-link",to:`/doc/${t.next_doc.doc_key}?${c.value?"preview="+c.value:""}${i.value?"&token="+i.value:""}`},{default:p(()=>[o[3]||(o[3]=e("span",null,"下一篇：",-1)),e("span",q,l(t.next_doc.title),1),o[4]||(o[4]=e("svg",{class:"w-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-jiantou_xiangyou"})],-1))]),_:1,__:[3,4]},8,["to"])]),_:1})):(r(),m("a",A,o[5]||(o[5]=[e("span",null,"下一篇：",-1),e("span",null,"无",-1),e("svg",{class:"w-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-jiantou_xiangyou"})],-1)])))])])):re("",!0)])])])])}}},be=G(J,[["__scopeId","data-v-0d3213e9"]])}});xe();export{be as default};
